!function(){let e;function t(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var r,n,s,o,a,l,u,c,d,f,h,p,g,m,y,b,v,x,w,E,A,S,k,I,_,P,C,O,T,R,B,N,D,L,M,U,F,j,z,$,H,V,q,G,W,K,J,Z,Q,X,Y,ee,et,er,en,ei,es,eo,ea="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function el(e){return e&&e.__esModule?e.default:e}var eu={},ec={},ed=ea.parcelRequire7f4b;null==ed&&((ed=function(e){if(e in eu)return eu[e].exports;if(e in ec){var t=ec[e];delete ec[e];var r={id:e,exports:{}};return eu[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){ec[e]=t},ea.parcelRequire7f4b=ed);"use strict";var ef=ed.register;ef("9ZsTY",function(e,r){"use strict";t(e.exports,"Fragment",function(){return n},function(e){return n=e}),t(e.exports,"jsx",function(){return s},function(e){return s=e}),t(e.exports,"jsxs",function(){return o},function(e){return o=e});var n,s,o,a=ed("d1AnZ"),l=Symbol.for("react.element"),u=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,d=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function h(e,t,r){var n,s={},o=null,a=null;for(n in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(a=t.ref),t)c.call(t,n)&&!f.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:l,type:e,key:o,ref:a,props:s,_owner:d.current}}n=u,s=h,o=h}),ef("d1AnZ",function(e,t){"use strict";e.exports=ed("emHj6")}),ef("emHj6",function(e,r){"use strict";t(e.exports,"Children",function(){return n},function(e){return n=e}),t(e.exports,"Component",function(){return s},function(e){return s=e}),t(e.exports,"Fragment",function(){return o},function(e){return o=e}),t(e.exports,"Profiler",function(){return a},function(e){return a=e}),t(e.exports,"PureComponent",function(){return l},function(e){return l=e}),t(e.exports,"StrictMode",function(){return u},function(e){return u=e}),t(e.exports,"Suspense",function(){return c},function(e){return c=e}),t(e.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",function(){return d},function(e){return d=e}),t(e.exports,"cloneElement",function(){return f},function(e){return f=e}),t(e.exports,"createContext",function(){return h},function(e){return h=e}),t(e.exports,"createElement",function(){return p},function(e){return p=e}),t(e.exports,"createFactory",function(){return g},function(e){return g=e}),t(e.exports,"createRef",function(){return m},function(e){return m=e}),t(e.exports,"forwardRef",function(){return y},function(e){return y=e}),t(e.exports,"isValidElement",function(){return b},function(e){return b=e}),t(e.exports,"lazy",function(){return v},function(e){return v=e}),t(e.exports,"memo",function(){return x},function(e){return x=e}),t(e.exports,"startTransition",function(){return w},function(e){return w=e}),t(e.exports,"unstable_act",function(){return E},function(e){return E=e}),t(e.exports,"useCallback",function(){return A},function(e){return A=e}),t(e.exports,"useContext",function(){return S},function(e){return S=e}),t(e.exports,"useDebugValue",function(){return k},function(e){return k=e}),t(e.exports,"useDeferredValue",function(){return I},function(e){return I=e}),t(e.exports,"useEffect",function(){return _},function(e){return _=e}),t(e.exports,"useId",function(){return P},function(e){return P=e}),t(e.exports,"useImperativeHandle",function(){return C},function(e){return C=e}),t(e.exports,"useInsertionEffect",function(){return O},function(e){return O=e}),t(e.exports,"useLayoutEffect",function(){return T},function(e){return T=e}),t(e.exports,"useMemo",function(){return R},function(e){return R=e}),t(e.exports,"useReducer",function(){return B},function(e){return B=e}),t(e.exports,"useRef",function(){return N},function(e){return N=e}),t(e.exports,"useState",function(){return D},function(e){return D=e}),t(e.exports,"useSyncExternalStore",function(){return L},function(e){return L=e}),t(e.exports,"useTransition",function(){return M},function(e){return M=e}),t(e.exports,"version",function(){return U},function(e){return U=e});var n,s,o,a,l,u,c,d,f,h,p,g,m,y,b,v,x,w,E,A,S,k,I,_,P,C,O,T,R,B,N,D,L,M,U,F=Symbol.for("react.element"),j=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),q=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),K=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),Z=Symbol.iterator,Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,Y={};function ee(e,t,r){this.props=e,this.context=t,this.refs=Y,this.updater=r||Q}function et(){}function er(e,t,r){this.props=e,this.context=t,this.refs=Y,this.updater=r||Q}ee.prototype.isReactComponent={},ee.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},ee.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},et.prototype=ee.prototype;var en=er.prototype=new et;en.constructor=er,X(en,ee.prototype),en.isPureReactComponent=!0;var ei=Array.isArray,es=Object.prototype.hasOwnProperty,eo={current:null},ea={key:!0,ref:!0,__self:!0,__source:!0};function el(e,t,r){var n,s={},o=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)es.call(t,n)&&!ea.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===s[n]&&(s[n]=l[n]);return{$$typeof:F,type:e,key:o,ref:a,props:s,_owner:eo.current}}function eu(e){return"object"==typeof e&&null!==e&&e.$$typeof===F}var ec=/\/+/g;function ed(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function ef(e,t,r){if(null==e)return e;var n=[],s=0;return!function e(t,r,n,s,o){var a,l,u,c=typeof t;("undefined"===c||"boolean"===c)&&(t=null);var d=!1;if(null===t)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case F:case j:d=!0}}if(d)return o=o(d=t),t=""===s?"."+ed(d,0):s,ei(o)?(n="",null!=t&&(n=t.replace(ec,"$&/")+"/"),e(o,r,n,"",function(e){return e})):null!=o&&(eu(o)&&(a=o,l=n+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(ec,"$&/")+"/")+t,o={$$typeof:F,type:a.type,key:l,ref:a.ref,props:a.props,_owner:a._owner}),r.push(o)),1;if(d=0,s=""===s?".":s+":",ei(t))for(var f=0;f<t.length;f++){var h=s+ed(c=t[f],f);d+=e(c,r,n,h,o)}else if("function"==typeof(h=null===(u=t)||"object"!=typeof u?null:"function"==typeof(u=Z&&u[Z]||u["@@iterator"])?u:null))for(t=h.call(t),f=0;!(c=t.next()).done;)h=s+ed(c=c.value,f++),d+=e(c,r,n,h,o);else if("object"===c)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return d}(e,n,"","",function(e){return t.call(r,e,s++)}),n}function eh(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var ep={current:null},eg={transition:null};n={map:ef,forEach:function(e,t,r){ef(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ef(e,function(){t++}),t},toArray:function(e){return ef(e,function(e){return e})||[]},only:function(e){if(!eu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},s=ee,o=z,a=H,l=er,u=$,c=W,d={ReactCurrentDispatcher:ep,ReactCurrentBatchConfig:eg,ReactCurrentOwner:eo},f=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=X({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=eo.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)es.call(t,u)&&!ea.hasOwnProperty(u)&&(n[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)n.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:F,type:e.type,key:s,ref:o,props:n,_owner:a}},h=function(e){return(e={$$typeof:q,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:V,_context:e},e.Consumer=e},p=el,g=function(e){var t=el.bind(null,e);return t.type=e,t},m=function(){return{current:null}},y=function(e){return{$$typeof:G,render:e}},b=eu,v=function(e){return{$$typeof:J,_payload:{_status:-1,_result:e},_init:eh}},x=function(e,t){return{$$typeof:K,type:e,compare:void 0===t?null:t}},w=function(e){var t=eg.transition;eg.transition={};try{e()}finally{eg.transition=t}},E=function(){throw Error("act(...) is not supported in production builds of React.")},A=function(e,t){return ep.current.useCallback(e,t)},S=function(e){return ep.current.useContext(e)},k=function(){},I=function(e){return ep.current.useDeferredValue(e)},_=function(e,t){return ep.current.useEffect(e,t)},P=function(){return ep.current.useId()},C=function(e,t,r){return ep.current.useImperativeHandle(e,t,r)},O=function(e,t){return ep.current.useInsertionEffect(e,t)},T=function(e,t){return ep.current.useLayoutEffect(e,t)},R=function(e,t){return ep.current.useMemo(e,t)},B=function(e,t,r){return ep.current.useReducer(e,t,r)},N=function(e){return ep.current.useRef(e)},D=function(e){return ep.current.useState(e)},L=function(e,t,r){return ep.current.useSyncExternalStore(e,t,r)},M=function(){return ep.current.useTransition()},U="18.2.0"}),ef("5ddGA",function(e,r){"use strict";t(e.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",function(){return H},function(e){return H=e}),t(e.exports,"createPortal",function(){return V},function(e){return V=e}),t(e.exports,"createRoot",function(){return q},function(e){return q=e}),t(e.exports,"findDOMNode",function(){return G},function(e){return G=e}),t(e.exports,"flushSync",function(){return W},function(e){return W=e}),t(e.exports,"hydrate",function(){return K},function(e){return K=e}),t(e.exports,"hydrateRoot",function(){return J},function(e){return J=e}),t(e.exports,"render",function(){return Z},function(e){return Z=e}),t(e.exports,"unmountComponentAtNode",function(){return Q},function(e){return Q=e}),t(e.exports,"unstable_batchedUpdates",function(){return X},function(e){return X=e}),t(e.exports,"unstable_renderSubtreeIntoContainer",function(){return Y},function(e){return Y=e}),t(e.exports,"version",function(){return ee},function(e){return ee=e});var n,s,o,a,l,u,c=ed("d1AnZ"),d=ed("ft3uq");function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=new Set,p={};function g(e,t){m(e,t),m(e+"Capture",t)}function m(e,t){for(p[e]=t,e=0;e<t.length;e++)h.add(t[e])}var y="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,b=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},w={};function E(e,t,r,n,s,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){A[e]=new E(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];A[t]=new E(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){A[e]=new E(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){A[e]=new E(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){A[e]=new E(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){A[e]=new E(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){A[e]=new E(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){A[e]=new E(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){A[e]=new E(e,5,!1,e.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function I(e,t,r,n){var s,o=A.hasOwnProperty(t)?A[t]:null;(null!==o?0!==o.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(n)return!1;if(null!==r)return!r.acceptsBooleans;return"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e;default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,o,n)&&(r=null),n||null===o?(s=t,(b.call(w,s)||!b.call(x,s)&&(v.test(s)?w[s]=!0:(x[s]=!0,!1)))&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r))):o.mustUseProperty?e[o.propertyName]=null===r?3!==o.type&&"":r:(t=o.attributeName,n=o.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(o=o.type)||4===o&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(S,k);A[t]=new E(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(S,k);A[t]=new E(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(S,k);A[t]=new E(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){A[e]=new E(e,1,!1,e.toLowerCase(),null,!1,!1)}),A.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){A[e]=new E(e,1,!1,e.toLowerCase(),null,!0,!0)});var _=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),C=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),F=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var z=Symbol.iterator;function $(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=z&&e[z]||e["@@iterator"])?e:null}var H,V,q,G,W,K,J,Z,Q,X,Y,ee,et,er=Object.assign;function en(e){if(void 0===et)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);et=t&&t[1]||""}return"\n"+et+e}var ei=!1;function es(e,t){if(!e||ei)return"";ei=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var s=t.stack.split("\n"),o=n.stack.split("\n"),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(1!==a||1!==l)do if(a--,0>--l||s[a]!==o[l]){var u="\n"+s[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=l)break}}}finally{ei=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?en(e):""}function eo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ea(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function el(e){e._valueTracker||(e._valueTracker=function(e){var t=ea(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function eu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ea(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function ec(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function ef(e,t){var r=t.checked;return er({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function eh(e,t){var r=null==t.defaultValue?"":t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:r=eo(null!=t.value?t.value:r),controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ep(e,t){null!=(t=t.checked)&&I(e,"checked",t,!1)}function eg(e,t){ep(e,t);var r=eo(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ey(e,t.type,r):t.hasOwnProperty("defaultValue")&&ey(e,t.type,eo(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function em(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(("submit"===n||"reset"===n)&&(void 0===t.value||null===t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ey(e,t,r){("number"!==t||ec(e.ownerDocument)!==e)&&(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var eb=Array.isArray;function ev(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(s=0,r=""+eo(r),t=null;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ex(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(f(91));return er({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ew(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(f(92));if(eb(r)){if(1<r.length)throw Error(f(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:eo(r)}}function eE(e,t){var r=eo(t.value),n=eo(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function eA(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function eS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ek(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?eS(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var eI,e_,eP=(eI=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((e_=e_||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=e_.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return eI(e,t,r,n)})}:eI);function eC(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType){r.nodeValue=t;return}}e.textContent=t}var eO={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eT=["Webkit","ms","Moz","O"];function eR(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||eO.hasOwnProperty(e)&&eO[e]?(""+t).trim():t+"px"}function eB(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),s=eR(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}Object.keys(eO).forEach(function(e){eT.forEach(function(t){eO[t=t+e.charAt(0).toUpperCase()+e.substring(1)]=eO[e]})});var eN=er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eD(e,t){if(t){if(eN[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(f(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(f(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(f(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(f(62))}}function eL(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eM=null;function eU(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var eF=null,ej=null,ez=null;function e$(e){if(e=nZ(e)){if("function"!=typeof eF)throw Error(f(280));var t=e.stateNode;t&&(t=nX(t),eF(e.stateNode,e.type,t))}}function eH(e){ej?ez?ez.push(e):ez=[e]:ej=e}function eV(){if(ej){var e=ej,t=ez;if(ez=ej=null,e$(e),t)for(e=0;e<t.length;e++)e$(t[e])}}function eq(e,t){return e(t)}function eG(){}var eW=!1;function eK(e,t,r){if(eW)return e(t,r);eW=!0;try{return eq(e,t,r)}finally{eW=!1,(null!==ej||null!==ez)&&(eG(),eV())}}function eJ(e,t){var r=e.stateNode;if(null===r)return null;var n=nX(r);if(null===n)return null;switch(r=n[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n="button"!==(e=e.type)&&"input"!==e&&"select"!==e&&"textarea"!==e),e=!n;break;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(f(231,t,typeof r));return r}var eZ=!1;if(y)try{var eQ={};Object.defineProperty(eQ,"passive",{get:function(){eZ=!0}}),window.addEventListener("test",eQ,eQ),window.removeEventListener("test",eQ,eQ)}catch(e){eZ=!1}function eX(e,t,r,n,s,o,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(e){this.onError(e)}}var eY=!1,e0=null,e1=!1,e2=null,e3={onError:function(e){eY=!0,e0=e}};function e8(e,t,r,n,s,o,a,l,u){eY=!1,e0=null,eX.apply(e3,arguments)}function e6(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(r=t.return),e=t.return;while(e)}return 3===t.tag?r:null}function e4(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function e5(e){if(e6(e)!==e)throw Error(f(188))}function e9(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=e6(e)))throw Error(f(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(n=s.return)){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return e5(s),e;if(o===n)return e5(s),t;o=o.sibling}throw Error(f(188))}if(r.return!==n.return)r=s,n=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=o;break}if(l===n){a=!0,n=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,n=s;break}if(l===n){a=!0,n=o,r=s;break}l=l.sibling}if(!a)throw Error(f(189))}}if(r.alternate!==n)throw Error(f(190))}if(3!==r.tag)throw Error(f(188));return r.stateNode.current===r?e:t}(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var r=e(t);if(null!==r)return r;t=t.sibling}return null}(e):null}var e7=d.unstable_scheduleCallback,te=d.unstable_cancelCallback,tt=d.unstable_shouldYield,tr=d.unstable_requestPaint,tn=d.unstable_now,ti=d.unstable_getCurrentPriorityLevel,ts=d.unstable_ImmediatePriority,to=d.unstable_UserBlockingPriority,ta=d.unstable_NormalPriority,tl=d.unstable_LowPriority,tu=d.unstable_IdlePriority,tc=null,td=null,tf=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(th(e)/tp|0)|0},th=Math.log,tp=Math.LN2,tg=64,tm=4194304;function ty(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return 0x7c00000&e;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return e}}function tb(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,a=0xfffffff&r;if(0!==a){var l=a&~s;0!==l?n=ty(l):0!=(o&=a)&&(n=ty(o))}else 0!=(a=r&~s)?n=ty(a):0!==o&&(n=ty(o));if(0===n)return 0;if(0!==t&&t!==n&&0==(t&s)&&((s=n&-n)>=(o=t&-t)||16===s&&0!=(4194240&o)))return t;if(0!=(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)s=1<<(r=31-tf(t)),n|=e[r],t&=~s;return n}function tv(e){return 0!=(e=-0x40000001&e.pendingLanes)?e:0x40000000&e?0x40000000:0}function tx(){var e=tg;return 0==(4194240&(tg<<=1))&&(tg=64),e}function tw(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function tE(e,t,r){e.pendingLanes|=t,0x20000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-tf(t)]=r}function tA(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-tf(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var tS=0;function tk(e){return 1<(e&=-e)?4<e?0!=(0xfffffff&e)?16:0x20000000:4:1}var tI,t_,tP,tC,tO,tT=!1,tR=[],tB=null,tN=null,tD=null,tL=new Map,tM=new Map,tU=[],tF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tj(e,t){switch(e){case"focusin":case"focusout":tB=null;break;case"dragenter":case"dragleave":tN=null;break;case"mouseover":case"mouseout":tD=null;break;case"pointerover":case"pointerout":tL.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tM.delete(t.pointerId)}}function tz(e,t,r,n,s,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},null!==t&&null!==(t=nZ(t))&&t_(t)):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s)),e}function t$(e){var t=nJ(e.target);if(null!==t){var r=e6(t);if(null!==r){if(13===(t=r.tag)){if(null!==(t=e4(r))){e.blockedOn=t,tO(e.priority,function(){tP(r)});return}}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===r.tag?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tH(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=t0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=nZ(r))&&t_(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);eM=n,r.target.dispatchEvent(n),eM=null,t.shift()}return!0}function tV(e,t,r){tH(e)&&r.delete(t)}function tq(){tT=!1,null!==tB&&tH(tB)&&(tB=null),null!==tN&&tH(tN)&&(tN=null),null!==tD&&tH(tD)&&(tD=null),tL.forEach(tV),tM.forEach(tV)}function tG(e,t){e.blockedOn===t&&(e.blockedOn=null,tT||(tT=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,tq)))}function tW(e){function t(t){return tG(t,e)}if(0<tR.length){tG(tR[0],e);for(var r=1;r<tR.length;r++){var n=tR[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==tB&&tG(tB,e),null!==tN&&tG(tN,e),null!==tD&&tG(tD,e),tL.forEach(t),tM.forEach(t),r=0;r<tU.length;r++)(n=tU[r]).blockedOn===e&&(n.blockedOn=null);for(;0<tU.length&&null===(r=tU[0]).blockedOn;)t$(r),null===r.blockedOn&&tU.shift()}var tK=_.ReactCurrentBatchConfig,tJ=!0;function tZ(e,t,r,n){var s=tS,o=tK.transition;tK.transition=null;try{tS=1,tX(e,t,r,n)}finally{tS=s,tK.transition=o}}function tQ(e,t,r,n){var s=tS,o=tK.transition;tK.transition=null;try{tS=4,tX(e,t,r,n)}finally{tS=s,tK.transition=o}}function tX(e,t,r,n){if(tJ){var s=t0(e,t,r,n);if(null===s)nw(e,t,n,tY,r),tj(e,n);else if(function(e,t,r,n,s){switch(t){case"focusin":return tB=tz(tB,e,t,r,n,s),!0;case"dragenter":return tN=tz(tN,e,t,r,n,s),!0;case"mouseover":return tD=tz(tD,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return tL.set(o,tz(tL.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,tM.set(o,tz(tM.get(o)||null,e,t,r,n,s)),!0}return!1}(s,e,t,r,n))n.stopPropagation();else if(tj(e,n),4&t&&-1<tF.indexOf(e)){for(;null!==s;){var o=nZ(s);if(null!==o&&tI(o),null===(o=t0(e,t,r,n))&&nw(e,t,n,tY,r),o===s)break;s=o}null!==s&&n.stopPropagation()}else nw(e,t,n,null,r)}}var tY=null;function t0(e,t,r,n){if(tY=null,null!==(e=nJ(e=eU(n))))if(null===(t=e6(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=e4(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tY=e,null}function t1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ti()){case ts:return 1;case to:return 4;case ta:case tl:return 16;case tu:return 0x20000000;default:return 16}default:return 16}}var t2=null,t3=null,t8=null;function t6(){if(t8)return t8;var e,t,r=t3,n=r.length,s="value"in t2?t2.value:t2.textContent,o=s.length;for(e=0;e<n&&r[e]===s[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===s[o-t];t++);return t8=s.slice(e,1<t?1-t:void 0)}function t4(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function t5(){return!0}function t9(){return!1}function t7(e){function t(t,r,n,s,o){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?t5:t9,this.isPropagationStopped=t9,this}return er(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=t5)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=t5)},persist:function(){},isPersistent:t5}),t}var re,rt,rr,rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ri=t7(rn),rs=er({},rn,{view:0,detail:0}),ro=t7(rs),ra=er({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rb,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rr&&(rr&&"mousemove"===e.type?(re=e.screenX-rr.screenX,rt=e.screenY-rr.screenY):rt=re=0,rr=e),re)},movementY:function(e){return"movementY"in e?e.movementY:rt}}),rl=t7(ra),ru=t7(er({},ra,{dataTransfer:0})),rc=t7(er({},rs,{relatedTarget:0})),rd=t7(er({},rn,{animationName:0,elapsedTime:0,pseudoElement:0})),rf=t7(er({},rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),rh=t7(er({},rn,{data:0})),rp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ry(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=rm[e])&&!!t[e]}function rb(){return ry}var rv=t7(er({},rs,{key:function(e){if(e.key){var t=rp[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=t4(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?rg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rb,charCode:function(e){return"keypress"===e.type?t4(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?t4(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),rx=t7(er({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),rw=t7(er({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rb})),rE=t7(er({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0})),rA=t7(er({},ra,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),rS=[9,13,27,32],rk=y&&"CompositionEvent"in window,rI=null;y&&"documentMode"in document&&(rI=document.documentMode);var r_=y&&"TextEvent"in window&&!rI,rP=y&&(!rk||rI&&8<rI&&11>=rI),rC=!1;function rO(e,t){switch(e){case"keyup":return -1!==rS.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rT(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var rR=!1,rB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!rB[e.type]:"textarea"===t}function rD(e,t,r,n){eH(n),0<(t=nA(t,"onChange")).length&&(r=new ri("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var rL=null,rM=null;function rU(e){ng(e,0)}function rF(e){if(eu(nQ(e)))return e}function rj(e,t){if("change"===e)return t}var rz=!1;if(y){if(y){var r$="oninput"in document;if(!r$){var rH=document.createElement("div");rH.setAttribute("oninput","return;"),r$="function"==typeof rH.oninput}n=r$}else n=!1;rz=n&&(!document.documentMode||9<document.documentMode)}function rV(){rL&&(rL.detachEvent("onpropertychange",rq),rM=rL=null)}function rq(e){if("value"===e.propertyName&&rF(rM)){var t=[];rD(t,rM,e,eU(e)),eK(rU,t)}}function rG(e,t,r){"focusin"===e?(rV(),rL=t,rM=r,rL.attachEvent("onpropertychange",rq)):"focusout"===e&&rV()}function rW(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return rF(rM)}function rK(e,t){if("click"===e)return rF(t)}function rJ(e,t){if("input"===e||"change"===e)return rF(t)}var rZ="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function rQ(e,t){if(rZ(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!b.call(t,s)||!rZ(e[s],t[s]))return!1}return!0}function rX(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rY(e,t){var r,n=rX(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rX(n)}}function r0(){for(var e=window,t=ec();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(r)e=t.contentWindow;else break;t=ec(e.document)}return t}function r1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var r2=y&&"documentMode"in document&&11>=document.documentMode,r3=null,r8=null,r6=null,r4=!1;function r5(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;r4||null==r3||r3!==ec(n)||(n="selectionStart"in(n=r3)&&r1(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},r6&&rQ(r6,n)||(r6=n,0<(n=nA(r8,"onSelect")).length&&(t=new ri("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=r3)))}function r9(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var r7={animationend:r9("Animation","AnimationEnd"),animationiteration:r9("Animation","AnimationIteration"),animationstart:r9("Animation","AnimationStart"),transitionend:r9("Transition","TransitionEnd")},ne={},nt={};function nr(e){if(ne[e])return ne[e];if(!r7[e])return e;var t,r=r7[e];for(t in r)if(r.hasOwnProperty(t)&&t in nt)return ne[e]=r[t];return e}y&&(nt=document.createElement("div").style,"AnimationEvent"in window||(delete r7.animationend.animation,delete r7.animationiteration.animation,delete r7.animationstart.animation),"TransitionEvent"in window||delete r7.transitionend.transition);var nn=nr("animationend"),ni=nr("animationiteration"),ns=nr("animationstart"),no=nr("transitionend"),na=new Map,nl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nu(e,t){na.set(e,t),g(t,[e])}for(var nc=0;nc<nl.length;nc++){var nd=nl[nc];nu(nd.toLowerCase(),"on"+(nd[0].toUpperCase()+nd.slice(1)))}nu(nn,"onAnimationEnd"),nu(ni,"onAnimationIteration"),nu(ns,"onAnimationStart"),nu("dblclick","onDoubleClick"),nu("focusin","onFocus"),nu("focusout","onBlur"),nu(no,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nh=new Set("cancel close invalid load scroll toggle".split(" ").concat(nf));function np(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,s,o,a,l,u){if(e8.apply(this,arguments),eY){if(eY){var c=e0;eY=!1,e0=null}else throw Error(f(198));e1||(e1=!0,e2=c)}}(n,t,void 0,e),e.currentTarget=null}function ng(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;np(s,l,c),o=u}else for(a=0;a<n.length;a++){if(u=(l=n[a]).instance,c=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;np(s,l,c),o=u}}}if(e1)throw e=e2,e1=!1,e2=null,e}function nm(e,t){var r=t[nG];void 0===r&&(r=t[nG]=new Set);var n=e+"__bubble";r.has(n)||(nx(t,e,2,!1),r.add(n))}function ny(e,t,r){var n=0;t&&(n|=4),nx(r,e,n,t)}var nb="_reactListening"+Math.random().toString(36).slice(2);function nv(e){if(!e[nb]){e[nb]=!0,h.forEach(function(t){"selectionchange"!==t&&(nh.has(t)||ny(t,!1,e),ny(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[nb]||(t[nb]=!0,ny("selectionchange",!1,t))}}function nx(e,t,r,n){switch(t1(t)){case 1:var s=tZ;break;case 4:s=tQ;break;default:s=tX}r=s.bind(null,t,r,e),s=void 0,eZ&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(s=!0),n?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function nw(e,t,r,n,s){var o=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var l=n.stateNode.containerInfo;if(l===s||8===l.nodeType&&l.parentNode===s)break;if(4===a)for(a=n.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===s||8===u.nodeType&&u.parentNode===s))return;a=a.return}for(;null!==l;){if(null===(a=nJ(l)))return;if(5===(u=a.tag)||6===u){n=o=a;continue e}l=l.parentNode}}n=n.return}eK(function(){var n=o,s=eU(r),a=[];e:{var l=na.get(e);if(void 0!==l){var u=ri,c=e;switch(e){case"keypress":if(0===t4(r))break e;case"keydown":case"keyup":u=rv;break;case"focusin":c="focus",u=rc;break;case"focusout":c="blur",u=rc;break;case"beforeblur":case"afterblur":u=rc;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=rw;break;case nn:case ni:case ns:u=rd;break;case no:u=rE;break;case"scroll":u=ro;break;case"wheel":u=rA;break;case"copy":case"cut":case"paste":u=rf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=rx}var d=0!=(4&t),f=!d&&"scroll"===e,h=d?null!==l?l+"Capture":null:l;d=[];for(var p,g=n;null!==g;){var m=(p=g).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&null!=(m=eJ(g,h))&&d.push(nE(g,m,p))),f)break;g=g.return}0<d.length&&(l=new u(l,c,null,r,s),a.push({event:l,listeners:d}))}}if(0==(7&t)){if((l="mouseover"===e||"pointerover"===e,u="mouseout"===e||"pointerout"===e,!(l&&r!==eM&&(c=r.relatedTarget||r.fromElement)&&(nJ(c)||c[nq])))&&(u||l)&&(l=s.window===s?s:(l=s.ownerDocument)?l.defaultView||l.parentWindow:window,u?(c=r.relatedTarget||r.toElement,u=n,null!==(c=c?nJ(c):null)&&(f=e6(c),c!==f||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=n),u!==c)){if(d=rl,m="onMouseLeave",h="onMouseEnter",g="mouse",("pointerout"===e||"pointerover"===e)&&(d=rx,m="onPointerLeave",h="onPointerEnter",g="pointer"),f=null==u?l:nQ(u),p=null==c?l:nQ(c),(l=new d(m,g+"leave",u,r,s)).target=f,l.relatedTarget=p,m=null,nJ(s)===n&&((d=new d(h,g+"enter",c,r,s)).target=p,d.relatedTarget=f,m=d),f=m,u&&c)t:{for(d=u,h=c,g=0,p=d;p;p=nS(p))g++;for(p=0,m=h;m;m=nS(m))p++;for(;0<g-p;)d=nS(d),g--;for(;0<p-g;)h=nS(h),p--;for(;g--;){if(d===h||null!==h&&d===h.alternate)break t;d=nS(d),h=nS(h)}d=null}else d=null;null!==u&&nk(a,l,u,d,!1),null!==c&&null!==f&&nk(a,f,c,d,!0)}e:{if("select"===(u=(l=n?nQ(n):window).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type)var y,b=rj;else if(rN(l))if(rz)b=rJ;else{b=rW;var v=rG}else(u=l.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(b=rK);if(b&&(b=b(e,n))){rD(a,b,r,s);break e}v&&v(e,l,n),"focusout"===e&&(v=l._wrapperState)&&v.controlled&&"number"===l.type&&ey(l,"number",l.value)}switch(v=n?nQ(n):window,e){case"focusin":(rN(v)||"true"===v.contentEditable)&&(r3=v,r8=n,r6=null);break;case"focusout":r6=r8=r3=null;break;case"mousedown":r4=!0;break;case"contextmenu":case"mouseup":case"dragend":r4=!1,r5(a,r,s);break;case"selectionchange":if(r2)break;case"keydown":case"keyup":r5(a,r,s)}if(rk)t:{switch(e){case"compositionstart":var x="onCompositionStart";break t;case"compositionend":x="onCompositionEnd";break t;case"compositionupdate":x="onCompositionUpdate";break t}x=void 0}else rR?rO(e,r)&&(x="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(x="onCompositionStart");x&&(rP&&"ko"!==r.locale&&(rR||"onCompositionStart"!==x?"onCompositionEnd"===x&&rR&&(y=t6()):(t3="value"in(t2=s)?t2.value:t2.textContent,rR=!0)),0<(v=nA(n,x)).length&&(x=new rh(x,e,null,r,s),a.push({event:x,listeners:v}),y?x.data=y:null!==(y=rT(r))&&(x.data=y))),(y=r_?function(e,t){switch(e){case"compositionend":return rT(t);case"keypress":if(32!==t.which)return null;return rC=!0," ";case"textInput":return" "===(e=t.data)&&rC?null:e;default:return null}}(e,r):function(e,t){if(rR)return"compositionend"===e||!rk&&rO(e,t)?(e=t6(),t8=t3=t2=null,rR=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rP&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(n=nA(n,"onBeforeInput")).length&&(s=new rh("onBeforeInput","beforeinput",null,r,s),a.push({event:s,listeners:n}),s.data=y)}ng(a,t)})}function nE(e,t,r){return{instance:e,listener:t,currentTarget:r}}function nA(e,t){for(var r=t+"Capture",n=[];null!==e;){var s=e,o=s.stateNode;5===s.tag&&null!==o&&(s=o,null!=(o=eJ(e,r))&&n.unshift(nE(e,o,s)),null!=(o=eJ(e,t))&&n.push(nE(e,o,s))),e=e.return}return n}function nS(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag)return e||null}function nk(e,t,r,n,s){for(var o=t._reactName,a=[];null!==r&&r!==n;){var l=r,u=l.alternate,c=l.stateNode;if(null!==u&&u===n)break;5===l.tag&&null!==c&&(l=c,s?null!=(u=eJ(r,o))&&a.unshift(nE(r,u,l)):s||null!=(u=eJ(r,o))&&a.push(nE(r,u,l))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var nI=/\r\n?/g,n_=/\u0000|\uFFFD/g;function nP(e){return("string"==typeof e?e:""+e).replace(nI,"\n").replace(n_,"")}function nC(e,t,r){if(t=nP(t),nP(e)!==t&&r)throw Error(f(425))}function nO(){}var nT=null,nR=null;function nB(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var nN="function"==typeof setTimeout?setTimeout:void 0,nD="function"==typeof clearTimeout?clearTimeout:void 0,nL="function"==typeof Promise?Promise:void 0,nM="function"==typeof queueMicrotask?queueMicrotask:void 0!==nL?function(e){return nL.resolve(null).then(e).catch(nU)}:nN;function nU(e){setTimeout(function(){throw e})}function nF(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0===n){e.removeChild(s),tW(t);return}n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=s}while(r)tW(t)}function nj(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function nz(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var n$=Math.random().toString(36).slice(2),nH="__reactFiber$"+n$,nV="__reactProps$"+n$,nq="__reactContainer$"+n$,nG="__reactEvents$"+n$,nW="__reactListeners$"+n$,nK="__reactHandles$"+n$;function nJ(e){var t=e[nH];if(t)return t;for(var r=e.parentNode;r;){if(t=r[nq]||r[nH]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=nz(e);null!==e;){if(r=e[nH])return r;e=nz(e)}return t}r=(e=r).parentNode}return null}function nZ(e){return(e=e[nH]||e[nq])&&(5===e.tag||6===e.tag||13===e.tag||3===e.tag)?e:null}function nQ(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(f(33))}function nX(e){return e[nV]||null}var nY=[],n0=-1;function n1(e){return{current:e}}function n2(e){0>n0||(e.current=nY[n0],nY[n0]=null,n0--)}function n3(e,t){nY[++n0]=e.current,e.current=t}var n8={},n6=n1(n8),n4=n1(!1),n5=n8;function n9(e,t){var r=e.type.contextTypes;if(!r)return n8;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s,o={};for(s in r)o[s]=t[s];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function n7(e){return null!=(e=e.childContextTypes)}function ie(){n2(n4),n2(n6)}function it(e,t,r){if(n6.current!==n8)throw Error(f(168));n3(n6,t),n3(n4,r)}function ir(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var s in n=n.getChildContext())if(!(s in t))throw Error(f(108,function(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case O:return"Fragment";case C:return"Portal";case R:return"Profiler";case T:return"StrictMode";case L:return"Suspense";case M:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case N:return(t.displayName||"Context")+".Consumer";case B:return(t._context.displayName||"Context")+".Provider";case D:var r=t.render;return(t=t.displayName)||(t=""!==(t=r.displayName||r.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case U:return null!==(r=t.displayName||null)?r:e(t.type)||"Memo";case F:r=t._payload,t=t._init;try{return e(t(r))}catch(e){}}return null}(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}(e)||"Unknown",s));return er({},r,n)}function ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||n8,n5=n6.current,n3(n6,e),n3(n4,n4.current),!0}function is(e,t,r){var n=e.stateNode;if(!n)throw Error(f(169));r?(n.__reactInternalMemoizedMergedChildContext=e=ir(e,t,n5),n2(n4),n2(n6),n3(n6,e)):n2(n4),n3(n4,r)}var io=null,ia=!1,il=!1;function iu(e){null===io?io=[e]:io.push(e)}function ic(){if(!il&&null!==io){il=!0;var e=0,t=tS;try{var r=io;for(tS=1;e<r.length;e++){var n=r[e];do n=n(!0);while(null!==n)}io=null,ia=!1}catch(t){throw null!==io&&(io=io.slice(e+1)),e7(ts,ic),t}finally{tS=t,il=!1}}return null}var id=[],ih=0,ip=null,ig=0,im=[],iy=0,ib=null,iv=1,ix="";function iw(e,t){id[ih++]=ig,id[ih++]=ip,ip=e,ig=t}function iE(e,t,r){im[iy++]=iv,im[iy++]=ix,im[iy++]=ib,ib=e;var n=iv;e=ix;var s=32-tf(n)-1;n&=~(1<<s),r+=1;var o=32-tf(t)+s;if(30<o){var a=s-s%5;o=(n&(1<<a)-1).toString(32),n>>=a,s-=a,iv=1<<32-tf(t)+s|r<<s|n,ix=o+e}else iv=1<<o|r<<s|n,ix=e}function iA(e){null!==e.return&&(iw(e,1),iE(e,1,0))}function iS(e){for(;e===ip;)ip=id[--ih],id[ih]=null,ig=id[--ih],id[ih]=null;for(;e===ib;)ib=im[--iy],im[iy]=null,ix=im[--iy],im[iy]=null,iv=im[--iy],im[iy]=null}var ik=null,iI=null,i_=!1,iP=null;function iC(e,t){var r=a7(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function iO(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ik=e,iI=nj(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ik=e,iI=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(e.memoizedState={dehydrated:t,treeContext:r=null!==ib?{id:iv,overflow:ix}:null,retryLane:0x40000000},(r=a7(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ik=e,iI=null,!0);default:return!1}}function iT(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function iR(e){if(i_){var t=iI;if(t){var r=t;if(!iO(e,t)){if(iT(e))throw Error(f(418));t=nj(r.nextSibling);var n=ik;t&&iO(e,t)?iC(n,r):(e.flags=-4097&e.flags|2,i_=!1,ik=e)}}else{if(iT(e))throw Error(f(418));e.flags=-4097&e.flags|2,i_=!1,ik=e}}}function iB(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ik=e}function iN(e){if(e!==ik)return!1;if(!i_)return iB(e),i_=!0,!1;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nB(e.type,e.memoizedProps)),t&&(t=iI)){if(iT(e))throw iD(),Error(f(418));for(;t;)iC(e,t),t=nj(t.nextSibling)}if(iB(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(f(317));e:{for(t=0,e=e.nextSibling;e;){if(8===e.nodeType){var t,r=e.data;if("/$"===r){if(0===t){iI=nj(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}iI=null}}else iI=ik?nj(e.stateNode.nextSibling):null;return!0}function iD(){for(var e=iI;e;)e=nj(e.nextSibling)}function iL(){iI=ik=null,i_=!1}function iM(e){null===iP?iP=[e]:iP.push(e)}var iU=_.ReactCurrentBatchConfig;function iF(e,t){if(e&&e.defaultProps)for(var r in t=er({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}var ij=n1(null),iz=null,i$=null,iH=null;function iV(){iH=i$=iz=null}function iq(e){var t=ij.current;n2(ij),e._currentValue=t}function iG(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function iW(e,t){iz=e,iH=i$=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(oE=!0),e.firstContext=null)}function iK(e){var t=e._currentValue;if(iH!==e)if(e={context:e,memoizedValue:t,next:null},null===i$){if(null===iz)throw Error(f(308));i$=e,iz.dependencies={lanes:0,firstContext:e}}else i$=i$.next=e;return t}var iJ=null;function iZ(e){null===iJ?iJ=[e]:iJ.push(e)}function iQ(e,t,r,n){var s=t.interleaved;return null===s?(r.next=r,iZ(t)):(r.next=s.next,s.next=r),t.interleaved=r,iX(e,n)}function iX(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var iY=!1;function i0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function i2(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function i3(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&au)){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,iX(e,r)}return null===(s=n.interleaved)?(t.next=t,iZ(n)):(t.next=s.next,s.next=t),n.interleaved=t,iX(e,r)}function i8(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&r))){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,tA(e,r)}}function i6(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var s=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?s=o=a:o=o.next=a,r=r.next}while(null!==r)null===o?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function i4(e,t,r,n){var s=e.updateQueue;iY=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?o=c:a.next=c,a=u;var d=e.alternate;null!==d&&(l=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u)}if(null!==o){var f=s.baseState;for(a=0,d=c=u=null,l=o;;){var h=l.lane,p=l.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,m=l;switch(h=t,p=r,m.tag){case 1:if("function"==typeof(g=m.payload)){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(h="function"==typeof(g=m.payload)?g.call(p,f,h):g))break e;f=er({},f,h);break e;case 2:iY=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=p,u=f):d=d.next=p,a|=h;if(null===(l=l.next))if(null===(l=s.shared.pending))break;else l=(h=l).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}if(null===d&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do a|=s.lane,s=s.next;while(s!==t)}else null===o&&(s.shared.lanes=0);ay|=a,e.lanes=a,e.memoizedState=f}}function i5(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(null!==s){if(n.callback=null,n=r,"function"!=typeof s)throw Error(f(191,s));s.call(n)}}}var i9=(new c.Component).refs;function i7(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:er({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var se={isMounted:function(e){return!!(e=e._reactInternals)&&e6(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=aD(),s=aL(e),o=i2(n,s);o.payload=t,null!=r&&(o.callback=r),null!==(t=i3(e,o,s))&&(aM(t,e,s,n),i8(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=aD(),s=aL(e),o=i2(n,s);o.tag=1,o.payload=t,null!=r&&(o.callback=r),null!==(t=i3(e,o,s))&&(aM(t,e,s,n),i8(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=aD(),n=aL(e),s=i2(r,n);s.tag=2,null!=t&&(s.callback=t),null!==(t=i3(e,s,n))&&(aM(t,e,n,r),i8(t,e,n))}};function st(e,t,r,n,s,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||!rQ(r,n)||!rQ(s,o)}function sr(e,t,r){var n=!1,s=n8,o=t.contextType;return"object"==typeof o&&null!==o?o=iK(o):(s=n7(t)?n5:n6.current,o=(n=null!=(n=t.contextTypes))?n9(e,s):n8),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=se,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function sn(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&se.enqueueReplaceState(t,t.state,null)}function si(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs=i9,i0(e);var o=t.contextType;"object"==typeof o&&null!==o?s.context=iK(o):s.context=n9(e,o=n7(t)?n5:n6.current),s.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(i7(e,t,o,r),s.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(t=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&se.enqueueReplaceState(s,s.state,null),i4(e,r,s,n),s.state=e.memoizedState),"function"==typeof s.componentDidMount&&(e.flags|=4194308)}function ss(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(f(309));var n=r.stateNode}if(!n)throw Error(f(147,e));var s=n,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=s.refs;t===i9&&(t=s.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(f(284));if(!r._owner)throw Error(f(290,e))}return e}function so(e,t){throw Error(f(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sa(e){return(0,e._init)(e._payload)}function sl(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=lt(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return(t.index=n,e)?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?(t=ls(r,e.mode,n)).return=e:(t=s(t,r)).return=e,t}function u(e,t,r,n){var o=r.type;return o===O?d(e,t,r.props.children,n,r.key):(null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===F&&sa(o)===t.type)?(n=s(t,r.props)).ref=ss(e,t,r):(n=lr(r.type,r.key,r.props,null,e.mode,n)).ref=ss(e,t,r),n.return=e,n)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?(t=lo(r,e.mode,n)).return=e:(t=s(t,r.children||[])).return=e,t}function d(e,t,r,n,o){return null===t||7!==t.tag?(t=ln(r,e.mode,n,o)).return=e:(t=s(t,r)).return=e,t}function h(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=ls(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case P:return(r=lr(t.type,t.key,t.props,null,e.mode,r)).ref=ss(e,null,t),r.return=e,r;case C:return(t=lo(t,e.mode,r)).return=e,t;case F:return h(e,(0,t._init)(t._payload),r)}if(eb(t)||$(t))return(t=ln(t,e.mode,r,null)).return=e,t;so(e,t)}return null}function p(e,t,r,n){var s=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==s?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case P:return r.key===s?u(e,t,r,n):null;case C:return r.key===s?c(e,t,r,n):null;case F:return p(e,t,(s=r._init)(r._payload),n)}if(eb(r)||$(r))return null!==s?null:d(e,t,r,n,null);so(e,r)}return null}function g(e,t,r,n,s){if("string"==typeof n&&""!==n||"number"==typeof n)return l(t,e=e.get(r)||null,""+n,s);if("object"==typeof n&&null!==n){switch(n.$$typeof){case P:return u(t,e=e.get(null===n.key?r:n.key)||null,n,s);case C:return c(t,e=e.get(null===n.key?r:n.key)||null,n,s);case F:return g(e,t,r,(0,n._init)(n._payload),s)}if(eb(n)||$(n))return d(t,e=e.get(r)||null,n,s,null);so(t,n)}return null}return function l(u,c,d,m){if("object"==typeof d&&null!==d&&d.type===O&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case P:e:{for(var y=d.key,b=c;null!==b;){if(b.key===y){if((y=d.type)===O){if(7===b.tag){r(u,b.sibling),(c=s(b,d.props.children)).return=u,u=c;break e}}else if(b.elementType===y||"object"==typeof y&&null!==y&&y.$$typeof===F&&sa(y)===b.type){r(u,b.sibling),(c=s(b,d.props)).ref=ss(u,b,d),c.return=u,u=c;break e}r(u,b);break}t(u,b),b=b.sibling}d.type===O?((c=ln(d.props.children,u.mode,m,d.key)).return=u,u=c):((m=lr(d.type,d.key,d.props,null,u.mode,m)).ref=ss(u,c,d),m.return=u,u=m)}return a(u);case C:e:{for(b=d.key;null!==c;){if(c.key===b)if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){r(u,c.sibling),(c=s(c,d.children||[])).return=u,u=c;break e}else{r(u,c);break}t(u,c),c=c.sibling}(c=lo(d,u.mode,m)).return=u,u=c}return a(u);case F:return l(u,c,(b=d._init)(d._payload),m)}if(eb(d))return function(s,a,l,u){for(var c=null,d=null,f=a,m=a=0,y=null;null!==f&&m<l.length;m++){f.index>m?(y=f,f=null):y=f.sibling;var b=p(s,f,l[m],u);if(null===b){null===f&&(f=y);break}e&&f&&null===b.alternate&&t(s,f),a=o(b,a,m),null===d?c=b:d.sibling=b,d=b,f=y}if(m===l.length)return r(s,f),i_&&iw(s,m),c;if(null===f){for(;m<l.length;m++)null!==(f=h(s,l[m],u))&&(a=o(f,a,m),null===d?c=f:d.sibling=f,d=f);return i_&&iw(s,m),c}for(f=n(s,f);m<l.length;m++)null!==(y=g(f,s,m,l[m],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),a=o(y,a,m),null===d?c=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(s,e)}),i_&&iw(s,m),c}(u,c,d,m);if($(d))return function(s,a,l,u){var c=$(l);if("function"!=typeof c)throw Error(f(150));if(null==(l=c.call(l)))throw Error(f(151));for(var d=c=null,m=a,y=a=0,b=null,v=l.next();null!==m&&!v.done;y++,v=l.next()){m.index>y?(b=m,m=null):b=m.sibling;var x=p(s,m,v.value,u);if(null===x){null===m&&(m=b);break}e&&m&&null===x.alternate&&t(s,m),a=o(x,a,y),null===d?c=x:d.sibling=x,d=x,m=b}if(v.done)return r(s,m),i_&&iw(s,y),c;if(null===m){for(;!v.done;y++,v=l.next())null!==(v=h(s,v.value,u))&&(a=o(v,a,y),null===d?c=v:d.sibling=v,d=v);return i_&&iw(s,y),c}for(m=n(s,m);!v.done;y++,v=l.next())null!==(v=g(m,s,y,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?y:v.key),a=o(v,a,y),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),i_&&iw(s,y),c}(u,c,d,m);so(u,d)}return"string"==typeof d&&""!==d||"number"==typeof d?(d=""+d,null!==c&&6===c.tag?(r(u,c.sibling),(c=s(c,d)).return=u):(r(u,c),(c=ls(d,u.mode,m)).return=u),a(u=c)):r(u,c)}}var su=sl(!0),sc=sl(!1),sd={},sf=n1(sd),sh=n1(sd),sp=n1(sd);function sg(e){if(e===sd)throw Error(f(174));return e}function sm(e,t){switch(n3(sp,t),n3(sh,e),n3(sf,sd),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ek(null,"");break;default:t=ek(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}n2(sf),n3(sf,t)}function sy(){n2(sf),n2(sh),n2(sp)}function sb(e){sg(sp.current);var t=sg(sf.current),r=ek(t,e.type);t!==r&&(n3(sh,e),n3(sf,r))}function sv(e){sh.current===e&&(n2(sf),n2(sh))}var sx=n1(0);function sw(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sE=[];function sA(){for(var e=0;e<sE.length;e++)sE[e]._workInProgressVersionPrimary=null;sE.length=0}var sS=_.ReactCurrentDispatcher,sk=_.ReactCurrentBatchConfig,sI=0,s_=null,sP=null,sC=null,sO=!1,sT=!1,sR=0,sB=0;function sN(){throw Error(f(321))}function sD(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!rZ(e[r],t[r]))return!1;return!0}function sL(e,t,r,n,s,o){if(sI=o,s_=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sS.current=null===e||null===e.memoizedState?ou:oc,e=r(n,s),sT){o=0;do{if(sT=!1,sR=0,25<=o)throw Error(f(301));o+=1,sC=sP=null,t.updateQueue=null,sS.current=od,e=r(n,s)}while(sT)}if(sS.current=ol,t=null!==sP&&null!==sP.next,sI=0,sC=sP=s_=null,sO=!1,t)throw Error(f(300));return e}function sM(){var e=0!==sR;return sR=0,e}function sU(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===sC?s_.memoizedState=sC=e:sC=sC.next=e,sC}function sF(){if(null===sP){var e=s_.alternate;e=null!==e?e.memoizedState:null}else e=sP.next;var t=null===sC?s_.memoizedState:sC.next;if(null!==t)sC=t,sP=e;else{if(null===e)throw Error(f(310));e={memoizedState:(sP=e).memoizedState,baseState:sP.baseState,baseQueue:sP.baseQueue,queue:sP.queue,next:null},null===sC?s_.memoizedState=sC=e:sC=sC.next=e}return sC}function sj(e,t){return"function"==typeof t?t(e):t}function sz(e){var t=sF(),r=t.queue;if(null===r)throw Error(f(311));r.lastRenderedReducer=e;var n=sP,s=n.baseQueue,o=r.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}n.baseQueue=s=o,r.pending=null}if(null!==s){o=s.next,n=n.baseState;var l=a=null,u=null,c=o;do{var d=c.lane;if((sI&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,a=n):u=u.next=h,s_.lanes|=d,ay|=d}c=c.next}while(null!==c&&c!==o)null===u?a=n:u.next=l,rZ(n,t.memoizedState)||(oE=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=u,r.lastRenderedState=n}if(null!==(e=r.interleaved)){s=e;do o=s.lane,s_.lanes|=o,ay|=o,s=s.next;while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function s$(e){var t=sF(),r=t.queue;if(null===r)throw Error(f(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(null!==s){r.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s)rZ(o,t.memoizedState)||(oE=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function sH(){}function sV(e,t){var r=s_,n=sF(),s=t(),o=!rZ(n.memoizedState,s);if(o&&(n.memoizedState=s,oE=!0),n=n.queue,s2(sW.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==sC&&1&sC.memoizedState.tag){if(r.flags|=2048,sQ(9,sG.bind(null,r,n,s,t),void 0,null),null===ac)throw Error(f(349));0!=(30&sI)||sq(r,t,s)}return s}function sq(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=s_.updateQueue)?(t={lastEffect:null,stores:null},s_.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function sG(e,t,r,n){t.value=r,t.getSnapshot=n,sK(t)&&sJ(e)}function sW(e,t,r){return r(function(){sK(t)&&sJ(e)})}function sK(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rZ(e,r)}catch(e){return!0}}function sJ(e){var t=iX(e,1);null!==t&&aM(t,e,1,-1)}function sZ(e){var t=sU();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,t.queue=e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sj,lastRenderedState:e},e=e.dispatch=oi.bind(null,s_,e),[t.memoizedState,e]}function sQ(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=s_.updateQueue)?(t={lastEffect:null,stores:null},s_.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function sX(){return sF().memoizedState}function sY(e,t,r,n){var s=sU();s_.flags|=e,s.memoizedState=sQ(1|t,r,void 0,void 0===n?null:n)}function s0(e,t,r,n){var s=sF();n=void 0===n?null:n;var o=void 0;if(null!==sP){var a=sP.memoizedState;if(o=a.destroy,null!==n&&sD(n,a.deps)){s.memoizedState=sQ(t,r,o,n);return}}s_.flags|=e,s.memoizedState=sQ(1|t,r,o,n)}function s1(e,t){return sY(8390656,8,e,t)}function s2(e,t){return s0(2048,8,e,t)}function s3(e,t){return s0(4,2,e,t)}function s8(e,t){return s0(4,4,e,t)}function s6(e,t){return"function"==typeof t?(t(e=e()),function(){t(null)}):null!=t?(t.current=e=e(),function(){t.current=null}):void 0}function s4(e,t,r){return r=null!=r?r.concat([e]):null,s0(4,4,s6.bind(null,t,e),r)}function s5(){}function s9(e,t){var r=sF();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&sD(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function s7(e,t){var r=sF();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&sD(t,n[1])?n[0]:(r.memoizedState=[e=e(),t],e)}function oe(e,t,r){return 0==(21&sI)?(e.baseState&&(e.baseState=!1,oE=!0),e.memoizedState=r):(rZ(r,t)||(r=tx(),s_.lanes|=r,ay|=r,e.baseState=!0),t)}function ot(e,t){var r=tS;tS=0!==r&&4>r?r:4,e(!0);var n=sk.transition;sk.transition={};try{e(!1),t()}finally{tS=r,sk.transition=n}}function or(){return sF().memoizedState}function on(e,t,r){var n=aL(e);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},os(e)?oo(t,r):null!==(r=iQ(e,t,r,n))&&(aM(r,e,n,aD()),oa(r,t,n))}function oi(e,t,r){var n=aL(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(os(e))oo(t,s);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,rZ(l,a)){var u=t.interleaved;null===u?(s.next=s,iZ(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch(e){}finally{}null!==(r=iQ(e,t,s,n))&&(aM(r,e,n,s=aD()),oa(r,t,n))}}function os(e){var t=e.alternate;return e===s_||null!==t&&t===s_}function oo(e,t){sT=sO=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function oa(e,t,r){if(0!=(4194240&r)){var n=t.lanes;n&=e.pendingLanes,t.lanes=r|=n,tA(e,r)}}var ol={readContext:iK,useCallback:sN,useContext:sN,useEffect:sN,useImperativeHandle:sN,useInsertionEffect:sN,useLayoutEffect:sN,useMemo:sN,useReducer:sN,useRef:sN,useState:sN,useDebugValue:sN,useDeferredValue:sN,useTransition:sN,useMutableSource:sN,useSyncExternalStore:sN,useId:sN,unstable_isNewReconciler:!1},ou={readContext:iK,useCallback:function(e,t){return sU().memoizedState=[e,void 0===t?null:t],e},useContext:iK,useEffect:s1,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,sY(4194308,4,s6.bind(null,t,e),r)},useLayoutEffect:function(e,t){return sY(4194308,4,e,t)},useInsertionEffect:function(e,t){return sY(4,2,e,t)},useMemo:function(e,t){return t=void 0===t?null:t,sU().memoizedState=[e=e(),t],e},useReducer:function(e,t,r){var n=sU();return n.memoizedState=n.baseState=t=void 0!==r?r(t):t,n.queue=e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=on.bind(null,s_,e),[n.memoizedState,e]},useRef:function(e){return sU().memoizedState=e={current:e}},useState:sZ,useDebugValue:s5,useDeferredValue:function(e){return sU().memoizedState=e},useTransition:function(){var e=sZ(!1),t=e[0];return e=ot.bind(null,e[1]),sU().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=s_,s=sU();if(i_){if(void 0===r)throw Error(f(407));r=r()}else{if(r=t(),null===ac)throw Error(f(349));0!=(30&sI)||sq(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,s1(sW.bind(null,n,o,e),[e]),n.flags|=2048,sQ(9,sG.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=sU(),t=ac.identifierPrefix;if(i_){var r=ix,n=iv;t=":"+t+"R"+(r=(n&~(1<<32-tf(n)-1)).toString(32)+r),0<(r=sR++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=sB++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oc={readContext:iK,useCallback:s9,useContext:iK,useEffect:s2,useImperativeHandle:s4,useInsertionEffect:s3,useLayoutEffect:s8,useMemo:s7,useReducer:sz,useRef:sX,useState:function(){return sz(sj)},useDebugValue:s5,useDeferredValue:function(e){return oe(sF(),sP.memoizedState,e)},useTransition:function(){return[sz(sj)[0],sF().memoizedState]},useMutableSource:sH,useSyncExternalStore:sV,useId:or,unstable_isNewReconciler:!1},od={readContext:iK,useCallback:s9,useContext:iK,useEffect:s2,useImperativeHandle:s4,useInsertionEffect:s3,useLayoutEffect:s8,useMemo:s7,useReducer:s$,useRef:sX,useState:function(){return s$(sj)},useDebugValue:s5,useDeferredValue:function(e){var t=sF();return null===sP?t.memoizedState=e:oe(t,sP.memoizedState,e)},useTransition:function(){return[s$(sj)[0],sF().memoizedState]},useMutableSource:sH,useSyncExternalStore:sV,useId:or,unstable_isNewReconciler:!1};function of(e,t){try{var r="",n=t;do r+=function(e){switch(e.tag){case 5:return en(e.type);case 16:return en("Lazy");case 13:return en("Suspense");case 19:return en("SuspenseList");case 0:case 2:case 15:return e=es(e.type,!1);case 11:return e=es(e.type.render,!1);case 1:return e=es(e.type,!0);default:return""}}(n),n=n.return;while(n)var s=r}catch(e){s="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:s,digest:null}}function oh(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function op(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var og="function"==typeof WeakMap?WeakMap:Map;function om(e,t,r){(r=i2(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ak||(ak=!0,aI=n),op(e,t)},r}function oy(e,t,r){(r=i2(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){op(e,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(r.callback=function(){op(e,t),"function"!=typeof n&&(null===a_?a_=new Set([this]):a_.add(this));var r=t.stack;this.componentDidCatch(t.value,{componentStack:null!==r?r:""})}),r}function ob(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new og;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=a8.bind(null,e,t,r),t.then(e,e))}function ov(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e)return null}function ox(e,t,r,n,s){return 0==(1&e.mode)?e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=i2(-1,1)).tag=2,i3(r,t,1))),r.lanes|=1):(e.flags|=65536,e.lanes=s),e}var ow=_.ReactCurrentOwner,oE=!1;function oA(e,t,r,n){t.child=null===e?sc(t,null,r,n):su(t,e.child,r,n)}function oS(e,t,r,n,s){r=r.render;var o=t.ref;return(iW(t,s),n=sL(e,t,r,n,o,s),r=sM(),null===e||oE)?(i_&&r&&iA(t),t.flags|=1,oA(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,oH(e,t,s))}function ok(e,t,r,n,s){if(null===e){var o=r.type;return"function"!=typeof o||le(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=lr(r.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,oI(e,t,o,n,s))}if(o=e.child,0==(e.lanes&s)){var a=o.memoizedProps;if((r=null!==(r=r.compare)?r:rQ)(a,n)&&e.ref===t.ref)return oH(e,t,s)}return t.flags|=1,(e=lt(o,n)).ref=t.ref,e.return=t,t.child=e}function oI(e,t,r,n,s){if(null!==e){var o=e.memoizedProps;if(rQ(o,n)&&e.ref===t.ref)if(oE=!1,t.pendingProps=n=o,0==(e.lanes&s))return t.lanes=e.lanes,oH(e,t,s);else 0!=(131072&e.flags)&&(oE=!0)}return oC(e,t,r,n,s)}function o_(e,t,r){var n=t.pendingProps,s=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n3(ap,ah),ah|=r;else{if(0==(0x40000000&r))return e=null!==o?o.baseLanes|r:r,t.lanes=t.childLanes=0x40000000,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,n3(ap,ah),ah|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:r,n3(ap,ah),ah|=n}else null!==o?(n=o.baseLanes|r,t.memoizedState=null):n=r,n3(ap,ah),ah|=n;return oA(e,t,s,r),t.child}function oP(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function oC(e,t,r,n,s){var o=n7(r)?n5:n6.current;return(o=n9(t,o),iW(t,s),r=sL(e,t,r,n,o,s),n=sM(),null===e||oE)?(i_&&n&&iA(t),t.flags|=1,oA(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,oH(e,t,s))}function oO(e,t,r,n,s){if(n7(r)){var o=!0;ii(t)}else o=!1;if(iW(t,s),null===t.stateNode)o$(e,t),sr(t,r,n),si(t,r,n,s),n=!0;else if(null===e){var a=t.stateNode,l=t.memoizedProps;a.props=l;var u=a.context,c=r.contextType;c="object"==typeof c&&null!==c?iK(c):n9(t,c=n7(r)?n5:n6.current);var d=r.getDerivedStateFromProps,f="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(l!==n||u!==c)&&sn(t,a,n,c),iY=!1;var h=t.memoizedState;a.state=h,i4(t,n,a,s),u=t.memoizedState,l!==n||h!==u||n4.current||iY?("function"==typeof d&&(i7(t,r,d,n),u=t.memoizedState),(l=iY||st(t,r,l,n,h,u,c))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),a.props=n,a.state=u,a.context=c,n=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,i1(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:iF(t.type,l),a.props=c,f=t.pendingProps,h=a.context,u="object"==typeof(u=r.contextType)&&null!==u?iK(u):n9(t,u=n7(r)?n5:n6.current);var p=r.getDerivedStateFromProps;(d="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(l!==f||h!==u)&&sn(t,a,n,u),iY=!1,h=t.memoizedState,a.state=h,i4(t,n,a,s);var g=t.memoizedState;l!==f||h!==g||n4.current||iY?("function"==typeof p&&(i7(t,r,p,n),g=t.memoizedState),(c=iY||st(t,r,c,n,h,g,u)||!1)?(d||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,g,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,g,u)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),a.props=n,a.state=g,a.context=u,n=c):("function"!=typeof a.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return oT(e,t,r,n,o,s)}function oT(e,t,r,n,s,o){oP(e,t);var a=0!=(128&t.flags);if(!n&&!a)return s&&is(t,r,!1),oH(e,t,o);n=t.stateNode,ow.current=t;var l=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=su(t,e.child,null,o),t.child=su(t,null,l,o)):oA(e,t,l,o),t.memoizedState=n.state,s&&is(t,r,!0),t.child}function oR(e){var t=e.stateNode;t.pendingContext?it(e,t.pendingContext,t.pendingContext!==t.context):t.context&&it(e,t.context,!1),sm(e,t.containerInfo)}function oB(e,t,r,n,s){return iL(),iM(s),t.flags|=256,oA(e,t,r,n),t.child}var oN={dehydrated:null,treeContext:null,retryLane:0};function oD(e){return{baseLanes:e,cachePool:null,transitions:null}}function oL(e,t,r){var n,s=t.pendingProps,o=sx.current,a=!1,l=0!=(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!=(2&o)),n?(a=!0,t.flags&=-129):(null===e||null!==e.memoizedState)&&(o|=1),n3(sx,1&o),null===e)return(iR(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated))?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=0x40000000,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},0==(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=li(l,s,0,null),e=ln(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=oD(r),t.memoizedState=oN,e):oM(t,l));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated)){var u=e,c=t,d=l,h=s,p=n,g=o,m=r;if(d)return 256&c.flags?(c.flags&=-257,oU(u,c,m,h=oh(Error(f(422))))):null!==c.memoizedState?(c.child=u.child,c.flags|=128,null):(g=h.fallback,p=c.mode,h=li({mode:"visible",children:h.children},p,0,null),g=ln(g,p,m,null),g.flags|=2,h.return=c,g.return=c,h.sibling=g,c.child=h,0!=(1&c.mode)&&su(c,u.child,null,m),c.child.memoizedState=oD(m),c.memoizedState=oN,g);if(0==(1&c.mode))return oU(u,c,m,null);if("$!"===p.data){if(h=p.nextSibling&&p.nextSibling.dataset)var y=h.dgst;return h=y,oU(u,c,m,h=oh(g=Error(f(419)),h,void 0))}if(y=0!=(m&u.childLanes),oE||y){if(null!==(h=ac)){switch(m&-m){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:p=32;break;case 0x20000000:p=0x10000000;break;default:p=0}0!==(p=0!=(p&(h.suspendedLanes|m))?0:p)&&p!==g.retryLane&&(g.retryLane=p,iX(u,p),aM(h,u,p,-1))}return aZ(),oU(u,c,m,h=oh(Error(f(421))))}return"$?"===p.data?(c.flags|=128,c.child=u.child,c=a4.bind(null,u),p._reactRetry=c,null):(u=g.treeContext,iI=nj(p.nextSibling),ik=c,i_=!0,iP=null,null!==u&&(im[iy++]=iv,im[iy++]=ix,im[iy++]=ib,iv=u.id,ix=u.overflow,ib=c),c=oM(c,h.children),c.flags|=4096,c)}if(a){a=s.fallback,l=t.mode,n=(o=e.child).sibling;var b={mode:"hidden",children:s.children};return 0==(1&l)&&t.child!==o?((s=t.child).childLanes=0,s.pendingProps=b,t.deletions=null):(s=lt(o,b)).subtreeFlags=0xe00000&o.subtreeFlags,null!==n?a=lt(n,a):(a=ln(a,l,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=null===(l=e.child.memoizedState)?oD(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=oN,s}return e=(a=e.child).sibling,s=lt(a,{mode:"visible",children:s.children}),0==(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function oM(e,t){return(t=li({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function oU(e,t,r,n){return null!==n&&iM(n),su(t,e.child,null,r),e=oM(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oF(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),iG(e.return,t,r)}function oj(e,t,r,n,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function oz(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(oA(e,t,n.children,r),0!=(2&(n=sx.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&oF(e,r,t);else if(19===e.tag)oF(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(n3(sx,n),0==(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(s=null,r=t.child;null!==r;)null!==(e=r.alternate)&&null===sw(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),oj(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===sw(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}oj(t,!0,r,null,o);break;case"together":oj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function o$(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function oH(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),ay|=t.lanes,0==(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(f(153));if(null!==t.child){for(r=lt(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=lt(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function oV(e,t){if(!i_)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function oq(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=0xe00000&s.subtreeFlags,n|=0xe00000&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}s=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},o=function(){},a=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,sg(sf.current);var o,a=null;switch(r){case"input":s=ef(e,s),n=ef(e,n),a=[];break;case"select":s=er({},s,{value:void 0}),n=er({},n,{value:void 0}),a=[];break;case"textarea":s=ex(e,s),n=ex(e,n),a=[];break;default:"function"!=typeof s.onClick&&"function"==typeof n.onClick&&(e.onclick=nO)}for(c in eD(r,n),r=null,s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(p.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var u=n[c];if(l=null!=s?s[c]:void 0,n.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(c,r)),r=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(p.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&nm("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},l=function(e,t,r,n){r!==n&&(t.flags|=4)};var oG=!1,oW=!1,oK="function"==typeof WeakSet?WeakSet:Set,oJ=null;function oZ(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(r){a3(e,t,r)}else r.current=null}function oQ(e,t,r){try{r()}catch(r){a3(e,t,r)}}var oX=!1;function oY(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,void 0!==o&&oQ(t,r,o)}s=s.next}while(s!==n)}}function o0(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function o1(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function o2(e){return 5===e.tag||3===e.tag||4===e.tag}function o3(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||o2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var o8=null,o6=!1;function o4(e,t,r){for(r=r.child;null!==r;)o5(e,t,r),r=r.sibling}function o5(e,t,r){if(td&&"function"==typeof td.onCommitFiberUnmount)try{td.onCommitFiberUnmount(tc,r)}catch(e){}switch(r.tag){case 5:oW||oZ(r,t);case 6:var n=o8,s=o6;o8=null,o4(e,t,r),o8=n,o6=s,null!==o8&&(o6?(e=o8,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):o8.removeChild(r.stateNode));break;case 18:null!==o8&&(o6?(e=o8,r=r.stateNode,8===e.nodeType?nF(e.parentNode,r):1===e.nodeType&&nF(e,r),tW(e)):nF(o8,r.stateNode));break;case 4:n=o8,s=o6,o8=r.stateNode.containerInfo,o6=!0,o4(e,t,r),o8=n,o6=s;break;case 0:case 11:case 14:case 15:if(!oW&&null!==(n=r.updateQueue)&&null!==(n=n.lastEffect)){s=n=n.next;do{var o=s,a=o.destroy;o=o.tag,void 0!==a&&(0!=(2&o)?oQ(r,t,a):0!=(4&o)&&oQ(r,t,a)),s=s.next}while(s!==n)}o4(e,t,r);break;case 1:if(!oW&&(oZ(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(e){a3(r,t,e)}o4(e,t,r);break;case 21:default:o4(e,t,r);break;case 22:1&r.mode?(oW=(n=oW)||null!==r.memoizedState,o4(e,t,r),oW=n):o4(e,t,r)}}function o9(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new oK),t.forEach(function(t){var n=a5.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function o7(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var s=r[n];try{var o=t,a=o;e:for(;null!==a;){switch(a.tag){case 5:o8=a.stateNode,o6=!1;break e;case 3:case 4:o8=a.stateNode.containerInfo,o6=!0;break e}a=a.return}if(null===o8)throw Error(f(160));o5(e,o,s),o8=null,o6=!1;var l=s.alternate;null!==l&&(l.return=null),s.return=null}catch(e){a3(s,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ae(t,e),t=t.sibling}function ae(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(o7(t,e),at(e),4&n){try{oY(3,e,e.return),o0(3,e)}catch(t){a3(e,e.return,t)}try{oY(5,e,e.return)}catch(t){a3(e,e.return,t)}}break;case 1:o7(t,e),at(e),512&n&&null!==r&&oZ(r,r.return);break;case 5:if(o7(t,e),at(e),512&n&&null!==r&&oZ(r,r.return),32&e.flags){var s=e.stateNode;try{eC(s,"")}catch(t){a3(e,e.return,t)}}if(4&n&&null!=(s=e.stateNode)){var o=e.memoizedProps,a=null!==r?r.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&ep(s,o),eL(l,a);var c=eL(l,o);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];"style"===d?eB(s,h):"dangerouslySetInnerHTML"===d?eP(s,h):"children"===d?eC(s,h):I(s,d,h,c)}switch(l){case"input":eg(s,o);break;case"textarea":eE(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;null!=g?ev(s,!!o.multiple,g,!1):!!o.multiple!==p&&(null!=o.defaultValue?ev(s,!!o.multiple,o.defaultValue,!0):ev(s,!!o.multiple,o.multiple?[]:"",!1))}s[nV]=o}catch(t){a3(e,e.return,t)}}break;case 6:if(o7(t,e),at(e),4&n){if(null===e.stateNode)throw Error(f(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(t){a3(e,e.return,t)}}break;case 3:if(o7(t,e),at(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{tW(t.containerInfo)}catch(t){a3(e,e.return,t)}break;case 4:default:o7(t,e),at(e);break;case 13:o7(t,e),at(e),8192&(s=e.child).flags&&(o=null!==s.memoizedState,s.stateNode.isHidden=o,o&&(null===s.alternate||null===s.alternate.memoizedState)&&(aE=tn())),4&n&&o9(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(oW=(c=oW)||d,o7(t,e),oW=c):o7(t,e),at(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!=(1&e.mode))for(oJ=e,d=e.child;null!==d;){for(h=oJ=d;null!==oJ;){switch(g=(p=oJ).child,p.tag){case 0:case 11:case 14:case 15:oY(4,p,p.return);break;case 1:oZ(p,p.return);var m=p.stateNode;if("function"==typeof m.componentWillUnmount){n=p,r=p.return;try{m.props=(t=n).memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){a3(n,r,e)}}break;case 5:oZ(p,p.return);break;case 22:if(null!==p.memoizedState){an(h);continue}}null!==g?(g.return=p,oJ=g):an(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,c?(o=s.style,"function"==typeof o.setProperty?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,a=null!=(u=h.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,l.style.display=eR("display",a))}catch(t){a3(e,e.return,t)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(t){a3(e,e.return,t)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:o7(t,e),at(e),4&n&&o9(e);case 21:}}function at(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(o2(r)){var n=r;break e}r=r.return}throw Error(f(160))}switch(n.tag){case 5:var s=n.stateNode;32&n.flags&&(eC(s,""),n.flags&=-33);var o=o3(e);!function e(t,r,n){var s=t.tag;if(5===s||6===s)t=t.stateNode,r?n.insertBefore(t,r):n.appendChild(t);else if(4!==s&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,o,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=o3(e);!function e(t,r,n){var s=t.tag;if(5===s||6===s)t=t.stateNode,r?8===n.nodeType?n.parentNode.insertBefore(t,r):n.insertBefore(t,r):(8===n.nodeType?(r=n.parentNode).insertBefore(t,n):(r=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==r.onclick||(r.onclick=nO));else if(4!==s&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,l,a);break;default:throw Error(f(161))}}catch(t){a3(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ar(e){for(;null!==oJ;){var t=oJ;if(0!=(8772&t.flags)){var r=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:oW||o0(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!oW)if(null===r)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:iF(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&i5(t,o,n);break;case 3:var a=t.updateQueue;if(null!==a){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}i5(t,a,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&tW(h)}}}break;default:throw Error(f(163))}oW||512&t.flags&&o1(t)}catch(e){a3(t,t.return,e)}}if(t===e){oJ=null;break}if(null!==(r=t.sibling)){r.return=t.return,oJ=r;break}oJ=t.return}}function an(e){for(;null!==oJ;){var t=oJ;if(t===e){oJ=null;break}var r=t.sibling;if(null!==r){r.return=t.return,oJ=r;break}oJ=t.return}}function ai(e){for(;null!==oJ;){var t=oJ;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{o0(4,t)}catch(e){a3(t,r,e)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var s=t.return;try{n.componentDidMount()}catch(e){a3(t,s,e)}}var o=t.return;try{o1(t)}catch(e){a3(t,o,e)}break;case 5:var a=t.return;try{o1(t)}catch(e){a3(t,a,e)}}}catch(e){a3(t,t.return,e)}if(t===e){oJ=null;break}var l=t.sibling;if(null!==l){l.return=t.return,oJ=l;break}oJ=t.return}}var as=Math.ceil,ao=_.ReactCurrentDispatcher,aa=_.ReactCurrentOwner,al=_.ReactCurrentBatchConfig,au=0,ac=null,ad=null,af=0,ah=0,ap=n1(0),ag=0,am=null,ay=0,ab=0,av=0,ax=null,aw=null,aE=0,aA=1/0,aS=null,ak=!1,aI=null,a_=null,aP=!1,aC=null,aO=0,aT=0,aR=null,aB=-1,aN=0;function aD(){return 0!=(6&au)?tn():-1!==aB?aB:aB=tn()}function aL(e){return 0==(1&e.mode)?1:0!=(2&au)&&0!==af?af&-af:null!==iU.transition?(0===aN&&(aN=tx()),aN):0!==(e=tS)?e:e=void 0===(e=window.event)?16:t1(e.type)}function aM(e,t,r,n){if(50<aT)throw aT=0,aR=null,Error(f(185));tE(e,r,n),(0==(2&au)||e!==ac)&&(e===ac&&(0==(2&au)&&(ab|=r),4===ag&&a$(e,af)),aU(e,n),1===r&&0===au&&0==(1&t.mode)&&(aA=tn()+500,ia&&ic()))}function aU(e,t){var r,n=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-tf(o),l=1<<a,u=s[a];-1===u?(0==(l&r)||0!=(l&n))&&(s[a]=function(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(l,t)):u<=t&&(e.expiredLanes|=l),o&=~l}}(e,t);var s=tb(e,e===ac?af:0);if(0===s)null!==n&&te(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=n&&te(n),1===t)0===e.tag?(r=aH.bind(null,e),ia=!0,iu(r)):iu(aH.bind(null,e)),nM(function(){0==(6&au)&&ic()}),n=null;else{switch(tk(s)){case 1:n=ts;break;case 4:n=to;break;case 16:default:n=ta;break;case 0x20000000:n=tu}n=e7(n,aF.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function aF(e,t){if(aB=-1,aN=0,0!=(6&au))throw Error(f(327));var r=e.callbackNode;if(a1()&&e.callbackNode!==r)return null;var n=tb(e,e===ac?af:0);if(0===n)return null;if(0!=(30&n)||0!=(n&e.expiredLanes)||t)t=aQ(e,n);else{t=n;var s=au;au|=2;var o=aJ();for((ac!==e||af!==t)&&(aS=null,aA=tn()+500,aW(e,t));;)try{for(;null!==ad&&!tt();)aX(ad);break}catch(t){aK(e,t)}iV(),ao.current=o,au=s,null!==ad?t=0:(ac=null,af=0,t=ag)}if(0!==t){if(2===t&&0!==(s=tv(e))&&(n=s,t=aj(e,s)),1===t)throw r=am,aW(e,0),a$(e,n),aU(e,tn()),r;if(6===t)a$(e,n);else{if(s=e.current.alternate,0==(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!rZ(o(),s))return!1}catch(e){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=aQ(e,n))&&0!==(o=tv(e))&&(n=o,t=aj(e,o)),1===t))throw r=am,aW(e,0),a$(e,n),aU(e,tn()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(f(345));case 2:case 5:a0(e,aw,aS);break;case 3:if(a$(e,n),(0x7c00000&n)===n&&10<(t=aE+500-tn())){if(0!==tb(e,0))break;if(((s=e.suspendedLanes)&n)!==n){aD(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=nN(a0.bind(null,e,aw,aS),t);break}a0(e,aw,aS);break;case 4:if(a$(e,n),(4194240&n)===n)break;for(s=-1,t=e.eventTimes;0<n;){var a=31-tf(n);o=1<<a,(a=t[a])>s&&(s=a),n&=~o}if(n=s,10<(n=(120>(n=tn()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*as(n/1960))-n)){e.timeoutHandle=nN(a0.bind(null,e,aw,aS),n);break}a0(e,aw,aS);break;default:throw Error(f(329))}}}return aU(e,tn()),e.callbackNode===r?aF.bind(null,e):null}function aj(e,t){var r=ax;return e.current.memoizedState.isDehydrated&&(aW(e,t).flags|=256),2!==(e=aQ(e,t))&&(t=aw,aw=r,null!==t&&az(t)),e}function az(e){null===aw?aw=e:aw.push.apply(aw,e)}function a$(e,t){for(t&=~av,t&=~ab,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-tf(t),n=1<<r;e[r]=-1,t&=~n}}function aH(e){if(0!=(6&au))throw Error(f(327));a1();var t=tb(e,0);if(0==(1&t))return aU(e,tn()),null;var r=aQ(e,t);if(0!==e.tag&&2===r){var n=tv(e);0!==n&&(t=n,r=aj(e,n))}if(1===r)throw r=am,aW(e,0),a$(e,t),aU(e,tn()),r;if(6===r)throw Error(f(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,a0(e,aw,aS),aU(e,tn()),null}function aV(e,t){var r=au;au|=1;try{return e(t)}finally{0===(au=r)&&(aA=tn()+500,ia&&ic())}}function aq(e){null!==aC&&0===aC.tag&&0==(6&au)&&a1();var t=au;au|=1;var r=al.transition,n=tS;try{if(al.transition=null,tS=1,e)return e()}finally{tS=n,al.transition=r,0==(6&(au=t))&&ic()}}function aG(){ah=ap.current,n2(ap)}function aW(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,nD(r)),null!==ad)for(r=ad.return;null!==r;){var n=r;switch(iS(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&ie();break;case 3:sy(),n2(n4),n2(n6),sA();break;case 5:sv(n);break;case 4:sy();break;case 13:case 19:n2(sx);break;case 10:iq(n.type._context);break;case 22:case 23:aG()}r=r.return}if(ac=e,ad=e=lt(e.current,null),af=ah=t,ag=0,am=null,av=ab=ay=0,aw=ax=null,null!==iJ){for(t=0;t<iJ.length;t++)if(null!==(n=(r=iJ[t]).interleaved)){r.interleaved=null;var s=n.next,o=r.pending;if(null!==o){var a=o.next;o.next=s,n.next=a}r.pending=n}iJ=null}return e}function aK(e,t){for(;;){var r=ad;try{if(iV(),sS.current=ol,sO){for(var n=s_.memoizedState;null!==n;){var s=n.queue;null!==s&&(s.pending=null),n=n.next}sO=!1}if(sI=0,sC=sP=s_=null,sT=!1,sR=0,aa.current=null,null===r||null===r.return){ag=1,am=t,ad=null;break}e:{var o=e,a=r.return,l=r,u=t;if(t=af,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u,d=l,h=d.tag;if(0==(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=ov(a);if(null!==g){g.flags&=-257,ox(g,a,l,o,t),1&g.mode&&ob(o,c,t),t=g,u=c;var m=t.updateQueue;if(null===m){var y=new Set;y.add(u),t.updateQueue=y}else m.add(u);break e}if(0==(1&t)){ob(o,c,t),aZ();break e}u=Error(f(426))}else if(i_&&1&l.mode){var b=ov(a);if(null!==b){0==(65536&b.flags)&&(b.flags|=256),ox(b,a,l,o,t),iM(of(u,l));break e}}o=u=of(u,l),4!==ag&&(ag=2),null===ax?ax=[o]:ax.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=om(o,u,t);i6(o,v);break e;case 1:l=u;var x=o.type,w=o.stateNode;if(0==(128&o.flags)&&("function"==typeof x.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===a_||!a_.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var E=oy(o,l,t);i6(o,E);break e}}o=o.return}while(null!==o)}aY(r)}catch(e){t=e,ad===r&&null!==r&&(ad=r=r.return);continue}break}}function aJ(){var e=ao.current;return ao.current=ol,null===e?ol:e}function aZ(){(0===ag||3===ag||2===ag)&&(ag=4),null===ac||0==(0xfffffff&ay)&&0==(0xfffffff&ab)||a$(ac,af)}function aQ(e,t){var r=au;au|=2;var n=aJ();for((ac!==e||af!==t)&&(aS=null,aW(e,t));;)try{for(;null!==ad;)aX(ad);break}catch(t){aK(e,t)}if(iV(),au=r,ao.current=n,null!==ad)throw Error(f(261));return ac=null,af=0,ag}function aX(e){var t=u(e.alternate,e,ah);e.memoizedProps=e.pendingProps,null===t?aY(e):ad=t,aa.current=null}function aY(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(r=function(e,t,r){var n=t.pendingProps;switch(iS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oq(t),null;case 1:case 17:return n7(t.type)&&ie(),oq(t),null;case 3:return n=t.stateNode,sy(),n2(n4),n2(n6),sA(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(null===e||null===e.child)&&(iN(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==iP&&(az(iP),iP=null))),o(e,t),oq(t),null;case 5:sv(t);var u=sg(sp.current);if(r=t.type,null!==e&&null!=t.stateNode)a(e,t,r,n,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(f(166));return oq(t),null}if(e=sg(sf.current),iN(t)){n=t.stateNode,r=t.type;var c=t.memoizedProps;switch(n[nH]=t,n[nV]=c,e=0!=(1&t.mode),r){case"dialog":nm("cancel",n),nm("close",n);break;case"iframe":case"object":case"embed":nm("load",n);break;case"video":case"audio":for(u=0;u<nf.length;u++)nm(nf[u],n);break;case"source":nm("error",n);break;case"img":case"image":case"link":nm("error",n),nm("load",n);break;case"details":nm("toggle",n);break;case"input":eh(n,c),nm("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!c.multiple},nm("invalid",n);break;case"textarea":ew(n,c),nm("invalid",n)}for(var d in eD(r,c),u=null,c)if(c.hasOwnProperty(d)){var h=c[d];"children"===d?"string"==typeof h?n.textContent!==h&&(!0!==c.suppressHydrationWarning&&nC(n.textContent,h,e),u=["children",h]):"number"==typeof h&&n.textContent!==""+h&&(!0!==c.suppressHydrationWarning&&nC(n.textContent,h,e),u=["children",""+h]):p.hasOwnProperty(d)&&null!=h&&"onScroll"===d&&nm("scroll",n)}switch(r){case"input":el(n),em(n,c,!0);break;case"textarea":el(n),eA(n);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(n.onclick=nO)}n=u,t.updateQueue=n,null!==n&&(t.flags|=4)}else{d=9===u.nodeType?u:u.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=eS(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=d.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=d.createElement(r,{is:n.is}):(e=d.createElement(r),"select"===r&&(d=e,n.multiple?d.multiple=!0:n.size&&(d.size=n.size))):e=d.createElementNS(e,r),e[nH]=t,e[nV]=n,s(e,t,!1,!1),t.stateNode=e;e:{switch(d=eL(r,n),r){case"dialog":nm("cancel",e),nm("close",e),u=n;break;case"iframe":case"object":case"embed":nm("load",e),u=n;break;case"video":case"audio":for(u=0;u<nf.length;u++)nm(nf[u],e);u=n;break;case"source":nm("error",e),u=n;break;case"img":case"image":case"link":nm("error",e),nm("load",e),u=n;break;case"details":nm("toggle",e),u=n;break;case"input":eh(e,n),u=ef(e,n),nm("invalid",e);break;case"option":default:u=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},u=er({},n,{value:void 0}),nm("invalid",e);break;case"textarea":ew(e,n),u=ex(e,n),nm("invalid",e)}for(c in eD(r,u),h=u)if(h.hasOwnProperty(c)){var g=h[c];"style"===c?eB(e,g):"dangerouslySetInnerHTML"===c?null!=(g=g?g.__html:void 0)&&eP(e,g):"children"===c?"string"==typeof g?("textarea"!==r||""!==g)&&eC(e,g):"number"==typeof g&&eC(e,""+g):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(p.hasOwnProperty(c)?null!=g&&"onScroll"===c&&nm("scroll",e):null!=g&&I(e,c,g,d))}switch(r){case"input":el(e),em(e,n,!1);break;case"textarea":el(e),eA(e);break;case"option":null!=n.value&&e.setAttribute("value",""+eo(n.value));break;case"select":e.multiple=!!n.multiple,null!=(c=n.value)?ev(e,!!n.multiple,c,!1):null!=n.defaultValue&&ev(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof u.onClick&&(e.onclick=nO)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return oq(t),null;case 6:if(e&&null!=t.stateNode)l(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(f(166));if(r=sg(sp.current),sg(sf.current),iN(t)){if(n=t.stateNode,r=t.memoizedProps,n[nH]=t,(c=n.nodeValue!==r)&&null!==(e=ik))switch(e.tag){case 3:nC(n.nodeValue,r,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&nC(n.nodeValue,r,0!=(1&e.mode))}c&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[nH]=t,t.stateNode=n}return oq(t),null;case 13:if(n2(sx),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i_&&null!==iI&&0!=(1&t.mode)&&0==(128&t.flags))iD(),iL(),t.flags|=98560,c=!1;else if(c=iN(t),null!==n&&null!==n.dehydrated){if(null===e){if(!c)throw Error(f(318));if(!(c=null!==(c=t.memoizedState)?c.dehydrated:null))throw Error(f(317));c[nH]=t}else iL(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;oq(t),c=!1}else null!==iP&&(az(iP),iP=null),c=!0;if(!c)return 65536&t.flags?t:null}if(0!=(128&t.flags))return t.lanes=r,t;return(n=null!==n)!=(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&sx.current)?0===ag&&(ag=3):aZ())),null!==t.updateQueue&&(t.flags|=4),oq(t),null;case 4:return sy(),o(e,t),null===e&&nv(t.stateNode.containerInfo),oq(t),null;case 10:return iq(t.type._context),oq(t),null;case 19:if(n2(sx),null===(c=t.memoizedState))return oq(t),null;if(n=0!=(128&t.flags),null===(d=c.rendering))if(n)oV(c,!1);else{if(0!==ag||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(d=sw(e))){for(t.flags|=128,oV(c,!1),null!==(n=d.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)c=r,e=n,c.flags&=0xe00002,null===(d=c.alternate)?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return n3(sx,1&sx.current|2),t.child}e=e.sibling}null!==c.tail&&tn()>aA&&(t.flags|=128,n=!0,oV(c,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=sw(d))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),oV(c,!0),null===c.tail&&"hidden"===c.tailMode&&!d.alternate&&!i_)return oq(t),null}else 2*tn()-c.renderingStartTime>aA&&0x40000000!==r&&(t.flags|=128,n=!0,oV(c,!1),t.lanes=4194304);c.isBackwards?(d.sibling=t.child,t.child=d):(null!==(r=c.last)?r.sibling=d:t.child=d,c.last=d)}if(null!==c.tail)return t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=tn(),t.sibling=null,r=sx.current,n3(sx,n?1&r|2:1&r),t;return oq(t),null;case 22:case 23:return aG(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!=(1&t.mode)?0!=(0x40000000&ah)&&(oq(t),6&t.subtreeFlags&&(t.flags|=8192)):oq(t),null;case 24:case 25:return null}throw Error(f(156,t.tag))}(r,t,ah))){ad=r;return}}else{if(null!==(r=function(e,t){switch(iS(t),t.tag){case 1:return n7(t.type)&&ie(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return sy(),n2(n4),n2(n6),sA(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sv(t),null;case 13:if(n2(sx),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(f(340));iL()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return n2(sx),null;case 4:return sy(),null;case 10:return iq(t.type._context),null;case 22:case 23:return aG(),null;default:return null}}(r,t))){r.flags&=32767,ad=r;return}if(null!==e)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ag=6,ad=null;return}}if(null!==(t=t.sibling)){ad=t;return}ad=t=e}while(null!==t)0===ag&&(ag=5)}function a0(e,t,r){var n=tS,s=al.transition;try{al.transition=null,tS=1,function(e,t,r,n){do a1();while(null!==aC)if(0!=(6&au))throw Error(f(327));r=e.finishedWork;var s=e.finishedLanes;if(null!==r){if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(f(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes,a=e,l=o,u=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var c=a.eventTimes;for(a=a.expirationTimes;0<u;){var d=31-tf(u),h=1<<d;l[d]=0,c[d]=-1,a[d]=-1,u&=~h}if(e===ac&&(ad=ac=null,af=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||aP||(aP=!0,function(e,t){e7(e,t)}(ta,function(){return a1(),null})),o=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||o){o=al.transition,al.transition=null;var p,g,m,y=tS;tS=1;var b=au;au|=4,aa.current=null,function(e,t){if(nT=tJ,r1(e=r0())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var s,o=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(e){r=null;break e}var l=0,u=-1,c=-1,d=0,h=0,p=e,g=null;t:for(;;){for(;p!==r||0!==o&&3!==p.nodeType||(u=l+o),p!==a||0!==n&&3!==p.nodeType||(c=l+n),3===p.nodeType&&(l+=p.nodeValue.length),null!==(s=p.firstChild);)g=p,p=s;for(;;){if(p===e)break t;if(g===r&&++d===o&&(u=l),g===a&&++h===n&&(c=l),null!==(s=p.nextSibling))break;g=(p=g).parentNode}p=s}r=-1===u||-1===c?null:{start:u,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(nR={focusedElem:e,selectionRange:r},tJ=!1,oJ=t;null!==oJ;)if(e=(t=oJ).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,oJ=e;else for(;null!==oJ;){t=oJ;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var y=m.memoizedProps,b=m.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:iF(t.type,y),b);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(f(163))}}catch(e){a3(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,oJ=e;break}oJ=t.return}m=oX,oX=!1}(e,r),ae(r,e),function(e){var t=r0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&function e(t,r){return!!t&&!!r&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(r.ownerDocument.documentElement,r)){if(null!==n&&r1(r)){if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=void 0===n.end?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=rY(r,o);var a=rY(r,n);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}(nR),tJ=!!nT,nR=nT=null,e.current=r,p=r,g=e,m=s,oJ=p,function e(t,r,n){for(var s=0!=(1&t.mode);null!==oJ;){var o=oJ,a=o.child;if(22===o.tag&&s){var l=null!==o.memoizedState||oG;if(!l){var u=o.alternate,c=null!==u&&null!==u.memoizedState||oW;u=oG;var d=oW;if(oG=l,(oW=c)&&!d)for(oJ=o;null!==oJ;)c=(l=oJ).child,22===l.tag&&null!==l.memoizedState?ai(o):null!==c?(c.return=l,oJ=c):ai(o);for(;null!==a;)oJ=a,e(a,r,n),a=a.sibling;oJ=o,oG=u,oW=d}ar(t,r,n)}else 0!=(8772&o.subtreeFlags)&&null!==a?(a.return=o,oJ=a):ar(t,r,n)}}(p,g,m),tr(),au=b,tS=y,al.transition=o}else e.current=r;aP&&(aP=!1,aC=e,aO=s),0===(o=e.pendingLanes)&&(a_=null);var v=r.stateNode;if(td&&"function"==typeof td.onCommitFiberRoot)try{td.onCommitFiberRoot(tc,v,void 0,128==(128&v.current.flags))}catch(e){}if(aU(e,tn()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n((s=t[r]).value,{componentStack:s.stack,digest:s.digest});if(ak)throw ak=!1,e=aI,aI=null,e;0!=(1&aO)&&0!==e.tag&&a1(),0!=(1&(o=e.pendingLanes))?e===aR?aT++:(aT=0,aR=e):aT=0,ic()}}(e,t,r,n)}finally{al.transition=s,tS=n}return null}function a1(){if(null!==aC){var e=tk(aO),t=al.transition,r=tS;try{if(al.transition=null,tS=16>e?16:e,null===aC)var n=!1;else{if(e=aC,aC=null,aO=0,0!=(6&au))throw Error(f(331));var s=au;for(au|=4,oJ=e.current;null!==oJ;){var o=oJ,a=o.child;if(0!=(16&oJ.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(oJ=c;null!==oJ;){var d=oJ;switch(d.tag){case 0:case 11:case 15:oY(8,d,o)}var h=d.child;if(null!==h)h.return=d,oJ=h;else for(;null!==oJ;){var p=(d=oJ).sibling,g=d.return;if(!function e(t){var r=t.alternate;null!==r&&(t.alternate=null,e(r)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(r=t.stateNode)&&(delete r[nH],delete r[nV],delete r[nG],delete r[nW],delete r[nK]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(d),d===c){oJ=null;break}if(null!==p){p.return=g,oJ=p;break}oJ=g}}}var m=o.alternate;if(null!==m){var y=m.child;if(null!==y){m.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(null!==y)}}oJ=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,oJ=a;else for(;null!==oJ;){if(o=oJ,0!=(2048&o.flags))switch(o.tag){case 0:case 11:case 15:oY(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,oJ=v;break}oJ=o.return}}var x=e.current;for(oJ=x;null!==oJ;){var w=(a=oJ).child;if(0!=(2064&a.subtreeFlags)&&null!==w)w.return=a,oJ=w;else for(a=x;null!==oJ;){if(l=oJ,0!=(2048&l.flags))try{switch(l.tag){case 0:case 11:case 15:o0(9,l)}}catch(e){a3(l,l.return,e)}if(l===a){oJ=null;break}var E=l.sibling;if(null!==E){E.return=l.return,oJ=E;break}oJ=l.return}}if(au=s,ic(),td&&"function"==typeof td.onPostCommitFiberRoot)try{td.onPostCommitFiberRoot(tc,e)}catch(e){}n=!0}return n}finally{tS=r,al.transition=t}}return!1}function a2(e,t,r){t=om(e,t=of(r,t),1),e=i3(e,t,1),t=aD(),null!==e&&(tE(e,1,t),aU(e,t))}function a3(e,t,r){if(3===e.tag)a2(e,e,r);else for(;null!==t;){if(3===t.tag){a2(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===a_||!a_.has(n))){e=oy(t,e=of(r,e),1),t=i3(t,e,1),e=aD(),null!==t&&(tE(t,1,e),aU(t,e));break}}t=t.return}}function a8(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=aD(),e.pingedLanes|=e.suspendedLanes&r,ac===e&&(af&r)===r&&(4===ag||3===ag&&(0x7c00000&af)===af&&500>tn()-aE?aW(e,0):av|=r),aU(e,t)}function a6(e,t){0===t&&(0==(1&e.mode)?t=1:(t=tm,0==(0x7c00000&(tm<<=1))&&(tm=4194304)));var r=aD();null!==(e=iX(e,t))&&(tE(e,t,r),aU(e,r))}function a4(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),a6(e,r)}function a5(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(f(314))}null!==n&&n.delete(t),a6(e,r)}function a9(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function a7(e,t,r,n){return new a9(e,t,r,n)}function le(e){return!(!(e=e.prototype)||!e.isReactComponent)}function lt(e,t){var r=e.alternate;return null===r?((r=a7(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=0xe00000&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function lr(e,t,r,n,s,o){var a=2;if(n=e,"function"==typeof e)le(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case O:return ln(r.children,s,o,t);case T:a=8,s|=8;break;case R:return(e=a7(12,r,t,2|s)).elementType=R,e.lanes=o,e;case L:return(e=a7(13,r,t,s)).elementType=L,e.lanes=o,e;case M:return(e=a7(19,r,t,s)).elementType=M,e.lanes=o,e;case j:return li(r,s,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case B:a=10;break e;case N:a=9;break e;case D:a=11;break e;case U:a=14;break e;case F:a=16,n=null;break e}throw Error(f(130,null==e?e:typeof e,""))}return(t=a7(a,r,t,s)).elementType=e,t.type=n,t.lanes=o,t}function ln(e,t,r,n){return(e=a7(7,e,n,t)).lanes=r,e}function li(e,t,r,n){return(e=a7(22,e,n,t)).elementType=j,e.lanes=r,e.stateNode={isHidden:!1},e}function ls(e,t,r){return(e=a7(6,e,null,t)).lanes=r,e}function lo(e,t,r){return(t=a7(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function la(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tw(0),this.expirationTimes=tw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tw(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ll(e,t,r,n,s,o,a,l,u){return e=new la(e,t,r,l,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=a7(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},i0(o),e}function lu(e){if(!e)return n8;e=e._reactInternals;e:{if(e6(e)!==e||1!==e.tag)throw Error(f(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(n7(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t)throw Error(f(171))}if(1===e.tag){var r=e.type;if(n7(r))return ir(e,r,t)}return t}function lc(e,t,r,n,s,o,a,l,u){return(e=ll(r,n,!0,e,s,o,a,l,u)).context=lu(null),r=e.current,(o=i2(n=aD(),s=aL(r))).callback=null!=t?t:null,i3(r,o,s),e.current.lanes=s,tE(e,s,n),aU(e,n),e}function ld(e,t,r,n){var s=t.current,o=aD(),a=aL(s);return r=lu(r),null===t.context?t.context=r:t.pendingContext=r,(t=i2(o,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=i3(s,t,a))&&(aM(e,s,a,o),i8(e,s,a)),a}function lf(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function lh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function lp(e,t){lh(e,t),(e=e.alternate)&&lh(e,t)}u=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||n4.current)oE=!0;else{if(0==(e.lanes&r)&&0==(128&t.flags))return oE=!1,function(e,t,r){switch(t.tag){case 3:oR(t),iL();break;case 5:sb(t);break;case 1:n7(t.type)&&ii(t);break;case 4:sm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;n3(ij,n._currentValue),n._currentValue=s;break;case 13:if(null!==(n=t.memoizedState)){if(null!==n.dehydrated)return n3(sx,1&sx.current),t.flags|=128,null;if(0!=(r&t.child.childLanes))return oL(e,t,r);return n3(sx,1&sx.current),null!==(e=oH(e,t,r))?e.sibling:null}n3(sx,1&sx.current);break;case 19:if(n=0!=(r&t.childLanes),0!=(128&e.flags)){if(n)return oz(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),n3(sx,sx.current),!n)return null;break;case 22:case 23:return t.lanes=0,o_(e,t,r)}return oH(e,t,r)}(e,t,r);oE=0!=(131072&e.flags)}else oE=!1,i_&&0!=(1048576&t.flags)&&iE(t,ig,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;o$(e,t),e=t.pendingProps;var s=n9(t,n6.current);iW(t,r),s=sL(null,t,n,e,s,r);var o=sM();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,n7(n)?(o=!0,ii(t)):o=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,i0(t),s.updater=se,t.stateNode=s,s._reactInternals=t,si(t,n,e,r),t=oT(null,t,n,!0,o,r)):(t.tag=0,i_&&o&&iA(t),oA(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(o$(e,t),e=t.pendingProps,n=(s=n._init)(n._payload),t.type=n,s=t.tag=function(e){if("function"==typeof e)return+!!le(e);if(null!=e){if((e=e.$$typeof)===D)return 11;if(e===U)return 14}return 2}(n),e=iF(n,e),s){case 0:t=oC(null,t,n,e,r);break e;case 1:t=oO(null,t,n,e,r);break e;case 11:t=oS(null,t,n,e,r);break e;case 14:t=ok(null,t,n,iF(n.type,e),r);break e}throw Error(f(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:iF(n,s),oC(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:iF(n,s),oO(e,t,n,s,r);case 3:e:{if(oR(t),null===e)throw Error(f(387));n=t.pendingProps,s=(o=t.memoizedState).element,i1(e,t),i4(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){s=of(Error(f(423)),t),t=oB(e,t,n,r,s);break e}else if(n!==s){s=of(Error(f(424)),t),t=oB(e,t,n,r,s);break e}else for(iI=nj(t.stateNode.containerInfo.firstChild),ik=t,i_=!0,iP=null,r=sc(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling;else{if(iL(),n===s){t=oH(e,t,r);break e}oA(e,t,n,r)}t=t.child}return t;case 5:return sb(t),null===e&&iR(t),n=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,a=s.children,nB(n,s)?a=null:null!==o&&nB(n,o)&&(t.flags|=32),oP(e,t),oA(e,t,a,r),t.child;case 6:return null===e&&iR(t),null;case 13:return oL(e,t,r);case 4:return sm(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=su(t,null,n,r):oA(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:iF(n,s),oS(e,t,n,s,r);case 7:return oA(e,t,t.pendingProps,r),t.child;case 8:case 12:return oA(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,n3(ij,n._currentValue),n._currentValue=a,null!==o)if(rZ(o.value,a)){if(o.children===s.children&&!n4.current){t=oH(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===n){if(1===o.tag){(u=i2(-1,r&-r)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=r,null!==(u=o.alternate)&&(u.lanes|=r),iG(o.return,r,t),l.lanes|=r;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(f(341));a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),iG(a,r,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}oA(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,iW(t,r),n=n(s=iK(s)),t.flags|=1,oA(e,t,n,r),t.child;case 14:return s=iF(n=t.type,t.pendingProps),s=iF(n.type,s),ok(e,t,n,s,r);case 15:return oI(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:iF(n,s),o$(e,t),t.tag=1,n7(n)?(e=!0,ii(t)):e=!1,iW(t,r),sr(t,n,s),si(t,n,s,r),oT(null,t,n,!0,e,r);case 19:return oz(e,t,r);case 22:return o_(e,t,r)}throw Error(f(156,t.tag))};var lg="function"==typeof reportError?reportError:function(e){console.error(e)};function lm(e){this._internalRoot=e}function ly(e){this._internalRoot=e}function lb(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function lv(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function lx(){}function lw(e,t,r,n,s){var o=r._reactRootContainer;if(o){var a=o;if("function"==typeof s){var l=s;s=function(){var e=lf(a);l.call(e)}}ld(t,a,e,s)}else a=function(e,t,r,n,s){if(s){if("function"==typeof n){var o=n;n=function(){var e=lf(a);o.call(e)}}var a=lc(t,n,e,0,null,!1,!1,"",lx);return e._reactRootContainer=a,e[nq]=a.current,nv(8===e.nodeType?e.parentNode:e),aq(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"==typeof n){var l=n;n=function(){var e=lf(u);l.call(e)}}var u=ll(e,0,!1,null,null,!1,!1,"",lx);return e._reactRootContainer=u,e[nq]=u.current,nv(8===e.nodeType?e.parentNode:e),aq(function(){ld(t,u,r,n)}),u}(r,t,e,s,n);return lf(a)}ly.prototype.render=lm.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(f(409));ld(e,t,null,null)},ly.prototype.unmount=lm.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;aq(function(){ld(null,e,null,null)}),t[nq]=null}},ly.prototype.unstable_scheduleHydration=function(e){if(e){var t=tC();e={blockedOn:null,target:e,priority:t};for(var r=0;r<tU.length&&0!==t&&t<tU[r].priority;r++);tU.splice(r,0,e),0===r&&t$(e)}},tI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ty(t.pendingLanes);0!==r&&(tA(t,1|r),aU(t,tn()),0==(6&au)&&(aA=tn()+500,ic()))}break;case 13:aq(function(){var t=iX(e,1);null!==t&&aM(t,e,1,aD())}),lp(e,1)}},t_=function(e){if(13===e.tag){var t=iX(e,0x8000000);null!==t&&aM(t,e,0x8000000,aD()),lp(e,0x8000000)}},tP=function(e){if(13===e.tag){var t=aL(e),r=iX(e,t);null!==r&&aM(r,e,t,aD()),lp(e,t)}},tC=function(){return tS},tO=function(e,t){var r=tS;try{return tS=e,t()}finally{tS=r}},eF=function(e,t,r){switch(t){case"input":if(eg(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=nX(n);if(!s)throw Error(f(90));eu(n),eg(n,s)}}}break;case"textarea":eE(e,r);break;case"select":null!=(t=r.value)&&ev(e,!!r.multiple,t,!1)}},eq=aV,eG=aq;var lE={findFiberByHostInstance:nJ,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lA={bundleType:lE.bundleType,version:lE.version,rendererPackageName:lE.rendererPackageName,rendererConfig:lE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=e9(e))?null:e.stateNode},findFiberByHostInstance:lE.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lS.isDisabled&&lS.supportsFiber)try{tc=lS.inject(lA),td=lS}catch(e){}}H={usingClientEntryPoint:!1,Events:[nZ,nQ,nX,eH,eV,aV]},V=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!lb(t))throw Error(f(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},q=function(e,t){if(!lb(e))throw Error(f(299));var r=!1,n="",s=lg;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=ll(e,1,!1,null,null,r,!1,n,s),e[nq]=t.current,nv(8===e.nodeType?e.parentNode:e),new lm(t)},G=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(f(188));throw Error(f(268,e=Object.keys(e).join(",")))}return e=null===(e=e9(t))?null:e.stateNode},W=function(e){return aq(e)},K=function(e,t,r){if(!lv(t))throw Error(f(200));return lw(null,e,t,!0,r)},J=function(e,t,r){if(!lb(e))throw Error(f(405));var n=null!=r&&r.hydratedSources||null,s=!1,o="",a=lg;if(null!=r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(a=r.onRecoverableError)),t=lc(t,null,e,1,null!=r?r:null,s,!1,o,a),e[nq]=t.current,nv(e),n)for(e=0;e<n.length;e++)s=(s=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new ly(t)},Z=function(e,t,r){if(!lv(t))throw Error(f(200));return lw(null,e,t,!1,r)},Q=function(e){if(!lv(e))throw Error(f(40));return!!e._reactRootContainer&&(aq(function(){lw(null,null,e,!1,function(){e._reactRootContainer=null,e[nq]=null})}),!0)},X=aV,Y=function(e,t,r,n){if(!lv(r))throw Error(f(200));if(null==e||void 0===e._reactInternals)throw Error(f(38));return lw(e,t,r,!1,n)},ee="18.2.0-next-9e3b772b8-20220608"}),ef("ft3uq",function(e,t){"use strict";e.exports=ed("9bvWS")}),ef("9bvWS",function(e,r){"use strict";function n(e,t){var r=e.length;for(e.push(t);0<r;){var n=r-1>>>1,s=e[n];if(0<a(s,t))e[n]=t,e[r]=s,r=n;else break}}function s(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;for(var n=0,s=e.length,o=s>>>1;n<o;){var l=2*(n+1)-1,u=e[l],c=l+1,d=e[c];if(0>a(u,r))c<s&&0>a(d,u)?(e[n]=d,e[c]=r,n=c):(e[n]=u,e[l]=r,n=l);else if(c<s&&0>a(d,r))e[n]=d,e[c]=r,n=c;else break}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(t(e.exports,"unstable_now",function(){return l},function(e){return l=e}),t(e.exports,"unstable_IdlePriority",function(){return u},function(e){return u=e}),t(e.exports,"unstable_ImmediatePriority",function(){return c},function(e){return c=e}),t(e.exports,"unstable_LowPriority",function(){return d},function(e){return d=e}),t(e.exports,"unstable_NormalPriority",function(){return f},function(e){return f=e}),t(e.exports,"unstable_Profiling",function(){return h},function(e){return h=e}),t(e.exports,"unstable_UserBlockingPriority",function(){return p},function(e){return p=e}),t(e.exports,"unstable_cancelCallback",function(){return g},function(e){return g=e}),t(e.exports,"unstable_continueExecution",function(){return m},function(e){return m=e}),t(e.exports,"unstable_forceFrameRate",function(){return y},function(e){return y=e}),t(e.exports,"unstable_getCurrentPriorityLevel",function(){return b},function(e){return b=e}),t(e.exports,"unstable_getFirstCallbackNode",function(){return v},function(e){return v=e}),t(e.exports,"unstable_next",function(){return x},function(e){return x=e}),t(e.exports,"unstable_pauseExecution",function(){return w},function(e){return w=e}),t(e.exports,"unstable_requestPaint",function(){return E},function(e){return E=e}),t(e.exports,"unstable_runWithPriority",function(){return A},function(e){return A=e}),t(e.exports,"unstable_scheduleCallback",function(){return S},function(e){return S=e}),t(e.exports,"unstable_shouldYield",function(){return k},function(e){return k=e}),t(e.exports,"unstable_wrapCallback",function(){return I},function(e){return I=e}),"object"==typeof performance&&"function"==typeof performance.now){var l,u,c,d,f,h,p,g,m,y,b,v,x,w,E,A,S,k,I,_,P=performance;l=function(){return P.now()}}else{var C=Date,O=C.now();l=function(){return C.now()-O}}var T=[],R=[],B=1,N=null,D=3,L=!1,M=!1,U=!1,F="function"==typeof setTimeout?setTimeout:null,j="function"==typeof clearTimeout?clearTimeout:null,z="undefined"!=typeof setImmediate?setImmediate:null;function $(e){for(var t=s(R);null!==t;){if(null===t.callback)o(R);else if(t.startTime<=e)o(R),t.sortIndex=t.expirationTime,n(T,t);else break;t=s(R)}}function H(e){if(U=!1,$(e),!M)if(null!==s(T))M=!0,ee(V);else{var t=s(R);null!==t&&et(H,t.startTime-e)}}function V(e,t){M=!1,U&&(U=!1,j(W),W=-1),L=!0;var r=D;try{for($(t),N=s(T);null!==N&&(!(N.expirationTime>t)||e&&!Z());){var n=N.callback;if("function"==typeof n){N.callback=null,D=N.priorityLevel;var a=n(N.expirationTime<=t);t=l(),"function"==typeof a?N.callback=a:N===s(T)&&o(T),$(t)}else o(T);N=s(T)}if(null!==N)var u=!0;else{var c=s(R);null!==c&&et(H,c.startTime-t),u=!1}return u}finally{N=null,D=r,L=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var q=!1,G=null,W=-1,K=5,J=-1;function Z(){return!(l()-J<K)}function Q(){if(null!==G){var e=l();J=e;var t=!0;try{t=G(!0,e)}finally{t?_():(q=!1,G=null)}}else q=!1}if("function"==typeof z)_=function(){z(Q)};else if("undefined"!=typeof MessageChannel){var X=new MessageChannel,Y=X.port2;X.port1.onmessage=Q,_=function(){Y.postMessage(null)}}else _=function(){F(Q,0)};function ee(e){G=e,q||(q=!0,_())}function et(e,t){W=F(function(){e(l())},t)}u=5,c=1,d=4,f=3,h=null,p=2,g=function(e){e.callback=null},m=function(){M||L||(M=!0,ee(V))},y=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<e?Math.floor(1e3/e):5},b=function(){return D},v=function(){return s(T)},x=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var r=D;D=t;try{return e()}finally{D=r}},w=function(){},E=function(){},A=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=D;D=e;try{return t()}finally{D=r}},S=function(e,t,r){var o=l();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?o+r:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=0x3fffffff;break;case 4:a=1e4;break;default:a=5e3}return a=r+a,e={id:B++,callback:t,priorityLevel:e,startTime:r,expirationTime:a,sortIndex:-1},r>o?(e.sortIndex=r,n(R,e),null===s(T)&&e===s(R)&&(U?(j(W),W=-1):U=!0,et(H,r-o))):(e.sortIndex=a,n(T,e),M||L||(M=!0,ee(V))),e},k=Z,I=function(e){var t=D;return function(){var r=D;D=t;try{return e.apply(this,arguments)}finally{D=r}}}}),ef("aAnIu",function(e,r){t(e.exports,"useSyncExternalStore",function(){return n},function(e){return n=e});"use strict";var n,s=ed("d1AnZ"),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=s.useState,l=s.useEffect,u=s.useLayoutEffect,c=s.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o(e,r)}catch(e){return!0}}var f="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),s=n[0].inst,o=n[1];return u(function(){s.value=r,s.getSnapshot=t,d(s)&&o({inst:s})},[e,r,t]),l(function(){return d(s)&&o({inst:s}),e(function(){d(s)&&o({inst:s})})},[e]),c(r),r};n=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:f}),ef("a1T6e",function(e,t){var r,n;"undefined"!=typeof globalThis||"undefined"!=typeof self&&self,n=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw Error("This script should only be loaded in a browser extension.");void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype?e.exports=(e=>{let t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw Error("api-metadata.json has not been included in browser-polyfill");class r extends WeakMap{constructor(e,t){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}let n=e=>e&&"object"==typeof e&&"function"==typeof e.then,s=(t,r)=>(...n)=>{e.runtime.lastError?t.reject(Error(e.runtime.lastError.message)):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},o=e=>1==e?"argument":"arguments",a=(e,t)=>function(r,...n){if(n.length<t.minArgs)throw Error(`Expected at least ${t.minArgs} ${o(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw Error(`Expected at most ${t.maxArgs} ${o(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((o,a)=>{if(t.fallbackToNoCallback)try{r[e](...n,s({resolve:o,reject:a},t))}catch(s){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,s),r[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,o()}else t.noCallback?(r[e](...n),o()):r[e](...n,s({resolve:o,reject:a},t))})},l=(e,t,r)=>new Proxy(t,{apply:(t,n,s)=>r.call(n,e,...s)}),u=Function.call.bind(Object.prototype.hasOwnProperty),c=(e,t={},r={})=>{let n=Object.create(null);return new Proxy(Object.create(e),{has:(t,r)=>r in e||r in n,get(s,o,d){if(o in n)return n[o];if(!(o in e))return;let f=e[o];if("function"==typeof f)if("function"==typeof t[o])f=l(e,e[o],t[o]);else if(u(r,o)){let t=a(o,r[o]);f=l(e,e[o],t)}else f=f.bind(e);else if("object"==typeof f&&null!==f&&(u(t,o)||u(r,o)))f=c(f,t[o],r[o]);else{if(!u(r,"*"))return Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(t){e[o]=t}}),f;f=c(f,t[o],r["*"])}return n[o]=f,f},set:(t,r,s,o)=>(r in n?n[r]=s:e[r]=s,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(n,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(n,t)})},d=e=>({addListener(t,r,...n){t.addListener(e.get(r),...n)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),f=new r(e=>"function"!=typeof e?e:function(t){e(c(t,{},{getContent:{minArgs:0,maxArgs:0}}))}),h=new r(e=>"function"!=typeof e?e:function(t,r,s){let o,a,l=!1,u=new Promise(e=>{o=function(t){l=!0,e(t)}});try{a=e(t,r,o)}catch(e){a=Promise.reject(e)}let c=!0!==a&&n(a);if(!0!==a&&!c&&!l)return!1;return(c?a:u).then(e=>{s(e)},e=>{let t;s({__mozWebExtensionPolyfillReject__:!0,message:e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred"})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)}),!0}),p=({reject:t,resolve:r},n)=>{e.runtime.lastError?"The message port closed before a response was received."===e.runtime.lastError.message?r():t(Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?t(Error(n.message)):r(n)},g=(e,t,r,...n)=>{if(n.length<t.minArgs)throw Error(`Expected at least ${t.minArgs} ${o(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw Error(`Expected at most ${t.maxArgs} ${o(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((e,t)=>{let s=p.bind(null,{resolve:e,reject:t});n.push(s),r.sendMessage(...n)})},m={devtools:{network:{onRequestFinished:d(f)}},runtime:{onMessage:d(h),onMessageExternal:d(h),sendMessage:g.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:g.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":y},services:{"*":y},websites:{"*":y}},c(e,m,t)})(chrome):e.exports=globalThis.browser},"function"==typeof define&&define.amd?define("webextension-polyfill",["module"],n):n(e)}),ef("fdr9l",function(e,r){let n,s,o,a,l,u,c,d,f,h,p,g,m,y,b,v,x,w,E,A,S,k,I,_,P,C,O,T,R,B,N,D,L,M,U,F,j,z,$,H,V,q,G,W,K,J,Z,Q,X,Y,ee,et,er,en,ei,es,eo,el,eu,ec,ef,eh,ep,eg,em,ey,eb,ev,ex,ew,eE,eA,eS,ek,eI,e_,eP,eC,eO,eT,eR,eB,eN,eD,eL,eM,eU,eF,ej,ez,e$,eH,eV,eq,eG,eW,eK,eJ;t(e.exports,"deniedByUser",function(){return vo}),t(e.exports,"getDeniedByUserError",function(){return va}),t(e.exports,"parseLedgerError",function(){return vu}),t(e.exports,"transports",function(){return vc}),t(e.exports,"connectDevice",function(){return vf}),t(e.exports,"unsubscribeCheckDeviceListeners",function(){return vg}),t(e.exports,"checkDevice",function(){return vm}),t(e.exports,"getAddressesEth",function(){return j1}),t(e.exports,"getAddressesSolana",function(){return j2}),t(e.exports,"signTransaction",function(){return HH}),t(e.exports,"signSolanaTransaction",function(){return HV}),t(e.exports,"personalSign",function(){return Hq}),t(e.exports,"signTypedData_v4",function(){return HG}),t(e.exports,"solanaSignMessage",function(){return HW});var eZ=ed("bIMcy").Buffer,eQ=Object.defineProperty,eX=(e,t,r)=>t in e?eQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eY=(e,t,r)=>(eX(e,"symbol"!=typeof t?t+"":t,r),r),e0=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},e1=(e,t,r)=>(e0(e,t,"read from private field"),r?r.call(e):t.get(e)),e2=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},e3=(e,t,r,n)=>(e0(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),e8=(e,t,r,n)=>({set _(i){e3(e,t,i,r)},get _(){return e1(e,t,n)}}),e6=(e,t,r)=>(e0(e,t,"access private method"),r),e4="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof ea?ea:"u">typeof self?self:{};function e5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function e9(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}hq=hG||(hG={}),function(e){var t="object"==typeof globalThis?globalThis:"object"==typeof e4?e4:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch{}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch{}}(),r=n(hq);function n(e,t){return function(r,n){Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}"u">typeof t.Reflect&&(r=n(t.Reflect,r)),e(r,t),typeof t.Reflect>"u"&&(t.Reflect=hq)}(function(e,t){var r,n=Object.prototype.hasOwnProperty,s="function"==typeof Symbol,o=s&&"u">typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=s&&"u">typeof Symbol.iterator?Symbol.iterator:"@@iterator",l="function"==typeof Object.create,u=({__proto__:[]})instanceof Array,c=!l&&!u,d={create:l?function(){return U(Object.create(null))}:u?function(){return U({__proto__:null})}:function(){return U({})},has:c?function(e,t){return n.call(e,t)}:function(e,t){return t in e},get:c?function(e,t){return n.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},f=Object.getPrototypeOf(Function),h="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[a]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();function n(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(n.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),n.prototype.has=function(e){return this._find(e,!1)>=0},n.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},n.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},n.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,s=r+1;s<n;s++)this._keys[s-1]=this._keys[s],this._values[s-1]=this._values[s];return this._keys.length--,this._values.length--,T(t,this._cacheKey)&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},n.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},n.prototype.keys=function(){return new r(this._keys,this._values,s)},n.prototype.values=function(){return new r(this._keys,this._values,o)},n.prototype.entries=function(){return new r(this._keys,this._values,l)},n.prototype["@@iterator"]=function(){return this.entries()},n.prototype[a]=function(){return this.entries()},n.prototype._find=function(e,t){if(!T(this._cacheKey,e)){this._cacheIndex=-1;for(var r=0;r<this._keys.length;r++)if(T(this._keys[r],e)){this._cacheIndex=r;break}}return this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},n;function s(e,t){return e}function o(e,t){return t}function l(e,t){return[e,t]}}(),p="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[a]=function(){return this.keys()},e}(),g="function"==typeof WeakMap?WeakMap:function(){var e=d.create(),t=s();function r(){this._key=s()}return r.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&d.has(t,this._key)},r.prototype.get=function(e){var t=o(e,!1);return void 0!==t?d.get(t,this._key):void 0},r.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},r.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},r.prototype.clear=function(){this._key=s()},r;function s(){var t;do t="@@WeakMap@@"+function(){var e=function(e){if("function"==typeof Uint8Array){var t=new Uint8Array(16);return"u">typeof crypto?crypto.getRandomValues(t):"u">typeof msCrypto?msCrypto.getRandomValues(t):a(t,16),t}return a(Array(e),e)}(16);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",r=0;r<16;++r){var n=e[r];(4===r||6===r||8===r)&&(t+="-"),n<16&&(t+="0"),t+=n.toString(16).toLowerCase()}return t}();while(d.has(e,t))return e[t]=!0,t}function o(e,r){if(!n.call(e,t)){if(!r)return;Object.defineProperty(e,t,{value:d.create()})}return e[t]}function a(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}}(),m=s?Symbol.for("@reflect-metadata:registry"):void 0,y=(!S(m)&&I(t.Reflect)&&Object.isExtensible(t.Reflect)&&(r=t.Reflect[m]),S(r)&&(r=function(){!(!S(m)&&"u">typeof t.Reflect)||m in t.Reflect||"function"!=typeof t.Reflect.defineMetadata||(r=(e=t.Reflect).defineMetadata,n=e.hasOwnMetadata,s=e.getOwnMetadata,o=e.getOwnMetadataKeys,a=e.deleteMetadata,l=new g,u={isProviderFor:function(e,t){var r=l.get(e);return!!(!S(r)&&r.has(t))||!!o(e,t).length&&(S(r)&&(r=new p,l.set(e,r)),r.add(t),!0)},OrdinaryDefineOwnMetadata:r,OrdinaryHasOwnMetadata:n,OrdinaryGetOwnMetadata:s,OrdinaryOwnMetadataKeys:o,OrdinaryDeleteMetadata:a});var e,r,n,s,o,a,l,u,c,d,f,y=new g,b={registerProvider:function(e){if(!Object.isExtensible(b))throw Error("Cannot add provider to a frozen registry.");switch(!0){case u===e:break;case S(c):c=e;break;case c===e:break;case S(d):d=e;break;case d===e:break;default:void 0===f&&(f=new p),f.add(e)}},getProvider:v,setProvider:function(e,t,r){if(!function(e){if(S(e))throw TypeError();return c===e||d===e||!S(f)&&f.has(e)}(r))throw Error("Metadata provider not registered.");var n=v(e,t);if(n!==r){if(!S(n))return!1;var s=y.get(e);S(s)&&(s=new h,y.set(e,s)),s.set(t,r)}return!0}};return b;function v(e,t){var r,n=y.get(e);return S(n)||(r=n.get(t)),S(r)&&(r=function(e,t){if(!S(c)){if(c.isProviderFor(e,t))return c;if(!S(d)){if(d.isProviderFor(e,t))return c;if(!S(f))for(var r=B(f);;){var n=N(r);if(!n)return;var s=n.value;if(s.isProviderFor(e,t))return D(r),s}}}if(!S(u)&&u.isProviderFor(e,t))return u}(e,t),S(r)||(S(n)&&(n=new h,y.set(e,n)),n.set(t,r))),r}}()),!S(m)&&I(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,m,{enumerable:!1,configurable:!1,writable:!1,value:r}),r),b=function(e){var t=new g,r={isProviderFor:function(e,r){var n=t.get(e);return!S(n)&&n.has(r)},OrdinaryDefineOwnMetadata:function(e,t,r,s){n(r,s,!0).set(e,t)},OrdinaryHasOwnMetadata:function(e,t,r){var s=n(t,r,!1);return!S(s)&&!!s.has(e)},OrdinaryGetOwnMetadata:function(e,t,r){var s=n(t,r,!1);if(!S(s))return s.get(e)},OrdinaryOwnMetadataKeys:function(e,t){var r=[],s=n(e,t,!1);if(S(s))return r;for(var o=s.keys(),a=B(o),l=0;;){var u=N(a);if(!u)return r.length=l,r;var c=u.value;try{r[l]=c}catch(e){try{D(a)}finally{throw e}}l++}},OrdinaryDeleteMetadata:function(e,r,s){var o=n(r,s,!1);if(S(o)||!o.delete(e))return!1;if(0===o.size){var a=t.get(r);S(a)||(a.delete(s),0===a.size&&t.delete(a))}return!0}};return y.registerProvider(r),r;function n(n,s,o){var a=t.get(n),l=!1;if(S(a)){if(!o)return;a=new h,t.set(n,a),l=!0}var u=a.get(s);if(S(u)){if(!o)return;if(u=new h,a.set(s,u),!e.setProvider(n,s,r))throw a.delete(s),l&&t.delete(n),Error("Wrong provider for target.")}return u}}(y);function v(e,t,r){var n=M(t,r,!1);return!S(n)&&!!n.OrdinaryHasOwnMetadata(e,t,r)}function x(e,t,r){var n=M(t,r,!1);if(!S(n))return n.OrdinaryGetOwnMetadata(e,t,r)}function w(e,t,r,n){M(r,n,!0).OrdinaryDefineOwnMetadata(e,t,r,n)}function E(e,t){var r=M(e,t,!1);return r?r.OrdinaryOwnMetadataKeys(e,t):[]}function A(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function S(e){return void 0===e}function k(e){return null===e}function I(e){return"object"==typeof e?null!==e:"function"==typeof e}e("decorate",function(e,t,r,n){if(S(r)){if(!P(e)||!O(t))throw TypeError();for(var s=e,o=t,a=s.length-1;a>=0;--a){var l=(0,s[a])(o);if(!S(l)&&!k(l)){if(!O(l))throw TypeError();o=l}}return o}if(!P(e)||!I(t)||!I(n)&&!S(n)&&!k(n))throw TypeError();return k(n)&&(n=void 0),function(e,t,r,n){for(var s=e.length-1;s>=0;--s){var o=(0,e[s])(t,r,n);if(!S(o)&&!k(o)){if(!I(o))throw TypeError();n=o}}return n}(e,t,r=_(r),n)}),e("metadata",function(e,t){return function(r,n){if(!I(r)||!S(n)&&!function(e){switch(A(e)){case 3:case 4:return!0;default:return!1}}(n))throw TypeError();w(e,t,r,n)}}),e("defineMetadata",function(e,t,r,n){if(!I(r))throw TypeError();return S(n)||(n=_(n)),w(e,t,r,n)}),e("hasMetadata",function(e,t,r){if(!I(t))throw TypeError();return S(r)||(r=_(r)),function e(t,r,n){if(v(t,r,n))return!0;var s=L(r);return!k(s)&&e(t,s,n)}(e,t,r)}),e("hasOwnMetadata",function(e,t,r){if(!I(t))throw TypeError();return S(r)||(r=_(r)),v(e,t,r)}),e("getMetadata",function(e,t,r){if(!I(t))throw TypeError();return S(r)||(r=_(r)),function e(t,r,n){if(v(t,r,n))return x(t,r,n);var s=L(r);if(!k(s))return e(t,s,n)}(e,t,r)}),e("getOwnMetadata",function(e,t,r){if(!I(t))throw TypeError();return S(r)||(r=_(r)),x(e,t,r)}),e("getMetadataKeys",function(e,t){if(!I(e))throw TypeError();return S(t)||(t=_(t)),function e(t,r){var n=E(t,r),s=L(t);if(null===s)return n;var o=e(s,r);if(o.length<=0)return n;if(n.length<=0)return o;for(var a=new p,l=[],u=0;u<n.length;u++){var c=n[u],d=a.has(c);d||(a.add(c),l.push(c))}for(var f=0;f<o.length;f++){var c=o[f],d=a.has(c);d||(a.add(c),l.push(c))}return l}(e,t)}),e("getOwnMetadataKeys",function(e,t){if(!I(e))throw TypeError();return S(t)||(t=_(t)),E(e,t)}),e("deleteMetadata",function(e,t,r){if(!I(t)||(S(r)||(r=_(r)),!I(t)))throw TypeError();S(r)||(r=_(r));var n=M(t,r,!1);return!S(n)&&n.OrdinaryDeleteMetadata(e,t,r)});function _(e){var t=function(e,t){switch(A(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r="string",n=R(e,o);if(void 0!==n){var s=n.call(e,r);if(I(s))throw TypeError();return s}return function(e,t){if("string"===t){var r=e.toString;if(C(r)){var n=r.call(e);if(!I(n))return n}var s=e.valueOf;if(C(s)){var n=s.call(e);if(!I(n))return n}}else{var s=e.valueOf;if(C(s)){var n=s.call(e);if(!I(n))return n}var o=e.toString;if(C(o)){var n=o.call(e);if(!I(n))return n}}throw TypeError()}(e,r)}(e,0);return"symbol"==typeof t?t:""+t}function P(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function C(e){return"function"==typeof e}function O(e){return"function"==typeof e}function T(e,t){return e===t||e!=e&&t!=t}function R(e,t){var r=e[t];if(null!=r){if(!C(r))throw TypeError();return r}}function B(e){var t=R(e,a);if(!C(t))throw TypeError();var r=t.call(e);if(!I(r))throw TypeError();return r}function N(e){var t=e.next();return!t.done&&t}function D(e){var t=e.return;t&&t.call(e)}function L(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===f||t!==f)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var s=n.constructor;return"function"!=typeof s||s===e?t:s}function M(e,t,r){var n=y.getProvider(e,t);if(!S(n))return n;if(r){if(y.setProvider(e,t,b))return b;throw Error("Illegal state.")}}function U(e){return e.__=void 0,delete e.__,e}});let e7=class{constructor(e,t,r,n,s){eY(this,"cla"),eY(this,"ins"),eY(this,"p1"),eY(this,"p2"),eY(this,"data"),this.cla=e,this.ins=t,this.p1=r,this.p2=n,this.data=s??new Uint8Array}getRawApdu(){let e=Uint8Array.from([this.cla,this.ins,this.p1,this.p2,this.data.length]),t=new Uint8Array(e.length+this.data.length);return t.set(e,0),this.data.length>0&&t.set(this.data,e.length),t}};function te(e){return"string"==typeof e&&/^0x[0-9a-fA-F]*$/.test(e)}function tt(e){var t;if(e.startsWith("0x")&&(e=e.slice(2)),0===e.length)return new Uint8Array;if(e.length%2!=0&&(e="0"+e),!1===/^[0-9a-fA-F]*$/.test(e))return null;let r=null==(t=e.match(/.{1,2}/g))?void 0:t.map(e=>parseInt(e,16));return!r||r.some(isNaN)?null:new Uint8Array(r)}function tr(e,t=!0){return`${t?"0x":""}${Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")}`}let tn=class{constructor(e,t=ta){eY(this,"_tag","ValueOverflow"),eY(this,"originalError"),eY(this,"message"),this.message=`Value overflow for ${e}, max is ${t}`}},ti=class{constructor(e,t=0){eY(this,"_tag","DataOverflow"),eY(this,"message"),eY(this,"originalError"),this.message=0===t?`this.data is already full (value: ${e})`:`this.data will overflow with "${e}", remaining bytes: ${t}`}},ts=class{constructor(e){eY(this,"_tag","HexaString"),eY(this,"message"),eY(this,"originalError"),this.message=`Invalid encoded hexa string or length is null: ${e}`}},to=class{constructor(e=0xffffffff){eY(this,"data",new Uint8Array),eY(this,"errors",[]),eY(this,"build",()=>this.data),eY(this,"tryBuild",()=>this.hasErrors()?void 0:this.data),eY(this,"add8BitUIntToData",e=>this.addNumberToData(e,8n,!1,!1)),eY(this,"add16BitUIntToData",(e,t=!0)=>this.addNumberToData(e,16n,!1,t)),eY(this,"add32BitUIntToData",(e,t=!0)=>this.addNumberToData(e,32n,!1,t)),eY(this,"add64BitUIntToData",(e,t=!0)=>this.addNumberToData(e,64n,!1,t)),eY(this,"add128BitUIntToData",(e,t=!0)=>this.addNumberToData(e,128n,!1,t)),eY(this,"add256BitUIntToData",(e,t=!0)=>this.addNumberToData(e,256n,!1,t)),eY(this,"add16BitIntToData",(e,t=!0)=>this.addNumberToData(e,16n,!0,t)),eY(this,"add32BitIntToData",(e,t=!0)=>this.addNumberToData(e,32n,!0,t)),eY(this,"add64BitIntToData",(e,t=!0)=>this.addNumberToData(e,64n,!0,t)),eY(this,"add128BitIntToData",(e,t=!0)=>this.addNumberToData(e,128n,!0,t)),eY(this,"add256BitIntToData",(e,t=!0)=>this.addNumberToData(e,256n,!0,t)),eY(this,"addBufferToData",e=>(this.hasEnoughLengthRemaining(e)?this.data=Uint8Array.from([...this.data,...e]):this.errors.push(new ti(e.toString())),this)),eY(this,"addHexaStringToData",e=>{let t=tt(e);return null===t||0===t.length?this.errors.push(new ts(e)):this.addBufferToData(t),this}),eY(this,"addAsciiStringToData",e=>{let t=new TextEncoder().encode(e);return this.addBufferToData(t),this}),eY(this,"encodeInLVFromHexa",e=>{let t=tt(e);return null===t||0===t.length?this.errors.push(new ts(e)):this.hasEnoughLengthRemaining(t,!0)?(this.add8BitUIntToData(t.length),this.addBufferToData(t)):this.errors.push(new ti(e)),this}),eY(this,"encodeInLVFromBuffer",e=>(this.hasEnoughLengthRemaining(e,!0)?(this.add8BitUIntToData(e.length),this.addBufferToData(e)):this.errors.push(new ti(e.toString())),this)),eY(this,"encodeInLVFromAscii",e=>(this.hasEnoughLengthRemaining(e,!0)?(this.add8BitUIntToData(e.length),this.addAsciiStringToData(e)):this.errors.push(new ti(e)),this)),eY(this,"encodeInTLVFromAscii",(e,t)=>(this.add8BitUIntToData(e),this.encodeInLVFromAscii(t))),eY(this,"encodeInTLVFromHexa",(e,t)=>(this.add8BitUIntToData(e),this.encodeInLVFromHexa(t))),eY(this,"encodeInTLVFromBuffer",(e,t)=>(this.add8BitUIntToData(e),this.encodeInLVFromBuffer(t))),eY(this,"encodeInTLVFromUInt8",(e,t)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(1),this.add8BitUIntToData(t))),eY(this,"encodeInTLVFromUInt16",(e,t,r=!0)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(2),this.add16BitUIntToData(t,r))),eY(this,"encodeInTLVFromUInt32",(e,t,r=!0)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(4),this.add32BitUIntToData(t,r))),eY(this,"encodeInTLVFromUInt64",(e,t,r=!0)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(8),this.add64BitUIntToData(t,r))),eY(this,"getAvailablePayloadLength",()=>this.maxPayloadSize-this.data.length),eY(this,"getErrors",()=>this.errors),eY(this,"hasErrors",()=>0!==this.errors.length),eY(this,"hasEnoughLengthRemaining",(e,t=!1)=>this.data.length+e.length+ +!!t<=this.maxPayloadSize),this.maxPayloadSize=e}addNumberToData(e,t,r,n){let s=this.checkBoundsAndConvert(e,t,r);if(void 0===s)return this;let o=Number(t)/8,a=new Uint8Array(o);if(n)for(let e=o-1;e>=0;e--)a[e]=Number(255n&s),s>>=8n;else for(let e=0;e<o;e++)a[e]=Number(255n&s),s>>=8n;return this.addBufferToData(a)}checkBoundsAndConvert(e,t,r){if("number"==typeof e){if(!Number.isInteger(e)||e>Number.MAX_SAFE_INTEGER)return void this.errors.push(new tn(e.toString()));e=BigInt(e)}if(r){let r=1n<<t-1n;if(e>=r||e<-r)return void this.errors.push(new tn(e.toString(),r-1n));e<0n&&(e=(~(e=-e)&(1n<<t)-1n)+1n)}else{let r=1n<<t;if(e<0||e>=r)return void this.errors.push(new tn(e.toString(),r-1n))}return e}},ta=255,tl=class{constructor({ins:e,cla:t,p1:r,p2:n}){eY(this,"_ins"),eY(this,"_cla"),eY(this,"_p1"),eY(this,"p2"),eY(this,"data",new to(ta)),eY(this,"build",()=>new e7(this._cla,this._ins,this._p1,this.p2,this.data.build())),eY(this,"add8BitUIntToData",e=>(this.data.add8BitUIntToData(e),this)),eY(this,"add16BitUIntToData",e=>(this.data.add16BitUIntToData(e),this)),eY(this,"add32BitUIntToData",e=>(this.data.add32BitUIntToData(e),this)),eY(this,"addBufferToData",e=>(this.data.addBufferToData(e),this)),eY(this,"addHexaStringToData",e=>(this.data.addHexaStringToData(e),this)),eY(this,"addAsciiStringToData",e=>(this.data.addAsciiStringToData(e),this)),eY(this,"encodeInLVFromHexa",e=>(this.data.encodeInLVFromHexa(e),this)),eY(this,"encodeInLVFromBuffer",e=>(this.data.encodeInLVFromBuffer(e),this)),eY(this,"encodeInLVFromAscii",e=>(this.data.encodeInLVFromAscii(e),this)),eY(this,"getAvailablePayloadLength",()=>this.data.getAvailablePayloadLength()),eY(this,"getErrors",()=>this.data.getErrors()),this._cla=255&t,this._ins=255&e,this._p1=255&r,this.p2=255&n}},tu=class{constructor(e){eY(this,"index",0),this.buffer=e}testMinimalLength(e){return e<=this.buffer.length-this.index}extract8BitUInt(){if(!this.outOfRange(1))return this.buffer[this.index++]}extract16BitUInt(e=!0){let t=this.extractNumber(16n,!1,e);return void 0===t?void 0:Number(t)}extract16BitInt(e=!0){let t=this.extractNumber(16n,!0,e);return void 0===t?void 0:Number(t)}extract32BitUInt(e=!0){let t=this.extractNumber(32n,!1,e);return void 0===t?void 0:Number(t)}extract32BitInt(e=!0){let t=this.extractNumber(32n,!0,e);return void 0===t?void 0:Number(t)}extract64BitUInt(e=!0){return this.extractNumber(64n,!1,e)}extract64BitInt(e=!0){return this.extractNumber(64n,!0,e)}extract128BitUInt(e=!0){return this.extractNumber(128n,!1,e)}extract128BitInt(e=!0){return this.extractNumber(128n,!0,e)}extract256BitUInt(e=!0){return this.extractNumber(256n,!1,e)}extract256BitInt(e=!0){return this.extractNumber(256n,!0,e)}extractFieldByLength(e){if(this.outOfRange(e))return;if(0===e)return new Uint8Array;let t=this.buffer.slice(this.index,this.index+e);return this.index+=e,t}extractFieldLVEncoded(){let e=this.extract8BitUInt();if(void 0===e)return;if(0===e)return new Uint8Array;let t=this.extractFieldByLength(e);return void 0===t&&this.index--,t}extractFieldTLVEncoded(){if(this.outOfRange(2))return;let e=this.index,t=this.extract8BitUInt(),r=this.extractFieldLVEncoded();if(void 0===t||void 0===r)return void this.index--;let n=this.index;return{tag:t,value:r,tlv:this.buffer.slice(e,n)}}encodeToHexaString(e,t=!1){if(void 0===e||0===e.length)return"";let r=tr(e);return t?r:r.slice(2)}encodeToString(e){let t="",r=0;if(!e)return t;for(;r<=e.length;){let n=e[r];n&&(t+=String.fromCharCode(n)),r++}return t}getCurrentIndex(){return this.index}resetIndex(){this.index=0}getUnparsedRemainingLength(){return this.buffer.length-this.index}outOfRange(e){return this.index+e>this.buffer.length}extractNumber(e,t,r){let n=Number(e)/8;if(this.outOfRange(n))return;let s=0n;if(r)for(let e=0;e<n;e++)s=s<<8n|BigInt(this.buffer[e+this.index]);else for(let e=n-1;e>=0;e--)s=s<<8n|BigInt(this.buffer[e+this.index]);if(t){let t=1n<<e-1n;s&t&&(s-=t<<1n)}return this.index+=n,s}},tc=class{constructor(e){eY(this,"parser"),eY(this,"testMinimalLength",e=>this.parser.testMinimalLength(e)),eY(this,"extract8BitUInt",()=>this.parser.extract8BitUInt()),eY(this,"extract16BitUInt",()=>this.parser.extract16BitUInt()),eY(this,"extract32BitUInt",()=>this.parser.extract32BitUInt()),eY(this,"extractFieldByLength",e=>this.parser.extractFieldByLength(e)),eY(this,"extractFieldLVEncoded",()=>this.parser.extractFieldLVEncoded()),eY(this,"extractFieldTLVEncoded",()=>this.parser.extractFieldTLVEncoded()),eY(this,"encodeToString",e=>this.parser.encodeToString(e)),eY(this,"getUnparsedRemainingLength",()=>this.parser.getUnparsedRemainingLength()),this.parser=new tu(e.data)}encodeToHexaString(e,t=!1){return t?this.parser.encodeToHexaString(e,!0):this.parser.encodeToHexaString(e,!1)}},td=class{constructor(e){eY(this,"_tag","InvalidStatusWordError"),eY(this,"originalError"),this.originalError=Error(e??"Invalid status word.")}},tf=class{constructor(e){eY(this,"_tag","InvalidResponseFormatError"),eY(this,"originalError"),this.originalError=Error(e??"Invalid response format.")}};var th=((s=th||{}).Error="ERROR",s.Success="SUCCESS",s);function tp({data:e,error:t}){return t?{status:"ERROR",error:t}:{status:"SUCCESS",data:e}}function tg(e){return"SUCCESS"===e.status}let tm=class e{static isValidStatusCode(e){return 2===e.length}static isSuccessResponse({statusCode:t}){return!!e.isValidStatusCode(t)&&144===t[0]&&0===t[1]}static isLockedDeviceResponse({statusCode:t}){return!!e.isValidStatusCode(t)&&(85===t[0]&&21===t[1]||105===t[0]&&130===t[1]||83===t[0]&&3===t[1])}static isRefusedByUser({statusCode:t}){return!!e.isValidStatusCode(t)&&(85===t[0]&&1===t[1]||105===t[0]&&133===t[1])}static isAppAlreadyInstalled({statusCode:t}){return!!e.isValidStatusCode(t)&&(106===t[0]&&128===t[1]||106===t[0]&&129===t[1]||106===t[0]&&142===t[1]||106===t[0]&&143===t[1])}static isOutOfMemory({statusCode:t}){return!!e.isValidStatusCode(t)&&(106===t[0]&&132===t[1]||106===t[0]&&133===t[1]||81===t[0]&&2===t[1]||81===t[0]&&3===t[1])}static isApduThatTriggersDisconnection(e){let t=new Map;return t.set("openApp",new Uint8Array([224,216,0,0])),t.set("closeApp",new Uint8Array([176,167,0,0])),Array.from(t.values()).some(t=>{for(let r=0;r<4;r++)if(t[r]!==e[r])return!1;return!0})}},ty=class{constructor({tag:e,errorCode:t,originalError:r,message:n}){eY(this,"_tag"),eY(this,"originalError"),eY(this,"errorCode"),eY(this,"message"),this._tag=e,this.originalError=r,this.errorCode=t,this.message=n??"An error occured during device exchange."}},tb=class{constructor(e){eY(this,"_tag","UnknownDeviceExchangeError"),eY(this,"originalError"),eY(this,"message"),this.originalError=e,this.message="Unexpected device exchange error happened."}},tv=(e,t)=>Object.keys(t).includes(e),tx=class extends ty{constructor(e){super({tag:"GlobalCommandError",...e})}},tw={5515:{message:"Device is locked.",tag:"DeviceLockedError"},5501:{message:"Action refused on device.",tag:"ActionRefusedError"},5502:{message:"Pin is not set",tag:"PinNotSetError"},5223:{message:"Device internal error",tag:"DeviceInternalError"},"6e00":{message:"CLA not supported",tag:"DeviceInternalError"},"6d00":{message:"INS not supported",tag:"DeviceInternalError"}},tE=class{static handle(e){let t=new tc(e).encodeToHexaString(e.statusCode);return tv(t,tw)?new tx({...tw[t],errorCode:t}):new tb({message:"UnknownError",errorCode:t})}},tA=class{constructor(){eY(this,"name","closeApp"),eY(this,"args"),eY(this,"triggersDisconnection",!0)}getApdu(){return new tl({cla:176,ins:167,p1:0,p2:0}).build()}parseResponse(e){return tm.isSuccessResponse(e)?tp({data:void 0}):tp({error:tE.handle(e)})}},tS=class{constructor(){eY(this,"name","getAppAndVersion"),eY(this,"args")}getApdu(){return new tl({cla:176,ins:1,p1:0,p2:0}).build()}parseResponse(e){if(!tm.isSuccessResponse(e))return tp({error:tE.handle(e)});let t=new tc(e);if(1!==t.extract8BitUInt())return tp({error:new tf("getAppAndVersion: format not supported")});let r=t.encodeToString(t.extractFieldLVEncoded()),n=t.encodeToString(t.extractFieldLVEncoded());return 0===t.getUnparsedRemainingLength()?tp({data:{name:r,version:n}}):tp({data:{name:r,version:n,flags:t.extractFieldLVEncoded()}})}};var tk=((o=tk||{})[o.BATTERY_PERCENTAGE=0]="BATTERY_PERCENTAGE",o[o.BATTERY_VOLTAGE=1]="BATTERY_VOLTAGE",o[o.BATTERY_TEMPERATURE=2]="BATTERY_TEMPERATURE",o[o.BATTERY_CURRENT=3]="BATTERY_CURRENT",o[o.BATTERY_FLAGS=4]="BATTERY_FLAGS",o),tI=((a=tI||{})[a.NONE=0]="NONE",a[a.USB=1]="USB",a[a.QI=2]="QI",a),t_={exports:{}},tP={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},tC=()=>{};!function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=tP,o=(t=e.exports={}).re=[],a=t.safeRe=[],l=t.src=[],u=t.safeSrc=[],c=t.t={},d=0,f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",s],[f,n]],p=e=>{for(let[t,r]of h)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},g=(e,t,r)=>{let n=p(t),s=d++;tC(e,s,t),c[e]=s,l[s]=t,u[s]=n,o[s]=new RegExp(t,r?"g":void 0),a[s]=new RegExp(n,r?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),g("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${f}+`),g("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),g("FULL",`^${l[c.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),g("LOOSE",`^${l[c.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),g("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",l[c.COERCE],!0),g("COERCERTLFULL",l[c.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(t_,t_.exports);var tO=t_.exports;let tT=Object.freeze({loose:!0}),tR=Object.freeze({});var tB=e=>e?"object"!=typeof e?tT:e:tR;let tN=/^[0-9]+$/,tD=(e,t)=>{let r=tN.test(e),n=tN.test(t);return r&&n&&(e*=1,t*=1),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};var tL={compareIdentifiers:tD,rcompareIdentifiers:(e,t)=>tD(t,e)};let{MAX_LENGTH:tM,MAX_SAFE_INTEGER:tU}=tP,{safeRe:tF,t:tj}=tO,{compareIdentifiers:tz}=tL,t$=class e{constructor(t,r){if(r=tB(r),t instanceof e){if(!!r.loose===t.loose&&!!r.includePrerelease===t.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>tM)throw TypeError(`version is longer than ${tM} characters`);tC("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?tF[tj.LOOSE]:tF[tj.FULL]);if(!n)throw TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>tU||this.major<0)throw TypeError("Invalid major version");if(this.minor>tU||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>tU||this.patch<0)throw TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<tU)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(tC("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),tz(this.major,t.major)||tz(this.minor,t.minor)||tz(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return -1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let e=this.prerelease[r],n=t.prerelease[r];if(tC("prerelease compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return -1;if(e===n)continue;return tz(e,n)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let e=this.build[r],n=t.build[r];if(tC("build compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return -1;if(e===n)continue;return tz(e,n)}while(++r)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?tF[tj.PRERELEASELOOSE]:tF[tj.PRERELEASE]);if(!e||e[1]!==t)throw Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=+!!Number(r);if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===tz(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var tH=(e,t,r=!1)=>{if(e instanceof t$)return e;try{return new t$(e,t)}catch(e){if(!r)return null;throw e}},tV=(e,t,r)=>new t$(e,r).compare(new t$(t,r)),tq=(e,t,r)=>{let n=new t$(e,r),s=new t$(t,r);return n.compare(s)||n.compareBuild(s)},tG=(e,t,r)=>tV(e,t,r)>0,tW=(e,t,r)=>0>tV(e,t,r),tK=(e,t,r)=>0===tV(e,t,r),tJ=(e,t,r)=>0!==tV(e,t,r),tZ=(e,t,r)=>tV(e,t,r)>=0,tQ=(e,t,r)=>0>=tV(e,t,r),tX=(e,t,r,n)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return tK(e,r,n);case"!=":return tJ(e,r,n);case">":return tG(e,r,n);case">=":return tZ(e,r,n);case"<":return tW(e,r,n);case"<=":return tQ(e,r,n);default:throw TypeError(`Invalid operator: ${t}`)}};let{safeRe:tY,t:t0}=tO,t1=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}};function t2(){if(hK)return hW;hK=1;let e=/\s+/g;class t{constructor(r,o){if(o=n(o),r instanceof t)return!!o.loose===r.loose&&!!o.includePrerelease===r.includePrerelease?r:new t(r.raw,o);if(r instanceof s)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease,this.raw=r.trim().replace(e," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!g(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(let e of this.set)if(1===e.length&&m(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+e,n=r.get(t);if(n)return n;let a=this.options.loose,m=a?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];o("hyphen replace",e=e.replace(m,P(this.options.includePrerelease))),o("comparator trim",e=e.replace(l[u.COMPARATORTRIM],c)),o("tilde trim",e=e.replace(l[u.TILDETRIM],d)),o("caret trim",e=e.replace(l[u.CARETTRIM],f));let y=e.split(" ").map(e=>b(e,this.options)).join(" ").split(/\s+/).map(e=>_(e,this.options));a&&(y=y.filter(e=>(o("loose invalid filter",e,this.options),!!e.match(l[u.COMPARATORLOOSE])))),o("range list",y);let v=new Map;for(let e of y.map(e=>new s(e,this.options))){if(g(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");let x=[...v.values()];return r.set(t,x),x}intersects(e,r){if(!(e instanceof t))throw TypeError("a Range is required");return this.set.some(t=>y(t,r)&&e.set.some(e=>y(e,r)&&t.every(t=>e.every(e=>t.intersects(e,r)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new a(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(C(this.set[t],e,this.options))return!0;return!1}}hW=t;let r=new t1,n=tB,s=t3(),o=tC,a=t$,{safeRe:l,t:u,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:f}=tO,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=tP,g=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,y=(e,t)=>{let r=!0,n=e.slice(),s=n.pop();for(;r&&n.length;)r=n.every(e=>s.intersects(e,t)),s=n.pop();return r},b=(e,t)=>(o("comp",e,t),o("caret",e=E(e,t)),o("tildes",e=x(e,t)),o("xrange",e=S(e,t)),o("stars",e=I(e,t)),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,x=(e,t)=>e.trim().split(/\s+/).map(e=>w(e,t)).join(" "),w=(e,t)=>{let r=t.loose?l[u.TILDELOOSE]:l[u.TILDE];return e.replace(r,(t,r,n,s,a)=>{let l;return o("tilde",e,t,r,n,s,a),v(r)?l="":v(n)?l=`>=${r}.0.0 <${+r+1}.0.0-0`:v(s)?l=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:a?(o("replaceTilde pr",a),l=`>=${r}.${n}.${s}-${a} <${r}.${+n+1}.0-0`):l=`>=${r}.${n}.${s} <${r}.${+n+1}.0-0`,o("tilde return",l),l})},E=(e,t)=>e.trim().split(/\s+/).map(e=>A(e,t)).join(" "),A=(e,t)=>{o("caret",e,t);let r=t.loose?l[u.CARETLOOSE]:l[u.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,s,a,l)=>{let u;return o("caret",e,t,r,s,a,l),v(r)?u="":v(s)?u=`>=${r}.0.0${n} <${+r+1}.0.0-0`:v(a)?u="0"===r?`>=${r}.${s}.0${n} <${r}.${+s+1}.0-0`:`>=${r}.${s}.0${n} <${+r+1}.0.0-0`:l?(o("replaceCaret pr",l),u="0"===r?"0"===s?`>=${r}.${s}.${a}-${l} <${r}.${s}.${+a+1}-0`:`>=${r}.${s}.${a}-${l} <${r}.${+s+1}.0-0`:`>=${r}.${s}.${a}-${l} <${+r+1}.0.0-0`):(o("no pr"),u="0"===r?"0"===s?`>=${r}.${s}.${a}${n} <${r}.${s}.${+a+1}-0`:`>=${r}.${s}.${a}${n} <${r}.${+s+1}.0-0`:`>=${r}.${s}.${a} <${+r+1}.0.0-0`),o("caret return",u),u})},S=(e,t)=>(o("replaceXRanges",e,t),e.split(/\s+/).map(e=>k(e,t)).join(" ")),k=(e,t)=>{e=e.trim();let r=t.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return e.replace(r,(r,n,s,a,l,u)=>{o("xRange",e,r,n,s,a,l,u);let c=v(s),d=c||v(a),f=d||v(l);return"="===n&&f&&(n=""),u=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&f?(d&&(a=0),l=0,">"===n?(n=">=",d?(s=+s+1,a=0):a=+a+1,l=0):"<="===n&&(n="<",d?s=+s+1:a=+a+1),"<"===n&&(u="-0"),r=`${n+s}.${a}.${l}${u}`):d?r=`>=${s}.0.0${u} <${+s+1}.0.0-0`:f&&(r=`>=${s}.${a}.0${u} <${s}.${+a+1}.0-0`),o("xRange return",r),r})},I=(e,t)=>(o("replaceStars",e,t),e.trim().replace(l[u.STAR],"")),_=(e,t)=>(o("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?u.GTE0PRE:u.GTE0],"")),P=e=>(t,r,n,s,o,a,l,u,c,d,f,h)=>(r=v(n)?"":v(s)?`>=${n}.0.0${e?"-0":""}`:v(o)?`>=${n}.${s}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`,u=v(c)?"":v(d)?`<${+c+1}.0.0-0`:v(f)?`<${c}.${+d+1}.0-0`:h?`<=${c}.${d}.${f}-${h}`:e?`<${c}.${d}.${+f+1}-0`:`<=${u}`,`${r} ${u}`.trim()),C=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(o(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0};return hW}function t3(){if(pf)return pd;pf=1;let e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(n,s){if(s=r(s),n instanceof t){if(!!s.loose===n.loose)return n;n=n.value}a("comparator",n=n.trim().split(/\s+/).join(" "),s),this.options=s,this.loose=!!s.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(t){let r=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],o=t.match(r);if(!o)throw TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new l(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(a("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new l(t,this.options)}catch{return!1}return o(t,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(e.value,n).test(this.value):""===e.operator?""===e.value||new u(this.value,n).test(e.semver):!((n=r(n)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||o(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||o(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}pd=t;let r=tB,{safeRe:n,t:s}=tO,o=tX,a=tC,l=t$,u=t2();return pd}let t8=t2();var t6=(e,t,r)=>{try{t=new t8(t,r)}catch{return!1}return t.test(e)};let t4=t2(),t5=t2(),t9=t2(),t7=t2(),re=t2(),rt=t3(),{ANY:rr}=rt,rn=t2();var ri=(e,t,r,n)=>{let s,o,a,l,u;switch(e=new t$(e,n),t=new rn(t,n),r){case">":s=tG,o=tQ,a=tW,l=">",u=">=";break;case"<":s=tW,o=tZ,a=tG,l="<",u="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(t6(e,t,n))return!1;for(let r=0;r<t.set.length;++r){let c=t.set[r],d=null,f=null;if(c.forEach(e=>{e.semver===rr&&(e=new rt(">=0.0.0")),d=d||e,f=f||e,s(e.semver,d.semver,n)?d=e:a(e.semver,f.semver,n)&&(f=e)}),d.operator===l||d.operator===u||(!f.operator||f.operator===l)&&o(e,f.semver)||f.operator===u&&a(e,f.semver))return!1}return!0};let rs=t2(),ro=t2(),ra=t3(),{ANY:rl}=ra,ru=[new ra(">=0.0.0-0")],rc=[new ra(">=0.0.0")],rd=(e,t,r)=>{let n,s,o;if(e===t)return!0;if(1===e.length&&e[0].semver===rl){if(1===t.length&&t[0].semver===rl)return!0;e=r.includePrerelease?ru:rc}if(1===t.length&&t[0].semver===rl){if(r.includePrerelease)return!0;t=rc}let a=new Set;for(let t of e)">"===t.operator||">="===t.operator?n=rf(n,t,r):"<"===t.operator||"<="===t.operator?s=rh(s,t,r):a.add(t.semver);if(a.size>1||n&&s&&((o=tV(n.semver,s.semver,r))>0||0===o&&(">="!==n.operator||"<="!==s.operator)))return null;for(let e of a){if(n&&!t6(e,String(n),r)||s&&!t6(e,String(s),r))return null;for(let n of t)if(!t6(e,String(n),r))return!1;return!0}let l,u,c,d,f=!!s&&!r.includePrerelease&&!!s.semver.prerelease.length&&s.semver,h=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver;for(let e of(f&&1===f.prerelease.length&&"<"===s.operator&&0===f.prerelease[0]&&(f=!1),t)){if(d=d||">"===e.operator||">="===e.operator,c=c||"<"===e.operator||"<="===e.operator,n){if(h&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===h.major&&e.semver.minor===h.minor&&e.semver.patch===h.patch&&(h=!1),">"===e.operator||">="===e.operator){if((l=rf(n,e,r))===e&&l!==n)return!1}else if(">="===n.operator&&!t6(n.semver,String(e),r))return!1}if(s){if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),"<"===e.operator||"<="===e.operator){if((u=rh(s,e,r))===e&&u!==s)return!1}else if("<="===s.operator&&!t6(s.semver,String(e),r))return!1}if(!e.operator&&(s||n)&&0!==o)return!1}return!(n&&c&&!s&&0!==o||s&&d&&!n&&0!==o||h||f)},rf=(e,t,r)=>{if(!e)return t;let n=tV(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},rh=(e,t,r)=>{if(!e)return t;let n=tV(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};var rp={parse:tH,valid:(e,t)=>{let r=tH(e,t);return r?r.version:null},clean:(e,t)=>{let r=tH(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},inc:(e,t,r,n,s)=>{"string"==typeof r&&(s=n,n=r,r=void 0);try{return new t$(e instanceof t$?e.version:e,r).inc(t,n,s).version}catch{return null}},diff:(e,t)=>{let r=tH(e,null,!0),n=tH(t,null,!0),s=r.compare(n);if(0===s)return null;let o=s>0,a=o?r:n,l=o?n:r,u=!!a.prerelease.length;if(l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(a))return l.minor&&!l.patch?"minor":"patch"}let c=u?"pre":"";return r.major!==n.major?c+"major":r.minor!==n.minor?c+"minor":r.patch!==n.patch?c+"patch":"prerelease"},major:(e,t)=>new t$(e,t).major,minor:(e,t)=>new t$(e,t).minor,patch:(e,t)=>new t$(e,t).patch,prerelease:(e,t)=>{let r=tH(e,t);return r&&r.prerelease.length?r.prerelease:null},compare:tV,rcompare:(e,t,r)=>tV(t,e,r),compareLoose:(e,t)=>tV(e,t,!0),compareBuild:tq,sort:(e,t)=>e.sort((e,r)=>tq(e,r,t)),rsort:(e,t)=>e.sort((e,r)=>tq(r,e,t)),gt:tG,lt:tW,eq:tK,neq:tJ,gte:tZ,lte:tQ,cmp:tX,coerce:(e,t)=>{if(e instanceof t$)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let n,s=t.includePrerelease?tY[t0.COERCERTLFULL]:tY[t0.COERCERTL];for(;(n=s.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),s.lastIndex=n.index+n[1].length+n[2].length;s.lastIndex=-1}else r=e.match(t.includePrerelease?tY[t0.COERCEFULL]:tY[t0.COERCE]);if(null===r)return null;let n=r[2],s=r[3]||"0",o=r[4]||"0",a=t.includePrerelease&&r[5]?`-${r[5]}`:"",l=t.includePrerelease&&r[6]?`+${r[6]}`:"";return tH(`${n}.${s}.${o}${a}${l}`,t)},Comparator:t3(),Range:t2(),satisfies:t6,toComparators:(e,t)=>new t4(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" ")),maxSatisfying:(e,t,r)=>{let n=null,s=null,o=null;try{o=new t5(t,r)}catch{return null}return e.forEach(e=>{o.test(e)&&(!n||-1===s.compare(e))&&(s=new t$(n=e,r))}),n},minSatisfying:(e,t,r)=>{let n=null,s=null,o=null;try{o=new t9(t,r)}catch{return null}return e.forEach(e=>{o.test(e)&&(!n||1===s.compare(e))&&(s=new t$(n=e,r))}),n},minVersion:(e,t)=>{e=new t7(e,t);let r=new t$("0.0.0");if(e.test(r)||(r=new t$("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let n=e.set[t],s=null;n.forEach(e=>{let t=new t$(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!s||tG(t,s))&&(s=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),s&&(!r||tG(r,s))&&(r=s)}return r&&e.test(r)?r:null},validRange:(e,t)=>{try{return new re(e,t).range||"*"}catch{return null}},outside:ri,gtr:(e,t,r)=>ri(e,t,">",r),ltr:(e,t,r)=>ri(e,t,"<",r),intersects:(e,t,r)=>(e=new rs(e,r),t=new rs(t,r),e.intersects(t,r)),simplifyRange:(e,t,r)=>{let n=[],s=null,o=null,a=e.sort((e,t)=>tV(e,t,r));for(let e of a)t6(e,t,r)?(o=e,s||(s=e)):(o&&n.push([s,o]),o=null,s=null);s&&n.push([s,null]);let l=[];for(let[e,t]of n)e===t?l.push(e):t||e!==a[0]?t?e===a[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");let u=l.join(" || "),c="string"==typeof t.raw?t.raw:String(t);return u.length<c.length?u:t},subset:(e,t,r={})=>{if(e===t)return!0;e=new ro(e,r),t=new ro(t,r);let n=!1;r:for(let s of e.set){for(let e of t.set){let t=rd(s,e,r);if(n=n||null!==t,t)continue r}if(n)return!1}return!0},SemVer:t$,re:tO.re,src:tO.src,tokens:tO.t,SEMVER_SPEC_VERSION:tP.SEMVER_SPEC_VERSION,RELEASE_TYPES:tP.RELEASE_TYPES,compareIdentifiers:tL.compareIdentifiers,rcompareIdentifiers:tL.rcompareIdentifiers};let rg=e5(rp);var rm=((l=rm||{}).NANO_S="nanoS",l.NANO_SP="nanoSP",l.NANO_X="nanoX",l.STAX="stax",l.FLEX="flex",l.APEX="apexp",l);let ry=class{constructor({id:e,model:t,name:r}){eY(this,"id"),eY(this,"model"),eY(this,"name"),this.id=e,this.model=t,this.name=r}},rb=class{constructor(e){if(this.seFlags=e,4!==this.seFlags.length)throw Error("Invalid secure element flags length")}generalDeviceState(){let e=this.seFlags[0]??0;return{isPinValidated:this._checkNthBitInByte(e,1),hasMcuSerialNumber:this._checkNthBitInByte(e,2),hasValidCertificate:this._checkNthBitInByte(e,3),isCustomAuthorityConnectionAllowed:this._checkNthBitInByte(e,4),isSecureConnectionAllowed:this._checkNthBitInByte(e,5),isOnboarded:this._checkNthBitInByte(e,6),isMcuCodeSigned:this._checkNthBitInByte(e,7),isInRecoveryMode:this._checkNthBitInByte(e,8)}}endorsementInformation(){throw Error("Not implemented")}wordsInformation(){throw Error("Not implemented")}onboardingStatus(){throw Error("Not implemented")}_checkNthBitInByte(e,t){return(e>>8-t&1)==1}},rv=class{constructor(){eY(this,"name","getOsVersion"),eY(this,"args")}getApdu(){return new tl({cla:224,ins:1,p1:0,p2:0}).build()}parseResponse(e,t){if(!tm.isSuccessResponse(e))return tp({error:tE.handle(e)});let r=new tc(e),n=r.extract32BitUInt();if(void 0===n)return tp({error:new td("Missing target ID in OS version")});let s=r.encodeToString(r.extractFieldLVEncoded()),o=r.extractFieldLVEncoded()??new Uint8Array(0),a={...new rb(o).generalDeviceState()};s||(s="0.0.0",o=new Uint8Array);let l=(0xf0000000&n)!=0x30000000,u=s.includes("-osu"),c="",d="",f="",h="",p,g,m,y;if(l){f=s,p=n;let e=r.extractFieldLVEncoded();e&&(e.length>=5?(c=r.encodeToString(e),g=parseInt(r.encodeToHexaString(r.extractFieldLVEncoded()),16)):g=parseInt(r.encodeToHexaString(e),16))}else{if(c=s,g=n,d=r.encodeToString(r.extractFieldLVEncoded()),this.isBootloaderVersionSupported(c,t)&&(f=r.encodeToString(r.extractFieldLVEncoded())),h=this.isHardwareVersionSupported(c,t)?r.encodeToHexaString(r.extractFieldLVEncoded()):"00",this.isLocalizationSupported(c,t)){let e=r.extractFieldLVEncoded();void 0!==e&&(m=parseInt(r.encodeToHexaString(e),16))}if(this.isRecoverSupported(c,t)){let e=r.extractFieldLVEncoded();void 0!==e&&(y=parseInt(r.encodeToHexaString(e),16))}}return tp({data:{isBootloader:l,isOsu:u,targetId:n,seTargetId:g,mcuTargetId:p,seVersion:c,seFlags:o,mcuSephVersion:d,mcuBootloaderVersion:f,hwVersion:h,langId:m,recoverState:y,secureElementFlags:a}})}isBootloaderVersionSupported(e,t){let r=rp.coerce(e)??"";switch(t){case rm.NANO_S:case rm.NANO_X:return rp.gte(r,"2.0.0");default:return!0}}isHardwareVersionSupported(e,t){let r=rp.coerce(e)??"";return t===rm.NANO_X&&rp.gte(r,"2.0.0")}isLocalizationSupported(e,t){let r=rp.coerce(e)??"";switch(t){case rm.NANO_S:return!1;case rm.NANO_SP:return rp.gte(r,"1.1.0");case rm.NANO_X:return rp.gte(r,"2.1.0");default:return!0}}isRecoverSupported(e,t){let r=rp.coerce(e)??"";switch(t){case rm.NANO_S:return!1;case rm.NANO_SP:return rp.gte(r,"1.1.2");case rm.NANO_X:return rp.gte(r,"2.2.3");case rm.STAX:return rp.gte(r,"1.4.0");case rm.FLEX:return rp.gte(r,"1.0.1");default:return!0}}},rx={"422f":{message:"Incorrect structure type"},4230:{message:"Incorrect certificate version"},4231:{message:"Incorrect certificate validity"},4232:{message:"Incorrect certificate validity index"},4233:{message:"Unknown signer key ID"},4234:{message:"Unknown signature algorithm"},4235:{message:"Unknown public key ID"},4236:{message:"Unknown public key usage"},4237:{message:"Incorrect elliptic curve ID"},4238:{message:"Incorrect signature algorithm associated to the public key"},4239:{message:"Unknown target device"},"422d":{message:"Unknown certificate tag"},3301:{message:"Failed to hash data"},"422e":{message:"expected_key_usage doesn't match certificate key usage"},5720:{message:"Failed to verify signature"},4118:{message:"trusted_name buffer is too small to contain the trusted name"},ffff:{message:"Cryptography-related error"}},rw=class extends ty{constructor({message:e,errorCode:t}){super({tag:"ProvidePkiCertificateCommandError",message:e,errorCode:t})}},rE=class{constructor(e){eY(this,"name","loadCertificate"),eY(this,"args"),eY(this,"triggersDisconnection",!1),this.args=e}getApdu(){return new tl({cla:176,ins:6,p1:this.args.keyUsage,p2:0}).addBufferToData(this.args.certificate).build()}parseResponse(e){if(tm.isSuccessResponse(e))return tp({data:void 0});let t=new tc(e).encodeToHexaString(e.statusCode);return tv(t,rx)?tp({error:new rw({...rx[t],errorCode:t})}):tp({error:tE.handle(e)})}},rA={"670a":{message:"No app name provided"},6807:{message:"Unknown application name"}},rS=class extends ty{constructor({message:e,errorCode:t}){super({tag:"OpenAppCommandError",message:e,errorCode:t})}},rk=class{constructor(e){eY(this,"name","openApp"),eY(this,"args"),eY(this,"triggersDisconnection",!0),this.args=e}getApdu(){return new tl({cla:224,ins:216,p1:0,p2:0}).addAsciiStringToData(this.args.appName).build()}parseResponse(e){if(tm.isSuccessResponse(e))return tp({data:void 0});let t=new tc(e).encodeToHexaString(e.statusCode);return tv(t,rA)?tp({error:new rS({...rA[t],errorCode:t})}):tp({error:tE.handle(e)})}};var rI=((u=rI||{}).LOCKED="LOCKED",u.BUSY="BUSY",u.CONNECTED="CONNECTED",u.NOT_CONNECTED="NOT CONNECTED",u),r_=((c=r_||{}).NotStarted="not-started",c.Pending="pending",c.Stopped="stopped",c.Completed="completed",c.Error="error",c),rP=((d=rP||{}).None="none",d.UnlockDevice="unlock-device",d.AllowSecureConnection="allow-secure-connection",d.ConfirmOpenApp="confirm-open-app",d.SignTransaction="sign-transaction",d.SignTypedData="sign-typed-data",d.AllowListApps="allow-list-apps",d.VerifyAddress="verify-address",d.SignPersonalMessage="sign-personal-message",d.SignDelegationAuthorization="sign-delegation-authorization",d.Web3ChecksOptIn="web3-checks-opt-in",d.VerifySafeAddress="verify-safe-address",d);let rC={of:e=>rR(e),empty:()=>rB,zero:()=>rB,fromNullable:e=>null==e?rB:rR(e),fromFalsy:e=>e?rR(e):rB,fromPredicate(e,t){return 1==arguments.length?t=>rC.fromPredicate(e,t):e(t)?rR(t):rB},mapMaybe(e,t){return 1==arguments.length?t=>rC.mapMaybe(e,t):rC.catMaybes(t.map(e))},catMaybes(e){let t=[];for(let r of e)r.isJust()&&t.push(r.extract());return t},encase(e){try{return rR(e())}catch{return rB}},isMaybe:e=>e instanceof rO||e instanceof rT,sequence(e){let t=[];for(let r of e)if(!r.isJust())return rB;else t.push(r.extract());return rR(t)},"fantasy-land/of"(e){return this.of(e)},"fantasy-land/empty"(){return this.empty()},"fantasy-land/zero"(){return this.zero()}};class rO{constructor(e){this.__value=e,this["fantasy-land/equals"]=this.equals,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/alt"]=this.alt,this["fantasy-land/chain"]=this.chain,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend,this["fantasy-land/filter"]=this.filter}isJust(){return!0}isNothing(){return!1}inspect(){return`Just(${this.__value})`}toString(){return this.inspect()}toJSON(){let e=this.__value;return e instanceof Date?e.toJSON():e}equals(e){return this.extract()===e.extract()}map(e){return rR(e(this.__value))}ap(e){return e.isJust()?this.map(e.extract()):rB}alt(e){return this}altLazy(e){return this}chain(e){return e(this.__value)}chainNullable(e){return rC.fromNullable(e(this.__value))}join(){return this.__value}reduce(e,t){return e(t,this.__value)}extend(e){return rR(e(this))}unsafeCoerce(){return this.__value}caseOf(e){return"_"in e?e._():e.Just(this.__value)}orDefault(e){return this.__value}orDefaultLazy(e){return this.__value}toList(){return[this.__value]}mapOrDefault(e,t){return e(this.__value)}extract(){return this.__value}extractNullable(){return this.__value}toEither(e){return rU(this.__value)}ifJust(e){return e(this.__value),this}ifNothing(e){return this}filter(e){return e(this.__value)?rR(this.__value):rB}}rO.prototype.constructor=rC;class rT{constructor(){this["fantasy-land/equals"]=this.equals,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/alt"]=this.alt,this["fantasy-land/chain"]=this.chain,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend,this["fantasy-land/filter"]=this.filter}isJust(){return!1}isNothing(){return!0}inspect(){return"Nothing"}toString(){return this.inspect()}toJSON(){return this.__value}equals(e){return this.extract()===e.extract()}map(e){return rB}ap(e){return rB}alt(e){return e}altLazy(e){return e()}chain(e){return rB}chainNullable(e){return rB}join(){return rB}reduce(e,t){return t}extend(e){return rB}unsafeCoerce(){throw Error("Maybe#unsafeCoerce was ran on a Nothing")}caseOf(e){return"_"in e?e._():e.Nothing()}orDefault(e){return e}orDefaultLazy(e){return e()}toList(){return[]}mapOrDefault(e,t){return t}extract(){}extractNullable(){return null}toEither(e){return rM(e)}ifJust(e){return this}ifNothing(e){return e(),this}filter(e){return rB}}rT.prototype.constructor=rC;let rR=e=>new rO(e),rB=new rT,rN={of:e=>rU(e),lefts(e){let t=[];for(let r of e)r.isLeft()&&t.push(r.extract());return t},rights(e){let t=[];for(let r of e)r.isRight()&&t.push(r.extract());return t},encase(e){try{return rU(e())}catch(e){return rM(e)}},sequence(e){let t=[];for(let r of e){if(r.isLeft())return r;t.push(r.extract())}return rU(t)},isEither:e=>e instanceof rL||e instanceof rD,"fantasy-land/of":e=>rN.of(e)};class rD{constructor(e){this.__value=e,this._="R",this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/equals"]=this.equals,this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend}isLeft(){return!1}isRight(){return!0}toJSON(){return this.__value}inspect(){return`Right(${this.__value})`}toString(){return this.inspect()}bimap(e,t){return rU(t(this.__value))}map(e){return rU(e(this.__value))}mapLeft(e){return this}ap(e){return e.isRight()?this.map(e.extract()):e}equals(e){return!!e.isRight()&&this.__value===e.extract()}chain(e){return e(this.__value)}chainLeft(e){return this}join(){return this.__value}alt(e){return this}altLazy(e){return this}reduce(e,t){return e(t,this.__value)}extend(e){return rU(e(this))}unsafeCoerce(){return this.__value}caseOf(e){return"_"in e?e._():e.Right(this.__value)}leftOrDefault(e){return e}orDefault(e){return this.__value}orDefaultLazy(e){return this.__value}leftOrDefaultLazy(e){return e()}ifLeft(e){return this}ifRight(e){return e(this.__value),this}toMaybe(){return rR(this.__value)}leftToMaybe(){return rB}extract(){return this.__value}swap(){return rM(this.__value)}}rD.prototype.constructor=rN;class rL{constructor(e){this.__value=e,this._="L",this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/equals"]=this.equals,this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend}isLeft(){return!0}isRight(){return!1}toJSON(){return this.__value}inspect(){return`Left(${JSON.stringify(this.__value)})`}toString(){return this.inspect()}bimap(e,t){return rM(e(this.__value))}map(e){return this}mapLeft(e){return rM(e(this.__value))}ap(e){return e.isLeft()?e:this}equals(e){return!!e.isLeft()&&e.extract()===this.__value}chain(e){return this}chainLeft(e){return e(this.__value)}join(){return this}alt(e){return e}altLazy(e){return e()}reduce(e,t){return t}extend(e){return this}unsafeCoerce(){throw this.__value instanceof Error?this.__value:Error("Either#unsafeCoerce was ran on a Left")}caseOf(e){return"_"in e?e._():e.Left(this.__value)}leftOrDefault(e){return this.__value}orDefault(e){return e}orDefaultLazy(e){return e()}leftOrDefaultLazy(e){return this.__value}ifLeft(e){return e(this.__value),this}ifRight(e){return this}toMaybe(){return rB}leftToMaybe(){return rR(this.__value)}extract(){return this.__value}swap(){return rU(this.__value)}}rL.prototype.constructor=rN;let rM=e=>new rL(e),rU=e=>new rD(e),rF={liftEither(e){if(e.isRight())return Promise.resolve(e.extract());throw e.extract()},fromPromise:e=>e.then(rF.liftEither),throwE(e){throw e}};class rj{constructor(e){this.runPromise=e,this[ph]="EitherAsync",this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this.then=(e,t)=>this.run().then(e,t)}leftOrDefault(e){return this.run().then(t=>t.leftOrDefault(e))}orDefault(e){return this.run().then(t=>t.orDefault(e))}join(){return rz(async e=>{let t=await this;if(t.isRight()){let r=await t.extract();return e.liftEither(r)}return e.liftEither(t)})}ap(e){return rz(async t=>{let r=await e;if(r.isRight()){let e=await this.run();return e.isRight()?r.extract()(e.extract()):t.liftEither(e)}return t.liftEither(r)})}alt(e){return rz(async t=>{let r=await this.run();if(r.isRight())return r.extract();{let r=await e;return t.liftEither(r)}})}extend(e){return rz(async t=>{let r=await this.run();if(r.isRight()){let n=rz.liftEither(r);return t.liftEither(rU(e(n)))}return t.liftEither(r)})}async run(){try{return rU(await this.runPromise(rF))}catch(e){return rM(e)}}bimap(e,t){return rz(async r=>{let n=await this.run();try{return await r.liftEither(n.bimap(e,t))}catch(e){throw await e}})}map(e){return rz(t=>this.runPromise(t).then(e))}mapLeft(e){return rz(async t=>{try{return await this.runPromise(t)}catch(t){throw await e(t)}})}chain(e){return rz(async t=>{let r=await this.runPromise(t);return t.fromPromise(e(r))})}chainLeft(e){return rz(async t=>{try{return await this.runPromise(t)}catch(r){return t.fromPromise(e(r))}})}toMaybeAsync(){return rV(async({liftMaybe:e})=>e((await this.run()).toMaybe()))}swap(){return rz(async e=>{let t=await this.run();return t.isRight()&&e.throwE(t.extract()),e.liftEither(rU(t.extract()))})}ifLeft(e){return rz(async t=>{let r=await this.run();return r.ifLeft(e),t.liftEither(r)})}ifRight(e){return rz(async t=>{let r=await this.run();return r.ifRight(e),t.liftEither(r)})}void(){return this.map(e=>{})}caseOf(e){return this.run().then(t=>t.caseOf(e))}finally(e){return rz(({fromPromise:t})=>t(this.run().finally(e)))}}ph=Symbol.toStringTag;let rz=Object.assign(e=>new rj(e),{fromPromise:e=>rz(({fromPromise:t})=>t(e())),liftEither:e=>rz(({liftEither:t})=>t(e)),lefts:e=>Promise.all(e.map(e=>e.run())).then(rN.lefts),rights:e=>Promise.all(e.map(e=>e.run())).then(rN.rights),sequence:e=>rz(async t=>{let r=[];for await(let n of e){if(n.isLeft())return t.liftEither(n);r.push(n.extract())}return t.liftEither(rU(r))}),all:e=>rz.fromPromise(async()=>Promise.all(e).then(rN.sequence))});rj.prototype.constructor=rz;let r$={liftMaybe(e){if(e.isJust())return Promise.resolve(e.extract());throw rB},fromPromise:e=>e.then(r$.liftMaybe)};class rH{constructor(e){this.runPromise=e,this[pp]="MaybeAsync",this["fantasy-land/chain"]=this.chain,this["fantasy-land/filter"]=this.filter,this["fantasy-land/alt"]=this.alt}orDefault(e){return this.run().then(t=>t.orDefault(e))}join(){return rV(async e=>{let t=await this.run();if(t.isJust()){let r=await t.extract();return e.liftMaybe(r)}return e.liftMaybe(rB)})}ap(e){return rV(async t=>{let r=await e;if(r.isJust()){let e=await this.run();return e.isJust()?r.extract()(e.extract()):t.liftMaybe(rB)}return t.liftMaybe(rB)})}alt(e){return rV(async t=>{let r=await this.run();if(r.isJust())return r.extract();{let r=await e;return t.liftMaybe(r)}})}extend(e){return rV(async t=>{let r=await this.run();if(r.isJust()){let n=rV.liftMaybe(r);return t.liftMaybe(rR(e(n)))}return t.liftMaybe(rB)})}filter(e){return rV(async t=>{let r=await this.run();return t.liftMaybe(r.filter(e))})}async run(){try{return rR(await this.runPromise(r$))}catch{return rB}}map(e){return rV(t=>this.runPromise(t).then(e))}chain(e){return rV(async t=>{let r=await this.runPromise(t);return t.fromPromise(e(r))})}toEitherAsync(e){return rz(async({liftEither:t})=>t((await this.run()).toEither(e)))}ifJust(e){return rV(async t=>{let r=await this.run();return r.ifJust(e),t.liftMaybe(r)})}ifNothing(e){return rV(async t=>{let r=await this.run();return r.ifNothing(e),t.liftMaybe(r)})}void(){return this.map(e=>{})}caseOf(e){return this.run().then(t=>t.caseOf(e))}finally(e){return rV(({fromPromise:t})=>t(this.run().finally(e)))}then(e,t){return this.run().then(e,t)}}pp=Symbol.toStringTag;let rV=Object.assign(e=>new rH(e),{catMaybes:e=>Promise.all(e).then(rC.catMaybes),fromPromise:e=>rV(({fromPromise:t})=>t(e())),liftMaybe:e=>rV(({liftMaybe:t})=>t(e))});rH.prototype.constructor=rV;let rq=e=>{if(typeof window>"u")return;let t=function(){let e="u">typeof globalThis?globalThis:"u">typeof self?self:"u">typeof window?window:"u">typeof ea?ea:void 0;if(e.__xstate__)return e.__xstate__}();t&&t.register(e)};class rG{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){let t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){let e=this._current;this._process(e.value),this._current=e.next}this._last=null}}let rW="xstate.init",rK="xstate.stop";function rJ(e,t){return{type:`xstate.done.state.${e}`,output:t}}function rZ(e){return{type:rW,input:e}}function rQ(e){setTimeout(()=>{throw e})}let rX="function"==typeof Symbol&&Symbol.observable||"@@observable";function rY(e){if(r8(e))return e;let t=[],r="";for(let n=0;n<e.length;n++){switch(e.charCodeAt(n)){case 92:r+=e[n+1],n++;continue;case 46:t.push(r),r="";continue}r+=e[n]}return t.push(r),t}function r0(e){var t;return(t=e)&&"object"==typeof t&&"machine"in t&&"value"in t?e.value:"string"!=typeof e?e:function(e){if(1===e.length)return e[0];let t={},r=t;for(let t=0;t<e.length-1;t++)if(t===e.length-2)r[e[t]]=e[t+1];else{let n=r;r={},n[e[t]]=r}return t}(rY(e))}function r1(e,t){let r={},n=Object.keys(e);for(let s=0;s<n.length;s++){let o=n[s];r[o]=t(e[o],o,e,s)}return r}function r2(e){return void 0===e?[]:r8(e)?e:[e]}function r3(e,t,r,n){return"function"==typeof e?e({context:t,event:r,self:n}):e}function r8(e){return Array.isArray(e)}function r6(e){return(r8(e)?e:[e]).map(e=>typeof e>"u"||"string"==typeof e?{target:e}:e)}function r4(e){if(void 0!==e&&""!==e)return r2(e)}function r5(e,t,r){var n,s,o;let a="object"==typeof e,l=a?e:void 0;return{next:null==(n=a?e.next:e)?void 0:n.bind(l),error:null==(s=a?e.error:t)?void 0:s.bind(l),complete:null==(o=a?e.complete:r)?void 0:o.bind(l)}}function r9(e,t){let r=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!r)return e.implementations.actors[t];let[,n,s]=r,o=e.getStateNodeById(s).config.invoke;return(Array.isArray(o)?o[n]:o).src}function r7(e,t){return`${e.sessionId}.${t}`}let ne=0,nt=!1,nr=((hJ={})[hJ.NotStarted=0]="NotStarted",hJ[hJ.Running=1]="Running",hJ[hJ.Stopped=2]="Stopped",hJ),nn={clock:{setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},logger:console.log.bind(console),devTools:!1};class ni{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new rG(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=nr.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];let r={...nn,...t},{clock:n,logger:s,parent:o,syncSnapshot:a,id:l,systemId:u,inspect:c}=r;this.system=o?o.system:function(e,t){let r=new Map,n=new Map,s=new WeakMap,o=new Set,a={},{clock:l,logger:u}=t,c={schedule:(e,t,r,n,s=Math.random().toString(36).slice(2))=>{let o={source:e,target:t,event:r,delay:n,id:s,startedAt:Date.now()},u=r7(e,s);d._snapshot._scheduledEvents[u]=o;let c=l.setTimeout(()=>{delete a[u],delete d._snapshot._scheduledEvents[u],d._relay(e,t,r)},n);a[u]=c},cancel:(e,t)=>{let r=r7(e,t),n=a[r];delete a[r],delete d._snapshot._scheduledEvents[r],void 0!==n&&l.clearTimeout(n)},cancelAll:e=>{for(let t in d._snapshot._scheduledEvents){let r=d._snapshot._scheduledEvents[t];r.source===e&&c.cancel(e,r.id)}}},d={_snapshot:{_scheduledEvents:((null==t?void 0:t.snapshot)&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${ne++}`,_register:(e,t)=>(r.set(e,t),e),_unregister:e=>{r.delete(e.sessionId);let t=s.get(e);void 0!==t&&(n.delete(t),s.delete(e))},get:e=>n.get(e),_set:(e,t)=>{let r=n.get(e);if(r&&r!==t)throw Error(`Actor with system ID '${e}' already exists.`);n.set(e,t),s.set(t,e)},inspect:e=>{let t=r5(e);return o.add(t),{unsubscribe(){o.delete(t)}}},_sendInspectionEvent:t=>{if(!o.size)return;let r={...t,rootId:e.sessionId};o.forEach(e=>{var t;return null==(t=e.next)?void 0:t.call(e,r)})},_relay:(e,t,r)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:e,actorRef:t,event:r}),t._send(r)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{let e=d._snapshot._scheduledEvents;for(let t in d._snapshot._scheduledEvents={},e){let{source:r,target:n,event:s,delay:o,id:a}=e[t];c.schedule(r,n,s,o,a)}},_clock:l,_logger:u};return d}(this,{clock:n,logger:s}),c&&!o&&this.system.inspect(r5(c)),this.sessionId=this.system._bookId(),this.id=l??this.sessionId,this.logger=(null==t?void 0:t.logger)??this.system._logger,this.clock=(null==t?void 0:t.clock)??this.system._clock,this._parent=o,this._syncSnapshot=a,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:e=>{this._deferred.push(e)},system:this.system,stopChild:e=>{if(e._parent!==this)throw Error(`Cannot stop child actor ${e.id} of ${this.id} because it is not a child`);e._stop()},emit:e=>{let t=this.eventListeners.get(e.type),r=this.eventListeners.get("*");if(t||r)for(let n of[...t?t.values():[],...r?r.values():[]])n(e)},actionExecutor:e=>{let t=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:e.type,params:e.params}}),!e.exec)return;let t=nt;try{nt=!0,e.exec(e.info,e.params)}finally{nt=t}};this._processingStatus===nr.Running?t():this._deferred.push(t)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),u&&(this._systemId=u,this.system._set(u,this)),this._initState((null==t?void 0:t.snapshot)??(null==t?void 0:t.state)),u&&"active"!==this._snapshot.status&&this.system._unregister(this)}_initState(e){var t;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,null==(t=this.options)?void 0:t.input)}catch(e){this._snapshot={status:"error",output:void 0,error:e}}}update(e,t){var r,n,s;let o;for(this._snapshot=e;o=this._deferred.shift();)try{o()}catch(t){this._deferred.length=0,this._snapshot={...e,status:"error",error:t}}switch(this._snapshot.status){case"active":for(let t of this.observers)try{null==(r=t.next)||r.call(t,e)}catch(e){rQ(e)}break;case"done":for(let t of this.observers)try{null==(n=t.next)||n.call(t,e)}catch(e){rQ(e)}this._stopProcedure(),this._complete(),this._doneEvent=(s=this.id,{type:`xstate.done.actor.${s}`,output:this._snapshot.output,actorId:s}),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error)}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,r){var n;let s=r5(e,t,r);if(this._processingStatus!==nr.Stopped)this.observers.add(s);else switch(this._snapshot.status){case"done":try{null==(n=s.complete)||n.call(s)}catch(e){rQ(e)}break;case"error":{let e=this._snapshot.error;if(s.error)try{s.error(e)}catch(e){rQ(e)}else rQ(e)}}return{unsubscribe:()=>{this.observers.delete(s)}}}on(e,t){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));let n=t.bind(void 0);return r.add(n),{unsubscribe:()=>{r.delete(n)}}}start(){if(this._processingStatus===nr.Running)return this;this._syncSnapshot&&this.subscribe({next:e=>{"active"===e.status&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:e})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=nr.Running;let e=rZ(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(e){return this._snapshot={...this._snapshot,status:"error",error:e},this._error(e),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,r;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(e){r={err:e}}if(r){let{err:e}=r;this._snapshot={...this._snapshot,status:"error",error:e},this._error(e);return}this.update(t,e),e.type===rK&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===nr.Stopped||(this.mailbox.clear(),this._processingStatus===nr.NotStarted?this._processingStatus=nr.Stopped:this.mailbox.enqueue({type:rK})),this}stop(){if(this._parent)throw Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(let t of this.observers)try{null==(e=t.complete)||e.call(t)}catch(e){rQ(e)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||rQ(e);return}let t=!1;for(let r of this.observers){let n=r.error;t||(t=!n);try{null==n||n(e)}catch(e){rQ(e)}}this.observers.clear(),t&&rQ(e)}_error(e){var t;this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,(t=this.id,{type:`xstate.error.actor.${t}`,error:e,actorId:t}))}_stopProcedure(){return this._processingStatus!==nr.Running||(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new rG(this._process.bind(this)),this._processingStatus=nr.Stopped,this.system._unregister(this)),this}_send(e){this._processingStatus!==nr.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){let{devTools:e}=this.options;e&&("function"==typeof e?e:rq)(this)}toJSON(){return{xstate$$type:1,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[rX](){return this}getSnapshot(){return this._snapshot}}function ns(e,...[t]){return new ni(e,t)}function no(e,t,r,n,{sendId:s}){return[t,{sendId:"function"==typeof s?s(r,n):s},void 0]}function na(e,t){e.defer(()=>{e.system.scheduler.cancel(e.self,t.sendId)})}function nl(e,t,r,n,{id:s,systemId:o,src:a,input:l,syncSnapshot:u}){let c,d,f="string"==typeof a?r9(t.machine,a):a,h="function"==typeof s?s(r):s;return f&&(d="function"==typeof l?l({context:t.context,event:r.event,self:e.self}):l,c=ns(f,{id:h,src:a,parent:e.self,syncSnapshot:u,systemId:o,input:d})),[nZ(t,{children:{...t.children,[h]:c}}),{id:s,systemId:o,actorRef:c,src:a,input:d},void 0]}function nu(e,{actorRef:t}){t&&e.defer(()=>{t._processingStatus!==nr.Stopped&&t.start()})}function nc(e,t,r,n,{actorRef:s}){let o="function"==typeof s?s(r,n):s,a="string"==typeof o?t.children[o]:o,l=t.children;return a&&(l={...l},delete l[a.id]),[nZ(t,{children:l}),a,void 0]}function nd(e,t){if(t){if(e.system._unregister(t),t._processingStatus!==nr.Running)return void e.stopChild(t);e.defer(()=>{e.stopChild(t)})}}function nf(e){function t(e,t){}return t.type="xstate.stopChild",t.actorRef=e,t.resolve=nc,t.execute=nd,t}function nh(e,{context:t,event:r},{guards:n}){return n.every(n=>ng(n,t,r,e))}function np(e){function t(e,t){return!1}return t.check=nh,t.guards=e,t}function ng(e,t,r,n){let{machine:s}=n,o="function"==typeof e,a=o?e:s.implementations.guards["string"==typeof e?e:e.type];if(!o&&!a)throw Error(`Guard '${"string"==typeof e?e:e.type}' is not implemented.'.`);if("function"!=typeof a)return ng(a,t,r,n);let l={context:t,event:r},u=o||"string"==typeof e?void 0:"params"in e?"function"==typeof e.params?e.params({context:t,event:r}):e.params:void 0;return"check"in a?a.check(n,l,a):a(l,u)}let nm=e=>"atomic"===e.type||"final"===e.type;function ny(e){return Object.values(e.states).filter(e=>"history"!==e.type)}function nb(e,t){let r=[];if(t===e)return r;let n=e.parent;for(;n&&n!==t;)r.push(n),n=n.parent;return r}function nv(e){let t=new Set(e),r=nx(t);for(let e of t)if("compound"!==e.type||r.get(e)&&r.get(e).length){if("parallel"===e.type){for(let r of ny(e))if("history"!==r.type&&!t.has(r))for(let e of n_(r))t.add(e)}}else n_(e).forEach(e=>t.add(e));for(let e of t){let r=e.parent;for(;r;)t.add(r),r=r.parent}return t}function nx(e){let t=new Map;for(let r of e)t.has(r)||t.set(r,[]),r.parent&&(t.has(r.parent)||t.set(r.parent,[]),t.get(r.parent).push(r));return t}function nw(e,t){return function e(t,r){let n=r.get(t);if(!n)return{};if("compound"===t.type){let e=n[0];if(!e)return{};if(nm(e))return e.key}let s={};for(let t of n)s[t.key]=e(t,r);return s}(e,nx(nv(t)))}function nE(e,t){return"compound"===t.type?ny(t).some(t=>"final"===t.type&&e.has(t)):"parallel"===t.type?ny(t).every(t=>nE(e,t)):"final"===t.type}let nA=e=>"#"===e[0];function nS(e,t,r){let n=r4(r.target),s=r.reenter??!1,o=function(e,t){if(void 0!==t)return t.map(t=>{if("string"!=typeof t)return t;if(nA(t))return e.machine.getStateNodeById(t);let r="."===t[0];if(r&&!e.parent)return nO(e,t.slice(1));let n=r?e.key+t:t;if(e.parent)try{return nO(e.parent,n)}catch(t){throw Error(`Invalid transition definition for state node '${e.id}':
${t.message}`)}throw Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}(e,n),a={...r,actions:r2(r.actions),guard:r.guard,target:o,source:e,reenter:s,eventType:t,toJSON:()=>({...a,source:`#${e.id}`,target:o?o.map(e=>`#${e.id}`):void 0})};return a}function nk(e){let t=r4(e.config.target);return t?{target:t.map(t=>"string"==typeof t?nO(e.parent,t):t)}:e.parent.initial}function nI(e){return"history"===e.type}function n_(e){let t=nP(e);for(let r of t)for(let n of nb(r,e))t.add(n);return t}function nP(e){let t=new Set;return function e(r){if(!t.has(r)){if(t.add(r),"compound"===r.type)e(r.initial.target[0]);else if("parallel"===r.type)for(let t of ny(r))e(t)}}(e),t}function nC(e,t){if(nA(t))return e.machine.getStateNodeById(t);if(!e.states)throw Error(`Unable to retrieve child state '${t}' from '${e.id}'; no child states exist.`);let r=e.states[t];if(!r)throw Error(`Child state '${t}' does not exist on '${e.id}'`);return r}function nO(e,t){if("string"==typeof t&&nA(t))try{return e.machine.getStateNodeById(t)}catch{}let r=rY(t).slice(),n=e;for(;r.length;){let e=r.shift();if(!e.length)break;n=nC(n,e)}return n}function nT(e,t){if("string"==typeof t){let r=e.states[t];if(!r)throw Error(`State '${t}' does not exist on '${e.id}'`);return[e,r]}let r=Object.keys(t),n=r.map(t=>nC(e,t)).filter(Boolean);return[e.machine.root,e].concat(n,r.reduce((r,n)=>{let s=nC(e,n);if(!s)return r;let o=nT(s,t[n]);return r.concat(o)},[]))}function nR(e,t){let r=e;for(;r.parent&&r.parent!==t;)r=r.parent;return r.parent===t}function nB(e,t,r){let n=new Set;for(let s of e){let e=!1,o=new Set;for(let a of n)if(function(e,t){let r=new Set(e),n=new Set(t);for(let e of r)if(n.has(e))return!0;for(let e of n)if(r.has(e))return!0;return!1}(nL([s],t,r),nL([a],t,r)))if(nR(s.source,a.source))o.add(a);else{e=!0;break}if(!e){for(let e of o)n.delete(e);n.add(s)}}return Array.from(n)}function nN(e,t){if(!e.target)return[];let r=new Set;for(let n of e.target)if(nI(n))if(t[n.id])for(let e of t[n.id])r.add(e);else for(let e of nN(nk(n),t))r.add(e);else r.add(n);return[...r]}function nD(e,t){let r=nN(e,t);if(!r)return;if(!e.reenter&&r.every(t=>t===e.source||nR(t,e.source)))return e.source;let n=function(e){let[t,...r]=e;for(let e of nb(t,void 0))if(r.every(t=>nR(t,e)))return e}(r.concat(e.source));return n||(e.reenter?void 0:e.source.machine.root)}function nL(e,t,r){var n;let s=new Set;for(let o of e)if(null!=(n=o.target)&&n.length){let e=nD(o,r);for(let r of(o.reenter&&o.source===e&&s.add(e),t))nR(r,e)&&s.add(r)}return[...s]}function nM(e,t,r,n,s,o){if(!e.length)return t;let a=new Set(t._nodes),l=t.historyValue,u=nB(e,a,l),c=t;s||([c,l]=function(e,t,r,n,s,o,a,l){let u,c=e,d=nL(n,s,o);for(let e of(d.sort((e,t)=>t.order-e.order),d))for(let t of function(e){return Object.keys(e.states).map(t=>e.states[t]).filter(e=>"history"===e.type)}(e)){let r;r="deep"===t.history?t=>nm(t)&&nR(t,e):t=>t.parent===e,u??(u={...o}),u[t.id]=Array.from(s).filter(r)}for(let e of d)c=nj(c,t,r,[...e.exit,...e.invoke.map(e=>nf(e.id))],a,void 0),s.delete(e);return[c,u||o]}(c,n,r,u,a,l,o,r.actionExecutor)),c=function(e,t,r,n,s,o,a,l){let u=e,c=new Set,d=new Set;(function(e,t,r,n){for(let s of e){let e=nD(s,t);for(let o of s.target||[])!nI(o)&&(s.source!==o||s.source!==e||s.reenter)&&(n.add(o),r.add(o)),nU(o,t,r,n);for(let o of nN(s,t)){let a=nb(o,e);(null==e?void 0:e.type)==="parallel"&&a.push(e),nF(n,t,r,a,!s.source.parent&&s.reenter?void 0:e)}}})(n,a,d,c),l&&d.add(e.machine.root);let f=new Set;for(let e of[...c].sort((e,t)=>e.order-t.order)){s.add(e);let n=[];for(let t of(n.push(...e.entry),e.invoke))n.push(function(...[e,{id:t,systemId:r,input:n,syncSnapshot:s=!1}={}]){function o(e,t){}return o.type="xstate.spawnChild",o.id=t,o.systemId=r,o.src=e,o.input=n,o.syncSnapshot=s,o.resolve=nl,o.execute=nu,o}(t.src,{...t,syncSnapshot:!!t.onSnapshot}));if(d.has(e)){let t=e.initial.actions;n.push(...t)}if(u=nj(u,t,r,n,o,e.invoke.map(e=>e.id)),"final"===e.type){let n=e.parent,a=(null==n?void 0:n.type)==="parallel"?n:null==n?void 0:n.parent,l=a||e;for((null==n?void 0:n.type)==="compound"&&o.push(rJ(n.id,void 0!==e.output?r3(e.output,u.context,t,r.self):void 0));(null==a?void 0:a.type)==="parallel"&&!f.has(a)&&nE(s,a);)f.add(a),o.push(rJ(a.id)),l=a,a=a.parent;if(a)continue;u=nZ(u,{status:"done",output:function(e,t,r,n,s){if(void 0===n.output)return;let o=rJ(s.id,void 0!==s.output&&s.parent?r3(s.output,e.context,t,r.self):void 0);return r3(n.output,e.context,o,r.self)}(u,t,r,u.machine.root,l)})}}return u}(c=nj(c,n,r,u.flatMap(e=>e.actions),o,void 0),n,r,u,a,o,l,s);let d=[...a];"done"===c.status&&(c=nj(c,n,r,d.sort((e,t)=>t.order-e.order).flatMap(e=>e.exit),o,void 0));try{return l===t.historyValue&&function(e,t){if(e.length!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}(t._nodes,a)?c:nZ(c,{_nodes:d,historyValue:l})}catch(e){throw e}}function nU(e,t,r,n){var s,o,a,l,u;if(nI(e))if(t[e.id]){let s=t[e.id];for(let e of s)n.add(e),nU(e,t,r,n);for(let l of s){o=l,a=e.parent,nF(n,t,r,nb(o,a))}}else{let o=nk(e);for(let a of o.target)n.add(a),o===(null==(s=e.parent)?void 0:s.initial)&&r.add(e.parent),nU(a,t,r,n);for(let s of o.target){l=s,u=e.parent,nF(n,t,r,nb(l,u))}}else if("compound"===e.type){let[s]=e.initial.target;nI(s)||(n.add(s),r.add(s)),nU(s,t,r,n),nF(n,t,r,nb(s,e))}else if("parallel"===e.type)for(let s of ny(e).filter(e=>!nI(e)))[...n].some(e=>nR(e,s))||(nI(s)||(n.add(s),r.add(s)),nU(s,t,r,n))}function nF(e,t,r,n,s){for(let o of n)if((!s||nR(o,s))&&e.add(o),"parallel"===o.type)for(let n of ny(o).filter(e=>!nI(e)))[...e].some(e=>nR(e,n))||(e.add(n),nU(n,t,r,e))}function nj(e,t,r,n,s,o){let a=o?[]:void 0,l=function e(t,r,n,s,o,a){let{machine:l}=t,u=t;for(let t of s){var c;let s="function"==typeof t,d=s?t:(c="string"==typeof t?t:t.type,l.implementations.actions[c]),f={context:u.context,event:r,self:n.self,system:n.system},h=s||"string"==typeof t?void 0:"params"in t?"function"==typeof t.params?t.params({context:u.context,event:r}):t.params:void 0;if(!d||!("resolve"in d)){n.actionExecutor({type:"string"==typeof t?t:"object"==typeof t?t.type:t.name||"(anonymous)",info:f,params:h,exec:d});continue}let[p,g,m]=d.resolve(n,u,f,h,d,o);u=p,"retryResolve"in d&&(null==a||a.push([d,g])),"execute"in d&&n.actionExecutor({type:d.type,info:f,params:g,exec:d.execute.bind(null,n,g)}),m&&(u=e(u,r,n,m,o,a))}return u}(e,t,r,n,{internalQueue:s,deferredActorIds:o},a);return null==a||a.forEach(([e,t])=>{e.retryResolve(r,l,t)}),l}function nz(e,t,r,n){let s=e,o=[];function a(e,t,n){r.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:r.self,event:t,snapshot:e,_transitions:n}),o.push(e)}if(t.type===rK)return a(s=nZ(n$(s,t,r),{status:"stopped"}),t,[]),{snapshot:s,microstates:o};let l=t;if(l.type!==rW){let t=l,u=t.type.startsWith("xstate.error.actor"),c=nH(t,s);if(u&&!c.length)return a(s=nZ(e,{status:"error",error:t.error}),t,[]),{snapshot:s,microstates:o};a(s=nM(c,e,r,l,!1,n),t,c)}let u=!0;for(;"active"===s.status;){let e=u?function(e,t){let r=new Set;for(let n of e._nodes.filter(nm))r:for(let s of[n].concat(nb(n,void 0)))if(s.always){for(let n of s.always)if(void 0===n.guard||ng(n.guard,e.context,t,e)){r.add(n);break r}}return nB(Array.from(r),new Set(e._nodes),e.historyValue)}(s,l):[],t=e.length?s:void 0;if(!e.length){if(!n.length)break;e=nH(l=n.shift(),s)}u=(s=nM(e,s,r,l,!1,n))!==t,a(s,l,e)}return"active"!==s.status&&n$(s,l,r),{snapshot:s,microstates:o}}function n$(e,t,r){return nj(e,t,r,Object.values(e.children).map(e=>nf(e)),[],void 0)}function nH(e,t){return t.machine.getTransitionData(t,e)}let nV=function(e){return function e(t,r){let n=r0(t),s=r0(r);return"string"==typeof s?"string"==typeof n&&s===n:"string"==typeof n?n in s:Object.keys(n).every(t=>t in s&&e(n[t],s[t]))}(e,this.value)},nq=function(e){return this.tags.has(e)},nG=function(e){let t=this.machine.getTransitionData(this,e);return!!(null!=t&&t.length)&&t.some(e=>void 0!==e.target||e.actions.length)},nW=function(){let{_nodes:e,tags:t,machine:r,getMeta:n,toJSON:s,can:o,hasTag:a,matches:l,...u}=this;return{...u,tags:Array.from(t)}},nK=function(){return this._nodes.reduce((e,t)=>(void 0!==t.meta&&(e[t.id]=t.meta),e),{})};function nJ(e,t){return{status:e.status,output:e.output,error:e.error,machine:t,context:e.context,_nodes:e._nodes,value:nw(t.root,e._nodes),tags:new Set(e._nodes.flatMap(e=>e.tags)),children:e.children,historyValue:e.historyValue||{},matches:nV,hasTag:nq,can:nG,getMeta:nK,toJSON:nW}}function nZ(e,t={}){return nJ({...e,...t},e.machine)}function nQ(e,t,r,n,{event:s,id:o,delay:a},{internalQueue:l}){let u,c=t.machine.implementations.delays;if("string"==typeof s)throw Error(`Only event objects may be used with raise; use raise({ type: "${s}" }) instead`);let d="function"==typeof s?s(r,n):s;if("string"==typeof a){let e=c&&c[a];u="function"==typeof e?e(r,n):e}else u="function"==typeof a?a(r,n):a;return"number"!=typeof u&&l.push(d),[t,{event:d,id:o,delay:u},void 0]}function nX(e,t){let{event:r,delay:n,id:s}=t;if("number"==typeof n)return void e.defer(()=>{let t=e.self;e.system.scheduler.schedule(t,t,r,n,s)})}let nY="xstate.observable.next",n0="xstate.observable.error",n1="xstate.observable.complete",n2="xstate.promise.resolve",n3="xstate.promise.reject",n8=new WeakMap;function n6(e){return{config:e,transition:(e,t,r)=>{var n;if("active"!==e.status)return e;switch(t.type){case n2:{let r=t.data;return{...e,status:"done",output:r,input:void 0}}case n3:return{...e,status:"error",error:t.data,input:void 0};case rK:return null==(n=n8.get(r.self))||n.abort(),{...e,status:"stopped",input:void 0};default:return e}},start:(t,{self:r,system:n,emit:s})=>{if("active"!==t.status)return;let o=new AbortController;n8.set(r,o),Promise.resolve(e({input:t.input,system:n,self:r,signal:o.signal,emit:s})).then(e=>{"active"===r.getSnapshot().status&&(n8.delete(r),n._relay(r,r,{type:n2,data:e}))},e=>{"active"===r.getSnapshot().status&&(n8.delete(r),n._relay(r,r,{type:n3,data:e}))})},getInitialSnapshot:(e,t)=>({status:"active",output:void 0,error:void 0,input:t}),getPersistedSnapshot:e=>e,restoreSnapshot:e=>e}}function n4(e,t,r,n,{assignment:s}){if(!t.context)throw Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");let o={},a={context:t.context,event:r.event,spawn:function(e,{machine:t,context:r},n,s){let o=(o,a)=>{if("string"!=typeof o)return ns(o,{id:null==a?void 0:a.id,parent:e.self,syncSnapshot:null==a?void 0:a.syncSnapshot,input:null==a?void 0:a.input,src:o,systemId:null==a?void 0:a.systemId});{let l=r9(t,o);if(!l)throw Error(`Actor logic '${o}' not implemented in machine '${t.id}'`);let u=ns(l,{id:null==a?void 0:a.id,parent:e.self,syncSnapshot:null==a?void 0:a.syncSnapshot,input:"function"==typeof(null==a?void 0:a.input)?a.input({context:r,event:n,self:e.self}):null==a?void 0:a.input,src:o,systemId:null==a?void 0:a.systemId});return s[u.id]=u,u}};return(t,r)=>{let n=o(t,r);return s[n.id]=n,e.defer(()=>{n._processingStatus!==nr.Stopped&&n.start()}),n}}(e,t,r.event,o),self:e.self,system:e.system},l={};if("function"==typeof s)l=s(a,n);else for(let e of Object.keys(s)){let t=s[e];l[e]="function"==typeof t?t(a,n):t}let u=Object.assign({},t.context,l);return[nZ(t,{context:u,children:Object.keys(o).length?{...t.children,...o}:t.children}),void 0,void 0]}function n5(e){function t(e,t){}return t.type="xstate.assign",t.assignment=e,t.resolve=n4,t}function n9(e,t,r,n,{event:s}){return[t,{event:"function"==typeof s?s(r,n):s},void 0]}function n7(e,{event:t}){e.defer(()=>e.emit(t))}let ie=new WeakMap;function it(e,t,r){let n=ie.get(e);return n?t in n||(n[t]=r()):(n={[t]:r()},ie.set(e,n)),n[t]}let ir={},ii=e=>"string"==typeof e?{type:e}:"function"==typeof e?"resolve"in e?{type:e.type}:{type:e.name}:e;class is{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join("."),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?r1(this.config.states,(e,t)=>new is(e,{_parent:this,_key:t,_machine:this.machine})):ir,"compound"===this.type&&!this.config.initial)throw Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=!0===this.config.history?"shallow":this.config.history||!1,this.entry=r2(this.config.entry).slice(),this.exit=r2(this.config.exit).slice(),this.meta=this.config.meta,this.output="final"!==this.type&&this.parent?void 0:this.config.output,this.tags=r2(e.tags).slice()}_initialize(){this.transitions=function(e){let t=new Map;if(e.config.on)for(let r of Object.keys(e.config.on)){if(""===r)throw Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');let n=e.config.on[r];t.set(r,r6(n).map(t=>nS(e,r,t)))}if(e.config.onDone){let r=`xstate.done.state.${e.id}`;t.set(r,r6(e.config.onDone).map(t=>nS(e,r,t)))}for(let r of e.invoke){if(r.onDone){let n=`xstate.done.actor.${r.id}`;t.set(n,r6(r.onDone).map(t=>nS(e,n,t)))}if(r.onError){let n=`xstate.error.actor.${r.id}`;t.set(n,r6(r.onError).map(t=>nS(e,n,t)))}if(r.onSnapshot){let n=`xstate.snapshot.${r.id}`;t.set(n,r6(r.onSnapshot).map(t=>nS(e,n,t)))}}for(let r of e.after){let e=t.get(r.eventType);e||(e=[],t.set(r.eventType,e)),e.push(r)}return t}(this),this.config.always&&(this.always=r6(this.config.always).map(e=>nS(this,"",e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(ii),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(ii),eventType:null})}:void 0,history:this.history,states:r1(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(ii)})),entry:this.entry.map(ii),exit:this.exit.map(ii),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return it(this,"invoke",()=>r2(this.config.invoke).map((e,t)=>{var r,n;let{src:s,systemId:o}=e,a=e.id??(r=this.id,`${t}.${r}`),l="string"==typeof s?s:`xstate.invoke.${n=this.id,`${t}.${n}`}`;return{...e,src:l,id:a,systemId:o,toJSON(){let{onDone:t,onError:r,...n}=e;return{...n,type:"xstate.invoke",src:l,id:a}}}}))}get on(){return it(this,"on",()=>[...this.transitions].flatMap(([e,t])=>t.map(t=>[e,t])).reduce((e,[t,r])=>(e[t]=e[t]||[],e[t].push(r),e),{}))}get after(){return it(this,"delayedTransitions",()=>(function(e){let t=e.config.after;if(!t)return[];let r=t=>{var r;let n=(r=e.id,{type:`xstate.after.${t}.${r}`}),s=n.type;return e.entry.push(function(e,t){function r(e,t){}return r.type="xstate.raise",r.event=e,r.id=null==t?void 0:t.id,r.delay=null==t?void 0:t.delay,r.resolve=nQ,r.execute=nX,r}(n,{id:s,delay:t})),e.exit.push(function(e){function t(e,t){}return t.type="xstate.cancel",t.sendId=e,t.resolve=no,t.execute=na,t}(s)),s};return Object.keys(t).flatMap(e=>{let n=t[e],s=Number.isNaN(+e)?e:+e,o=r(s);return r2("string"==typeof n?{target:n}:n).map(e=>({...e,event:o,delay:s}))}).map(t=>{let{delay:r}=t;return{...nS(e,t.event,t),delay:r}})})(this))}get initial(){return it(this,"initial",()=>(function(e,t){let r="string"==typeof t?e.states[t]:t?e.states[t.target]:void 0;if(!r&&t)throw Error(`Initial state node "${t}" not found on parent state node #${e.id}`);let n={source:e,actions:t&&"string"!=typeof t?r2(t.actions):[],eventType:null,reenter:!1,target:r?[r]:[],toJSON:()=>({...n,source:`#${e.id}`,target:r?[`#${r.id}`]:[]})};return n})(this,this.config.initial))}next(e,t){let r,n=t.type,s=[];for(let o of it(this,`candidates-${n}`,()=>{var e;return e=this,e.transitions.get(n)||[...e.transitions.keys()].filter(e=>{if("*"===e)return!0;if(!e.endsWith(".*"))return!1;let t=e.split("."),r=n.split(".");for(let e=0;e<t.length;e++){let n=t[e],s=r[e];if("*"===n)return e===t.length-1;if(n!==s)return!1}return!0}).sort((e,t)=>t.length-e.length).flatMap(t=>e.transitions.get(t))})){let{guard:a}=o,l=e.context,u=!1;try{u=!a||ng(a,l,t,e)}catch(t){let e="string"==typeof a?a:"object"==typeof a?a.type:void 0;throw Error(`Unable to evaluate guard ${e?`'${e}' `:""}in transition for event '${n}' in state node '${this.id}':
${t.message}`)}if(u){s.push(...o.actions),r=o;break}}return r?[r]:void 0}get events(){return it(this,"events",()=>{let{states:e}=this,t=new Set(this.ownEvents);if(e)for(let r of Object.keys(e)){let n=e[r];if(n.states)for(let e of n.events)t.add(`${e}`)}return Array.from(t)})}get ownEvents(){return Array.from(new Set([...this.transitions.keys()].filter(e=>this.transitions.get(e).some(e=>!(!e.target&&!e.actions.length&&!e.reenter)))))}}class io{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(null==t?void 0:t.actors)??{},actions:(null==t?void 0:t.actions)??{},delays:(null==t?void 0:t.delays)??{},guards:(null==t?void 0:t.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new is(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){let{actions:t,guards:r,actors:n,delays:s}=this.implementations;return new io(this.config,{actions:{...t,...e.actions},guards:{...r,...e.guards},actors:{...n,...e.actors},delays:{...s,...e.delays}})}resolveState(e){let t=function(e,t){let r=nv(nT(e,t));return nw(e,[...r])}(this.root,e.value),r=nv(nT(this.root,t));return nJ({_nodes:[...r],context:e.context||{},children:{},status:nE(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,r){return nz(e,t,r,[]).snapshot}microstep(e,t,r){return nz(e,t,r,[]).microstates}getTransitionData(e,t){return function e(t,r,n,s){return"string"==typeof r?function(e,t,r,n){let s=nC(e,t).next(r,n);return s&&s.length?s:e.next(r,n)}(t,r,n,s):1===Object.keys(r).length?function(t,r,n,s){let o=Object.keys(r),a=e(nC(t,o[0]),r[o[0]],n,s);return a&&a.length?a:t.next(n,s)}(t,r,n,s):function(t,r,n,s){let o=[];for(let a of Object.keys(r)){let l=r[a];if(!l)continue;let u=e(nC(t,a),l,n,s);u&&o.push(...u)}return o.length?o:t.next(n,s)}(t,r,n,s)}(this.root,e.value,e,t)||[]}getPreInitialState(e,t,r){let{context:n}=this.config,s=nJ({context:"function"!=typeof n&&n?n:{},_nodes:[this.root],children:{},status:"active"},this);return"function"==typeof n?nj(s,t,e,[n5(({spawn:e,event:t,self:r})=>n({spawn:e,input:t.input,self:r}))],r,void 0):s}getInitialSnapshot(e,t){let r=rZ(t),n=[],s=this.getPreInitialState(e,r,n),{snapshot:o}=nz(nM([{target:[...nP(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,r,!0,n),r,e,n);return o}start(e){Object.values(e.children).forEach(e=>{"active"===e.getSnapshot().status&&e.start()})}getStateNodeById(e){let t=rY(e),r=t.slice(1),n=nA(t[0])?t[0].slice(1):t[0],s=this.idMap.get(n);if(!s)throw Error(`Child state node '#${n}' does not exist on machine '${this.id}'`);return nO(s,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){let{_nodes:r,tags:n,machine:s,children:o,context:a,can:l,hasTag:u,matches:c,getMeta:d,toJSON:f,...h}=e,p={};for(let e in o){let r=o[e];p[e]={snapshot:r.getPersistedSnapshot(t),src:r.src,systemId:r._systemId,syncSnapshot:r._syncSnapshot}}return{...h,context:function e(t){let r;for(let n in t){let s=t[n];if(s&&"object"==typeof s)if("sessionId"in s&&"send"in s&&"ref"in s)r??(r=Array.isArray(t)?t.slice():{...t}),r[n]={xstate$$type:1,id:s.id};else{let o=e(s);o!==s&&(r??(r=Array.isArray(t)?t.slice():{...t}),r[n]=o)}}return r??t}(a),children:p}}restoreSnapshot(e,t){let r={},n=e.children;Object.keys(n).forEach(e=>{let s=n[e],o=s.snapshot,a=s.src,l="string"==typeof a?r9(this,a):a;if(!l)return;let u=ns(l,{id:e,parent:t.self,syncSnapshot:s.syncSnapshot,snapshot:o,src:a,systemId:s.systemId});r[e]=u});let s=nJ({...e,children:r,_nodes:Array.from(nv(nT(this.root,e.value)))},this),o=new Set;return function e(t,r){if(!o.has(t))for(let n in o.add(t),t){let s=t[n];if(s&&"object"==typeof s){if("xstate$$type"in s&&1===s.xstate$$type){t[n]=r[s.id];continue}e(s,r)}}}(s.context,r),s}}function ia({schemas:e,actors:t,actions:r,guards:n,delays:s}){return{createMachine:o=>new io({...o,schemas:e},{actors:t,actions:r,guards:n,delays:s})}}let il=class{constructor(e){eY(this,"_tag","DeviceNotOnboardedError"),eY(this,"originalError"),this.originalError=Error(e??"Device not onboarded.")}},iu=class{constructor(e){eY(this,"_tag","DeviceLockedError"),eY(this,"originalError"),this.originalError=Error(e??"Device locked.")}},ic=class{constructor(e){eY(this,"_tag","UnknownDAError"),eY(this,"originalError"),this.originalError=Error(e??"Unknown error.")}};var id=function(e,t){return(id=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function ih(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}id(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function ip(e,t){var r,n,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){o.label=c[1];break}if(6===c[0]&&o.label<s[1]){o.label=s[1],s=c;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(c);break}s[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function ig(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function im(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return a}function iy(e,t,r){if(r||2==arguments.length)for(var n,s=0,o=t.length;s<o;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}function ib(e){return this instanceof ib?(this.v=e,this):new ib(e)}function iv(e){return"function"==typeof e}function ix(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var iw=ix(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,t){return t+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function iE(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var iA=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,t,r,n,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=ig(o),l=a.next();!l.done;l=a.next())l.value.remove(this)}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(iv(u))try{u()}catch(e){s=e instanceof iw?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var d=ig(c),f=d.next();!f.done;f=d.next()){var h=f.value;try{iI(h)}catch(e){s=s??[],e instanceof iw?s=iy(iy([],im(s)),im(e.errors)):s.push(e)}}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}}if(s)throw new iw(s)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)iI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(r=this._finalizers)?r:[]).push(e)}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&iE(t,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&iE(r,e),e instanceof t&&e._removeParent(this)},(e=new t).closed=!0,t.EMPTY=e,t}(),iS=iA.EMPTY;function ik(e){return e instanceof iA||e&&"closed"in e&&iv(e.remove)&&iv(e.add)&&iv(e.unsubscribe)}function iI(e){iv(e)?e():e.unsubscribe()}var i_={Promise:void 0,useDeprecatedNextContext:!1},iP={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var s=iP.delegate;return null!=s&&s.setTimeout?s.setTimeout.apply(s,iy([e,t],im(r))):setTimeout.apply(void 0,iy([e,t],im(r)))},clearTimeout:function(e){var t=iP.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function iC(e){iP.setTimeout(function(){throw e})}function iO(){}var iT=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,ik(t)&&t.add(r)):r.destination=iL,r}return ih(t,e),t.create=function(e,t,r){return new iD(e,t,r)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(iA),iR=Function.prototype.bind;function iB(e,t){return iR.call(e,t)}var iN=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){iC(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){iC(e)}else iC(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){iC(e)}},e}(),iD=function(e){function t(t,r,n){var s,o,a=e.call(this)||this;return iv(t)||!t?o={next:t??void 0,error:r??void 0,complete:n??void 0}:a&&i_.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},o={next:t.next&&iB(t.next,s),error:t.error&&iB(t.error,s),complete:t.complete&&iB(t.complete,s)}):o=t,a.destination=new iN(o),a}return ih(t,e),t}(iT),iL={closed:!0,next:iO,error:function(e){throw e},complete:iO},iM="function"==typeof Symbol&&Symbol.observable||"@@observable";function iU(e){return e}var iF=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,s,o=this,a=!function(e){return e&&e instanceof iT||e&&iv(e.next)&&iv(e.error)&&iv(e.complete)&&ik(e)}(e)?new iD(e,t,r):e;return n=o.operator,s=o.source,a.add(n?n.call(a,s):s?o._subscribe(a):o._trySubscribe(a)),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=ij(t))(function(t,n){var s=new iD({next:function(t){try{e(t)}catch(e){n(e),s.unsubscribe()}},error:n,complete:t});r.subscribe(s)})},e.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},e.prototype[iM]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?iU:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=ij(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function ij(e){var t;return null!=(t=e??i_.Promise)?t:Promise}function iz(e){return function(t){if(iv(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function i$(e,t,r,n,s){return new iH(e,t,r,n,s)}var iH=function(e){function t(t,r,n,s,o,a){var l=e.call(this,t)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,l._error=s?function(e){try{s(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,l}return ih(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null==(t=this.onFinalize)||t.call(this)}},t}(iT),iV=ix(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),iq=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return ih(t,e),t.prototype.lift=function(e){var t=new iG(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new iV},t.prototype.next=function(e){var t,r;if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));try{for(var n=ig(this.currentObservers),s=n.next();!s.done;s=n.next())s.value.next(e)}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}},t.prototype.error=function(e){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;for(var t=this.observers;t.length;)t.shift().error(e)}},t.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var e=this.observers;e.length;)e.shift().complete()}},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null==(e=this.observers)?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,n=this.isStopped,s=this.observers;return r||n?iS:(this.currentObservers=null,s.push(e),new iA(function(){t.currentObservers=null,iE(s,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,n=this.isStopped;t?e.error(r):n&&e.complete()},t.prototype.asObservable=function(){var e=new iF;return e.source=this,e},t.create=function(e,t){return new iG(e,t)},t}(iF),iG=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return ih(t,e),t.prototype.next=function(e){var t,r;null==(r=null==(t=this.destination)?void 0:t.next)||r.call(t,e)},t.prototype.error=function(e){var t,r;null==(r=null==(t=this.destination)?void 0:t.error)||r.call(t,e)},t.prototype.complete=function(){var e,t;null==(t=null==(e=this.destination)?void 0:e.complete)||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!=(r=null==(t=this.source)?void 0:t.subscribe(e))?r:iS},t}(iq),iW=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return ih(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r.closed||t.next(this._value),r},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,r=this._value;if(e)throw t;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(iq),iK={now:function(){return(iK.delegate||Date).now()},delegate:void 0},iJ=function(e){function t(t,r,n){void 0===t&&(t=1/0),void 0===r&&(r=1/0),void 0===n&&(n=iK);var s=e.call(this)||this;return s._bufferSize=t,s._windowTime=r,s._timestampProvider=n,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=r===1/0,s._bufferSize=Math.max(1,t),s._windowTime=Math.max(1,r),s}return ih(t,e),t.prototype.next=function(t){var r=this.isStopped,n=this._buffer,s=this._infiniteTimeWindow,o=this._timestampProvider,a=this._windowTime;r||(n.push(t),s||n.push(o.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer,s=n.slice(),o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,r=this._buffer,n=this._infiniteTimeWindow,s=(n?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!n){for(var o=t.now(),a=0,l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}},t}(iq),iZ=function(e){function t(t,r){return e.call(this)||this}return ih(t,e),t.prototype.schedule=function(e,t){return this},t}(iA),iQ={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var s=iQ.delegate;return null!=s&&s.setInterval?s.setInterval.apply(s,iy([e,t],im(r))):setInterval.apply(void 0,iy([e,t],im(r)))},clearInterval:function(e){var t=iQ.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},iX=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return ih(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r,n=this.id,s=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(s,n,t)),this.pending=!0,this.delay=t,this.id=null!=(r=this.id)?r:this.requestAsyncId(s,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),iQ.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&iQ.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,iE(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(iZ),iY=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=iK.now,e}(),i0=new(function(e){function t(t,r){void 0===r&&(r=iY.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return ih(t,e),t.prototype.flush=function(e){var t,r=this.actions;if(this._active)return void r.push(e);this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=r.shift())if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}},t}(iY))(iX),i1=new iF(function(e){return e.complete()});function i2(e){return e&&iv(e.schedule)}function i3(e){return e[e.length-1]}function i8(e){return i2(i3(e))?e.pop():void 0}var i6=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function i4(e){return iv(null==e?void 0:e.then)}function i5(e){return Symbol.asyncIterator&&iv(null==e?void 0:e[Symbol.asyncIterator])}function i9(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var i7="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function se(e){return iv(null==e?void 0:e[i7])}function st(e){return function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function a(e,t){s[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||l(e,t)})},t&&(n[e]=t(n[e])))}function l(e,t){try{var r;(r=s[e](t)).value instanceof ib?Promise.resolve(r.value.v).then(u,c):d(o[0][2],r)}catch(e){d(o[0][3],e)}}function u(e){l("next",e)}function c(e){l("throw",e)}function d(e,t){e(t),o.shift(),o.length&&l(o[0][0],o[0][1])}}(this,arguments,function(){var t,r,n;return ip(this,function(s){switch(s.label){case 0:t=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,ib(t.read())];case 3:return n=(r=s.sent()).value,r.done?[4,ib(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,ib(n)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function sr(e){return iv(null==e?void 0:e.getReader)}function sn(e){if(e instanceof iF)return e;if(null!=e){var t,r,n,s;if(iv(e[iM])){return t=e,new iF(function(e){var r=t[iM]();if(iv(r.subscribe))return r.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")})}if(i6(e)){return r=e,new iF(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}if(i4(e)){return n=e,new iF(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,iC)})}if(i5(e))return si(e);if(se(e)){return s=e,new iF(function(e){var t,r;try{for(var n=ig(s),o=n.next();!o.done;o=n.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}e.complete()})}if(sr(e))return si(st(e))}throw i9(e)}function si(e){return new iF(function(t){(function(e,t){var r,n,s,o,a,l,u,c;return a=this,l=void 0,u=void 0,c=function(){var a;return ip(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=ig(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,s){var o,a,l;o=n,a=s,l=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){o({value:e,done:l})},a)})}}}(e),l.label=1;case 1:return[4,r.next()];case 2:if((n=l.sent()).done)return[3,4];if(a=n.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s={error:l.sent()},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new(u||(u=Promise))(function(e,t){function r(e){try{s(c.next(e))}catch(e){t(e)}}function n(e){try{s(c.throw(e))}catch(e){t(e)}}function s(t){var s;t.done?e(t.value):((s=t.value)instanceof u?s:new u(function(e){e(s)})).then(r,n)}s((c=c.apply(a,l||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function ss(e,t,r,n,s){void 0===n&&(n=0),void 0===s&&(s=!1);var o=t.schedule(function(){r(),s?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!s)return o}function so(e,t){return void 0===t&&(t=0),iz(function(r,n){r.subscribe(i$(n,function(r){return ss(n,e,function(){return n.next(r)},t)},function(){return ss(n,e,function(){return n.complete()},t)},function(r){return ss(n,e,function(){return n.error(r)},t)}))})}function sa(e,t){return void 0===t&&(t=0),iz(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function sl(e,t){if(!e)throw Error("Iterable cannot be null");return new iF(function(r){ss(r,t,function(){var n=e[Symbol.asyncIterator]();ss(r,t,function(){n.next().then(function(e){e.done?r.complete():r.next(e.value)})},0,!0)})})}function su(e,t){return t?function(e,t){if(null!=e){if(iv(e[iM]))return sn(e).pipe(sa(t),so(t));if(i6(e))return new iF(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})});if(i4(e))return sn(e).pipe(sa(t),so(t));if(i5(e))return sl(e,t);if(se(e))return new iF(function(r){var n;return ss(r,t,function(){n=e[i7](),ss(r,t,function(){var e,t,s;try{t=(e=n.next()).value,s=e.done}catch(e){r.error(e);return}s?r.complete():r.next(t)},0,!0)}),function(){return iv(null==n?void 0:n.return)&&n.return()}});if(sr(e))return sl(st(e),t)}throw i9(e)}(e,t):sn(e)}function sc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i8(e);return su(e,r)}function sd(e){return e instanceof Date&&!isNaN(e)}var sf=ix(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function sh(e){throw new sf(e)}function sp(e,t){return iz(function(r,n){var s=0;r.subscribe(i$(n,function(r){n.next(e.call(t,r,s++))}))})}function sg(e,t,r){return void 0===r&&(r=1/0),iv(t)?sg(function(r,n){return sp(function(e,s){return t(r,e,n,s)})(sn(e(r,n)))},r):("number"==typeof t&&(r=t),iz(function(t,n){var s,o,a,l,u,c,d,f,h;return s=r,a=[],l=0,u=0,c=!1,d=function(){!c||a.length||l||n.complete()},f=function(e){return l<s?h(e):a.push(e)},h=function(t){l++;var r=!1;sn(e(t,u++)).subscribe(i$(n,function(e){o?f(e):n.next(e)},function(){r=!0},void 0,function(){if(r)try{for(l--;a.length&&l<s;)!function(){var e=a.shift();h(e)}();d()}catch(e){n.error(e)}}))},t.subscribe(i$(n,f,function(){c=!0,d()})),function(){}}))}function sm(e,t,r){void 0===e&&(e=0),void 0===r&&(r=i0);var n=-1;return null!=t&&(i2(t)?r=t:n=t),new iF(function(t){var s=sd(e)?e-r.now():e;s<0&&(s=0);var o=0;return r.schedule(function(){t.closed||(t.next(o++),0<=n?this.schedule(void 0,n):t.complete())},s)})}function sy(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!0===t)return void e();if(!1!==t){var s=new iD({next:function(){s.unsubscribe(),e()}});return sn(t.apply(void 0,iy([],im(r)))).subscribe(s)}}function sb(e,t){return iz(function(r,n){var s=null,o=0,a=!1,l=function(){return a&&!s&&n.complete()};r.subscribe(i$(n,function(r){null==s||s.unsubscribe();var a=0,u=o++;sn(e(r,u)).subscribe(s=i$(n,function(e){return n.next(t?t(r,e,u,a++):e)},function(){s=null,l()}))},function(){a=!0,l()}))})}let sv=class{constructor(e){eY(this,"input"),eY(this,"inspect",!1),this.input=e.input,this.inspect=!!e.inspect}_execute(e){let t=this.makeStateMachine(e);return this._subscribeToStateMachine(t)}_subscribeToStateMachine(e){var t,r,n,s,o,a,l,u,c;let d=ns(e,{input:this.input}),f=new iJ,h=e=>{let{context:t,status:r,output:n,error:s}=e;switch(r){case"active":f.next({status:r_.Pending,intermediateValue:t.intermediateValue});break;case"done":n.caseOf({Left:e=>{f.next({status:r_.Error,error:e})},Right:e=>{f.next({status:r_.Completed,output:e})}}),f.complete();break;case"error":f.error(s),f.complete();break;case"stopped":f.next({status:r_.Stopped}),f.complete();break;default:this._exhaustiveMatchingGuard(r)}},p=new iF(e=>{let t=f.subscribe(e);return()=>{g.unsubscribe(),t.unsubscribe(),d.stop()}}),g=d.subscribe(h);return d.start(),{observable:p.pipe((void 0===t&&(t={}),n=void 0===(r=t.connector)?function(){return new iq}:r,o=void 0===(s=t.resetOnError)||s,l=void 0===(a=t.resetOnComplete)||a,c=void 0===(u=t.resetOnRefCountZero)||u,function(e){var t,r,s,a=0,u=!1,d=!1,f=function(){null==r||r.unsubscribe(),r=void 0},h=function(){f(),t=s=void 0,u=d=!1},p=function(){var e=t;h(),null==e||e.unsubscribe()};return iz(function(e,g){a++,d||u||f();var m=s=s??n();g.add(function(){0!=--a||d||u||(r=sy(p,c))}),m.subscribe(g),!t&&a>0&&(t=new iD({next:function(e){return m.next(e)},error:function(e){d=!0,f(),r=sy(h,o,e),m.error(e)},complete:function(){u=!0,f(),r=sy(h,l),m.complete()}}),sn(e).subscribe(t))})(e)})),cancel:()=>{d.stop(),g.unsubscribe(),h(d.getSnapshot())}}}_exhaustiveMatchingGuard(e){throw console.log("_exhaustiveMatchingGuard status",e),Error(`Unhandled status: ${e}`)}};var sx=((f=sx||{})[f.Connected=0]="Connected",f[f.ReadyWithoutSecureChannel=1]="ReadyWithoutSecureChannel",f[f.ReadyWithSecureChannel=2]="ReadyWithSecureChannel",f);let sw=class extends sv{makeStateMachine(e){let{getAppAndVersion:t,getDeviceSessionState:r,setDeviceSessionState:n,waitForDeviceUnlock:s,isDeviceOnboarded:o}=this.extractDependencies(e),a=this.input.unlockTimeout??6e4;return ia({types:{input:{unlockTimeout:a},context:{},output:{}},actors:{getAppAndVersion:n6(t),waitForDeviceUnlock:{config:s,transition:(e,t)=>{if("active"!==e.status)return e;switch(t.type){case nY:return{...e,context:t.data};case n0:return{...e,status:"error",error:t.data,input:void 0,_subscription:void 0};case n1:return{...e,status:"done",input:void 0,_subscription:void 0};case rK:return e._subscription.unsubscribe(),{...e,status:"stopped",input:void 0,_subscription:void 0};default:return e}},getInitialSnapshot:(e,t)=>({status:"active",output:void 0,error:void 0,context:void 0,input:t,_subscription:void 0}),start:(e,{self:t,system:r,emit:n})=>{"done"!==e.status&&(e._subscription=s({input:e.input,system:r,self:t,emit:n}).subscribe({next:e=>{r._relay(t,t,{type:nY,data:e})},error:e=>{r._relay(t,t,{type:n0,data:e})},complete:()=>{r._relay(t,t,{type:n1})}}))},getPersistedSnapshot:({_subscription:e,...t})=>t,restoreSnapshot:e=>({...e,_subscription:void 0})}},guards:{isDeviceOnboarded:()=>o(),isDeviceLocked:({context:e})=>e._internalState.locked,hasError:({context:e})=>null!==e._internalState.error},actions:{assignErrorDeviceNotOnboarded:n5({_internalState:e=>({...e.context._internalState,error:new il})}),assignErrorDeviceLocked:n5({_internalState:e=>({...e.context._internalState,error:new iu}),intermediateValue:{requiredUserInteraction:rP.UnlockDevice}}),assignErrorFromEvent:n5({_internalState:e=>({...e.context._internalState,error:e.event.error})}),assignNoUserActionNeeded:n5({intermediateValue:e=>({...e.context.intermediateValue,requiredUserInteraction:rP.None})}),assignUserActionUnlockNeeded:n5({intermediateValue:e=>({...e.context.intermediateValue,requiredUserInteraction:rP.UnlockDevice})})}}).createMachine({id:"GetDeviceStatusDeviceAction",initial:"DeviceReady",context:e=>{let t=r(),{sessionStateType:n}=t;return{input:{unlockTimeout:e.input.unlockTimeout},intermediateValue:{requiredUserInteraction:rP.None},_internalState:{onboarded:!1,locked:!1,currentApp:n===sx.ReadyWithoutSecureChannel?t.currentApp.name:null,currentAppVersion:null,error:null}}},states:{DeviceReady:{always:{target:"OnboardingCheck"}},OnboardingCheck:{always:[{guard:{type:"isDeviceOnboarded"},target:"AppAndVersionCheck",actions:n5({_internalState:e=>({...e.context._internalState,onboarded:!0})})},{target:"Error",actions:"assignErrorDeviceNotOnboarded"}]},UserActionUnlockDevice:{entry:"assignUserActionUnlockNeeded",exit:"assignNoUserActionNeeded",invoke:{id:"UserActionUnlockDevice",src:"waitForDeviceUnlock",input:e=>({unlockTimeout:a}),onDone:{target:"AppAndVersionCheck",actions:n5({_internalState:e=>({...e.context._internalState,locked:!1})})},onError:{target:"Error",actions:"assignErrorDeviceLocked"}}},AppAndVersionCheck:{invoke:{src:"getAppAndVersion",onDone:{target:"ApplicationAvailableResultCheck",actions:n5({_internalState:e=>{if(tg(e.event.output)){let t=r();return t.sessionStateType!==sx.Connected?n({...t,currentApp:e.event.output.data}):n({deviceModelId:t.deviceModelId,sessionStateType:sx.ReadyWithoutSecureChannel,deviceStatus:rI.CONNECTED,currentApp:e.event.output.data,installedApps:[],isSecureConnectionAllowed:!1}),{...e.context._internalState,locked:!1,currentApp:e.event.output.data.name,currentAppVersion:e.event.output.data.version}}if("errorCode"in e.event.output.error){if("5515"===e.event.output.error.errorCode)return{...e.context._internalState,locked:!0};if("6e00"===e.event.output.error.errorCode)return{...e.context._internalState,locked:!1,currentApp:"BOLOS",currentAppVersion:"0.0.0"}}return{...e.context._internalState,error:e.event.output.error}}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ApplicationAvailableResultCheck:{always:[{guard:"hasError",target:"Error"},{target:"UserActionUnlockDevice",guard:"isDeviceLocked"},{target:"Success"}]},Success:{type:"final"},Error:{type:"final"}},output:e=>{let{context:t}=e,{error:r,currentApp:n,currentAppVersion:s}=t._internalState;return r?rM(r):rU({currentApp:n,currentAppVersion:s})}})}extractDependencies(e){return{getAppAndVersion:()=>e.sendCommand(new tS),waitForDeviceUnlock:({input:t})=>{var r,n;return(r=1e3,void 0===n&&(n=i0),r<0&&(r=0),sm(r,r,n)).pipe(sb(()=>su(e.sendCommand(new tS))),sg(e=>!tg(e)&&"errorCode"in e.error&&"5515"===e.error.errorCode?i1:sc(void 0)),iz(function(e,t){var r=0;e.subscribe(i$(t,function(e){++r<=1&&(t.next(e),1<=r&&t.complete())}))}),function(e,t){var r=sd(e)?{first:e}:"number"==typeof e?{each:e}:e,n=r.first,s=r.each,o=r.with,a=void 0===o?sh:o,l=r.scheduler,u=void 0===l?(void 0)??i0:l,c=r.meta,d=void 0===c?null:c;if(null==n&&null==s)throw TypeError("No timeout provided.");return iz(function(e,t){var r,o,l=null,c=0,f=function(e){o=ss(t,u,function(){try{r.unsubscribe(),sn(a({meta:d,lastValue:l,seen:c})).subscribe(t)}catch(e){t.error(e)}},e)};r=e.subscribe(i$(t,function(e){null==o||o.unsubscribe(),c++,t.next(l=e),s>0&&f(s)},void 0,void 0,function(){null!=o&&o.closed||null==o||o.unsubscribe(),l=null})),c||f(null!=n?"number"==typeof n?n:n-u.now():s)})}(t.unlockTimeout))},getDeviceSessionState:()=>e.getDeviceSessionState(),setDeviceSessionState:t=>e.setDeviceSessionState(t),isDeviceOnboarded:()=>!0}}},sE=class{constructor(e){eY(this,"_tag","GeneralDmkError"),eY(this,"originalError"),e instanceof Error?this.originalError=e:void 0!==e&&(this.originalError=Error(String(e)))}},sA=class extends sE{constructor(e){super(e),eY(this,"_tag","DeviceAlreadyDiscoveredError"),this.err=e}},sS=class extends sE{constructor(e){super(e),eY(this,"_tag","DeviceNotRecognizedError"),this.err=e}},sk=class extends sE{constructor(e){super(e),eY(this,"_tag","NoAccessibleDeviceError"),this.err=e}},sI=class extends sE{constructor(e){super(e),eY(this,"_tag","ConnectionOpeningError")}},s_=class extends sE{constructor(e){super(e),eY(this,"_tag","UnknownDeviceError"),this.err=e}},sP=class extends sE{constructor(e){super(e),eY(this,"_tag","TransportNotSupportedError"),this.err=e}},sC=class extends sE{constructor(e){super(e),eY(this,"_tag","SendApduTimeoutError"),this.err=e}},sO=class extends sE{constructor(e){super(e),eY(this,"_tag","DeviceNotInitializedError"),this.err=e}},sT=class extends sE{constructor(e){super(e),eY(this,"_tag","TransportAlreadyExistsError"),this.err=e}},sR=class extends sE{constructor(e){super(e),eY(this,"_tag","DeviceDisconnectedWhileSendingError"),this.err=e}},sB=class extends sE{constructor(e){super(e),eY(this,"_tag","AlreadySendingApduError"),this.err=e}},sN=class extends sE{constructor(e){super(e),eY(this,"_tag","DeviceDisconnectedBeforeSendingApdu"),this.err=e}},sD=class extends sE{constructor(e){super(e),eY(this,"_tag","NoTransportProvidedError"),this.err=e}},sL=["BOLOS","OLOS","OLOS\0"],sM=e=>sL.includes(e),sU=class extends sv{makeStateMachine(e){let{closeApp:t,openApp:r,getDeviceSessionState:n,isDeviceOnboarded:s,setDeviceSessionState:o}=this.extractDependencies(e),a=new sw({input:{unlockTimeout:this.input.unlockTimeout??6e4}}).makeStateMachine(e);return ia({types:{input:{},context:{},output:{}},actors:{closeApp:n6(t),openApp:n6(r),getDeviceStatus:a},guards:{isDeviceOnboarded:()=>s(),isRequestedAppOpen:({context:e})=>null!==e._internalState.currentlyRunningApp&&e._internalState.currentlyRunningApp===e.input.appName,isDashboardOpen:({context:e})=>{if(null===e._internalState.currentlyRunningApp)throw Error("context.currentlyRunningApp === null");return sM(e._internalState.currentlyRunningApp)},hasDisconnectedWhileSending:({context:e})=>null!==e._internalState.error&&e._internalState.error instanceof sR,hasError:({context:e})=>null!==e._internalState.error},actions:{assignErrorDeviceNotOnboarded:n5({_internalState:e=>({...e.context._internalState,error:new il})}),assignUserActionNeededOpenApp:n5({intermediateValue:e=>({...e.context.intermediateValue,requiredUserInteraction:rP.ConfirmOpenApp})}),assignNoUserActionNeeded:n5({intermediateValue:e=>({...e.context.intermediateValue,requiredUserInteraction:rP.None})}),assignErrorFromEvent:n5({_internalState:e=>({...e.context._internalState,error:e.event.error})}),assignNoError:n5({_internalState:e=>({...e.context._internalState,error:null})})}}).createMachine({id:"OpenAppDeviceAction",initial:"DeviceReady",context:({input:e})=>{let t=n(),{sessionStateType:r}=t;return{input:e,intermediateValue:{requiredUserInteraction:rP.None},_internalState:{error:null,currentlyRunningApp:r===sx.ReadyWithoutSecureChannel?t.currentApp.name:null}}},states:{DeviceReady:{always:{target:"OnboardingCheck"}},OnboardingCheck:{always:[{target:"GetDeviceStatus",guard:{type:"isDeviceOnboarded"}},{target:"Error",actions:"assignErrorDeviceNotOnboarded"}]},GetDeviceStatus:{invoke:{id:"deviceStatus",src:"getDeviceStatus",input:e=>({unlockTimeout:e.context.input.unlockTimeout}),onSnapshot:{actions:n5({intermediateValue:e=>e.event.snapshot.context.intermediateValue})},onDone:{target:"CheckDeviceStatus",actions:n5({_internalState:e=>e.event.output.caseOf({Right:t=>{let r=n();return r.sessionStateType!==sx.Connected&&o({...r,currentApp:{name:t.currentApp,version:t.currentAppVersion}}),{...e.context._internalState,currentlyRunningApp:t.currentApp}},Left:t=>({...e.context._internalState,currentlyRunningApp:null,error:t})})})},onError:{target:"Error",actions:[n5({_internalState:e=>({...e.context._internalState,currentlyRunningApp:null})}),"assignErrorFromEvent"]}}},CheckDeviceStatus:{always:[{target:"ApplicationReady",guard:"isRequestedAppOpen",actions:"assignNoError"},{target:"Error",guard:"hasError"},{target:"DashboardCheck"}]},DashboardCheck:{always:[{target:"OpenApplication",guard:"isDashboardOpen"},"CloseApplication"]},OpenApplication:{entry:"assignUserActionNeededOpenApp",exit:"assignNoUserActionNeeded",invoke:{src:"openApp",input:({context:e})=>({appName:e.input.appName}),onDone:{target:"OpenApplicationResultCheck",actions:n5({_internalState:e=>tg(e.event.output)?{...e.context._internalState,currentlyRunningApp:e.context.input.appName}:{...e.context._internalState,error:e.event.output.error}})},onError:{target:"OpenApplicationResultCheck",actions:"assignErrorFromEvent"}}},OpenApplicationResultCheck:{always:[{target:"GetDeviceStatus",guard:"hasDisconnectedWhileSending"},{target:"Error",guard:"hasError"},{target:"GetDeviceStatus"}]},CloseApplication:{invoke:{src:"closeApp",onDone:{target:"CloseApplicationResultCheck",actions:n5({_internalState:e=>tg(e.event.output)?{...e.context._internalState,currentlyRunningApp:"BOLOS"}:{...e.context._internalState,error:e.event.output.error}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},CloseApplicationResultCheck:{always:[{target:"Error",guard:"hasError"},{target:"OpenApplication"}]},ApplicationReady:{always:"Success"},Success:{type:"final",actions:"assignNoError"},Error:{type:"final"}},output:({context:e})=>e._internalState.error?rM(e._internalState.error):rU(void 0)})}extractDependencies(e){return{closeApp:async()=>e.sendCommand(new tA),openApp:async t=>e.sendCommand(new rk({appName:t.input.appName})),getDeviceSessionState:()=>e.getDeviceSessionState(),setDeviceSessionState:t=>e.setDeviceSessionState(t),isDeviceOnboarded:()=>!0}}},sF=class extends sv{makeStateMachine(e){let{callTask:t}=this.extractDependencies(e);return ia({types:{input:{},context:{},output:{}},actors:{callTask:n6(t),openAppStateMachine:new sU({input:{appName:this.input.appName}}).makeStateMachine(e)},guards:{skipOpenApp:()=>this.input.skipOpenApp,noInternalError:({context:e})=>null===e._internalState.error},actions:{assignErrorFromEvent:n5({_internalState:e=>({...e.context._internalState,error:e.event.error})})}}).createMachine({id:"CallTaskInAppDeviceAction",initial:"InitialState",context:({input:e})=>({input:e,intermediateValue:{requiredUserInteraction:rP.None},_internalState:{taskResponse:null,error:null}}),states:{InitialState:{always:[{target:"CallTask",guard:"skipOpenApp"},"OpenAppDeviceAction"]},OpenAppDeviceAction:{invoke:{id:"openAppStateMachine",input:{appName:this.input.appName},src:"openAppStateMachine",onSnapshot:{actions:n5({intermediateValue:e=>e.event.snapshot.context.intermediateValue})},onDone:{actions:n5({_internalState:e=>e.event.output.caseOf({Right:()=>e.context._internalState,Left:t=>({...e.context._internalState,error:t})})}),target:"CheckOpenAppDeviceActionResult"}}},CheckOpenAppDeviceActionResult:{always:[{target:"CallTask",guard:"noInternalError"},"Error"]},CallTask:{entry:n5({intermediateValue:{requiredUserInteraction:this.input.requiredUserInteraction}}),exit:n5({intermediateValue:{requiredUserInteraction:rP.None}}),invoke:{id:"callTask",src:"callTask",input:e=>e.context.input.task,onDone:{target:"CallTaskResultCheck",actions:[n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,taskResponse:e.output.data}:{...t._internalState,error:e.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},CallTaskResultCheck:{always:[{target:"Success",guard:"noInternalError"},"Error"]},Success:{type:"final"},Error:{type:"final"}},output:({context:e})=>e._internalState.taskResponse?rU(e._internalState.taskResponse):rM(e._internalState.error||new ic("No error in final state"))})}extractDependencies(e){return{callTask:t=>t.input(e)}}};var sj=null;"u">typeof WebSocket?sj=WebSocket:"u">typeof MozWebSocket?sj=MozWebSocket:"u">typeof ea?sj=ea.WebSocket||ea.MozWebSocket:"u">typeof window?sj=window.WebSocket||window.MozWebSocket:"u">typeof self&&(sj=self.WebSocket||self.MozWebSocket);let sz=sj;var s$=((h=s$||{}).GenuineCheck="GenuineCheck",h.ListInstalledApps="ListInstalledApps",h.UpdateMcu="UpdateMcu",h.UpdateFirmware="UpdateFirmware",h.InstallApp="InstallApp",h.UninstallApp="UninstallApp",h),sH=((p=sH||{}).EXCHANGE="exchange",p.BULK="bulk",p.ERROR="error",p.WARNING="warning",p.SUCCESS="success",p),sV=((g=sV||{}).SUCCESS="success",g.ERROR="error",g),sq=((m=sq||{}).Opened="opened",m.Closed="closed",m.PermissionRequested="permission-requested",m.PermissionGranted="permission-granted",m.PreExchange="pre-exchange",m.Exchange="exchange",m.DeviceId="device-id",m.Progress="progress",m.Warning="warning",m.Error="error",m.Result="result",m);let sG=BigInt(0x100000000-1),sW=BigInt(32),sK=(e,t,r)=>e>>>r,sJ=(e,t,r)=>e<<32-r|t>>>r,sZ=(e,t,r)=>e>>>r|t<<32-r,sQ=(e,t,r)=>e<<32-r|t>>>r,sX=(e,t,r)=>e<<64-r|t>>>r-32,sY=(e,t,r)=>e>>>r-32|t<<64-r;function s0(e,t,r,n){let s=(t>>>0)+(n>>>0);return{h:e+r+(s/0x100000000|0)|0,l:0|s}}let s1=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),s2=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0,s3=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),s8=(e,t,r,n,s)=>t+r+n+s+(e/0x100000000|0)|0,s6=(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0),s4=(e,t,r,n,s,o)=>t+r+n+s+o+(e/0x100000000|0)|0,s5="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function s9(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s7(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function oe(e,...t){if(!s9(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function ot(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");s7(e.outputLen),s7(e.blockLen)}function or(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function on(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function oi(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function os(e,t){return e<<32-t|e>>>t}let oo="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,oa=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ol(e){if(oe(e),oo)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=oa[e[r]];return t}let ou={_0:48,_9:57,A:65,F:70,a:97,f:102};function oc(e){return e>=ou._0&&e<=ou._9?e-ou._0:e>=ou.A&&e<=ou.F?e-(ou.A-10):e>=ou.a&&e<=ou.f?e-(ou.a-10):void 0}function od(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(oo)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,s=0;t<r;t++,s+=2){let r=oc(e.charCodeAt(s)),o=oc(e.charCodeAt(s+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[s]+e[s+1])+'" at index '+s);n[t]=16*r+o}return n}function of(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e)),oe(e),e}function oh(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];oe(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let s=e[t];r.set(s,n),n+=s.length}return r}let op=class{};function og(e){let t=t=>e().update(of(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function om(e=32){if(s5&&"function"==typeof s5.getRandomValues)return s5.getRandomValues(new Uint8Array(e));if(s5&&"function"==typeof s5.randomBytes)return Uint8Array.from(s5.randomBytes(e));throw Error("crypto.getRandomValues must be defined")}var oy=((y=oy||{})[y.AppAlreadyInstalled=0]="AppAlreadyInstalled",y[y.DeviceLocked=1]="DeviceLocked",y[y.OutOfMemory=2]="OutOfMemory",y[y.RefusedByUser=3]="RefusedByUser",y[y.Unknown=4]="Unknown",y);let ob=class{constructor(e){eY(this,"_tag","WebSocketConnectionError"),eY(this,"originalError"),this.error=e,this.originalError=e}},ov=class extends sv{makeStateMachine(e){let{sendCommand:t}=this.extractDependencies(e);return ia({types:{input:{},context:{},output:{}},actors:{sendCommand:n6(t),openAppStateMachine:new sU({input:{appName:this.input.appName}}).makeStateMachine(e)},guards:{skipOpenApp:()=>this.input.skipOpenApp,noInternalError:({context:e})=>null===e._internalState.error},actions:{assignErrorFromEvent:n5({_internalState:e=>({...e.context._internalState,error:e.event.error})})}}).createMachine({id:"SendCommandInAppDeviceAction",initial:"InitialState",context:({input:e})=>({input:e,intermediateValue:{requiredUserInteraction:rP.None},_internalState:{commandResponse:null,error:null}}),states:{InitialState:{always:[{target:"SendCommand",guard:"skipOpenApp"},"OpenAppDeviceAction"]},OpenAppDeviceAction:{invoke:{id:"openAppStateMachine",input:{appName:this.input.appName},src:"openAppStateMachine",onSnapshot:{actions:n5({intermediateValue:e=>e.event.snapshot.context.intermediateValue})},onDone:{actions:n5({_internalState:e=>e.event.output.caseOf({Right:()=>e.context._internalState,Left:t=>({...e.context._internalState,error:t})})}),target:"CheckOpenAppDeviceActionResult"}}},CheckOpenAppDeviceActionResult:{always:[{target:"SendCommand",guard:"noInternalError"},"Error"]},SendCommand:{entry:n5({intermediateValue:{requiredUserInteraction:this.input.requiredUserInteraction}}),exit:n5({intermediateValue:{requiredUserInteraction:rP.None}}),invoke:{id:"sendCommand",src:"sendCommand",input:({context:e})=>e.input.command,onDone:{target:"SendCommandResultCheck",actions:[n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,commandResponse:e.output.data}:{...t._internalState,error:e.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},SendCommandResultCheck:{always:[{target:"Success",guard:"noInternalError"},"Error"]},Success:{type:"final"},Error:{type:"final"}},output:({context:e})=>e._internalState.commandResponse?rU(e._internalState.commandResponse):rM(e._internalState.error||new ic("No error in final state"))})}extractDependencies(e){return{sendCommand:t=>e.sendCommand(t.input)}}};function ox(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}function ow(e){switch(typeof e){case"string":case"symbol":return e.toString();case"function":return e.name;default:throw Error(`Unexpected ${typeof e} service id type`)}}let oE=Symbol.for("@inversifyjs/common/islazyServiceIdentifier"),oA=(py=class{constructor(e){eY(this,pg),e2(this,pm,void 0),e3(this,pm,e),this[oE]=!0}static is(e){return"object"==typeof e&&null!==e&&!0===e[oE]}unwrap(){return e1(this,pm).call(this)}},pg=oE,pm=new WeakMap,py);function oS(e,t){return Reflect.getOwnMetadata(t,e)}function ok(e,t,r){Reflect.defineMetadata(t,r,e)}function oI(e,t,r,n){let s=n(oS(e,t)??r());Reflect.defineMetadata(t,s,e)}let o_="@inversifyjs/container/bindingId";function oP(){let e=oS(Object,o_)??0;return e===Number.MAX_SAFE_INTEGER?ok(Object,o_,Number.MIN_SAFE_INTEGER):oI(Object,o_,()=>e,e=>e+1),e}let oC={Request:"Request",Singleton:"Singleton",Transient:"Transient"},oO={ConstantValue:"ConstantValue",DynamicValue:"DynamicValue",Factory:"Factory",Instance:"Instance",Provider:"Provider",ResolvedValue:"ResolvedValue",ServiceRedirection:"ServiceRedirection"};function*oT(...e){for(let t of e)yield*t}let oR=(pT=class{constructor(e){for(let t of(e2(this,pw),e2(this,pA),e2(this,pk),e2(this,p_),e2(this,pC),e2(this,pb,void 0),e2(this,pv,void 0),e2(this,px,void 0),e3(this,pb,new Map),e3(this,pv,{}),Reflect.ownKeys(e)))e1(this,pv)[t]=new Map;e3(this,px,e)}add(e,t){for(let r of(e6(this,pw,pE).call(this,e).push(t),Reflect.ownKeys(t)))e6(this,pA,pS).call(this,r,t[r]).push(e)}clone(){let e=Reflect.ownKeys(e1(this,px)),t=new pT(e1(this,px));for(let r of(e6(this,pk,pI).call(this,e1(this,pb),e1(t,pb)),e))e6(this,pk,pI).call(this,e1(this,pv)[r],e1(t,pv)[r]);return t}get(e,t){return e1(this,pv)[e].get(t)}getAllKeys(e){return e1(this,pv)[e].keys()}removeByRelation(e,t){let r=this.get(e,t);if(void 0!==r)for(let n of new Set(r)){let r=e1(this,pb).get(n);if(void 0===r)throw Error("Expecting model relation, none found");for(let s of r)s[e]===t&&e6(this,p_,pP).call(this,n,s);e1(this,pb).delete(n)}}},pb=new WeakMap,pv=new WeakMap,px=new WeakMap,pw=new WeakSet,pE=function(e){let t=e1(this,pb).get(e);return void 0===t&&(t=[],e1(this,pb).set(e,t)),t},pA=new WeakSet,pS=function(e,t){let r=e1(this,pv)[e].get(t);return void 0===r&&(r=[],e1(this,pv)[e].set(t,r)),r},pk=new WeakSet,pI=function(e,t){for(let[r,n]of e)t.set(r,[...n])},p_=new WeakSet,pP=function(e,t){for(let r of Reflect.ownKeys(t))e6(this,pC,pO).call(this,e,r,t[r])},pC=new WeakSet,pO=function(e,t,r){let n=e1(this,pv)[t].get(r);if(void 0!==n){let s=n.indexOf(e);-1!==s&&n.splice(s,1),0===n.length&&e1(this,pv)[t].delete(r)}},pT);(hZ=pR||(pR={})).moduleId="moduleId",hZ.serviceId="serviceId";let oB=(pM=class{constructor(e,t){e2(this,pD,void 0),e2(this,pL,void 0),e3(this,pD,t??new oR({moduleId:{isOptional:!0},serviceId:{isOptional:!1}})),e3(this,pL,e)}static build(e){return new pM(e)}add(e,t){e1(this,pD).add(e,t)}clone(){return new pM(e1(this,pL),e1(this,pD).clone())}get(e){var t;let r=[],n=e1(this,pD).get(pR.serviceId,e);void 0!==n&&r.push(n);let s=null==(t=e1(this,pL))?void 0:t.get(e);if(void 0!==s&&r.push(s),0!==r.length)return oT(...r)}removeAllByModuleId(e){e1(this,pD).removeByRelation(pR.moduleId,e)}removeAllByServiceId(e){e1(this,pD).removeByRelation(pR.serviceId,e)}},pD=new WeakMap,pL=new WeakMap,pM);(hQ=pB||(pB={})).id="id",hQ.moduleId="moduleId",hQ.serviceId="serviceId";let oN=(pj=class{constructor(e,t){e2(this,pU,void 0),e2(this,pF,void 0),e3(this,pU,t??new oR({id:{isOptional:!1},moduleId:{isOptional:!0},serviceId:{isOptional:!1}})),e3(this,pF,e)}static build(e){return new pj(e)}clone(){return new pj(e1(this,pF),e1(this,pU).clone())}get(e){var t;return this.getNonParentBindings(e)??(null==(t=e1(this,pF))?void 0:t.get(e))}getById(e){var t;return e1(this,pU).get(pB.id,e)??(null==(t=e1(this,pF))?void 0:t.getById(e))}getByModuleId(e){var t;return e1(this,pU).get(pB.moduleId,e)??(null==(t=e1(this,pF))?void 0:t.getByModuleId(e))}getNonParentBindings(e){return e1(this,pU).get(pB.serviceId,e)}getNonParentBoundServices(){return e1(this,pU).getAllKeys(pB.serviceId)}removeById(e){e1(this,pU).removeByRelation(pB.id,e)}removeAllByModuleId(e){e1(this,pU).removeByRelation(pB.moduleId,e)}removeAllByServiceId(e){e1(this,pU).removeByRelation(pB.serviceId,e)}set(e){let t={[pB.id]:e.id,[pB.serviceId]:e.serviceIdentifier};void 0!==e.moduleId&&(t[pB.moduleId]=e.moduleId),e1(this,pU).add(e,t)}},pU=new WeakMap,pF=new WeakMap,pj);(hX=pN||(pN={})).moduleId="moduleId",hX.serviceId="serviceId";let oD=(pH=class{constructor(e,t){e2(this,pz,void 0),e2(this,p$,void 0),e3(this,pz,t??new oR({moduleId:{isOptional:!0},serviceId:{isOptional:!1}})),e3(this,p$,e)}static build(e){return new pH(e)}add(e,t){e1(this,pz).add(e,t)}clone(){return new pH(e1(this,p$),e1(this,pz).clone())}get(e){var t;let r=[],n=e1(this,pz).get(pN.serviceId,e);void 0!==n&&r.push(n);let s=null==(t=e1(this,p$))?void 0:t.get(e);if(void 0!==s&&r.push(s),0!==r.length)return oT(...r)}removeAllByModuleId(e){e1(this,pz).removeByRelation(pN.moduleId,e)}removeAllByServiceId(e){e1(this,pz).removeByRelation(pN.serviceId,e)}},pz=new WeakMap,p$=new WeakMap,pH),oL="@inversifyjs/core/classMetadataReflectKey";function oM(){return{constructorArguments:[],lifecycle:{postConstructMethodName:void 0,preDestroyMethodName:void 0},properties:new Map,scope:void 0}}let oU="@inversifyjs/core/pendingClassMetadataCountReflectKey",oF=Symbol.for("@inversifyjs/core/InversifyCoreError"),oj=(pq=class extends Error{constructor(e,t,r){super(t,r),eY(this,pV),eY(this,"kind"),this[oF]=!0,this.kind=e}static is(e){return"object"==typeof e&&null!==e&&!0===e[oF]}static isErrorOfKind(e,t){return pq.is(e)&&e.kind===t}},pV=oF,pq);function oz(e){let t=oS(e,oL)??oM();if(!function(e){let t=oS(e,oU);return void 0!==t&&0!==t}(e))return function(e,t){let r=[];if(t.length<e.length)throw new oj(pG.missingInjectionDecorator,`Found unexpected missing metadata on type "${e.name}". "${e.name}" constructor requires at least ${e.length.toString()} arguments, found ${t.length.toString()} instead.
Are you using @inject, @multiInject or @unmanaged decorators in every non optional constructor argument?

If you're using typescript and want to rely on auto injection, set "emitDecoratorMetadata" compiler option to true`);for(let e=0;e<t.length;++e)void 0===t[e]&&r.push(e);if(r.length>0)throw new oj(pG.missingInjectionDecorator,`Found unexpected missing metadata on type "${e.name}" at constructor indexes "${r.join('", "')}".

Are you using @inject, @multiInject or @unmanaged decorators at those indexes?

If you're using typescript and want to rely on auto injection, set "emitDecoratorMetadata" compiler option to true`)}(e,t.constructorArguments),t;let r=[];for(let n=0;n<t.constructorArguments.length;++n){let s=t.constructorArguments[n];void 0!==s&&s.kind!==pW.unknown||r.push(`  - Missing or incomplete metadata for type "${e.name}" at constructor argument with index ${n.toString()}.
Every constructor parameter must be decorated either with @inject, @multiInject or @unmanaged decorator.`)}for(let[n,s]of t.properties)s.kind===pW.unknown&&r.push(`  - Missing or incomplete metadata for type "${e.name}" at property "${n.toString()}".
This property must be decorated either with @inject or @multiInject decorator.`);throw 0===r.length?new oj(pG.unknown,`Unexpected class metadata for type "${e.name}" with uncompletion traces.
This might be caused by one of the following reasons:

1. A third party library is targeting inversify reflection metadata.
2. A bug is causing the issue. Consider submiting an issue to fix it.`):new oj(pG.missingInjectionDecorator,`Invalid class metadata at type ${e.name}:

${r.join(`

`)}`)}function o$(){return 0}function oH(e){return t=>{void 0!==t&&t.kind===pW.unknown&&oI(e,oU,o$,e=>e-1)}}(hY=pG||(pG={}))[hY.injectionDecoratorConflict=0]="injectionDecoratorConflict",hY[hY.missingInjectionDecorator=1]="missingInjectionDecorator",hY[hY.planning=2]="planning",hY[hY.resolution=3]="resolution",hY[hY.unknown=4]="unknown",(h0=pW||(pW={}))[h0.unknown=32]="unknown",(h1=pK||(pK={}))[h1.multipleInjection=0]="multipleInjection",h1[h1.singleInjection=1]="singleInjection",h1[h1.unmanaged=2]="unmanaged";let oV=(h2=function(e,t){return{kind:e,name:void 0,optional:!1,tags:new Map,value:t}},h3=function(e,t,r){return function(e){if(e.kind!==pW.unknown&&!0!==e.isFromTypescriptParamType)throw new oj(pG.injectionDecoratorConflict,"Unexpected injection found. Multiple @inject, @multiInject or @unmanaged decorators found")}(e),{...e,kind:t,value:r}},(...e)=>t=>{if(void 0===t)return h2(...e);if(t.kind===pK.unmanaged)throw new oj(pG.injectionDecoratorConflict,"Unexpected injection found. Multiple @inject, @multiInject or @unmanaged decorators found");return h3(t,...e)});function oq(e,t){return r=>{let n=r.properties.get(t);return r.properties.set(t,e(n)),r}}function oG(e,t){return r=>{let n=t(r);return t=>(n(t),e(t))}}function oW(e){var t;return t=oV(pK.singleInjection,e),(e,r,n)=>{try{void 0===n?(function(e,t){let r=oG(e,t);return(e,t)=>{oI(e.constructor,oL,oM,oq(r(e),t))}})(t,oH)(e,r):"number"==typeof n?(function(e,t){let r=oG(e,t);return(e,t,n)=>{var s;if("function"!=typeof e||void 0!==t)throw new oj(pG.injectionDecoratorConflict,`Found an @inject decorator in a non constructor parameter.
Found @inject decorator at method "${(null==t?void 0:t.toString())??""}" at class "${e.constructor.name}"`);oI(e,oL,oM,(s=r(e),e=>{let t=e.constructorArguments[n];return e.constructorArguments[n]=s(t),e}))}})(t,oH)(e,r,n):(function(e,t){let r=oG(e,t);return(e,t,n)=>{if(void 0===n.set)throw new oj(pG.injectionDecoratorConflict,`Found an @inject decorator in a non setter property method.
Found @inject decorator at method "${t.toString()}" at class "${e.constructor.name}"`);oI(e.constructor,oL,oM,oq(r(e),t))}})(t,oH)(e,r,n)}catch(t){if(oj.isErrorOfKind(t,pG.injectionDecoratorConflict)){let s=function(e,t,r){if(void 0===r){if(void 0===t)throw new oj(pG.unknown,"Unexpected undefined property and index values");return{kind:pJ.property,property:t,targetClass:e.constructor}}return"number"==typeof r?{index:r,kind:pJ.parameter,targetClass:e}:{kind:pJ.method,method:t,targetClass:e}}(e,r,n);throw new oj(pG.injectionDecoratorConflict,`Unexpected injection error.

Cause:

${t.message}

Details

${function(e){switch(e.kind){case pJ.method:return`[class: "${e.targetClass.name}", method: "${e.method.toString()}"]`;case pJ.parameter:return`[class: "${e.targetClass.name}", index: "${e.index.toString()}"]`;case pJ.property:return`[class: "${e.targetClass.name}", property: "${e.property.toString()}"]`}}(s)}`,{cause:t})}throw t}}}(h8=pJ||(pJ={}))[h8.method=0]="method",h8[h8.parameter=1]="parameter",h8[h8.property=2]="property";let oK="@inversifyjs/core/classIsInjectableFlagReflectKey",oJ=[Array,BigInt,Boolean,Function,Number,Object,String];function oZ(e){return t=>{(function(e){if(void 0!==oS(e,oK))throw new oj(pG.injectionDecoratorConflict,`Cannot apply @injectable decorator multiple times at class "${e.name}"`);ok(e,oK,!0)})(t),function(e){let t=oS(e,"design:paramtypes");void 0!==t&&oI(e,oL,oM,e=>(t.forEach((t,r)=>{void 0!==e.constructorArguments[r]||oJ.includes(t)||(e.constructorArguments[r]={isFromTypescriptParamType:!0,kind:pK.singleInjection,name:void 0,optional:!1,tags:new Map,value:t})}),e))}(t),void 0!==e&&oI(t,oL,oM,t=>({...t,scope:e}))}}(h6=pZ||(pZ={}))[h6.multipleInjection=0]="multipleInjection",h6[h6.singleInjection=1]="singleInjection";let oQ=class e{constructor(e){e2(this,pQ,void 0),e3(this,pQ,e)}get name(){return e1(this,pQ).elem.name}get serviceIdentifier(){return e1(this,pQ).elem.serviceIdentifier}get tags(){return e1(this,pQ).elem.tags}getAncestor(){if(void 0!==e1(this,pQ).previous)return new e(e1(this,pQ).previous)}};pQ=new WeakMap;class oX{constructor(e){eY(this,"last"),this.last=e}concat(e){return new oX({elem:e,previous:this.last})}[Symbol.iterator](){let e=this.last;return{next:()=>{if(void 0===e)return{done:!0,value:void 0};let t=e.elem;return e=e.previous,{done:!1,value:t}}}}}function oY(e,t,r){let n=(null==r?void 0:r.customServiceIdentifier)??t.serviceIdentifier,s=[...e.getBindings(n)??[]].filter(e=>e.isSatisfiedBy(t));if(0===s.length&&void 0!==e.autobindOptions&&"function"==typeof n){let t=function(e,t){let r=oz(t).scope??e.scope;return{cache:{isRight:!1,value:void 0},id:oP(),implementationType:t,isSatisfiedBy:()=>!0,moduleId:void 0,onActivation:void 0,onDeactivation:void 0,scope:r,serviceIdentifier:t,type:oO.Instance}}(e.autobindOptions,n);e.setBinding(t),s.push(t)}return s}function o0(e){return void 0!==e.redirections}function o1(e,t,r,n){var s,o,a;let l,u;o0(r)?(l=r.binding.targetServiceIdentifier,u=r.binding.serviceIdentifier):(l=r.serviceIdentifier,u=null==(s=r.parent)?void 0:s.binding.serviceIdentifier),Array.isArray(e)?function(e,t,r,n,s){if(0!==e.length){let t=`Ambiguous bindings found for service: "${ow(r)}".

Registered bindings:

${e.map(e=>(function(e){switch(e.type){case oO.Instance:return`[ type: "${e.type}", serviceIdentifier: "${ow(e.serviceIdentifier)}", scope: "${e.scope}", implementationType: "${e.implementationType.name}" ]`;case oO.ServiceRedirection:return`[ type: "${e.type}", serviceIdentifier: "${ow(e.serviceIdentifier)}", redirection: "${ow(e.targetServiceIdentifier)}" ]`;default:return`[ type: "${e.type}", serviceIdentifier: "${ow(e.serviceIdentifier)}", scope: "${e.scope}" ]`}})(e.binding)).join(`
`)}

Trying to resolve bindings for "${o3(r,n)}".

${o8(s)}`;throw new oj(pG.planning,t)}t||o2(r,n,s)}(e,t,l,u,n):(o=l,a=u,void 0!==e||t||o2(o,a,n))}function o2(e,t,r){let n=`No bindings found for service: "${ow(e)}".

Trying to resolve bindings for "${o3(e,t)}".

${o8(r)}`;throw new oj(pG.planning,n)}function o3(e,t){return void 0===t?`${ow(e)} (Root service)`:ow(t)}function o8(e){var t;let r=0===e.tags.size?"":`
- tags:
  - ${[...e.tags.keys()].map(e=>e.toString()).join(`
  - `)}`;return`Binding constraints:
- service identifier: ${ow(e.serviceIdentifier)}
- name: ${(null==(t=e.name)?void 0:t.toString())??"-"}${r}`}function o6(e,t,r){if(Array.isArray(e.bindings)&&1===e.bindings.length){let[n]=e.bindings;o0(n)&&function e(t,r,n){if(1!==t.redirections.length)o1(t.redirections,r,t,n);else{let[s]=t.redirections;o0(s)&&e(s,r,n)}}(n,t,r)}else o1(e.bindings,t,e,r)}function o4(e,t,r){if(r.kind===pK.unmanaged)return;let n=oA.is(r.value)?r.value.unwrap():r.value,s=t.concat({name:r.name,serviceIdentifier:n,tags:r.tags}),o=new oQ(s.last),a=oY(e,o),l=[],u={bindings:l,parent:e.node,serviceIdentifier:n};if(l.push(...o5(e,s,a,u)),r.kind===pK.singleInjection){o6(u,r.optional,o);let[e]=l;u.bindings=e}return u}function o5(e,t,r,n){let s=o0(n)?n.binding.targetServiceIdentifier:n.serviceIdentifier;e.servicesBranch.push(s);let o=[];for(let s of r)switch(s.type){case oO.Instance:o.push(function(e,t,r,n){let s={binding:t,classMetadata:e.getClassMetadata(t.implementationType),constructorParams:[],parent:n,propertyParams:new Map};return o9({autobindOptions:e.autobindOptions,getBindings:e.getBindings,getClassMetadata:e.getClassMetadata,node:s,servicesBranch:e.servicesBranch,setBinding:e.setBinding},r)}(e,s,t,n));break;case oO.ResolvedValue:o.push(o9({autobindOptions:e.autobindOptions,getBindings:e.getBindings,getClassMetadata:e.getClassMetadata,node:{binding:s,params:[],parent:n},servicesBranch:e.servicesBranch,setBinding:e.setBinding},t));break;case oO.ServiceRedirection:{let r=function(e,t,r,n){let s={binding:r,parent:n,redirections:[]},o=oY(e,new oQ(t.last),{customServiceIdentifier:r.targetServiceIdentifier});return s.redirections.push(...o5(e,t,o,s)),s}(e,t,s,n);o.push(r);break}default:o.push({binding:s,parent:n})}return e.servicesBranch.pop(),o}function o9(e,t){return e.node.binding.type===oO.Instance?function(e,t,r){let n=t.classMetadata;for(let[s,o]of n.constructorArguments.entries())t.constructorParams[s]=o4(e,r,o);for(let[s,o]of n.properties){let n=o4(e,r,o);void 0!==n&&t.propertyParams.set(s,n)}return e.node}(e,e.node,t):function(e,t,r){for(let[n,s]of t.binding.metadata.arguments.entries())t.params[n]=function(e,t,r){let n=oA.is(r.value)?r.value.unwrap():r.value,s=t.concat({name:r.name,serviceIdentifier:n,tags:r.tags}),o=new oQ(s.last),a=oY(e,o),l=[],u={bindings:l,parent:e.node,serviceIdentifier:n};if(l.push(...o5(e,s,a,u)),r.kind===pZ.singleInjection){o6(u,r.optional,o);let[e]=l;u.bindings=e}return u}(e,r,s);return e.node}(e,e.node,t)}(h4=pX||(pX={}))[h4.singleMandatory=0]="singleMandatory",h4[h4.singleOptional=1]="singleOptional",h4[h4.multipleMandatory=2]="multipleMandatory",h4[h4.multipleOptional=3]="multipleOptional",h4[h4.length=4]="length";class o7{constructor(){e2(this,p8),e2(this,p4),e2(this,p9),e2(this,ge),e2(this,gr),e2(this,pY,void 0),e2(this,p0,void 0),e2(this,p1,void 0),e2(this,p2,void 0),e2(this,p3,void 0),e3(this,pY,e6(this,p8,p6).call(this)),e3(this,p0,e6(this,p8,p6).call(this)),e3(this,p2,e6(this,p8,p6).call(this)),e3(this,p1,e6(this,p8,p6).call(this)),e3(this,p3,[])}clearCache(){for(let e of e6(this,ge,gt).call(this))e.clear();for(let e of e1(this,p3))e.clearCache()}get(e){var t,r,n,s,o,a;return void 0===e.name?void 0===e.tag?e6(this,p9,p7).call(this,e1(this,pY),e).get(e.serviceIdentifier):null==(r=null==(t=e6(this,p9,p7).call(this,e1(this,p1),e).get(e.serviceIdentifier))?void 0:t.get(e.tag.key))?void 0:r.get(e.tag.value):void 0===e.tag?null==(n=e6(this,p9,p7).call(this,e1(this,p0),e).get(e.serviceIdentifier))?void 0:n.get(e.name):null==(a=null==(o=null==(s=e6(this,p9,p7).call(this,e1(this,p2),e).get(e.serviceIdentifier))?void 0:s.get(e.name))?void 0:o.get(e.tag.key))?void 0:a.get(e.tag.value)}set(e,t){void 0===e.name?void 0===e.tag?e6(this,p9,p7).call(this,e1(this,pY),e).set(e.serviceIdentifier,t):e6(this,p4,p5).call(this,e6(this,p4,p5).call(this,e6(this,p9,p7).call(this,e1(this,p1),e),e.serviceIdentifier),e.tag.key).set(e.tag.value,t):void 0===e.tag?e6(this,p4,p5).call(this,e6(this,p9,p7).call(this,e1(this,p0),e),e.serviceIdentifier).set(e.name,t):e6(this,p4,p5).call(this,e6(this,p4,p5).call(this,e6(this,p4,p5).call(this,e6(this,p9,p7).call(this,e1(this,p2),e),e.serviceIdentifier),e.name),e.tag.key).set(e.tag.value,t)}subscribe(e){e1(this,p3).push(e)}}function ae(e,t){return ox(t)?(e.cache={isRight:!0,value:t},t.then(t=>at(e,t))):at(e,t)}function at(e,t){return e.cache={isRight:!0,value:t},t}async function ar(e,t,r){let n=await t,s=r.next();for(;!0!==s.done;)n=await s.value(e.context,n),s=r.next();return n}function an(e,t,r){let n=r;if(void 0!==t.onActivation){let r=t.onActivation;n=ox(n)?n.then(t=>r(e.context,t)):r(e.context,n)}var s=t.serviceIdentifier,o=n;let a=e.getActivations(s);return void 0===a?o:ox(o)?ar(e,o,a[Symbol.iterator]()):function(e,t,r){let n=t,s=r.next();for(;!0!==s.done;){let t=s.value(e.context,n);if(ox(t))return ar(e,t,r);n=t,s=r.next()}return n}(e,o,a[Symbol.iterator]())}function ai(e){return(t,r)=>r.cache.isRight?r.cache.value:ae(r,an(t,r,e(t,r)))}pY=new WeakMap,p0=new WeakMap,p1=new WeakMap,p2=new WeakMap,p3=new WeakMap,p8=new WeakSet,p6=function(){let e=Array(pX.length);for(let t=0;t<e.length;++t)e[t]=new Map;return e},p4=new WeakSet,p5=function(e,t){let r=e.get(t);return void 0===r&&(r=new Map,e.set(t,r)),r},p9=new WeakSet,p7=function(e,t){return e[e6(this,gr,gn).call(this,t)]},ge=new WeakSet,gt=function(){return[...e1(this,pY),...e1(this,p0),...e1(this,p2),...e1(this,p1)]},gr=new WeakSet,gn=function(e){return e.isMultiple?!0===e.optional?pX.multipleOptional:pX.multipleMandatory:!0===e.optional?pX.singleOptional:pX.singleMandatory};let as=ai(function(e,t){return t.value});function ao(e,t){return(r,n)=>{let s=e(n);switch(s.scope){case oC.Singleton:return s.cache.isRight?s.cache.value:ae(s,an(r,s,t(r,n)));case oC.Request:{if(r.requestScopeCache.has(s.id))return r.requestScopeCache.get(s.id);let e=an(r,s,t(r,n));return r.requestScopeCache.set(s.id,e),e}case oC.Transient:return an(r,s,t(r,n))}}}let aa=ao(function(e){return e},function(e,t){return t.value(e.context)}),al=ai(function(e,t){return t.factory(e.context)});function au(e,t,r){let n=function(e,t,r){if(void 0!==r){if(!(r in e))throw new oj(pG.resolution,`Expecting a "${r.toString()}" property when resolving "${t.implementationType.name}" class @postConstruct decorated method, none found.`);if("function"!=typeof e[r])throw new oj(pG.resolution,`Expecting a "${r.toString()}" method when resolving "${t.implementationType.name}" class @postConstruct decorated method, a non function property was found instead.`);{let n;try{n=e[r]()}catch(e){throw new oj(pG.resolution,`Unexpected error found when calling "${r.toString()}" @postConstruct decorated method on class "${t.implementationType.name}"`,{cause:e})}if(ox(n))return async function(e,t,r){try{await r}catch(r){throw new oj(pG.resolution,`Unexpected error found when calling "${t.toString()}" @postConstruct decorated method on class "${e.implementationType.name}"`,{cause:r})}}(t,r,n)}}}(e,t,r);return ox(n)?n.then(()=>e):e}function ac(e){return(t,r,n)=>{let s=new n.binding.implementationType(...t),o=e(r,s,n);return ox(o)?o.then(()=>au(s,n.binding,n.classMetadata.lifecycle.postConstructMethodName)):au(s,n.binding,n.classMetadata.lifecycle.postConstructMethodName)}}let ad=ai(function(e,t){return t.provider(e.context)}),af=(h5=av,(e,t,r)=>{let n=[];for(let[s,o]of r.propertyParams){let a=r.classMetadata.properties.get(s);if(void 0===a)throw new oj(pG.resolution,`Expecting metadata at property "${s.toString()}", none found`);a.kind!==pK.unmanaged&&void 0!==o.bindings&&(t[s]=h5(e,o),ox(t[s])&&n.push((async()=>{t[s]=await t[s]})()))}if(n.length>0)return Promise.all(n).then(()=>{})}),ah=(h9=ab,function e(t,r){let n=[];for(let s of r.redirections)o0(s)?n.push(...e(t,s)):n.push(h9(t,s));return n}),ap=(h7=av,pt=(e,t)=>{let r=[];for(let n of t.constructorParams)void 0===n?r.push(void 0):r.push(h7(e,n));return r.some(ox)?Promise.all(r):r},pe=ac(af),pr=async(e,t,r)=>pe(await e,t,r),pn=ac(af),(e,t)=>{let r=pt(e,t);return ox(r)?pr(r,e,t):pn(r,e,t)}),ag=(pi=av,ps=(e,t)=>{let r=[];for(let n of t.params)r.push(pi(e,n));return r.some(ox)?Promise.all(r):r},(e,t)=>{let r=ps(e,t);return ox(r)?r.then(e=>t.binding.factory(...e)):t.binding.factory(...r)}),am=ao(function(e){return e.binding},ap),ay=ao(function(e){return e.binding},ag);function ab(e,t){switch(t.binding.type){case oO.ConstantValue:return as(e,t.binding);case oO.DynamicValue:return aa(e,t.binding);case oO.Factory:return al(e,t.binding);case oO.Instance:return am(e,t);case oO.Provider:return ad(e,t.binding);case oO.ResolvedValue:return ay(e,t)}}function av(e,t){if(void 0!==t.bindings)return Array.isArray(t.bindings)?function(e,t){let r=[];for(let n of t)o0(n)?r.push(...ah(e,n)):r.push(ab(e,n));return r.some(ox)?Promise.all(r):r}(e,t.bindings):function(e,t){if(o0(t)){let r=ah(e,t);if(1===r.length)return r[0];throw new oj(pG.resolution,"Unexpected multiple resolved values on single injection")}return ab(e,t)}(e,t.bindings)}function ax(e,t){if(void 0!==e.lifecycle.preDestroyMethodName&&"function"==typeof t[e.lifecycle.preDestroyMethodName])return t[e.lifecycle.preDestroyMethodName]()}function aw(e,t,r){let n=e.getDeactivations(t);if(void 0!==n)return ox(r)?aE(r,n[Symbol.iterator]()):function(e,t){let r=t.next();for(;!0!==r.done;){if(ox(r.value(e)))return aE(e,t);r=t.next()}}(r,n[Symbol.iterator]())}async function aE(e,t){let r=await e,n=t.next();for(;!0!==n.done;)await n.value(r),n=t.next()}function aA(e,t){let r=t.cache;return ox(r.value)?r.value.then(r=>aS(e,t,r)):aS(e,t,r.value)}function aS(e,t,r){let n;return void 0!==t.onDeactivation&&(n=(0,t.onDeactivation)(r)),void 0===n?aw(e,t.serviceIdentifier,r):n.then(()=>aw(e,t.serviceIdentifier,r))}function ak(e,t){if(void 0===t)return;let r=function(e){let t=[];for(let r of e)void 0!==r.scope&&r.scope===oC.Singleton&&r.cache.isRight&&t.push(r);return t}(t),n=[];for(let t of r){let r=function(e,t){let r=function(e,t){if(t.type===oO.Instance){let r=e.getClassMetadata(t.implementationType),n=t.cache.value;return ox(n)?n.then(e=>ax(r,e)):ax(r,n)}}(e,t);return void 0===r?aA(e,t):r.then(()=>aA(e,t))}(e,t);void 0!==r&&n.push(r)}return n.length>0?Promise.all(n).then(()=>{}):void 0}function aI(e,t){let r=e.getBindings(t);return ak(e,r)}let a_="@inversifyjs/container/bindingId",aP=(go=class{constructor(e){e2(this,gi,void 0),e2(this,gs,void 0),e3(this,gi,function(){let e=oS(Object,a_)??0;return e===Number.MAX_SAFE_INTEGER?ok(Object,a_,Number.MIN_SAFE_INTEGER):oI(Object,a_,()=>e,e=>e+1),e}()),e3(this,gs,e)}get id(){return e1(this,gi)}load(e){return e1(this,gs).call(this,e)}},gi=new WeakMap,gs=new WeakMap,go),aC=Symbol.for("@inversifyjs/container/bindingIdentifier");function aO(e){return"object"==typeof e&&null!==e&&!0===e[aC]}let aT=(eY(ga=class{},"always",e=>!0),ga);function aR(e){return{[aC]:!0,id:e.id}}function aB(e){return t=>{for(let r=t.getAncestor();void 0!==r;r=r.getAncestor())if(e(r))return!0;return!1}}function aN(e){return t=>t.name===e}function aD(e){return t=>t.serviceIdentifier===e}function aL(e,t){return r=>r.tags.has(e)&&r.tags.get(e)===t}function aM(e){return void 0===e.name&&0===e.tags.size}function aU(e){let t=aB(e);return e=>!t(e)}function aF(e){return t=>{let r=t.getAncestor();return void 0===r||!e(r)}}function aj(e){return t=>{let r=t.getAncestor();return void 0!==r&&e(r)}}let az=(gu=class{constructor(e){e2(this,gl,void 0),e3(this,gl,e)}getIdentifier(){return aR(e1(this,gl))}inRequestScope(){return e1(this,gl).scope=oC.Request,new aq(e1(this,gl))}inSingletonScope(){return e1(this,gl).scope=oC.Singleton,new aq(e1(this,gl))}inTransientScope(){return e1(this,gl).scope=oC.Transient,new aq(e1(this,gl))}},gl=new WeakMap,gu),a$=(gm=class{constructor(e,t,r,n){e2(this,gp),e2(this,gc,void 0),e2(this,gd,void 0),e2(this,gf,void 0),e2(this,gh,void 0),e3(this,gc,e),e3(this,gd,t),e3(this,gf,r),e3(this,gh,n)}to(e){let t=oz(e),r={cache:{isRight:!1,value:void 0},id:oP(),implementationType:e,isSatisfiedBy:aT.always,moduleId:e1(this,gd),onActivation:void 0,onDeactivation:void 0,scope:t.scope??e1(this,gf),serviceIdentifier:e1(this,gh),type:oO.Instance};return e1(this,gc).call(this,r),new aG(r)}toSelf(){if("function"!=typeof e1(this,gh))throw Error('"toSelf" function can only be applied when a newable function is used as service identifier');return this.to(e1(this,gh))}toConstantValue(e){let t={cache:{isRight:!1,value:void 0},id:oP(),isSatisfiedBy:aT.always,moduleId:e1(this,gd),onActivation:void 0,onDeactivation:void 0,scope:oC.Singleton,serviceIdentifier:e1(this,gh),type:oO.ConstantValue,value:e};return e1(this,gc).call(this,t),new aq(t)}toDynamicValue(e){let t={cache:{isRight:!1,value:void 0},id:oP(),isSatisfiedBy:aT.always,moduleId:e1(this,gd),onActivation:void 0,onDeactivation:void 0,scope:e1(this,gf),serviceIdentifier:e1(this,gh),type:oO.DynamicValue,value:e};return e1(this,gc).call(this,t),new aG(t)}toResolvedValue(e,t){let r={cache:{isRight:!1,value:void 0},factory:e,id:oP(),isSatisfiedBy:aT.always,metadata:e6(this,gp,gg).call(this,t),moduleId:e1(this,gd),onActivation:void 0,onDeactivation:void 0,scope:e1(this,gf),serviceIdentifier:e1(this,gh),type:oO.ResolvedValue};return e1(this,gc).call(this,r),new aG(r)}toFactory(e){let t={cache:{isRight:!1,value:void 0},factory:e,id:oP(),isSatisfiedBy:aT.always,moduleId:e1(this,gd),onActivation:void 0,onDeactivation:void 0,scope:oC.Singleton,serviceIdentifier:e1(this,gh),type:oO.Factory};return e1(this,gc).call(this,t),new aq(t)}toProvider(e){let t={cache:{isRight:!1,value:void 0},id:oP(),isSatisfiedBy:aT.always,moduleId:e1(this,gd),onActivation:void 0,onDeactivation:void 0,provider:e,scope:oC.Singleton,serviceIdentifier:e1(this,gh),type:oO.Provider};return e1(this,gc).call(this,t),new aq(t)}toService(e){let t={id:oP(),isSatisfiedBy:aT.always,moduleId:e1(this,gd),serviceIdentifier:e1(this,gh),targetServiceIdentifier:e,type:oO.ServiceRedirection};e1(this,gc).call(this,t)}},gc=new WeakMap,gd=new WeakMap,gf=new WeakMap,gh=new WeakMap,gp=new WeakSet,gg=function(e){return{arguments:(e??[]).map(e=>"object"!=typeof e||oA.is(e)?{kind:pZ.singleInjection,name:void 0,optional:!1,tags:new Map,value:e}:{kind:!0===e.isMultiple?pZ.multipleInjection:pZ.singleInjection,name:e.name,optional:e.optional??!1,tags:new Map((e.tags??[]).map(e=>[e.key,e.value])),value:e.serviceIdentifier})}},gm);class aH{constructor(e){e2(this,gy,void 0),e3(this,gy,e)}getIdentifier(){return aR(e1(this,gy))}onActivation(e){return e1(this,gy).onActivation=e,new aV(e1(this,gy))}onDeactivation(e){return e1(this,gy).onDeactivation=e,new aV(e1(this,gy))}}gy=new WeakMap;let aV=(gv=class{constructor(e){e2(this,gb,void 0),e3(this,gb,e)}getIdentifier(){return aR(e1(this,gb))}when(e){return e1(this,gb).isSatisfiedBy=e,new aH(e1(this,gb))}whenAnyAncestor(e){return this.when(aB(e))}whenAnyAncestorIs(e){return this.when(aB(aD(e)))}whenAnyAncestorNamed(e){return this.when(aB(aN(e)))}whenAnyAncestorTagged(e,t){return this.when(aB(aL(e,t)))}whenDefault(){return this.when(aM)}whenNamed(e){return this.when(aN(e))}whenNoParent(e){return this.when(aF(e))}whenNoParentIs(e){return this.when(aF(aD(e)))}whenNoParentNamed(e){return this.when(aF(aN(e)))}whenNoParentTagged(e,t){return this.when(aF(aL(e,t)))}whenParent(e){return this.when(aj(e))}whenParentIs(e){return this.when(aj(aD(e)))}whenParentNamed(e){return this.when(aj(aN(e)))}whenParentTagged(e,t){return this.when(aj(aL(e,t)))}whenTagged(e,t){return this.when(aL(e,t))}whenNoAncestor(e){return this.when(aU(e))}whenNoAncestorIs(e){return this.when(aU(aD(e)))}whenNoAncestorNamed(e){return this.when(aU(aN(e)))}whenNoAncestorTagged(e,t){return this.when(aU(aL(e,t)))}},gb=new WeakMap,gv),aq=(gw=class extends aV{constructor(e){super(e),e2(this,gx,void 0),e3(this,gx,new aH(e))}onActivation(e){return e1(this,gx).onActivation(e)}onDeactivation(e){return e1(this,gx).onDeactivation(e)}},gx=new WeakMap,gw),aG=(gA=class extends aq{constructor(e){super(e),e2(this,gE,void 0),e3(this,gE,new az(e))}inRequestScope(){return e1(this,gE).inRequestScope()}inSingletonScope(){return e1(this,gE).inSingletonScope()}inTransientScope(){return e1(this,gE).inTransientScope()}},gE=new WeakMap,gA),aW=Symbol.for("@inversifyjs/container/InversifyContainerError"),aK=(gk=class extends Error{constructor(e,t,r){super(t,r),eY(this,gS),eY(this,"kind"),this[aW]=!0,this.kind=e}static is(e){return"object"==typeof e&&null!==e&&!0===e[aW]}static isErrorOfKind(e,t){return gk.is(e)&&e.kind===t}},gS=aW,gk);(po=gI||(gI={}))[po.invalidOperation=0]="invalidOperation";let aJ=oC.Transient,aZ=(mp=class{constructor(e){e2(this,gU),e2(this,gj),e2(this,g$),e2(this,gV),e2(this,gG),e2(this,gK),e2(this,gZ),e2(this,gX),e2(this,g0),e2(this,g2),e2(this,g8),e2(this,g4),e2(this,g9),e2(this,me),e2(this,mr),e2(this,mi),e2(this,mo),e2(this,ml),e2(this,mc),e2(this,mf),e2(this,g_,void 0),e2(this,gP,void 0),e2(this,gC,void 0),e2(this,gO,void 0),e2(this,gT,void 0),e2(this,gR,void 0),e2(this,gB,void 0),e2(this,gN,void 0),e2(this,gD,void 0),e2(this,gL,void 0),e2(this,gM,void 0),e3(this,gC,e6(this,gj,gz).call(this)),e3(this,gT,e=>e1(this,g_).get(e)),e3(this,gN,new o7),e3(this,gD,e6(this,gK,gJ).call(this)),(null==e?void 0:e.parent)===void 0?(e3(this,g_,oB.build(void 0)),e3(this,gP,oN.build(void 0)),e3(this,gO,oD.build(void 0))):(e3(this,g_,oB.build(e1(e.parent,g_))),e3(this,gP,oN.build(e1(e.parent,gP))),e3(this,gO,oD.build(e1(e.parent,gO))),e1(e.parent,gN).subscribe(e1(this,gN))),e3(this,gR,e1(this,gP).get.bind(e1(this,gP))),e3(this,gL,e6(this,g9,g7).bind(this)),e3(this,gB,{autobind:(null==e?void 0:e.autobind)??!1,defaultScope:(null==e?void 0:e.defaultScope)??aJ}),e3(this,gM,[])}bind(e){return new a$(e=>{e6(this,g9,g7).call(this,e)},void 0,e1(this,gB).defaultScope,e)}get(e,t){let r=e6(this,gG,gW).call(this,!1,e,t),n=e6(this,gZ,gQ).call(this,r);if(ox(n))throw new aK(gI.invalidOperation,`Unexpected asyncronous service when resolving service "${ow(e)}"`);return n}getAll(e,t){let r=e6(this,gG,gW).call(this,!0,e,t),n=e6(this,gZ,gQ).call(this,r);if(ox(n))throw new aK(gI.invalidOperation,`Unexpected asyncronous service when resolving service "${ow(e)}"`);return n}async getAllAsync(e,t){let r=e6(this,gG,gW).call(this,!0,e,t);return e6(this,gZ,gQ).call(this,r)}async getAsync(e,t){let r=e6(this,gG,gW).call(this,!1,e,t);return e6(this,gZ,gQ).call(this,r)}isBound(e,t){let r=e1(this,gP).get(e);return e6(this,g0,g1).call(this,e,r,t)}isCurrentBound(e,t){let r=e1(this,gP).getNonParentBindings(e);return e6(this,g0,g1).call(this,e,r,t)}async load(...e){await Promise.all(e6(this,g2,g3).call(this,...e))}loadSync(...e){for(let t of e6(this,g2,g3).call(this,...e))if(void 0!==t)throw new aK(gI.invalidOperation,"Unexpected asyncronous module load. Consider using Container.load() instead.")}onActivation(e,t){e1(this,g_).add(t,{serviceId:e})}onDeactivation(e,t){e1(this,gO).add(t,{serviceId:e})}restore(){let e=e1(this,gM).pop();if(void 0===e)throw new aK(gI.invalidOperation,"No snapshot available to restore");e3(this,g_,e.activationService),e3(this,gP,e.bindingService),e3(this,gO,e.deactivationService),e6(this,g4,g5).call(this)}async rebind(e){return await this.unbind(e),this.bind(e)}rebindSync(e){return this.unbindSync(e),this.bind(e)}snapshot(){e1(this,gM).push({activationService:e1(this,g_).clone(),bindingService:e1(this,gP).clone(),deactivationService:e1(this,gO).clone()})}async unbind(e){await e6(this,mr,mn).call(this,e)}async unbindAll(){let e=[...e1(this,gP).getNonParentBoundServices()];for(let t of(await Promise.all(e.map(async e=>aI(e1(this,gC),e))),e))e1(this,g_).removeAllByServiceId(t),e1(this,gP).removeAllByServiceId(t),e1(this,gO).removeAllByServiceId(t);e1(this,gN).clearCache()}unbindSync(e){void 0!==e6(this,mr,mn).call(this,e)&&e6(this,me,mt).call(this,e)}async unload(...e){await Promise.all(e6(this,g8,g6).call(this,...e)),e6(this,ml,mu).call(this,e)}unloadSync(...e){for(let t of e6(this,g8,g6).call(this,...e))if(void 0!==t)throw new aK(gI.invalidOperation,"Unexpected asyncronous module unload. Consider using Container.unload() instead.");e6(this,ml,mu).call(this,e)}},g_=new WeakMap,gP=new WeakMap,gC=new WeakMap,gO=new WeakMap,gT=new WeakMap,gR=new WeakMap,gB=new WeakMap,gN=new WeakMap,gD=new WeakMap,gL=new WeakMap,gM=new WeakMap,gU=new WeakSet,gF=function(e){return{bind:t=>new a$(e=>{e6(this,g9,g7).call(this,e)},e,e1(this,gB).defaultScope,t),isBound:this.isBound.bind(this),onActivation:(t,r)=>{e1(this,g_).add(r,{moduleId:e,serviceId:t})},onDeactivation:(t,r)=>{e1(this,gO).add(r,{moduleId:e,serviceId:t})},rebind:this.rebind.bind(this),rebindSync:this.rebindSync.bind(this),unbind:this.unbind.bind(this),unbindSync:this.unbindSync.bind(this)}},gj=new WeakSet,gz=function(){return{getBindings:e=>e1(this,gP).get(e),getBindingsFromModule:e=>e1(this,gP).getByModuleId(e),getClassMetadata:oz,getDeactivations:e=>e1(this,gO).get(e)}},g$=new WeakSet,gH=function(e,t,r){return{isMultiple:e,name:null==r?void 0:r.name,optional:null==r?void 0:r.optional,serviceIdentifier:t,tag:null==r?void 0:r.tag}},gV=new WeakSet,gq=function(e,t,r){let n={autobindOptions:(null==r?void 0:r.autobind)??e1(this,gB).autobind?{scope:e1(this,gB).defaultScope}:void 0,getBindings:e1(this,gR),getClassMetadata:oz,rootConstraints:{isMultiple:t,serviceIdentifier:e},servicesBranch:[],setBinding:e1(this,gL)};return e6(this,gX,gY).call(this,n,r),n},gG=new WeakSet,gW=function(e,t,r){let n=e6(this,g$,gH).call(this,e,t,r),s=e1(this,gN).get(n);if(void 0!==s)return s;let o=function(e){try{let t=new Map;void 0!==e.rootConstraints.tag&&t.set(e.rootConstraints.tag.key,e.rootConstraints.tag.value);let r=new oX({elem:{name:e.rootConstraints.name,serviceIdentifier:e.rootConstraints.serviceIdentifier,tags:t},previous:void 0}),n=new oQ(r.last),s=oY(e,n),o=[],a={bindings:o,parent:void 0,serviceIdentifier:e.rootConstraints.serviceIdentifier};if(o.push(...o5(e,r,s,a)),!e.rootConstraints.isMultiple){o6(a,e.rootConstraints.isOptional??!1,n);let[t]=o;a.bindings=t}return{tree:{root:a}}}catch(t){if(t instanceof Error&&(t instanceof RangeError&&/stack space|call stack|too much recursion/i.test(t.message)||"InternalError"===t.name&&/too much recursion/.test(t.message))){let r=function(e){let t=[...e];return 0===t.length?"(No dependency trace)":t.map(ow).join(" -> ")}(function(e){let t=new Set;for(let r of e.servicesBranch){if(t.has(r))return[...t,r];t.add(r)}return[...t]}(e));throw new oj(pG.planning,`Circular dependency found: ${r}`,{cause:t})}throw t}}(e6(this,gV,gq).call(this,t,e,r));return e1(this,gN).set(n,o),o},gK=new WeakSet,gJ=function(){return{get:this.get.bind(this),getAll:this.getAll.bind(this),getAllAsync:this.getAllAsync.bind(this),getAsync:this.getAsync.bind(this)}},gZ=new WeakSet,gQ=function(e){var t;return av(t={context:e1(this,gD),getActivations:e1(this,gT),planResult:e,requestScopeCache:new Map},t.planResult.tree.root)},gX=new WeakSet,gY=function(e,t){void 0!==t&&(void 0!==t.name&&(e.rootConstraints.name=t.name),!0===t.optional&&(e.rootConstraints.isOptional=!0),void 0!==t.tag&&(e.rootConstraints.tag={key:t.tag.key,value:t.tag.value}))},g0=new WeakSet,g1=function(e,t,r){if(void 0===t)return!1;let n={getAncestor:()=>{},name:null==r?void 0:r.name,serviceIdentifier:e,tags:new Map};for(let e of((null==r?void 0:r.tag)!==void 0&&n.tags.set(r.tag.key,r.tag.value),t))if(e.isSatisfiedBy(n))return!0;return!1},g2=new WeakSet,g3=function(...e){return e.map(e=>e.load(e6(this,gU,gF).call(this,e.id)))},g8=new WeakSet,g6=function(...e){return e.map(e=>(function(e,t){let r=e.getBindingsFromModule(t);return ak(e,r)})(e1(this,gC),e.id))},g4=new WeakSet,g5=function(){e1(this,gN).clearCache(),e3(this,gT,e=>e1(this,g_).get(e)),e3(this,gR,e1(this,gP).get.bind(e1(this,gP))),e3(this,gD,e6(this,gK,gJ).call(this)),e3(this,gL,e6(this,g9,g7).bind(this))},g9=new WeakSet,g7=function(e){e1(this,gP).set(e),e1(this,gN).clearCache()},me=new WeakSet,mt=function(e){var t;let r;if(aO(e)){let n=e1(this,gP).getById(e.id),s=null==(t=function(e){if(void 0===e)return;let t=e.next();return!0!==t.done?t.value:void 0}(null==n?void 0:n[Symbol.iterator]()))?void 0:t.serviceIdentifier;r=void 0===s?"Unexpected asyncronous deactivation when unbinding binding identifier. Consider using Container.unbind() instead.":`Unexpected asyncronous deactivation when unbinding "${ow(s)}" binding. Consider using Container.unbind() instead.`}else r=`Unexpected asyncronous deactivation when unbinding "${ow(e)}" service. Consider using Container.unbind() instead.`;throw new aK(gI.invalidOperation,r)},mr=new WeakSet,mn=function(e){return aO(e)?e6(this,mi,ms).call(this,e):e6(this,mc,md).call(this,e)},mi=new WeakSet,ms=function(e){let t=e1(this,gP).getById(e.id),r=ak(e1(this,gC),t);if(void 0!==r)return r.then(()=>{e6(this,mo,ma).call(this,e)});e6(this,mo,ma).call(this,e)},mo=new WeakSet,ma=function(e){e1(this,gP).removeById(e.id),e1(this,gN).clearCache()},ml=new WeakSet,mu=function(e){for(let t of e)e1(this,g_).removeAllByModuleId(t.id),e1(this,gP).removeAllByModuleId(t.id),e1(this,gO).removeAllByModuleId(t.id);e1(this,gN).clearCache()},mc=new WeakSet,md=function(e){let t=aI(e1(this,gC),e);if(void 0!==t)return t.then(()=>{e6(this,mf,mh).call(this,e)});e6(this,mf,mh).call(this,e)},mf=new WeakSet,mh=function(e){e1(this,g_).removeAllByServiceId(e),e1(this,gP).removeAllByServiceId(e),e1(this,gO).removeAllByServiceId(e),e1(this,gN).clearCache()},mp),aQ=class{constructor(e,t,r,n,s){this.deviceModel=e,this.serviceUuid=t,this.writeUuid=r,this.writeCmdUuid=n,this.notifyUuid=s}},aX=class{constructor(e){eY(this,"id"),eY(this,"productName"),eY(this,"usbProductId"),eY(this,"bootloaderUsbProductId"),eY(this,"usbOnly"),eY(this,"memorySize"),eY(this,"blockSize"),eY(this,"masks"),eY(this,"bluetoothSpec"),this.id=e.id,this.productName=e.productName,this.usbProductId=e.usbProductId,this.bootloaderUsbProductId=e.bootloaderUsbProductId,this.usbOnly=e.usbOnly,this.memorySize=e.memorySize,this.blockSize=e.blockSize,this.masks=e.masks,this.bluetoothSpec=e.bluetoothSpec}getBlockSize(e){switch(this.id){case rm.NANO_S:return rg.lt(rg.coerce(e)??"","2.0.0")?4096:2048;case rm.NANO_X:return 4096;case rm.NANO_SP:case rm.STAX:case rm.FLEX:case rm.APEX:return 32}}};var aY=Object.defineProperty,a0=Object.getOwnPropertyDescriptor;let a1=class{getAllDeviceModels(){return Object.values(a1.deviceModelByIds)}getDeviceModel(e){return a1.deviceModelByIds[e.id]}filterDeviceModels(e){return this.getAllDeviceModels().filter(t=>Object.entries(e).every(([e,r])=>t[e]===r))}getBluetoothServicesInfos(){return Object.values(a1.deviceModelByIds).reduce((e,t)=>{let{bluetoothSpec:r}=t;return r?{...e,...r.reduce((e,r)=>({...e,[r.serviceUuid]:new aQ(t,r.serviceUuid,r.writeUuid,r.writeCmdUuid,r.notifyUuid)}),{})}:e},{})}getBluetoothServices(){return Object.values(a1.deviceModelByIds).map(e=>(e.bluetoothSpec||[]).map(e=>e.serviceUuid)).flat().filter(e=>!!e)}};eW=a1,eK="symbol"!=typeof(b="deviceModelByIds")?b+"":b,eJ={[rm.NANO_S]:new aX({id:rm.NANO_S,productName:"Ledger Nano S",usbProductId:16,bootloaderUsbProductId:1,usbOnly:!0,memorySize:327680,blockSize:4096,masks:[0x31100000]}),[rm.NANO_SP]:new aX({id:rm.NANO_SP,productName:"Ledger Nano S Plus",usbProductId:80,bootloaderUsbProductId:5,usbOnly:!0,memorySize:1569792,blockSize:32,masks:[0x33100000]}),[rm.NANO_X]:new aX({id:rm.NANO_X,productName:"Ledger Nano X",usbProductId:64,bootloaderUsbProductId:4,usbOnly:!1,memorySize:2097152,blockSize:4096,masks:[0x33000000],bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]}),[rm.STAX]:new aX({id:rm.STAX,productName:"Ledger Stax",usbProductId:96,bootloaderUsbProductId:6,usbOnly:!1,memorySize:1569792,blockSize:32,masks:[0x33200000],bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]}),[rm.FLEX]:new aX({id:rm.FLEX,productName:"Ledger Flex",usbProductId:112,bootloaderUsbProductId:7,usbOnly:!1,memorySize:1569792,blockSize:32,masks:[0x33300000],bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]}),[rm.APEX]:new aX({id:rm.APEX,productName:"Ledger Apex",usbProductId:128,bootloaderUsbProductId:8,usbOnly:!1,memorySize:1569792,blockSize:32,masks:[0x33400000],bluetoothSpec:[{serviceUuid:"13d63400-2c97-8004-0000-4c6564676572",notifyUuid:"13d63400-2c97-8004-0001-4c6564676572",writeUuid:"13d63400-2c97-8004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-8004-0003-4c6564676572"}]})},eK in eW?aY(eW,eK,{enumerable:!0,configurable:!0,writable:!0,value:eJ}):eW[eK]=eJ,a1=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?a0(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&aY(t,r,o),o})([oZ()],a1);let a2=class{constructor({statusCode:e,data:t}){eY(this,"statusCode"),eY(this,"data"),this.statusCode=e,this.data=t}},a3=[];for(let e=0;e<256;++e)a3.push((e+256).toString(16).slice(1));let a8=new Uint8Array(16),a6={randomUUID:"u">typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function a4(e,t,r){if(a6.randomUUID&&!t&&!e)return a6.randomUUID();let s=(e=e||{}).random||(e.rng||function(){if(!n){if(typeof crypto>"u"||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(a8)})();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return function(e,t=0){return(a3[e[t+0]]+a3[e[t+1]]+a3[e[t+2]]+a3[e[t+3]]+"-"+a3[e[t+4]]+a3[e[t+5]]+"-"+a3[e[t+6]]+a3[e[t+7]]+"-"+a3[e[t+8]]+a3[e[t+9]]+"-"+a3[e[t+10]]+a3[e[t+11]]+a3[e[t+12]]+a3[e[t+13]]+a3[e[t+14]]+a3[e[t+15]]).toLowerCase()}(s)}let a5={getLastBytesFrom:(e,t)=>e.slice(-t),getFirstBytesFrom:(e,t)=>e.slice(0,t),bytesToNumber:e=>e.reduce((t,r,n)=>t+r*Math.pow(256,e.length-1-n),0),numberToByteArray:(e,t)=>new Uint8Array(t).map((r,n)=>e>>8*(t-1-n)&255)},a9=class{constructor(){eY(this,"_tag","FramerOverflowError"),eY(this,"originalError"),this.originalError=Error("Frame header length is greater than frame size")}},a7=class{constructor(){eY(this,"_tag","FramerApduError"),eY(this,"originalError"),this.originalError=Error("Frame offset is greater than apdu length")}},le=class{constructor(e){eY(this,"_tag","ReceiverApduError"),eY(this,"originalError"),this.originalError=Error(e??"Unable to parse apdu")}},lt=class{constructor(e){eY(this,"_tag","DeviceSessionNotFound"),eY(this,"originalError"),this.originalError=e??Error("Device session not found")}},lr=class{constructor({header:e,data:t}){eY(this,"_header"),eY(this,"_data"),this._header=e,this._data=t}toString(){return JSON.stringify({header:this._header.toString(),data:tr(this._data)},null,2)}getRawData(){let e=this._header.getRawData(),t=new Uint8Array(e.length+this._data.length);return t.set(e,0),t.set(this._data,e.length),t}getHeader(){return this._header}getData(){return this._data}},ln=class{constructor({uuid:e,dataSize:t,index:r,headTag:n,length:s,channel:o}){eY(this,"_uuid"),eY(this,"_channel"),eY(this,"_headTag"),eY(this,"_index"),eY(this,"_length"),eY(this,"_dataLength"),this._uuid=e,this._dataLength=t,this._index=r,this._headTag=n,this._length=s,this._channel=o}getDataLength(){return this._dataLength.map(e=>a5.bytesToNumber(e))}setDataSize(e){return this._dataLength=e,this}getLength(){return this._length}toString(){var e,t;return JSON.stringify({uuid:this._uuid.toString(),dataSize:null==(e=this._dataLength.extract())?void 0:e.toString(),index:this._index.toString(),headTag:this._headTag.toString(),length:this._length.toString(),channel:null==(t=this._channel.extract())?void 0:t.toString()})}getRawData(){return new Uint8Array([...this._channel.caseOf({Just:e=>[...e],Nothing:()=>[]}),...this._headTag,...this._index,...this._dataLength.caseOf({Just:e=>[...e],Nothing:()=>[]})])}},li={LoggerPublisherServiceFactory:Symbol.for("LoggerPublisherServiceFactory")};var ls=Object.defineProperty,lo=Object.getOwnPropertyDescriptor;let la=class{constructor({channel:e=rC.zero()},t){eY(this,"_channel"),eY(this,"_logger"),eY(this,"_pendingFrames"),this._channel=e,this._logger=t("ApduReceiverService"),this._pendingFrames=[]}handleFrame(e){return this.getFrameFromBytes(e).map(e=>{if(this._pendingFrames.push(e),!this._pendingFrames[0])return rB;let t=this._pendingFrames[0].getHeader().getDataLength();return this.getCompleteFrame(t)})}getCompleteFrame(e){return e.chain(e=>{if(!this.isComplete(e))return this._logger.debug("frame is not complete, waiting for more"),rB;let t=a5.getFirstBytesFrom(this.concatFrames(this._pendingFrames),e),r=a5.getFirstBytesFrom(t,t.length-2),n=a5.getLastBytesFrom(t,2);return this._pendingFrames=[],rR(new a2({data:r,statusCode:n}))})}getFrameFromBytes(e){let t=this._channel.caseOf({Just:()=>2,Nothing:()=>0}),r=e.slice(t,t+1),n=e.slice(t+1,t+1+2),s=0===n.reduce((e,t)=>e+t,0);if(!s&&0===this._pendingFrames.length)return rM(new le);let o=t+1+2,a=2*!!s;if(e.length<t+1+2+a)return rM(new le("Unable to parse header from apdu"));let l=s?rR(e.slice(o,o+a)):rB,u=e.slice(o+a);return rU(new lr({header:new ln({uuid:a4(),channel:this._channel,dataSize:l,headTag:r,index:n,length:t+1+2+a}),data:u}))}isComplete(e){return this._pendingFrames.reduce((e,t)=>e+t.getData().length,0)>=e}concatFrames(e){return e.reduce((e,t)=>Uint8Array.from([...e,...t.getData()]),new Uint8Array(0))}};la=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?lo(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&ls(t,r,o),o})([oZ(),(v=oW(li.LoggerPublisherServiceFactory),(e,t)=>v(e,t,1))],la);var ll=Object.defineProperty,lu=Object.getOwnPropertyDescriptor;let lc=class{constructor({frameSize:e,channel:t=rC.zero(),padding:r=!1},n){eY(this,"_frameSize"),eY(this,"_channel"),eY(this,"_padding"),eY(this,"_logger"),this._frameSize=e,this._channel=t,this._padding=r,this._logger=n("DefaultApduSenderService")}getFrames(e){let t=[],r=0,n=this.getFrameAtIndex(e,r);for(;n.isRight();)t.push(n.extract()),r+=1,n=this.getFrameAtIndex(e,r).mapLeft(e=>(e instanceof a9||this._logger.error("Error while parsing frame",{data:{error:e}}),e));return t}getFrameAtIndex(e,t){let r=this.getFrameHeaderFrom(t,e.length),n=0===t?0:t*this._frameSize-this.getHeaderSizeSumFrom(t);if(n>=e.length)return rM(new a9);if(r.getLength()>this._frameSize)return rM(new a7);let s=this._frameSize-r.getLength(),o=e.slice(n,n+this._frameSize-r.getLength()),a=this._padding?new Uint8Array(s).fill(0):new Uint8Array(o.length<s?o.length:s);return a.set(o,0),rU(new lr({header:r,data:a}))}getFrameHeaderFrom(e,t){let r=new ln({uuid:a4(),channel:this._channel.map(e=>a5.getLastBytesFrom(e,2)),headTag:new Uint8Array([5]),index:a5.numberToByteArray(e,2),length:this.getFrameHeaderSizeFromIndex(e),dataSize:rC.zero()});return 0===e&&r.setDataSize(rC.of(a5.numberToByteArray(t,2))),r}getHeaderSizeSumFrom(e){let t=this.getFrameHeaderSizeFromIndex(0),r=1;for(;r<e;)t+=this.getFrameHeaderSizeFromIndex(r),r+=1;return t}getFrameHeaderSizeFromIndex(e){return this._channel.caseOf({Just:()=>2,Nothing:()=>0})+2+1+2*(0===e)}};lc=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?lu(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&ll(t,r,o),o})([oZ(),(x=oW(li.LoggerPublisherServiceFactory),(e,t)=>x(e,t,1))],lc);let ld={SendCommandUseCase:Symbol.for("SendCommandUseCase")},lf={LocalConfigDataSource:Symbol.for("LocalConfigDataSource"),RemoteConfigDataSource:Symbol.for("RemoteConfigDataSource"),ConfigService:Symbol.for("ConfigService"),GetDmkVersionUseCase:Symbol.for("GetDmkVersionUseCase")},lh={ApduSenderServiceFactory:Symbol.for("ApduSenderServiceFactory"),ApduReceiverServiceFactory:Symbol.for("ApduReceiverServiceFactory"),DeviceSessionService:Symbol.for("DeviceSessionService"),GetDeviceSessionStateUseCase:Symbol.for("GetDeviceSessionStateUseCase"),DisableDeviceSessionRefresherUseCase:Symbol.for("DisableDeviceSessionRefresherUseCase"),CloseSessionsUseCase:Symbol.for("CloseSessionsUseCase")},lp={StartDiscoveringUseCase:Symbol.for("StartDiscoveringUseCase"),StopDiscoveringUseCase:Symbol.for("StopDiscoveringUseCase"),ConnectUseCase:Symbol.for("ConnectUseCase"),DisconnectUseCase:Symbol.for("DisconnectUseCase"),GetConnectedDeviceUseCase:Symbol.for("GetConnectedDeviceUseCase"),ListenToAvailableDevicesUseCase:Symbol.for("ListenToAvailableDevicesUseCase"),ListenToConnectedDeviceUseCase:Symbol.for("ListenToConnectedDeviceUseCase"),ListConnectedDevicesUseCase:Symbol.for("ListConnectedDevicesUseCase"),ReconnectUseCase:Symbol.for("ReconnectUseCase")},lg={ManagerApiService:Symbol.for("ManagerApiService"),ManagerApiDataSource:Symbol.for("ManagerApiDataSource"),DmkConfig:Symbol.for("ManagerApiDmkConfig"),SetProviderUseCase:Symbol.for("SetProviderUseCase")},lm={SendApduUseCase:Symbol.for("SendApduUseCase")},ly={DmkConfig:Symbol.for("TransportDmkConfig"),TransportService:Symbol.for("TransportService"),TransportsInput:Symbol.for("TransportsInput")};var lb=Object.defineProperty,lv=Object.getOwnPropertyDescriptor,lx=(e,t)=>(r,n)=>t(r,n,e);let lw=class{constructor(e,t){eY(this,"_sessionService"),eY(this,"_logger"),this._sessionService=e,this._logger=t("SendCommandUseCase")}async execute({sessionId:e,command:t,abortTimeout:r}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:async e=>await e.sendCommand(t,r),Left:e=>{throw this._logger.error("Error getting session",{data:{error:e}}),e}})}};lw=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?lv(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&lb(t,r,o),o})([oZ(),lx(0,oW(lh.DeviceSessionService)),lx(1,oW(li.LoggerPublisherServiceFactory))],lw);var lE=Object.defineProperty,lA=Object.getOwnPropertyDescriptor;let lS=class{constructor(){eY(this,"execute",vi.fn(()=>"stub"))}};lS=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?lA(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&lE(t,r,o),o})([oZ()],lS);let lk=({stub:e=!1}={})=>new aP(({bind:t,rebindSync:r})=>{t(ld.SendCommandUseCase).to(lw),e&&r(ld.SendCommandUseCase).to(lS)});var lI=Object.defineProperty,l_=Object.getOwnPropertyDescriptor,lP=(e,t)=>(r,n)=>t(r,n,e);let lC=class{constructor(e,t){eY(this,"_sessionService"),eY(this,"_logger"),this._sessionService=e,this._logger=t("ExecuteDeviceActionUseCase")}execute({sessionId:e,deviceAction:t}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:e=>e.executeDeviceAction(t),Left:e=>{throw this._logger.error("Error getting session",{data:{error:e}}),e}})}};lC=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?l_(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&lI(t,r,o),o})([oZ(),lP(0,oW(lh.DeviceSessionService)),lP(1,oW(li.LoggerPublisherServiceFactory))],lC);let lO={ExecuteDeviceActionUseCase:Symbol.for("ExecuteDeviceActionUseCase")},lT=({stub:e=!1}={})=>new aP(({bind:t,rebindSync:r})=>{t(lO.ExecuteDeviceActionUseCase).to(lC),e&&r(lO.ExecuteDeviceActionUseCase).to(lS)}),lR=class{constructor(e){eY(this,"_tag","ApiCallError"),eY(this,"originalError"),this.err=e,this.originalError=e}},lB=class{constructor(e){eY(this,"_tag","ParseResponseError"),eY(this,"originalError"),this.err=e,this.originalError=e}},lN=class{constructor(e){eY(this,"_tag","JSONParseError"),eY(this,"originalError"),this.err=e,this.originalError=e}},lD=class{constructor(e){eY(this,"_tag","ReadFileError"),eY(this,"originalError"),this.err=e,this.originalError=e}};var lL=Object.defineProperty,lM=Object.getOwnPropertyDescriptor;let lU={name:"@ledgerhq/device-management-kit",version:"0.11.2"},lF=()=>JSON.stringify(lU),lj=class{getConfig(){return rN.encase(()=>lF()).mapLeft(e=>new lD(e)).chain(e=>rN.encase(()=>{let t=JSON.parse(e);if("object"==typeof t&&null!==t&&"version"in t&&"name"in t&&"string"==typeof t.version&&"string"==typeof t.name)return t;throw Error("Invalid config file")}).mapLeft(e=>new lN(e)))}};lj=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?lM(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&lL(t,r,o),o})([oZ()],lj);var lz=Object.defineProperty,l$=Object.getOwnPropertyDescriptor;let lH=class{getConfig(){return rN.of({name:"DeviceSDK",version:"0.0.0-stub.1"})}};lH=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?l$(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&lz(t,r,o),o})([oZ()],lH);var lV=Object.defineProperty,lq=Object.getOwnPropertyDescriptor;let lG=class{async getConfig(){let e=await this._callApi();if(e.isLeft())return rM(new lR(e.extract()));if(!e.extract().ok)return rM(new lR(Error("response not ok")));let t=await e.extract().json();return t.isLeft()?rM(new lN):t.chain(e=>this._parseResponse(e)).map(e=>e)}_parseResponse(e){let{name:t,version:r}=e;return t&&r?rN.of({name:t,version:r}):rM(new lB)}_callApi(){return new Promise(e=>{e(rN.of({ok:!0,json:async()=>new Promise(e=>{e(rN.of({name:"DeviceSDK",version:"0.0.0-fake.1",yolo:"yolo"}))})}))})}};lG=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?lq(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&lV(t,r,o),o})([oZ()],lG);var lW=Object.defineProperty,lK=Object.getOwnPropertyDescriptor;let lJ=class{async getConfig(){return new Promise(e=>e(rN.of({name:"DeviceSDK",version:"0.0.0-fake.2"})))}};lJ=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?lK(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&lW(t,r,o),o})([oZ()],lJ);var lZ=Object.defineProperty,lQ=Object.getOwnPropertyDescriptor,lX=(e,t)=>(r,n)=>t(r,n,e);let lY=class{constructor(e,t,r){eY(this,"_local"),eY(this,"_remote"),eY(this,"_logger"),this._local=e,this._remote=t,this._logger=r("config")}async getDmkConfig(){let e=this._local.getConfig().ifLeft(e=>{this._logger.error("Local config not available",{data:{error:e}})});if(e.isRight()){let t=e.extract();return this._logger.info("Local config available",{data:{config:t}}),t}return this._remote.getConfig().then(e=>e.mapLeft(e=>(this._logger.error("Local config available",{data:{error:e}}),{name:"DeadDmk",version:"0.0.0-dead.1"})).extract())}};lY=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?lQ(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&lZ(t,r,o),o})([oZ(),lX(0,oW(lf.LocalConfigDataSource)),lX(1,oW(lf.RemoteConfigDataSource)),lX(2,oW(li.LoggerPublisherServiceFactory))],lY);var l0=Object.defineProperty,l1=Object.getOwnPropertyDescriptor;let l2=class{constructor(e){eY(this,"_configService"),this._configService=e}async getDmkVersion(){return(await this._configService.getDmkConfig()).version}};l2=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?l1(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&l0(t,r,o),o})([oZ(),(w=oW(lf.ConfigService),(e,t)=>w(e,t,0))],l2);let l3=({stub:e})=>new aP(({bind:t,rebindSync:r})=>{t(lf.LocalConfigDataSource).to(lj),t(lf.RemoteConfigDataSource).to(lG),t(lf.GetDmkVersionUseCase).to(l2),t(lf.ConfigService).to(lY),e&&(r(lf.LocalConfigDataSource).to(lH),r(lf.RemoteConfigDataSource).to(lJ))}),l8={DeviceModelDataSource:Symbol.for("DeviceModelDataSource")},l6=({stub:e})=>new aP(({bind:e})=>{e(l8.DeviceModelDataSource).to(a1)});var l4=Object.defineProperty,l5=Object.getOwnPropertyDescriptor,l9=(e,t)=>(r,n)=>t(r,n,e);let l7=class{constructor(e,t){eY(this,"_logger"),this._sessionService=e,this._logger=t("DisableDeviceSessionRefresherUseCase")}execute({sessionId:e,blockerId:t}){return this._sessionService.getDeviceSessionById(e).caseOf({Left:e=>{throw this._logger.error("Error getting device session",{data:{error:e}}),e},Right:e=>e.disableRefresher(t)})}};l7=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?l5(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&l4(t,r,o),o})([oZ(),l9(0,oW(lh.DeviceSessionService)),l9(1,oW(li.LoggerPublisherServiceFactory))],l7);var ue=Object.defineProperty,ut=Object.getOwnPropertyDescriptor;let ur=class{constructor(e){eY(this,"_sessions"),eY(this,"_sessionsSubject"),eY(this,"_logger"),this._sessions=[],this._sessionsSubject=new iJ,this._logger=e("DeviceSessionService")}get sessionsObs(){return this._sessionsSubject.asObservable()}addDeviceSession(e){return this._sessions.find(t=>t.id===e.id)?this._logger.warn("DeviceSession already exists",{data:{deviceSession:e}}):(this._sessions.push(e),this._sessionsSubject.next(e),this._logger.info("DeviceSession added",{data:{sessionId:e.id}})),this}removeDeviceSession(e){let t=this._sessions.find(t=>t.id===e);return t?(t.close(),this._sessions=this._sessions.filter(t=>t.id!==e),this._logger.info("DeviceSession removed",{data:{sessionId:e}})):this._logger.warn("DeviceSession not found",{data:{sessionId:e}}),this}getDeviceSessionById(e){return rC.fromNullable(this._sessions.find(t=>t.id===e)).toEither(new lt)}getDeviceSessionsByDeviceId(e){return rC.fromPredicate(({length:e})=>e>0,this._sessions.filter(t=>t.connectedDevice.id===e)).toEither(new lt)}getDeviceSessions(){return this._sessions}};ur=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?ut(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&ue(t,r,o),o})([oZ(),(E=oW(li.LoggerPublisherServiceFactory),(e,t)=>E(e,t,0))],ur);var un=Object.defineProperty,ui=Object.getOwnPropertyDescriptor,us=(e,t)=>(r,n)=>t(r,n,e);let uo=class{constructor(e,t){eY(this,"_sessionService"),eY(this,"_transportService"),this._sessionService=e,this._transportService=t}execute(){for(let e of this._sessionService.getDeviceSessions())this._transportService.closeConnection(e.connectedDevice),this._sessionService.removeDeviceSession(e.id)}};uo=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?ui(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&un(t,r,o),o})([oZ(),us(0,oW(lh.DeviceSessionService)),us(1,oW(ly.TransportService))],uo);var ua=Object.defineProperty,ul=Object.getOwnPropertyDescriptor,uu=(e,t)=>(r,n)=>t(r,n,e);let uc=class{constructor(e,t){eY(this,"_sessionService"),eY(this,"_logger"),this._sessionService=e,this._logger=t("GetDeviceSessionStateUseCase")}execute({sessionId:e}){return this._sessionService.getDeviceSessionById(e).caseOf({Left:e=>{throw this._logger.error("Error getting session device",{data:{error:e}}),e},Right:e=>e.state})}};uc=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?ul(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&ua(t,r,o),o})([oZ(),uu(0,oW(lh.DeviceSessionService)),uu(1,oW(li.LoggerPublisherServiceFactory))],uc);let ud=({stub:e}={stub:!1})=>new aP(({bind:t,rebindSync:r})=>{t(lh.ApduSenderServiceFactory).toFactory(e=>{let t=e.get(li.LoggerPublisherServiceFactory);return e=>new lc(e,t)}),t(lh.ApduReceiverServiceFactory).toFactory(e=>{let t=e.get(li.LoggerPublisherServiceFactory);return (e={})=>new la(e,t)}),t(lh.DeviceSessionService).to(ur).inSingletonScope(),t(lh.GetDeviceSessionStateUseCase).to(uc),t(lh.CloseSessionsUseCase).to(uo),t(lh.DisableDeviceSessionRefresherUseCase).to(l7),e&&(r(lh.GetDeviceSessionStateUseCase).to(lS),r(lh.DisableDeviceSessionRefresherUseCase).to(lS))}),uf={isRefresherDisabled:!1,pollingInterval:1e3},uh=class{constructor(){eY(this,"_queue",[]),eY(this,"_locked",!1)}async lock(){return new Promise(e=>{let t=()=>{if(this._locked=!1,this._queue.length>0){let e=this._queue.shift();this._locked=!0,e()}};this._locked?this._queue.push(()=>e(t)):(this._locked=!0,e(t))})}},up=class{constructor(e,t){eY(this,"_refresherBlockers",new Set),eY(this,"_logger"),this._refresher=t,this._logger=e("refresher-service")}disableRefresher(e){let t=`${e}-${a4()}`;this.addRefresherBlocker(t),this._logger.debug("Refresher disabled",{data:{blockerId:t,blockers:Array.from(this._refresherBlockers)}});let r=!1;return()=>{r||(r=!0,this.removeRefresherBlocker(t),this._logger.debug("Refresher re-enabled",{data:{blockerId:t,blockers:Array.from(this._refresherBlockers)}}))}}addRefresherBlocker(e){let t=this._refresherBlockers.size;this._refresherBlockers.add(e),0===t&&this._refresher.stop()}removeRefresherBlocker(e){let t=this._refresherBlockers.size;this._refresherBlockers.delete(e),t>0&&0===this._refresherBlockers.size&&this._refresher.start()}};var ug=((A=ug||{}).NEW_STATE="NEW_STATE",A.REFRESH_NEEDED="REFRESH_NEEDED",A.COMMAND_SUCCEEDED="COMMAND_SUCCEEDED",A.DEVICE_STATE_UPDATE_BUSY="DEVICE_STATE_UPDATE_BUSY",A.DEVICE_STATE_UPDATE_LOCKED="DEVICE_STATE_UPDATE_LOCKED",A.DEVICE_STATE_UPDATE_CONNECTED="DEVICE_STATE_UPDATE_CONNECTED",A);let um=class{constructor(){eY(this,"_eventEmitter",new iq)}listen(){return this._eventEmitter.asObservable()}dispatch(e){this._eventEmitter.next(e)}},uy=class{constructor(e,t,r,n){eY(this,"_sendCommandFunction"),eY(this,"_subscription"),eY(this,"_logger"),eY(this,"mapEventAction",async e=>e.eventName===ug.REFRESH_NEEDED?await this.ping():null),this.connectedDevice=t,this._sessionEventDispatcher=r,this._sendCommandFunction=n,this._logger=e("device-pinger"),this._subscription=this._sessionEventDispatcher.listen().subscribe(async e=>await this.mapEventAction(e))}async ping(){try{return await this.mapDevicePingAction(this.connectedDevice.deviceModel.id)}catch(e){throw this._logger.error("Error while pinging device",{data:{error:e}}),e}}async mapDevicePingAction(e){if(e===rm.NANO_S){let e=async()=>{let e=await this._sendCommandFunction(new tS,800);return this._sendCommandFunction(new rv,800),e},t=new Promise(e=>{setTimeout(()=>e(null),2100)}),r=await Promise.race([e(),t]);return r?this._sessionEventDispatcher.dispatch({eventName:ug.COMMAND_SUCCEEDED,eventData:r}):this._sessionEventDispatcher.dispatch({eventName:ug.DEVICE_STATE_UPDATE_LOCKED}),r}{let e=await this._sendCommandFunction(new tS,800);return this._sessionEventDispatcher.dispatch({eventName:ug.COMMAND_SUCCEEDED,eventData:e}),e}}unsubscribe(){this._subscription.unsubscribe()}},ub=class{constructor(e,t,r,n){eY(this,"_refresherSubscription"),eY(this,"_refresherOptions"),eY(this,"_logger"),eY(this,"_connectedDeviceID"),eY(this,"getValidPollingInterval",(e,t)=>{let{pollingInterval:r}=e;return this._connectedDeviceID!==rm.NANO_S?void 0!==r&&r<1e3?(t.warn(`Polling interval of ${r} is too low, setting to minimum as 1000`),1e3):r??1e3:void 0!==r&&r<2e3?(t.warn(`Polling interval of ${r} is too low, setting to minimum as 2000`),2e3):r??2e3}),this._sessionEventDispatcher=r,this._refresherOptions=t,this._logger=e("device-session-refresher"),this._connectedDeviceID=n.deviceModel.id}startRefresher(){if(this._refresherOptions.isRefresherDisabled)return;let e=2*this.getValidPollingInterval(this._refresherOptions,this._logger);this._refresherSubscription=sm(0,e).subscribe(()=>{this._sessionEventDispatcher.dispatch({eventName:ug.REFRESH_NEEDED})})}stopRefresher(){this._refresherSubscription&&(this._refresherSubscription.unsubscribe(),this._refresherSubscription=void 0,this._logger.info("Refresher stopped."))}restartRefresher(){this.stopRefresher(),this.startRefresher(),this._logger.info("Refresher restarted.")}destroy(){this.stopRefresher()}},uv=class{constructor(e,t,r,n,s){eY(this,"_subscription"),eY(this,"_logger"),eY(this,"mapEventAction",e=>{switch(e.eventName){case ug.COMMAND_SUCCEEDED:return this._updateDeviceState(e.eventData);case ug.DEVICE_STATE_UPDATE_BUSY:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:rI.BUSY});case ug.DEVICE_STATE_UPDATE_LOCKED:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:rI.LOCKED});case ug.DEVICE_STATE_UPDATE_CONNECTED:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:rI.CONNECTED});default:return null}}),this._sessionEventDispatcher=t,this._connectedDevice=r,this._deviceState=n,this.setDeviceSessionState=s,this._subscription=this._sessionEventDispatcher.listen().subscribe(e=>this.mapEventAction(e)),this._logger=e("device-session-state-handler")}_updateDeviceState(e){let t=this._parseDeviceStatus(e);if(t){let{sessionStateType:e,deviceStatus:r,currentApp:n}=t,s=this._deviceState.getValue();s.sessionStateType===sx.Connected?this.setDeviceSessionState({sessionStateType:e,deviceStatus:r,deviceModelId:this._connectedDevice.deviceModel.id,currentApp:n,installedApps:[],isSecureConnectionAllowed:!1}):this.setDeviceSessionState({...s,sessionStateType:e,deviceStatus:r,deviceModelId:this._connectedDevice.deviceModel.id,currentApp:n})}}_parseDeviceStatus(e){return tg(e)?{sessionStateType:sx.ReadyWithoutSecureChannel,deviceStatus:rI.CONNECTED,currentApp:{name:e.data.name,version:e.data.version}}:(this._logger.debug("Error while parsing APDU response",{data:{parsedResponse:e}}),null)}unsubscribe(){this._subscription.unsubscribe()}};class ux{constructor({connectedDevice:e,id:t=a4()},r,n,s,o){eY(this,"_id"),eY(this,"_connectedDevice"),eY(this,"_deviceState"),eY(this,"_managerApiService"),eY(this,"_secureChannelService"),eY(this,"_logger"),eY(this,"_refresherOptions"),eY(this,"_pinger"),eY(this,"_deviceSessionRefresher"),eY(this,"_refresherService"),eY(this,"_commandMutex",new uh),eY(this,"_sessionEventDispatcher",new um),this._id=t,this._connectedDevice=e,this._logger=r("device-session"),this._managerApiService=n,this._secureChannelService=s,this._refresherOptions={...uf,...o},this._deviceState=new iW({sessionStateType:sx.Connected,deviceStatus:rI.CONNECTED,deviceModelId:this._connectedDevice.deviceModel.id}),this._pinger=new uy(r,e,this._sessionEventDispatcher,(e,t)=>this.sendCommand(e,t)),this._deviceSessionRefresher=new ub(r,this._refresherOptions,this._sessionEventDispatcher,this._connectedDevice),new uv(r,this._sessionEventDispatcher,this._connectedDevice,this._deviceState,e=>this.setDeviceSessionState(e)),this._refresherService=new up(r,{start:()=>this._deviceSessionRefresher.restartRefresher(),stop:()=>this._deviceSessionRefresher.stopRefresher()})}async initialiseSession(){try{await this._pinger.ping()}catch(e){throw this._logger.error("Error while initialising session",{data:{error:e}}),e}finally{this._refresherOptions.isRefresherDisabled||this._deviceSessionRefresher.startRefresher()}}get id(){return this._id}get connectedDevice(){return this._connectedDevice}get state(){return this._deviceState.asObservable()}getDeviceSessionState(){return this._deviceState.getValue()}setDeviceSessionState(e){this._deviceState.next(e)}async sendApdu(e,t={isPolling:!1,triggersDisconnection:!1,abortTimeout:void 0}){let r=await this._commandMutex.lock();try{this._sessionEventDispatcher.dispatch({eventName:ug.DEVICE_STATE_UPDATE_BUSY}),this._logger.debug(`[exchange] => ${tr(e,!1)}`);let r=await this._connectedDevice.sendApdu(e,t.triggersDisconnection,t.abortTimeout);return r.ifRight(e=>{this._logger.debug(`[exchange] <= ${tr(e.data,!1)}${tr(e.statusCode,!1)}`),tm.isLockedDeviceResponse(e)?this._sessionEventDispatcher.dispatch({eventName:ug.DEVICE_STATE_UPDATE_LOCKED}):this._sessionEventDispatcher.dispatch({eventName:ug.DEVICE_STATE_UPDATE_CONNECTED})}).ifLeft(()=>{this._sessionEventDispatcher.dispatch({eventName:ug.DEVICE_STATE_UPDATE_CONNECTED})}),r}finally{r()}}async sendCommand(e,t){this._logger.debug(`[sendCommand] ${e.name}`);let r=e.getApdu();return(await this.sendApdu(r.getRawApdu(),{isPolling:!1,triggersDisconnection:e.triggersDisconnection??!1,abortTimeout:t})).caseOf({Left:e=>{throw this._logger.error("[sendCommand] error",{data:{err:e}}),e},Right:t=>{let r=e.parseResponse(t,this._connectedDevice.deviceModel.id);return this._logger.debug("[sendCommand] result",{data:{result:r}}),r}})}executeDeviceAction(e){let{observable:t,cancel:r}=e._execute({sendApdu:async e=>this.sendApdu(e),sendCommand:async(e,t)=>this.sendCommand(e,t),getDeviceModel:()=>this._connectedDevice.deviceModel,getDeviceSessionState:()=>this._deviceState.getValue(),getDeviceSessionStateObservable:()=>this.state,setDeviceSessionState:e=>(this.setDeviceSessionState(e),this._deviceState.getValue()),disableRefresher:e=>this._refresherService.disableRefresher(e),getManagerApiService:()=>this._managerApiService,getSecureChannelService:()=>this._secureChannelService});return{observable:t,cancel:r}}close(){this._updateDeviceStatus(rI.NOT_CONNECTED),this._deviceState.complete(),this._deviceSessionRefresher.stopRefresher()}disableRefresher(e){return this._refresherService.disableRefresher(e)}_updateDeviceStatus(e){let t=this._deviceState.getValue();this._deviceState.next({...t,deviceStatus:e})}}let uw={SecureChannelService:Symbol.for("SecureChannelService"),SecureChannelDataSource:Symbol.for("SecureChannelDataSource"),DmkConfig:Symbol.for("SecureChannelDmkConfig")};var uE=Object.defineProperty,uA=Object.getOwnPropertyDescriptor,uS=(e,t)=>(r,n)=>t(r,n,e);let uk=class{constructor(e,t,r,n,s){eY(this,"_transportService"),eY(this,"_sessionService"),eY(this,"_loggerFactory"),eY(this,"_managerApi"),eY(this,"_secureChannel"),eY(this,"_logger"),this._sessionService=t,this._transportService=e,this._loggerFactory=r,this._logger=r("ConnectUseCase"),this._managerApi=n,this._secureChannel=s}handleDeviceDisconnect(e){this._sessionService.getDeviceSessionsByDeviceId(e).ifRight(t=>{t.forEach(t=>{this._sessionService.removeDeviceSession(t.id),this._logger.info("Session removed",{data:{deviceId:e,sessionId:t.id}})})})}async execute({device:e,sessionRefresherOptions:t}){let r=this._transportService.getTransport(e.transport),n="sessionId"in e?e.sessionId:void 0;return rz.liftEither(r.toEither(new sP(Error("Unknown transport")))).chain(async t=>t.connect({deviceId:e.id,onDisconnect:e=>this.handleDeviceDisconnect(e)})).ifLeft(t=>{this._logger.error("Error connecting to device",{data:{deviceId:e.id,error:t}})}).map(async e=>{let r=new ux({connectedDevice:e,id:n},this._loggerFactory,this._managerApi,this._secureChannel,t);return this._sessionService.addDeviceSession(r),await r.initialiseSession(),r.id}).caseOf({Left:e=>{throw e},Right:e=>e})}};uk=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?uA(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&uE(t,r,o),o})([oZ(),uS(0,oW(ly.TransportService)),uS(1,oW(lh.DeviceSessionService)),uS(2,oW(li.LoggerPublisherServiceFactory)),uS(3,oW(lg.ManagerApiService)),uS(4,oW(uw.SecureChannelService))],uk);var uI=Object.defineProperty,u_=Object.getOwnPropertyDescriptor,uP=(e,t)=>(r,n)=>t(r,n,e);let uC=class{constructor(e,t,r){eY(this,"_transportService"),eY(this,"_sessionService"),eY(this,"_logger"),this._sessionService=t,this._transportService=e,this._logger=r("DisconnectUseCase")}async execute({sessionId:e}){return this._logger.debug("Disconnecting from device",{data:{test:this._sessionService.getDeviceSessions().map(e=>e.id)}}),rz(async({liftEither:t})=>{let r=await t(this._sessionService.getDeviceSessionById(e).ifLeft(t=>{this._logger.error("Device session not found",{data:{sessionId:e,error:t}})})),n=r.connectedDevice.transport,s=await t(this._transportService.getTransport(n).toEither(new sP(Error("Unknown transport"))));r.close(),this._sessionService.removeDeviceSession(e),await s.disconnect({connectedDevice:r.connectedDevice})}).caseOf({Left:e=>{throw this._logger.error("Error disconnecting from device",{data:{error:e}}),e},Right:()=>{}})}};uC=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?u_(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&uI(t,r,o),o})([oZ(),uP(0,oW(ly.TransportService)),uP(1,oW(lh.DeviceSessionService)),uP(2,oW(li.LoggerPublisherServiceFactory))],uC);let uO=class{constructor({transportConnectedDevice:{id:e,deviceModel:{id:t,productName:r},type:n,transport:s,name:o},sessionId:a}){eY(this,"id"),eY(this,"sessionId"),eY(this,"modelId"),eY(this,"name"),eY(this,"type"),eY(this,"transport"),this.id=e,this.sessionId=a,this.modelId=t,this.name=o??r,this.type=n,this.transport=s}};var uT=Object.defineProperty,uR=Object.getOwnPropertyDescriptor,uB=(e,t)=>(r,n)=>t(r,n,e);let uN=class{constructor(e,t){eY(this,"_sessionService"),eY(this,"_logger"),this._sessionService=e,this._logger=t("GetConnectedDeviceUseCase")}execute({sessionId:e}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:e=>new uO({sessionId:e.id,transportConnectedDevice:e.connectedDevice}),Left:e=>{throw this._logger.error("Error getting session",{data:{error:e}}),e}})}};uN=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?uR(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&uT(t,r,o),o})([oZ(),uB(0,oW(lh.DeviceSessionService)),uB(1,oW(li.LoggerPublisherServiceFactory))],uN);var uD=Object.defineProperty,uL=Object.getOwnPropertyDescriptor,uM=(e,t)=>(r,n)=>t(r,n,e);let uU=class{constructor(e,t){eY(this,"_sessionService"),eY(this,"_logger"),this._sessionService=e,this._logger=t("ListConnectedDeviceUseCase")}execute(){return this._logger.info("Listing connected devices"),this._sessionService.getDeviceSessions().map(e=>new uO({transportConnectedDevice:e.connectedDevice,sessionId:e.id}))}};uU=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?uL(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&uD(t,r,o),o})([oZ(),uM(0,oW(lh.DeviceSessionService)),uM(1,oW(li.LoggerPublisherServiceFactory))],uU);var uF=Object.defineProperty,uj=Object.getOwnPropertyDescriptor,uz=(e,t)=>(r,n)=>t(r,n,e);let u$=class{constructor(e,t){eY(this,"_transports"),eY(this,"_transportService"),eY(this,"_logger"),this._transports=e.getAllTransports(),this._transportService=e,this._logger=t("ListenToAvailableDevicesUseCase")}mapTransportDiscoveredDeviceToDiscoveredDevice(e){let t=new ry({id:e.id,model:e.deviceModel.id,name:e.deviceModel.productName});return{id:e.id,deviceModel:t,transport:e.transport,name:e.name||t.name,rssi:e.rssi}}execute({transport:e}={}){return(this._logger.info("Listening to available devices"),0===this._transports.length)?(this._logger.warn("No transports available"),su([[]])):e?(this._logger.info(`Discovering devices on transport ${e}`),this._transportService.getTransport(e).caseOf({Nothing:()=>(this._logger.error(`Transport ${e} not found`),sc([])),Just:e=>e.listenToAvailableDevices().pipe(sp(e=>e.map(this.mapTransportDiscoveredDeviceToDiscoveredDevice)))})):(this._logger.info("Discovering all available transports"),(function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=i8(r),o=(e=1/0,"number"==typeof i3(r)?r.pop():e);return r.length?1===r.length?sn(r[0]):(void 0===(t=o)&&(t=1/0),sg(iU,t))(su(r,s)):i1})(...this._transports.map((e,t)=>e.listenToAvailableDevices().pipe(sp(e=>({index:t,arr:e}))))).pipe(function(e,t){var r;return iz((r=arguments.length>=2,function(n,s){var o=r,a=t,l=0;n.subscribe(i$(s,function(t){var r=l++;a=o?e(a,t,r):(o=!0,t),s.next(a)},void 0))}))}((e,{index:t,arr:r})=>(e[t]=r,e),{}),sp(e=>Object.values(e).flat().map(this.mapTransportDiscoveredDeviceToDiscoveredDevice))))}};u$=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?uj(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&uF(t,r,o),o})([oZ(),uz(0,oW(ly.TransportService)),uz(1,oW(li.LoggerPublisherServiceFactory))],u$);var uH=Object.defineProperty,uV=Object.getOwnPropertyDescriptor,uq=(e,t)=>(r,n)=>t(r,n,e);let uG=class{constructor(e,t){eY(this,"_logger"),this._sessionService=e,this._logger=t("ListenToConnectedDeviceUseCase")}execute(){return this._logger.info("Observe connected devices"),this._sessionService.sessionsObs.pipe(sp(e=>new uO({transportConnectedDevice:e.connectedDevice,sessionId:e.id})))}};uG=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?uV(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&uH(t,r,o),o})([oZ(),uq(0,oW(lh.DeviceSessionService)),uq(1,oW(li.LoggerPublisherServiceFactory))],uG);var uW=Object.defineProperty,uK=Object.getOwnPropertyDescriptor,uJ=(e,t)=>(r,n)=>t(r,n,e);let uZ=class{constructor(e,t,r){eY(this,"_logger"),this.connectUseCase=e,this.disconnectUseCase=t,this._logger=r("ReconnectUseCase")}async execute({device:e,sessionRefresherOptions:t}){return this._logger.debug("Reconnecting device session",{data:{deviceId:e.id,transport:e.transport}}),await this.disconnectUseCase.execute({sessionId:e.sessionId}),this.connectUseCase.execute({device:e,sessionRefresherOptions:t})}};uZ=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?uK(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&uW(t,r,o),o})([oZ(),uJ(0,oW(lp.ConnectUseCase)),uJ(1,oW(lp.DisconnectUseCase)),uJ(2,oW(li.LoggerPublisherServiceFactory))],uZ);var uQ=Object.defineProperty,uX=Object.getOwnPropertyDescriptor;let uY=class{constructor(e){this._transportService=e}mapDiscoveredDevice(e){let t=new ry({id:e.id,model:e.deviceModel.id,name:e.deviceModel.productName});return{id:e.id,deviceModel:t,transport:e.transport,name:e.name||t.name,rssi:e.rssi}}execute({transport:e}={}){return e?this._transportService.getTransport(e).caseOf({Just:e=>e.startDiscovering().pipe(sp(e=>this.mapDiscoveredDevice(e))),Nothing:()=>{throw new sP(Error("Unknown transport"))}}):sc(...this._transportService.getAllTransports()).pipe(sg(e=>e.startDiscovering().pipe(sp(e=>this.mapDiscoveredDevice(e)))))}};uY=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?uX(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&uQ(t,r,o),o})([oZ(),(S=oW(ly.TransportService),(e,t)=>S(e,t,0))],uY);var u0=Object.defineProperty,u1=Object.getOwnPropertyDescriptor,u2=(e,t)=>(r,n)=>t(r,n,e);let u3=class{constructor(e,t){eY(this,"_logger"),this.transportService=e,this._logger=t("StopDiscoveringUseCase")}async execute(){for(let e of(this._logger.debug("Stopping discovering devices"),this.transportService.getAllTransports()))await e.stopDiscovering()}};u3=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?u1(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&u0(t,r,o),o})([oZ(),u2(0,oW(ly.TransportService)),u2(1,oW(li.LoggerPublisherServiceFactory))],u3);let u8=({stub:e=!1})=>new aP(({bind:t,rebindSync:r})=>{t(lp.ConnectUseCase).to(uk),t(lp.DisconnectUseCase).to(uC),t(lp.ReconnectUseCase).to(uZ),t(lp.StartDiscoveringUseCase).to(uY),t(lp.StopDiscoveringUseCase).to(u3),t(lp.GetConnectedDeviceUseCase).to(uN),t(lp.ListenToAvailableDevicesUseCase).to(u$),t(lp.ListenToConnectedDeviceUseCase).to(uG),t(lp.ListConnectedDevicesUseCase).to(uU),e&&(r(lp.ConnectUseCase).to(lS),r(lp.DisconnectUseCase).to(lS),r(lp.StartDiscoveringUseCase).to(lS),r(lp.StopDiscoveringUseCase).to(lS),r(lp.GetConnectedDeviceUseCase).to(lS),r(lp.ListenToAvailableDevicesUseCase).to(lS),r(lp.ListenToConnectedDeviceUseCase).to(lS),r(lp.ListConnectedDevicesUseCase).to(lS))});var u6=((k=u6||{})[k.Fatal=0]="Fatal",k[k.Error=1]="Error",k[k.Warning=2]="Warning",k[k.Info=3]="Info",k[k.Debug=4]="Debug",k),u4=Object.defineProperty,u5=Object.getOwnPropertyDescriptor;let u9=class{constructor(e,t){eY(this,"subscribers"),eY(this,"tag"),this.subscribers=e,this.tag=t}_log(e,t,r){this.subscribers.forEach(n=>{let s={timestamp:Date.now(),tag:this.tag,...r};n.log(e,t,s)})}info(e,t){this._log(u6.Info,e,t)}warn(e,t){this._log(u6.Warning,e,t)}debug(e,t){this._log(u6.Debug,e,t)}error(e,t){this._log(u6.Error,e,t)}};u9=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?u5(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&u4(t,r,o),o})([oZ()],u9);let u7=({subscribers:e}={subscribers:[]})=>new aP(({bind:t})=>{t(li.LoggerPublisherServiceFactory).toFactory(t=>t=>new u9(e,t))});function ce(e,t){return function(){return e.apply(t,arguments)}}let{toString:ct}=Object.prototype,{getPrototypeOf:cr}=Object,cn=(I=Object.create(null),e=>{let t=ct.call(e);return I[t]||(I[t]=t.slice(8,-1).toLowerCase())}),ci=e=>(e=e.toLowerCase(),t=>cn(t)===e),cs=e=>t=>typeof t===e,{isArray:co}=Array,ca=cs("undefined"),cl=ci("ArrayBuffer"),cu=cs("string"),cc=cs("function"),cd=cs("number"),cf=e=>null!==e&&"object"==typeof e,ch=e=>{if("object"!==cn(e))return!1;let t=cr(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},cp=ci("Date"),cg=ci("File"),cm=ci("Blob"),cy=ci("FileList"),cb=ci("URLSearchParams"),[cv,cx,cw,cE]=["ReadableStream","Request","Response","Headers"].map(ci);function cA(e,t,{allOwnKeys:r=!1}={}){let n,s;if(null!==e&&!(typeof e>"u"))if("object"!=typeof e&&(e=[e]),co(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{let s,o=r?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;for(n=0;n<a;n++)s=o[n],t.call(null,e[s],s,e)}}function cS(e,t){t=t.toLowerCase();let r=Object.keys(e),n=r.length,s;for(;n-- >0;)if(t===(s=r[n]).toLowerCase())return s;return null}let ck="u">typeof globalThis?globalThis:"u">typeof self?self:"u">typeof window?window:ea,cI=e=>!ca(e)&&e!==ck,c_=(_="u">typeof Uint8Array&&cr(Uint8Array),e=>_&&e instanceof _),cP=ci("HTMLFormElement"),cC=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),cO=ci("RegExp"),cT=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};cA(r,(r,s)=>{let o;!1!==(o=t(r,s,e))&&(n[s]=o||r)}),Object.defineProperties(e,n)},cR=ci("AsyncFunction"),cB=(pa="function"==typeof setImmediate,pl=cc(ck.postMessage),pa?setImmediate:pl?(P=`axios@${Math.random()}`,C=[],ck.addEventListener("message",({source:e,data:t})=>{e===ck&&t===P&&C.length&&C.shift()()},!1),e=>{C.push(e),ck.postMessage(P,"*")}):e=>setTimeout(e)),cN="u">typeof queueMicrotask?queueMicrotask.bind(ck):cB,cD={isArray:co,isArrayBuffer:cl,isBuffer:function(e){return null!==e&&!ca(e)&&null!==e.constructor&&!ca(e.constructor)&&cc(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||cc(e.append)&&("formdata"===(t=cn(e))||"object"===t&&cc(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"u">typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&cl(e.buffer)},isString:cu,isNumber:cd,isBoolean:e=>!0===e||!1===e,isObject:cf,isPlainObject:ch,isReadableStream:cv,isRequest:cx,isResponse:cw,isHeaders:cE,isUndefined:ca,isDate:cp,isFile:cg,isBlob:cm,isRegExp:cO,isFunction:cc,isStream:e=>cf(e)&&cc(e.pipe),isURLSearchParams:cb,isTypedArray:c_,isFileList:cy,forEach:cA,merge:function e(){let{caseless:t}=cI(this)&&this||{},r={},n=(n,s)=>{let o=t&&cS(r,s)||s;ch(r[o])&&ch(n)?r[o]=e(r[o],n):ch(n)?r[o]=e({},n):co(n)?r[o]=n.slice():r[o]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&cA(arguments[e],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(cA(t,(t,n)=>{r&&cc(t)?e[n]=ce(t,r):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let s,o,a,l={};if(t=t||{},null==e)return t;do{for(o=(s=Object.getOwnPropertyNames(e)).length;o-- >0;)a=s[o],(!n||n(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=!1!==r&&cr(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype)return t},kindOf:cn,kindOfTest:ci,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return -1!==n&&n===r},toArray:e=>{if(!e)return null;if(co(e))return e;let t=e.length;if(!cd(t))return null;let r=Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{let r,n=(e&&e[Symbol.iterator]).call(e);for(;(r=n.next())&&!r.done;){let n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let r,n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:cP,hasOwnProperty:cC,hasOwnProp:cC,reduceDescriptors:cT,freezeMethods:e=>{cT(e,(t,r)=>{if(cc(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(cc(e[r])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet:(e,t)=>{let r={};return(co(e)?e:String(e).split(t)).forEach(e=>{r[e]=!0}),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e*=1)?e:t,findKey:cS,global:ck,isContextDefined:cI,isSpecCompliantForm:function(e){return!!(e&&cc(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{let t=Array(10),r=(e,n)=>{if(cf(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;let s=co(e)?[]:{};return cA(e,(e,t)=>{let o=r(e,n+1);ca(o)||(s[t]=o)}),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:cR,isThenable:e=>e&&(cf(e)||cc(e))&&cc(e.then)&&cc(e.catch),setImmediate:cB,asap:cN};function cL(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}cD.inherits(cL,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:cD.toJSONObject(this.config),code:this.code,status:this.status}}});let cM=cL.prototype,cU={};function cF(e){return cD.isPlainObject(e)||cD.isArray(e)}function cj(e){return cD.endsWith(e,"[]")?e.slice(0,-2):e}function cz(e,t,r){return e?e.concat(t).map(function(e,t){return e=cj(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{cU[e]={value:e}}),Object.defineProperties(cL,cU),Object.defineProperty(cM,"isAxiosError",{value:!0}),cL.from=(e,t,r,n,s,o)=>{let a=Object.create(cM);return cD.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),cL.call(a,e.message,t,r,n,s),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};let c$=cD.toFlatObject(cD,{},null,function(e){return/^is[A-Z]/.test(e)});function cH(e,t,r){if(!cD.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let n=(r=cD.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!cD.isUndefined(t[e])})).metaTokens,s=r.visitor||c,o=r.dots,a=r.indexes,l=(r.Blob||"u">typeof Blob&&Blob)&&cD.isSpecCompliantForm(t);if(!cD.isFunction(s))throw TypeError("visitor must be a function");function u(e){if(null===e)return"";if(cD.isDate(e))return e.toISOString();if(!l&&cD.isBlob(e))throw new cL("Blob is not supported. Use a Buffer instead.");return cD.isArrayBuffer(e)||cD.isTypedArray(e)?l&&"function"==typeof Blob?new Blob([e]):eZ.from(e):e}function c(e,r,s){let l=e;if(e&&!s&&"object"==typeof e)if(cD.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else{var c;if(cD.isArray(e)&&(c=e,cD.isArray(c)&&!c.some(cF))||(cD.isFileList(e)||cD.endsWith(r,"[]"))&&(l=cD.toArray(e)))return r=cj(r),l.forEach(function(e,n){cD.isUndefined(e)||null===e||t.append(!0===a?cz([r],n,o):null===a?r:r+"[]",u(e))}),!1}return!!cF(e)||(t.append(cz(s,r,o),u(e)),!1)}let d=[],f=Object.assign(c$,{defaultVisitor:c,convertValue:u,isVisitable:cF});if(!cD.isObject(e))throw TypeError("data must be an object");return function e(r,n){if(!cD.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),cD.forEach(r,function(r,o){(!(cD.isUndefined(r)||null===r)&&s.call(t,r,cD.isString(o)?o.trim():o,n,f))===!0&&e(r,n?n.concat(o):[o])}),d.pop()}}(e),t}function cV(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function cq(e,t){this._pairs=[],e&&cH(e,this,t)}let cG=cq.prototype;function cW(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cK(e,t,r){let n;if(!t)return e;let s=r&&r.encode||cW;cD.isFunction(r)&&(r={serialize:r});let o=r&&r.serialize;if(n=o?o(t,r):cD.isURLSearchParams(t)?t.toString():new cq(t,r).toString(s)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}cG.append=function(e,t){this._pairs.push([e,t])},cG.toString=function(e){let t=e?function(t){return e.call(this,t,cV)}:cV;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};let cJ=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){cD.forEach(this.handlers,function(t){null!==t&&e(t)})}},cZ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cQ="u">typeof URLSearchParams?URLSearchParams:cq,cX="u">typeof FormData?FormData:null,cY="u">typeof Blob?Blob:null,c0="u">typeof window&&"u">typeof document,c1="object"==typeof navigator&&navigator||void 0,c2=c0&&(!c1||0>["ReactNative","NativeScript","NS"].indexOf(c1.product)),c3="u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,c8=c0&&window.location.href||"http://localhost",c6={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:c0,hasStandardBrowserEnv:c2,hasStandardBrowserWebWorkerEnv:c3,navigator:c1,origin:c8},Symbol.toStringTag,{value:"Module"})),isBrowser:!0,classes:{URLSearchParams:cQ,FormData:cX,Blob:cY},protocols:["http","https","file","blob","url","data"]};function c4(e){if(cD.isFormData(e)&&cD.isFunction(e.entries)){let t={};return cD.forEachEntry(e,(e,r)=>{!function e(t,r,n,s){let o=t[s++];if("__proto__"===o)return!0;let a=Number.isFinite(+o),l=s>=t.length;return o=!o&&cD.isArray(n)?n.length:o,l?cD.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r:(n[o]&&cD.isObject(n[o])||(n[o]=[]),e(t,r,n[o],s)&&cD.isArray(n[o])&&(n[o]=function(e){let t,r,n={},s=Object.keys(e),o=s.length;for(t=0;t<o;t++)n[r=s[t]]=e[r];return n}(n[o]))),!a}(cD.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),r,t,0)}),t}return null}let c5={transitional:cZ,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r,n=t.getContentType()||"",s=n.indexOf("application/json")>-1,o=cD.isObject(e);if(o&&cD.isHTMLForm(e)&&(e=new FormData(e)),cD.isFormData(e))return s?JSON.stringify(c4(e)):e;if(cD.isArrayBuffer(e)||cD.isBuffer(e)||cD.isStream(e)||cD.isFile(e)||cD.isBlob(e)||cD.isReadableStream(e))return e;if(cD.isArrayBufferView(e))return e.buffer;if(cD.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1){var a,l;return(a=e,l=this.formSerializer,cH(a,new c6.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return c6.isNode&&cD.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},l))).toString()}if((r=cD.isFileList(e))||n.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return cH(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||s?(t.setContentType("application/json",!1),function(e,t,r){if(cD.isString(e))try{return(0,JSON.parse)(e),cD.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){let t=this.transitional||c5.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(cD.isResponse(e)||cD.isReadableStream(e))return e;if(e&&cD.isString(e)&&(r&&!this.responseType||n)){let r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r)throw"SyntaxError"===e.name?cL.from(e,cL.ERR_BAD_RESPONSE,this,null,this.response):e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:c6.classes.FormData,Blob:c6.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};cD.forEach(["delete","get","head","post","put","patch"],e=>{c5.headers[e]={}});let c9=cD.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),c7=e=>{let t,r,n,s={};return e&&e.split(`
`).forEach(function(e){n=e.indexOf(":"),t=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!t||s[t]&&c9[t]||("set-cookie"===t?s[t]?s[t].push(r):s[t]=[r]:s[t]=s[t]?s[t]+", "+r:r)}),s},de=Symbol("internals");function dt(e){return e&&String(e).trim().toLowerCase()}function dr(e){return!1===e||null==e?e:cD.isArray(e)?e.map(dr):String(e)}let dn=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function di(e,t,r,n,s){if(cD.isFunction(n))return n.call(this,t,r);if(s&&(t=r),cD.isString(t)){if(cD.isString(n))return -1!==t.indexOf(n);if(cD.isRegExp(n))return n.test(t)}}class ds{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function s(e,t,r){let s=dt(t);if(!s)throw Error("header name must be a non-empty string");let o=cD.findKey(n,s);o&&void 0!==n[o]&&!0!==r&&(void 0!==r||!1===n[o])||(n[o||t]=dr(e))}let o=(e,t)=>cD.forEach(e,(e,r)=>s(e,r,t));if(cD.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(cD.isString(e)&&(e=e.trim())&&!dn(e))o(c7(e),t);else if(cD.isHeaders(e))for(let[t,n]of e.entries())s(n,t,r);else null!=e&&s(t,e,r);return this}get(e,t){if(e=dt(e)){let r=cD.findKey(this,e);if(r){let e=this[r];if(!t)return e;if(!0===t){let t,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=n.exec(e);)r[t[1]]=t[2];return r}if(cD.isFunction(t))return t.call(this,e,r);if(cD.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=dt(e)){let r=cD.findKey(this,e);return!!(r&&void 0!==this[r]&&(!t||di(this,this[r],r,t)))}return!1}delete(e,t){let r=this,n=!1;function s(e){if(e=dt(e)){let s=cD.findKey(r,e);s&&(!t||di(r,r[s],s,t))&&(delete r[s],n=!0)}}return cD.isArray(e)?e.forEach(s):s(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let s=t[r];(!e||di(this,this[s],s,e,!0))&&(delete this[s],n=!0)}return n}normalize(e){let t=this,r={};return cD.forEach(this,(n,s)=>{let o=cD.findKey(r,s);if(o){t[o]=dr(n),delete t[s];return}let a=e?s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r):String(s).trim();a!==s&&delete t[s],t[a]=dr(n),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return cD.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&cD.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){let t=(this[de]=this[de]={accessors:{}}).accessors,r=this.prototype;function n(e){let n=dt(e);t[n]||(function(e,t){let r=cD.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})})}(r,e),t[n]=!0)}return cD.isArray(e)?e.forEach(n):n(e),this}}function da(e,t){let r=this||c5,n=t||r,s=ds.from(n.headers),o=n.data;return cD.forEach(e,function(e){o=e.call(r,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function dl(e){return!!(e&&e.__CANCEL__)}function du(e,t,r){cL.call(this,e??"canceled",cL.ERR_CANCELED,t,r),this.name="CanceledError"}function dc(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new cL("Request failed with status code "+r.status,[cL.ERR_BAD_REQUEST,cL.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}ds.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),cD.reduceDescriptors(ds.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),cD.freezeMethods(ds),cD.inherits(du,cL,{__CANCEL__:!0});let dd=(e,t,r=3)=>{let n=0,s=function(e,t){let r=Array(e=e||10),n=Array(e),s=0,o=0,a;return t=void 0!==t?t:1e3,function(l){let u=Date.now(),c=n[o];a||(a=u),r[s]=l,n[s]=u;let d=o,f=0;for(;d!==s;)f+=r[d++],d%=e;if((s=(s+1)%e)===o&&(o=(o+1)%e),u-a<t)return;let h=c&&u-c;return h?Math.round(1e3*f/h):void 0}}(50,250);return function(e,t){let r=0,n=1e3/t,s,o,a=(t,n=Date.now())=>{r=n,s=null,o&&(clearTimeout(o),o=null),e.apply(null,t)};return[(...e)=>{let t=Date.now(),l=t-r;l>=n?a(e,t):(s=e,o||(o=setTimeout(()=>{o=null,a(s)},n-l)))},()=>s&&a(s)]}(r=>{let o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-n,u=s(l);n=o,e({loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&o<=a?(a-o)/u:void 0,event:r,lengthComputable:null!=a,[t?"download":"upload"]:!0})},r)},df=(e,t)=>{let r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},dh=e=>(...t)=>cD.asap(()=>e(...t)),dp=c6.hasStandardBrowserEnv?(O=new URL(c6.origin),T=c6.navigator&&/(msie|trident)/i.test(c6.navigator.userAgent),e=>(e=new URL(e,c6.origin),O.protocol===e.protocol&&O.host===e.host&&(T||O.port===e.port))):()=>!0,dg=c6.hasStandardBrowserEnv?{write(e,t,r,n,s,o){let a=[e+"="+encodeURIComponent(t)];cD.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),cD.isString(n)&&a.push("path="+n),cD.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(e){let t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function dm(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&n||!1==r?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}let dy=e=>e instanceof ds?{...e}:e;function db(e,t){t=t||{};let r={};function n(e,t,r,n){return cD.isPlainObject(e)&&cD.isPlainObject(t)?cD.merge.call({caseless:n},e,t):cD.isPlainObject(t)?cD.merge({},t):cD.isArray(t)?t.slice():t}function s(e,t,r,s){return cD.isUndefined(t)?cD.isUndefined(e)?void 0:n(void 0,e,r,s):n(e,t,r,s)}function o(e,t){if(!cD.isUndefined(t))return n(void 0,t)}function a(e,t){return cD.isUndefined(t)?cD.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function l(r,s,o){return o in t?n(r,s):o in e?n(void 0,r):void 0}let u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(e,t,r)=>s(dy(e),dy(t),r,!0)};return cD.forEach(Object.keys(Object.assign({},e,t)),function(n){let o=u[n]||s,a=o(e[n],t[n],n);cD.isUndefined(a)&&o!==l||(r[n]=a)}),r}let dv=e=>{let t,r=db({},e),{data:n,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:a,headers:l,auth:u}=r;if(r.headers=l=ds.from(l),r.url=cK(dm(r.baseURL,r.url),e.params,e.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),cD.isFormData(n)){if(c6.hasStandardBrowserEnv||c6.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(!1!==(t=l.getContentType())){let[e,...r]=t?t.split(";").map(e=>e.trim()).filter(Boolean):[];l.setContentType([e||"multipart/form-data",...r].join("; "))}}if(c6.hasStandardBrowserEnv&&(s&&cD.isFunction(s)&&(s=s(r)),s||!1!==s&&dp(r.url))){let e=o&&a&&dg.read(a);e&&l.set(o,e)}return r},dx="u">typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){let n=dv(e),s=n.data,o=ds.from(n.headers).normalize(),{responseType:a,onUploadProgress:l,onDownloadProgress:u}=n,c,d,f,h,p;function g(){h&&h(),p&&p(),n.cancelToken&&n.cancelToken.unsubscribe(c),n.signal&&n.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;function y(){if(!m)return;let n=ds.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());dc(function(e){t(e),g()},function(e){r(e),g()},{data:a&&"text"!==a&&"json"!==a?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(y)},m.onabort=function(){m&&(r(new cL("Request aborted",cL.ECONNABORTED,e,m)),m=null)},m.onerror=function(){r(new cL("Network Error",cL.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",s=n.transitional||cZ;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new cL(t,s.clarifyTimeoutError?cL.ETIMEDOUT:cL.ECONNABORTED,e,m)),m=null},void 0===s&&o.setContentType(null),"setRequestHeader"in m&&cD.forEach(o.toJSON(),function(e,t){m.setRequestHeader(t,e)}),cD.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),a&&"json"!==a&&(m.responseType=n.responseType),u&&([f,p]=dd(u,!0),m.addEventListener("progress",f)),l&&m.upload&&([d,h]=dd(l),m.upload.addEventListener("progress",d),m.upload.addEventListener("loadend",h)),(n.cancelToken||n.signal)&&(c=t=>{m&&(r(!t||t.type?new du(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(c),n.signal&&(n.signal.aborted?c():n.signal.addEventListener("abort",c)));let b=function(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);if(b&&-1===c6.protocols.indexOf(b))return void r(new cL("Unsupported protocol "+b+":",cL.ERR_BAD_REQUEST,e));m.send(s||null)})},dw=(e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r=new AbortController,n,s=function(e){if(!n){n=!0,a();let t=e instanceof Error?e:this.reason;r.abort(t instanceof cL?t:new du(t instanceof Error?t.message:t))}},o=t&&setTimeout(()=>{o=null,s(new cL(`timeout ${t} of ms exceeded`,cL.ETIMEDOUT))},t),a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));let{signal:l}=r;return l.unsubscribe=()=>cD.asap(a),l}},dE=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},dA=async function*(e,t){for await(let r of dS(e))yield*dE(r,t)},dS=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},dk=(e,t,r,n)=>{let s=dA(e,t),o=0,a,l=e=>{a||(a=!0,n&&n(e))};return new ReadableStream({async pull(e){try{let{done:t,value:n}=await s.next();if(t){l(),e.close();return}let a=n.byteLength;if(r){let e=o+=a;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw l(e),e}},cancel:e=>(l(e),s.return())},{highWaterMark:2})},dI="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,d_=dI&&"function"==typeof ReadableStream,dP=dI&&("function"==typeof TextEncoder?(R=new TextEncoder,e=>R.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer())),dC=(e,...t)=>{try{return!!e(...t)}catch{return!1}},dO=d_&&dC(()=>{let e=!1,t=new Request(c6.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),dT=d_&&dC(()=>cD.isReadableStream(new Response("").body)),dR={stream:dT&&(e=>e.body)};dI&&(pu=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{dR[e]||(dR[e]=cD.isFunction(pu[e])?t=>t[e]():(t,r)=>{throw new cL(`Response type '${e}' is not supported`,cL.ERR_NOT_SUPPORT,r)})}));let dB=async e=>null==e?0:cD.isBlob(e)?e.size:cD.isSpecCompliantForm(e)?(await new Request(c6.origin,{method:"POST",body:e}).arrayBuffer()).byteLength:cD.isArrayBufferView(e)||cD.isArrayBuffer(e)?e.byteLength:(cD.isURLSearchParams(e)&&(e+=""),cD.isString(e))?(await dP(e)).byteLength:void 0,dN=async(e,t)=>cD.toFiniteNumber(e.getContentLength())??dB(t),dD={http:null,xhr:dx,fetch:dI&&(async e=>{let t,{url:r,method:n,data:s,signal:o,cancelToken:a,timeout:l,onDownloadProgress:u,onUploadProgress:c,responseType:d,headers:f,withCredentials:h="same-origin",fetchOptions:p}=dv(e);d=d?(d+"").toLowerCase():"text";let g=dw([o,a&&a.toAbortSignal()],l),m,y=g&&g.unsubscribe&&(()=>{g.unsubscribe()});try{if(c&&dO&&"get"!==n&&"head"!==n&&0!==(t=await dN(f,s))){let e=new Request(r,{method:"POST",body:s,duplex:"half"}),n;if(cD.isFormData(s)&&(n=e.headers.get("content-type"))&&f.setContentType(n),e.body){let[r,n]=df(t,dd(dh(c)));s=dk(e.body,65536,r,n)}}cD.isString(h)||(h=h?"include":"omit");let o="credentials"in Request.prototype;m=new Request(r,{...p,signal:g,method:n.toUpperCase(),headers:f.normalize().toJSON(),body:s,duplex:"half",credentials:o?h:void 0});let a=await fetch(m),l=dT&&("stream"===d||"response"===d);if(dT&&(u||l&&y)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=a[t]});let t=cD.toFiniteNumber(a.headers.get("content-length")),[r,n]=u&&df(t,dd(dh(u),!0))||[];a=new Response(dk(a.body,65536,r,()=>{n&&n(),y&&y()}),e)}d=d||"text";let b=await dR[cD.findKey(dR,d)||"text"](a,e);return!l&&y&&y(),await new Promise((t,r)=>{dc(t,r,{data:b,headers:ds.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:m})})}catch(t){throw y&&y(),t&&"TypeError"===t.name&&/fetch/i.test(t.message)?Object.assign(new cL("Network Error",cL.ERR_NETWORK,e,m),{cause:t.cause||t}):cL.from(t,t&&t.code,e,m)}})};cD.forEach(dD,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});let dL=e=>`- ${e}`,dM=e=>cD.isFunction(e)||null===e||!1===e,dU=e=>{let t,r,{length:n}=e=cD.isArray(e)?e:[e],s={};for(let o=0;o<n;o++){let n;if(r=t=e[o],!dM(t)&&void 0===(r=dD[(n=String(t)).toLowerCase()]))throw new cL(`Unknown adapter '${n}'`);if(r)break;s[n||"#"+o]=r}if(!r){let e=Object.entries(s).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new cL("There is no suitable adapter to dispatch the request "+(n?e.length>1?`since :
`+e.map(dL).join(`
`):" "+dL(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function dF(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new du(null,e)}function dj(e){return dF(e),e.headers=ds.from(e.headers),e.data=da.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),dU(e.adapter||c5.adapter)(e).then(function(t){return dF(e),t.data=da.call(e,e.transformResponse,t),t.headers=ds.from(t.headers),t},function(t){return dl(t)||(dF(e),t&&t.response&&(t.response.data=da.call(e,e.transformResponse,t.response),t.response.headers=ds.from(t.response.headers))),Promise.reject(t)})}let dz="1.8.2",d$={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{d$[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});let dH={};d$.transitional=function(e,t,r){function n(e,t){return"[Axios v"+dz+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,o)=>{if(!1===e)throw new cL(n(s," has been removed"+(t?" in "+t:"")),cL.ERR_DEPRECATED);return t&&!dH[s]&&(dH[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,o)}},d$.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};let dV={assertOptions:function(e,t,r){if("object"!=typeof e)throw new cL("options must be an object",cL.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),s=n.length;for(;s-- >0;){let o=n[s],a=t[o];if(a){let t=e[o],r=void 0===t||a(t,o,e);if(!0!==r)throw new cL("option "+o+" must be "+r,cL.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new cL("Unknown option "+o,cL.ERR_BAD_OPTION)}},validators:d$},dq=dV.validators;class dG{constructor(e){this.defaults=e,this.interceptors={request:new cJ,response:new cJ}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+=`
`+r):e.stack=r}catch{}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:r,paramsSerializer:n,headers:s}=t=db(this.defaults,t);void 0!==r&&dV.assertOptions(r,{silentJSONParsing:dq.transitional(dq.boolean),forcedJSONParsing:dq.transitional(dq.boolean),clarifyTimeoutError:dq.transitional(dq.boolean)},!1),null!=n&&(cD.isFunction(n)?t.paramsSerializer={serialize:n}:dV.assertOptions(n,{encode:dq.function,serialize:dq.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),dV.assertOptions(t,{baseUrl:dq.spelling("baseURL"),withXsrfToken:dq.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&cD.merge(s.common,s[t.method]);s&&cD.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=ds.concat(o,s);let a=[],l=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});let u=[];this.interceptors.response.forEach(function(e){u.push(e.fulfilled,e.rejected)});let c,d=0,f;if(!l){let e=[dj.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,u),f=e.length,c=Promise.resolve(t);d<f;)c=c.then(e[d++],e[d++]);return c}f=a.length;let h=t;for(d=0;d<f;){let e=a[d++],t=a[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{c=dj.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,f=u.length;d<f;)c=c.then(u[d++],u[d++]);return c}getUri(e){return cK(dm((e=db(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}cD.forEach(["delete","get","head","options"],function(e){dG.prototype[e]=function(t,r){return this.request(db(r||{},{method:e,url:t,data:(r||{}).data}))}}),cD.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,s){return this.request(db(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}dG.prototype[e]=t(),dG.prototype[e+"Form"]=t(!0)});class dW{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});let r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t,n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,s){r.reason||(r.reason=new du(e,n,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason)return void e(this.reason);this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new dW(function(t){e=t}),cancel:e}}}let dK={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(dK).forEach(([e,t])=>{dK[t]=e});let dJ=function e(t){let r=new dG(t),n=ce(dG.prototype.request,r);return cD.extend(n,dG.prototype,r,{allOwnKeys:!0}),cD.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(db(t,r))},n}(c5);dJ.Axios=dG,dJ.CanceledError=du,dJ.CancelToken=dW,dJ.isCancel=dl,dJ.VERSION=dz,dJ.toFormData=cH,dJ.AxiosError=cL,dJ.Cancel=dJ.CanceledError,dJ.all=function(e){return Promise.all(e)},dJ.spread=function(e){return function(t){return e.apply(null,t)}},dJ.isAxiosError=function(e){return cD.isObject(e)&&!0===e.isAxiosError},dJ.mergeConfig=db,dJ.AxiosHeaders=ds,dJ.formToJSON=e=>c4(cD.isHTMLForm(e)?new FormData(e):e),dJ.getAdapter=dU,dJ.HttpStatusCode=dK,dJ.default=dJ;var dZ=((B=dZ||{}).currency="currency",B.plugin="plugin",B.tool="tool",B.swap="swap",B);let dQ="https://manager.api.live.ledger.com/api",dX="http://localhost:8080",dY=1,d0="0",d1=class{constructor(e){eY(this,"_tag","FetchError"),eY(this,"originalError"),this.error=e,this.originalError=e}};var d2=((N=d2||{}).currency="currency",N.plugin="plugin",N.tool="tool",N.swap="swap",N),d3=Object.defineProperty,d8=Object.getOwnPropertyDescriptor;let d6=class{constructor({managerApiUrl:e,provider:t,firmwareDistributionSalt:r}){eY(this,"_managerApiBaseUrl"),eY(this,"_provider",dY),eY(this,"_firmwareDistributionSalt",d0),this._managerApiBaseUrl=e,this._provider=t,this._firmwareDistributionSalt=r}setProvider(e){this._provider===e||e<1||(this._provider=e)}getProvider(){return this._provider}getAppList(e){let{targetId:t,firmwareVersionName:r}=e;return rz(()=>dJ.get(`${this._managerApiBaseUrl}/v2/apps/by-target`,{params:{target_id:t,provider:this._provider,firmware_version_name:r}})).map(e=>e.data).chain(e=>this.mapApplicationDtoToApplication(e)).mapLeft(e=>new d1(e))}getMcuList(){return rz(()=>dJ.get(`${this._managerApiBaseUrl}/mcu_versions`,{})).map(e=>e.data).chain(e=>this.mapMcuDtoToMcu(e)).mapLeft(e=>new d1(e))}getDeviceVersion(e){let{targetId:t}=e;return rz(()=>dJ.get(`${this._managerApiBaseUrl}/get_device_version`,{params:{target_id:t,provider:this._provider}})).map(e=>e.data).chain(e=>this.mapDeviceVersionDto(e)).mapLeft(e=>new d1(e))}getFirmwareVersion(e){let{deviceId:t,version:r}=e;return rz(()=>dJ.get(`${this._managerApiBaseUrl}/get_firmware_version`,{params:{device_version:t,version_name:r,provider:this._provider}})).map(e=>e.data).chain(e=>this.mapFinalFirmwareDto(e)).mapLeft(e=>new d1(e))}getFirmwareVersionById(e){return rz(()=>dJ.get(`${this._managerApiBaseUrl}/firmware_final_versions/${e}`,{})).map(e=>e.data).chain(e=>this.mapFinalFirmwareDto(e)).mapLeft(e=>new d1(e))}getOsuFirmwareVersion(e){let{deviceId:t,version:r}=e;return rz(()=>dJ.get(`${this._managerApiBaseUrl}/get_osu_version`,{params:{device_version:t,version_name:r,provider:this._provider}})).map(e=>e.data).chain(e=>this.mapOsuFirmwareDto(e)).mapLeft(e=>new d1(e))}getLatestFirmwareVersion(e){let{currentFinalFirmwareId:t,deviceId:r}=e;return rz(()=>dJ.get(`${this._managerApiBaseUrl}/get_latest_firmware`,{params:{current_se_firmware_final_version:t,device_version:r,provider:this._provider,salt:this._firmwareDistributionSalt,livecommonversion:"34.27.0"}})).map(e=>e.data).chain(e=>this.mapLatestFirmwareDto(e)).mapLeft(e=>new d1(e))}getAppsByHash(e){let{hashes:t}=e;return rz(()=>dJ.post(`${this._managerApiBaseUrl}/v2/apps/hash`,t)).map(e=>e.data).chain(e=>this.mapNullableApplicationDtoToApplication(e)).mapLeft(e=>new d1(e))}getLanguagePackages(e){let{deviceId:t,currentFinalFirmwareId:r}=e;return rz(()=>dJ.get(`${this._managerApiBaseUrl}/language-packages`,{params:{device_version:t,current_se_firmware_final_version:r}})).map(e=>e.data).chain(e=>this.mapLanguagesDtoToLanguages(e)).mapLeft(e=>new d1(e))}mapAppTypeDtoToAppType(e){if(null===e)return null;switch(e){case d2.currency:return dZ.currency;case d2.plugin:return dZ.plugin;case d2.tool:return dZ.tool;case d2.swap:return dZ.swap}}mapApplicationDtoToApplication(e){return rz(()=>Promise.resolve(e.map(e=>this.mapApplicationDto(e))))}mapNullableApplicationDtoToApplication(e){return rz(()=>Promise.resolve(e.map(e=>null===e?null:this.mapApplicationDto(e))))}mapApplicationDto(e){if("object"!=typeof e||"number"!=typeof e.versionId||"string"!=typeof e.versionName||null!==e.versionDisplayName&&"string"!=typeof e.versionDisplayName||"string"!=typeof e.version||null!==e.currencyId&&"string"!=typeof e.currencyId||null!==e.description&&"string"!=typeof e.description||null!==e.applicationType&&"string"!=typeof e.applicationType||"string"!=typeof e.dateModified||null!==e.icon&&"string"!=typeof e.icon||null!==e.authorName&&"string"!=typeof e.authorName||null!==e.supportURL&&"string"!=typeof e.supportURL||null!==e.contactURL&&"string"!=typeof e.contactURL||null!==e.sourceURL&&"string"!=typeof e.sourceURL||null!==e.compatibleWallets&&"string"!=typeof e.compatibleWallets||"string"!=typeof e.hash||"string"!=typeof e.perso||"string"!=typeof e.firmware||"string"!=typeof e.firmwareKey||"string"!=typeof e.delete||"string"!=typeof e.deleteKey||null!==e.bytes&&"number"!=typeof e.bytes||null!==e.warning&&"string"!=typeof e.warning||"boolean"!=typeof e.isDevTools||null!==e.category&&"number"!=typeof e.category||null!==e.parent&&"number"!=typeof e.parent||null!==e.parentName&&"string"!=typeof e.parentName)throw Error(`Incomplete application: ${JSON.stringify(e)}`);let{applicationType:t,hash:r,perso:n,firmware:s,firmwareKey:o,delete:a,deleteKey:l,...u}=e;return{...u,hash:r,perso:n,firmware:s,firmwareKey:o,delete:a,deleteKey:l,applicationType:this.mapAppTypeDtoToAppType(t)}}mapMcuDtoToMcu(e){return rz(()=>Promise.resolve(e.map(e=>{if("object"!=typeof e||"number"!=typeof e.id||"string"!=typeof e.name)throw Error(`Incomplete MCU version: ${JSON.stringify(e)}`);return{id:e.id,name:e.name}})))}mapDeviceVersionDto(e){return rz(()=>{if("object"!=typeof e||"number"!=typeof e.id)throw Error(`Incomplete device version: ${JSON.stringify(e)}`);return Promise.resolve({id:e.id})})}mapFinalFirmwareDto(e){return rz(()=>{if("object"!=typeof e||"number"!=typeof e.id||"string"!=typeof e.version||"string"!=typeof e.perso||null!==e.firmware&&"string"!=typeof e.firmware||null!==e.firmware_key&&"string"!=typeof e.firmware_key||null!==e.hash&&"string"!=typeof e.hash||null!==e.bytes&&"number"!=typeof e.bytes||!Array.isArray(e.mcu_versions))throw Error(`Incomplete final firmware: ${JSON.stringify(e)}`);return Promise.resolve({id:e.id,version:e.version,perso:e.perso,firmware:e.firmware,firmwareKey:e.firmware_key,hash:e.hash,bytes:e.bytes,mcuVersions:e.mcu_versions})})}mapLatestFirmwareDto(e){return rz(()=>{if("success"!==e.result||!e.se_firmware_osu_version)throw Error(`Latest firmware could not be retrieved: ${e.result}`);return Promise.resolve(e.se_firmware_osu_version)}).chain(e=>this.mapOsuFirmwareDto(e))}mapOsuFirmwareDto(e){return rz(()=>{if("object"!=typeof e||"number"!=typeof e.id||"string"!=typeof e.perso||"string"!=typeof e.firmware||"string"!=typeof e.firmware_key||null!==e.hash&&"string"!=typeof e.hash||"number"!=typeof e.next_se_firmware_final_version)throw Error(`Incomplete latest firmware: ${JSON.stringify(e)}`);return Promise.resolve({id:e.id,perso:e.perso,firmware:e.firmware,firmwareKey:e.firmware_key,hash:e.hash,nextFinalFirmware:e.next_se_firmware_final_version})})}mapLanguagesDtoToLanguages(e){return rz(()=>Promise.resolve(e.map(e=>this.mapLanguageDto(e))))}mapLanguageDto(e){if("object"!=typeof e||"string"!=typeof e.language||"number"!=typeof e.languagePackageVersionId||"string"!=typeof e.version||"number"!=typeof e.language_package_id||"string"!=typeof e.apdu_install_url||"string"!=typeof e.apdu_uninstall_url||"number"!=typeof e.bytes||"string"!=typeof e.date_creation||"string"!=typeof e.date_last_modified)throw Error(`Incomplete language version: ${JSON.stringify(e)}`);return{language:e.language,languagePackageVersionId:e.languagePackageVersionId,version:e.version,languagePackageId:e.language_package_id,apduInstallUrl:e.apdu_install_url,apduUninstallUrl:e.apdu_uninstall_url,bytes:e.bytes,dateCreation:e.date_creation,dateLastModified:e.date_last_modified}}};d6=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?d8(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&d3(t,r,o),o})([oZ(),(D=oW(lg.DmkConfig),(e,t)=>D(e,t,0))],d6);var d4=Object.defineProperty,d5=Object.getOwnPropertyDescriptor;let d9=class{constructor(e){this.dataSource=e}getAppList(e){let t={targetId:e.targetId.toString(),firmwareVersionName:e.seVersion};return this.dataSource.getAppList(t)}getDeviceVersion(e){let t={targetId:e.targetId.toString()};return this.dataSource.getDeviceVersion(t)}getFirmwareVersion(e,t){let r={version:e.seVersion,deviceId:t.id};return this.dataSource.getFirmwareVersion(r)}getOsuFirmwareVersion(e,t){let r={version:e.seVersion,deviceId:t.id};return this.dataSource.getOsuFirmwareVersion(r)}getLatestFirmwareVersion(e,t){let r={currentFinalFirmwareId:e.id,deviceId:t.id};return this.dataSource.getLatestFirmwareVersion(r)}getNextFirmwareVersion(e){return this.dataSource.getFirmwareVersionById(e.nextFinalFirmware)}getLanguagePackages(e,t){let r={deviceId:e.id,currentFinalFirmwareId:t.id};return this.dataSource.getLanguagePackages(r)}getMcuList(){return this.dataSource.getMcuList()}getAppsByHash(e){let t={hashes:e};return rz(async({fromPromise:e,throwE:r})=>{if(0===t.hashes.length)return[];try{return await e(this.dataSource.getAppsByHash(t))}catch(e){return r(e instanceof d1?e:new d1(e))}})}};d9=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?d5(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&d4(t,r,o),o})([oZ(),(L=oW(lg.ManagerApiDataSource),(e,t)=>L(e,t,0))],d9);var d7=Object.defineProperty,fe=Object.getOwnPropertyDescriptor,ft=(e,t)=>(r,n)=>t(r,n,e);let fr=class{constructor(e,t){this.sessionService=e,this.managerApiDataSource=t}execute(e){for(let e of this.sessionService.getDeviceSessions()){let t=e.getDeviceSessionState();t.sessionStateType!==sx.Connected&&e.setDeviceSessionState({...t,firmwareUpdateContext:void 0,installedApps:[],appsUpdates:void 0,catalog:void 0})}this.managerApiDataSource.setProvider(e)}};fr=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?fe(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&d7(t,r,o),o})([oZ(),ft(0,oW(lh.DeviceSessionService)),ft(1,oW(lg.ManagerApiDataSource))],fr);let fn=({stub:e,config:t})=>new aP(({bind:r,rebindSync:n})=>{r(lg.DmkConfig).toConstantValue(t),r(lg.ManagerApiDataSource).to(d6).inSingletonScope(),r(lg.ManagerApiService).to(d9).inSingletonScope(),r(lg.SetProviderUseCase).to(fr),e&&(n(lg.ManagerApiDataSource).to(lS),n(lg.ManagerApiService).to(lS),n(lg.SetProviderUseCase).to(lS))});var fi={},fs={exports:{}};fs.exports,pc=fs.exports,function(e){var t=pc&&!pc.nodeType&&pc,r=fs&&!fs.nodeType&&fs,n="object"==typeof e4&&e4;(n.global===n||n.window===n||n.self===n)&&(e=n);var s,o,a=/^xn--/,l=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,f=String.fromCharCode;function h(e){throw RangeError(c[e])}function p(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function g(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+p((e=e.replace(u,".")).split("."),t).join(".")}function m(e){for(var t,r,n=[],s=0,o=e.length;s<o;)(t=e.charCodeAt(s++))>=55296&&t<=56319&&s<o?(64512&(r=e.charCodeAt(s++)))==56320?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),s--):n.push(t);return n}function y(e){return p(e,function(e){var t="";return e>65535&&(e-=65536,t+=f(e>>>10&1023|55296),e=56320|1023&e),t+=f(e)}).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function v(e,t,r){var n=0;for(e=r?d(e/700):e>>1,e+=d(e/t);e>455;n+=36)e=d(e/35);return d(n+36*e/(e+38))}function x(e){var t,r,n,s,o,a,l,u,c,f,p,g=[],m=e.length,b=0,x=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),s=0;s<n;++s)e.charCodeAt(s)>=128&&h("not-basic"),g.push(e.charCodeAt(s));for(o=n>0?n+1:0;o<m;){for(a=b,l=1,u=36;o>=m&&h("invalid-input"),((c=(t=e.charCodeAt(o++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36)>=36||c>d((0x7fffffff-b)/l))&&h("overflow"),b+=c*l,!(c<(f=u<=w?1:u>=w+26?26:u-w));u+=36)l>d(0x7fffffff/(p=36-f))&&h("overflow"),l*=p;w=v(b-a,r=g.length+1,0==a),d(b/r)>0x7fffffff-x&&h("overflow"),x+=d(b/r),b%=r,g.splice(b++,0,x)}return y(g)}function w(e){var t,r,n,s,o,a,l,u,c,p,g,y,x,w,E,A=[];for(y=(e=m(e)).length,t=128,r=0,o=72,a=0;a<y;++a)(g=e[a])<128&&A.push(f(g));for(n=s=A.length,s&&A.push("-");n<y;){for(l=0x7fffffff,a=0;a<y;++a)(g=e[a])>=t&&g<l&&(l=g);for(l-t>d((0x7fffffff-r)/(x=n+1))&&h("overflow"),r+=(l-t)*x,t=l,a=0;a<y;++a)if((g=e[a])<t&&++r>0x7fffffff&&h("overflow"),g==t){for(u=r,c=36;!(u<(p=c<=o?1:c>=o+26?26:c-o));c+=36)E=u-p,w=36-p,A.push(f(b(p+E%w,0))),u=d(E/w);A.push(f(b(u,0))),o=v(r,x,n==s),r=0,++n}++r,++t}return A.join("")}if(s={version:"1.4.1",ucs2:{decode:m,encode:y},decode:x,encode:w,toASCII:function(e){return g(e,function(e){return l.test(e)?"xn--"+w(e):e})},toUnicode:function(e){return g(e,function(e){return a.test(e)?x(e.slice(4).toLowerCase()):e})}},t&&r)if(fs.exports==t)r.exports=s;else for(o in s)s.hasOwnProperty(o)&&(t[o]=s[o]);else e.punycode=s}(e4);var fo=fs.exports,fa=TypeError;let fl=e9(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var fu="function"==typeof Map&&Map.prototype,fc=Object.getOwnPropertyDescriptor&&fu?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,fd=fu&&fc&&"function"==typeof fc.get?fc.get:null,ff=fu&&Map.prototype.forEach,fh="function"==typeof Set&&Set.prototype,fp=Object.getOwnPropertyDescriptor&&fh?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,fg=fh&&fp&&"function"==typeof fp.get?fp.get:null,fm=fh&&Set.prototype.forEach,fy="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,fb="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,fv="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,fx=Boolean.prototype.valueOf,fw=Object.prototype.toString,fE=Function.prototype.toString,fA=String.prototype.match,fS=String.prototype.slice,fk=String.prototype.replace,fI=String.prototype.toUpperCase,f_=String.prototype.toLowerCase,fP=RegExp.prototype.test,fC=Array.prototype.concat,fO=Array.prototype.join,fT=Array.prototype.slice,fR=Math.floor,fB="function"==typeof BigInt?BigInt.prototype.valueOf:null,fN=Object.getOwnPropertySymbols,fD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,fL="function"==typeof Symbol&&"object"==typeof Symbol.iterator,fM="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===fL||1)?Symbol.toStringTag:null,fU=Object.prototype.propertyIsEnumerable,fF=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function fj(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||fP.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-fR(-e):fR(e);if(n!==e){var s=String(n),o=fS.call(t,s.length+1);return fk.call(s,r,"$&_")+"."+fk.call(fk.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return fk.call(t,r,"$&_")}var fz=fl.custom,f$=fZ(fz)?fz:null,fH={__proto__:null,double:'"',single:"'"},fV={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},fq=function e(t,r,n,s){var o,a,l,u,c,d=r||{};if(fX(d,"quoteStyle")&&!fX(fH,d.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(fX(d,"maxStringLength")&&("number"==typeof d.maxStringLength?d.maxStringLength<0&&d.maxStringLength!==1/0:null!==d.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var f=!fX(d,"customInspect")||d.customInspect;if("boolean"!=typeof f&&"symbol"!==f)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(fX(d,"indent")&&null!==d.indent&&"	"!==d.indent&&!(parseInt(d.indent,10)===d.indent&&d.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(fX(d,"numericSeparator")&&"boolean"!=typeof d.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var h=d.numericSeparator;if(typeof t>"u")return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,r){if(t.length>r.maxStringLength){var n=t.length-r.maxStringLength;return e(fS.call(t,0,r.maxStringLength),r)+("... "+n)+" more character"+(n>1?"s":"")}var s=fV[r.quoteStyle||"single"];return s.lastIndex=0,fG(fk.call(fk.call(t,s,"\\$1"),/[\x00-\x1f]/g,f1),"single",r)}(t,d);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var p=String(t);return h?fj(t,p):p}if("bigint"==typeof t){var g=String(t)+"n";return h?fj(t,g):g}var m=typeof d.depth>"u"?5:d.depth;if(typeof n>"u"&&(n=0),n>=m&&m>0&&"object"==typeof t)return fK(t)?"[Array]":"[Object]";var y=function(e,t){var r;if("	"===e.indent)r="	";else{if("number"!=typeof e.indent||!(e.indent>0))return null;r=fO.call(Array(e.indent+1)," ")}return{base:r,prev:fO.call(Array(t+1),r)}}(d,n);if(typeof s>"u")s=[];else if(f0(s,t)>=0)return"[Circular]";function b(t,r,o){if(r&&(s=fT.call(s)).push(r),o){var a={depth:d.depth};return fX(d,"quoteStyle")&&(a.quoteStyle=d.quoteStyle),e(t,a,n+1,s)}return e(t,d,n+1,s)}if("function"==typeof t&&!fJ(t)){var v=function(e){if(e.name)return e.name;var t=fA.call(fE.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),x=f4(t,b);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(x.length>0?" { "+fO.call(x,", ")+" }":"")}if(fZ(t)){var w=fL?fk.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):fD.call(t);return"object"!=typeof t||fL?w:f2(w)}if((E=t)&&"object"==typeof E&&("u">typeof HTMLElement&&E instanceof HTMLElement||"string"==typeof E.nodeName&&"function"==typeof E.getAttribute)){for(var E,A,S="<"+f_.call(String(t.nodeName)),k=t.attributes||[],I=0;I<k.length;I++){S+=" "+k[I].name+"="+fG((A=k[I].value,fk.call(String(A),/"/g,"&quot;")),"double",d)}return S+=">",t.childNodes&&t.childNodes.length&&(S+="..."),S+="</"+f_.call(String(t.nodeName))+">"}if(fK(t)){if(0===t.length)return"[]";var _=f4(t,b);return y&&!function(e){for(var t=0;t<e.length;t++)if(f0(e[t],`
`)>=0)return!1;return!0}(_)?"["+f6(_,y)+"]":"[ "+fO.call(_,", ")+" ]"}if("[object Error]"===fY(o=t)&&fW(o)){var P=f4(t,b);return"cause"in Error.prototype||!("cause"in t)||fU.call(t,"cause")?0===P.length?"["+String(t)+"]":"{ ["+String(t)+"] "+fO.call(P,", ")+" }":"{ ["+String(t)+"] "+fO.call(fC.call("[cause]: "+b(t.cause),P),", ")+" }"}if("object"==typeof t&&f){if(f$&&"function"==typeof t[f$]&&fl)return fl(t,{depth:m-n});if("symbol"!==f&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!fd||!e||"object"!=typeof e)return!1;try{fd.call(e);try{fg.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}(t)){var C=[];return ff&&ff.call(t,function(e,r){C.push(b(r,t,!0)+" => "+b(e,t))}),f8("Map",fd.call(t),C,y)}if(function(e){if(!fg||!e||"object"!=typeof e)return!1;try{fg.call(e);try{fd.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}(t)){var O=[];return fm&&fm.call(t,function(e){O.push(b(e,t))}),f8("Set",fg.call(t),O,y)}if(function(e){if(!fy||!e||"object"!=typeof e)return!1;try{fy.call(e,fy);try{fb.call(e,fb)}catch{return!0}return e instanceof WeakMap}catch{}return!1}(t))return f3("WeakMap");if(function(e){if(!fb||!e||"object"!=typeof e)return!1;try{fb.call(e,fb);try{fy.call(e,fy)}catch{return!0}return e instanceof WeakSet}catch{}return!1}(t))return f3("WeakSet");if(function(e){if(!fv||!e||"object"!=typeof e)return!1;try{return fv.call(e),!0}catch{}return!1}(t))return f3("WeakRef");if("[object Number]"===fY(a=t)&&fW(a))return f2(b(Number(t)));if(function(e){if(!e||"object"!=typeof e||!fB)return!1;try{return fB.call(e),!0}catch{}return!1}(t))return f2(b(fB.call(t)));if("[object Boolean]"===fY(l=t)&&fW(l))return f2(fx.call(t));if("[object String]"===fY(u=t)&&fW(u))return f2(b(String(t)));if("u">typeof window&&t===window)return"{ [object Window] }";if("u">typeof globalThis&&t===globalThis||"u">typeof e4&&t===e4)return"{ [object globalThis] }";if(!("[object Date]"===fY(c=t)&&fW(c))&&!fJ(t)){var T=f4(t,b),R=fF?fF(t)===Object.prototype:t instanceof Object||t.constructor===Object,B=t instanceof Object?"":"null prototype",N=!R&&fM&&Object(t)===t&&fM in t?fS.call(fY(t),8,-1):B?"Object":"",D=(R||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(N||B?"["+fO.call(fC.call([],N||[],B||[]),": ")+"] ":"");return 0===T.length?D+"{}":y?D+"{"+f6(T,y)+"}":D+"{ "+fO.call(T,", ")+" }"}return String(t)};function fG(e,t,r){var n=fH[r.quoteStyle||t];return n+e+n}function fW(e){return!fM||!("object"==typeof e&&(fM in e||"u">typeof e[fM]))}function fK(e){return"[object Array]"===fY(e)&&fW(e)}function fJ(e){return"[object RegExp]"===fY(e)&&fW(e)}function fZ(e){if(fL)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!fD)return!1;try{return fD.call(e),!0}catch{}return!1}var fQ=Object.prototype.hasOwnProperty||function(e){return e in this};function fX(e,t){return fQ.call(e,t)}function fY(e){return fw.call(e)}function f0(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}function f1(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+fI.call(t.toString(16))}function f2(e){return"Object("+e+")"}function f3(e){return e+" { ? }"}function f8(e,t,r,n){return e+" ("+t+") {"+(n?f6(r,n):fO.call(r,", "))+"}"}function f6(e,t){if(0===e.length)return"";var r=`
`+t.prev+t.base;return r+fO.call(e,","+r)+`
`+t.prev}function f4(e,t){var r=fK(e),n=[];if(r){n.length=e.length;for(var s=0;s<e.length;s++)n[s]=fX(e,s)?t(e[s],e):""}var o,a="function"==typeof fN?fN(e):[];if(fL){o={};for(var l=0;l<a.length;l++)o["$"+a[l]]=a[l]}for(var u in e)fX(e,u)&&(r&&String(Number(u))===u&&u<e.length||fL&&o["$"+u]instanceof Symbol||(fP.call(/[^\w$]/,u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e))));if("function"==typeof fN)for(var c=0;c<a.length;c++)fU.call(e,a[c])&&n.push("["+t(a[c])+"]: "+t(e[a[c]],e));return n}var f5=function(e,t,r){for(var n,s=e;null!=(n=s.next);s=n)if(n.key===t)return s.next=n.next,r||(n.next=e.next,e.next=n),n},f9=function(e,t){if(e){var r=f5(e,t);return r&&r.value}},f7=function(e,t,r){var n=f5(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},he=function(e,t){if(e)return f5(e,t,!0)},ht=Object,hr=Error,hn=EvalError,hi=RangeError,hs=ReferenceError,ho=SyntaxError,ha=URIError,hl=Math.abs,hu=Math.floor,hc=Math.max,hd=Math.min,hf=Math.pow,hh=Math.round,hp=Number.isNaN||function(e){return e!=e},hg=Object.getOwnPropertyDescriptor;if(hg)try{hg([],"length")}catch{hg=null}var hm=hg,hy=Object.defineProperty||!1;if(hy)try{hy({},"a",{value:1})}catch{hy=!1}var hb,hv,hx,hw,hE,hA,hS,hk,hI,h_,hP,hC,hO,hT,hR,hB,hN,hD,hL,hM,hU,hF,hj,hz,h$,hH,hV,hq,hG,hW,hK,hJ,hZ,hQ,hX,hY,h0,h1,h2,h3,h8,h6,h4,h5,h9,h7,pe,pt,pr,pn,pi,ps,po,pa,pl,pu,pc,pd,pf,ph,pp,pg,pm,py,pb,pv,px,pw,pE,pA,pS,pk,pI,p_,pP,pC,pO,pT,pR,pB,pN,pD,pL,pM,pU,pF,pj,pz,p$,pH,pV,pq,pG,pW,pK,pJ,pZ,pQ,pX,pY,p0,p1,p2,p3,p8,p6,p4,p5,p9,p7,ge,gt,gr,gn,gi,gs,go,ga,gl,gu,gc,gd,gf,gh,gp,gg,gm,gy,gb,gv,gx,gw,gE,gA,gS,gk,gI,g_,gP,gC,gO,gT,gR,gB,gN,gD,gL,gM,gU,gF,gj,gz,g$,gH,gV,gq,gG,gW,gK,gJ,gZ,gQ,gX,gY,g0,g1,g2,g3,g8,g6,g4,g5,g9,g7,me,mt,mr,mn,mi,ms,mo,ma,ml,mu,mc,md,mf,mh,mp,mg,mm,my=hy;function mb(){return mA||(mA=1,mE="u">typeof Reflect&&Reflect.getPrototypeOf||null),mE}function mv(){return mk?mS:(mk=1,mS=ht.getPrototypeOf||null)}var mx,mw,mE,mA,mS,mk,mI,m_,mP=Object.prototype.toString,mC=Math.max,mO=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var s=0;s<t.length;s+=1)r[s+e.length]=t[s];return r},mT=function(e,t){for(var r=[],n=t||0,s=0;n<e.length;n+=1,s+=1)r[s]=e[n];return r},mR=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},mB=Function.prototype.bind||function(e){var t=this;if("function"!=typeof t||"[object Function]"!==mP.apply(t))throw TypeError("Function.prototype.bind called on incompatible "+t);for(var r,n=mT(arguments,1),s=mC(0,t.length-n.length),o=[],a=0;a<s;a++)o[a]="$"+a;if(r=Function("binder","return function ("+mR(o,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var s=t.apply(this,mO(n,arguments));return Object(s)===s?s:this}return t.apply(e,mO(n,arguments))}),t.prototype){var l=function(){};l.prototype=t.prototype,r.prototype=new l,l.prototype=null}return r},mN=Function.prototype.call;function mD(){return m_||(m_=1,mI=Function.prototype.apply),mI}var mL,mM,mU,mF,mj,mz,m$,mH="u">typeof Reflect&&Reflect&&Reflect.apply,mV=mD(),mq=mH||mB.call(mN,mV),mG=function(e){if(e.length<1||"function"!=typeof e[0])throw new fa("a function is required");return mq(mB,mN,e)},mW=Function,mK=function(e){try{return mW('"use strict"; return ('+e+").constructor;")()}catch{}},mJ=function(){throw new fa},mZ=hm?function(){try{return arguments.callee,mJ}catch{try{return hm(arguments,"callee").get}catch{return mJ}}}():mJ,mQ=(function(){if(mw)return mx;mw=1;var e="u">typeof Symbol&&Symbol,t=(mm||(mm=1,mg=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var s=Object.getOwnPropertySymbols(e);if(1!==s.length||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}),mg);return mx=function(){return"function"==typeof e&&"function"==typeof Symbol&&"symbol"==typeof e("foo")&&"symbol"==typeof Symbol("bar")&&t()}})()(),mX=function(){if(mF)return mU;mF=1;var e=mb(),t=mv(),r=function(){if(mM)return mL;mM=1;try{e=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var e,t=!!e&&hm&&hm(Object.prototype,"__proto__"),r=Object,n=r.getPrototypeOf;return mL=t&&"function"==typeof t.get?mG([t.get]):"function"==typeof n&&function(e){return n(null==e?e:r(e))}}();return mU=e?function(t){return e(t)}:t?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return t(e)}:r?function(e){return r(e)}:null}(),mY=mv(),m0=mb(),m1=mD(),m2={},m3=typeof Uint8Array>"u"||!mX?m$:mX(Uint8Array),m8={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?m$:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?m$:ArrayBuffer,"%ArrayIteratorPrototype%":mQ&&mX?mX([][Symbol.iterator]()):m$,"%AsyncFromSyncIteratorPrototype%":m$,"%AsyncFunction%":m2,"%AsyncGenerator%":m2,"%AsyncGeneratorFunction%":m2,"%AsyncIteratorPrototype%":m2,"%Atomics%":typeof Atomics>"u"?m$:Atomics,"%BigInt%":typeof BigInt>"u"?m$:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?m$:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?m$:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?m$:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":hr,"%eval%":eval,"%EvalError%":hn,"%Float16Array%":typeof Float16Array>"u"?m$:Float16Array,"%Float32Array%":typeof Float32Array>"u"?m$:Float32Array,"%Float64Array%":typeof Float64Array>"u"?m$:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?m$:FinalizationRegistry,"%Function%":mW,"%GeneratorFunction%":m2,"%Int8Array%":typeof Int8Array>"u"?m$:Int8Array,"%Int16Array%":typeof Int16Array>"u"?m$:Int16Array,"%Int32Array%":typeof Int32Array>"u"?m$:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":mQ&&mX?mX(mX([][Symbol.iterator]())):m$,"%JSON%":"object"==typeof JSON?JSON:m$,"%Map%":typeof Map>"u"?m$:Map,"%MapIteratorPrototype%":!(typeof Map>"u")&&mQ&&mX?mX(new Map()[Symbol.iterator]()):m$,"%Math%":Math,"%Number%":Number,"%Object%":ht,"%Object.getOwnPropertyDescriptor%":hm,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?m$:Promise,"%Proxy%":typeof Proxy>"u"?m$:Proxy,"%RangeError%":hi,"%ReferenceError%":hs,"%Reflect%":typeof Reflect>"u"?m$:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?m$:Set,"%SetIteratorPrototype%":!(typeof Set>"u")&&mQ&&mX?mX(new Set()[Symbol.iterator]()):m$,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?m$:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":mQ&&mX?mX(""[Symbol.iterator]()):m$,"%Symbol%":mQ?Symbol:m$,"%SyntaxError%":ho,"%ThrowTypeError%":mZ,"%TypedArray%":m3,"%TypeError%":fa,"%Uint8Array%":typeof Uint8Array>"u"?m$:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?m$:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?m$:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?m$:Uint32Array,"%URIError%":ha,"%WeakMap%":typeof WeakMap>"u"?m$:WeakMap,"%WeakRef%":typeof WeakRef>"u"?m$:WeakRef,"%WeakSet%":typeof WeakSet>"u"?m$:WeakSet,"%Function.prototype.call%":mN,"%Function.prototype.apply%":m1,"%Object.defineProperty%":my,"%Object.getPrototypeOf%":mY,"%Math.abs%":hl,"%Math.floor%":hu,"%Math.max%":hc,"%Math.min%":hd,"%Math.pow%":hf,"%Math.round%":hh,"%Math.sign%":function(e){return hp(e)||0===e?e:e<0?-1:1},"%Reflect.getPrototypeOf%":m0};if(mX)try{null.error}catch(e){var m6=mX(mX(e));m8["%Error.prototype%"]=m6}var m4=function e(t){var r;if("%AsyncFunction%"===t)r=mK("async function () {}");else if("%GeneratorFunction%"===t)r=mK("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=mK("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var s=e("%AsyncGenerator%");s&&mX&&(r=mX(s.prototype))}return m8[t]=r,r},m5={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m9=function(){if(mz)return mj;mz=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty;return mj=mB.call(e,t)}(),m7=mB.call(mN,Array.prototype.concat),ye=mB.call(m1,Array.prototype.splice),yt=mB.call(mN,String.prototype.replace),yr=mB.call(mN,String.prototype.slice),yn=mB.call(mN,RegExp.prototype.exec),yi=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ys=/\\(\\)?/g,yo=function(e){var t=yr(e,0,1),r=yr(e,-1);if("%"===t&&"%"!==r)throw new ho("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new ho("invalid intrinsic syntax, expected opening `%`");var n=[];return yt(e,yi,function(e,t,r,s){n[n.length]=r?yt(s,ys,"$1"):t||e}),n},ya=function(e,t){var r,n=e;if(m9(m5,n)&&(n="%"+(r=m5[n])[0]+"%"),m9(m8,n)){var s=m8[n];if(s===m2&&(s=m4(n)),typeof s>"u"&&!t)throw new fa("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:s}}throw new ho("intrinsic "+e+" does not exist!")},yl=function(e,t){if("string"!=typeof e||0===e.length)throw new fa("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new fa('"allowMissing" argument must be a boolean');if(null===yn(/^%?[^%]*%?$/,e))throw new ho("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=yo(e),n=r.length>0?r[0]:"",s=ya("%"+n+"%",t),o=s.name,a=s.value,l=!1,u=s.alias;u&&(n=u[0],ye(r,m7([0,1],u)));for(var c=1,d=!0;c<r.length;c+=1){var f=r[c],h=yr(f,0,1),p=yr(f,-1);if(('"'===h||"'"===h||"`"===h||'"'===p||"'"===p||"`"===p)&&h!==p)throw new ho("property names with quotes must have matching quotes");if("constructor"!==f&&d||(l=!0),n+="."+f,m9(m8,o="%"+n+"%"))a=m8[o];else if(null!=a){if(!(f in a)){if(!t)throw new fa("base intrinsic for "+e+" exists, but the property is not available.");return}if(hm&&c+1>=r.length){var g=hm(a,f);a=(d=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:a[f]}else d=m9(a,f),a=a[f];d&&!l&&(m8[o]=a)}}return a},yu=mG([yl("%String.prototype.indexOf%")]),yc=function(e,t){var r=yl(e,!!t);return"function"==typeof r&&yu(e,".prototype.")>-1?mG([r]):r},yd=yl("%Map%",!0),yf=yc("Map.prototype.get",!0),yh=yc("Map.prototype.set",!0),yp=yc("Map.prototype.has",!0),yg=yc("Map.prototype.delete",!0),ym=yc("Map.prototype.size",!0),yy=!!yd&&function(){var e,t={assert:function(e){if(!t.has(e))throw new fa("Side channel does not contain "+fq(e))},delete:function(t){if(e){var r=yg(e,t);return 0===ym(e)&&(e=void 0),r}return!1},get:function(t){if(e)return yf(e,t)},has:function(t){return!!e&&yp(e,t)},set:function(t,r){e||(e=new yd),yh(e,t,r)}};return t},yb=yl("%WeakMap%",!0),yv=yc("WeakMap.prototype.get",!0),yx=yc("WeakMap.prototype.set",!0),yw=yc("WeakMap.prototype.has",!0),yE=yc("WeakMap.prototype.delete",!0),yA=(yb?function(){var e,t,r={assert:function(e){if(!r.has(e))throw new fa("Side channel does not contain "+fq(e))},delete:function(r){if(yb&&r&&("object"==typeof r||"function"==typeof r)){if(e)return yE(e,r)}else if(yy&&t)return t.delete(r);return!1},get:function(r){return yb&&r&&("object"==typeof r||"function"==typeof r)&&e?yv(e,r):t&&t.get(r)},has:function(r){return yb&&r&&("object"==typeof r||"function"==typeof r)&&e?yw(e,r):!!t&&t.has(r)},set:function(r,n){yb&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new yb),yx(e,r,n)):yy&&(t||(t=yy()),t.set(r,n))}};return r}:yy)||yy||function(){var e,t={assert:function(e){if(!t.has(e))throw new fa("Side channel does not contain "+fq(e))},delete:function(t){var r=e&&e.next,n=he(e,t);return n&&r&&r===n&&(e=void 0),!!n},get:function(t){return f9(e,t)},has:function(t){var r;return!!(r=e)&&!!f5(r,t)},set:function(t,r){e||(e={next:void 0}),f7(e,t,r)}};return t},yS=String.prototype.replace,yk=/%20/g,yI="RFC3986",y_={default:yI,formatters:{RFC1738:function(e){return yS.call(e,yk,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738"},yP=Object.prototype.hasOwnProperty,yC=Array.isArray,yO=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),yT=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(yC(r)){for(var n=[],s=0;s<r.length;++s)"u">typeof r[s]&&n.push(r[s]);t.obj[t.prop]=n}}},yR=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)"u">typeof e[n]&&(r[n]=e[n]);return r},yB={combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var s=t[n],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],c=o[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:o,prop:u}),r.push(c))}return yT(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},encode:function(e,t,r,n,s){if(0===e.length)return e;var o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===r)return escape(o).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=1024){for(var u=o.length>=1024?o.slice(l,l+1024):o,c=[],d=0;d<u.length;++d){var f=u.charCodeAt(d);if(45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||s===y_.RFC1738&&(40===f||41===f)){c[c.length]=u.charAt(d);continue}if(f<128){c[c.length]=yO[f];continue}if(f<2048){c[c.length]=yO[192|f>>6]+yO[128|63&f];continue}if(f<55296||f>=57344){c[c.length]=yO[224|f>>12]+yO[128|f>>6&63]+yO[128|63&f];continue}d+=1,f=65536+((1023&f)<<10|1023&u.charCodeAt(d)),c[c.length]=yO[240|f>>18]+yO[128|f>>12&63]+yO[128|f>>6&63]+yO[128|63&f]}a+=c.join("")}return a},isBuffer:function(e){return!!e&&"object"==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(yC(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r&&"function"!=typeof r){if(yC(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!yP.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var s=t;return yC(t)&&!yC(r)&&(s=yR(t,n)),yC(t)&&yC(r)?(r.forEach(function(r,s){if(yP.call(t,s)){var o=t[s];o&&"object"==typeof o&&r&&"object"==typeof r?t[s]=e(o,r,n):t.push(r)}else t[s]=r}),t):Object.keys(r).reduce(function(t,s){var o=r[s];return yP.call(t,s)?t[s]=e(t[s],o,n):t[s]=o,t},s)}},yN=function(){var e,t={assert:function(e){if(!t.has(e))throw new fa("Side channel does not contain "+fq(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,r){e||(e=yA()),e.set(t,r)}};return t},yD=Object.prototype.hasOwnProperty,yL={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},yM=Array.isArray,yU=Array.prototype.push,yF=function(e,t){yU.apply(e,yM(t)?t:[t])},yj=Date.prototype.toISOString,yz=y_.default,y$={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:yB.encode,encodeValuesOnly:!1,filter:void 0,format:yz,formatter:y_.formatters[yz],indices:!1,serializeDate:function(e){return yj.call(e)},skipNulls:!1,strictNullHandling:!1},yH={},yV=function e(t,r,n,s,o,a,l,u,c,d,f,h,p,g,m,y,b,v){for(var x,w,E=t,A=v,S=0,k=!1;void 0!==(A=A.get(yH))&&!k;){var I=A.get(t);if(S+=1,"u">typeof I){if(I===S)throw RangeError("Cyclic object value");k=!0}typeof A.get(yH)>"u"&&(S=0)}if("function"==typeof d?E=d(r,E):E instanceof Date?E=p(E):"comma"===n&&yM(E)&&(E=yB.maybeMap(E,function(e){return e instanceof Date?p(e):e})),null===E){if(a)return c&&!y?c(r,y$.encoder,b,"key",g):r;E=""}if("string"==typeof(x=E)||"number"==typeof x||"boolean"==typeof x||"symbol"==typeof x||"bigint"==typeof x||yB.isBuffer(E))return c?[m(y?r:c(r,y$.encoder,b,"key",g))+"="+m(c(E,y$.encoder,b,"value",g))]:[m(r)+"="+m(String(E))];var _=[];if(typeof E>"u")return _;if("comma"===n&&yM(E))y&&c&&(E=yB.maybeMap(E,c)),w=[{value:E.length>0?E.join(",")||null:void 0}];else if(yM(d))w=d;else{var P=Object.keys(E);w=f?P.sort(f):P}var C=u?String(r).replace(/\./g,"%2E"):String(r),O=s&&yM(E)&&1===E.length?C+"[]":C;if(o&&yM(E)&&0===E.length)return O+"[]";for(var T=0;T<w.length;++T){var R=w[T],B="object"==typeof R&&R&&"u">typeof R.value?R.value:E[R];if(!(l&&null===B)){var N=h&&u?String(R).replace(/\./g,"%2E"):String(R),D=yM(E)?"function"==typeof n?n(O,N):O:O+(h?"."+N:"["+N+"]");v.set(t,S);var L=yN();L.set(yH,v),yF(_,e(B,D,n,s,o,a,l,u,"comma"===n&&y&&yM(E)?null:c,d,f,h,p,g,m,y,b,L))}}return _},yq=function(e){if(!e)return y$;if("u">typeof e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("u">typeof e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&"u">typeof e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");var t,r=e.charset||y$.charset;if("u">typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=y_.default;if("u">typeof e.format){if(!yD.call(y_.formatters,e.format))throw TypeError("Unknown format option provided.");n=e.format}var s=y_.formatters[n],o=y$.filter;if(("function"==typeof e.filter||yM(e.filter))&&(o=e.filter),t=e.arrayFormat in yL?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":y$.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?!0===e.encodeDotInKeys||y$.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:y$.addQueryPrefix,allowDots:a,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:y$.allowEmptyArrays,arrayFormat:t,charset:r,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:y$.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?y$.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:y$.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:y$.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:y$.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:y$.encodeValuesOnly,filter:o,format:n,formatter:s,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:y$.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:y$.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:y$.strictNullHandling}},yG=Object.prototype.hasOwnProperty,yW=Array.isArray,yK={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:yB.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},yJ=function(e,t,r){if(e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&r>=t.arrayLimit)throw RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(1===t.arrayLimit?"":"s")+" allowed in an array.");return e},yZ=function(e,t){var r={__proto__:null},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;n=n.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=n.split(t.delimiter,t.throwOnLimitExceeded?s+1:s);if(t.throwOnLimitExceeded&&o.length>s)throw RangeError("Parameter limit exceeded. Only "+s+" parameter"+(1===s?"":"s")+" allowed.");var a,l=-1,u=t.charset;if(t.charsetSentinel)for(a=0;a<o.length;++a)0===o[a].indexOf("utf8=")&&("utf8=%E2%9C%93"===o[a]?u="utf-8":"utf8=%26%2310003%3B"===o[a]&&(u="iso-8859-1"),l=a,a=o.length);for(a=0;a<o.length;++a)if(a!==l){var c,d,f=o[a],h=f.indexOf("]="),p=-1===h?f.indexOf("="):h+1;-1===p?(c=t.decoder(f,yK.decoder,u,"key"),d=t.strictNullHandling?null:""):(c=t.decoder(f.slice(0,p),yK.decoder,u,"key"),d=yB.maybeMap(yJ(f.slice(p+1),t,yW(r[c])?r[c].length:0),function(e){return t.decoder(e,yK.decoder,u,"value")})),d&&t.interpretNumericEntities&&"iso-8859-1"===u&&(d=String(d).replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),f.indexOf("[]=")>-1&&(d=yW(d)?[d]:d);var g=yG.call(r,c);g&&"combine"===t.duplicates?r[c]=yB.combine(r[c],d):g&&"last"!==t.duplicates||(r[c]=d)}return r},yQ=function(e,t,r,n){var s=0;if(e.length>0&&"[]"===e[e.length-1]){var o=e.slice(0,-1).join("");s=Array.isArray(t)&&t[o]?t[o].length:0}for(var a=n?t:yJ(t,r,s),l=e.length-1;l>=0;--l){var u,c=e[l];if("[]"===c&&r.parseArrays)u=r.allowEmptyArrays&&(""===a||r.strictNullHandling&&null===a)?[]:yB.combine([],a);else{u=r.plainObjects?{__proto__:null}:{};var d="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,f=r.decodeDotInKeys?d.replace(/%2E/g,"."):d,h=parseInt(f,10);r.parseArrays||""!==f?!isNaN(h)&&c!==f&&String(h)===f&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(u=[])[h]=a:"__proto__"!==f&&(u[f]=a):u={0:a}}a=u}return a},yX=function(e,t,r,n){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(s),l=a?s.slice(0,a.index):s,u=[];if(l){if(!r.plainObjects&&yG.call(Object.prototype,l)&&!r.allowPrototypes)return;u.push(l)}for(var c=0;r.depth>0&&null!==(a=o.exec(s))&&c<r.depth;){if(c+=1,!r.plainObjects&&yG.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(a[1])}if(a){if(!0===r.strictDepth)throw RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");u.push("["+s.slice(a.index)+"]")}return yQ(u,t,r,n)}},yY=function(e){if(!e)return yK;if("u">typeof e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("u">typeof e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&"u">typeof e.decoder&&"function"!=typeof e.decoder)throw TypeError("Decoder has to be a function.");if("u">typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if("u">typeof e.throwOnLimitExceeded&&"boolean"!=typeof e.throwOnLimitExceeded)throw TypeError("`throwOnLimitExceeded` option must be a boolean");var t=typeof e.charset>"u"?yK.charset:e.charset,r=typeof e.duplicates>"u"?yK.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw TypeError("The duplicates option must be either combine, first, or last");return{allowDots:typeof e.allowDots>"u"?!0===e.decodeDotInKeys||yK.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:yK.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:yK.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:yK.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:yK.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:yK.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:yK.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:yK.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:yK.decoder,delimiter:"string"==typeof e.delimiter||yB.isRegExp(e.delimiter)?e.delimiter:yK.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:yK.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:yK.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:yK.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:yK.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:yK.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:yK.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof e.throwOnLimitExceeded&&e.throwOnLimitExceeded}};function y0(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var y1=/^([a-z0-9.+-]+:)/i,y2=/:[0-9]*$/,y3=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,y8=["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"])),y6=["%","/","?",";","#"].concat(y8),y4=["/","?","#"],y5=/^[+a-z0-9A-Z_-]{0,63}$/,y9=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y7={javascript:!0,"javascript:":!0},be={javascript:!0,"javascript:":!0},bt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},br={parse:function(e,t){var r=yY(t);if(""===e||null===e||typeof e>"u")return r.plainObjects?{__proto__:null}:{};for(var n="string"==typeof e?yZ(e,r):e,s=r.plainObjects?{__proto__:null}:{},o=Object.keys(n),a=0;a<o.length;++a){var l=o[a],u=yX(l,n[l],r,"string"==typeof e);s=yB.merge(s,u,r)}return!0===r.allowSparse?s:yB.compact(s)},stringify:function(e,t){var r,n,s=e,o=yq(t);"function"==typeof o.filter?s=(0,o.filter)("",s):yM(o.filter)&&(r=o.filter);var a=[];if("object"!=typeof s||null===s)return"";var l=yL[o.arrayFormat],u="comma"===l&&o.commaRoundTrip;r||(r=Object.keys(s)),o.sort&&r.sort(o.sort);for(var c=yN(),d=0;d<r.length;++d){var f=r[d],h=s[f];o.skipNulls&&null===h||yF(a,yV(h,f,l,u,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,c))}var p=a.join(o.delimiter),g=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),p.length>0?g+p:""}};function bn(e,t,r){if(e&&"object"==typeof e&&e instanceof y0)return e;var n=new y0;return n.parse(e,t,r),n}y0.prototype.parse=function(e,t,r){if("string"!=typeof e)throw TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),s=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(s);o[0]=o[0].replace(/\\/g,"/");var a=e=o.join(s);if(a=a.trim(),!r&&1===e.split("#").length){var l=y3.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=br.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=y1.exec(a);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,a=a.substr(u.length)}if(r||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var d="//"===a.substr(0,2);d&&!(u&&be[u])&&(a=a.substr(2),this.slashes=!0)}if(!be[u]&&(d||u&&!bt[u])){for(var f,h,p=-1,g=0;g<y4.length;g++){var m=a.indexOf(y4[g]);-1!==m&&(-1===p||m<p)&&(p=m)}-1!==(h=-1===p?a.lastIndexOf("@"):a.lastIndexOf("@",p))&&(f=a.slice(0,h),a=a.slice(h+1),this.auth=decodeURIComponent(f)),p=-1;for(var g=0;g<y6.length;g++){var m=a.indexOf(y6[g]);-1!==m&&(-1===p||m<p)&&(p=m)}-1===p&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var b=this.hostname.split(/\./),g=0,v=b.length;g<v;g++){var x=b[g];if(x&&!x.match(y5)){for(var w="",E=0,A=x.length;E<A;E++)x.charCodeAt(E)>127?w+="x":w+=x[E];if(!w.match(y5)){var S=b.slice(0,g),k=b.slice(g+1),I=x.match(y9);I&&(S.push(I[1]),k.unshift(I[2])),k.length&&(a="/"+k.join(".")+a),this.hostname=S.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=fo.toASCII(this.hostname));var _=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+_,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!y7[c])for(var g=0,v=y8.length;g<v;g++){var C=y8[g];if(-1!==a.indexOf(C)){var O=encodeURIComponent(C);O===C&&(O=escape(C)),a=a.split(C).join(O)}}var T=a.indexOf("#");-1!==T&&(this.hash=a.substr(T),a=a.slice(0,T));var R=a.indexOf("?");if(-1!==R?(this.search=a.substr(R),this.query=a.substr(R+1),t&&(this.query=br.parse(this.query)),a=a.slice(0,R)):t&&(this.search="",this.query={}),a&&(this.pathname=a),bt[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var _=this.pathname||"",B=this.search||"";this.path=_+B}return this.href=this.format(),this},y0.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":")+"@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(o=br.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||bt[t])&&!1!==s?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+s+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+n},y0.prototype.resolve=function(e){return this.resolveObject(bn(e,!1,!0)).format()},y0.prototype.resolveObject=function(e){if("string"==typeof e){var t=new y0;t.parse(e,!1,!0),e=t}for(var r=new y0,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];r[o]=this[o]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),l=0;l<a.length;l++){var u=a[l];"protocol"!==u&&(r[u]=e[u])}return bt[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!bt[e.protocol]){for(var c=Object.keys(e),d=0;d<c.length;d++){var f=c[d];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||be[e.protocol])r.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var p=r.pathname||"",g=r.search||"";r.path=p+g}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||m||r.host&&e.pathname,v=b,x=r.pathname&&r.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],w=r.protocol&&!bt[r.protocol];if(w&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),b=b&&(""===h[0]||""===x[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,x=h;else if(h.length)x||(x=[]),x.pop(),x=x.concat(h),r.search=e.search,r.query=e.query;else if(null!=e.search){if(w){r.host=x.shift(),r.hostname=r.host;var E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");E&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname)}return r.search=e.search,r.query=e.query,(null!==r.pathname||null!==r.search)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=x.slice(-1)[0],S=(r.host||e.host||x.length>1)&&("."===A||".."===A)||""===A,k=0,I=x.length;I>=0;I--)"."===(A=x[I])?x.splice(I,1):".."===A?(x.splice(I,1),k++):k&&(x.splice(I,1),k--);if(!b&&!v)for(;k--;)x.unshift("..");b&&""!==x[0]&&(!x[0]||"/"!==x[0].charAt(0))&&x.unshift(""),S&&"/"!==x.join("/").substr(-1)&&x.push("");var _=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(w){r.hostname=_?"":x.length?x.shift():"",r.host=r.hostname;var E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");E&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname)}return(b=b||r.host&&x.length)&&!_&&x.unshift(""),x.length>0?r.pathname=x.join("/"):(r.pathname=null,r.path=null),(null!==r.pathname||null!==r.search)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},y0.prototype.parseHost=function(){var e=this.host,t=y2.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},fi.parse=bn,fi.resolve=function(e,t){return bn(e,!1,!0).resolve(t)},fi.resolveObject=function(e,t){return e?bn(e,!1,!0).resolveObject(t):t},fi.format=function(e){return"string"==typeof e&&(e=bn(e)),e instanceof y0?e.format():y0.prototype.format.call(e)},fi.Url=y0;var bi=Object.defineProperty,bs=Object.getOwnPropertyDescriptor;let bo=class{constructor({webSocketUrl:e}){eY(this,"webSocketBaseUrl"),this.webSocketBaseUrl=e}genuineCheck(e){let t=fi.format({pathname:`${this.webSocketBaseUrl}/genuine`,query:e});return this._connectWebSocket(t)}installApp(e){let t=fi.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}listInstalledApps(e){let t=fi.format({pathname:`${this.webSocketBaseUrl}/apps/list`,query:e});return this._connectWebSocket(t)}uninstallApp(e){let t=fi.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateFirmware(e){let t=fi.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateMcu(e){let t=fi.format({pathname:`${this.webSocketBaseUrl}/mcu`,query:e});return this._connectWebSocket(t)}_connectWebSocket(e){try{return rU(new sz(e))}catch(e){return rM(new ob(e))}}};bo=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?bs(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&bi(t,r,o),o})([oZ(),(M=oW(uw.DmkConfig),(e,t)=>M(e,t,0))],bo);var ba=Object.defineProperty,bl=Object.getOwnPropertyDescriptor;let bu=class{constructor(e){this.dataSource=e}genuineCheck(e,t){let r={targetId:e.targetId.toString(),perso:t.perso};return this.dataSource.genuineCheck(r)}installApp(e,t){let{perso:r,firmware:n,firmwareKey:s,hash:o}=t,a={targetId:e.targetId.toString(),perso:r,firmware:n,firmwareKey:s,hash:o};return this.dataSource.installApp(a)}listInstalledApps(e,t){let r={targetId:e.targetId.toString(),perso:t.perso};return this.dataSource.listInstalledApps(r)}uninstallApp(e,t){let{perso:r,delete:n,deleteKey:s,hash:o}=t,a={targetId:e.targetId.toString(),perso:r,firmware:n,firmwareKey:s,hash:o};return this.dataSource.uninstallApp(a)}updateFirmware(e,t){let r={targetId:e.targetId.toString(),perso:t.perso,firmware:t.firmware,firmwareKey:t.firmwareKey};return this.dataSource.updateFirmware(r)}updateMcu(e,t){let r={targetId:e.targetId.toString(),version:t.version};return this.dataSource.updateMcu(r)}};bu=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?bl(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&ba(t,r,o),o})([oZ(),(U=oW(uw.SecureChannelDataSource),(e,t)=>U(e,t,0))],bu);let bc=({stub:e,config:t})=>new aP(({bind:e})=>{e(uw.DmkConfig).toConstantValue(t),e(uw.SecureChannelDataSource).to(bo),e(uw.SecureChannelService).to(bu)}),bd="wss://scriptrunner.api.live.ledger.com/update";var bf=Object.defineProperty,bh=Object.getOwnPropertyDescriptor,bp=(e,t)=>(r,n)=>t(r,n,e);let bg=class{constructor(e,t){eY(this,"_sessionService"),eY(this,"_logger"),this._sessionService=e,this._logger=t("SendApduUseCase")}async execute({sessionId:e,apdu:t,abortTimeout:r,triggersDisconnection:n}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:async s=>(await s.sendApdu(t,{abortTimeout:r,triggersDisconnection:n})).caseOf({Right:e=>e,Left:r=>{throw this._logger.error("Error sending APDU",{data:{sessionId:e,apdu:t,error:r}}),r}}),Left:e=>{throw this._logger.error("Error getting deviceSession",{data:{error:e}}),e}})}};bg=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?bh(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&bf(t,r,o),o})([oZ(),bp(0,oW(lh.DeviceSessionService)),bp(1,oW(li.LoggerPublisherServiceFactory))],bg);let bm=({stub:e=!1})=>new aP(({bind:t,rebindSync:r})=>{t(lm.SendApduUseCase).to(bg),e&&r(lm.SendApduUseCase).to(lS)});var by=Object.defineProperty,bb=Object.getOwnPropertyDescriptor,bv=(e,t)=>(r,n)=>t(r,n,e);let bx=class{constructor(e,t,r,n,s,o){if(eY(this,"_transports",new Map),eY(this,"_logger"),this._config=t,this._loggerModuleFactory=r,this._deviceModelDataSource=n,this._apduSenderServiceFactory=s,this._apduReceiverServiceFactory=o,this._logger=r("TransportService"),0===e.length)throw this._logger.warn("No transports provided, please check your configuration"),new sD("No transports provided, please check your configuration");for(let t of e){let e=this.addTransport(t);if(e.isLeft())throw e.extract()}}addTransport(e){let t=e({deviceModelDataSource:this._deviceModelDataSource,loggerServiceFactory:this._loggerModuleFactory,config:this._config,apduSenderServiceFactory:this._apduSenderServiceFactory,apduReceiverServiceFactory:this._apduReceiverServiceFactory});return this.addTransportInternal(t)}addTransportInternal(e){return this.getTransport(e.getIdentifier()).isJust()?(this._logger.warn(`Transport ${e.getIdentifier()} already exists, please check your configuration`),rM(new sT(`Transport ${e.getIdentifier()} already exists, please check your configuration`))):(this._transports.set(e.getIdentifier(),e),rU(void 0))}getTransport(e){return rC.fromNullable(this._transports.get(e))}getAllTransports(){return Array.from(this._transports.values())}closeConnection(e){this.getTransport(e.transport).map(t=>t.disconnect({connectedDevice:e}))}};bx=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?bb(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&by(t,r,o),o})([oZ(),bv(0,oW(ly.TransportsInput)),bv(1,oW(ly.DmkConfig)),bv(2,oW(li.LoggerPublisherServiceFactory)),bv(3,oW(l8.DeviceModelDataSource)),bv(4,oW(lh.ApduSenderServiceFactory)),bv(5,oW(lh.ApduReceiverServiceFactory))],bx);let bw=({stub:e=!1,transports:t=[],config:r}={})=>new aP(({bind:e})=>{e(ly.TransportsInput).toConstantValue(t),e(ly.TransportService).to(bx).inSingletonScope(),e(ly.DmkConfig).toConstantValue(r)}),bE=({stub:e=!1,transports:t=[],loggers:r=[],config:n={mockUrl:dX,managerApiUrl:dQ,webSocketUrl:bd,provider:dY,firmwareDistributionSalt:d0}})=>{let s=new aZ;return s.loadSync(l3({stub:e}),l6({stub:e}),bw({stub:e,transports:t,config:n}),fn({stub:e,config:n}),bc({stub:e,config:n}),u8({stub:e}),u7({subscribers:r}),ud({stub:e}),bm({stub:e}),lk({stub:e}),lT({stub:e})),s},bA=class{constructor({stub:e,transports:t,loggers:r,config:n}={}){eY(this,"container"),this.container=bE({stub:e,transports:t,loggers:r,config:n})}getVersion(){return this.container.get(lf.GetDmkVersionUseCase).getDmkVersion()}startDiscovering(e){return this.container.get(lp.StartDiscoveringUseCase).execute(e)}stopDiscovering(){return this.container.get(lp.StopDiscoveringUseCase).execute()}listenToAvailableDevices(e){return this.container.get(lp.ListenToAvailableDevicesUseCase).execute(e)}async reconnect(e){return this.container.get(lp.ReconnectUseCase).execute(e)}connect(e){return this.container.get(lp.ConnectUseCase).execute(e)}disconnect(e){return this.container.get(lp.DisconnectUseCase).execute(e)}sendApdu(e){return this.container.get(lm.SendApduUseCase).execute(e)}sendCommand(e){return this.container.get(ld.SendCommandUseCase).execute(e)}executeDeviceAction(e){return this.container.get(lO.ExecuteDeviceActionUseCase).execute(e)}getConnectedDevice(e){return this.container.get(lp.GetConnectedDeviceUseCase).execute(e)}getDeviceSessionState(e){return this.container.get(lh.GetDeviceSessionStateUseCase).execute(e)}close(){return this.container.get(lh.CloseSessionsUseCase).execute()}listConnectedDevices(){return this.container.get(lp.ListConnectedDevicesUseCase).execute()}listenToConnectedDevice(){return this.container.get(lp.ListenToConnectedDeviceUseCase).execute()}disableDeviceSessionRefresher(e){return this.container.get(lh.DisableDeviceSessionRefresherUseCase).execute(e)}setProvider(e){return this.container.get(lg.SetProviderUseCase).execute(e)}getProvider(){return this.container.get(lg.ManagerApiDataSource).getProvider()}isEnvironmentSupported(){return this.container.get(ly.TransportService).getAllTransports().some(e=>e.isSupported())}},bS=class{constructor(){eY(this,"stub",!1),eY(this,"loggers",[]),eY(this,"transports",[]),eY(this,"config",{managerApiUrl:dQ,mockUrl:dX,webSocketUrl:bd,provider:dY,firmwareDistributionSalt:d0})}build(){return new bA({stub:this.stub,transports:this.transports,loggers:this.loggers,config:this.config})}setStub(e){return this.stub=e,this}addTransport(e){return this.transports.push(e),this}addLogger(e){return this.loggers.push(e),this}addConfig(e){return this.config={...this.config,...e},this}},bk=class{constructor(e=u6.Debug){eY(this,"maxLevel"),this.maxLevel=e}log(e,t,r){let n=`[${r.tag}]`;switch(e){case u6.Info:this.maxLevel>=u6.Info&&this.logWithData(n,console.info,t,r);break;case u6.Warning:this.maxLevel>=u6.Warning&&this.logWithData(n,console.warn,t,r);break;case u6.Debug:this.maxLevel>=u6.Debug&&this.logWithData(n,console.debug,t,r);break;case u6.Error:this.maxLevel>=u6.Error&&this.logWithData(n,console.error,t,r);break;case u6.Fatal:this.maxLevel>=u6.Fatal&&this.logWithData(n,console.error,t,r);break;default:this.logWithData(n,console.log,t,r)}}logWithData(e,t,r,n){n.data?t(e,r,n.data):t(e,r)}},bI=class{constructor(e){eY(this,"deviceId"),eY(this,"deviceAdpuSender"),eY(this,"machineActor"),eY(this,"timeoutDuration"),eY(this,"timeout",null),this.deviceId=e.deviceId,this.deviceAdpuSender=e.deviceApduSender,this.timeoutDuration=e.timeoutDuration,this.machineActor=ns(function({sendApduFn:e,startReconnectionTimeout:t,cancelReconnectionTimeout:r,tryToReconnect:n,onTerminated:s,closeConnection:o}){return ia({types:{},actions:{startTimer:()=>{t()},cancelTimer:()=>{r()},reconnectionTimeoutEvent:function(e){function t(e,t){}return t.type="xstate.emit",t.event=e,t.resolve=n9,t.execute=n7,t}({type:"ReconnectionTimedOut"}),sendApdu:({context:t})=>{t.apduInProgress.map(({apdu:t,abortTimeout:r})=>{e(t,!1,r)})},sendApduResponse:({context:e},t)=>{e.apduInProgress.map(({responseCallback:e})=>e(t.response))},sendGetAppAndVersion:()=>{e(new tS().getApdu().getRawApdu(),!1)},tryToReconnect:()=>{n()},clearApduInProgress:n5({apduInProgress:rB}),clearApduResponse:n5({apduResponse:rB}),signalTermination:()=>{s()},closeConnection:()=>{o()}},guards:{isApduThatTriggersDisconnection:({context:e,event:t})=>"ApduResponseReceived"===t.type&&e.apduInProgress.caseOf({Just:({triggersDisconnection:e,apdu:r})=>(e||tm.isApduThatTriggersDisconnection(r))&&tm.isSuccessResponse(t.apduResponse),Nothing:()=>!1}),isSendApduBusyError:({event:e})=>"ApduResponseReceived"===e.type&&102===e.apduResponse.statusCode[0]&&1===e.apduResponse.statusCode[1]}}).createMachine({id:"deviceConnection",initial:"Connected",context:{apduInProgress:rB,apduResponse:rB},states:{Connected:{on:{DeviceDisconnected:{target:"WaitingForReconnection"},SendApduCalled:{target:"SendingApdu",actions:n5({apduInProgress:({event:e})=>rC.of({apdu:e.apdu,triggersDisconnection:e.triggersDisconnection,abortTimeout:e.abortTimeout,responseCallback:e.responseCallback})})},CloseConnectionCalled:{target:"Terminated"}}},SendingApdu:{entry:"sendApdu",on:{ApduResponseReceived:[{guard:"isApduThatTriggersDisconnection",target:"WaitingForDisconnection",actions:[n5({apduResponse:({event:e})=>rC.of(e.apduResponse)})]},{target:"Connected",actions:[{type:"sendApduResponse",params:({event:e})=>({response:rU(e.apduResponse)})},{type:"clearApduInProgress"}]}],ApduSendingError:{target:"Connected",actions:[{type:"sendApduResponse",params:({event:e})=>({response:rM(e.error)})},"clearApduInProgress"]},DeviceDisconnected:{target:"WaitingForReconnection",actions:[{type:"sendApduResponse",params:{response:rM(new sR)}},"clearApduInProgress"]},CloseConnectionCalled:{target:"Terminated",actions:[{type:"sendApduResponse",params:{response:rM(new sR)}},"clearApduInProgress"]},SendApduCalled:{actions:({event:e})=>{e.responseCallback(rM(new sB))}}}},WaitingForDisconnection:{entry:["sendGetAppAndVersion"],exit:[{type:"sendApduResponse",params:({context:e})=>({response:e.apduResponse.caseOf({Just:e=>rU(e),Nothing:()=>rM(new tb)})})},{type:"clearApduInProgress"},{type:"clearApduResponse"}],on:{ApduResponseReceived:[{guard:"isSendApduBusyError",actions:["sendGetAppAndVersion"],target:"WaitingForDisconnection"},{target:"Connected"}],ApduSendingError:[{target:"WaitingForReconnection"}],SendApduCalled:{actions:({event:e})=>{e.responseCallback(rM(new sB))}},DeviceDisconnected:{target:"WaitingForReconnection"},CloseConnectionCalled:{target:"Terminated"}}},WaitingForReconnection:{entry:["startTimer","tryToReconnect"],on:{DeviceConnected:{target:"Connected",actions:"cancelTimer"},SendApduCalled:{target:"WaitingForReconnectionWithQueuedSendApdu",actions:n5({apduInProgress:({event:e})=>rC.of({apdu:e.apdu,triggersDisconnection:e.triggersDisconnection,abortTimeout:e.abortTimeout,responseCallback:e.responseCallback})})},ReconnectionTimedOut:{target:"Terminated"},CloseConnectionCalled:{target:"Terminated"}}},WaitingForReconnectionWithQueuedSendApdu:{on:{DeviceConnected:{target:"SendingApdu",actions:"cancelTimer"},ReconnectionTimedOut:{target:"Terminated",actions:[{type:"sendApduResponse",params:{response:rM(new sN)}},{type:"clearApduInProgress"}]},CloseConnectionCalled:{target:"Terminated",actions:[{type:"sendApduResponse",params:{response:rM(new sR)}},"clearApduInProgress"]},SendApduCalled:{actions:({event:e})=>{e.responseCallback(rM(new sB))}}}},Terminated:{entry:["signalTermination","closeConnection"],type:"final"}}})}({sendApduFn:(e,t,r)=>this.sendApduToDeviceConnection(e,t,r),startReconnectionTimeout:()=>this.startReconnectionTimeout(),cancelReconnectionTimeout:()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},tryToReconnect:()=>{e.tryToReconnect(this.timeoutDuration)},onTerminated:e.onTerminated,closeConnection:()=>{this.deviceAdpuSender.closeConnection()}})),this.machineActor.start()}startReconnectionTimeout(){this.timeout=setTimeout(()=>{this.machineActor.send({type:"ReconnectionTimedOut"})},this.timeoutDuration)}sendApduToDeviceConnection(e,t,r){this.deviceAdpuSender.sendApdu(e,t,r).then(e=>{e.caseOf({Left:e=>{this.machineActor.send({type:"ApduSendingError",error:e})},Right:e=>{this.machineActor.send({type:"ApduResponseReceived",apduResponse:e})}})}).catch(e=>{this.machineActor.send({type:"ApduSendingError",error:new tb(e)})})}getDependencies(){return this.deviceAdpuSender.getDependencies()}setDependencies(e){this.deviceAdpuSender.setDependencies(e)}getDeviceId(){return this.deviceId}sendApdu(e,t,r){return new Promise(n=>{this.machineActor.send({type:"SendApduCalled",apdu:e,triggersDisconnection:!!t,abortTimeout:r,responseCallback:n})})}async setupConnection(){await this.deviceAdpuSender.setupConnection()}eventDeviceConnected(){this.machineActor.send({type:"DeviceConnected"})}eventDeviceDisconnected(){this.machineActor.send({type:"DeviceDisconnected"})}closeConnection(){this.machineActor.send({type:"CloseConnectionCalled"})}},b_=class{constructor({id:e,deviceModel:t,type:r,transport:n,sendApdu:s,name:o}){eY(this,"id"),eY(this,"deviceModel"),eY(this,"sendApdu"),eY(this,"type"),eY(this,"transport"),eY(this,"name"),this.id=e,this.deviceModel=t,this.sendApdu=s,this.type=r,this.transport=n,this.name=o}},bP=class extends sE{constructor(e){super(e),eY(this,"_tag","WebHidTransportNotSupportedError"),this.err=e}},bC=class extends sE{constructor(e){super(e),eY(this,"_tag","WebHidSendReportError"),this.err=e}};var bO=function(){return(bO=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function bT(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return a}(arguments[t]));return e}function bR(){return!("u">typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call(0)}var bB={};function bN(){return bR()?ea:"u">typeof window?window:"u">typeof self?self:bB}function bD(e,t,r){var n=r||bN(),s=n.__SENTRY__=n.__SENTRY__||{};return s[e]||(s[e]=t())}var bL=Object.prototype.toString;function bM(e){return"[object Object]"===bL.call(e)}function bU(e){return!!(e&&e.then&&"function"==typeof e.then)}var bF=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,bj=bN(),bz=["debug","info","warn","error","log","assert"];function b$(e){var t=bN();if(!("console"in t))return e();var r=t.console,n={};bz.forEach(function(e){var s=r[e]&&r[e].__sentry_original__;e in t.console&&s&&(n[e]=r[e],r[e]=s)});try{return e()}finally{Object.keys(n).forEach(function(e){r[e]=n[e]})}}function bH(){var e=!1,t={enable:function(){e=!0},disable:function(){e=!1}};return bF?bz.forEach(function(r){t[r]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e&&b$(function(){var e;(e=bj.console)[r].apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return a}(arguments[t]));return e}(["Sentry Logger ["+r+"]:"],t))})}}):bz.forEach(function(e){t[e]=function(){}}),t}function bV(){var e=bN(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var r=new Uint16Array(8);t.getRandomValues(r),r[3]=4095&r[3]|16384,r[4]=16383&r[4]|32768;var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(r[0])+n(r[1])+n(r[2])+n(r[3])+n(r[4])+n(r[5])+n(r[6])+n(r[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}SI=bF?bD("logger",bH):bH();var bq=function(){function e(e){var t=this;this._state=0,this._handlers=[],this._resolve=function(e){t._setResult(1,e)},this._reject=function(e){t._setResult(2,e)},this._setResult=function(e,r){if(0===t._state){if(bU(r))return void r.then(t._resolve,t._reject);t._state=e,t._value=r,t._executeHandlers()}},this._executeHandlers=function(){if(0!==t._state){var e=t._handlers.slice();t._handlers=[],e.forEach(function(e){e[0]||(1===t._state&&e[1](t._value),2===t._state&&e[2](t._value),e[0]=!0)})}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.prototype.then=function(t,r){var n=this;return new e(function(e,s){n._handlers.push([!1,function(r){if(t)try{e(t(r))}catch(e){s(e)}else e(r)},function(t){if(r)try{e(r(t))}catch(e){s(e)}else s(t)}]),n._executeHandlers()})},e.prototype.catch=function(e){return this.then(function(e){return e},e)},e.prototype.finally=function(t){var r=this;return new e(function(e,n){var s,o;return r.then(function(e){o=!1,s=e,t&&t()},function(e){o=!0,s=e,t&&t()}).then(function(){if(o)return void n(s);e(s)})})},e}(),bG={nowSeconds:function(){return Date.now()/1e3}},bW=bR()?function(){try{var t;return(t="perf_hooks",e.require(t)).performance}catch{return}}():function(){var e=bN().performance;if(!(!e||!e.now))return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),bK=void 0===bW?bG:{nowSeconds:function(){return(bW.timeOrigin+bW.now())/1e3}},bJ=bG.nowSeconds.bind(bG),bZ=bK.nowSeconds.bind(bK);!function(){var e=bN().performance;if(!(!e||!e.now)){var t=e.now(),r=Date.now(),n=e.timeOrigin?Math.abs(e.timeOrigin+t-r):36e5,s=e.timing&&e.timing.navigationStart,o="number"==typeof s?Math.abs(s+t-r):36e5;(n<36e5||o<36e5)&&n<=o&&e.timeOrigin}}();var bQ=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return e.clone=function(t){var r=new e;return t&&(r._breadcrumbs=bT(t._breadcrumbs),r._tags=bO({},t._tags),r._extra=bO({},t._extra),r._contexts=bO({},t._contexts),r._user=t._user,r._level=t._level,r._span=t._span,r._session=t._session,r._transactionName=t._transactionName,r._fingerprint=t._fingerprint,r._eventProcessors=bT(t._eventProcessors),r._requestSession=t._requestSession),r},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(e){return this._requestSession=e,this},e.prototype.setTags=function(e){return this._tags=bO(bO({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var r;return this._tags=bO(bO({},this._tags),((r={})[e]=t,r)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=bO(bO({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var r;return this._extra=bO(bO({},this._extra),((r={})[e]=t,r)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var r;return null===t?delete this._contexts[e]:this._contexts=bO(bO({},this._contexts),((r={})[e]=t,r)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e=this.getSpan();return e&&e.transaction},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var r=t(this);return r instanceof e?r:this}return t instanceof e?(this._tags=bO(bO({},this._tags),t._tags),this._extra=bO(bO({},this._extra),t._extra),this._contexts=bO(bO({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):bM(t)&&(this._tags=bO(bO({},this._tags),t.tags),this._extra=bO(bO({},this._extra),t.extra),this._contexts=bO(bO({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var r="number"==typeof t?Math.min(t,100):100;if(r<=0)return this;var n=bO({timestamp:bJ()},e);return this._breadcrumbs=bT(this._breadcrumbs,[n]).slice(-r),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){if(this._extra&&Object.keys(this._extra).length&&(e.extra=bO(bO({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=bO(bO({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=bO(bO({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=bO(bO({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=bO({trace:this._span.getTraceContext()},e.contexts);var r=this._span.transaction&&this._span.transaction.name;r&&(e.tags=bO({transaction:r},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=bT(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors(bT(bD("globalEventProcessors",function(){return[]}),this._eventProcessors),e,t)},e.prototype.setSDKProcessingMetadata=function(e){return this._sdkProcessingMetadata=bO(bO({},this._sdkProcessingMetadata),e),this},e.prototype._notifyEventProcessors=function(e,t,r,n){var s=this;return void 0===n&&(n=0),new bq(function(o,a){var l=e[n];if(null===t||"function"!=typeof l)o(t);else{var u=l(bO({},t),r);bU(u)?u.then(function(t){return s._notifyEventProcessors(e,t,r,n+1).then(o)}).then(null,a):s._notifyEventProcessors(e,u,r,n+1).then(o).then(null,a)}})},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(t){t(e)}),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}(),bX=function(){function e(e){this.errors=0,this.sid=bV(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var t=bZ();this.timestamp=t,this.started=t,e&&this.update(e)}return e.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||bZ(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:bV()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):"ok"===this.status?this.update({status:"exited"}):this.update()},e.prototype.toJSON=function(){return function e(t){var r,n;if(bM(t)){var s={};try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(t)),a=o.next();!a.done;a=o.next()){var l=a.value;"u">typeof t[l]&&(s[l]=e(t[l]))}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}return Array.isArray(t)?t.map(e):t}({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},e}(),bY=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,b0=function(){function e(e,t,r){void 0===t&&(t=new bQ),void 0===r&&(r=4),this._version=r,this._stack=[{}],this.getStackTop().scope=t,e&&this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=bQ.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var r=this._lastEventId=t&&t.event_id?t.event_id:bV(),n=t;if(!t){var s=void 0;try{throw Error("Sentry syntheticException")}catch(e){s=e}n={originalException:e,syntheticException:s}}return this._invokeClient("captureException",e,bO(bO({},n),{event_id:r})),r},e.prototype.captureMessage=function(e,t,r){var n=this._lastEventId=r&&r.event_id?r.event_id:bV(),s=r;if(!r){var o=void 0;try{throw Error(e)}catch(e){o=e}s={originalException:e,syntheticException:o}}return this._invokeClient("captureMessage",e,t,bO(bO({},s),{event_id:n})),n},e.prototype.captureEvent=function(e,t){var r=t&&t.event_id?t.event_id:bV();return"transaction"!==e.type&&(this._lastEventId=r),this._invokeClient("captureEvent",e,bO(bO({},t),{event_id:r})),r},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var r=this.getStackTop(),n=r.scope,s=r.client;if(!(!n||!s)){var o=s.getOptions&&s.getOptions()||{},a=o.beforeBreadcrumb,l=void 0===a?null:a,u=o.maxBreadcrumbs,c=void 0===u?100:u;if(!(c<=0)){var d=bJ(),f=bO({timestamp:d},e),h=l?b$(function(){return l(f,t)}):f;null!==h&&n.addBreadcrumb(h,c)}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var r=this.getScope();r&&r.setTag(e,t)},e.prototype.setExtra=function(e,t){var r=this.getScope();r&&r.setExtra(e,t)},e.prototype.setContext=function(e,t){var r=this.getScope();r&&r.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),r=t.scope,n=t.client;r&&n&&e(r)},e.prototype.run=function(e){var t=b2(this);try{e(this)}finally{b2(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch{return bY&&SI.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var e=this.getStackTop(),t=e&&e.scope,r=t&&t.getSession();r&&r.close(),this._sendSessionUpdate(),t&&t.setSession()},e.prototype.startSession=function(e){var t=this.getStackTop(),r=t.scope,n=t.client,s=n&&n.getOptions()||{},o=s.release,a=s.environment,l=(bN().navigator||{}).userAgent,u=new bX(bO(bO(bO({release:o,environment:a},r&&{user:r.getUser()}),l&&{userAgent:l}),e));if(r){var c=r.getSession&&r.getSession();c&&"ok"===c.status&&c.update({status:"exited"}),this.endSession(),r.setSession(u)}return u},e.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,r=e.client;if(t){var n=t.getSession&&t.getSession();n&&r&&r.captureSession&&r.captureSession(n)}},e.prototype._invokeClient=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=this.getStackTop(),s=n.scope,o=n.client;o&&o[e]&&o[e].apply(o,bT(t,[s]))},e.prototype._callExtensionMethod=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=b1().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);bY&&SI.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function b1(){var e=bN();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function b2(e){var t=b1(),r=b8(t);return b6(t,e),r}function b3(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function b8(e){return bD("hub",function(){return new b0},e)}function b6(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}function b4(e,t){return function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var s=((!b3(t=b1())||b8(t).isOlderThan(4))&&b6(t,new b0),bR()?function(e){try{var t=b1().__SENTRY__,r=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!r)return b8(e);if(!b3(r)||b8(r).isOlderThan(4)){var n=b8(e).getStackTop();b6(r,new b0(n.client,bQ.clone(n.scope)))}return b8(r)}catch{return b8(e)}}(t):b8(t));if(s&&s[e])return s[e].apply(s,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return a}(arguments[t]));return e}(r));throw Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}("captureException",e,{captureContext:t,originalException:e,syntheticException:Error("Sentry syntheticException")})}let b5=class{constructor({dependencies:e,apduSenderFactory:t,apduReceiverFactory:r},n){eY(this,"dependencies"),eY(this,"apduSender"),eY(this,"apduReceiver"),eY(this,"sendApduPromiseResolver"),eY(this,"logger");let s=rC.of(a5.numberToByteArray(Math.floor(65535*Math.random()),2));this.logger=n("WebHidApduSender"),this.apduSender=t({frameSize:64,channel:s,padding:!0}),this.apduReceiver=r({channel:s}),this.sendApduPromiseResolver=rB,this.dependencies=e,this.logger.info("\uD83D\uDD0C Connected to device")}async sendApdu(e,t,r){let n,s=new Promise(e=>{this.sendApduPromiseResolver=rC.of((...t)=>(n&&clearTimeout(n),e(...t)))});for(let t of this.apduSender.getFrames(e))try{await this.dependencies.device.sendReport(0,new Uint8Array(t.getRawData()))}catch(e){return this.logger.info("Error sending frame",{data:{error:e}}),Promise.resolve(rM(new bC(e)))}return r&&(n=setTimeout(()=>{this.logger.debug("[sendApdu] Abort timeout",{data:{abortTimeout:r}}),this.sendApduPromiseResolver.map(e=>e(rM(new sC("Abort timeout"))))},r)),s}receiveHidInputReport(e){let t=new Uint8Array(e.data.buffer);this.apduReceiver.handleFrame(t).map(e=>{e.map(e=>{this.sendApduPromiseResolver.map(t=>t(rU(e)))})}).mapLeft(e=>{this.sendApduPromiseResolver.map(t=>t(rM(e)))})}getDependencies(){return this.dependencies}setDependencies(e){this.dependencies=e}async setupConnection(){try{this.dependencies.device.oninputreport=e=>this.receiveHidInputReport(e),await this.dependencies.device.open()}catch(e){if(e instanceof DOMException&&"InvalidStateError"===e.name)this.logger.info("Device is already opened");else{let t=new sI(e);throw this.logger.error("Error while opening device",{data:{error:e}}),b4(t),e}}}closeConnection(){this.logger.info("\uD83D\uDD1A Disconnect");try{this.dependencies.device.close()}catch(e){this.logger.error("Error while closing device",{data:{device:this.dependencies.device,error:e}})}}},b9=class{constructor(e,t,r,n,s=e=>new bI(e),o=(e,t)=>new b5(e,t)){eY(this,"_transportDiscoveredDevices",new iW([])),eY(this,"_deviceConnectionsByHidDevice",new Map),eY(this,"_deviceConnectionsPendingReconnection",new Set),eY(this,"_connectionListenersAbortController",new AbortController),eY(this,"_logger"),eY(this,"connectionType","USB"),eY(this,"identifier","WEB-HID"),this._deviceModelDataSource=e,this._loggerServiceFactory=t,this._apduSenderFactory=r,this._apduReceiverFactory=n,this._deviceConnectionStateMachineFactory=s,this._deviceApduSenderFactory=o,this._logger=t("WebWebHidTransport"),this.startListeningToConnectionEvents()}get hidApi(){return this.isSupported()?rU(navigator.hid):rM(new bP("WebHID not supported"))}isSupported(){try{let e=!!(null!=navigator&&navigator.hid);return this._logger.debug(`isSupported: ${e}`),e}catch(e){return this._logger.error("isSupported: error",{data:{error:e}}),!1}}getIdentifier(){return this.identifier}async getDevices(){return rz.liftEither(this.hidApi).map(async e=>{try{return(await e.getDevices()).filter(e=>11415===e.vendorId)}catch(t){let e=new sk(t);throw this._logger.error("getDevices: error getting devices",{data:{error:t}}),b4(e),e}})}mapHIDDeviceToTransportDiscoveredDevice(e){let t=this._transportDiscoveredDevices.getValue().find(t=>t.hidDevice===e);if(t)return t;let r=this._deviceConnectionsByHidDevice.get(e);return this.getDeviceModel(e).caseOf({Just:t=>{let n=(null==r?void 0:r.getDeviceId())??a4(),s={id:n,deviceModel:t,hidDevice:e,transport:this.identifier};return this._logger.debug(`Discovered device ${n} ${s.deviceModel.productName}`),s},Nothing:()=>{throw this._logger.warn(`Device not recognized: hidDevice.productId: 0x${e.productId.toString(16)}`),new sS(`Device not recognized: hidDevice.productId: 0x${e.productId.toString(16)}`)}})}listenToAvailableDevices(){return this.updateTransportDiscoveredDevices(),this._transportDiscoveredDevices.pipe(sp(e=>e.map(({hidDevice:e,...t})=>t)))}async updateTransportDiscoveredDevices(){(await this.getDevices()).caseOf({Left:e=>{this._logger.error("Error while getting accessible device",{data:{error:e}}),b4(e)},Right:e=>{this._transportDiscoveredDevices.next(e.map(e=>this.mapHIDDeviceToTransportDiscoveredDevice(e)))}})}async promptDeviceAccess(){return rz.liftEither(this.hidApi).map(async e=>{let t=[];try{t=await e.requestDevice({filters:[{vendorId:11415}]}),await this.updateTransportDiscoveredDevices()}catch(t){let e=new sk(t);throw this._logger.error("promptDeviceAccess: error requesting device",{data:{error:t}}),b4(e),e}if(this._logger.debug(`promptDeviceAccess: hidDevices len ${t.length}`),0===t.length)throw this._logger.warn("No device was selected"),new sk("No selected device");let r=[];for(let e of t)r.push(e),this._logger.debug("promptDeviceAccess: selected device",{data:{hidDevice:e}});return r}).run()}startDiscovering(){return this._logger.debug("startDiscovering"),su(this.promptDeviceAccess()).pipe(sb(e=>e.caseOf({Left:e=>{throw this._logger.error("Error while getting accessible device",{data:{error:e}}),b4(e),e},Right:e=>(this._logger.info(`Got access to ${e.length} HID devices`),su(e.map(e=>this.mapHIDDeviceToTransportDiscoveredDevice(e))))})))}stopDiscovering(){}startListeningToConnectionEvents(){this._logger.debug("startListeningToConnectionEvents"),this.hidApi.map(e=>{e.addEventListener("connect",e=>this.handleDeviceConnectionEvent(e),{signal:this._connectionListenersAbortController.signal}),e.addEventListener("disconnect",e=>this.handleDeviceDisconnectionEvent(e),{signal:this._connectionListenersAbortController.signal})})}stopListeningToConnectionEvents(){this._logger.debug("stopListeningToConnectionEvents"),this._connectionListenersAbortController.abort()}async connect({deviceId:e,onDisconnect:t}){this._logger.debug("connect",{data:{deviceId:e}});let r=this._transportDiscoveredDevices.getValue().find(t=>t.id===e);if(!r)return this._logger.error(`Unknown device ${e}`),rM(new s_(`Unknown device ${e}`));let{deviceModel:n}=r,s=this._deviceConnectionsByHidDevice.get(r.hidDevice);if(s)return rU(new b_({id:e,deviceModel:n,type:this.connectionType,sendApdu:(...e)=>s.sendApdu(...e),transport:this.identifier}));let o=this._deviceApduSenderFactory({apduSenderFactory:this._apduSenderFactory,apduReceiverFactory:this._apduReceiverFactory,dependencies:{device:r.hidDevice}},this._loggerServiceFactory),a=this._deviceConnectionStateMachineFactory({deviceId:e,deviceApduSender:o,timeoutDuration:6e3,tryToReconnect:()=>{this._deviceConnectionsByHidDevice.forEach((t,r)=>{t.getDeviceId()===e&&(this._deviceConnectionsPendingReconnection.add(t),this._deviceConnectionsByHidDevice.delete(r))})},onTerminated:()=>{this._deviceConnectionsPendingReconnection.forEach(r=>{r.getDeviceId()===e&&(this._deviceConnectionsPendingReconnection.delete(r),t(r.getDeviceId()))}),this._deviceConnectionsByHidDevice.forEach((r,n)=>{r.getDeviceId()===e&&(this._deviceConnectionsByHidDevice.delete(n),t(r.getDeviceId()))})}});try{await o.setupConnection()}catch(e){return e instanceof sI?rM(e):rM(new sI(e))}return this._deviceConnectionsByHidDevice.set(r.hidDevice,a),rU(new b_({sendApdu:(...e)=>a.sendApdu(...e),deviceModel:n,id:e,type:this.connectionType,transport:this.identifier}))}getDeviceModel(e){let{productId:t}=e,r=this._deviceModelDataSource.getAllDeviceModels().find(e=>e.usbProductId===t>>8||e.bootloaderUsbProductId===t);return r?rC.of(r):rC.zero()}getHidUsbProductId(e){return this.getDeviceModel(e).caseOf({Just:e=>e.usbProductId,Nothing:()=>e.productId>>8})}async disconnect(e){this._logger.debug("disconnect",{data:{connectedDevice:e}});let t=Array.from(this._deviceConnectionsByHidDevice.values()).find(t=>t.getDeviceId()===e.connectedDevice.id);return t?(t.closeConnection(),Promise.resolve(rU(void 0))):(this._logger.error("No matching device connection found",{data:{connectedDevice:e}}),Promise.resolve(rM(new s_(`Unknown device ${e.connectedDevice.id}`))))}isHIDConnectionEvent(e){return"device"in e&&"object"==typeof e.device&&null!==e.device&&"productId"in e.device&&"number"==typeof e.device.productId}async handleDeviceDisconnectionEvent(e){if(!this.isHIDConnectionEvent(e))return void this._logger.error("Invalid event",{data:{event:e}});this._logger.info("[handleDeviceDisconnectionEvent] Device disconnected",{data:{event:e}}),this.updateTransportDiscoveredDevices();try{await e.device.close()}catch(t){this._logger.error("Error while closing device ",{data:{event:e,error:t}})}let t=this._deviceConnectionsByHidDevice.get(e.device);t&&t.eventDeviceDisconnected()}async handleDeviceReconnection(e,t){this._deviceConnectionsPendingReconnection.delete(e),this._deviceConnectionsByHidDevice.set(t,e);try{e.setDependencies({device:t}),await e.setupConnection(),e.eventDeviceConnected()}catch(t){this._logger.error("Error while reconnecting to device",{data:{event:event,error:t}}),e.closeConnection()}}async handleDeviceConnectionEvent(e){if(!this.isHIDConnectionEvent(e))return void this._logger.error("Invalid event",{data:{event:e}});this._logger.info("[handleDeviceConnectionEvent] Device connected",{data:{event:e}});let t=Array.from(this._deviceConnectionsPendingReconnection).find(t=>this.getHidUsbProductId(t.getDependencies().device)===this.getHidUsbProductId(e.device));t&&await this.handleDeviceReconnection(t,e.device),this.updateTransportDiscoveredDevices()}destroy(){this.stopListeningToConnectionEvents(),this._deviceConnectionsByHidDevice.forEach(e=>{e.closeConnection()}),this._deviceConnectionsPendingReconnection.clear()}},b7=class{constructor(e,t){eY(this,"_dependencies"),eY(this,"_apduFrameSegmenter",rC.empty()),eY(this,"_apduSenderFactory"),eY(this,"_apduReceiverFactory"),eY(this,"_apduFrameReceiver"),eY(this,"_logger"),eY(this,"_mtuNegotiated$",new iW(!1)),eY(this,"_notificationsReady",!1),eY(this,"_mtuRequestInProgress",!1),eY(this,"_pendingResponseResolver",rC.empty()),eY(this,"_handleNotification",e=>{let t=e.target;if(!t.value)return;let r=new Uint8Array(t.value.buffer);if(!this._mtuNegotiated$.value)return this._mtuRequestInProgress?r.length<6||8!==r[0]?void this._logger.debug("Non-MTU frame during handshake; dropping",{data:{data:r}}):void this._handleMtuNegotiationFrame(r):void this._logger.debug("Dropping pre-handshake frame",{data:{data:r}});this._handleApduFrame(r)}),this._dependencies={writeCharacteristic:e.writeCharacteristic,notifyCharacteristic:e.notifyCharacteristic},this._apduSenderFactory=e.apduSenderFactory,this._apduReceiverFactory=e.apduReceiverFactory,this._apduFrameReceiver=e.apduReceiverFactory(),this._logger=t("WebBleApduSender")}async sendApdu(e,t,r){let n;try{let e=Math.max(1800,r??0);await this._waitUntilMtuNegotiated(e)}catch(e){return rM(e)}if(!this._isGattConnected())return this._markLinkUnavailable(),rM(new sR("GATT not connected"));if(this._apduFrameSegmenter.isNothing())return rM(new sO("Unknown MTU / sender not ready"));let s=new Promise(e=>{this._pendingResponseResolver=rC.of(t=>{n&&clearTimeout(n),e(t)})});for(let r of this._apduFrameSegmenter.map(t=>t.getFrames(e)).orDefault([]))try{await this._writeToGattCharacteristic(r.getRawData().slice().buffer)}catch(r){let e=t?"Frame write failed during expected drop":"Frame write failed";this._logger[t?"debug":"error"](e,{data:{e:r}}),this._failPendingSend(new sR("Write failed"));break}return r&&(n=setTimeout(()=>{this._logger.debug("[sendApdu] Abort timeout triggered"),this._pendingResponseResolver.map(e=>e(rM(new sC("Abort timeout"))))},r)),s}closeConnection(){var e;try{this._failPendingSend(new sR("Connection closed")),this._notificationsReady&&(this._dependencies.notifyCharacteristic.removeEventListener("characteristicvaluechanged",this._handleNotification),this._dependencies.notifyCharacteristic.stopNotifications().catch(()=>{}),this._notificationsReady=!1),null==(e=this._dependencies.notifyCharacteristic.service.device.gatt)||e.disconnect()}catch{this._logger.error("Failed to disconnect from device")}finally{this._mtuNegotiated$.next(!1),this._apduFrameSegmenter=rC.empty()}}getDependencies(){return this._dependencies}setDependencies(e){this._failPendingSend(new sR("Link changed"));try{this._notificationsReady&&(this._dependencies.notifyCharacteristic.removeEventListener("characteristicvaluechanged",this._handleNotification),this._dependencies.notifyCharacteristic.stopNotifications().catch(()=>{}))}catch{}this._notificationsReady=!1,this._mtuNegotiated$.next(!1),this._apduFrameSegmenter=rC.empty(),this._pendingResponseResolver=rC.empty(),this._dependencies=e,this._apduFrameReceiver=this._apduReceiverFactory()}async setupConnection(){let e=this._dependencies.notifyCharacteristic;this._notificationsReady||(await e.startNotifications(),this._logger.debug("Notify armed",{data:{notifyUuid:this._dependencies.notifyCharacteristic.uuid,writeUuid:this._dependencies.writeCharacteristic.uuid,props:this._dependencies.writeCharacteristic.properties}}),this._notificationsReady=!0,e.addEventListener("characteristicvaluechanged",this._handleNotification)),await this._sleep(120),this._mtuRequestInProgress=!0,this._mtuNegotiated$.next(!1),this._apduFrameSegmenter=rC.empty();let t=new Uint8Array([8,0,0,0,0]);try{await this._writeToGattCharacteristic(t.buffer),await Promise.race([new Promise((e,t)=>{let r=setTimeout(()=>t(Error("MTU negotiation timeout")),2e3),n=this._mtuNegotiated$.subscribe(t=>{t&&(clearTimeout(r),n.unsubscribe(),e())})}),this._sleep(2300).then(()=>{if(!this._isGattConnected())throw new sR("Link dropped during MTU")})])}catch(t){try{e.removeEventListener("characteristicvaluechanged",this._handleNotification),await e.stopNotifications().catch(()=>{})}finally{this._notificationsReady=!1,this._mtuNegotiated$.next(!1),this._apduFrameSegmenter=rC.empty()}throw t}finally{this._mtuRequestInProgress=!1}}_isGattConnected(){var e;try{return!!(null!=(e=this._dependencies.notifyCharacteristic.service.device.gatt)&&e.connected)}catch{return!1}}_isGattDisconnectedError(e){let t=("object"==typeof e&&null!==e&&"name"in e?e.name??"":"").toString(),r=("object"==typeof e&&null!==e&&"message"in e?e.message??"":"").toString().toLowerCase();return"NetworkError"===t||r.includes("gatt server is disconnected")||r.includes("not connected")||r.includes("cannot perform gatt operations")}_failPendingSend(e){this._pendingResponseResolver.map(t=>t(rM(e))),this._pendingResponseResolver=rC.empty()}_markLinkUnavailable(){this._notificationsReady&&(this._dependencies.notifyCharacteristic.removeEventListener("characteristicvaluechanged",this._handleNotification),this._dependencies.notifyCharacteristic.stopNotifications().catch(()=>{}),this._notificationsReady=!1),this._mtuNegotiated$.next(!1),this._apduFrameSegmenter=rC.empty(),this._pendingResponseResolver=rC.empty()}async _sleep(e){return new Promise(t=>setTimeout(t,e))}_handleMtuNegotiationFrame(e){let t=e[5];if(void 0===t||!Number.isFinite(t)||t<=0)throw Error("MTU negotiation failed: invalid MTU");this._apduFrameSegmenter=rC.of(this._apduSenderFactory({frameSize:t})),this._mtuNegotiated$.next(!0)}_handleApduFrame(e){this._apduFrameReceiver.handleFrame(e).map(e=>e.map(e=>{this._logger.debug("Received APDU",{data:{resp:e}}),this._pendingResponseResolver.map(t=>t(rU(e))),this._pendingResponseResolver=rC.empty()})).mapLeft(e=>{this._pendingResponseResolver.map(t=>t(rM(e))),this._pendingResponseResolver=rC.empty()})}async _writeToGattCharacteristic(e){let t=this._dependencies.writeCharacteristic;if(!this._isGattConnected())throw this._markLinkUnavailable(),new sR("GATT not connected");let r="function"==typeof t.writeValueWithoutResponse,n="function"==typeof t.writeValueWithResponse;if(t.properties.writeWithoutResponse&&r)try{await t.writeValueWithoutResponse(e);return}catch(e){if(this._isGattDisconnectedError(e)||!this._isGattConnected())throw this._markLinkUnavailable(),new sR("Write failed")}if(t.properties.write&&n)return void await t.writeValueWithResponse(e);throw Error("No supported write method for characteristic")}async _waitUntilMtuNegotiated(e=2e3){if(!(this._notificationsReady&&this._mtuNegotiated$.value&&this._isGattConnected()))return new Promise((t,r)=>{let n=this._mtuNegotiated$.subscribe(e=>{e&&this._notificationsReady&&this._isGattConnected()&&(clearTimeout(s),n.unsubscribe(),t())}),s=setTimeout(()=>{n.unsubscribe(),r(new sO("Link not ready"))},e);this._notificationsReady&&this._mtuNegotiated$.value&&this._isGattConnected()&&(clearTimeout(s),n.unsubscribe(),t())})}},ve="WEB-BLE-RN-STYLE",vt=class{constructor(e,t,r,n){eY(this,"_logger"),eY(this,"_connectionStateMachinesByDeviceId",new Map),eY(this,"_deviceRegistryById",new Map),eY(this,"_discoveredDevices$",new iW([])),this._deviceModelDataSource=e,this.loggerFactory=t,this._apduSenderFactory=r,this._apduReceiverFactory=n,this._logger=t("WebBleTransportRnStyle")}isSupported(){return"u">typeof navigator&&!!navigator.bluetooth}getIdentifier(){return ve}startDiscovering(){let e=this._deviceModelDataSource.getBluetoothServices().map(e=>({services:[e]})),t=this._deviceModelDataSource.getBluetoothServices();return su(navigator.bluetooth.requestDevice({filters:e,optionalServices:t})).pipe(sb(async e=>{let{serviceUuid:t,ledgerServiceInfo:r}=await this._identifyLedgerGattService(e),n={id:e.id,deviceModel:r.deviceModel,transport:ve,name:e.name||void 0};return this._deviceRegistryById.set(e.id,{device:e,serviceUuid:t,ledgerServiceInfo:r,discoveredDevice:n}),this._publishDiscoveredDevices(),n}))}stopDiscovering(){}listenToAvailableDevices(){return this._publishDiscoveredDevices(),this._discoveredDevices$.asObservable()}async connect(e){let t=this._deviceRegistryById.get(e.deviceId);if(!t)return rM(new s_(`Unknown device ${e.deviceId}`));if(this._connectionStateMachinesByDeviceId.has(e.deviceId))return rM(new sA(`Device ${e.deviceId} already connected`));try{let r=t.device;if(!r.gatt)throw new sI("No GATT server available on device");r.gatt.connected||(await this._withTimeout(r.gatt.connect(),6e3,"GATT connect timed out"),await this._sleep(150));let{service:n,ledgerServiceInfo:s}=await this._getPrimaryLedgerGattService(r),{writeCharacteristic:o,notifyCharacteristic:a}=await this._resolveLedgerServiceCharacteristics(n,s),l=new b7({writeCharacteristic:o,notifyCharacteristic:a,apduSenderFactory:this._apduSenderFactory,apduReceiverFactory:this._apduReceiverFactory},this.loggerFactory),u=new bI({deviceId:e.deviceId,deviceApduSender:l,timeoutDuration:15e3,tryToReconnect:()=>{this._tryToReconnect(e.deviceId,e.onReconnect).catch(e=>this._logger.error("tryToReconnect() threw",{data:{e:e}}))},onTerminated:()=>{var t;try{null==(t=this._connectionStateMachinesByDeviceId.get(e.deviceId))||t.closeConnection(),e.onDisconnect(e.deviceId)}finally{this._connectionStateMachinesByDeviceId.delete(e.deviceId);let t=this._deviceRegistryById.get(e.deviceId);null!=t&&t.gattDisconnectListener&&(t.device.removeEventListener("gattserverdisconnected",t.gattDisconnectListener),t.gattDisconnectListener=void 0),this._publishDiscoveredDevices()}}});await l.setupConnection(),this._connectionStateMachinesByDeviceId.set(e.deviceId,u),t.serviceUuid=n.uuid,t.ledgerServiceInfo=s;let c=t=>this._handleGattServerDisconnected(e.deviceId);return t.gattDisconnectListener=c,r.addEventListener("gattserverdisconnected",c),this._publishDiscoveredDevices(),rU(new b_({id:e.deviceId,deviceModel:s.deviceModel,type:"BLE",transport:ve,sendApdu:(...e)=>u.sendApdu(...e),name:r.name||void 0}))}catch(e){return this._logger.error("connect() error",{data:{e:e}}),rM(new sI(e))}}async disconnect(e){let t=e.connectedDevice.id,r=this._connectionStateMachinesByDeviceId.get(t),n=this._deviceRegistryById.get(t);if(!r)return rM(new s_(`Unknown device ${t}`));try{return r.closeConnection(),this._connectionStateMachinesByDeviceId.delete(t),null!=n&&n.gattDisconnectListener&&(n.device.removeEventListener("gattserverdisconnected",n.gattDisconnectListener),n.gattDisconnectListener=void 0),await this._safelyCancelGattConnection(t),this._publishDiscoveredDevices(),rU(void 0)}catch(e){return rM(new sE({originalError:e}))}}_handleGattServerDisconnected(e){this._logger.debug(`[${e}] gattserverdisconnected`);let t=this._connectionStateMachinesByDeviceId.get(e);t&&t.eventDeviceDisconnected()}async _waitForAdvertisementInRange(e,t={}){let{startTimeoutMs:r=500,advTimeoutMs:n=1500}=t;if("function"!=typeof e.watchAdvertisements)return!1;let s=new AbortController,o=setTimeout(()=>s.abort(),r),a=await e.watchAdvertisements({signal:s.signal}).then(()=>!0).catch(()=>!1);if(clearTimeout(o),!a)return!1;let l=await new Promise(t=>{let r=()=>{e.removeEventListener("advertisementreceived",r),t(!0)};e.addEventListener("advertisementreceived",r),setTimeout(()=>{e.removeEventListener("advertisementreceived",r),t(!1)},n)});return s.abort(),l}async _rediscoverPermittedDevice(e){if("function"!=typeof navigator.bluetooth.getDevices)return null;try{this._logger.debug(`Attempting to rediscover device ${e}`);let t=(await navigator.bluetooth.getDevices()).find(t=>t.id===e)??null;if(t){let e=await this._waitForAdvertisementInRange(t,{startTimeoutMs:400,advTimeoutMs:1200});this._logger.debug(`Rediscovered ${t.id}, inRange=${e}`)}return t}catch{return null}}async _tryToReconnect(e,t){var r;for(await this._safelyCancelGattConnection(e);;){let n=this._deviceRegistryById.get(e),s=this._connectionStateMachinesByDeviceId.get(e);if(!n||!s)return void this._logger.debug(`[${e}] aborting reconnect: registry or state machine missing`);try{let r=await this._withTimeout(this._rediscoverPermittedDevice(e),3e3,"rediscovery timeout");if(!r)throw Error("Device not found");if(!r.gatt)throw Error("No GATT on device");try{await r.gatt.connect()}catch(t){this._logger.error(`[${e}] gatt.connect() failed`,{data:{e:t}}),r.gatt.connected&&r.gatt.disconnect()}let{service:o,ledgerServiceInfo:a}=await this._getPrimaryLedgerGattService(r),{writeCharacteristic:l,notifyCharacteristic:u}=await this._resolveLedgerServiceCharacteristics(o,a);s.setDependencies({writeCharacteristic:l,notifyCharacteristic:u}),await s.setupConnection(),s.eventDeviceConnected(),n.serviceUuid=o.uuid,n.ledgerServiceInfo=a,n.gattDisconnectListener&&r.removeEventListener("gattserverdisconnected",n.gattDisconnectListener);let c=t=>this._handleGattServerDisconnected(e);r.addEventListener("gattserverdisconnected",c),n.gattDisconnectListener=c,await (null==t?void 0:t(e)),this._publishDiscoveredDevices();return}catch(t){this._logger.error(`[${e}] reconnect attempt failed`,{data:{e:t}}),null!=(r=null==n?void 0:n.device.gatt)&&r.connected&&n.device.gatt.disconnect(),await this._sleep(500);continue}}}async _safelyCancelGattConnection(e){var t;let r=this._deviceRegistryById.get(e);r&&(null!=(t=r.device.gatt)&&t.connected&&r.device.gatt.disconnect(),await this._sleep(100))}async _identifyLedgerGattService(e){var t;if(!e.gatt)throw new sI("No GATT server available on device");try{await this._withTimeout(e.gatt.connect(),6e3,"connect timeout");let{service:t,ledgerServiceInfo:r}=await this._getPrimaryLedgerGattService(e);return{serviceUuid:t.uuid,ledgerServiceInfo:r}}finally{null==(t=e.gatt)||t.disconnect(),await this._sleep(200)}}async _getPrimaryLedgerGattService(e){var t;let r=this._deviceModelDataSource.getBluetoothServices(),n=null==(t=this._deviceRegistryById.get(e.id))?void 0:t.serviceUuid;for(let t of n?[n,...r.filter(e=>e!==n)]:r.slice())try{let r=await e.gatt.getPrimaryService(t),n=this._deviceModelDataSource.getBluetoothServicesInfos()[r.uuid];if(!n)throw new s_(e.name||"");return{service:r,ledgerServiceInfo:n}}catch(r){if((null==r?void 0:r.name)==="SecurityError")throw new sI(`Missing Web Bluetooth permission for service ${t}. Add it to optionalServices in requestDevice().`);try{let r=(await e.gatt.getPrimaryServices()).find(e=>e.uuid.toLowerCase()===t.toLowerCase());if(r){let t=this._deviceModelDataSource.getBluetoothServicesInfos()[r.uuid];if(!t)throw new s_(e.name||"");return{service:r,ledgerServiceInfo:t}}}catch{this._logger.error("Failed to get primary services",{data:{deviceId:e.id}})}}throw new sI("Ledger GATT service not found")}async _resolveLedgerServiceCharacteristics(e,t){let r=await e.getCharacteristic(t.notifyUuid);return{writeCharacteristic:await this._findWritableCharacteristic(e,t),notifyCharacteristic:r}}async _findWritableCharacteristic(e,t){let r=[t.writeCmdUuid,t.writeUuid].filter(Boolean),n=[];for(let t of r)try{let r=await e.getCharacteristic(t);if(n.push(r),r.properties.writeWithoutResponse||r.properties.write)return r}catch{this._logger.error("Failed to get write characteristic",{data:{deviceId:e.device.id}})}throw new sI("No write characteristic available")}_publishDiscoveredDevices(){let e=[];for(let[t]of this._connectionStateMachinesByDeviceId){let r=this._deviceRegistryById.get(t);null!=r&&r.ledgerServiceInfo&&e.push({id:t,deviceModel:r.ledgerServiceInfo.deviceModel,transport:ve,name:r.device.name||void 0})}let t=Array.from(this._deviceRegistryById.values()).map(e=>e.discoveredDevice).filter(e=>!this._connectionStateMachinesByDeviceId.has(e.id));this._discoveredDevices$.next([...e,...t])}_withTimeout(e,t,r,n){return new Promise((s,o)=>{let a=setTimeout(()=>{o(new sI(r)),null==n||n()},t);e.then(e=>{clearTimeout(a),s(e)},e=>{this._logger.error("withTimeout() promise rejected",{data:{e:e}}),clearTimeout(a),o(e)})})}_sleep(e){return new Promise(t=>setTimeout(t,e))}};class vr extends Error{constructor(e){super(e.message),this.name="LedgerError",this.errorCode=e.errorCode,this._tag=e._tag}toString(){return`LedgerError: ${this.message}${this.errorCode?` (error code: ${this.errorCode})`:""}${this._tag?` (tag: ${this._tag})`:""}`}}let vn="Condition not satisfied",vs={message:vn,_tag:"EthAppCommandError",errorCode:"6985"};function vo(e){return e.message.startsWith(vn)}function va(){return new vr(vs)}async function vl(e){return new Promise(t=>setTimeout(t,e))}function vu(e){var t;if("string"==typeof e){let t=e.match(/^LedgerError:\s*(.+?)(?:\s*\(error code:\s*(.+?)\))?(?:\s*\(tag:\s*(.+?)\))?$/);return new vr(t?{message:t[1].trim(),errorCode:t[2]||void 0,_tag:t[3]||void 0}:{message:e})}return new vr({message:(null==e?void 0:e.message)||"Unknown error",errorCode:(null==(t=null==e?void 0:e.originalError)?void 0:t.errorCode)||(null==e?void 0:e.errorCode)||void 0,_tag:(null==e?void 0:e._tag)||void 0})}let vc={bluetooth:"WEB-BLE-RN-STYLE",hid:"WEB-HID"},vd=new bS().addLogger(new bk).addTransport(({deviceModelDataSource:e,loggerServiceFactory:t,apduSenderServiceFactory:r,apduReceiverServiceFactory:n})=>new b9(e,t,r,n)).addTransport(({deviceModelDataSource:e,loggerServiceFactory:t,apduSenderServiceFactory:r,apduReceiverServiceFactory:n})=>new vt(e,t,r,n)).build();async function vf({transportIdentifier:e}){return await new Promise((t,r)=>{vd.startDiscovering({transport:e}).subscribe({next:e=>{let r=vd.listConnectedDevices().find(t=>t.id===e.id);if(r)return void t({sessionId:r.sessionId,device:e});vd.connect({device:e}).then(r=>{vl(100).then(()=>{t({sessionId:r,device:e})})})},error:e=>{r(vu(e))}})})}let vh=null,vp=null;function vg(){}async function vm({transportIdentifier:e,deviceId:t}){return new Promise(r=>{let n=vd.listConnectedDevices(),s=t?n.find(e=>e.id===t):n[0];if(s)return void r({sessionId:s.sessionId,device:s});(e===vc.hid?(vh||(vh=vd.listenToAvailableDevices({transport:e})),vh):(vp||(vp=vd.listenToAvailableDevices({transport:e})),vp)).subscribe(e=>{if(e.length>0){let n=t||e[0].id,s=e.find(e=>e.id===n);vd.connect({device:s}).then(e=>{vl(100).then(()=>{r({sessionId:e,device:s})})})}})})}var vy=((F=vy||{}).OPEN_APP="signer.eth.steps.openApp",F.GET_APP_CONFIG="signer.eth.steps.getAppConfig",F.GET_ADDRESS="signer.eth.steps.getAddress",F.WEB3_CHECKS_OPT_IN="signer.eth.steps.web3ChecksOptIn",F.WEB3_CHECKS_OPT_IN_RESULT="signer.eth.steps.web3ChecksOptInResult",F.PARSE_TRANSACTION="signer.eth.steps.parseTransaction",F.BUILD_CONTEXTS="signer.eth.steps.buildContexts",F.PROVIDE_CONTEXTS="signer.eth.steps.provideContexts",F.SIGN_TRANSACTION="signer.eth.steps.signTransaction",F.BLIND_SIGN_TRANSACTION_FALLBACK="signer.eth.steps.blindSignTransactionFallback",F),vb=((j=vb||{}).OPEN_APP="signer.eth.steps.openApp",j.GET_APP_CONFIG="signer.eth.steps.getAppConfig",j.GET_ADDRESS="signer.eth.steps.getAddress",j.WEB3_CHECKS_OPT_IN="signer.eth.steps.web3ChecksOptIn",j.WEB3_CHECKS_OPT_IN_RESULT="signer.eth.steps.web3ChecksOptInResult",j.BUILD_CONTEXT="signer.eth.steps.buildContext",j.PROVIDE_CONTEXT="signer.eth.steps.provideContext",j.PROVIDE_GENERIC_CONTEXT="signer.eth.steps.provideGenericContext",j.SIGN_TYPED_DATA="signer.eth.steps.signTypedData",j.SIGN_TYPED_DATA_LEGACY="signer.eth.steps.signTypedDataLegacy",j),vv=((z=vv||{})[z.LEGACY=0]="LEGACY",z[z.EIP2930=1]="EIP2930",z[z.EIP1559=2]="EIP1559",z[z.EIP4844=3]="EIP4844",z);let vx={Config:Symbol.for("config"),OriginToken:Symbol.for("originToken")},vw={PkiCertificateDataSource:Symbol.for("PkiCertificateDataSource"),PkiCertificateLoader:Symbol.for("PkiCertificateLoader")};var vE=(($=vE||{}).Test="test",$.PersoV2="persov2",$.LedgerRootV3="ledger_root_v3",$.PluginSelectorKey="plugin_selector_key",$.NftMetadataKey="nft_metadata_key",$.PartnerMetadataKey="partner_metadata_key",$.Erc20MetadataKey="erc20_metadata_key",$.DomainMetadataKey="domain_metadata_key",$.CalCalldataKey="cal_calldata_key",$.CalTrustedNameKey="cal_trusted_name_key",$.CalNetwork="cal_network",$),vA=((H=vA||{}).GenuineCheck="genuine_check",H.ExchangePayload="exchange_payload",H.NftMeta="nft_meta",H.TrustedName="trusted_name",H.BackupProvider="backup_provider",H.ProtectOrchestrator="protect_orchestrator",H.PluginMeta="plugin_meta",H.CoinMeta="coin_meta",H.SeedIdAuth="seed_id_auth",H.TxSimulationSigner="tx_simu_signer",H.Calldata="calldata",H.Network="network",H.LESMultisig="les_multisig",H);let vS="X-Ledger-Client-Version",vk="X-Ledger-Client-Origin";var vI=((V=vI||{}).TOKEN="token",V.NFT="nft",V.TRUSTED_NAME="trustedName",V.PLUGIN="plugin",V.EXTERNAL_PLUGIN="externalPlugin",V.TRANSACTION_INFO="transactionInfo",V.PROXY_INFO="proxyInfo",V.ENUM="enum",V.TRANSACTION_FIELD_DESCRIPTION="transactionFieldDescription",V.TRANSACTION_CHECK="transactionCheck",V.DYNAMIC_NETWORK="dynamicNetwork",V.DYNAMIC_NETWORK_ICON="dynamicNetworkIcon",V.ERROR="error",V.SAFE="safe",V.SIGNER="signer",V),v_=((q=v_||{}).TOKEN="token",q.NFT="nft",q.TRUSTED_NAME="trustedName",q.ENUM="enum",q.CALLDATA="calldata",q);let vP="81ff",vC=class{static stringToHex(e){let t="";for(let r=0;r<e.length;r++)t+=e.charCodeAt(r).toString(16).padStart(2,"0");return t}static appendSignatureToPayload(e,t,r){t.length%2!=0&&(t="0"+t);let n=(t.length/2).toString(16);return n.length%2!=0&&(n="0"+n),`${e}${r}${n}${t}`}},vO={version:"1.11.0"};var vT=Object.defineProperty,vR=Object.getOwnPropertyDescriptor,vB=(e,t)=>(r,n)=>t(r,n,e);let vN=class{constructor(e,t,r){this.config=e,this._certificateLoader=t,this.endpoint=r}async getCalldataDescriptors({chainId:e,address:t,selector:r,deviceModelId:n}){var s,o;let a;try{a=(await dJ.request({method:"GET",url:`${this.config.cal.url}/${this.endpoint}`,params:{output:"descriptors_calldata",chain_id:e,contracts:t,contract_address:t,ref:`branch:${this.config.cal.branch}`},headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken}})).data}catch(e){return rM(Error(`[ContextModule] HttpCalldataDescriptorDataSource: Failed to fetch calldata descriptors: ${e}`))}if(!Array.isArray(a))return rM(Error("[ContextModule] HttpCalldataDescriptorDataSource: Response is not an array"));if(0===a.length)return rM(Error(`[ContextModule] HttpCalldataDescriptorDataSource: No data for contract ${t} and selector ${r}`));for(let e of a){t=t.toLowerCase(),r=`0x${r.slice(2).toLowerCase()}`;let a=null==(o=null==(s=e.descriptors_calldata)?void 0:s[t])?void 0:o[r];if(!a||!this.isCalldataDescriptorV1(a,this.config.cal.mode))continue;let l=a.transaction_info.descriptor.data,u=a.transaction_info.descriptor.signatures[this.config.cal.mode],c={targetDevice:n,keyUsage:vA.Calldata,keyId:vE.CalCalldataKey},d=await this._certificateLoader.loadCertificate(c),f={type:vI.TRANSACTION_INFO,payload:vC.appendSignatureToPayload(l,u,vP),certificate:d},h=[];for(let[e,t]of Object.entries(a.enums))for(let[r,{data:n,signatures:s}]of Object.entries(t))h.push({type:vI.ENUM,id:Number(e),value:Number(r),payload:vC.appendSignatureToPayload(n,s[this.config.cal.mode],vP),certificate:d});return rU([f,...h,...a.fields.map(e=>({type:vI.TRANSACTION_FIELD_DESCRIPTION,payload:e.descriptor,reference:this.getReference(e.param)}))])}return rM(Error(`[ContextModule] HttpCalldataDescriptorDataSource: Invalid response for contract ${t} and selector ${r}`))}getReference(e){var t,r,n,s;return"TOKEN_AMOUNT"===e.type&&void 0!==e.token&&"path"===e.token.type?{type:v_.TOKEN,valuePath:this.toGenericPath(e.token.binary_path)}:"TOKEN_AMOUNT"===e.type&&void 0!==e.token&&"constant"===e.token.type?{type:v_.TOKEN,value:e.token.value}:"NFT"===e.type&&"path"===e.collection.type?{type:v_.NFT,valuePath:this.toGenericPath(e.collection.binary_path)}:"NFT"===e.type&&"constant"===e.collection.type?{type:v_.NFT,value:e.collection.value}:"TRUSTED_NAME"===e.type&&"path"===e.value.type?{type:v_.TRUSTED_NAME,valuePath:this.toGenericPath(e.value.binary_path),types:e.types,sources:e.sources}:"ENUM"===e.type&&"path"===e.value.type?{type:v_.ENUM,valuePath:this.toGenericPath(e.value.binary_path),id:e.id}:"CALLDATA"===e.type&&"path"===e.value.type&&"path"===e.callee.type?{type:v_.CALLDATA,valuePath:this.toGenericPath(e.value.binary_path),callee:this.toGenericPath(e.callee.binary_path),selector:(null==(t=e.selector)?void 0:t.type)==="path"?this.toGenericPath(e.selector.binary_path):void 0,amount:(null==(r=e.amount)?void 0:r.type)==="path"?this.toGenericPath(e.amount.binary_path):void 0,spender:(null==(n=e.spender)?void 0:n.type)==="path"?this.toGenericPath(e.spender.binary_path):void 0,chainId:(null==(s=e.chainId)?void 0:s.type)==="path"?this.toGenericPath(e.chainId.binary_path):void 0}:void 0}toGenericPath(e){return"CONTAINER"===e.type?e.value:e.elements.map(e=>{if("ARRAY"===e.type){let{weight:t,...r}=e;return{itemSize:t,...r}}if("LEAF"===e.type){let{leaf_type:t,...r}=e;return{leafType:t,...r}}return e})}isCalldataDescriptorV1(e,t){return"object"==typeof e&&"calldata"===e.type&&"v1"===e.version&&this.isTransactionInfoV1(e.transaction_info,t)&&this.isEnumV1(e.enums,t)&&Array.isArray(e.fields)&&e.fields.every(e=>this.isFieldV1(e))}isTransactionInfoV1(e,t){return"object"==typeof e&&"object"==typeof e.descriptor&&"string"==typeof e.descriptor.data&&"object"==typeof e.descriptor.signatures&&"string"==typeof e.descriptor.signatures[t]}isEnumV1(e,t){return"object"==typeof e&&Object.entries(e).every(([e,r])=>"string"==typeof e&&"object"==typeof r&&Object.entries(r).every(([e,r])=>"string"==typeof e&&"object"==typeof r&&"string"==typeof r.data&&void 0!==r.signatures&&this.isCalldataSignatures(r.signatures,t)))}isCalldataSignatures(e,t){return"object"==typeof e&&"string"==typeof e[t]}isFieldV1(e){return"object"==typeof e&&"string"==typeof e.descriptor&&"object"==typeof e.param&&"object"==typeof e.param.value&&this.isDescriptorValueV1(e.param.value)&&("RAW"===e.param.type||"AMOUNT"===e.param.type||"DATETIME"===e.param.type||"DURATION"===e.param.type||"UNIT"===e.param.type||"ENUM"===e.param.type||"NFT"===e.param.type&&this.isDescriptorValueV1(e.param.collection)||"TOKEN_AMOUNT"===e.param.type&&(void 0===e.param.token||this.isDescriptorValueV1(e.param.token))||"TRUSTED_NAME"===e.param.type&&Array.isArray(e.param.types)&&Array.isArray(e.param.sources)&&e.param.types.every(e=>"string"==typeof e)&&e.param.sources.every(e=>"string"==typeof e)||"CALLDATA"===e.param.type&&this.isDescriptorValueV1(e.param.value)&&this.isDescriptorValueV1(e.param.callee)&&(void 0===e.param.selector||this.isDescriptorValueV1(e.param.selector))&&(void 0===e.param.amount||this.isDescriptorValueV1(e.param.amount))&&(void 0===e.param.spender||this.isDescriptorValueV1(e.param.spender))&&(void 0===e.param.chainId||this.isDescriptorValueV1(e.param.chainId)))}isDescriptorValueV1(e){return"object"==typeof e&&"string"==typeof e.type_family&&["UINT","INT","UFIXED","FIXED","ADDRESS","BOOL","BYTES","STRING"].includes(e.type_family)&&(typeof e.type_size>"u"||"number"==typeof e.type_size)&&("path"===e.type&&this.isCalldataDescriptorValueBinaryPathV1(e)||"constant"===e.type&&this.isCalldataDescriptorValueConstantV1(e))}isCalldataDescriptorValueConstantV1(e){return"object"==typeof e&&"constant"===e.type&&"string"==typeof e.value}isCalldataDescriptorValueBinaryPathV1(e){return"object"==typeof e&&("path"===e.type&&"CONTAINER"===e.binary_path.type&&["FROM","TO","VALUE"].includes(e.binary_path.value)||"DATA"===e.binary_path.type&&Array.isArray(e.binary_path.elements)&&e.binary_path.elements.every(e=>this.isPathElementV1(e)))}isPathElementV1(e){return"object"==typeof e&&("REF"===e.type||"TUPLE"===e.type&&"number"==typeof e.offset||"ARRAY"===e.type&&"number"==typeof e.weight&&(typeof e.start>"u"||"number"==typeof e.start)&&(typeof e.end>"u"||"number"==typeof e.end)||"LEAF"===e.type&&"string"==typeof e.leaf_type&&["ARRAY_LEAF","TUPLE_LEAF","STATIC_LEAF","DYNAMIC_LEAF"].includes(e.leaf_type)||"SLICE"===e.type&&(typeof e.start>"u"||"number"==typeof e.start)&&(typeof e.end>"u"||"number"==typeof e.end))}};vN=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?vR(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&vT(t,r,o),o})([oZ(),vB(0,oW(vx.Config)),vB(1,oW(vw.PkiCertificateLoader))],vN);let vD={CalldataContextLoader:Symbol.for("CalldataContextLoader"),DappCalldataDescriptorDataSource:Symbol.for("DappCalldataDescriptorDataSource"),TokenCalldataDescriptorDataSource:Symbol.for("TokenCalldataDescriptorDataSource")},vL={ProxyDataSource:Symbol.for("ProxyDataSource"),ProxyContextFieldLoader:Symbol.for("ProxyContextFieldLoader")};var vM=Object.defineProperty,vU=Object.getOwnPropertyDescriptor,vF=(e,t)=>(r,n)=>t(r,n,e);let vj=[vI.TRANSACTION_INFO,vI.TRANSACTION_FIELD_DESCRIPTION,vI.PROXY_INFO,vI.ENUM],vz=class{constructor(e,t,r){this.dappDataSource=e,this.tokenDataSource=t,this.proxyDataSource=r}canHandle(e,t){return"object"==typeof e&&null!==e&&"to"in e&&"data"in e&&"selector"in e&&"chainId"in e&&"deviceModelId"in e&&void 0!==e.deviceModelId&&e.deviceModelId!==rm.NANO_S&&"number"==typeof e.chainId&&te(e.to)&&"0x"!==e.to&&te(e.data)&&te(e.selector)&&"0x"!==e.selector&&vj.every(e=>t.includes(e))}async load(e){let{to:t,data:r,selector:n,chainId:s,deviceModelId:o}=e,a={address:t,chainId:s,selector:n,deviceModelId:o,data:r};return this._getContexts(a,this.dappDataSource).alt(this._getContexts(a,this.tokenDataSource)).alt(this._getContextsWithProxy(a,this.dappDataSource)).orDefault([{type:vI.ERROR,error:Error("[ContextModule] CalldataContextLoader: No calldata contexts found")}])}_getContexts({address:e,chainId:t,selector:r,deviceModelId:n},s){return rV(async({liftMaybe:o})=>o((await s.getCalldataDescriptors({deviceModelId:n,address:e,chainId:t,selector:r})).toMaybe().filter(e=>e.length>0)))}_getContextsWithProxy({address:e,chainId:t,selector:r,deviceModelId:n,data:s},o){return rV(async({liftMaybe:r})=>r((await this.proxyDataSource.getProxyImplementationAddress({calldata:s,proxyAddress:e,chainId:t,challenge:""})).toMaybe())).map(({implementationAddress:e})=>this._getContexts({address:e,chainId:t,selector:r,deviceModelId:n,data:s},o).map(e=>[{type:vI.PROXY_INFO,payload:"0x"},...e])).join()}};vz=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?vU(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&vM(t,r,o),o})([oZ(),vF(0,oW(vD.DappCalldataDescriptorDataSource)),vF(1,oW(vD.TokenCalldataDescriptorDataSource)),vF(2,oW(vL.ProxyDataSource))],vz);let v$={DynamicNetworkDataSource:Symbol("DynamicNetworkDataSource"),DynamicNetworkContextLoader:Symbol("DynamicNetworkContextLoader")},vH={TrustedNameDataSource:Symbol.for("TrustedNameDataSource"),TrustedNameContextLoader:Symbol.for("TrustedNameContextLoader"),TrustedNameContextFieldLoader:Symbol.for("TrustedNameContextFieldLoader")},vV={ExternalPluginDataSource:Symbol.for("externalPluginDataSource"),ExternalPluginContextLoader:Symbol.for("externalPluginContextLoader")},vq={NftDataSource:Symbol.for("nftDataSource"),NftContextLoader:Symbol.for("nftContextLoader"),NftContextFieldLoader:Symbol.for("nftContextFieldLoader")},vG={SafeAddressDataSource:Symbol.for("SafeAddressDataSource"),SafeAddressLoader:Symbol.for("SafeAddressLoader")},vW={SolanaDataSource:Symbol.for("SolanaDataSource"),SolanaContextLoader:Symbol.for("SolanaContextLoader")},vK={TokenDataSource:Symbol.for("TokenDataSource"),TokenContextLoader:Symbol.for("TokenContextLoader"),TokenContextFieldLoader:Symbol.for("TokenContextFieldLoader")},vJ={TransactionCheckDataSource:Symbol.for("TransactionCheckDataSource"),TransactionCheckContextLoader:Symbol.for("TransactionCheckContextLoader"),TypedDataCheckDataSource:Symbol.for("TypedDataCheckDataSource"),TypedDataCheckContextLoader:Symbol.for("TypedDataCheckContextLoader")},vZ={TypedDataDataSource:Symbol.for("TypedDataDataSource"),TypedDataContextLoader:Symbol.for("TypedDataContextLoader")},vQ=()=>new aP(({bind:e})=>{e(vD.DappCalldataDescriptorDataSource).toDynamicValue(e=>new vN(e.get(vx.Config),e.get(vw.PkiCertificateLoader),"dapps")),e(vD.TokenCalldataDescriptorDataSource).toDynamicValue(e=>new vN(e.get(vx.Config),e.get(vw.PkiCertificateLoader),"tokens")),e(vD.CalldataContextLoader).to(vz)}),vX=e=>new aP(({bind:t})=>{t(vx.Config).toConstantValue(e)});var vY=Object.defineProperty,v0=Object.getOwnPropertyDescriptor;let v1=class{constructor(e){this.config=e}async getDynamicNetworkConfiguration(e){let t;try{t=(await dJ.get(`${this.config.cal.url}/networks?output=id,descriptors,icons&chain_id=${e}`,{headers:{[vS]:`context-module/${vO.version}`}})).data}catch(e){return rM(e instanceof Error?e:Error("Failed to fetch network configuration"))}let r=null==t?void 0:t[0];return r?this.isValidNetworkData(r)?rU(this.transformToNetworkConfiguration(r)):rM(Error(`Invalid network configuration response for chain ID: ${e}`)):rM(Error(`Network configuration not found for chain ID: ${e}`))}isValidNetworkData(e){if(!e||"object"!=typeof e||"string"!=typeof e.id||!e.descriptors||"object"!=typeof e.descriptors)return!1;for(let t of Object.values(e.descriptors))if(!this.isValidDescriptor(t))return!1;return!(e.icons&&"object"!=typeof e.icons)}isValidDescriptor(e){if(!e||"object"!=typeof e||"string"!=typeof e.data||"string"!=typeof e.descriptorType||"string"!=typeof e.descriptorVersion||!e.signatures||"object"!=typeof e.signatures)return!1;let t=e.signatures;return"string"==typeof t.prod&&"string"==typeof t.test}transformToNetworkConfiguration(e){let t=Object.entries(e.descriptors).reduce((t,[r,n])=>{var s;return t[r]={descriptorType:n.descriptorType,descriptorVersion:n.descriptorVersion,data:n.data,signatures:n.signatures,icon:null==(s=e.icons)?void 0:s[r]},t},{});return{id:e.id,descriptors:t}}};v1=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?v0(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&vY(t,r,o),o})([oZ(),(G=oW(vx.Config),(e,t)=>G(e,t,0))],v1);var v2=Object.defineProperty,v3=Object.getOwnPropertyDescriptor,v8=(e,t)=>(r,n)=>t(r,n,e);let v6=[vI.DYNAMIC_NETWORK,vI.DYNAMIC_NETWORK_ICON],v4=class{constructor(e,t,r){eY(this,"_networkDataSource"),eY(this,"_config"),eY(this,"_certificateLoader"),this._networkDataSource=e,this._config=t,this._certificateLoader=r}canHandle(e,t){return"object"==typeof e&&null!==e&&"chainId"in e&&"deviceModelId"in e&&void 0!==e.deviceModelId&&e.deviceModelId!==rm.NANO_S&&"number"==typeof e.chainId&&v6.every(e=>t.includes(e))}async load(e){let{chainId:t,deviceModelId:r}=e,n=await this._networkDataSource.getDynamicNetworkConfiguration(t),s=await this._certificateLoader.loadCertificate({keyId:vE.CalNetwork,keyUsage:vA.Network,targetDevice:r});return n.caseOf({Left:()=>[],Right:e=>{let t=[],n=e.descriptors[r];if(!n)return[];let o=n.signatures[this._config.cal.mode];if(!o)return[];let a=vC.appendSignatureToPayload(n.data,o,"15");return t.push({type:vI.DYNAMIC_NETWORK,payload:a,certificate:s}),n.icon&&t.push({type:vI.DYNAMIC_NETWORK_ICON,payload:n.icon}),t}})}};v4=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?v3(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&v2(t,r,o),o})([oZ(),v8(0,oW(v$.DynamicNetworkDataSource)),v8(1,oW(vx.Config)),v8(2,oW(vw.PkiCertificateLoader))],v4);let v5=()=>new aP(({bind:e})=>{e(v$.DynamicNetworkDataSource).to(v1),e(v$.DynamicNetworkContextLoader).to(v4)});var v9=Object.defineProperty,v7=Object.getOwnPropertyDescriptor;let xe=class{constructor(e){this.config=e}async getDappInfos({chainId:e,address:t,selector:r}){var n,s,o,a,l,u,c;try{let d=await dJ.request({method:"GET",url:`${this.config.cal.url}/dapps`,params:{output:"b2c,b2c_signatures,abis",chain_id:e,contracts:t},headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken}});if(!d.data[0])return rU(void 0);t=t.toLowerCase(),r=`0x${r.slice(2).toLowerCase()}`;let{erc20OfInterest:f,method:h,plugin:p}=(null==(a=null==(o=null==(s=null==(n=d.data[0].b2c)?void 0:n.contracts)?void 0:s.find(e=>e.address===t))?void 0:o.selectors)?void 0:a[r])||{},{signature:g,serialized_data:m}=(null==(u=null==(l=d.data[0].b2c_signatures)?void 0:l[t])?void 0:u[r])||{};if(!f||!h||!p||!g||!m)return rU(void 0);let y=null==(c=d.data[0].abis)?void 0:c[t];return rU(y?{selectorDetails:{method:h,plugin:p,erc20OfInterest:f,signature:g,serializedData:m},abi:y}:void 0)}catch{return rM(Error("[ContextModule] HttpExternalPluginDataSource: Error fetching dapp infos"))}}};function xt(e,t,r){for(let n in t){let s=t[n],o=r?r[n]:null;o&&function(e,t,r){let n=t.split("|").map(e=>e.trim());for(let r=0;r<n.length;r++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}let s=Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=e,s}(s,o,n),Object.defineProperty(e,n,{enumerable:!0,value:s,writable:!1})}}function xr(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(xr).join(", ")+" ]";if(e instanceof Uint8Array){let t="0123456789abcdef",r="0x";for(let n=0;n<e.length;n++)r+=t[e[n]>>4],r+=t[15&e[n]];return r}if("object"==typeof e&&"function"==typeof e.toJSON)return xr(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let t=Object.keys(e);return t.sort(),"{ "+t.map(t=>`${xr(t)}: ${xr(e[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}xe=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?v7(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&v9(t,r,o),o})([oZ(),(W=oW(vx.Config),(e,t)=>W(e,t,0))],xe);function xn(e,t,r){let n,s=e;{let n=[];if(r){if("message"in r||"code"in r||"name"in r)throw Error(`value will overwrite populated values: ${xr(r)}`);for(let e in r){if("shortMessage"===e)continue;let t=r[e];n.push(e+"="+xr(t))}}n.push(`code=${t}`),n.push("version=6.14.1"),n.length&&(e+=" ("+n.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":n=TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=RangeError(e);break;default:n=Error(e)}return xt(n,{code:t}),r&&Object.assign(n,r),null==n.shortMessage&&xt(n,{shortMessage:s}),n}function xi(e,t,r,n){if(!e)throw xn(t,r,n)}function xs(e,t,r,n){xi(e,t,"INVALID_ARGUMENT",{argument:r,value:n})}function xo(e,t,r){null==r&&(r=""),r&&(r=": "+r),xi(e>=t,"missing argument"+r,"MISSING_ARGUMENT",{count:e,expectedCount:t}),xi(e<=t,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}let xa=["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw Error("bad");if("NFD"===t){let e=String.fromCharCode(233).normalize("NFD"),t=String.fromCharCode(101,769);if(e!==t)throw Error("broken")}e.push(t)}catch{}return e},[]);function xl(e,t,r){if(null==r&&(r=""),e!==t){let e=r,t="new";r&&(e+=".",t+=" "+r),xi(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function xu(e,t,r){if(e instanceof Uint8Array)return r?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let t=new Uint8Array((e.length-2)/2),r=2;for(let n=0;n<t.length;n++)t[n]=parseInt(e.substring(r,r+2),16),r+=2;return t}xs(!1,"invalid BytesLike value",t||"value",e)}function xc(e,t){return xu(e,t,!1)}function xd(e,t){return xu(e,t,!0)}function xf(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||"number"==typeof t&&e.length!==2+2*t||!0===t&&e.length%2!=0)}let xh="0123456789abcdef";function xp(e){let t=xc(e),r="0x";for(let e=0;e<t.length;e++){let n=t[e];r+=xh[(240&n)>>4]+xh[15&n]}return r}function xg(e){return"0x"+e.map(e=>xp(e).substring(2)).join("")}function xm(e,t,r){let n=xc(e);return null!=r&&r>n.length&&xi(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r}),xp(n.slice(t??0,r??n.length))}function xy(e,t,r){let n=xc(e);xi(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});let s=new Uint8Array(t);return s.fill(0),r?s.set(n,t-n.length):s.set(n,0),xp(s)}let xb=BigInt(0),xv=BigInt(1);function xx(e,t){return xE(e,"value")&(xv<<BigInt(xk(t,"bits")))-xv}function xw(e,t){switch(typeof e){case"bigint":return e;case"number":return xs(Number.isInteger(e),"underflow",t||"value",e),xs(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(r){xs(!1,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}xs(!1,"invalid BigNumberish value",t||"value",e)}function xE(e,t){let r=xw(e,t);return xi(r>=xb,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),r}let xA="0123456789abcdef";function xS(e){if(e instanceof Uint8Array){let t="0x0";for(let r of e)t+=xA[r>>4],t+=xA[15&r];return BigInt(t)}return xw(e)}function xk(e,t){switch(typeof e){case"bigint":return xs(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),Number(e);case"number":return xs(Number.isInteger(e),"underflow",t||"value",e),xs(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),e;case"string":try{if(""===e)throw Error("empty string");return xk(BigInt(e),t)}catch(r){xs(!1,`invalid numeric string: ${r.message}`,t||"value",e)}}xs(!1,"invalid numeric value",t||"value",e)}function xI(e,t){let r=xE(e,"value").toString(16);if(null==t)r.length%2&&(r="0"+r);else{let n=xk(t,"width");for(xi(2*n>=r.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<2*n;)r="0"+r}return"0x"+r}function x_(e,t,r,n,s){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return"OVERRUN"===e?r.length-t-1:0}let xP=Object.freeze({error:function(e,t,r,n,s){xs(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:x_,replace:function(e,t,r,n,s){return"OVERLONG"===e?(xs("number"==typeof s,"invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),x_(e,t,r))}});function xC(e,t){xs("string"==typeof e,"invalid string value","str",e),null!=t&&(xi(xa.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}}),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if((64512&n)==55296){t++;let s=e.charCodeAt(t);xs(t<e.length&&(64512&s)==56320,"invalid surrogate pair","str",e);let o=65536+((1023&n)<<10)+(1023&s);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return new Uint8Array(r)}let xO=new Uint8Array(32),xT=["then"],xR={},xB=new WeakMap;function xN(e){return xB.get(e)}function xD(e,t){let r=Error(`deferred error during ABI decoding triggered accessing ${e}`);throw r.error=t,r}let xL=class e extends Array{constructor(...e){var t,r;let n=e[0],s=e[1],o=(e[2]||[]).slice(),a=!0;n!==xR&&(s=e,o=[],a=!1),super(s.length),e2(this,S_,void 0),s.forEach((e,t)=>{this[t]=e});let l=o.reduce((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e),new Map);if(t=Object.freeze(s.map((e,t)=>{let r=o[t];return null!=r&&1===l.get(r)?r:null})),xB.set(this,t),e3(this,S_,[]),null==e1(this,S_)&&e1(this,S_),!a)return;Object.freeze(this);let u=new Proxy(this,{get:(e,t,r)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){let r=xk(t,"%index");if(r<0||r>=this.length)throw RangeError("out of result range");let n=e[r];return n instanceof Error&&xD(`index ${r}`,n),n}if(xT.indexOf(t)>=0)return Reflect.get(e,t,r);let n=e[t];if(n instanceof Function)return function(...t){return n.apply(this===r?e:this,t)};if(!(t in e))return e.getValue.apply(this===r?e:this,[t])}return Reflect.get(e,t,r)}});return r=xN(this),xB.set(u,r),u}toArray(t){let r=[];return this.forEach((n,s)=>{n instanceof Error&&xD(`index ${s}`,n),t&&n instanceof e&&(n=n.toArray(t)),r.push(n)}),r}toObject(e){let t=xN(this);return t.reduce((r,n,s)=>(xi(null!=n,`value at index ${s} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),function e(t,r,n){return t.indexOf(null)>=0?r.map((t,r)=>t instanceof xM?e(xN(t),t,n):t):t.reduce((t,s,o)=>{let a=r.getValue(s);return s in t||(n&&a instanceof xM&&(a=e(xN(a),a,n)),t[s]=a),t},{})}(t,this,e)),{})}slice(t,r){null==t&&(t=0),t<0&&(t+=this.length)<0&&(t=0),null==r&&(r=this.length),r<0&&(r+=this.length)<0&&(r=0),r>this.length&&(r=this.length);let n=xN(this),s=[],o=[];for(let e=t;e<r;e++)s.push(this[e]),o.push(n[e]);return new e(xR,s,o)}filter(t,r){let n=xN(this),s=[],o=[];for(let e=0;e<this.length;e++){let a=this[e];a instanceof Error&&xD(`index ${e}`,a),t.call(r,a,e,this)&&(s.push(a),o.push(n[e]))}return new e(xR,s,o)}map(e,t){let r=[];for(let n=0;n<this.length;n++){let s=this[n];s instanceof Error&&xD(`index ${n}`,s),r.push(e.call(t,s,n,this))}return r}getValue(e){let t=xN(this).indexOf(e);if(-1===t)return;let r=this[t];return r instanceof Error&&xD(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(t,r){return new e(xR,t,r)}};S_=new WeakMap;let xM=xL;function xU(e){let t=function(e){let t=xE(e,"value");if(t===xb)return new Uint8Array([]);let r=t.toString(16);r.length%2&&(r="0"+r);let n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){let t=2*e;n[e]=parseInt(r.substring(t,t+2),16)}return n}(e);return xi(t.length<=32,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:32,offset:t.length}),32!==t.length&&(t=xd(xg([xO.slice(t.length%32),t]))),t}class xF{constructor(e,t,r,n){eY(this,"name"),eY(this,"type"),eY(this,"localName"),eY(this,"dynamic"),xt(this,{name:e,type:t,localName:r,dynamic:n},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){xs(!1,e,this.localName,t)}}class xj{constructor(){e2(this,SO),e2(this,SP,void 0),e2(this,SC,void 0),e3(this,SP,[]),e3(this,SC,0)}get data(){return xg(e1(this,SP))}get length(){return e1(this,SC)}appendWriter(e){return e6(this,SO,ST).call(this,xd(e.data))}writeBytes(e){let t=xd(e),r=t.length%32;return r&&(t=xd(xg([t,xO.slice(r)]))),e6(this,SO,ST).call(this,t)}writeValue(e){return e6(this,SO,ST).call(this,xU(e))}writeUpdatableValue(){let e=e1(this,SP).length;return e1(this,SP).push(xO),e3(this,SC,e1(this,SC)+32),t=>{e1(this,SP)[e]=xU(t)}}}SP=new WeakMap,SC=new WeakMap,SO=new WeakSet,ST=function(e){return e1(this,SP).push(e),e3(this,SC,e1(this,SC)+e.length),e.length};let xz=class e{constructor(e,t,r){e2(this,SM),e2(this,SF),eY(this,"allowLoose"),e2(this,SR,void 0),e2(this,SB,void 0),e2(this,SN,void 0),e2(this,SD,void 0),e2(this,SL,void 0),xt(this,{allowLoose:!!t}),e3(this,SR,xd(e)),e3(this,SN,0),e3(this,SD,null),e3(this,SL,r??1024),e3(this,SB,0)}get data(){return xp(e1(this,SR))}get dataLength(){return e1(this,SR).length}get consumed(){return e1(this,SB)}get bytes(){return new Uint8Array(e1(this,SR))}subReader(t){let r=new e(e1(this,SR).slice(e1(this,SB)+t),this.allowLoose,e1(this,SL));return e3(r,SD,this),r}readBytes(e,t){let r=e6(this,SF,Sj).call(this,0,e,!!t);return e6(this,SM,SU).call(this,e),e3(this,SB,e1(this,SB)+r.length),r.slice(0,e)}readValue(){return xS(this.readBytes(32))}readIndex(){return xk(xS(this.readBytes(32)))}};function x$(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function xH(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function xV(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}SR=new WeakMap,SB=new WeakMap,SN=new WeakMap,SD=new WeakMap,SL=new WeakMap,SM=new WeakSet,SU=function(e){var t;if(e1(this,SD))return e6(t=e1(this,SD),SM,SU).call(t,e);e3(this,SN,e1(this,SN)+e),xi(1>e1(this,SL)||e1(this,SN)<=e1(this,SL)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${e1(this,SL)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:xd(e1(this,SR)),offset:e1(this,SB),length:e,info:{bytesRead:e1(this,SN),dataLength:this.dataLength}})},SF=new WeakSet,Sj=function(e,t,r){let n=32*Math.ceil(t/32);return e1(this,SB)+n>e1(this,SR).length&&(this.allowLoose&&r&&e1(this,SB)+t<=e1(this,SR).length?n=t:xi(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:xd(e1(this,SR)),length:e1(this,SR).length,offset:e1(this,SB)+n})),e1(this,SR).slice(e1(this,SB),e1(this,SB)+n)};let xq=e=>e instanceof Uint8Array,xG=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function xW(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),!xq(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}let xK=class{clone(){return this._cloneInto()}},xJ=BigInt(0x100000000-1),xZ=BigInt(32),xQ=(e,t,r)=>e<<r|t>>>32-r,xX=(e,t,r)=>t<<r|e>>>32-r,xY=(e,t,r)=>t<<r-32|e>>>64-r,x0=(e,t,r)=>e<<r-32|t>>>64-r,[x1,x2,x3]=[[],[],[]],x8=BigInt(0),x6=BigInt(1),x4=BigInt(2),x5=BigInt(7),x9=BigInt(256),x7=BigInt(113);for(let e=0,t=x6,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],x1.push(2*(5*n+r)),x2.push((e+1)*(e+2)/2%64);let s=x8;for(let e=0;e<7;e++)(t=(t<<x6^(t>>x5)*x7)%x9)&x4&&(s^=x6<<(x6<<BigInt(e))-x6);x3.push(s)}let[we,wt]=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){let{h:o,l:a}=function(e,t=!1){return t?{h:Number(e&xJ),l:Number(e>>xZ&xJ)}:{h:0|Number(e>>xZ&xJ),l:0|Number(e&xJ)}}(e[s],t);[r[s],n[s]]=[o,a]}return[r,n]}(x3,!0),wr=(e,t,r)=>r>32?xY(e,t,r):xQ(e,t,r),wn=(e,t,r)=>r>32?x0(e,t,r):xX(e,t,r),wi=class e extends xK{constructor(e,t,r,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,x$(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=xG(this.state)}keccak(){(function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,s=(t+2)%10,o=r[s],a=r[s+1],l=wr(o,a,1)^r[n],u=wn(o,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=l,e[t+r+1]^=u}let t=e[2],s=e[3];for(let r=0;r<24;r++){let n=x2[r],o=wr(t,s,n),a=wn(t,s,n),l=x1[r];t=e[l],s=e[l+1],e[l]=o,e[l+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=we[n],e[1]^=wt[n]}r.fill(0)})(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){xV(this);let{blockLen:t,state:r}=this,n=(e=xW(e)).length;for(let s=0;s<n;){let o=Math.min(t-this.pos,n-s);for(let t=0;t<o;t++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){xV(this,!1),xH(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,s=e.length;n<s;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,s-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return x$(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(function(e,t){xH(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:s,rounds:o,enableXOF:a}=this;return t||(t=new e(r,n,s,a,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}},ws=function(e){let t=t=>e().update(xW(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new wi(136,1,32)),wo=!1,wa=function(e){return ws(e)},wl=wa;function wu(e){let t=xc(e,"data");return xp(wl(t))}wu._=wa,wu.lock=function(){wo=!0},wu.register=function(e){if(wo)throw TypeError("keccak256 is locked");wl=e},Object.freeze(wu);let wc=BigInt(0),wd=BigInt(36);function wf(e){let t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);let n=xc(wu(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}let wh={};for(let e=0;e<10;e++)wh[String(e)]=String(e);for(let e=0;e<26;e++)wh[String.fromCharCode(65+e)]=String(10+e);let wp=function(){let e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function wg(e){if(xs("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);let t=wf(e);return xs(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){xs(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>wh[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e),"bad icap checksum","address",e);let t=(function(e){e=e.toLowerCase();let t=wc;for(let r=0;r<e.length;r++)t=t*wd+wp[e[r]];return t})(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return wf("0x"+t)}xs(!1,"invalid address","address",e)}let wm={};function wy(e,t){let r=!1;return t<0&&(r=!0,t*=-1),new ww(wm,`${r?"":"u"}int${t}`,e,{signed:r,width:t})}function wb(e,t){return new ww(wm,`bytes${t||""}`,e,{size:t})}let wv=Symbol.for("_ethers_typed"),wx=class e{constructor(e,t,r,n){eY(this,"type"),eY(this,"value"),e2(this,Sz,void 0),eY(this,"_typedSymbol"),null==n&&(n=null),xl(wm,e,"Typed"),xt(this,{_typedSymbol:wv,type:t,value:r}),e3(this,Sz,n),this.format()}format(){if("array"===this.type||"dynamicArray"===this.type)throw Error("");return"tuple"===this.type?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return e1(this,Sz)}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===e1(this,Sz)?-1:!1===e1(this,Sz)?this.value.length:null}static from(t,r){return new e(wm,t,r)}static uint8(e){return wy(e,8)}static uint16(e){return wy(e,16)}static uint24(e){return wy(e,24)}static uint32(e){return wy(e,32)}static uint40(e){return wy(e,40)}static uint48(e){return wy(e,48)}static uint56(e){return wy(e,56)}static uint64(e){return wy(e,64)}static uint72(e){return wy(e,72)}static uint80(e){return wy(e,80)}static uint88(e){return wy(e,88)}static uint96(e){return wy(e,96)}static uint104(e){return wy(e,104)}static uint112(e){return wy(e,112)}static uint120(e){return wy(e,120)}static uint128(e){return wy(e,128)}static uint136(e){return wy(e,136)}static uint144(e){return wy(e,144)}static uint152(e){return wy(e,152)}static uint160(e){return wy(e,160)}static uint168(e){return wy(e,168)}static uint176(e){return wy(e,176)}static uint184(e){return wy(e,184)}static uint192(e){return wy(e,192)}static uint200(e){return wy(e,200)}static uint208(e){return wy(e,208)}static uint216(e){return wy(e,216)}static uint224(e){return wy(e,224)}static uint232(e){return wy(e,232)}static uint240(e){return wy(e,240)}static uint248(e){return wy(e,248)}static uint256(e){return wy(e,256)}static uint(e){return wy(e,256)}static int8(e){return wy(e,-8)}static int16(e){return wy(e,-16)}static int24(e){return wy(e,-24)}static int32(e){return wy(e,-32)}static int40(e){return wy(e,-40)}static int48(e){return wy(e,-48)}static int56(e){return wy(e,-56)}static int64(e){return wy(e,-64)}static int72(e){return wy(e,-72)}static int80(e){return wy(e,-80)}static int88(e){return wy(e,-88)}static int96(e){return wy(e,-96)}static int104(e){return wy(e,-104)}static int112(e){return wy(e,-112)}static int120(e){return wy(e,-120)}static int128(e){return wy(e,-128)}static int136(e){return wy(e,-136)}static int144(e){return wy(e,-144)}static int152(e){return wy(e,-152)}static int160(e){return wy(e,-160)}static int168(e){return wy(e,-168)}static int176(e){return wy(e,-176)}static int184(e){return wy(e,-184)}static int192(e){return wy(e,-192)}static int200(e){return wy(e,-200)}static int208(e){return wy(e,-208)}static int216(e){return wy(e,-216)}static int224(e){return wy(e,-224)}static int232(e){return wy(e,-232)}static int240(e){return wy(e,-240)}static int248(e){return wy(e,-248)}static int256(e){return wy(e,-256)}static int(e){return wy(e,-256)}static bytes1(e){return wb(e,1)}static bytes2(e){return wb(e,2)}static bytes3(e){return wb(e,3)}static bytes4(e){return wb(e,4)}static bytes5(e){return wb(e,5)}static bytes6(e){return wb(e,6)}static bytes7(e){return wb(e,7)}static bytes8(e){return wb(e,8)}static bytes9(e){return wb(e,9)}static bytes10(e){return wb(e,10)}static bytes11(e){return wb(e,11)}static bytes12(e){return wb(e,12)}static bytes13(e){return wb(e,13)}static bytes14(e){return wb(e,14)}static bytes15(e){return wb(e,15)}static bytes16(e){return wb(e,16)}static bytes17(e){return wb(e,17)}static bytes18(e){return wb(e,18)}static bytes19(e){return wb(e,19)}static bytes20(e){return wb(e,20)}static bytes21(e){return wb(e,21)}static bytes22(e){return wb(e,22)}static bytes23(e){return wb(e,23)}static bytes24(e){return wb(e,24)}static bytes25(e){return wb(e,25)}static bytes26(e){return wb(e,26)}static bytes27(e){return wb(e,27)}static bytes28(e){return wb(e,28)}static bytes29(e){return wb(e,29)}static bytes30(e){return wb(e,30)}static bytes31(e){return wb(e,31)}static bytes32(e){return wb(e,32)}static address(t){return new e(wm,"address",t)}static bool(t){return new e(wm,"bool",!!t)}static bytes(t){return new e(wm,"bytes",t)}static string(t){return new e(wm,"string",t)}static array(e,t){throw Error("not implemented yet")}static tuple(e,t){throw Error("not implemented yet")}static overrides(t){return new e(wm,"overrides",Object.assign({},t))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===wv}static dereference(t,r){if(e.isTyped(t)){if(t.type!==r)throw Error(`invalid type: expecetd ${r}, got ${t.type}`);return t.value}return t}};Sz=new WeakMap;let ww=wx;class wE extends xF{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=ww.dereference(t,"string");try{r=wg(r)}catch(e){return this._throwError(e.message,t)}return e.writeValue(r)}decode(e){return wg(xI(e.readValue(),20))}}class wA extends xF{constructor(e){super(e.name,e.type,"_",e.dynamic),eY(this,"coder"),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function wS(e,t,r){let n=[];if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map(t=>{let n=t.localName;return xi(n,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),xi(!e[n],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),e[n]=!0,r[n]})}else xs(!1,"invalid tuple value","tuple",r);xs(t.length===n.length,"types/value length mismatch","tuple",r);let s=new xj,o=new xj,a=[];return t.forEach((e,t)=>{let r=n[t];if(e.dynamic){let t=o.length;e.encode(o,r);let n=s.writeUpdatableValue();a.push(e=>{n(e+t)})}else e.encode(s,r)}),a.forEach(e=>{e(s.length)}),e.appendWriter(s)+e.appendWriter(o)}function wk(e,t){let r=[],n=[],s=e.subReader(0);return t.forEach(t=>{let o=null;if(t.dynamic){let r=e.readIndex(),n=s.subReader(r);try{o=t.decode(n)}catch(e){if(e&&"BUFFER_OVERRUN"===e.code)throw e;(o=e).baseType=t.name,o.name=t.localName,o.type=t.type}}else try{o=t.decode(e)}catch(e){if(e&&"BUFFER_OVERRUN"===e.code)throw e;(o=e).baseType=t.name,o.name=t.localName,o.type=t.type}if(null==o)throw Error("investigate");r.push(o),n.push(t.localName||null)}),xM.fromItems(r,n)}class wI extends xF{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),eY(this,"coder"),eY(this,"length"),xt(this,{coder:e,length:t})}defaultValue(){let e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){let r=ww.dereference(t,"array");Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;-1===n&&(n=r.length,e.writeValue(r.length)),xo(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let e=0;e<r.length;e++)s.push(this.coder);return wS(e,s,r)}decode(e){let t=this.length;-1===t&&xi(32*(t=e.readIndex())<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:32*t,length:e.dataLength});let r=[];for(let e=0;e<t;e++)r.push(new wA(this.coder));return wk(e,r)}}class w_ extends xF{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){let r=ww.dereference(t,"bool");return e.writeValue(+!!r)}decode(e){return!!e.readValue()}}class wP extends xF{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){return t=xd(t),e.writeValue(t.length)+e.writeBytes(t)}decode(e){return e.readBytes(e.readIndex(),!0)}}class wC extends wP{constructor(e){super("bytes",e)}decode(e){return xp(super.decode(e))}}class wO extends xF{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),eY(this,"size"),xt(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=xd(ww.dereference(t,this.type));return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return xp(e.readBytes(this.size))}}let wT=new Uint8Array([]);class wR extends xF{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(wT)}decode(e){return e.readBytes(0),null}}let wB=BigInt(0),wN=BigInt(1),wD=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class wL extends xF{constructor(e,t,r){let n=(t?"int":"uint")+8*e;super(n,n,r,!1),eY(this,"size"),eY(this,"signed"),xt(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let r=xw(ww.dereference(t,this.type)),n=xx(wD,256);if(this.signed){let e=xx(n,8*this.size-1);(r>e||r<-(e+wN))&&this._throwError("value out-of-bounds",t),r=function(e,t){let r=xw(e,"value"),n=BigInt(xk(256,"width")),s=xv<<n-xv;return r<xb?(xi((r=-r)<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~r&(xv<<n)-xv)+xv):(xi(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),r)}(r,256)}else(r<wB||r>xx(n,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(r)}decode(e){let t=xx(e.readValue(),8*this.size);return this.signed&&(t=function(e,t){let r=xE(e,"value"),n=BigInt(xk(t,"width"));return(xi(r>>n===xb,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),r>>n-xv)?-((~r&(xv<<n)-xv)+xv):r}(t,8*this.size)),t}}class wM extends wP{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,xC(ww.dereference(t,"string")))}decode(e){return(function(e,t){null==t&&(t=xP.error);let r=xc(e,"bytes"),n=[],s=0;for(;s<r.length;){let e=r[s++];if(!(e>>7)){n.push(e);continue}let o=null,a=null;if((224&e)==192)o=1,a=127;else if((240&e)==224)o=2,a=2047;else if((248&e)==240)o=3,a=65535;else{(192&e)==128?s+=t("UNEXPECTED_CONTINUE",s-1,r,n):s+=t("BAD_PREFIX",s-1,r,n);continue}if(s-1+o>=r.length){s+=t("OVERRUN",s-1,r,n);continue}let l=e&(1<<8-o-1)-1;for(let e=0;e<o;e++){let e=r[s];if((192&e)!=128){s+=t("MISSING_CONTINUE",s,r,n),l=null;break}l=l<<6|63&e,s++}if(null!==l){if(l>1114111){s+=t("OUT_OF_RANGE",s-1-o,r,n,l);continue}if(l>=55296&&l<=57343){s+=t("UTF16_SURROGATE",s-1-o,r,n,l);continue}if(l<=a){s+=t("OVERLONG",s-1-o,r,n,l);continue}n.push(l)}}return n})(super.decode(e),void 0).map(e=>e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10&1023)+55296,(1023&e)+56320)).join("")}}class wU extends xF{constructor(e,t){let r=!1,n=[];e.forEach(e=>{e.dynamic&&(r=!0),n.push(e.type)}),super("tuple","tuple("+n.join(",")+")",t,r),eY(this,"coders"),xt(this,{coders:Object.freeze(e.slice())})}defaultValue(){let e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});let t=this.coders.reduce((e,t)=>{let r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let s=r.localName;s&&1===t[s]&&("length"===s&&(s="_length"),null==e[s]&&(e[s]=e[n]))}),Object.freeze(e)}encode(e,t){let r=ww.dereference(t,"tuple");return wS(e,this.coders,r)}decode(e){return wk(e,this.coders)}}function wF(e){return wu(xC(e))}function wj(e){let t=new Set;return e.forEach(e=>t.add(e)),Object.freeze(t)}let wz=wj("external public payable override".split(" ")),w$="constant external internal payable private public pure view override",wH=wj(w$.split(" ")),wV="constructor error event fallback function receive struct",wq=wj(wV.split(" ")),wG="calldata memory storage payable indexed",wW=wj(wG.split(" ")),wK=wj([wV,wG,"tuple returns",w$].join(" ").split(" ")),wJ={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},wZ=RegExp("^(\\s*)"),wQ=RegExp("^([0-9]+)"),wX=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),wY=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),w0=RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$"),w1=class e{constructor(e){e2(this,SV),e2(this,S$,void 0),e2(this,SH,void 0),e3(this,S$,0),e3(this,SH,e.slice())}get offset(){return e1(this,S$)}get length(){return e1(this,SH).length-e1(this,S$)}clone(){return new e(e1(this,SH))}reset(){e3(this,S$,0)}popKeyword(e){let t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){let t=this.peek();throw Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=e6(this,SV,Sq).call(this,e1(this,S$)+1,e.match+1);return e3(this,S$,e.match+1),t}popParams(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=[];for(;e1(this,S$)<e.match-1;){let e=this.peek().linkNext;t.push(e6(this,SV,Sq).call(this,e1(this,S$)+1,e)),e3(this,S$,e)}return e3(this,S$,e.match+1),t}peek(){if(e1(this,S$)>=e1(this,SH).length)throw Error("out-of-bounds");return e1(this,SH)[e1(this,S$)]}peekKeyword(e){let t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;let t=this.peek();return t.type===e?t.text:null}pop(){let e=this.peek();return e8(this,S$)._++,e}toString(){let e=[];for(let t=e1(this,S$);t<e1(this,SH).length;t++){let r=e1(this,SH)[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};function w2(e){let t=[],r=t=>{let r=o<e.length?JSON.stringify(e[o]):"$EOI";throw Error(`invalid token ${r} at ${o}: ${t}`)},n=[],s=[],o=0;for(;o<e.length;){let a=e.substring(o),l=a.match(wZ);l&&(o+=l[1].length,a=e.substring(o));let u={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:o,value:-1};t.push(u);let c=wJ[a[0]]||"";if(c){if(u.type=c,u.text=a[0],o++,"OPEN_PAREN"===c)n.push(t.length-1),s.push(t.length-1);else if("CLOSE_PAREN"==c)0===n.length&&r("no matching open bracket"),u.match=n.pop(),t[u.match].match=t.length-1,u.depth--,u.linkBack=s.pop(),t[u.linkBack].linkNext=t.length-1;else if("COMMA"===c)u.linkBack=s.pop(),t[u.linkBack].linkNext=t.length-1,s.push(t.length-1);else if("OPEN_BRACKET"===c)u.type="BRACKET";else if("CLOSE_BRACKET"===c){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){let r=t.pop().text;e=r+e,t[t.length-1].value=xk(r)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw Error("missing opening bracket");t[t.length-1].text+=e}continue}if(l=a.match(wX)){if(u.text=l[1],o+=u.text.length,wK.has(u.text)){u.type="KEYWORD";continue}if(u.text.match(w0)){u.type="TYPE";continue}u.type="ID";continue}if(l=a.match(wQ)){u.text=l[1],u.type="NUMBER",o+=u.text.length;continue}throw Error(`unexpected token ${JSON.stringify(a[0])} at position ${o}`)}return new w1(t.map(e=>Object.freeze(e)))}function w3(e,t){let r=[];for(let n in t.keys())e.has(n)&&r.push(n);if(r.length>1)throw Error(`conflicting types: ${r.join(", ")}`)}function w8(e,t){if(t.peekKeyword(wq)){let r=t.pop().text;if(r!==e)throw Error(`expected ${e}, got ${r}`)}return t.popType("ID")}function w6(e,t){let r=new Set;for(;;){let n=e.peekType("KEYWORD");if(null==n||t&&!t.has(n))break;if(e.pop(),r.has(n))throw Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function w4(e){let t=w6(e,wH);return w3(t,wj("constant payable nonpayable".split(" "))),w3(t,wj("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function w5(e,t){return e.popParams().map(e=>Ef.from(e,t))}function w9(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return xw(e.pop().text);throw Error("invalid gas")}return null}function w7(e){if(e.length)throw Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}S$=new WeakMap,SH=new WeakMap,SV=new WeakSet,Sq=function(e=0,t=0){return new w1(e1(this,SH).slice(e,t).map(t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e}))))};let Ee=new RegExp(/^(.*)\[([0-9]*)\]$/);function Et(e){let t=e.match(w0);if(xs(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){let r=parseInt(t[2]);xs(0!==r&&r<=32,"invalid bytes length","type",e)}else if(t[3]){let r=parseInt(t[3]);xs(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",e)}return e}let Er={},En=Symbol.for("_ethers_internal"),Ei="_ParamTypeInternal",Es="_ErrorInternal",Eo="_EventInternal",Ea="_ConstructorInternal",El="_FallbackInternal",Eu="_FunctionInternal",Ec="_StructInternal",Ed=class e{constructor(e,t,r,n,s,o,a,l){if(e2(this,SG),eY(this,"name"),eY(this,"type"),eY(this,"baseType"),eY(this,"indexed"),eY(this,"components"),eY(this,"arrayLength"),eY(this,"arrayChildren"),xl(e,Er,"ParamType"),Object.defineProperty(this,En,{value:Ei}),o&&(o=Object.freeze(o.slice())),"array"===n){if(null==a||null==l)throw Error("")}else if(null!=a||null!=l)throw Error("");if("tuple"===n){if(null==o)throw Error("")}else if(null!=o)throw Error("");xt(this,{name:t,type:r,baseType:n,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(e){if(null==e&&(e="sighash"),"json"===e){let t=this.name||"";if(this.isArray()){let e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}let r={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(r)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(t=>t.format(e)).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw Error("array is wrong length");let r=this;return e.map(e=>r.arrayChildren.walk(e,t))}if(this.isTuple()){if(!Array.isArray(e))throw Error("invalid tuple value");if(e.length!==this.components.length)throw Error("array is wrong length");let r=this;return e.map((e,n)=>r.components[n].walk(e,t))}return t(this.type,e)}async walkAsync(e,t){let r=[],n=[e];return e6(this,SG,SW).call(this,r,e,t,e=>{n[0]=e}),r.length&&await Promise.all(r),n[0]}static from(t,r){if(e.isParamType(t))return t;if("string"==typeof t)try{return e.from(w2(t),r)}catch{xs(!1,"invalid param type","obj",t)}else if(t instanceof w1){let n="",s="",o=null;w6(t,wj(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(s="tuple",o=t.popParams().map(t=>e.from(t)),n=`tuple(${o.map(e=>e.format()).join(",")})`):s=n=Et(t.popType("TYPE"));let a=null,l=null;for(;t.length&&t.peekType("BRACKET");){let r=t.pop();a=new e(Er,"",n,s,null,o,l,a),l=r.value,n+=r.text,s="array",o=null}let u=null;if(w6(t,wW).has("indexed")){if(!r)throw Error("");u=!0}let c=t.peekType("ID")?t.pop().text:"";if(t.length)throw Error("leftover tokens");return new e(Er,c,n,s,u,o,l,a)}let n=t.name;xs(!n||"string"==typeof n&&n.match(wY),"invalid name","obj.name",n);let s=t.indexed;null!=s&&(xs(r,"parameter cannot be indexed","obj.indexed",t.indexed),s=!!s);let o=t.type,a=o.match(Ee);if(a){let r=parseInt(a[2]||"-1"),l=e.from({type:a[1],components:t.components});return new e(Er,n||"",o,"array",s,null,r,l)}if("tuple"===o||o.startsWith("tuple(")||o.startsWith("(")){let r=null!=t.components?t.components.map(t=>e.from(t)):null;return new e(Er,n||"",o,"tuple",s,r,null,null)}return new e(Er,n||"",o=Et(t.type),o,s,null,null,null)}static isParamType(e){return e&&e[En]===Ei}};SG=new WeakSet,SW=function(e,t,r,n){if(this.isArray()){if(!Array.isArray(t))throw Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw Error("array is wrong length");let s=this.arrayChildren,o=t.slice();o.forEach((t,n)=>{e6(s,SG,SW).call(s,e,t,r,e=>{o[n]=e})}),n(o);return}if(this.isTuple()){let s,o=this.components;if(Array.isArray(t))s=t.slice();else{if(null==t||"object"!=typeof t)throw Error("invalid tuple value");s=o.map(e=>{if(!e.name)throw Error("cannot use object value with unnamed components");if(!(e.name in t))throw Error(`missing value for component ${e.name}`);return t[e.name]})}if(s.length!==this.components.length)throw Error("array is wrong length");s.forEach((t,n)=>{var a;e6(a=o[n],SG,SW).call(a,e,t,r,e=>{s[n]=e})}),n(s);return}let s=r(this.type,t);s.then?e.push(async function(){n(await s)}()):n(s)};let Ef=Ed;class Eh{constructor(e,t,r){eY(this,"type"),eY(this,"inputs"),xl(e,Er,"Fragment"),xt(this,{type:t,inputs:r=Object.freeze(r.slice())})}static from(e){if("string"==typeof e){try{Eh.from(JSON.parse(e))}catch{}return Eh.from(w2(e))}if(e instanceof w1)switch(e.peekKeyword(wq)){case"constructor":return Eb.from(e);case"error":return Em.from(e);case"event":return Ey.from(e);case"fallback":case"receive":return Ev.from(e);case"function":return Ex.from(e);case"struct":return Ew.from(e)}else if("object"==typeof e){switch(e.type){case"constructor":return Eb.from(e);case"error":return Em.from(e);case"event":return Ey.from(e);case"fallback":case"receive":return Ev.from(e);case"function":return Ex.from(e);case"struct":return Ew.from(e)}xi(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}xs(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Eb.isFragment(e)}static isError(e){return Em.isFragment(e)}static isEvent(e){return Ey.isFragment(e)}static isFunction(e){return Ex.isFragment(e)}static isStruct(e){return Ew.isFragment(e)}}class Ep extends Eh{constructor(e,t,r,n){super(e,t,n),eY(this,"name"),xs("string"==typeof r&&r.match(wY),"invalid identifier","name",r),n=Object.freeze(n.slice()),xt(this,{name:r})}}function Eg(e,t){return"("+t.map(t=>t.format(e)).join("full"===e?", ":",")+")"}class Em extends Ep{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,En,{value:Es})}get selector(){return wF(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+Eg(e,this.inputs)),t.join(" ")}static from(e){if(Em.isFragment(e))return e;if("string"==typeof e)return Em.from(w2(e));if(e instanceof w1){let t=w8("error",e),r=w5(e);return w7(e),new Em(Er,t,r)}return new Em(Er,e.name,e.inputs?e.inputs.map(Ef.from):[])}static isFragment(e){return e&&e[En]===Es}}class Ey extends Ep{constructor(e,t,r,n){super(e,"event",t,r),eY(this,"anonymous"),Object.defineProperty(this,En,{value:Eo}),xt(this,{anonymous:n})}get topicHash(){return wF(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+Eg(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return new Ey(Er,e,t=(t||[]).map(e=>Ef.from(e)),!1).topicHash}static from(e){if(Ey.isFragment(e))return e;if("string"==typeof e)try{return Ey.from(w2(e))}catch{xs(!1,"invalid event fragment","obj",e)}else if(e instanceof w1){let t=w8("event",e),r=w5(e,!0),n=!!w6(e,wj(["anonymous"])).has("anonymous");return w7(e),new Ey(Er,t,r,n)}return new Ey(Er,e.name,e.inputs?e.inputs.map(e=>Ef.from(e,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[En]===Eo}}class Eb extends Eh{constructor(e,t,r,n,s){super(e,t,r),eY(this,"payable"),eY(this,"gas"),Object.defineProperty(this,En,{value:Ea}),xt(this,{payable:n,gas:s})}format(e){if(xi(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[`constructor${Eg(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(Eb.isFragment(e))return e;if("string"==typeof e)try{return Eb.from(w2(e))}catch{xs(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof w1){w6(e,wj(["constructor"]));let t=w5(e),r=!!w6(e,wz).has("payable"),n=w9(e);return w7(e),new Eb(Er,"constructor",t,r,n)}return new Eb(Er,"constructor",e.inputs?e.inputs.map(Ef.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[En]===Ea}}class Ev extends Eh{constructor(e,t,r){super(e,"fallback",t),eY(this,"payable"),Object.defineProperty(this,En,{value:El}),xt(this,{payable:r})}format(e){let t=0===this.inputs.length?"receive":"fallback";return"json"===e?JSON.stringify({type:t,stateMutability:this.payable?"payable":"nonpayable"}):`${t}()${this.payable?" payable":""}`}static from(e){if(Ev.isFragment(e))return e;if("string"==typeof e)try{return Ev.from(w2(e))}catch{xs(!1,"invalid fallback fragment","obj",e)}else if(e instanceof w1){let t=e.toString();if(xs(e.peekKeyword(wj(["fallback","receive"])),"type must be fallback or receive","obj",t),"receive"===e.popKeyword(wj(["fallback","receive"]))){let t=w5(e);return xs(0===t.length,"receive cannot have arguments","obj.inputs",t),w6(e,wj(["payable"])),w7(e),new Ev(Er,[],!0)}let r=w5(e);r.length?xs(1===r.length&&"bytes"===r[0].type,"invalid fallback inputs","obj.inputs",r.map(e=>e.format("minimal")).join(", ")):r=[Ef.from("bytes")];let n=w4(e);if(xs("nonpayable"===n||"payable"===n,"fallback cannot be constants","obj.stateMutability",n),w6(e,wj(["returns"])).has("returns")){let t=w5(e);xs(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map(e=>e.format("minimal")).join(", "))}return w7(e),new Ev(Er,r,"payable"===n)}return"receive"===e.type?new Ev(Er,[],!0):"fallback"===e.type?new Ev(Er,[Ef.from("bytes")],"payable"===e.stateMutability):void xs(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[En]===El}}class Ex extends Ep{constructor(e,t,r,n,s,o){super(e,"function",t,n),eY(this,"constant"),eY(this,"outputs"),eY(this,"stateMutability"),eY(this,"payable"),eY(this,"gas"),Object.defineProperty(this,En,{value:Eu}),xt(this,{constant:"view"===r||"pure"===r,gas:o,outputs:s=Object.freeze(s.slice()),payable:"payable"===r,stateMutability:r})}get selector(){return wF(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+Eg(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(Eg(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return new Ex(Er,e,"view",t=(t||[]).map(e=>Ef.from(e)),[],null).selector}static from(e){if(Ex.isFragment(e))return e;if("string"==typeof e)try{return Ex.from(w2(e))}catch{xs(!1,"invalid function fragment","obj",e)}else if(e instanceof w1){let t=w8("function",e),r=w5(e),n=w4(e),s=[];w6(e,wj(["returns"])).has("returns")&&(s=w5(e));let o=w9(e);return w7(e),new Ex(Er,t,n,r,s,o)}let t=e.stateMutability;return null==t&&(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new Ex(Er,e.name,t,e.inputs?e.inputs.map(Ef.from):[],e.outputs?e.outputs.map(Ef.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[En]===Eu}}class Ew extends Ep{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,En,{value:Ec})}format(){throw Error("@TODO")}static from(e){if("string"==typeof e)try{return Ew.from(w2(e))}catch{xs(!1,"invalid struct fragment","obj",e)}else if(e instanceof w1){let t=w8("struct",e),r=w5(e);return w7(e),new Ew(Er,t,r)}return new Ew(Er,e.name,e.inputs?e.inputs.map(Ef.from):[])}static isFragment(e){return e&&e[En]===Ec}}let EE=new Map;EE.set(0,"GENERIC_PANIC"),EE.set(1,"ASSERT_FALSE"),EE.set(17,"OVERFLOW"),EE.set(18,"DIVIDE_BY_ZERO"),EE.set(33,"ENUM_RANGE_ERROR"),EE.set(34,"BAD_STORAGE_DATA"),EE.set(49,"STACK_UNDERFLOW"),EE.set(50,"ARRAY_RANGE_ERROR"),EE.set(65,"OUT_OF_MEMORY"),EE.set(81,"UNINITIALIZED_FUNCTION_CALL");let EA=new RegExp(/^bytes([0-9]*)$/),ES=new RegExp(/^(u?int)([0-9]*)$/),Ek=null,EI=1024,E_=class e{constructor(){e2(this,SK)}getDefaultValue(e){return new wU(e.map(e=>e6(this,SK,SJ).call(this,Ef.from(e))),"_").defaultValue()}encode(e,t){xo(t.length,e.length,"types/values length mismatch");let r=new wU(e.map(e=>e6(this,SK,SJ).call(this,Ef.from(e))),"_"),n=new xj;return r.encode(n,t),n.data}decode(e,t,r){return new wU(e.map(e=>e6(this,SK,SJ).call(this,Ef.from(e))),"_").decode(new xz(t,r,EI))}static _setDefaultMaxInflation(e){xs("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),EI=e}static defaultAbiCoder(){return null==Ek&&(Ek=new e),Ek}static getBuiltinCallException(t,r,n){return function(e,t,r,n){let s="missing revert data",o=null,a=null;if(r){s="execution reverted";let e=xc(r);if(r=xp(r),0===e.length)s+=" (no data present; likely require(false) occurred",o="require(false)";else if(e.length%32!=4)s+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===xp(e.slice(0,4)))try{o=n.decode(["string"],e.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[o]},s+=`: ${JSON.stringify(o)}`}catch{s+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===xp(e.slice(0,4)))try{let t=Number(n.decode(["uint256"],e.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[t]},o=`Panic due to ${EE.get(t)||"UNKNOWN"}(${t})`,s+=`: ${o}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}let l={to:t.to?wg(t.to):null,data:t.data||"0x"};return t.from&&(l.from=wg(t.from)),xn(s,"CALL_EXCEPTION",{action:e,data:r,reason:o,transaction:l,invocation:null,revert:a})}(t,r,n,e.defaultAbiCoder())}};SK=new WeakSet,SJ=function(e){if(e.isArray())return new wI(e6(this,SK,SJ).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new wU(e.components.map(e=>e6(this,SK,SJ).call(this,e)),e.name);switch(e.baseType){case"address":return new wE(e.name);case"bool":return new w_(e.name);case"string":return new wM(e.name);case"bytes":return new wC(e.name);case"":return new wR(e.name)}let t=e.type.match(ES);if(t){let r=parseInt(t[2]||"256");return xs(0!==r&&r<=256&&r%8==0,"invalid "+t[1]+" bit length","param",e),new wL(r/8,"int"===t[1],e.name)}if(t=e.type.match(EA)){let r=parseInt(t[1]);return xs(0!==r&&r<=32,"invalid bytes length","param",e),new wO(r,e.name)}xs(!1,"invalid type","type",e.type)};class EP{constructor(e,t,r){eY(this,"fragment"),eY(this,"name"),eY(this,"signature"),eY(this,"topic"),eY(this,"args");let n=e.name,s=e.format();xt(this,{fragment:e,name:n,signature:s,topic:t,args:r})}}class EC{constructor(e,t,r,n){eY(this,"fragment"),eY(this,"name"),eY(this,"args"),eY(this,"signature"),eY(this,"selector"),eY(this,"value");let s=e.name,o=e.format();xt(this,{fragment:e,name:s,args:r,signature:o,selector:t,value:n})}}class EO{constructor(e,t,r){eY(this,"fragment"),eY(this,"name"),eY(this,"args"),eY(this,"signature"),eY(this,"selector");let n=e.name,s=e.format();xt(this,{fragment:e,name:n,args:r,signature:s,selector:t})}}class ET{constructor(e){eY(this,"hash"),eY(this,"_isIndexed"),xt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}let ER={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},EB={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&ER[e.toString()]&&(t=ER[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}},EN=class e{constructor(e){e2(this,S0),e2(this,S2),eY(this,"fragments"),eY(this,"deploy"),eY(this,"fallback"),eY(this,"receive"),e2(this,SZ,void 0),e2(this,SQ,void 0),e2(this,SX,void 0),e2(this,SY,void 0);let t=[];t="string"==typeof e?JSON.parse(e):e,e3(this,SX,new Map),e3(this,SZ,new Map),e3(this,SQ,new Map);let r=[];for(let e of t)try{r.push(Eh.from(e))}catch(t){console.log(`[Warning] Invalid Fragment ${JSON.stringify(e)}:`,t.message)}xt(this,{fragments:Object.freeze(r)});let n=null,s=!1;e3(this,SY,this.getAbiCoder()),this.fragments.forEach((e,t)=>{let r;switch(e.type){case"constructor":if(this.deploy)return void console.log("duplicate definition - constructor");xt(this,{deploy:e});return;case"fallback":0===e.inputs.length?s=!0:(xs(!n||e.payable!==n.payable,"conflicting fallback fragments",`fragments[${t}]`,e),s=(n=e).payable);return;case"function":r=e1(this,SX);break;case"event":r=e1(this,SQ);break;case"error":r=e1(this,SZ);break;default:return}let o=e.format();r.has(o)||r.set(o,e)}),this.deploy||xt(this,{deploy:Eb.from("constructor()")}),xt(this,{fallback:n,receive:s})}format(e){let t=e?"minimal":"full";return this.fragments.map(e=>e.format(t))}formatJson(){return JSON.stringify(this.fragments.map(e=>e.format("json")).map(e=>JSON.parse(e)))}getAbiCoder(){return E_.defaultAbiCoder()}getFunctionName(e){let t=e6(this,S0,S1).call(this,e,null,!1);return xs(t,"no matching function","key",e),t.name}hasFunction(e){return!!e6(this,S0,S1).call(this,e,null,!1)}getFunction(e,t){return e6(this,S0,S1).call(this,e,t||null,!0)}forEachFunction(e){let t=Array.from(e1(this,SX).keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(e1(this,SX).get(n),r)}}getEventName(e){let t=e6(this,S2,S3).call(this,e,null,!1);return xs(t,"no matching event","key",e),t.name}hasEvent(e){return!!e6(this,S2,S3).call(this,e,null,!1)}getEvent(e,t){return e6(this,S2,S3).call(this,e,t||null,!0)}forEachEvent(e){let t=Array.from(e1(this,SQ).keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(e1(this,SQ).get(n),r)}}getError(e,t){if(xf(e)){let t=e.toLowerCase();if(EB[t])return Em.from(EB[t].signature);for(let e of e1(this,SZ).values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let t=[];for(let[r,n]of e1(this,SZ))r.split("(")[0]===e&&t.push(n);if(0===t.length)return"Error"===e?Em.from("error Error(string)"):"Panic"===e?Em.from("error Panic(uint256)"):null;if(t.length>1){let r=t.map(e=>JSON.stringify(e.format())).join(", ");xs(!1,`ambiguous error description (i.e. ${r})`,"name",e)}return t[0]}return"Error(string)"===(e=Em.from(e).format())?Em.from("error Error(string)"):"Panic(uint256)"===e?Em.from("error Panic(uint256)"):e1(this,SZ).get(e)||null}forEachError(e){let t=Array.from(e1(this,SZ).keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(e1(this,SZ).get(n),r)}}_decodeParams(e,t){return e1(this,SY).decode(e,t)}_encodeParams(e,t){return e1(this,SY).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);xs(t,"unknown error","fragment",e),e=t}return xs(xm(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,xm(t,4))}encodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);xs(t,"unknown error","fragment",e),e=t}return xg([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);xs(t,"unknown function","fragment",e),e=t}return xs(xm(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,xm(t,4))}encodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);xs(t,"unknown function","fragment",e),e=t}return xg([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);xs(t,"unknown function","fragment",e),e=t}let r="invalid length for result data",n=xd(t);if(n.length%32==0)try{return e1(this,SY).decode(e.outputs,n)}catch{r="could not decode result data"}xi(!1,r,"BAD_DATA",{value:xp(n),info:{method:e.name,signature:e.format()}})}makeError(e,t){let r=xc(e,"data"),n=E_.getBuiltinCallException("call",t,r);if(n.message.startsWith("execution reverted (unknown custom error)")){let e=xp(r.slice(0,4)),t=this.getError(e);if(t)try{let e=e1(this,SY).decode(t.inputs,r.slice(4));n.revert={name:t.name,signature:t.format(),args:e},n.reason=n.revert.signature,n.message=`execution reverted: ${n.reason}`}catch{n.message="execution reverted (coult not decode custom error)"}}let s=this.parseTransaction(t);return s&&(n.invocation={method:s.name,signature:s.signature,args:s.args}),n}encodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);xs(t,"unknown function","fragment",e),e=t}return xp(e1(this,SY).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){let t=this.getEvent(e);xs(t,"unknown event","eventFragment",e),e=t}xi(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});let r=[];e.anonymous||r.push(e.topicHash);let n=(e,t)=>{var r;return"string"===e.type?wF(t):"bytes"===e.type?wu(xp(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=xI(t):e.type.match(/^bytes/)?t=xy(t,32,!1):"address"===e.type&&e1(this,SY).encode(["address"],[t]),r=xp(t),xy(r,32,!0))};for(t.forEach((t,s)=>{let o=e.inputs[s];if(!o.indexed)return void xs(null==t,"cannot filter non-indexed parameters; must be null","contract."+o.name,t);null==t?r.push(null):"array"===o.baseType||"tuple"===o.baseType?xs(!1,"filtering with tuples or arrays not supported","contract."+o.name,t):Array.isArray(t)?r.push(t.map(e=>n(o,e))):r.push(n(o,t))});r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){if("string"==typeof e){let t=this.getEvent(e);xs(t,"unknown event","eventFragment",e),e=t}let r=[],n=[],s=[];return e.anonymous||r.push(e.topicHash),xs(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((e,o)=>{let a=t[o];if(e.indexed)if("string"===e.type)r.push(wF(a));else if("bytes"===e.type)r.push(wu(a));else{if("tuple"===e.baseType||"array"===e.baseType)throw Error("not implemented");r.push(e1(this,SY).encode([e.type],[a]))}else n.push(e),s.push(a)}),{data:e1(this,SY).encode(n,s),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e){let t=this.getEvent(e);xs(t,"unknown event","eventFragment",e),e=t}if(null!=r&&!e.anonymous){let t=e.topicHash;xs(xf(r[0],32)&&r[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}let n=[],s=[],o=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(Ef.from({type:"bytes32",name:e.name})),o.push(!0)):(n.push(e),o.push(!1)):(s.push(e),o.push(!1))});let a=null!=r?e1(this,SY).decode(n,xg(r)):null,l=e1(this,SY).decode(s,t,!0),u=[],c=[],d=0,f=0;return e.inputs.forEach((e,t)=>{let r=null;if(e.indexed)if(null==a)r=new ET(null);else if(o[t])r=new ET(a[f++]);else try{r=a[f++]}catch(e){r=e}else try{r=l[d++]}catch(e){r=e}u.push(r),c.push(e.name||null)}),xM.fromItems(u,c)}parseTransaction(e){let t=xc(e.data,"tx.data"),r=xw(null!=e.value?e.value:0,"tx.value"),n=this.getFunction(xp(t.slice(0,4)));if(!n)return null;let s=e1(this,SY).decode(n.inputs,t.slice(4));return new EC(n,n.selector,s,r)}parseCallResult(e){throw Error("@TODO")}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new EP(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){let t=xp(e),r=this.getError(xm(t,0,4));if(!r)return null;let n=e1(this,SY).decode(r.inputs,xm(t,4));return new EO(r,r.selector,n)}static from(t){return t instanceof e?t:new e("string"==typeof t?JSON.parse(t):"function"==typeof t.formatJson?t.formatJson():"function"==typeof t.format?t.format("json"):t)}};SZ=new WeakMap,SQ=new WeakMap,SX=new WeakMap,SY=new WeakMap,S0=new WeakSet,S1=function(e,t,r){if(xf(e)){let t=e.toLowerCase();for(let e of e1(this,SX).values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let n=[];for(let[t,r]of e1(this,SX))t.split("(")[0]===e&&n.push(r);if(t){let e=t.length>0?t[t.length-1]:null,r=t.length,s=!0;ww.isTyped(e)&&"overrides"===e.type&&(s=!1,r--);for(let e=n.length-1;e>=0;e--){let t=n[e].inputs.length;t===r||s&&t===r-1||n.splice(e,1)}for(let e=n.length-1;e>=0;e--){let r=n[e].inputs;for(let s=0;s<t.length;s++)if(ww.isTyped(t[s])){if(s>=r.length){if("overrides"===t[s].type)continue;n.splice(e,1);break}if(t[s].type!==r[s].baseType){n.splice(e,1);break}}}}if(1===n.length&&t&&t.length!==n[0].inputs.length){let e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&n.splice(0,1)}if(0===n.length)return null;if(n.length>1&&r){let t=n.map(e=>JSON.stringify(e.format())).join(", ");xs(!1,`ambiguous function description (i.e. matches ${t})`,"key",e)}return n[0]}return e1(this,SX).get(Ex.from(e).format())||null},S2=new WeakSet,S3=function(e,t,r){if(xf(e)){let t=e.toLowerCase();for(let e of e1(this,SQ).values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){let n=[];for(let[t,r]of e1(this,SQ))t.split("(")[0]===e&&n.push(r);if(t){for(let e=n.length-1;e>=0;e--)n[e].inputs.length<t.length&&n.splice(e,1);for(let e=n.length-1;e>=0;e--){let r=n[e].inputs;for(let s=0;s<t.length;s++)if(ww.isTyped(t[s])&&t[s].type!==r[s].baseType){n.splice(e,1);break}}}if(0===n.length)return null;if(n.length>1&&r){let t=n.map(e=>JSON.stringify(e.format())).join(", ");xs(!1,`ambiguous event description (i.e. matches ${t})`,"key",e)}return n[0]}return e1(this,SQ).get(Ey.from(e).format())||null};let ED={AbiDecoderDataSource:Symbol.for("AbiDecoderDataSource"),CommandDecoderDataSource:Symbol.for("CommandDecoderDataSource"),UniswapContextLoader:Symbol.for("UniswapContextLoader")};var EL=Object.defineProperty,EM=Object.getOwnPropertyDescriptor,EU=(e,t)=>(r,n)=>t(r,n,e);let EF=[vI.EXTERNAL_PLUGIN,vI.TOKEN],Ej=class{constructor(e,t,r){eY(this,"_customPluginLoaders"),this._externalPluginDataSource=e,this._tokenDataSource=t,this._uniswapLoader=r,this._customPluginLoaders={Uniswap:this._uniswapLoader}}canHandle(e,t){return"object"==typeof e&&null!==e&&"to"in e&&"data"in e&&"selector"in e&&"chainId"in e&&"number"==typeof e.chainId&&te(e.to)&&"0x"!==e.to&&te(e.data)&&"0x"!==e.data&&te(e.selector)&&"0x"!==e.selector&&EF.every(e=>t.includes(e))}async load(e){let{to:t,data:r,selector:n,chainId:s}=e,o=await this._externalPluginDataSource.getDappInfos({address:t,chainId:s,selector:n});return rz(async({liftEither:t})=>{let n=await t(o);if(!n)return[];let s={type:vI.EXTERNAL_PLUGIN,payload:n.selectorDetails.serializedData.concat(n.selectorDetails.signature)},a=this._customPluginLoaders[n.selectorDetails.plugin];if(void 0!==a&&a.canHandle(e,[vI.TOKEN]))return[s,...await a.load(e)];let l=this.getDecodedCallData(n.abi,n.selectorDetails.method,r);if(l.isLeft())return[{type:vI.ERROR,error:l.extract()},s];let u=l.extract(),c=n.selectorDetails.erc20OfInterest.map(async t=>this.getTokenPayload(e,t,u));return[...(await Promise.all(c)).map(e=>e.caseOf({Left:e=>({type:vI.ERROR,error:e}),Right:e=>({type:vI.TOKEN,payload:e})})),s]}).caseOf({Left:e=>[{type:vI.ERROR,error:e}],Right:e=>e})}getTokenPayload(e,t,r){let n=this.getAddressFromPath(t,r);return rz(({fromPromise:t})=>t(this._tokenDataSource.getTokenInfosPayload({address:n,chainId:e.chainId})))}getDecodedCallData(e,t,r){try{let n=new EN(e);return rU(n.decodeFunctionData(t,r))}catch{return rM(Error("[ContextModule] ExternalPluginContextLoader: Unable to parse abi"))}}getAddressFromPath(e,t){let r=t;for(let t of e.split("."))r="-1"===t?r[r.length-1]:r[t];if(!te(r))throw Error("[ContextModule] ExternalPluginContextLoader: Unable to get address");return r}};Ej=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?EM(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&EL(t,r,o),o})([oZ(),EU(0,oW(vV.ExternalPluginDataSource)),EU(1,oW(vK.TokenDataSource)),EU(2,oW(ED.UniswapContextLoader))],Ej);let Ez=()=>new aP(({bind:e})=>{e(vV.ExternalPluginDataSource).to(xe),e(vV.ExternalPluginContextLoader).to(Ej)});var E$=Object.defineProperty,EH=Object.getOwnPropertyDescriptor;let EV=class{constructor(e){this.config=e}async getSetPluginPayload({chainId:e,address:t,selector:r}){try{let n=await dJ.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v1/ethereum/${e}/contracts/${t}/plugin-selector/${r}`,headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken}});return n.data.payload?rU(n.data.payload):rM(Error("[ContextModule] HttpNftDataSource: unexpected empty response"))}catch{return rM(Error("[ContextModule] HttpNftDataSource: Failed to fetch set plugin payload"))}}async getNftInfosPayload({chainId:e,address:t}){try{let r=await dJ.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v1/ethereum/${e}/contracts/${t}`,headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken}});return r.data.payload?rU(r.data.payload):rM(Error("[ContextModule] HttpNftDataSource: no nft metadata"))}catch{return rM(Error("[ContextModule] HttpNftDataSource: Failed to fetch nft informations"))}}};EV=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?EH(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&E$(t,r,o),o})([oZ(),(K=oW(vx.Config),(e,t)=>K(e,t,0))],EV);var Eq=Object.defineProperty,EG=Object.getOwnPropertyDescriptor;let EW=class{constructor(e){this._dataSource=e}canHandle(e,t){return t===vI.NFT&&"object"==typeof e&&null!==e&&"chainId"in e&&"address"in e}async loadField(e){return(await this._dataSource.getNftInfosPayload({address:e.address,chainId:e.chainId})).caseOf({Left:e=>({type:vI.ERROR,error:e}),Right:e=>({type:vI.NFT,payload:e})})}};EW=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?EG(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Eq(t,r,o),o})([oZ(),(J=oW(vq.NftDataSource),(e,t)=>J(e,t,0))],EW);var EK=Object.defineProperty,EJ=Object.getOwnPropertyDescriptor,EZ=((Z=EZ||{}).Approve="0x095ea7b3",Z.SetApprovalForAll="0xa22cb465",Z.TransferFrom="0x23b872dd",Z.SafeTransferFrom="0x42842e0e",Z.SafeTransferFromWithData="0xb88d4fde",Z),EQ=((Q=EQ||{}).SetApprovalForAll="0xa22cb465",Q.SafeTransferFrom="0xf242432a",Q.SafeBatchTransferFrom="0x2eb2c2d6",Q);let EX=[...Object.values(EZ),...Object.values(EQ)],EY=[vI.PLUGIN,vI.NFT],E0=class{constructor(e){eY(this,"_dataSource"),this._dataSource=e}canHandle(e,t){return"object"==typeof e&&null!==e&&"to"in e&&"selector"in e&&"chainId"in e&&"number"==typeof e.chainId&&te(e.to)&&"0x"!==e.to&&te(e.selector)&&this.isSelectorSupported(e.selector)&&EY.every(e=>t.includes(e))}async load(e){let t=[],{to:r,selector:n,chainId:s}=e,o=(await this._dataSource.getSetPluginPayload({chainId:s,address:r,selector:n})).caseOf({Left:e=>({type:vI.ERROR,error:e}),Right:e=>({type:vI.PLUGIN,payload:e})});if(o.type===vI.ERROR)return[o];t.push(o);let a=(await this._dataSource.getNftInfosPayload({chainId:s,address:r})).caseOf({Left:e=>({type:vI.ERROR,error:e}),Right:e=>({type:vI.NFT,payload:e})});return a.type===vI.ERROR?[a]:(t.push(a),t)}isSelectorSupported(e){return Object.values(EX).includes(e)}};E0=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?EJ(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&EK(t,r,o),o})([oZ(),(X=oW(vq.NftDataSource),(e,t)=>X(e,t,0))],E0);let E1=()=>new aP(({bind:e})=>{e(vq.NftDataSource).to(EV),e(vq.NftContextLoader).to(E0),e(vq.NftContextFieldLoader).to(EW)}),E2=(eY(S8=class{static mapKeyUsageForFirmware(e){return Object.values(vA).includes(e)?this.keyUsageMap.get(e)??-1:-1}},"keyUsageMap",new Map([[vA.GenuineCheck,1],[vA.ExchangePayload,2],[vA.NftMeta,3],[vA.TrustedName,4],[vA.BackupProvider,5],[vA.ProtectOrchestrator,6],[vA.PluginMeta,7],[vA.CoinMeta,8],[vA.SeedIdAuth,9],[vA.TxSimulationSigner,10],[vA.Calldata,11],[vA.Network,12],[vA.LESMultisig,14]])),S8);var E3=Object.defineProperty,E8=Object.getOwnPropertyDescriptor;let E6=class{constructor(e){this.config=e}async fetchCertificate(e){let t={output:"descriptor",target_device:e.targetDevice,latest:!0,public_key_id:e.keyId,public_key_usage:e.keyUsage};try{let r=await dJ.request({method:"GET",url:`${this.config.cal.url}/certificates`,params:t,headers:{[vS]:`context-module/${vO.version}`}});if(!(200==r.status&&void 0!==r.data&&r.data.length>0&&this.isValidPkiCertificateResponse(r.data[0],this.config.cal.mode)))return rM(Error("[ContextModule] HttpPkiCertificateDataSource: failed to fetch PKI for given descriptor"));{let t=tt(vC.appendSignatureToPayload(r.data[0].descriptor.data,r.data[0].descriptor.signatures[this.config.cal.mode],"15"));if(!t)return rM(Error("[ContextModule] HttpPkiCertificateDataSource: Cannot generate payload from fetched PKI Certificate"));let n={payload:t,keyUsageNumber:E2.mapKeyUsageForFirmware(e.keyUsage)};return rU(n)}}catch{return rM(Error("[ContextModule] HttpPkiCertificateDataSource: failed to fetch PKI for given descriptor"))}}isValidPkiCertificateResponse(e,t){return"object"==typeof e&&null!==e&&"descriptor"in e&&"object"==typeof e.descriptor&&null!==e.descriptor&&"data"in e.descriptor&&"string"==typeof e.descriptor.data&&"signatures"in e.descriptor&&"object"==typeof e.descriptor.signatures&&null!==e.descriptor.signatures&&t in e.descriptor.signatures&&"string"==typeof e.descriptor.signatures[t]}};E6=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?E8(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&E3(t,r,o),o})([oZ(),(Y=oW(vx.Config),(e,t)=>Y(e,t,0))],E6);var E4=Object.defineProperty,E5=Object.getOwnPropertyDescriptor;let E9=class{constructor(e){eY(this,"_dataSource"),this._dataSource=e}async loadCertificate(e){return(await this._dataSource.fetchCertificate(e)).orDefault(void 0)}};E9=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?E5(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&E4(t,r,o),o})([oZ(),(ee=oW(vw.PkiCertificateDataSource),(e,t)=>ee(e,t,0))],E9);let E7=()=>new aP(({bind:e})=>{e(vw.PkiCertificateDataSource).to(E6),e(vw.PkiCertificateLoader).to(E9)});var Ae=Object.defineProperty,At=Object.getOwnPropertyDescriptor;let Ar=class{constructor(e){this.config=e}async getProxyImplementationAddress({proxyAddress:e,chainId:t,challenge:r,calldata:n}){let s;try{s=(await dJ.request({method:"POST",url:`${this.config.metadataServiceDomain.url}/v2/ethereum/${t}/contract/proxy/delegate`,headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken},data:{proxy:e,data:n,challenge:r}})).data}catch{return rM(Error("[ContextModule] HttpProxyDataSource: Failed to fetch delegate proxy"))}return s?this.isProxyDelegateCallDto(s)?s.addresses[0]?rU({implementationAddress:s.addresses[0],signedDescriptor:s.signedDescriptor,keyId:vE.DomainMetadataKey,keyUsage:vA.TrustedName}):rM(Error(`[ContextModule] HttpProxyDataSource: No implementation address found for proxy ${e} on chain ${t}`)):rM(Error(`[ContextModule] HttpProxyDataSource: Invalid proxy delegate call response format for proxy ${e} on chain ${t}`)):rM(Error(`[ContextModule] HttpProxyDataSource: No data received for proxy ${e} on chain ${t}`))}isProxyDelegateCallDto(e){return"object"==typeof e&&null!==e&&"addresses"in e&&"signedDescriptor"in e&&Array.isArray(e.addresses)&&e.addresses.every(e=>"string"==typeof e)&&"string"==typeof e.signedDescriptor}};Ar=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?At(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Ae(t,r,o),o})([oZ(),(et=oW(vx.Config),(e,t)=>et(e,t,0))],Ar);var An=Object.defineProperty,Ai=Object.getOwnPropertyDescriptor;let As=class{constructor(e){this.config=e}async getProxyImplementationAddress({proxyAddress:e,chainId:t,challenge:r}){let n;try{n=(await dJ.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v3/ethereum/${t}/contract/proxy/${e}`,headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken},params:{challenge:r,resolver:"SAFE_GATEWAY"}})).data}catch{return rM(Error("[ContextModule] HttpSafeProxyDataSource: Failed to fetch safe proxy implementation"))}return n?this.isSafeProxyImplementationAddressDto(n)?rU({implementationAddress:n.implementationAddress,signedDescriptor:n.signedDescriptor,keyId:n.keyId,keyUsage:n.keyUsage}):rM(Error(`[ContextModule] HttpSafeProxyDataSource: Invalid safe proxy response format for proxy ${e} on chain ${t}`)):rM(Error(`[ContextModule] HttpSafeProxyDataSource: No data received for proxy ${e} on chain ${t}`))}isSafeProxyImplementationAddressDto(e){return"object"==typeof e&&null!==e&&"proxyAddress"in e&&"implementationAddress"in e&&"standard"in e&&"signedDescriptor"in e&&"providedBy"in e&&"keyId"in e&&"keyUsage"in e&&"string"==typeof e.proxyAddress&&"string"==typeof e.implementationAddress&&"string"==typeof e.standard&&"string"==typeof e.signedDescriptor&&"string"==typeof e.providedBy&&"string"==typeof e.keyId&&"string"==typeof e.keyUsage}};As=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Ai(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&An(t,r,o),o})([oZ(),(er=oW(vx.Config),(e,t)=>er(e,t,0))],As);var Ao=Object.defineProperty,Aa=Object.getOwnPropertyDescriptor,Al=(e,t)=>(r,n)=>t(r,n,e);let Au=class{constructor(e,t){this._proxyDataSource=e,this._certificateLoader=t}canHandle(e,t){return t===vI.PROXY_INFO&&"object"==typeof e&&null!==e&&"chainId"in e&&"proxyAddress"in e&&"calldata"in e&&"challenge"in e&&"deviceModelId"in e}async loadField(e){return(await this._proxyDataSource.getProxyImplementationAddress({calldata:e.calldata,proxyAddress:e.proxyAddress,chainId:e.chainId,challenge:e.challenge})).caseOf({Left:e=>Promise.resolve({type:vI.ERROR,error:e}),Right:async({signedDescriptor:t,keyId:r,keyUsage:n})=>{let s=await this._certificateLoader.loadCertificate({keyId:r,keyUsage:n,targetDevice:e.deviceModelId});return{type:vI.PROXY_INFO,payload:t,certificate:s}}})}};Au=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Aa(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Ao(t,r,o),o})([oZ(),Al(0,oW(vL.ProxyDataSource)),Al(1,oW(vw.PkiCertificateLoader))],Au);let Ac=e=>new aP(({bind:t})=>{var r;(null==(r=null==e?void 0:e.datasource)?void 0:r.proxy)==="safe"?t(vL.ProxyDataSource).to(As):t(vL.ProxyDataSource).to(Ar),t(vL.ProxyContextFieldLoader).to(Au)});var Ad=Object.defineProperty,Af=Object.getOwnPropertyDescriptor;let Ah=class{constructor(e){this.config=e}async getDescriptors({safeContractAddress:e,chainId:t,challenge:r}){try{let n=await dJ.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/ethereum/${t}/safe/account/${e}`,params:{challenge:r},headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken}});return n.data?this.isSafeAccountDto(n.data)?rU({account:{signedDescriptor:n.data.accountDescriptor.signedDescriptor,keyId:n.data.accountDescriptor.keyId,keyUsage:n.data.accountDescriptor.keyUsage},signers:{signedDescriptor:n.data.signersDescriptor.signedDescriptor,keyId:n.data.signersDescriptor.keyId,keyUsage:n.data.signersDescriptor.keyUsage}}):rM(Error("[ContextModule] HttpSafeAccountDataSource: invalid safe account response format")):rM(Error("[ContextModule] HttpSafeAccountDataSource: unexpected empty response"))}catch{return rM(Error("[ContextModule] HttpSafeAccountDataSource: Failed to fetch safe account descriptors"))}}isSafeAccountDto(e){return"object"==typeof e&&null!==e&&"accountDescriptor"in e&&"signersDescriptor"in e&&"object"==typeof e.accountDescriptor&&"object"==typeof e.signersDescriptor&&this.isSafeDescriptorDto(e.accountDescriptor)&&this.isSafeDescriptorDto(e.signersDescriptor)}isSafeDescriptorDto(e){return"object"==typeof e&&null!==e&&"signedDescriptor"in e&&"keyId"in e&&"keyUsage"in e&&"string"==typeof e.signedDescriptor&&"string"==typeof e.keyId&&"string"==typeof e.keyUsage}};Ah=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Af(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Ad(t,r,o),o})([(en=oW(vx.Config),(e,t)=>en(e,t,0))],Ah);var Ap=Object.defineProperty,Ag=Object.getOwnPropertyDescriptor,Am=(e,t)=>(r,n)=>t(r,n,e);let Ay=[vI.SAFE,vI.SIGNER],Ab=class{constructor(e,t){this._dataSource=e,this._certificateLoader=t}canHandle(e,t){return t.every(e=>Ay.includes(e))&&"object"==typeof e&&null!==e&&"safeContractAddress"in e&&te(e.safeContractAddress)&&"0x"!==e.safeContractAddress&&"chainId"in e&&"number"==typeof e.chainId&&"deviceModelId"in e&&void 0!==e.deviceModelId&&"challenge"in e&&"string"==typeof e.challenge&&e.challenge.length>0}async load({safeContractAddress:e,chainId:t,deviceModelId:r,challenge:n}){return(await this._dataSource.getDescriptors({safeContractAddress:e,chainId:t,challenge:n})).caseOf({Left:e=>Promise.resolve([{type:vI.ERROR,error:e}]),Right:async({account:e,signers:t})=>[{type:vI.SAFE,payload:e.signedDescriptor,certificate:await this._certificateLoader.loadCertificate({keyId:e.keyId,keyUsage:e.keyUsage,targetDevice:r})},{type:vI.SIGNER,payload:t.signedDescriptor,certificate:await this._certificateLoader.loadCertificate({keyId:t.keyId,keyUsage:t.keyUsage,targetDevice:r})}]})}};Ab=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Ag(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Ap(t,r,o),o})([oZ(),Am(0,oW(vG.SafeAddressDataSource)),Am(1,oW(vw.PkiCertificateLoader))],Ab);let Av=()=>new aP(({bind:e})=>{e(vG.SafeAddressDataSource).to(Ah),e(vG.SafeAddressLoader).to(Ab)});var Ax=Object.defineProperty,Aw=Object.getOwnPropertyDescriptor;let AE=class{constructor(e){if(this.config=e,!this.config.originToken)throw Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: origin token is required")}isSolanaSPLOwnerInfo(e){return"object"==typeof e&&null!==e&&"string"==typeof e.tokenAccount&&"string"==typeof e.owner&&"string"==typeof e.contract&&"string"==typeof e.signedDescriptor}async fetchAddressMetadata(e,t){return await dJ.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/solana/owner/${e}?challenge=${t}`,headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken}}).then(e=>this.isSolanaSPLOwnerInfo(e.data)?rU(e.data):rM(Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: invalid fetchAddressMetadata response shape"))).catch(()=>rM(Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: Failed to fetch address metadata")))}async computeAddressMetadata(e,t,r){return await dJ.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/solana/computed-token-account/${e}/${t}?challenge=${r}`,headers:{[vS]:`context-module/${vO.version}`,"X-Ledger-Client-Origin":this.config.originToken}}).then(e=>this.isSolanaSPLOwnerInfo(e.data)?rU(e.data):rM(Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: invalid computeAddressMetadata response shape"))).catch(()=>rM(Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: Failed to compute address metadata")))}async getOwnerInfo(e){let t,{tokenAddress:r,challenge:n,createATA:s}=e;if(!n)return rM(Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: challenge is required"));if(r)t=await this.fetchAddressMetadata(r,n);else{if(null==s||!s.address||null==s||!s.mintAddress)return rM(Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: either tokenAddress or valid createATA must be provided"));t=await this.computeAddressMetadata(s.address,s.mintAddress,n)}return t.chain(e=>{let t=tt(e.signedDescriptor);return t?rU({tlvDescriptor:t}):rM(Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: invalid base64 tlvDescriptor received"))})}};AE=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Aw(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Ax(t,r,o),o})([oZ(),(ei=oW(vx.Config),(e,t)=>ei(e,t,0))],AE);var AA=((es=AA||{}).SOLANA_TOKEN="solanaToken",es.SOLANA_LIFI="solanaLifi",es.ERROR="error",es);let AS={SolanaTokenDataSource:Symbol.for("SolanaTokenDataSource"),SolanaTokenContextLoader:Symbol.for("SolanaTokenContextLoader")};var Ak=Object.defineProperty,AI=Object.getOwnPropertyDescriptor,A_=(e,t)=>(r,n)=>t(r,n,e);let AP=class{constructor(e,t,r){this._dataSource=e,this._certificateLoader=t,this._solanaTokenLoader=r}async load(e){let{deviceModelId:t}=e,r=await this._certificateLoader.loadCertificate({keyId:"domain_metadata_key",keyUsage:vA.TrustedName,targetDevice:t});if(!r)return rM(Error("[ContextModule] DefaultSolanaContextLoader: trustedNamePKICertificate is missing"));let n=[{loader:this._solanaTokenLoader,expectedType:AA.SOLANA_TOKEN}].map(({loader:t,expectedType:r})=>{if(t.canHandle(e,r))return t.loadField(e)}).filter(e=>void 0!==e),s=(await Promise.allSettled(n)).map(e=>"fulfilled"===e.status?e.value:void 0).filter(e=>void 0!==e).sort((e,t)=>(e.type!==AA.SOLANA_TOKEN)-(t.type!==AA.SOLANA_TOKEN));return(await this._dataSource.getOwnerInfo(e)).map(({tlvDescriptor:e})=>({trustedNamePKICertificate:r,tlvDescriptor:e,loadersResults:s}))}};AP=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?AI(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Ak(t,r,o),o})([oZ(),A_(0,oW(vW.SolanaDataSource)),A_(1,oW(vw.PkiCertificateLoader)),A_(2,oW(AS.SolanaTokenContextLoader))],AP);let AC=()=>new aP(({bind:e})=>{e(vW.SolanaDataSource).to(AE),e(vW.SolanaContextLoader).to(AP)});var AO=Object.defineProperty,AT=Object.getOwnPropertyDescriptor;let AR=class{constructor(e){this.config=e}async getTransactionDescriptorsPayload({templateId:e}){try{let{data:t}=await dJ.request({method:"GET",url:`${this.config.cal.url}/swap_templates`,params:{template_id:e,output:"id,chain_id,instructions,descriptors",ref:"ref=commit:866b6e7633a7a806fab7f9941bcc3df7ee640784"},headers:{[vS]:`context-module/${vO.version}`}});return t&&0!==t.length&&t[0]?rU(t[0]):rM(Error(`[ContextModule] HttpSolanaLifiDataSource: no transaction descriptors for id ${e}`))}catch{return rM(Error("[ContextModule] HttpSolanaLifiDataSource: Failed to fetch transaction descriptors"))}}};AR=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?AT(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&AO(t,r,o),o})([oZ(),(eo=oW(vx.Config),(e,t)=>eo(e,t,0))],AR);let AB={SolanaLifiDataSource:Symbol.for("SolanaLifiDataSource"),SolanaLifiContextLoader:Symbol.for("SolanaLifiContextLoader")};var AN=Object.defineProperty,AD=Object.getOwnPropertyDescriptor;let AL=class{constructor(e){this.dataSource=e}canHandle(e,t){if(t!==AA.SOLANA_LIFI)return!1;if("object"==typeof e&&null!==e&&"templateId"in e){let t=e.templateId;return"string"==typeof t&&t.length>0}return!1}async loadField(e){let{templateId:t}=e;return(await this.dataSource.getTransactionDescriptorsPayload({templateId:t})).caseOf({Left:e=>({type:AA.ERROR,error:e}),Right:e=>({type:AA.SOLANA_LIFI,payload:this.pluckTransactionData(e)})})}pluckTransactionData(e){return{...e.descriptors}}};AL=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?AD(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&AN(t,r,o),o})([oZ(),(el=oW(AB.SolanaLifiDataSource),(e,t)=>el(e,t,0))],AL);let AM=()=>new aP(({bind:e})=>{e(AB.SolanaLifiDataSource).to(AR),e(AB.SolanaLifiContextLoader).to(AL)});var AU=Object.defineProperty,AF=Object.getOwnPropertyDescriptor;let Aj=class{constructor(e){this.config=e}async getTokenInfosPayload({tokenInternalId:e}){try{let{data:t}=await dJ.request({method:"GET",url:`${this.config.cal.url}/tokens`,params:{id:e,output:"id,name,network,network_family,network_type,exchange_app_config_serialized,live_signature,ticker,decimals,blockchain_name,chain_id,contract_address,descriptor,descriptor_exchange_app,units,symbol",ref:`branch:${this.config.cal.branch}`},headers:{[vS]:`context-module/${vO.version}`}});return t&&0!==t.length&&t[0]?rU(t[0]):rM(Error(`[ContextModule] HttpSolanaTokenDataSource: no token metadata for id ${e}`))}catch{return rM(Error("[ContextModule] HttpSolanaTokenDataSource: Failed to fetch token informations"))}}};Aj=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?AF(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&AU(t,r,o),o})([oZ(),(eu=oW(vx.Config),(e,t)=>eu(e,t,0))],Aj);var Az=Object.defineProperty,A$=Object.getOwnPropertyDescriptor,AH=(e,t)=>(r,n)=>t(r,n,e);let AV=class{constructor(e,t,r){this.dataSource=e,this.config=t,this._certificateLoader=r}canHandle(e,t){if(t!==AA.SOLANA_TOKEN||"object"!=typeof e||null===e||!("tokenInternalId"in e))return!1;let r=e.tokenInternalId;return"string"==typeof r&&r.length>0}async loadField(e){let{tokenInternalId:t,deviceModelId:r}=e,n=await this.dataSource.getTokenInfosPayload({tokenInternalId:t}),s=await this._certificateLoader.loadCertificate({keyId:"token_metadata_key",keyUsage:vA.CoinMeta,targetDevice:r});return n.caseOf({Left:e=>({type:AA.ERROR,error:e}),Right:e=>({type:AA.SOLANA_TOKEN,payload:this.pluckTokenData(e),certificate:s})})}pluckTokenData(e){let t=this.config.cal.mode||"prod";return{solanaTokenDescriptor:{data:e.descriptor.data,signature:e.descriptor.signatures[t]}}}};AV=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?A$(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Az(t,r,o),o})([oZ(),AH(0,oW(AS.SolanaTokenDataSource)),AH(1,oW(vx.Config)),AH(2,oW(vw.PkiCertificateLoader))],AV);let Aq=()=>new aP(({bind:e})=>{e(AS.SolanaTokenDataSource).to(Aj),e(AS.SolanaTokenContextLoader).to(AV)});var AG=Object.defineProperty,AW=Object.getOwnPropertyDescriptor;let AK=class{constructor(e){this.config=e}async getTokenInfosPayload({chainId:e,address:t}){var r;try{let n=null==(r=(await dJ.request({method:"GET",url:`${this.config.cal.url}/tokens`,params:{contract_address:t,chain_id:e,output:"descriptor",ref:`branch:${this.config.cal.branch}`},headers:{[vS]:`context-module/${vO.version}`}})).data)?void 0:r[0];if(!n||!n.descriptor||!n.descriptor.data||!n.descriptor.signatures||"string"!=typeof n.descriptor.signatures[this.config.cal.mode])return rM(Error(`[ContextModule] HttpTokenDataSource: no token metadata for address ${t} on chain ${e}`));let s=(n.descriptor.data.length/2-20-4-4).toString(16).padStart(2,"0");return rU([s,n.descriptor.data,n.descriptor.signatures[this.config.cal.mode]].join(""))}catch{return rM(Error("[ContextModule] HttpTokenDataSource: Failed to fetch token informations"))}}};AK=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?AW(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&AG(t,r,o),o})([oZ(),(ec=oW(vx.Config),(e,t)=>ec(e,t,0))],AK);var AJ=Object.defineProperty,AZ=Object.getOwnPropertyDescriptor;let AQ=class{constructor(e){this._dataSource=e}canHandle(e,t){return t===vI.TOKEN&&"object"==typeof e&&null!==e&&"chainId"in e&&"address"in e}async loadField(e){return(await this._dataSource.getTokenInfosPayload({address:e.address,chainId:e.chainId})).caseOf({Left:e=>({type:vI.ERROR,error:e}),Right:e=>({type:vI.TOKEN,payload:e})})}};AQ=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?AZ(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&AJ(t,r,o),o})([oZ(),(ef=oW(vK.TokenDataSource),(e,t)=>ef(e,t,0))],AQ);var AX=Object.defineProperty,AY=Object.getOwnPropertyDescriptor,A0=((eh=A0||{}).Approve="0x095ea7b3",eh.Transfer="0xa9059cbb",eh);let A1=Object.values(A0),A2=[vI.TOKEN],A3=class{constructor(e){eY(this,"_dataSource"),this._dataSource=e}canHandle(e,t){return"object"==typeof e&&null!==e&&"to"in e&&"selector"in e&&"chainId"in e&&"number"==typeof e.chainId&&te(e.to)&&"0x"!==e.to&&te(e.selector)&&this.isSelectorSupported(e.selector)&&A2.every(e=>t.includes(e))}async load(e){let{to:t,chainId:r}=e;return[(await this._dataSource.getTokenInfosPayload({address:t,chainId:r})).caseOf({Left:e=>({type:vI.ERROR,error:e}),Right:e=>({type:vI.TOKEN,payload:e})})]}isSelectorSupported(e){return Object.values(A1).includes(e)}};A3=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?AY(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&AX(t,r,o),o})([oZ(),(ep=oW(vK.TokenDataSource),(e,t)=>ep(e,t,0))],A3);let A8=()=>new aP(({bind:e})=>{e(vK.TokenDataSource).to(AK),e(vK.TokenContextLoader).to(A3),e(vK.TokenContextFieldLoader).to(AQ)});var A6=Object.defineProperty,A4=Object.getOwnPropertyDescriptor;let A5=class{constructor(e){this.config=e}async getTransactionCheck({chainId:e,rawTx:t,from:r}){let n;try{n=(await dJ.request({method:"POST",url:`${this.config.web3checks.url}/ethereum/scan/tx`,data:{tx:{from:r,raw:t},chain:e},headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken}})).data}catch{return rM(Error("[ContextModule] HttpTransactionCheckDataSource: Failed to fetch web3 checks information"))}return this._isTransactionCheckDto(n)?rU({publicKeyId:n.public_key_id,descriptor:n.descriptor}):rM(Error("[ContextModule] HttpTransactionCheckDataSource: Cannot exploit transaction check data received"))}_isTransactionCheckDto(e){return null!=e&&"object"==typeof e&&"public_key_id"in e&&null!=e.public_key_id&&"string"==typeof e.public_key_id&&"descriptor"in e&&null!=e.descriptor&&"string"==typeof e.descriptor}};A5=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?A4(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&A6(t,r,o),o})([oZ(),(eg=oW(vx.Config),(e,t)=>eg(e,t,0))],A5);var A9=Object.defineProperty,A7=Object.getOwnPropertyDescriptor;let Se=class{constructor(e){this.config=e}async getTypedDataCheck({from:e,data:t}){let r;try{r=(await dJ.request({method:"POST",url:`${this.config.web3checks.url}/ethereum/scan/eip-712`,data:{msg:{from:e,data:t}},headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken}})).data}catch{return rM(Error("[ContextModule] HttpTypedDataCheckDataSource: Failed to fetch typed data check information"))}return this._isTypedDataCheckDto(r)?rU({publicKeyId:r.public_key_id,descriptor:r.descriptor}):rM(Error("[ContextModule] HttpTypedDataCheckDataSource: Cannot exploit typed data check data received"))}_isTypedDataCheckDto(e){return null!=e&&"object"==typeof e&&"public_key_id"in e&&null!=e.public_key_id&&"string"==typeof e.public_key_id&&"descriptor"in e&&null!=e.descriptor&&"string"==typeof e.descriptor}};Se=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?A7(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&A9(t,r,o),o})([oZ(),(em=oW(vx.Config),(e,t)=>em(e,t,0))],Se);var St=Object.defineProperty,Sr=Object.getOwnPropertyDescriptor,Sn=(e,t)=>(r,n)=>t(r,n,e);let Si=[vI.TRANSACTION_CHECK],Ss=class{constructor(e,t){this.transactionCheckDataSource=e,this.certificateLoader=t}canHandle(e,t){return"object"==typeof e&&null!==e&&"from"in e&&void 0!==e.from&&te(e.from)&&"chainId"in e&&void 0!==e.chainId&&"number"==typeof e.chainId&&"transaction"in e&&void 0!==e.transaction&&"deviceModelId"in e&&void 0!==e.deviceModelId&&e.deviceModelId!==rm.NANO_S&&"number"==typeof e.chainId&&te(e.from)&&"0x"!==e.from&&Si.every(e=>t.includes(e))}async load(e){let{from:t,chainId:r,transaction:n}=e,s=tr(n);return t&&s?[await (await this.transactionCheckDataSource.getTransactionCheck({chainId:r,rawTx:s,from:t})).caseOf({Left:e=>Promise.resolve({type:vI.ERROR,error:e}),Right:async t=>{let r=await this.certificateLoader.loadCertificate({keyId:t.publicKeyId,keyUsage:vA.TxSimulationSigner,targetDevice:e.deviceModelId});return{type:vI.TRANSACTION_CHECK,payload:t.descriptor,certificate:r}}})]:[]}};Ss=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Sr(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&St(t,r,o),o})([oZ(),Sn(0,oW(vJ.TransactionCheckDataSource)),Sn(1,oW(vw.PkiCertificateLoader))],Ss);var So=Object.defineProperty,Sa=Object.getOwnPropertyDescriptor,Sl=(e,t)=>(r,n)=>t(r,n,e);let Su=[vI.TRANSACTION_CHECK],Sc=class{constructor(e,t){this.typedDataCheckDataSource=e,this.certificateLoader=t}canHandle(e,t){return"object"==typeof e&&null!==e&&"from"in e&&void 0!==e.from&&te(e.from)&&"0x"!==e.from&&"data"in e&&"object"==typeof e.data&&"deviceModelId"in e&&void 0!==e.deviceModelId&&e.deviceModelId!==rm.NANO_S&&Su.every(e=>t.includes(e))}async load(e){let{from:t,data:r}=e;return t&&r?[await (await this.typedDataCheckDataSource.getTypedDataCheck({data:r,from:t})).caseOf({Left:e=>Promise.resolve({type:vI.ERROR,error:e}),Right:async t=>{let r=await this.certificateLoader.loadCertificate({keyId:t.publicKeyId,keyUsage:vA.TxSimulationSigner,targetDevice:e.deviceModelId});return{type:vI.TRANSACTION_CHECK,payload:t.descriptor,certificate:r}}})]:[]}};Sc=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Sa(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&So(t,r,o),o})([oZ(),Sl(0,oW(vJ.TypedDataCheckDataSource)),Sl(1,oW(vw.PkiCertificateLoader))],Sc);let Sd=()=>new aP(({bind:e})=>{e(vJ.TransactionCheckDataSource).to(A5),e(vJ.TransactionCheckContextLoader).to(Ss),e(vJ.TypedDataCheckDataSource).to(Se),e(vJ.TypedDataCheckContextLoader).to(Sc)});var Sf=Object.defineProperty,Sh=Object.getOwnPropertyDescriptor;let Sp=class{constructor(e){this.config=e}async getDomainNamePayload({chainId:e,domain:t,challenge:r}){let n;try{n=(await dJ.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/names/ethereum/${e}/forward/${t}?types=eoa&sources=ens&challenge=${r}`,headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken}})).data}catch{return rM(Error("[ContextModule] HttpTrustedNameDataSource: Failed to fetch domain name"))}return n?this.isTrustedNameDto(n)?rU({data:n.signedDescriptor.data,keyId:n.keyId,keyUsage:n.keyUsage}):rM(Error(`[ContextModule] HttpTrustedNameDataSource: Invalid trusted name response format for domain ${t} on chain ${e}`)):rM(Error(`[ContextModule] HttpTrustedNameDataSource: No data received for domain ${t} on chain ${e}`))}async getTrustedNamePayload({chainId:e,address:t,challenge:r,sources:n,types:s}){let o;try{n=n.filter(e=>"ens"===e||"crypto_asset_list"===e),o=(await dJ.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/names/ethereum/${e}/reverse/${t}?types=${s.join(",")}&sources=${n.join(",")}&challenge=${r}`,headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken}})).data}catch{return rM(Error("[ContextModule] HttpTrustedNameDataSource: Failed to fetch trusted name"))}if(!o)return rM(Error(`[ContextModule] HttpTrustedNameDataSource: No data received for address ${t} on chain ${e}`));if(!this.isTrustedNameDto(o))return rM(Error(`[ContextModule] HttpTrustedNameDataSource: Invalid trusted name response format for address ${t} on chain ${e}`));if("string"!=typeof o.signedDescriptor.signatures[this.config.cal.mode])return rU({data:o.signedDescriptor.data,keyId:o.keyId,keyUsage:o.keyUsage});let a=o.signedDescriptor.signatures[this.config.cal.mode];return rU({data:this.formatTrustedName(o.signedDescriptor.data,a),keyId:o.keyId,keyUsage:o.keyUsage})}formatTrustedName(e,t){t.length%2!=0&&(t="0"+t);let r=(t.length/2).toString(16);return`${e}15${r}${t}`}isTrustedNameDto(e){return"object"==typeof e&&null!==e&&"signedDescriptor"in e&&"keyId"in e&&"keyUsage"in e&&"string"==typeof e.keyId&&"string"==typeof e.keyUsage&&"object"==typeof e.signedDescriptor&&null!==e.signedDescriptor&&"data"in e.signedDescriptor&&"signatures"in e.signedDescriptor&&"string"==typeof e.signedDescriptor.data&&"object"==typeof e.signedDescriptor.signatures}};Sp=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Sh(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Sf(t,r,o),o})([oZ(),(ey=oW(vx.Config),(e,t)=>ey(e,t,0))],Sp);var Sg=Object.defineProperty,Sm=Object.getOwnPropertyDescriptor,Sy=(e,t)=>(r,n)=>t(r,n,e);let Sb=class{constructor(e,t){this._dataSource=e,this._certificateLoader=t}canHandle(e,t){return t===vI.TRUSTED_NAME&&"object"==typeof e&&null!==e&&"chainId"in e&&"address"in e&&"challenge"in e&&"types"in e&&"sources"in e&&"deviceModelId"in e&&void 0!==e.deviceModelId}async loadField(e){return await (await this._dataSource.getTrustedNamePayload({chainId:e.chainId,address:e.address,challenge:e.challenge,types:e.types,sources:e.sources})).caseOf({Left:e=>Promise.resolve({type:vI.ERROR,error:e}),Right:async({data:t,keyId:r,keyUsage:n})=>{let s=await this._certificateLoader.loadCertificate({keyId:r,keyUsage:n,targetDevice:e.deviceModelId});return{type:vI.TRUSTED_NAME,payload:t,certificate:s}}})}};Sb=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Sm(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Sg(t,r,o),o})([oZ(),Sy(0,oW(vH.TrustedNameDataSource)),Sy(1,oW(vw.PkiCertificateLoader))],Sb);var Sv=Object.defineProperty,Sx=Object.getOwnPropertyDescriptor,Sw=(e,t)=>(r,n)=>t(r,n,e);let SE=[vI.TRUSTED_NAME],SA=class{constructor(e,t){eY(this,"_dataSource"),this.certificateLoader=t,this._dataSource=e}canHandle(e,t){return"object"==typeof e&&null!==e&&"chainId"in e&&"domain"in e&&"challenge"in e&&"deviceModelId"in e&&void 0!==e.deviceModelId&&"number"==typeof e.chainId&&"string"==typeof e.domain&&e.domain.length>0&&"string"==typeof e.challenge&&e.challenge.length>0&&SE.every(e=>t.includes(e))}async load(e){let{chainId:t,domain:r,challenge:n,deviceModelId:s}=e;return this.isDomainValid(r)?[await (await this._dataSource.getDomainNamePayload({chainId:t,domain:r,challenge:n})).caseOf({Left:e=>Promise.resolve({type:vI.ERROR,error:e}),Right:async({data:e,keyId:t,keyUsage:r})=>{let n=await this.certificateLoader.loadCertificate({keyId:t,keyUsage:r,targetDevice:s});return{type:vI.TRUSTED_NAME,payload:e,certificate:n}}})]:[{type:vI.ERROR,error:Error("[ContextModule] TrustedNameLoader: invalid domain")}]}isDomainValid(e){let t=e.length>0&&30>Number(e.length),r=RegExp("^[a-zA-Z0-9\\-\\_\\.]+$").test(e);return t&&r}};SA=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Sx(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Sv(t,r,o),o})([oZ(),Sw(0,oW(vH.TrustedNameDataSource)),Sw(1,oW(vw.PkiCertificateLoader))],SA);let SS=()=>new aP(({bind:e})=>{e(vH.TrustedNameDataSource).to(Sp),e(vH.TrustedNameContextLoader).to(SA),e(vH.TrustedNameContextFieldLoader).to(Sb)});var Sk={exports:{}},SI,S_,SP,SC,SO,ST,SR,SB,SN,SD,SL,SM,SU,SF,Sj,Sz,S$,SH,SV,Sq,SG,SW,SK,SJ,SZ,SQ,SX,SY,S0,S1,S2,S3,S8,S6,S4={exports:{}};function S5(){var e;return S6||(S6=1,S4.exports=e=e||function(e,t){if("u">typeof window&&window.crypto&&(r=window.crypto),"u">typeof self&&self.crypto&&(r=self.crypto),"u">typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"u">typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"u">typeof e4&&e4.crypto&&(r=e4.crypto),!r)try{r=fl}catch{}var r,n=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch{}}throw Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),o={},a=o.lib={},l=a.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=l.extend({init:function(e,r){e=this.words=e||[],r!=t?this.sigBytes=r:this.sigBytes=4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,s=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<s;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}else for(var l=0;l<s;l+=4)t[n+l>>>2]=r[l>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=0xffffffff<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(n());return new u.init(t,e)}}),c=o.enc={},d=c.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],s=0;s<r;s++){var o=t[s>>>2]>>>24-s%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new u.init(r,t/2)}},f=c.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],s=0;s<r;s++){var o=t[s>>>2]>>>24-s%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new u.init(r,t)}},h=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,s=n.words,o=n.sigBytes,a=this.blockSize,l=o/(4*a),c=(l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*a,d=e.min(4*c,o);if(c){for(var f=0;f<c;f+=a)this._doProcessBlock(s,f);r=s.splice(0,c),n.sigBytes-=d}return new u.init(r,d)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=p.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new g.HMAC.init(e,r).finalize(t)}}});var g=o.algo={};return o}(Math)),S4.exports}var S9,S7={exports:{}};NQ=S5(),S9||(S9=1,NZ=S5(),function(e){var t=NZ.lib,r=t.WordArray,n=t.Hasher,s=NZ.algo,o=[],a=[];function l(e){return(e-(0|e))*0x100000000|0}for(var u=2,c=0;c<64;)(function(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0})(u)&&(c<8&&(o[c]=l(e.pow(u,.5))),a[c]=l(e.pow(u,1/3)),c++),u++;var d=[],f=s.SHA256=n.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],s=r[1],o=r[2],l=r[3],u=r[4],c=r[5],f=r[6],h=r[7],p=0;p<64;p++){if(p<16)d[p]=0|e[t+p];else{var g=d[p-15],m=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,y=d[p-2],b=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;d[p]=m+d[p-7]+b+d[p-16]}var v=u&c^~u&f,x=n&s^n&o^s&o,w=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),E=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+v+a[p]+d[p],A=w+x;h=f,f=c,c=u,u=l+E|0,l=o,o=s,s=n,n=E+A|0}r[0]=r[0]+n|0,r[1]=r[1]+s|0,r[2]=r[2]+o|0,r[3]=r[3]+l|0,r[4]=r[4]+u|0,r[5]=r[5]+c|0,r[6]=r[6]+f|0,r[7]=r[7]+h|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,s=8*t.sigBytes;return r[s>>>5]|=128<<24-s%32,r[(s+64>>>9<<4)+14]=e.floor(n/0x100000000),r[(s+64>>>9<<4)+15]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});NZ.SHA256=n._createHelper(f),NZ.HmacSHA256=n._createHmacHelper(f)}(Math),S7.exports=NZ.SHA256),S7.exports,NX=NQ.lib.WordArray,N0=(NY=NQ.algo).SHA256,N1=NY.SHA224=N0.extend({_doReset:function(){this._hash=new NX.init([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4])},_doFinalize:function(){var e=N0._doFinalize.call(this);return e.sigBytes-=4,e}}),NQ.SHA224=N0._createHelper(N1),NQ.HmacSHA224=N0._createHmacHelper(N1),Sk.exports=NQ.SHA224;let ke=e5(Sk.exports);var kt=((eb=kt||{}).None="none",eb.Present="present",eb.VerifyingContract="verifying_contract",eb),kr=Object.defineProperty,kn=Object.getOwnPropertyDescriptor;let ki=class{constructor(e){this.config=e}async getTypedDataFilters({chainId:e,address:t,schema:r,version:n}){var s,o,a,l;let u;try{let c=await dJ.request({method:"GET",url:`${this.config.cal.url}/dapps`,params:{contracts:t,chain_id:e,output:"descriptors_eip712",descriptors_eip712_version:n,descriptors_eip712:"<set>",ref:`branch:${this.config.cal.branch}`},headers:{[vS]:`context-module/${vO.version}`,[vk]:this.config.originToken}}),d=ke(JSON.stringify(this.sortTypes(r)).replace(" ","")).toString();t=t.toLowerCase();let f=null==(l=null==(a=null==(o=null==(s=c.data)?void 0:s[0])?void 0:o.descriptors_eip712)?void 0:a[t])?void 0:l[d];if(!f)return rM(Error(`[ContextModule] HttpTypedDataDataSource: no typed data filters for address ${t} on chain ${e} for schema ${d}`));if(!f.schema||!Array.isArray(f.instructions))return rM(Error(`[ContextModule] HttpTypedDataDataSource: no message info for address ${t} on chain ${e} for schema ${d}`));let h=[],p={};for(let r of f.instructions)if(this.isInstructionContractInfo(r,this.config.cal.mode))u={displayName:r.display_name,signature:r.signatures[this.config.cal.mode],filtersCount:r.field_mappers_count};else if("v1"===n&&this.isInstructionFieldV1(r,this.config.cal.mode))h.push({type:"raw",displayName:r.display_name,path:r.field_path,signature:r.signatures[this.config.cal.mode]});else if(this.isInstructionFieldV2(r,this.config.cal.mode))h.push({type:r.format,displayName:r.display_name,path:r.field_path,signature:r.signatures[this.config.cal.mode]});else if(this.isInstructionFieldV2WithCoinRef(r,this.config.cal.mode))h.push({type:r.format,displayName:r.display_name,path:r.field_path,signature:r.signatures[this.config.cal.mode],tokenIndex:r.coin_ref});else if(this.isInstructionFieldV2WithName(r,this.config.cal.mode))h.push({type:r.format,displayName:r.display_name,path:r.field_path,signature:r.signatures[this.config.cal.mode],types:r.name_types,sources:r.name_sources,typesAndSourcesPayload:this.formatTrustedNameTypesAndSources(r)});else if(this.isInstructionCalldataInfo(r,this.config.cal.mode))p[r.calldata_index]={displayName:r.display_name,calldataIndex:r.calldata_index,valueFlag:r.value_filter_flag,calleeFlag:this.convertCalldataPresenceFlag(r.callee_filter_flag),amountFlag:r.amount_filter_flag,spenderFlag:this.convertCalldataPresenceFlag(r.spender_filter_flag),chainIdFlag:r.chain_id_filter_flag,selectorFlag:r.selector_filter_flag,signature:r.signatures[this.config.cal.mode]};else{if(!this.isInstructionFieldV2Calldata(r,this.config.cal.mode))return rM(Error(`[ContextModule] HttpTypedDataDataSource: invalid typed data field for address ${t} on chain ${e} for schema ${d}`));h.push({type:r.format,displayName:r.display_name,path:r.field_path,signature:r.signatures[this.config.cal.mode],calldataIndex:r.calldata_index})}return u?rU({messageInfo:u,filters:h,calldatasInfos:p}):rM(Error(`[ContextModule] HttpTypedDataDataSource: no message info for address ${t} on chain ${e} for schema ${d}`))}catch{return rM(Error("[ContextModule] HttpTypedDataDataSource: Failed to fetch typed data informations"))}}convertCalldataPresenceFlag(e){switch(e){case"none":return kt.None;case"present":return kt.Present;case"verifying_contract":return kt.VerifyingContract;default:throw Error(`Unhandled flag: ${e}`)}}formatTrustedNameTypesAndSources(e){let t=e.name_types.length,r=e.name_sources.length,n=e.descriptor.slice(-((t+r)*2),-2*r),s=e.descriptor.slice(-2*r);return t.toString(16).padStart(2,"0")+n+r.toString(16).padStart(2,"0")+s}isInstructionFieldV1(e,t){return"object"==typeof e&&"string"==typeof e.display_name&&"string"==typeof e.field_path&&"object"==typeof e.signatures&&"string"==typeof e.signatures[t]}isInstructionFieldV2(e,t){return"object"==typeof e&&"string"==typeof e.display_name&&"string"==typeof e.field_path&&"object"==typeof e.signatures&&"string"==typeof e.signatures[t]&&"string"==typeof e.format&&["raw","datetime"].includes(e.format)&&void 0===e.coin_ref}isInstructionFieldV2WithCoinRef(e,t){return"object"==typeof e&&"string"==typeof e.display_name&&"string"==typeof e.field_path&&"object"==typeof e.signatures&&"string"==typeof e.signatures[t]&&"string"==typeof e.format&&["token","amount"].includes(e.format)&&"number"==typeof e.coin_ref}isInstructionFieldV2WithName(e,t){return"object"==typeof e&&"string"==typeof e.display_name&&"string"==typeof e.field_path&&"object"==typeof e.signatures&&"string"==typeof e.signatures[t]&&"string"==typeof e.format&&"trusted-name"===e.format&&void 0===e.coin_ref&&Array.isArray(e.name_types)&&Array.isArray(e.name_sources)&&e.name_types.every(e=>"string"==typeof e)&&e.name_sources.every(e=>"string"==typeof e)}isInstructionContractInfo(e,t){return"object"==typeof e&&"string"==typeof e.display_name&&"number"==typeof e.field_mappers_count&&"object"==typeof e.signatures&&"string"==typeof e.signatures[t]&&void 0===e.field_path}isInstructionCalldataInfo(e,t){return"object"==typeof e&&"string"==typeof e.type&&"calldata"===e.type&&"string"==typeof e.display_name&&"number"==typeof e.calldata_index&&"boolean"==typeof e.value_filter_flag&&"boolean"==typeof e.chain_id_filter_flag&&"boolean"==typeof e.selector_filter_flag&&"boolean"==typeof e.amount_filter_flag&&["none","present","verifying_contract"].includes(e.callee_filter_flag)&&["none","present","verifying_contract"].includes(e.spender_filter_flag)&&"object"==typeof e.signatures&&"string"==typeof e.signatures[t]}isInstructionFieldV2Calldata(e,t){return"object"==typeof e&&"string"==typeof e.display_name&&"string"==typeof e.field_path&&"object"==typeof e.signatures&&"string"==typeof e.signatures[t]&&"string"==typeof e.format&&["calldata-value","calldata-callee","calldata-chain-id","calldata-selector","calldata-amount","calldata-spender"].includes(e.format)&&"number"==typeof e.calldata_index}sortTypes(e){return Object.fromEntries(Object.entries(e).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[e,t.map(e=>({name:e.name,type:e.type}))]))}};ki=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?kn(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&kr(t,r,o),o})([oZ(),(ev=oW(vx.Config),(e,t)=>ev(e,t,0))],ki);var ks=Object.defineProperty,ko=Object.getOwnPropertyDescriptor,ka=(e,t)=>(r,n)=>t(r,n,e);let kl=class{constructor(e,t,r,n){this.dataSource=e,this.tokenDataSource=t,this.proxyDataSource=r,this._certificateLoader=n}async load(e){let t,r=await this.dataSource.getTypedDataFilters({address:e.verifyingContract,chainId:e.chainId,version:e.version,schema:e.schema});if(r.isLeft()){let{resolvedAddress:n,context:s}=await this.resolveProxy(e);if(void 0!==s&&(t=s,r=await this.dataSource.getTypedDataFilters({address:n,chainId:e.chainId,version:e.version,schema:e.schema})),r.isLeft())return{type:"error",error:r.extract()}}let{messageInfo:n,filters:s,calldatasInfos:o}=r.unsafeCoerce();return{type:"success",messageInfo:n,filters:s.reduce((e,t)=>(e[t.path]=t,e),{}),trustedNamesAddresses:this.extractTrustedNames(s,e),tokens:await this.extractTokens(s,e),calldatas:this.extractCalldatas(s,o,e),proxy:t}}async resolveProxy(e){let t=await this.proxyDataSource.getProxyImplementationAddress({calldata:"0x",proxyAddress:e.verifyingContract,chainId:e.chainId,challenge:e.challenge??""});if(t.isLeft())return{resolvedAddress:e.verifyingContract,context:void 0};let r=t.unsafeCoerce(),n=await this._certificateLoader.loadCertificate({keyId:r.keyId,keyUsage:r.keyUsage,targetDevice:e.deviceModelId});return{resolvedAddress:r.implementationAddress,context:{type:vI.PROXY_INFO,payload:r.signedDescriptor,certificate:n}}}extractTrustedNames(e,t){return e.filter(e=>"trusted-name"===e.type).reduce((e,r)=>{let n=t.fieldsValues.filter(e=>e.path===r.path);if(0!==n.length){let t=n[0],s=this.convertAddressToHexaString(t.value);e[r.path]=s}return e},{})}async extractTokens(e,t){let r={};for(let n of e){if("token"!==n.type&&"amount"!==n.type)continue;let e=n.tokenIndex;if(void 0===r[e]){if("token"===n.type){let s=t.fieldsValues.filter(e=>e.path===n.path);if(0===s.length)continue;let o=s[0],a=this.convertAddressToHexaString(o.value);if(s.every(e=>this.convertAddressToHexaString(e.value)===a)){let n=t.chainId;(await this.tokenDataSource.getTokenInfosPayload({address:a,chainId:n})).ifRight(t=>{r[e]=t})}}else if("amount"===n.type&&255===e){let n=t.verifyingContract,s=t.chainId;(await this.tokenDataSource.getTokenInfosPayload({address:n,chainId:s})).ifRight(t=>{r[e]=t})}}}return r}extractCalldatas(e,t,r){let n=e.reduce((e,t)=>{if("calldata-value"===t.type||"calldata-callee"===t.type||"calldata-chain-id"===t.type||"calldata-selector"===t.type||"calldata-amount"===t.type||"calldata-spender"===t.type){let r=e[t.calldataIndex];void 0===r?e[t.calldataIndex]=[t]:r.push(t)}return e},{}),s={};for(let e in t){let o=t[e],a=n[e];if(!a)continue;let l=this.extractHexaString(a.find(e=>"calldata-value"===e.type),r,"0x"),u=this.extractHexaString(a.find(e=>"calldata-selector"===e.type),r,l.slice(0,10)),c=this.extractAddress(a.find(e=>"calldata-callee"===e.type),r,o.calleeFlag),d=this.extractAddress(a.find(e=>"calldata-spender"===e.type),r,o.spenderFlag),f=this.extractBigint(a.find(e=>"calldata-amount"===e.type),r,void 0),h=this.extractBigint(a.find(e=>"calldata-chain-id"===e.type),r,void 0),p=void 0!==h&&h<Number.MAX_SAFE_INTEGER?Number(h):r.chainId;s[e]={filter:o,subset:{chainId:p,data:l,selector:u,to:c,value:f,from:d}}}return s}extractHexaString(e,t,r){if(void 0!==e){let r=t.fieldsValues.filter(t=>t.path===e.path);if(0!==r.length)return tr(r[0].value)}return r}extractAddress(e,t,r,n){if(r===kt.VerifyingContract)return t.verifyingContract;if(void 0!==e){let r=t.fieldsValues.filter(t=>t.path===e.path);if(0!==r.length)return this.convertAddressToHexaString(r[0].value)}return n}extractBigint(e,t,r){if(void 0!==e){let r=t.fieldsValues.filter(t=>t.path===e.path);if(0!==r.length)return BigInt(tr(r[0].value))}return r}convertAddressToHexaString(e){return`0x${Array.from(e,e=>e.toString(16).padStart(2,"0")).join("").padStart(40,"0")}`}};kl=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?ko(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&ks(t,r,o),o})([oZ(),ka(0,oW(vZ.TypedDataDataSource)),ka(1,oW(vK.TokenDataSource)),ka(2,oW(vL.ProxyDataSource)),ka(3,oW(vw.PkiCertificateLoader))],kl);let ku=()=>new aP(({bind:e})=>{e(vZ.TypedDataDataSource).to(ki),e(vZ.TypedDataContextLoader).to(kl)}),kc=["function execute(bytes calldata commands, bytes[] calldata inputs, uint256 deadline) external payable"];var kd=((ex=kd||{}).V2_SWAP_EXACT_IN="V2_SWAP_EXACT_IN",ex.V2_SWAP_EXACT_OUT="V2_SWAP_EXACT_OUT",ex.V3_SWAP_EXACT_IN="V3_SWAP_EXACT_IN",ex.V3_SWAP_EXACT_OUT="V3_SWAP_EXACT_OUT",ex.WRAP_ETH="WRAP_ETH",ex.UNWRAP_ETH="UNWRAP_ETH",ex.PERMIT2_PERMIT="PERMIT2_PERMIT",ex.PERMIT2_TRANSFER_FROM="PERMIT2_TRANSFER_FROM",ex.PERMIT2_PERMIT_BATCH="PERMIT2_PERMIT_BATCH",ex.PERMIT2_TRANSFER_FROM_BATCH="PERMIT2_TRANSFER_FROM_BATCH",ex.PAY_PORTION="PAY_PORTION",ex.SWEEP="SWEEP",ex);let kf={"0x08":"V2_SWAP_EXACT_IN","0x09":"V2_SWAP_EXACT_OUT","0x00":"V3_SWAP_EXACT_IN","0x01":"V3_SWAP_EXACT_OUT","0x0b":"WRAP_ETH","0x0c":"UNWRAP_ETH","0x0a":"PERMIT2_PERMIT","0x0d":"PERMIT2_TRANSFER_FROM","0x02":"PERMIT2_PERMIT_BATCH","0x03":"PERMIT2_TRANSFER_FROM_BATCH","0x06":"PAY_PORTION","0x04":"SWEEP"},kh=["V2_SWAP_EXACT_IN","V2_SWAP_EXACT_OUT","V3_SWAP_EXACT_IN","V3_SWAP_EXACT_OUT"];var kp=((ew=kp||{})[ew.ETHEREUM_MAINNET=1]="ETHEREUM_MAINNET",ew[ew.ETHEREUM_GOERLI=5]="ETHEREUM_GOERLI",ew[ew.ETHEREUM_SEPOLIA=0xaa36a7]="ETHEREUM_SEPOLIA",ew[ew.ARBITRUM_ONE=42161]="ARBITRUM_ONE",ew[ew.ARBITRUM_GOERLI=421613]="ARBITRUM_GOERLI",ew[ew.AVALANCHE_C_CHAIN=43114]="AVALANCHE_C_CHAIN",ew[ew.BSC=56]="BSC",ew[ew.BASE=8453]="BASE",ew[ew.BASE_GOERLI=84531]="BASE_GOERLI",ew[ew.BLAST=23888]="BLAST",ew[ew.OPTIMISM=10]="OPTIMISM",ew[ew.OPTIMISM_GOERLI=420]="OPTIMISM_GOERLI",ew[ew.POLYGON=137]="POLYGON",ew[ew.POLYGON_MUMBAI=80001]="POLYGON_MUMBAI",ew);let kg={1:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",5:"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",0xaa36a7:"0xfFf9976782d46CC05630D1f6eBAb18b2324d6B14",42161:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",421613:"0xe39Ab88f8A4777030A534146A9Ca3B52bd5D43A3",43114:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",56:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",8453:"0x4200000000000000000000000000000000000006",84531:"0x44D627f900da8AdaC7561bD73aA745F132450798",23888:"0x4300000000000000000000000000000000000004",10:"0x4200000000000000000000000000000000000006",420:"0x4200000000000000000000000000000000000006",137:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",80001:"0x9c3C9283D3e44854697Cd22D3Faa240Cfb032889"};var km=Object.defineProperty,ky=Object.getOwnPropertyDescriptor;let kb=class{constructor(e){eY(this,"_decodeSweep",e=>{let[t]=this.abiDecoder.decode(["address","address","uint256"],e);return"string"==typeof t&&te(t)?[t.toLowerCase()]:[]}),this.abiDecoder=e}decode(e,t,r){switch(e){case kd.V2_SWAP_EXACT_IN:case kd.V2_SWAP_EXACT_OUT:return this._decodeSwapV2(t);case kd.V3_SWAP_EXACT_IN:case kd.V3_SWAP_EXACT_OUT:return this._decodeSwapV3(t);case kd.WRAP_ETH:case kd.UNWRAP_ETH:return this._decodeWrappedEth(t,r);case kd.SWEEP:return this._decodeSweep(t);case kd.PERMIT2_PERMIT:case kd.PERMIT2_TRANSFER_FROM:case kd.PERMIT2_PERMIT_BATCH:case kd.PERMIT2_TRANSFER_FROM_BATCH:case kd.PAY_PORTION:default:return[]}}_decodeSwapV2(e){let[,,,t]=this.abiDecoder.decode(["address","uint256","uint256","address[]","bool"],e);return Array.isArray(t)&&t.every(te)?t.map(e=>e.toLowerCase()):[]}_decodeSwapV3(e){let[,,,t]=this.abiDecoder.decode(["address","uint256","uint256","bytes","bool"],e);if("string"!=typeof t||!te(t)||t.length<88)return[];let r=[];for(let e=2;e<t.length;e+=46)r.push(t.slice(e,e+40));return r.map(e=>e.toLowerCase()).map(e=>`0x${e}`)}_isSupportedChainId(e){return Object.values(kp).includes(e)}_decodeWrappedEth(e,t){return this._isSupportedChainId(t)?[kg[t].toLowerCase()]:[]}};kb=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?ky(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&km(t,r,o),o})([oZ(),(eE=oW(ED.AbiDecoderDataSource),(e,t)=>eE(e,t,0))],kb);var kv=Object.defineProperty,kx=Object.getOwnPropertyDescriptor;let kw=class{decode(e,t){try{return E_.defaultAbiCoder().decode(e,t)}catch{return[]}}};kw=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?kx(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&kv(t,r,o),o})([oZ()],kw);var kE=Object.defineProperty,kA=Object.getOwnPropertyDescriptor,kS=(e,t)=>(r,n)=>t(r,n,e);let kk=[vI.TOKEN],kI=class{constructor(e,t){this.commandDecoderDataSource=e,this.tokenDataSource=t}canHandle(e,t){return"object"==typeof e&&null!==e&&"data"in e&&"selector"in e&&"chainId"in e&&"number"==typeof e.chainId&&te(e.data)&&"0x"!==e.data&&te(e.selector)&&"0x3593564c"===e.selector&&kk.every(e=>t.includes(e))}async load(e){let{data:t,chainId:r}=e;return await this._extractClearSignContexts(t,r)}async _extractClearSignContexts(e,t){try{let r=new EN(kc).parseTransaction({data:e}),n=null==r?void 0:r.args[0],s=null==r?void 0:r.args[1];if(!te(n)||!this._isHexaStringArray(s))return[];let o=this._extractCommands(n).orDefault([]);if(0===n.length||s.length!==o.length)return[];let a=o.reduce((e,r,n)=>{let o=s[n],a=this.commandDecoderDataSource.decode(r,o,t);return e.push([r,a]),e},[]);if(!this._isChainingSwapSupported(a))return[];let l=[...new Set(a.flatMap(([,e])=>e))];return(await Promise.all(l.map(e=>this.tokenDataSource.getTokenInfosPayload({address:e,chainId:t})))).map(e=>e.caseOf({Left:e=>({type:vI.ERROR,error:e}),Right:e=>({type:vI.TOKEN,payload:e})}))}catch{return[]}}_extractCommands(e){return rC.fromNullable(e.slice(2).match(/../g)).map(e=>e.map(e=>`0x${e}`)).map(e=>e.map(e=>kf[e])).chain(e=>e.every(e=>void 0!==e)?rC.of(e):rB)}_isChainingSwapSupported(e){let t,r;for(let[n,s]of e){if(!kh.includes(n))continue;let e=n.slice(0,2);if(t&&(t!==s[0]||r!==e))return!1;t=s[s.length-1],r=e}return!0}_isHexaStringArray(e){return Array.isArray(e)&&e.every(e=>"string"==typeof e&&te(e))}};kI=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?kA(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&kE(t,r,o),o})([oZ(),kS(0,oW(ED.CommandDecoderDataSource)),kS(1,oW(vK.TokenDataSource))],kI);let k_=()=>new aP(({bind:e})=>{e(ED.AbiDecoderDataSource).to(kw),e(ED.CommandDecoderDataSource).to(kb),e(ED.UniswapContextLoader).to(kI)}),kP=({config:e})=>{let t=new aZ;return t.loadSync(vX(e),Ez(),v5(),E1(),Ac(e),Av(),A8(),vQ(),SS(),ku(),E7(),k_(),Sd(),AC(),Aq(),AM()),t};class kC{constructor(e){eY(this,"_container"),eY(this,"_loaders"),eY(this,"_typedDataLoader"),eY(this,"_solanaLoader"),eY(this,"_fieldLoaders"),this._container=kP({config:e}),this._loaders=e.defaultLoaders?this._getDefaultLoaders():[],this._loaders.push(...e.customLoaders),this._fieldLoaders=e.defaultFieldLoaders?this._getDefaultFieldLoaders():[],this._fieldLoaders.push(...e.customFieldLoaders),this._typedDataLoader=e.customTypedDataLoader??this._getDefaultTypedDataLoader(),this._solanaLoader=e.customSolanaLoader??this._getSolanaLoader()}_getDefaultFieldLoaders(){return[this._container.get(vq.NftContextFieldLoader),this._container.get(vK.TokenContextFieldLoader),this._container.get(vH.TrustedNameContextFieldLoader),this._container.get(vL.ProxyContextFieldLoader)]}_getDefaultLoaders(){return[this._container.get(vV.ExternalPluginContextLoader),this._container.get(vH.TrustedNameContextLoader),this._container.get(vq.NftContextLoader),this._container.get(vK.TokenContextLoader),this._container.get(vD.CalldataContextLoader),this._container.get(v$.DynamicNetworkContextLoader),this._container.get(vG.SafeAddressLoader),this._container.get(vJ.TransactionCheckContextLoader),this._container.get(vJ.TypedDataCheckContextLoader)]}_getDefaultTypedDataLoader(){return this._container.get(vZ.TypedDataContextLoader)}_getSolanaLoader(){try{return this._container.get(vW.SolanaContextLoader)}catch{return{load:async e=>rM(Error("[ContextModule] - DefaultContextModule: no SolanaContextLoader bound"))}}}async getContexts(e,t){let r=Object.values(vI),n=this._loaders.filter(n=>n.canHandle(e,t??r)).map(t=>t.load(e));return(await Promise.all(n)).flat()}async getFieldContext(e,t){let r=this._fieldLoaders.filter(r=>r.canHandle(e,t));if(0===r.length)return Promise.resolve({type:vI.ERROR,error:Error(`Loader not found for field: ${e} and expected type: ${t}`)});for(let t of r){let r=await t.loadField(e);if(r.type!==vI.ERROR)return r}return{type:vI.ERROR,error:Error(`Loader not found for field: ${e} and expected type: ${t}`)}}async getTypedDataFilters(e){return this._typedDataLoader.load(e)}async getSolanaContext(e){return await this._solanaLoader.load(e)}}let kO={cal:{url:"https://crypto-assets-service.api.ledger.com/v1",mode:"prod",branch:"main"},web3checks:{url:"https://web3checks-backend.api.ledger.com/v3"},metadataServiceDomain:{url:"https://nft.api.live.ledger.com"},defaultLoaders:!0,customLoaders:[],defaultFieldLoaders:!0,customFieldLoaders:[],customTypedDataLoader:void 0,customSolanaLoader:void 0},kT=class{constructor({originToken:e}={}){eY(this,"config",kO),eY(this,"originToken"),this.originToken=e}removeDefaultLoaders(){return this.config.defaultLoaders=!1,this}addLoader(e){return this.config.customLoaders.push(e),this}addTypedDataLoader(e){return this.config.customTypedDataLoader=e,this}addSolanaLoader(e){return this.config.customSolanaLoader=e,this}setCalConfig(e){return this.config.cal=e,this}setMetadataServiceConfig(e){return this.config.metadataServiceDomain=e,this}setWeb3ChecksConfig(e){return this.config.web3checks=e,this}setDatasourceConfig(e){return this.config.datasource=e,this}build(){return new kC({...this.config,originToken:this.originToken})}};var kR=((eA=kR||{}).FROM="FROM",eA.TO="TO",eA.VALUE="VALUE",eA),kB=((eS=kB||{}).TUPLE="TUPLE",eS.ARRAY="ARRAY",eS.REF="REF",eS.LEAF="LEAF",eS.SLICE="SLICE",eS),kN=((ek=kN||{}).STATIC_LEAF="STATIC_LEAF",ek.DYNAMIC_LEAF="DYNAMIC_LEAF",ek.TUPLE_LEAF="TUPLE_LEAF",ek.ARRAY_LEAF="ARRAY_LEAF",ek);let kD={GetAddressUseCase:Symbol.for("GetAddressUseCase")},kL={AppBinding:Symbol.for("AppBinder")};var kM=Object.defineProperty,kU=Object.getOwnPropertyDescriptor;let kF=class{constructor(e){eY(this,"_appBinder"),this._appBinder=e}execute(e,t){return this._appBinder.getAddress({derivationPath:e,checkOnDevice:(null==t?void 0:t.checkOnDevice)??!1,returnChainCode:(null==t?void 0:t.returnChainCode)??!1,skipOpenApp:(null==t?void 0:t.skipOpenApp)??!1})}};kF=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?kU(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&kM(t,r,o),o})([oZ(),(eI=oW(kL.AppBinding),(e,t)=>eI(e,t,0))],kF);let kj=()=>new aP(({bind:e})=>{e(kD.GetAddressUseCase).to(kF)}),kz=class{constructor(e,t,r=tm.isSuccessResponse){this._errors=e,this._errorFactory=t,this._isSuccessResponse=r}getError(e){let t=new tc(e).encodeToHexaString(e.statusCode);return tv(t,this._errors)?tp({error:this._errorFactory({...this._errors[t],errorCode:t})}):this._isSuccessResponse(e)?void 0:tp({error:tE.handle(e)})}},k$=(eY(N2=class{static splitPath(e){let t=[];return e.split("/").forEach(e=>{let r=parseInt(e,10);if(isNaN(r))throw Error("invalid number provided");e.length>1&&"'"===e[e.length-1]&&(r+=this.PADDING),t.push(r)}),t}},"PADDING",0x80000000),N2),kH={6001:{message:"Mode check fail"},6501:{message:"TransactionType not supported"},6502:{message:"Output buffer too small for chainId conversion"},6800:{message:"Internal error (Please report)"},6982:{message:"Security status not satisfied (Canceled by user)"},6983:{message:"Wrong Data length"},6984:{message:"Plugin not installed"},6985:{message:"Condition not satisfied"},"6a00":{message:"Error without info"},"6a80":{message:"Invalid data"},"6a84":{message:"Insufficient memory"},"6a88":{message:"Data not found"},"6b00":{message:"Incorrect parameter P1 or P2"},"6d00":{message:"Incorrect parameter INS"},"6e00":{message:"Incorrect parameter CLA"},"6f00":{message:"Technical problem (Internal error, please report)"},"911c":{message:"Command code not supported (i.e., Ledger-PKI not yet available)"}},kV=class extends ty{constructor(e){super({tag:"EthAppCommandError",...e})}},kq=e=>new kV(e);class kG{constructor(e){eY(this,"name","getAddress"),eY(this,"args"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){let e=new tl({cla:224,ins:2,p1:+!!this.args.checkOnDevice,p2:+!!this.args.returnChainCode}),t=this.args.derivationPath,r=k$.splitPath(t);return e.add8BitUIntToData(r.length),r.forEach(t=>{e.add32BitUIntToData(t)}),e.add32BitUIntToData(0),e.add32BitUIntToData(1),e.build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t,r=new tc(e),n=r.extract8BitUInt();if(void 0===n)return tp({error:new td("Public key length is missing")});if(!1===r.testMinimalLength(n))return tp({error:new td("Public key is missing")});let s=r.encodeToHexaString(r.extractFieldByLength(n)),o=r.extract8BitUInt();if(void 0===o)return tp({error:new td("Ethereum address length is missing")});if(!1===r.testMinimalLength(o))return tp({error:new td("Ethereum address is missing")});let a=`0x${r.encodeToString(r.extractFieldByLength(o))}`;if(!1===te(a))return tp({error:new td("Invalid Ethereum address")});if(this.args.returnChainCode){if(!1===r.testMinimalLength(32))return tp({error:new td("Invalid Chaincode")});t=r.encodeToHexaString(r.extractFieldByLength(32))}return tp({data:{publicKey:s,address:a,chainCode:t}})})}}let kW=class{constructor(){eY(this,"name","getAppConfiguration"),eY(this,"errorHelper",new kz(kH,kq))}getApdu(){return new tl({cla:224,ins:6,p1:0,p2:0}).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e),r=t.extract8BitUInt();if(void 0===r)return tp({error:new td("Cannot extract config flags")});let n=t.extract8BitUInt(),s=t.extract8BitUInt(),o=t.extract8BitUInt();return void 0===n||void 0===s||void 0===o?tp({error:new td("Cannot extract version")}):tp({data:{blindSigningEnabled:!!(1&r),web3ChecksEnabled:!!(16&r),web3ChecksOptIn:!!(32&r),version:`${n}.${s}.${o}`}})})}},kK=class{constructor(e){eY(this,"name","signEIP712"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){let{derivationPath:e,legacyArgs:t}=this.args,r={cla:224,ins:12,p1:0,p2:+!t.isJust()},n=k$.splitPath(e),s=new tl(r);for(let e of(s.add8BitUIntToData(n.length),n))s.add32BitUIntToData(e);return t.ifJust(({domainHash:e,messageHash:t})=>{s.addHexaStringToData(e),s.addHexaStringToData(t)}),s.build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e),r=t.extract8BitUInt();if(void 0===r)return tp({error:new td("V is missing")});let n=t.encodeToHexaString(t.extractFieldByLength(32),!0);if(!n)return tp({error:new td("R is missing")});let s=t.encodeToHexaString(t.extractFieldByLength(32),!0);return tp(s?{data:{r:n,s:s,v:r}}:{error:new td("S is missing")})})}},kJ=class{constructor(){eY(this,"name","web3CheckOptIn"),eY(this,"errorHelper",new kz(kH,kq))}getApdu(){return new tl({cla:224,ins:50,p1:1,p2:0}).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e).extract8BitUInt();return tp(void 0===t?{data:{enabled:!1}}:{data:{enabled:0!==t}})})}};var kZ=((e_=kZ||{}).BASIC="basic",e_.EIP7730="eip7730",e_);let kQ=class{constructor(){eY(this,"name","getChallenge"),eY(this,"errorHelper",new kz(kH,kq))}getApdu(){return new tl({cla:224,ins:32,p1:0,p2:0}).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e);return!1===t.testMinimalLength(4)?tp({error:new td("Challenge key is missing")}):tp({data:{challenge:t.encodeToHexaString(t.extractFieldByLength(4))}})})}};var kX={exports:{}},kY={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},k0=()=>{};!function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=kY,o=(t=e.exports={}).re=[],a=t.safeRe=[],l=t.src=[],u=t.safeSrc=[],c=t.t={},d=0,f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",s],[f,n]],p=e=>{for(let[t,r]of h)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},g=(e,t,r)=>{let n=p(t),s=d++;k0(e,s,t),c[e]=s,l[s]=t,u[s]=n,o[s]=new RegExp(t,r?"g":void 0),a[s]=new RegExp(n,r?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),g("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${f}+`),g("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),g("FULL",`^${l[c.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),g("LOOSE",`^${l[c.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),g("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",l[c.COERCE],!0),g("COERCERTLFULL",l[c.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(kX,kX.exports);var k1=kX.exports;let k2=Object.freeze({loose:!0}),k3=Object.freeze({});var k8=e=>e?"object"!=typeof e?k2:e:k3;let k6=/^[0-9]+$/,k4=(e,t)=>{let r=k6.test(e),n=k6.test(t);return r&&n&&(e*=1,t*=1),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};var k5={compareIdentifiers:k4,rcompareIdentifiers:(e,t)=>k4(t,e)};let{MAX_LENGTH:k9,MAX_SAFE_INTEGER:k7}=kY,{safeRe:Ie,t:It}=k1,{compareIdentifiers:Ir}=k5,In=class e{constructor(t,r){if(r=k8(r),t instanceof e){if(!!r.loose===t.loose&&!!r.includePrerelease===t.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>k9)throw TypeError(`version is longer than ${k9} characters`);k0("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?Ie[It.LOOSE]:Ie[It.FULL]);if(!n)throw TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>k7||this.major<0)throw TypeError("Invalid major version");if(this.minor>k7||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>k7||this.patch<0)throw TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<k7)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(k0("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),Ir(this.major,t.major)||Ir(this.minor,t.minor)||Ir(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return -1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let e=this.prerelease[r],n=t.prerelease[r];if(k0("prerelease compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return -1;if(e===n)continue;return Ir(e,n)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let e=this.build[r],n=t.build[r];if(k0("build compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return -1;if(e===n)continue;return Ir(e,n)}while(++r)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?Ie[It.PRERELEASELOOSE]:Ie[It.PRERELEASE]);if(!e||e[1]!==t)throw Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=+!!Number(r);if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===Ir(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ii=(e,t,r=!1)=>{if(e instanceof In)return e;try{return new In(e,t)}catch(e){if(!r)return null;throw e}},Is=(e,t,r)=>new In(e,r).compare(new In(t,r)),Io=(e,t,r)=>{let n=new In(e,r),s=new In(t,r);return n.compare(s)||n.compareBuild(s)},Ia=(e,t,r)=>Is(e,t,r)>0,Il=(e,t,r)=>0>Is(e,t,r),Iu=(e,t,r)=>0===Is(e,t,r),Ic=(e,t,r)=>0!==Is(e,t,r),Id=(e,t,r)=>Is(e,t,r)>=0,If=(e,t,r)=>0>=Is(e,t,r),Ih=(e,t,r,n)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Iu(e,r,n);case"!=":return Ic(e,r,n);case">":return Ia(e,r,n);case">=":return Id(e,r,n);case"<":return Il(e,r,n);case"<=":return If(e,r,n);default:throw TypeError(`Invalid operator: ${t}`)}};let{safeRe:Ip,t:Ig}=k1,Im=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}};function Iy(){if(N8)return N3;N8=1;let e=/\s+/g;class t{constructor(r,o){if(o=n(o),r instanceof t)return!!o.loose===r.loose&&!!o.includePrerelease===r.includePrerelease?r:new t(r.raw,o);if(r instanceof s)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease,this.raw=r.trim().replace(e," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!g(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(let e of this.set)if(1===e.length&&m(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+e,n=r.get(t);if(n)return n;let a=this.options.loose,m=a?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];o("hyphen replace",e=e.replace(m,P(this.options.includePrerelease))),o("comparator trim",e=e.replace(l[u.COMPARATORTRIM],c)),o("tilde trim",e=e.replace(l[u.TILDETRIM],d)),o("caret trim",e=e.replace(l[u.CARETTRIM],f));let y=e.split(" ").map(e=>b(e,this.options)).join(" ").split(/\s+/).map(e=>_(e,this.options));a&&(y=y.filter(e=>(o("loose invalid filter",e,this.options),!!e.match(l[u.COMPARATORLOOSE])))),o("range list",y);let v=new Map;for(let e of y.map(e=>new s(e,this.options))){if(g(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");let x=[...v.values()];return r.set(t,x),x}intersects(e,r){if(!(e instanceof t))throw TypeError("a Range is required");return this.set.some(t=>y(t,r)&&e.set.some(e=>y(e,r)&&t.every(t=>e.every(e=>t.intersects(e,r)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new a(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(C(this.set[t],e,this.options))return!0;return!1}}N3=t;let r=new Im,n=k8,s=Ib(),o=k0,a=In,{safeRe:l,t:u,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:f}=k1,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=kY,g=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,y=(e,t)=>{let r=!0,n=e.slice(),s=n.pop();for(;r&&n.length;)r=n.every(e=>s.intersects(e,t)),s=n.pop();return r},b=(e,t)=>(o("comp",e,t),o("caret",e=E(e,t)),o("tildes",e=x(e,t)),o("xrange",e=S(e,t)),o("stars",e=I(e,t)),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,x=(e,t)=>e.trim().split(/\s+/).map(e=>w(e,t)).join(" "),w=(e,t)=>{let r=t.loose?l[u.TILDELOOSE]:l[u.TILDE];return e.replace(r,(t,r,n,s,a)=>{let l;return o("tilde",e,t,r,n,s,a),v(r)?l="":v(n)?l=`>=${r}.0.0 <${+r+1}.0.0-0`:v(s)?l=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:a?(o("replaceTilde pr",a),l=`>=${r}.${n}.${s}-${a} <${r}.${+n+1}.0-0`):l=`>=${r}.${n}.${s} <${r}.${+n+1}.0-0`,o("tilde return",l),l})},E=(e,t)=>e.trim().split(/\s+/).map(e=>A(e,t)).join(" "),A=(e,t)=>{o("caret",e,t);let r=t.loose?l[u.CARETLOOSE]:l[u.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,s,a,l)=>{let u;return o("caret",e,t,r,s,a,l),v(r)?u="":v(s)?u=`>=${r}.0.0${n} <${+r+1}.0.0-0`:v(a)?u="0"===r?`>=${r}.${s}.0${n} <${r}.${+s+1}.0-0`:`>=${r}.${s}.0${n} <${+r+1}.0.0-0`:l?(o("replaceCaret pr",l),u="0"===r?"0"===s?`>=${r}.${s}.${a}-${l} <${r}.${s}.${+a+1}-0`:`>=${r}.${s}.${a}-${l} <${r}.${+s+1}.0-0`:`>=${r}.${s}.${a}-${l} <${+r+1}.0.0-0`):(o("no pr"),u="0"===r?"0"===s?`>=${r}.${s}.${a}${n} <${r}.${s}.${+a+1}-0`:`>=${r}.${s}.${a}${n} <${r}.${+s+1}.0-0`:`>=${r}.${s}.${a} <${+r+1}.0.0-0`),o("caret return",u),u})},S=(e,t)=>(o("replaceXRanges",e,t),e.split(/\s+/).map(e=>k(e,t)).join(" ")),k=(e,t)=>{e=e.trim();let r=t.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return e.replace(r,(r,n,s,a,l,u)=>{o("xRange",e,r,n,s,a,l,u);let c=v(s),d=c||v(a),f=d||v(l);return"="===n&&f&&(n=""),u=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&f?(d&&(a=0),l=0,">"===n?(n=">=",d?(s=+s+1,a=0):a=+a+1,l=0):"<="===n&&(n="<",d?s=+s+1:a=+a+1),"<"===n&&(u="-0"),r=`${n+s}.${a}.${l}${u}`):d?r=`>=${s}.0.0${u} <${+s+1}.0.0-0`:f&&(r=`>=${s}.${a}.0${u} <${s}.${+a+1}.0-0`),o("xRange return",r),r})},I=(e,t)=>(o("replaceStars",e,t),e.trim().replace(l[u.STAR],"")),_=(e,t)=>(o("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?u.GTE0PRE:u.GTE0],"")),P=e=>(t,r,n,s,o,a,l,u,c,d,f,h)=>(r=v(n)?"":v(s)?`>=${n}.0.0${e?"-0":""}`:v(o)?`>=${n}.${s}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`,u=v(c)?"":v(d)?`<${+c+1}.0.0-0`:v(f)?`<${c}.${+d+1}.0-0`:h?`<=${c}.${d}.${f}-${h}`:e?`<${c}.${d}.${+f+1}-0`:`<=${u}`,`${r} ${u}`.trim()),C=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(o(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0};return N3}function Ib(){if(N4)return N6;N4=1;let e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(n,s){if(s=r(s),n instanceof t){if(!!s.loose===n.loose)return n;n=n.value}a("comparator",n=n.trim().split(/\s+/).join(" "),s),this.options=s,this.loose=!!s.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(t){let r=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],o=t.match(r);if(!o)throw TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new l(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(a("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new l(t,this.options)}catch{return!1}return o(t,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(e.value,n).test(this.value):""===e.operator?""===e.value||new u(this.value,n).test(e.semver):!((n=r(n)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||o(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||o(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}N6=t;let r=k8,{safeRe:n,t:s}=k1,o=Ih,a=k0,l=In,u=Iy();return N6}let Iv=Iy();var Ix=(e,t,r)=>{try{t=new Iv(t,r)}catch{return!1}return t.test(e)};let Iw=Iy(),IE=Iy(),IA=Iy(),IS=Iy(),Ik=Iy(),II=Ib(),{ANY:I_}=II,IP=Iy();var IC=(e,t,r,n)=>{let s,o,a,l,u;switch(e=new In(e,n),t=new IP(t,n),r){case">":s=Ia,o=If,a=Il,l=">",u=">=";break;case"<":s=Il,o=Id,a=Ia,l="<",u="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(Ix(e,t,n))return!1;for(let r=0;r<t.set.length;++r){let c=t.set[r],d=null,f=null;if(c.forEach(e=>{e.semver===I_&&(e=new II(">=0.0.0")),d=d||e,f=f||e,s(e.semver,d.semver,n)?d=e:a(e.semver,f.semver,n)&&(f=e)}),d.operator===l||d.operator===u||(!f.operator||f.operator===l)&&o(e,f.semver)||f.operator===u&&a(e,f.semver))return!1}return!0};let IO=Iy(),IT=Iy(),IR=Ib(),{ANY:IB}=IR,IN=[new IR(">=0.0.0-0")],ID=[new IR(">=0.0.0")],IL=(e,t,r)=>{let n,s,o;if(e===t)return!0;if(1===e.length&&e[0].semver===IB){if(1===t.length&&t[0].semver===IB)return!0;e=r.includePrerelease?IN:ID}if(1===t.length&&t[0].semver===IB){if(r.includePrerelease)return!0;t=ID}let a=new Set;for(let t of e)">"===t.operator||">="===t.operator?n=IM(n,t,r):"<"===t.operator||"<="===t.operator?s=IU(s,t,r):a.add(t.semver);if(a.size>1||n&&s&&((o=Is(n.semver,s.semver,r))>0||0===o&&(">="!==n.operator||"<="!==s.operator)))return null;for(let e of a){if(n&&!Ix(e,String(n),r)||s&&!Ix(e,String(s),r))return null;for(let n of t)if(!Ix(e,String(n),r))return!1;return!0}let l,u,c,d,f=!!s&&!r.includePrerelease&&!!s.semver.prerelease.length&&s.semver,h=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver;for(let e of(f&&1===f.prerelease.length&&"<"===s.operator&&0===f.prerelease[0]&&(f=!1),t)){if(d=d||">"===e.operator||">="===e.operator,c=c||"<"===e.operator||"<="===e.operator,n){if(h&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===h.major&&e.semver.minor===h.minor&&e.semver.patch===h.patch&&(h=!1),">"===e.operator||">="===e.operator){if((l=IM(n,e,r))===e&&l!==n)return!1}else if(">="===n.operator&&!Ix(n.semver,String(e),r))return!1}if(s){if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),"<"===e.operator||"<="===e.operator){if((u=IU(s,e,r))===e&&u!==s)return!1}else if("<="===s.operator&&!Ix(s.semver,String(e),r))return!1}if(!e.operator&&(s||n)&&0!==o)return!1}return!(n&&c&&!s&&0!==o||s&&d&&!n&&0!==o||h||f)},IM=(e,t,r)=>{if(!e)return t;let n=Is(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},IU=(e,t,r)=>{if(!e)return t;let n=Is(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};var IF={parse:Ii,valid:(e,t)=>{let r=Ii(e,t);return r?r.version:null},clean:(e,t)=>{let r=Ii(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},inc:(e,t,r,n,s)=>{"string"==typeof r&&(s=n,n=r,r=void 0);try{return new In(e instanceof In?e.version:e,r).inc(t,n,s).version}catch{return null}},diff:(e,t)=>{let r=Ii(e,null,!0),n=Ii(t,null,!0),s=r.compare(n);if(0===s)return null;let o=s>0,a=o?r:n,l=o?n:r,u=!!a.prerelease.length;if(l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(a))return l.minor&&!l.patch?"minor":"patch"}let c=u?"pre":"";return r.major!==n.major?c+"major":r.minor!==n.minor?c+"minor":r.patch!==n.patch?c+"patch":"prerelease"},major:(e,t)=>new In(e,t).major,minor:(e,t)=>new In(e,t).minor,patch:(e,t)=>new In(e,t).patch,prerelease:(e,t)=>{let r=Ii(e,t);return r&&r.prerelease.length?r.prerelease:null},compare:Is,rcompare:(e,t,r)=>Is(t,e,r),compareLoose:(e,t)=>Is(e,t,!0),compareBuild:Io,sort:(e,t)=>e.sort((e,r)=>Io(e,r,t)),rsort:(e,t)=>e.sort((e,r)=>Io(r,e,t)),gt:Ia,lt:Il,eq:Iu,neq:Ic,gte:Id,lte:If,cmp:Ih,coerce:(e,t)=>{if(e instanceof In)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let n,s=t.includePrerelease?Ip[Ig.COERCERTLFULL]:Ip[Ig.COERCERTL];for(;(n=s.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),s.lastIndex=n.index+n[1].length+n[2].length;s.lastIndex=-1}else r=e.match(t.includePrerelease?Ip[Ig.COERCEFULL]:Ip[Ig.COERCE]);if(null===r)return null;let n=r[2],s=r[3]||"0",o=r[4]||"0",a=t.includePrerelease&&r[5]?`-${r[5]}`:"",l=t.includePrerelease&&r[6]?`+${r[6]}`:"";return Ii(`${n}.${s}.${o}${a}${l}`,t)},Comparator:Ib(),Range:Iy(),satisfies:Ix,toComparators:(e,t)=>new Iw(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" ")),maxSatisfying:(e,t,r)=>{let n=null,s=null,o=null;try{o=new IE(t,r)}catch{return null}return e.forEach(e=>{o.test(e)&&(!n||-1===s.compare(e))&&(s=new In(n=e,r))}),n},minSatisfying:(e,t,r)=>{let n=null,s=null,o=null;try{o=new IA(t,r)}catch{return null}return e.forEach(e=>{o.test(e)&&(!n||1===s.compare(e))&&(s=new In(n=e,r))}),n},minVersion:(e,t)=>{e=new IS(e,t);let r=new In("0.0.0");if(e.test(r)||(r=new In("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let n=e.set[t],s=null;n.forEach(e=>{let t=new In(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!s||Ia(t,s))&&(s=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),s&&(!r||Ia(r,s))&&(r=s)}return r&&e.test(r)?r:null},validRange:(e,t)=>{try{return new Ik(e,t).range||"*"}catch{return null}},outside:IC,gtr:(e,t,r)=>IC(e,t,">",r),ltr:(e,t,r)=>IC(e,t,"<",r),intersects:(e,t,r)=>(e=new IO(e,r),t=new IO(t,r),e.intersects(t,r)),simplifyRange:(e,t,r)=>{let n=[],s=null,o=null,a=e.sort((e,t)=>Is(e,t,r));for(let e of a)Ix(e,t,r)?(o=e,s||(s=e)):(o&&n.push([s,o]),o=null,s=null);s&&n.push([s,null]);let l=[];for(let[e,t]of n)e===t?l.push(e):t||e!==a[0]?t?e===a[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");let u=l.join(" || "),c="string"==typeof t.raw?t.raw:String(t);return u.length<c.length?u:t},subset:(e,t,r={})=>{if(e===t)return!0;e=new IT(e,r),t=new IT(t,r);let n=!1;r:for(let s of e.set){for(let e of t.set){let t=IL(s,e,r);if(n=n||null!==t,t)continue r}if(n)return!1}return!0},SemVer:In,re:k1.re,src:k1.src,tokens:k1.t,SEMVER_SPEC_VERSION:kY.SEMVER_SPEC_VERSION,RELEASE_TYPES:kY.RELEASE_TYPES,compareIdentifiers:k5.compareIdentifiers,rcompareIdentifiers:k5.rcompareIdentifiers};let Ij=class{constructor(e,t){if(eY(this,"isCompatible",!0),eY(this,"version","0.0.1"),eY(this,"modelId"),this.modelId=e.deviceModelId,e.sessionStateType===sx.Connected||"Exchange"===e.currentApp.name){this.isCompatible=!1;return}"Ethereum"===e.currentApp.name?this.version=e.currentApp.version:this.version=t.version}withMinVersionInclusive(e){return IF.gte(this.version,e)||(this.isCompatible=!1),this}withMinVersionExclusive(e){return IF.gt(this.version,e)||(this.isCompatible=!1),this}excludeDeviceModel(e){return this.modelId===e&&(this.isCompatible=!1),this}check(){return this.isCompatible}},Iz=[vI.TRANSACTION_INFO,vI.TRANSACTION_FIELD_DESCRIPTION,vI.ENUM,vI.PROXY_INFO],I$=[vI.TRANSACTION_INFO,vI.TRANSACTION_FIELD_DESCRIPTION,vI.PROXY_INFO,vI.TRANSACTION_CHECK,vI.DYNAMIC_NETWORK,vI.DYNAMIC_NETWORK_ICON,vI.ENUM,vI.TRUSTED_NAME,vI.TOKEN,vI.NFT,vI.PLUGIN,vI.EXTERNAL_PLUGIN],IH=class{constructor(e,t){this._api=e,this._args=t}async run(){let e,{contextModule:t,options:r,appConfig:n,transaction:s,subset:o}=this._args,a=void 0===s,l=!a&&n.web3ChecksEnabled,u=this._api.getDeviceSessionState();if(u.deviceModelId!==rm.NANO_S){let t=await this._api.sendCommand(new kQ);tg(t)&&(e=t.data.challenge)}let c=(await t.getContexts({challenge:e,domain:r.domain,deviceModelId:u.deviceModelId,transaction:l?s:void 0,...o},a?Iz:I$)).filter(e=>e.type!==vI.ERROR);return this._supportsGenericParser(u,n)&&this._hasValidTransactionInfo(c)?this._getERC7730Contexts(c):this._getBasicContexts(c)}_getERC7730Contexts(e){return{clearSignContexts:e.filter(e=>this._isContextNeededForERC7730ClearSigning(e)).sort((e,t)=>this._getContextPriority(e)-this._getContextPriority(t)),clearSignContextsOptional:e.filter(e=>e.type===vI.ENUM),clearSigningType:kZ.EIP7730}}_getBasicContexts(e){return{clearSignContexts:e.filter(e=>this._isContextNeededForBasicClearSigning(e)).sort((e,t)=>this._getContextPriority(e)-this._getContextPriority(t)),clearSignContextsOptional:[],clearSigningType:kZ.BASIC}}_isContextNeededForBasicClearSigning({type:e}){switch(e){case vI.TRANSACTION_CHECK:case vI.PLUGIN:case vI.EXTERNAL_PLUGIN:case vI.DYNAMIC_NETWORK:case vI.DYNAMIC_NETWORK_ICON:case vI.TRUSTED_NAME:case vI.TOKEN:case vI.NFT:return!0;case vI.TRANSACTION_INFO:case vI.TRANSACTION_FIELD_DESCRIPTION:case vI.ENUM:case vI.PROXY_INFO:case vI.SAFE:case vI.SIGNER:return!1;default:throw Error(`Unhandled context type ${String(e)}`)}}_isContextNeededForERC7730ClearSigning({type:e}){switch(e){case vI.TRANSACTION_INFO:case vI.TRANSACTION_FIELD_DESCRIPTION:case vI.PROXY_INFO:case vI.DYNAMIC_NETWORK:case vI.DYNAMIC_NETWORK_ICON:case vI.TRANSACTION_CHECK:return!0;case vI.ENUM:case vI.TRUSTED_NAME:case vI.TOKEN:case vI.NFT:case vI.PLUGIN:case vI.EXTERNAL_PLUGIN:case vI.SAFE:case vI.SIGNER:return!1;default:throw Error(`Unhandled context type ${String(e)}`)}}_hasValidTransactionInfo(e){var t;return(null==(t=e.find(e=>e.type===vI.TRANSACTION_INFO))?void 0:t.certificate)!==void 0}_supportsGenericParser(e,t){return new Ij(e,t).withMinVersionExclusive("1.14.0").excludeDeviceModel(rm.NANO_S).check()}_getContextPriority({type:e}){switch(e){case vI.TRANSACTION_CHECK:return 10;case vI.DYNAMIC_NETWORK:case vI.DYNAMIC_NETWORK_ICON:case vI.PROXY_INFO:return 30;case vI.TRANSACTION_INFO:return 50;case vI.PLUGIN:case vI.EXTERNAL_PLUGIN:case vI.TOKEN:case vI.NFT:case vI.TRUSTED_NAME:case vI.TRANSACTION_FIELD_DESCRIPTION:case vI.ENUM:return 70;case vI.SAFE:case vI.SIGNER:return 90;default:throw Error(`Unhandled context type for priority: ${String(e)}`)}}},IV=class{constructor(e,t){this.api=e,this.args=t}run(){let e=this.args.context,t=e.type;switch(t){case vI.TRANSACTION_CHECK:case vI.TRANSACTION_INFO:case vI.PLUGIN:case vI.EXTERNAL_PLUGIN:case vI.DYNAMIC_NETWORK:case vI.DYNAMIC_NETWORK_ICON:case vI.ENUM:case vI.TRUSTED_NAME:case vI.TOKEN:case vI.NFT:case vI.SAFE:case vI.SIGNER:return{subcontextCallbacks:[]};case vI.TRANSACTION_FIELD_DESCRIPTION:return{subcontextCallbacks:e.reference?this._getSubcontextsFromReference(e.reference):[]};case vI.PROXY_INFO:return{subcontextCallbacks:this._getSubcontextFromProxy(e)};default:throw Error(`Uncovered type: ${t}`)}}_getSubcontextsFromReference(e){let t=e.type;switch(t){case v_.TOKEN:case v_.NFT:return this._getSubcontextsFromTokenOrNftReference(e);case v_.ENUM:return this._getSubcontextsFromEnumReference(e);case v_.TRUSTED_NAME:return this._getSubcontextsFromTrustedNameReference(e);case v_.CALLDATA:return[];default:throw Error(`Uncovered reference type: ${t}`)}}_getSubcontextsFromTokenOrNftReference(e){if(void 0!==e.value){let t={chainId:this.args.subset.chainId,address:e.value},r=e.type===v_.TOKEN?vI.TOKEN:vI.NFT;return[()=>this.args.contextModule.getFieldContext(t,r)]}let t=[];if(void 0!==e.valuePath)for(let r of this.args.transactionParser.extractValue(this.args.subset,e.valuePath).orDefault([])){let n=tr(r.slice(Math.max(0,r.length-20))),s=e.type===v_.TOKEN?vI.TOKEN:vI.NFT;t.push(()=>this.args.contextModule.getFieldContext({chainId:this.args.subset.chainId,address:n},s))}return t}_getSubcontextsFromEnumReference(e){let t=[];if(!e.valuePath)return t;for(let r of this.args.transactionParser.extractValue(this.args.subset,e.valuePath).orDefault([])){let n=r[r.length-1];if(void 0===n)continue;let s=this.args.contextOptional.filter(e=>e.type===vI.ENUM).find(t=>t.value===n&&t.id===e.id);s&&t.push(()=>Promise.resolve(s))}return t}_getSubcontextsFromTrustedNameReference(e){let t=[];if(!e.valuePath)return t;for(let r of this.args.transactionParser.extractValue(this.args.subset,e.valuePath).orDefault([]))t.push(async()=>{let t=tr(r.slice(Math.max(0,r.length-20))),n=await this.api.sendCommand(new kQ);return tg(n)?await this.args.contextModule.getFieldContext({chainId:this.args.subset.chainId,address:t,challenge:n.data.challenge,types:e.types,sources:e.sources,deviceModelId:this.args.deviceModelId},vI.TRUSTED_NAME):{type:vI.ERROR,error:Error("Failed to get challenge")}});return t}_getSubcontextFromProxy(e){return[async()=>{let e=await this.api.sendCommand(new kQ);return tg(e)?void 0===this.args.subset.to?{type:vI.ERROR,error:Error("Failed to get proxy address")}:await this.args.contextModule.getFieldContext({chainId:this.args.subset.chainId,proxyAddress:this.args.subset.to,calldata:this.args.subset.data,deviceModelId:this.args.deviceModelId,challenge:e.data.challenge},vI.PROXY_INFO):{type:vI.ERROR,error:Error("Failed to get challenge")}}]}},Iq=class{constructor(e){this._args=e}run(){var e;let{parser:t,subset:r,context:n}=this._args,s=[];if(!n.reference||n.reference.type!==v_.CALLDATA||!n.reference.valuePath)throw Error("Invalid reference for nested call data. Expected a reference with type CALLDATA and a value path.");let{valuePath:o}=n.reference,a=t.extractValue(r,o).unsafeCoerce(),l=t.extractValue(r,n.reference.callee).unsafeCoerce(),u=n.reference.selector?t.extractValue(r,n.reference.selector).orDefault([]):[],c=n.reference.chainId?t.extractValue(r,n.reference.chainId).orDefault([]):[];for(let t=0;t<a.length;t++){let n=a[t],o=c[t],d=null==(e=l[t])?void 0:e.slice(Math.max(0,l[t].length-20)),f=u[t],h={data:n?tr(n):"0x",chainId:o?Number(o):r.chainId,to:d?tr(d):r.to,selector:f?tr(f):n?tr(n).slice(0,10):"0x"};s.push(h)}return{subsets:s}}},IG=class e{constructor(e,t,r=(e,t)=>new IV(e,t),n=(e,t)=>new IH(e,t),s=e=>new Iq(e)){this._api=e,this._args=t,this._buildSubcontextsTaskFactory=r,this._buildBaseContextsTaskFactory=n,this._preBuildNestedCallDataTaskFactory=s}async run(){var t;let{clearSignContexts:r,clearSigningType:n,clearSignContextsOptional:s}=await this._buildBaseContextsTaskFactory(this._api,this._args).run(),o=r.map(e=>{let{subcontextCallbacks:t}=this._buildSubcontextsTaskFactory(this._api,{context:e,contextOptional:s,contextModule:this._args.contextModule,subset:this._args.subset,transactionParser:this._args.parser,deviceModelId:this._args.deviceModelId}).run();return{context:e,subcontextCallbacks:t}}),a=[];for(let r of o)if(a.push(r),r.context.type===vI.TRANSACTION_FIELD_DESCRIPTION&&(null==(t=r.context.reference)?void 0:t.type)===v_.CALLDATA){let{subsets:t}=this._preBuildNestedCallDataTaskFactory({parser:this._args.parser,subset:this._args.subset,context:r.context}).run();for(let r of t){let{clearSignContexts:t}=await new e(this._api,{...this._args,transaction:void 0,subset:r},this._buildSubcontextsTaskFactory,this._buildBaseContextsTaskFactory,this._preBuildNestedCallDataTaskFactory).run();a.push(...t)}}return{clearSignContexts:a,clearSigningType:n}}},IW=class{constructor(e,t,r){this.typeName=e,this.name=t,this.size=r}},IK=class{constructor(e,t,r,n,s){this.typeName=e,this.rootType=t,this.rowType=r,this.count=n,this.levels=s}},IJ=class{constructor(e){this.typeName=e}},IZ=class{constructor(e){this.root=e}},IQ=class{constructor(e){this.length=e}},IX=class{constructor(e){this.data=e}},IY=class{constructor(e,t,r,n,s,o,a,l,u,c=(e,t)=>new IG(e,t)){this.api=e,this.contextModule=t,this.parser=r,this.transactionParser=n,this.transactionMapper=s,this.data=o,this.derivationPath=a,this.appConfig=l,this.from=u,this.buildFullContextFactory=c}async run(){var e;let t=this.parser.parse(this.data);if(t.isLeft())throw t.extract();let{types:r,domain:n,message:s}=t.unsafeCoerce(),o=this.api.getDeviceSessionState(),a=o.deviceModelId,l=await this.getTransactionChecks(a),u=rB,c={},d=this.getClearSignVersion(o);if(d.isJust()){let t,r=await this.api.sendCommand(new kQ);tg(r)&&(t=r.data.challenge);let n=(null==(e=this.data.domain.verifyingContract)?void 0:e.toLowerCase())||"0x0000000000000000000000000000000000000000",a=this.data.domain.chainId||0,l=s.filter(e=>e.value instanceof IX).map(e=>({path:e.path,value:e.value.data})),f=await this.contextModule.getTypedDataFilters({verifyingContract:n,chainId:a,version:d.extract(),schema:this.data.types,challenge:t,deviceModelId:o.deviceModelId,fieldsValues:l});"success"===f.type&&(u=rR(f),c=await this.getCalldatasContexts(o,f))}return{derivationPath:this.derivationPath,transactionChecks:l,types:r,domain:n,message:s,clearSignContext:u,calldatasContexts:c,deviceModelId:o.deviceModelId}}async getTransactionChecks(e){var t;if(!this.appConfig.web3ChecksEnabled)return;let r=await this.contextModule.getContexts({deviceModelId:e,data:this.data,from:this.from},[vI.TRANSACTION_CHECK]);if(r.length>0&&(null==(t=r[0])?void 0:t.type)===vI.TRANSACTION_CHECK)return r[0]}getClearSignVersion(e){return new Ij(e,this.appConfig).withMinVersionInclusive("1.10.0").excludeDeviceModel(rm.NANO_S).check()?new Ij(e,this.appConfig).withMinVersionInclusive("1.12.0").check()?rR("v2"):rR("v1"):rB}async getCalldatasContexts(e,t){let r={};for(let n in t.calldatas){let{subset:s}=t.calldatas[n],o=await this.buildFullContextFactory(this.api,{contextModule:this.contextModule,mapper:this.transactionMapper,parser:this.transactionParser,options:{},appConfig:this.appConfig,derivationPath:this.derivationPath,subset:s,deviceModelId:e.deviceModelId}).run();o.clearSigningType===kZ.EIP7730&&(r[n]=o.clearSignContexts)}return r}},I0=class{constructor(e){eY(this,"name","provideProxyInfo"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:42,p1:+!!this.args.isFirstChunk,p2:0}).addBufferToData(this.args.data).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}},I1=class{constructor(e){eY(this,"name","provideTokenInformation"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:10,p1:0,p2:0}).addHexaStringToData(this.args.payload).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>tp({data:{tokenIndex:new tc(e).extract8BitUInt()??0}}))}},I2=class{constructor(e){eY(this,"name","provideTrustedName"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:34,p1:+!!this.args.isFirstChunk,p2:0}).addBufferToData(this.args.data).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}},I3=class{constructor(e){eY(this,"name","provideWeb3Check"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:50,p1:0,p2:+!!this.args.isFirstChunk}).addBufferToData(this.args.payload).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}};var I8=((eP=I8||{}).Activation="activation",eP.DiscardedPath="discarded_path",eP.MessageInfo="message_info",eP.Datetime="datetime",eP.Raw="raw",eP.Amount="amount",eP.Token="token",eP.TrustedName="trusted-name",eP.CalldataInfo="calldata-info",eP.CalldataValue="calldata-value",eP.CalldataCallee="calldata-callee",eP.CalldataChainId="calldata-chain-id",eP.CalldataSelector="calldata-selector",eP.CalldataAmount="calldata-amount",eP.CalldataSpender="calldata-spender",eP),I6=((eC=I6||{})[eC.None=0]="None",eC[eC.Present=1]="Present",eC[eC.VerifyingContract=2]="VerifyingContract",eC);let I4={activation:0,discarded_path:1,message_info:15,"calldata-spender":244,"calldata-amount":245,"calldata-selector":246,"calldata-chain-id":247,"calldata-callee":248,"calldata-value":249,"calldata-info":250,"trusted-name":251,datetime:252,token:253,amount:254,raw:255},I5=class{constructor(e){eY(this,"name","sendEIP712Filtering"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){let e=new tl({cla:224,ins:30,p1:"discarded"in this.args&&this.args.discarded?1:0,p2:I4[this.args.type]});switch(this.args.type){case"message_info":e.encodeInLVFromAscii(this.args.displayName).add8BitUIntToData(this.args.filtersCount).encodeInLVFromHexa(this.args.signature);break;case"discarded_path":e.encodeInLVFromAscii(this.args.path);break;case"datetime":case"raw":e.encodeInLVFromAscii(this.args.displayName).encodeInLVFromHexa(this.args.signature);break;case"trusted-name":e.encodeInLVFromAscii(this.args.displayName).addHexaStringToData(this.args.typesAndSourcesPayload).encodeInLVFromHexa(this.args.signature);break;case"token":case"amount":"amount"===this.args.type&&e.encodeInLVFromAscii(this.args.displayName),e.add8BitUIntToData(this.args.tokenIndex).encodeInLVFromHexa(this.args.signature);break;case"calldata-info":e.add8BitUIntToData(this.args.calldataIndex).add8BitUIntToData(+!!this.args.valueFlag).add8BitUIntToData(this.args.calleeFlag).add8BitUIntToData(+!!this.args.chainIdFlag).add8BitUIntToData(+!!this.args.selectorFlag).add8BitUIntToData(+!!this.args.amountFlag).add8BitUIntToData(this.args.spenderFlag).encodeInLVFromHexa(this.args.signature);break;case"calldata-value":case"calldata-callee":case"calldata-chain-id":case"calldata-selector":case"calldata-amount":case"calldata-spender":e.add8BitUIntToData(this.args.calldataIndex).encodeInLVFromHexa(this.args.signature)}return e.build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}};var I9=((eO=I9||{})[eO.Name=0]="Name",eO[eO.Field=255]="Field",eO);let I7=class{constructor(e){eY(this,"name","sendEIP712StructDefinition"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){let e={cla:224,ins:26,p1:0,p2:this.args.command};if(0===this.args.command)return new tl(e).addAsciiStringToData(this.args.name).build();let t=new tl(e),r=this.constructTypeDescByte(this.args.type);if(t.add8BitUIntToData(r),this.getTypeCustomName(this.args.type).ifJust(e=>{t.encodeInLVFromAscii(e)}),this.getTypeSize(this.args.type).ifJust(e=>{t.add8BitUIntToData(e)}),this.args.type instanceof IK)for(let e of(t.add8BitUIntToData(this.args.type.levels.length),this.args.type.levels))e.caseOf({Just:e=>{t.add8BitUIntToData(1).add8BitUIntToData(e)},Nothing:()=>{t.add8BitUIntToData(0)}});return t.encodeInLVFromAscii(this.args.name).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}constructTypeDescByte(e){return(e instanceof IK)<<7|!!this.getTypeSize(e).isJust()<<6|this.getType(e)}getTypeSize(e){return e instanceof IK?this.getTypeSize(e.rootType):e instanceof IW?e.size:rB}getTypeCustomName(e){return e instanceof IK?this.getTypeCustomName(e.rootType):e instanceof IJ?rR(e.typeName):rB}getType(e){if(e instanceof IK)return this.getType(e.rootType);if(e instanceof IJ)return 0;switch(e.name){case"int":return 1;case"uint":return 2;case"address":return 3;case"bool":return 4;case"string":return 5;case"bytes":return e.size.isJust()?6:7}}};var _e=((eT=_e||{})[eT.ROOT=0]="ROOT",eT[eT.ARRAY=15]="ARRAY",eT[eT.FIELD=255]="FIELD",eT);let _t=class{constructor(e){eY(this,"name","sendEIP712StructImplem"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){let e={cla:224,ins:28,p1:255!=this.args.type||this.args.value.isLastChunk?0:1,p2:this.args.type};switch(this.args.type){case 0:return new tl(e).addAsciiStringToData(this.args.value).build();case 15:return new tl(e).add8BitUIntToData(this.args.value).build();case 255:return new tl(e).addBufferToData(this.args.value.data).build()}}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}},_r=class{constructor(e,t){this.api=e,this.args=t}async run(){if(this.args.type!==_e.FIELD)return await this.api.sendCommand(new _t(this.args));let e=tp({data:void 0}),t=new to(this.args.value.length+2).add16BitUIntToData(this.args.value.length).addBufferToData(this.args.value).build();for(let r=0;r<t.length&&tg(e=await this.api.sendCommand(new _t({type:_e.FIELD,value:{data:t.slice(r,r+ta),isLastChunk:r>=t.length-ta}})));r+=ta);return e}},_n=class{constructor(e){eY(this,"name","storeTransaction"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){let{serializedTransaction:e,isFirstChunk:t}=this.args;return new tl({cla:224,ins:4,p1:128*!t,p2:1}).addBufferToData(e).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}},_i=class{constructor(e){eY(this,"name","provideEnum"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:36,p1:+!!this.args.isFirstChunk,p2:0}).addBufferToData(this.args.data).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}};var _s=((eR=_s||{})[eR.CONFIGURATION=0]="CONFIGURATION",eR[eR.ICON=1]="ICON",eR);let _o=class{constructor(e){eY(this,"name","provideNetworkConfiguration"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:48,p1:+!!this.args.isFirstChunk,p2:this.args.configurationType}).addBufferToData(this.args.data).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}},_a=class{constructor(e){eY(this,"name","provideNFTInformation"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:20,p1:0,p2:0}).addHexaStringToData(this.args.payload).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}};var _l=((eB=_l||{})[eB.SAFE_DESCRIPTOR=0]="SAFE_DESCRIPTOR",eB[eB.SIGNER_DESCRIPTOR=1]="SIGNER_DESCRIPTOR",eB);let _u=class{constructor(e){eY(this,"name","provideSafeAccount"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:54,p1:+!!this.args.isFirstChunk,p2:this.args.type}).addBufferToData(this.args.data).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}},_c=class{constructor(e){eY(this,"name","provideTransactionFieldDescription"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:40,p1:+!!this.args.isFirstChunk,p2:0}).addBufferToData(this.args.data).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}},_d=class{constructor(e){eY(this,"name","provideTransactionInformation"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:38,p1:+!!this.args.isFirstChunk,p2:0}).addBufferToData(this.args.data).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}},_f=class{constructor(e){eY(this,"name","setExternalPlugin"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:18,p1:0,p2:0}).addHexaStringToData(this.args.payload).addHexaStringToData(this.args.signature??"").build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}},_h=class{constructor(e){eY(this,"name","setPlugin"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){return new tl({cla:224,ins:22,p1:0,p2:0}).addHexaStringToData(this.args.payload).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefault(tp({data:void 0}))}},_p=(eY(N5=class{static getBufferFromPayload(e){let t=tt(e);return null===t||0===t.length?null:new to(t.length+this.PAYLOAD_LENGTH_BYTES).add16BitUIntToData(t.length).addBufferToData(t).build()}},"PAYLOAD_LENGTH_BYTES",2),N5),_g=class{constructor(e,t){this.api=e,this.args=t}async run(){let{data:e,commandFactory:t}=this.args,r=new to(e.length).addBufferToData(e).build();for(let e=0;e<r.length;e+=ta){let n=e+ta>=r.length,s=await this.api.sendCommand(t({chunkedData:r.slice(e,e+ta),isFirstChunk:0===e}));if(!tg(s))return s;if(n)return tp({data:s.data})}throw new td("No result")}},_m=class{constructor(e,t){this.api=e,this.args=t}async run(){let{payload:e,withPayloadLength:t=!0}=this.args,r=null;return(r=t?_p.getBufferFromPayload(e):tt(e))?new _g(this.api,{data:r,commandFactory:this.args.commandFactory}).run():tp({error:new td("Invalid payload")})}};class _y{constructor(e,t,r=(e,t)=>new _m(e,t)){this._api=e,this._args=t,this._sendPayloadInChunksTaskFactory=r}async run(){let{type:e,payload:t,certificate:r}=this._args.context;switch(r&&await this._api.sendCommand(new rE({keyUsage:r.keyUsageNumber,certificate:r.payload})),e){case vI.PLUGIN:return await this._api.sendCommand(new _h({payload:t}));case vI.EXTERNAL_PLUGIN:return await this._api.sendCommand(new _f({payload:t}));case vI.NFT:return await this._api.sendCommand(new _a({payload:t}));case vI.TOKEN:return await this._api.sendCommand(new I1({payload:t}));case vI.TRANSACTION_INFO:return await this._sendPayloadInChunksTaskFactory(this._api,{payload:t,commandFactory:e=>new _d({data:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run();case vI.TRUSTED_NAME:return this._sendPayloadInChunksTaskFactory(this._api,{payload:t,commandFactory:e=>new I2({data:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run();case vI.ENUM:return this._sendPayloadInChunksTaskFactory(this._api,{payload:t,commandFactory:e=>new _i({data:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run();case vI.TRANSACTION_FIELD_DESCRIPTION:return this._sendPayloadInChunksTaskFactory(this._api,{payload:t,commandFactory:e=>new _c({data:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run();case vI.TRANSACTION_CHECK:return this._sendPayloadInChunksTaskFactory(this._api,{payload:t,commandFactory:e=>new I3({payload:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run();case vI.PROXY_INFO:return this._sendPayloadInChunksTaskFactory(this._api,{payload:t,commandFactory:e=>new I0({data:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run();case vI.DYNAMIC_NETWORK:return this._sendPayloadInChunksTaskFactory(this._api,{payload:t,commandFactory:e=>new _o({data:e.chunkedData,isFirstChunk:e.isFirstChunk,configurationType:_s.CONFIGURATION})}).run();case vI.DYNAMIC_NETWORK_ICON:return this._sendPayloadInChunksTaskFactory(this._api,{payload:t,commandFactory:e=>new _o({data:e.chunkedData,isFirstChunk:e.isFirstChunk,configurationType:_s.ICON}),withPayloadLength:!1}).run();case vI.SAFE:return this._sendPayloadInChunksTaskFactory(this._api,{payload:t,commandFactory:e=>new _u({data:e.chunkedData,isFirstChunk:e.isFirstChunk,type:_l.SAFE_DESCRIPTOR})}).run();case vI.SIGNER:return this._sendPayloadInChunksTaskFactory(this._api,{payload:t,commandFactory:e=>new _u({data:e.chunkedData,isFirstChunk:e.isFirstChunk,type:_l.SIGNER_DESCRIPTOR})}).run();default:return tp({error:new td(`The context type [${e}] is not covered`)})}}}let _b=class{constructor(e,t,r=(e,t)=>new _y(e,t),n=(e,t)=>new _g(e,t)){this._api=e,this._args=t,this._provideContextTaskFactory=r,this._sendCommandInChunksTaskFactory=n}async run(){let e=!1;for(let{context:t,subcontextCallbacks:r}of this._args.contexts){for(let e of r){let t=await e();t.type!==vI.ERROR&&await this._provideContextTaskFactory(this._api,{context:t}).run()}if(t.type===vI.PROXY_INFO)continue;if(!e&&void 0!==this._args.serializedTransaction&&t.type===vI.TRANSACTION_INFO){e=!0;let t=k$.splitPath(this._args.derivationPath),r=new to;r.add8BitUIntToData(t.length),t.forEach(e=>{r.add32BitUIntToData(e)}),r.addBufferToData(this._args.serializedTransaction),await this._sendCommandInChunksTaskFactory(this._api,{data:r.build(),commandFactory:e=>new _n({serializedTransaction:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run()}let n=await this._provideContextTaskFactory(this._api,{context:t}).run();if(!tg(n))return rM(n)}return rU(void 0)}};class _v{constructor(e,t,r,n=e=>new _b(this.api,e)){for(let s of(eY(this,"chainId",rB),eY(this,"calldataMetadatas",{}),this.api=e,this.contextModule=t,this.args=r,this.provideContextFactory=n,this.args.domain))if("chainId"===s.path&&s.value instanceof IX){let e=BigInt(tr(s.value.data));e<=Number.MAX_SAFE_INTEGER&&(this.chainId=rR(Number(e)));break}}async run(){var e;this.args.transactionChecks&&await this.provideContext(this.args.transactionChecks);let t=null==(e=this.args.clearSignContext.extract())?void 0:e.proxy;void 0!==t&&await this.provideContext(t);let r=tp({data:void 0});for(let[e,t]of Object.entries(this.args.types).sort(([e],[t])=>e.localeCompare(t))){let r=await this.api.sendCommand(new I7({command:I9.Name,name:e}));if(!tg(r))return r;for(let[e,r]of Object.entries(t)){let t=await this.api.sendCommand(new I7({command:I9.Field,name:e,type:r}));if(!tg(t))return t}}if(this.args.clearSignContext.isJust()){let e=await this.api.sendCommand(new I5({type:I8.Activation}));if(!tg(e))return e}for(let e of this.args.domain){let t=await this.getImplementationTask(e).run();if(!tg(t))return t}if(this.args.clearSignContext.isJust()){let e=this.args.clearSignContext.extract(),t=await this.api.sendCommand(new I5({type:I8.MessageInfo,displayName:e.messageInfo.displayName,filtersCount:e.messageInfo.filtersCount,signature:e.messageInfo.signature}));if(!tg(t))return t}let n={indexes:{},nextIndex:0};for(let e of this.args.message){let t=await this.provideTokenInformation(e,n);if(t.isJust())return t.extract();let r=await this.provideTrustedName(e);if(r.isJust())return r.extract();let s=await this.filterValue(e,n);if(s.isJust()&&!tg(s.extract()))return s.extract();let o=await this.getImplementationTask(e).run();if(!tg(o))return o;if(await this.tryProvideTransactionContext(),this.args.clearSignContext.isJust()&&e.value instanceof IQ&&0===e.value.length)for(let t of Object.entries(this.args.clearSignContext.extract().filters).filter(([t])=>t.startsWith(`${e.path}.[]`)).map(([,e])=>e)){let e=await this.api.sendCommand(new I5({type:I8.DiscardedPath,path:t.path}));if(!tg(e))return e;let r=await this.provideFiltering(t,n,!0);if(!tg(r))return r}}return r}async provideContext({type:e,payload:t,certificate:r}){switch(r&&await this.api.sendCommand(new rE({keyUsage:r.keyUsageNumber,certificate:r.payload})),e){case vI.TRANSACTION_CHECK:await new _m(this.api,{payload:t,commandFactory:e=>new I3({payload:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run();break;case vI.PROXY_INFO:await new _m(this.api,{payload:t,commandFactory:e=>new I0({data:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run();break;case vI.TOKEN:case vI.NFT:case vI.TRUSTED_NAME:case vI.PLUGIN:case vI.EXTERNAL_PLUGIN:case vI.ENUM:case vI.TRANSACTION_INFO:case vI.TRANSACTION_FIELD_DESCRIPTION:case vI.DYNAMIC_NETWORK:case vI.DYNAMIC_NETWORK_ICON:case vI.SAFE:case vI.SIGNER:throw Error(`Context type ${e} not supported in EIP712 messages`);default:throw Error(`Unhandled context type ${e}`)}}getImplementationTask(e){return e.value instanceof IZ?new _r(this.api,{type:_e.ROOT,value:e.value.root}):e.value instanceof IQ?new _r(this.api,{type:_e.ARRAY,value:e.value.length}):new _r(this.api,{type:_e.FIELD,value:e.value.data})}async provideTokenInformation(e,t){if(this.args.clearSignContext.isJust()){let r=this.args.clearSignContext.extract().filters[e.path];if(void 0!==r&&("amount"===r.type||"token"===r.type)&&void 0===t.indexes[r.tokenIndex]){let e=r.tokenIndex,n=this.args.clearSignContext.extract().tokens[e];if(void 0===n)return rB;let s=await this.api.sendCommand(new I1({payload:n}));if(!tg(s))return rC.of(s);let{tokenIndex:o}=s.data;t.nextIndex=(o+1)%5,255===Number(e)&&(o=255),t.indexes[Number(e)]=o}}return rB}async provideTrustedName(e){if(this.args.clearSignContext.isJust()&&this.chainId.isJust()){let t=this.args.clearSignContext.extract(),r=t.filters[e.path],n=t.trustedNamesAddresses[e.path];if(void 0!==r&&"trusted-name"===r.type&&void 0!==n){let e=await this.api.sendCommand(new kQ);if(!tg(e))return rR(e);let t=await this.contextModule.getFieldContext({chainId:this.chainId.extract(),address:n,challenge:e.data.challenge,types:r.types,sources:r.sources,deviceModelId:this.args.deviceModelId},vI.TRUSTED_NAME);if(t.type===vI.TRUSTED_NAME){t.certificate&&await this.api.sendCommand(new rE({keyUsage:t.certificate.keyUsageNumber,certificate:t.certificate.payload}));let e=await new _m(this.api,{payload:t.payload,commandFactory:e=>new I2({data:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run();if(!tg(e))return rR(e)}}}return rB}async filterValue(e,t){if(this.args.clearSignContext.isJust()){let r=this.args.clearSignContext.extract().filters[e.path];if(void 0===r)return rB;let n=await this.provideFiltering(r,t,!1);return rC.of(n)}return rB}async provideFiltering(e,t,r){switch(e.type){case"trusted-name":return await this.api.sendCommand(new I5({type:I8.TrustedName,discarded:r,displayName:e.displayName,typesAndSourcesPayload:e.typesAndSourcesPayload,signature:e.signature}));case"datetime":return await this.api.sendCommand(new I5({type:I8.Datetime,discarded:r,displayName:e.displayName,signature:e.signature}));case"raw":return await this.api.sendCommand(new I5({type:I8.Raw,discarded:r,displayName:e.displayName,signature:e.signature}));case"token":return this.sanitizeDeviceIndex(e.tokenIndex,t),await this.api.sendCommand(new I5({type:I8.Token,discarded:r,tokenIndex:t.indexes[e.tokenIndex],signature:e.signature}));case"amount":return this.sanitizeDeviceIndex(e.tokenIndex,t),await this.api.sendCommand(new I5({type:I8.Amount,discarded:r,displayName:e.displayName,tokenIndex:t.indexes[e.tokenIndex],signature:e.signature}));case"calldata-value":return await this.provideCalldataInfos(e.calldataIndex),await this.api.sendCommand(new I5({type:I8.CalldataValue,discarded:r,calldataIndex:e.calldataIndex,signature:e.signature}));case"calldata-callee":return await this.provideCalldataInfos(e.calldataIndex),await this.api.sendCommand(new I5({type:I8.CalldataCallee,discarded:r,calldataIndex:e.calldataIndex,signature:e.signature}));case"calldata-spender":return await this.provideCalldataInfos(e.calldataIndex),await this.api.sendCommand(new I5({type:I8.CalldataSpender,discarded:r,calldataIndex:e.calldataIndex,signature:e.signature}));case"calldata-chain-id":return await this.provideCalldataInfos(e.calldataIndex),await this.api.sendCommand(new I5({type:I8.CalldataChainId,discarded:r,calldataIndex:e.calldataIndex,signature:e.signature}));case"calldata-selector":return await this.provideCalldataInfos(e.calldataIndex),await this.api.sendCommand(new I5({type:I8.CalldataSelector,discarded:r,calldataIndex:e.calldataIndex,signature:e.signature}));case"calldata-amount":return await this.provideCalldataInfos(e.calldataIndex),await this.api.sendCommand(new I5({type:I8.CalldataAmount,discarded:r,calldataIndex:e.calldataIndex,signature:e.signature}));default:throw Error(`ProvideEIP712ContextTask/provideFiltering - Unhandled filter ${e}`)}}async provideCalldataInfos(e){if(this.args.clearSignContext.isJust()){if(void 0!==this.calldataMetadatas[e])return this.calldataMetadatas[e].remainingFilters--,rB;let t=this.args.clearSignContext.extract().calldatas[e];if(void 0===t)return rB;let r=[t.filter.valueFlag,t.filter.calleeFlag===kt.Present,t.filter.chainIdFlag,t.filter.selectorFlag,t.filter.amountFlag,t.filter.spenderFlag===kt.Present].filter(e=>e).length;return this.calldataMetadatas[e]={remainingFilters:r-1,contexts:this.args.calldatasContexts[e]},rC.of(await this.api.sendCommand(new I5({type:I8.CalldataInfo,discarded:!1,calldataIndex:e,valueFlag:t.filter.valueFlag,calleeFlag:this.mapCalldataPresence(t.filter.calleeFlag),chainIdFlag:t.filter.chainIdFlag,selectorFlag:t.filter.selectorFlag,amountFlag:t.filter.amountFlag,spenderFlag:this.mapCalldataPresence(t.filter.spenderFlag),signature:t.filter.signature})))}return rB}async tryProvideTransactionContext(){for(let e in this.calldataMetadatas){let t=this.calldataMetadatas[e];0===t.remainingFilters&&(void 0!==t.contexts&&await this.provideContextFactory({contexts:t.contexts,derivationPath:this.args.derivationPath}).run(),delete this.calldataMetadatas[e])}}mapCalldataPresence(e){switch(e){case kt.None:return I6.None;case kt.Present:return I6.Present;case kt.VerifyingContract:return I6.VerifyingContract;default:throw Error(`Unhandled presence ${e}`)}}sanitizeDeviceIndex(e,t){void 0===t.indexes[e]&&(t.indexes[e]=t.nextIndex,t.nextIndex=(t.nextIndex+1)%5)}}function _x(e,t,r){for(let n in t){let s=t[n],o=r?r[n]:null;o&&function(e,t,r){let n=t.split("|").map(e=>e.trim());for(let r=0;r<n.length;r++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}let s=Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=e,s}(s,o,n),Object.defineProperty(e,n,{enumerable:!0,value:s,writable:!1})}}function _w(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(_w).join(", ")+" ]";if(e instanceof Uint8Array){let t="0123456789abcdef",r="0x";for(let n=0;n<e.length;n++)r+=t[e[n]>>4],r+=t[15&e[n]];return r}if("object"==typeof e&&"function"==typeof e.toJSON)return _w(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let t=Object.keys(e);return t.sort(),"{ "+t.map(t=>`${_w(t)}: ${_w(e[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function _E(e,t,r,n){if(!e)throw function(e,t,r){let n,s=e;{let n=[];if(r){if("message"in r||"code"in r||"name"in r)throw Error(`value will overwrite populated values: ${_w(r)}`);for(let e in r){if("shortMessage"===e)continue;let t=r[e];n.push(e+"="+_w(t))}}n.push(`code=${t}`),n.push("version=6.14.1"),n.length&&(e+=" ("+n.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":n=TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=RangeError(e);break;default:n=Error(e)}return _x(n,{code:t}),r&&Object.assign(n,r),null==n.shortMessage&&_x(n,{shortMessage:s}),n}(t,r,n)}function _A(e,t,r,n){_E(e,t,"INVALID_ARGUMENT",{argument:r,value:n})}function _S(e,t,r){if(e instanceof Uint8Array)return r?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let t=new Uint8Array((e.length-2)/2),r=2;for(let n=0;n<t.length;n++)t[n]=parseInt(e.substring(r,r+2),16),r+=2;return t}_A(!1,"invalid BytesLike value",t||"value",e)}function _k(e,t){return _S(e,t,!1)}function _I(e,t){return _S(e,t,!0)}function __(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||"number"==typeof t&&e.length!==2+2*t||!0===t&&e.length%2!=0)}function _P(e){return __(e,!0)||e instanceof Uint8Array}["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw Error("bad");if("NFD"===t){let e=String.fromCharCode(233).normalize("NFD"),t=String.fromCharCode(101,769);if(e!==t)throw Error("broken")}e.push(t)}catch{}return e},[]);let _C="0123456789abcdef";function _O(e){let t=_k(e),r="0x";for(let e=0;e<t.length;e++){let n=t[e];r+=_C[(240&n)>>4]+_C[15&n]}return r}function _T(e){return"0x"+e.map(e=>_O(e).substring(2)).join("")}function _R(e){return __(e,!0)?(e.length-2)/2:_k(e).length}function _B(e,t){let r=_k(e);_E(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});let n=new Uint8Array(t);return n.fill(0),n.set(r,t-r.length),_O(n)}let _N=BigInt(0),_D=BigInt(1);function _L(e,t){switch(typeof e){case"bigint":return e;case"number":return _A(Number.isInteger(e),"underflow",t||"value",e),_A(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(r){_A(!1,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}_A(!1,"invalid BigNumberish value",t||"value",e)}function _M(e,t){let r=_L(e,t);return _E(r>=_N,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),r}function _U(e,t){switch(typeof e){case"bigint":return _A(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),Number(e);case"number":return _A(Number.isInteger(e),"underflow",t||"value",e),_A(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),e;case"string":try{if(""===e)throw Error("empty string");return _U(BigInt(e),t)}catch(r){_A(!1,`invalid numeric string: ${r.message}`,t||"value",e)}}_A(!1,"invalid numeric value",t||"value",e)}function _F(e,t){let r=_M(e,"value").toString(16);if(null==t)r.length%2&&(r="0"+r);else{let n=_U(t,"width");for(_E(2*n>=r.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<2*n;)r="0"+r}return"0x"+r}function _j(e){let t=_M(e,"value");if(t===_N)return new Uint8Array([]);let r=t.toString(16);r.length%2&&(r="0"+r);let n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){let t=2*e;n[e]=parseInt(r.substring(t,t+2),16)}return n}function _z(e,t,r){let n=0;for(let s=0;s<r;s++)n=256*n+e[t+s];return n}function _$(e,t,r,n){let s=[];for(;r<t+1+n;){let o=_H(e,r);s.push(o.result),_E((r+=o.consumed)<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:e,length:n,offset:t})}return{consumed:1+n,result:s}}function _H(e,t){_E(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});let r=t=>{_E(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){let n=e[t]-247;r(t+1+n);let s=_z(e,t+1,n);return r(t+1+n+s),_$(e,t,t+1+n,n+s)}if(e[t]>=192){let n=e[t]-192;return r(t+1+n),_$(e,t,t+1,n)}if(e[t]>=184){let n=e[t]-183;r(t+1+n);let s=_z(e,t+1,n);r(t+1+n+s);let o=_O(e.slice(t+1+n,t+1+n+s));return{consumed:1+n+s,result:o}}if(e[t]>=128){let n=e[t]-128;r(t+1+n);let s=_O(e.slice(t+1,t+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:function(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}(e[t])}}function _V(e){let t=_k(e,"data"),r=_H(t,0);return _A(r.consumed===t.length,"unexpected junk after rlp payload","data",e),r.result}function _q(e){let t=[];for(;e;)t.unshift(255&e),e>>=8;return t}let _G="0123456789abcdef";function _W(e){let t="0x";for(let r of function e(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(t){r=r.concat(e(t))}),r.length<=55)return r.unshift(192+r.length),r;let n=_q(r.length);return n.unshift(247+n.length),n.concat(r)}let r=Array.prototype.slice.call(_k(t,"object"));if(1===r.length&&r[0]<=127)return r;if(r.length<=55)return r.unshift(128+r.length),r;let n=_q(r.length);return n.unshift(183+n.length),n.concat(r)}(e))t+=_G[r>>4],t+=_G[15&r];return t}function _K(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function _J(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function _Z(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function _Q(e,t){_J(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}let _X="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,_Y=e=>e instanceof Uint8Array,_0=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),_1=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),_2=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function _3(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),!_Y(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}let _8=class{clone(){return this._cloneInto()}};function _6(e){let t=t=>e().update(_3(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function _4(e=32){if(_X&&"function"==typeof _X.getRandomValues)return _X.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}let _5=class extends _8{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");_K(e.outputLen),_K(e.blockLen)}(e);let r=_3(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,s=new Uint8Array(n);s.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return _Z(this),this.iHash.update(e),this}digestInto(e){_Z(this),_J(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:s,blockLen:o,outputLen:a}=this;return e.finished=n,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},_9=(e,t,r)=>new _5(e,t).update(r).digest();_9.create=(e,t)=>new _5(e,t);let _7=class extends _8{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_1(this.buffer)}update(e){_Z(this);let{view:t,buffer:r,blockLen:n}=this,s=(e=_3(e)).length;for(let o=0;o<s;){let a=Math.min(n-this.pos,s-o);if(a===n){let t=_1(e);for(;n<=s-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){_Z(this),_Q(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:s}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let s=BigInt(32),o=BigInt(0xffffffff),a=Number(r>>s&o),l=Number(r&o),u=4*!!n,c=4*!n;e.setUint32(t+u,a,n),e.setUint32(t+c,l,n)})(r,n-8,BigInt(8*this.length),s),this.process(r,0);let a=_1(e),l=this.outputLen;if(l%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=l/4,c=this.get();if(u>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)a.setUint32(4*e,c[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%t&&e.buffer.set(r),e}},Pe=(e,t,r)=>e&t^~e&r,Pt=(e,t,r)=>e&t^e&r^t&r,Pr=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),Pn=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),Pi=new Uint32Array(64),Ps=class extends _7{constructor(){super(64,32,8,!1),this.A=0|Pn[0],this.B=0|Pn[1],this.C=0|Pn[2],this.D=0|Pn[3],this.E=0|Pn[4],this.F=0|Pn[5],this.G=0|Pn[6],this.H=0|Pn[7]}get(){let{A:e,B:t,C:r,D:n,E:s,F:o,G:a,H:l}=this;return[e,t,r,n,s,o,a,l]}set(e,t,r,n,s,o,a,l){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|s,this.F=0|o,this.G=0|a,this.H=0|l}process(e,t){for(let r=0;r<16;r++,t+=4)Pi[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=Pi[e-15],r=Pi[e-2],n=_2(t,7)^_2(t,18)^t>>>3,s=_2(r,17)^_2(r,19)^r>>>10;Pi[e]=s+Pi[e-7]+n+Pi[e-16]|0}let{A:r,B:n,C:s,D:o,E:a,F:l,G:u,H:c}=this;for(let e=0;e<64;e++){let t=c+(_2(a,6)^_2(a,11)^_2(a,25))+Pe(a,l,u)+Pr[e]+Pi[e]|0,d=(_2(r,2)^_2(r,13)^_2(r,22))+Pt(r,n,s)|0;c=u,u=l,l=a,a=o+t|0,o=s,s=n,n=r,r=t+d|0}r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,s,o,a,l,u,c)}roundClean(){Pi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Po=_6(()=>new Ps),Pa=BigInt(0x100000000-1),Pl=BigInt(32);function Pu(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){let{h:o,l:a}=function(e,t=!1){return t?{h:Number(e&Pa),l:Number(e>>Pl&Pa)}:{h:0|Number(e>>Pl&Pa),l:0|Number(e&Pa)}}(e[s],t);[r[s],n[s]]=[o,a]}return[r,n]}let Pc=(e,t,r)=>e<<r|t>>>32-r,Pd=(e,t,r)=>t<<r|e>>>32-r,Pf=(e,t,r)=>t<<r-32|e>>>64-r,Ph=(e,t,r)=>e<<r-32|t>>>64-r,Pp={split:Pu,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,add:function(e,t,r,n){let s=(t>>>0)+(n>>>0);return{h:e+r+(s/0x100000000|0)|0,l:0|s}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,s)=>t+r+n+s+(e/0x100000000|0)|0,add5H:(e,t,r,n,s,o)=>t+r+n+s+o+(e/0x100000000|0)|0,add5L:(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0)},[Pg,Pm]=Pp.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Py=new Uint32Array(80),Pb=new Uint32Array(80),Pv=class extends _7{constructor(){super(128,64,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:c,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:m}=this;return[e,t,r,n,s,o,a,l,u,c,d,f,h,p,g,m]}set(e,t,r,n,s,o,a,l,u,c,d,f,h,p,g,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|s,this.Cl=0|o,this.Dh=0|a,this.Dl=0|l,this.Eh=0|u,this.El=0|c,this.Fh=0|d,this.Fl=0|f,this.Gh=0|h,this.Gl=0|p,this.Hh=0|g,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)Py[r]=e.getUint32(t),Pb[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|Py[e-15],r=0|Pb[e-15],n=Pp.rotrSH(t,r,1)^Pp.rotrSH(t,r,8)^Pp.shrSH(t,r,7),s=Pp.rotrSL(t,r,1)^Pp.rotrSL(t,r,8)^Pp.shrSL(t,r,7),o=0|Py[e-2],a=0|Pb[e-2],l=Pp.rotrSH(o,a,19)^Pp.rotrBH(o,a,61)^Pp.shrSH(o,a,6),u=Pp.rotrSL(o,a,19)^Pp.rotrBL(o,a,61)^Pp.shrSL(o,a,6),c=Pp.add4L(s,u,Pb[e-7],Pb[e-16]),d=Pp.add4H(c,n,l,Py[e-7],Py[e-16]);Py[e]=0|d,Pb[e]=0|c}let{Ah:r,Al:n,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:c,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:m,Hh:y,Hl:b}=this;for(let e=0;e<80;e++){let t=Pp.rotrSH(d,f,14)^Pp.rotrSH(d,f,18)^Pp.rotrBH(d,f,41),v=Pp.rotrSL(d,f,14)^Pp.rotrSL(d,f,18)^Pp.rotrBL(d,f,41),x=d&h^~d&g,w=f&p^~f&m,E=Pp.add5L(b,v,w,Pm[e],Pb[e]),A=Pp.add5H(E,y,t,x,Pg[e],Py[e]),S=0|E,k=Pp.rotrSH(r,n,28)^Pp.rotrBH(r,n,34)^Pp.rotrBH(r,n,39),I=Pp.rotrSL(r,n,28)^Pp.rotrBL(r,n,34)^Pp.rotrBL(r,n,39),_=r&s^r&a^s&a,P=n&o^n&l^o&l;y=0|g,b=0|m,g=0|h,m=0|p,h=0|d,p=0|f,({h:d,l:f}=Pp.add(0|u,0|c,0|A,0|S)),u=0|a,c=0|l,a=0|s,l=0|o,s=0|r,o=0|n;let C=Pp.add3L(S,I,P);r=Pp.add3H(C,A,k,_),n=0|C}({h:r,l:n}=Pp.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:o}=Pp.add(0|this.Bh,0|this.Bl,0|s,0|o)),({h:a,l:l}=Pp.add(0|this.Ch,0|this.Cl,0|a,0|l)),({h:u,l:c}=Pp.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h:d,l:f}=Pp.add(0|this.Eh,0|this.El,0|d,0|f)),({h:h,l:p}=Pp.add(0|this.Fh,0|this.Fl,0|h,0|p)),({h:g,l:m}=Pp.add(0|this.Gh,0|this.Gl,0|g,0|m)),({h:y,l:b}=Pp.add(0|this.Hh,0|this.Hl,0|y,0|b)),this.set(r,n,s,o,a,l,u,c,d,f,h,p,g,m,y,b)}roundClean(){Py.fill(0),Pb.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Px=_6(()=>new Pv),Pw=function(){if("u">typeof self)return self;if("u">typeof window)return window;if("u">typeof ea)return ea;throw Error("unable to locate global object")}();Pw.crypto||Pw.msCrypto;let[PE,PA,PS]=[[],[],[]],Pk=BigInt(0),PI=BigInt(1),P_=BigInt(2),PP=BigInt(7),PC=BigInt(256),PO=BigInt(113);for(let e=0,t=PI,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],PE.push(2*(5*n+r)),PA.push((e+1)*(e+2)/2%64);let s=Pk;for(let e=0;e<7;e++)(t=(t<<PI^(t>>PP)*PO)%PC)&P_&&(s^=PI<<(PI<<BigInt(e))-PI);PS.push(s)}let[PT,PR]=Pu(PS,!0),PB=(e,t,r)=>r>32?Pf(e,t,r):Pc(e,t,r),PN=(e,t,r)=>r>32?Ph(e,t,r):Pd(e,t,r),PD=class e extends _8{constructor(e,t,r,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,_K(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=_0(this.state)}keccak(){(function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,s=(t+2)%10,o=r[s],a=r[s+1],l=PB(o,a,1)^r[n],u=PN(o,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=l,e[t+r+1]^=u}let t=e[2],s=e[3];for(let r=0;r<24;r++){let n=PA[r],o=PB(t,s,n),a=PN(t,s,n),l=PE[r];t=e[l],s=e[l+1],e[l]=o,e[l+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=PT[n],e[1]^=PR[n]}r.fill(0)})(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){_Z(this);let{blockLen:t,state:r}=this,n=(e=_3(e)).length;for(let s=0;s<n;){let o=Math.min(t-this.pos,n-s);for(let t=0;t<o;t++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){_Z(this,!1),_J(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,s=e.length;n<s;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,s-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return _K(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_Q(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:s,rounds:o,enableXOF:a}=this;return t||(t=new e(r,n,s,a,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}},PL=_6(()=>new PD(136,1,32)),PM=!1,PU=function(e){return PL(e)},PF=PU;function Pj(e){let t=_k(e,"data");return _O(PF(t))}Pj._=PU,Pj.lock=function(){PM=!0},Pj.register=function(e){if(PM)throw TypeError("keccak256 is locked");PF=e},Object.freeze(Pj);let Pz=function(e){return(function(e){switch(e){case"sha256":return Po.create();case"sha512":return Px.create()}_A(!1,"invalid hashing algorithm name","algorithm",e)})("sha256").update(e).digest()},P$=Pz,PH=!1;function PV(e){let t=_k(e,"data");return _O(P$(t))}PV._=Pz,PV.lock=function(){PH=!0},PV.register=function(e){if(PH)throw Error("sha256 is locked");P$=e},Object.freeze(PV),Object.freeze(PV);let Pq=BigInt(0),PG=BigInt(1),PW=BigInt(2),PK=e=>e instanceof Uint8Array,PJ=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function PZ(e){if(!PK(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=PJ[e[r]];return t}function PQ(e){let t=e.toString(16);return 1&t.length?`0${t}`:t}function PX(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function PY(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,s=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(s)||s<0)throw Error("Invalid byte sequence");r[t]=s}return r}function P0(e){return PX(PZ(e))}function P1(e){if(!PK(e))throw Error("Uint8Array expected");return PX(PZ(Uint8Array.from(e).reverse()))}function P2(e,t){return PY(e.toString(16).padStart(2*t,"0"))}function P3(e,t){return P2(e,t).reverse()}function P8(e,t,r){let n;if("string"==typeof t)try{n=PY(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(PK(t))n=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let s=n.length;if("number"==typeof r&&s!==r)throw Error(`${e} expected ${r} bytes, got ${s}`);return n}function P6(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!PK(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}let P4=e=>(PW<<BigInt(e-1))-PG,P5=e=>new Uint8Array(e),P9=e=>Uint8Array.from(e);function P7(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=P5(e),s=P5(e),o=0,a=()=>{n.fill(1),s.fill(0),o=0},l=(...e)=>r(s,n,...e),u=(e=P5())=>{s=l(P9([0]),e),n=l(),0!==e.length&&(s=l(P9([1]),e),n=l())},c=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=l()).slice();r.push(t),e+=n.length}return P6(...r)};return(e,t)=>{let r;for(a(),u(e);!(r=t(c()));)u();return a(),r}}let Ce={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Ct(e,t,r={}){let n=(t,r,n)=>{let s=Ce[r];if("function"!=typeof s)throw Error(`Invalid validator "${r}", expected function`);let o=e[t];if(!(n&&void 0===o)&&!s(o,e))throw Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}let Cr=Object.freeze(Object.defineProperty({__proto__:null,bitGet:function(e,t){return e>>BigInt(t)&PG},bitLen:function(e){let t;for(t=0;e>Pq;e>>=PG,t+=1);return t},bitMask:P4,bitSet:(e,t,r)=>e|(r?PG:Pq)<<BigInt(t),bytesToHex:PZ,bytesToNumberBE:P0,bytesToNumberLE:P1,concatBytes:P6,createHmacDrbg:P7,ensureBytes:P8,equalBytes:function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},hexToBytes:PY,hexToNumber:PX,numberToBytesBE:P2,numberToBytesLE:P3,numberToHexUnpadded:PQ,numberToVarBytesBE:function(e){return PY(PQ(e))},utf8ToBytes:function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))},validateObject:Ct},Symbol.toStringTag,{value:"Module"})),Cn=BigInt(0),Ci=BigInt(1),Cs=BigInt(2),Co=BigInt(3),Ca=BigInt(4),Cl=BigInt(5),Cu=BigInt(8);function Cc(e,t){let r=e%t;return r>=Cn?r:t+r}function Cd(e,t,r){let n=e;for(;t-- >Cn;)n*=n,n%=r;return n}function Cf(e,t){if(e===Cn||t<=Cn)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Cc(e,t),n=t,s=Cn,o=Ci;for(;r!==Cn;){let e=n/r,t=n%r,a=s-o*e;n=r,r=t,s=o,o=a}if(n!==Ci)throw Error("invert: does not exist");return Cc(s,t)}BigInt(9),BigInt(16);let Ch=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Cp(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Cg(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function Cm(e){let t=Cg(e);return t+Math.ceil(t/2)}let Cy=BigInt(0),Cb=BigInt(1);function Cv(e){return Ct(e.Fp,Ch.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Ct(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Cp(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}let{bytesToNumberBE:Cx,hexToBytes:Cw}=Cr,CE={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=CE;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Cx(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=CE,r="string"==typeof e?Cw(e):e;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:s,l:o}=CE._parseInt(r.subarray(2)),{d:a,l:l}=CE._parseInt(o);if(l.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:a}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),s=t(r(e.r)),o=n.length/2,a=s.length/2,l=r(o),u=r(a);return`30${r(a+o+4)}02${u}${s}02${l}${n}`}},CA=BigInt(0),CS=BigInt(1);BigInt(2);let Ck=BigInt(3);BigInt(4);let CI=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),C_=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),CP=BigInt(1),CC=BigInt(2),CO=(e,t)=>(e+t/CC)/t,CT=function(e,t,r=!1,n={}){if(e<=Cn)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:s,nByteLength:o}=Cp(e,t);if(o>2048)throw Error("Field lengths over 2048 bytes are not supported");let a=function(e){if(e%Ca===Co){let t=(e+Ci)/Ca;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%Cu===Cl){let t=(e-Cl)/Cu;return function(e,r){let n=e.mul(r,Cs),s=e.pow(n,t),o=e.mul(r,s),a=e.mul(e.mul(o,Cs),s),l=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(l),r))throw Error("Cannot find square root");return l}}return function(e){let t,r,n,s=(e-Ci)/Cs;for(t=e-Ci,r=0;t%Cs===Cn;t/=Cs,r++);for(n=Cs;n<e&&function(e,t,r){if(r<=Cn||t<Cn)throw Error("Expected power/modulo > 0");if(r===Ci)return Cn;let n=Ci;for(;t>Cn;)t&Ci&&(n=n*e%r),e=e*e%r,t>>=Ci;return n}(n,s,e)!==e-Ci;n++);if(1===r){let t=(e+Ci)/Ca;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let o=(t+Ci)/Cs;return function(e,a){if(e.pow(a,s)===e.neg(e.ONE))throw Error("Cannot find square root");let l=r,u=e.pow(e.mul(e.ONE,n),t),c=e.pow(a,o),d=e.pow(a,t);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<l&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(u,Ci<<BigInt(l-t-1));u=e.sqr(r),c=e.mul(c,r),d=e.mul(d,u),l=t}return c}}(e)}(e),l=Object.freeze({ORDER:e,BITS:s,BYTES:o,MASK:P4(s),ZERO:Cn,ONE:Ci,create:t=>Cc(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return Cn<=t&&t<e},is0:e=>e===Cn,isOdd:e=>(e&Ci)===Ci,neg:t=>Cc(-t,e),eql:(e,t)=>e===t,sqr:t=>Cc(t*t,e),add:(t,r)=>Cc(t+r,e),sub:(t,r)=>Cc(t-r,e),mul:(t,r)=>Cc(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<Cn)throw Error("Expected power > 0");if(r===Cn)return e.ONE;if(r===Ci)return t;let n=e.ONE,s=t;for(;r>Cn;)r&Ci&&(n=e.mul(n,s)),s=e.sqr(s),r>>=Ci;return n})(l,e,t),div:(t,r)=>Cc(t*Cf(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Cf(t,e),sqrt:n.sqrt||(e=>a(l,e)),invertBatch:e=>(function(e,t){let r=Array(t.length),n=t.reduce((t,n,s)=>e.is0(n)?t:(r[s]=t,e.mul(t,n)),e.ONE),s=e.inv(n);return t.reduceRight((t,n,s)=>e.is0(n)?t:(r[s]=e.mul(t,r[s]),e.mul(t,n)),s),r})(l,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?P3(e,o):P2(e,o),fromBytes:e=>{if(e.length!==o)throw Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return r?P1(e):P0(e)}});return Object.freeze(l)}(CI,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%CI,c=u*u*e%CI,d=Cd(c,t,CI)*c%CI,f=Cd(d,t,CI)*c%CI,h=Cd(f,CC,CI)*u%CI,p=Cd(h,n,CI)*h%CI,g=Cd(p,s,CI)*p%CI,m=Cd(g,a,CI)*g%CI,y=Cd(m,l,CI)*m%CI,b=Cd(y,a,CI)*g%CI,v=Cd(b,t,CI)*c%CI,x=Cd(v,o,CI)*p%CI,w=Cd(x,r,CI)*u%CI,E=Cd(w,CC,CI);if(!CT.eql(CT.sqr(E),e))throw Error("Cannot find square root");return E}}),CR=function(e,t){let r=t=>(function(e){let t=function(e){let t=Cv(e);return Ct(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,s=r.BYTES+1,o=2*r.BYTES+1;function a(e){return Cc(e,n)}let{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:c,isWithinCurveOrder:d}=function(e){let t=function(e){let t=Cv(e);Ct(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=t;if(r){if(!n.eql(s,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{let s=t.toAffine();return P6(Uint8Array.from([4]),r.toBytes(s.x),r.toBytes(s.y))}),s=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){let{a:n,b:s}=t,o=r.sqr(e),a=r.mul(o,e);return r.add(r.add(a,r.mul(e,n)),s)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw Error("bad generator point: equation left != right");function a(e){return"bigint"==typeof e&&CA<e&&e<t.n}function l(e){if(!a(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function u(e){let r,{allowedPrivateKeyLengths:n,nByteLength:s,wrapPrivateKey:o,n:a}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=PZ(e)),"string"!=typeof e||!n.includes(e.length))throw Error("Invalid key");e=e.padStart(2*s,"0")}try{r="bigint"==typeof e?e:P0(P8("private key",e,s))}catch{throw Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}return o&&(r=Cc(r,a)),l(r),r}let c=new Map;function d(e){if(!(e instanceof f))throw Error("ProjectivePoint expected")}class f{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof f)throw Error("projective point not allowed");let s=e=>r.eql(e,r.ZERO);return s(t)&&s(n)?f.ZERO:new f(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(f.fromAffine)}static fromHex(e){let t=f.fromAffine(s(P8("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return f.BASE.multiply(u(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw Error("bad point: x or y not FE");let s=r.sqr(n),a=o(e);if(!r.eql(s,a))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){d(e);let{px:t,py:n,pz:s}=this,{px:o,py:a,pz:l}=e,u=r.eql(r.mul(t,l),r.mul(o,s)),c=r.eql(r.mul(n,l),r.mul(a,s));return u&&c}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,s=r.mul(n,Ck),{px:o,py:a,pz:l}=this,u=r.ZERO,c=r.ZERO,d=r.ZERO,h=r.mul(o,o),p=r.mul(a,a),g=r.mul(l,l),m=r.mul(o,a);return m=r.add(m,m),d=r.mul(o,l),d=r.add(d,d),u=r.mul(e,d),c=r.mul(s,g),c=r.add(u,c),u=r.sub(p,c),c=r.add(p,c),c=r.mul(u,c),u=r.mul(m,u),d=r.mul(s,d),g=r.mul(e,g),m=r.sub(h,g),m=r.mul(e,m),m=r.add(m,d),d=r.add(h,h),h=r.add(d,h),h=r.add(h,g),h=r.mul(h,m),c=r.add(c,h),g=r.mul(a,l),g=r.add(g,g),h=r.mul(g,m),u=r.sub(u,h),d=r.mul(g,p),d=r.add(d,d),new f(u,c,d=r.add(d,d))}add(e){d(e);let{px:n,py:s,pz:o}=this,{px:a,py:l,pz:u}=e,c=r.ZERO,h=r.ZERO,p=r.ZERO,g=t.a,m=r.mul(t.b,Ck),y=r.mul(n,a),b=r.mul(s,l),v=r.mul(o,u),x=r.add(n,s),w=r.add(a,l);x=r.mul(x,w),w=r.add(y,b),x=r.sub(x,w),w=r.add(n,o);let E=r.add(a,u);return w=r.mul(w,E),E=r.add(y,v),w=r.sub(w,E),E=r.add(s,o),c=r.add(l,u),E=r.mul(E,c),c=r.add(b,v),E=r.sub(E,c),p=r.mul(g,w),c=r.mul(m,v),p=r.add(c,p),c=r.sub(b,p),p=r.add(b,p),h=r.mul(c,p),b=r.add(y,y),b=r.add(b,y),v=r.mul(g,v),w=r.mul(m,w),b=r.add(b,v),v=r.sub(y,v),v=r.mul(g,v),w=r.add(w,v),y=r.mul(b,w),h=r.add(h,y),y=r.mul(E,w),c=r.mul(x,c),c=r.sub(c,y),y=r.mul(x,b),p=r.mul(E,p),new f(c,h,p=r.add(p,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(f.ZERO)}wNAF(e){return p.wNAFCached(this,c,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(f.fromAffine)})}multiplyUnsafe(e){let n=f.ZERO;if(e===CA)return n;if(l(e),e===CS)return this;let{endo:s}=t;if(!s)return p.unsafeLadder(this,e);let{k1neg:o,k1:a,k2neg:u,k2:c}=s.splitScalar(e),d=n,h=n,g=this;for(;a>CA||c>CA;)a&CS&&(d=d.add(g)),c&CS&&(h=h.add(g)),g=g.double(),a>>=CS,c>>=CS;return o&&(d=d.negate()),u&&(h=h.negate()),h=new f(r.mul(h.px,s.beta),h.py,h.pz),d.add(h)}multiply(e){let n,s;l(e);let{endo:o}=t;if(o){let{k1neg:t,k1:a,k2neg:l,k2:u}=o.splitScalar(e),{p:c,f:d}=this.wNAF(a),{p:h,f:g}=this.wNAF(u);c=p.constTimeNegate(t,c),h=p.constTimeNegate(l,h),h=new f(r.mul(h.px,o.beta),h.py,h.pz),n=c.add(h),s=d.add(g)}else{let{p:t,f:r}=this.wNAF(e);n=t,s=r}return f.normalizeZ([n,s])[0]}multiplyAndAddUnsafe(e,t,r){let n=f.BASE,s=(e,t)=>t!==CA&&t!==CS&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=s(this,t).add(s(e,r));return o.is0()?void 0:o}toAffine(e){let{px:t,py:n,pz:s}=this,o=this.is0();null==e&&(e=o?r.ONE:r.inv(s));let a=r.mul(t,e),l=r.mul(n,e),u=r.mul(s,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw Error("invZ was invalid");return{x:a,y:l}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===CS)return!0;if(r)return r(f,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===CS?this:r?r(f,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(f,this,e)}toHex(e=!0){return PZ(this.toRawBytes(e))}}f.BASE=new f(t.Gx,t.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);let h=t.nBitLength,p=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,s=t;for(;r>Cy;)r&Cb&&(n=n.add(s)),s=s.double(),r>>=Cb;return n},precomputeWindow(e,t){let{windows:r,windowSize:s}=n(t),o=[],a=e,l=a;for(let e=0;e<r;e++){l=a,o.push(l);for(let e=1;e<s;e++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(t,s,o){let{windows:a,windowSize:l}=n(t),u=e.ZERO,c=e.BASE,d=BigInt(2**t-1),f=2**t,h=BigInt(t);for(let e=0;e<a;e++){let t=e*l,n=Number(o&d);o>>=h,n>l&&(n-=f,o+=Cb);let a=t+Math.abs(n)-1,p=e%2!=0,g=n<0;0===n?c=c.add(r(p,s[t])):u=u.add(r(g,s[a]))}return{p:u,f:c}},wNAFCached(e,t,r,n){let s=e._WINDOW_SIZE||1,o=t.get(e);return o||(o=this.precomputeWindow(e,s),1!==s&&t.set(e,n(o))),this.wNAF(s,o,r)}}}(f,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:a}}({...t,toBytes(e,t,n){let s=t.toAffine(),o=r.toBytes(s.x);return n?P6(Uint8Array.from([t.hasEvenY()?2:3]),o):P6(Uint8Array.from([4]),o,r.toBytes(s.y))},fromBytes(e){let t=e.length,n=e[0],a=e.subarray(1);if(t===s&&(2===n||3===n)){let e=P0(a);if(!(CA<e&&e<r.ORDER))throw Error("Point is not on curve");let t=c(e),s=r.sqrt(t);return(1&n)==1!=((s&CS)===CS)&&(s=r.neg(s)),{x:e,y:s}}if(t===o&&4===n)return{x:r.fromBytes(a.subarray(0,r.BYTES)),y:r.fromBytes(a.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${s} compressed bytes or ${o} uncompressed bytes`)}}),f=e=>PZ(P2(e,t.nByteLength)),h=(e,t,r)=>P0(e.slice(t,r));class p{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new p(h(e=P8("compactSignature",e,2*r),0,r),h(e,r,2*r))}static fromDER(e){let{r:t,s:r}=CE.toSig(P8("DER",e));return new p(t,r)}assertValidity(){if(!d(this.r))throw Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new p(this.r,this.s,e)}recoverPublicKey(e){let{r:s,s:o,recovery:u}=this,c=y(P8("msgHash",e));if(null==u||![0,1,2,3].includes(u))throw Error("recovery id invalid");let d=2===u||3===u?s+t.n:s;if(d>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let h=1&u?"03":"02",p=l.fromHex(h+f(d)),g=Cf(d,n),m=a(-c*g),b=a(o*g),v=l.BASE.multiplyAndAddUnsafe(p,m,b);if(!v)throw Error("point at infinify");return v.assertValidity(),v}hasHighS(){return this.s>n>>CS}normalizeS(){return this.hasHighS()?new p(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return PY(this.toDERHex())}toDERHex(){return CE.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return PY(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}function g(e){let t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===s||n===o:r?n===2*s||n===2*o:e instanceof l}let m=t.bits2int||function(e){let r=P0(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},y=t.bits2int_modN||function(e){return a(m(e))},b=P4(t.nBitLength);function v(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(CA<=e&&e<b))throw Error(`bigint expected < 2^${t.nBitLength}`);return P2(e,t.nByteLength)}let x={lowS:t.lowS,prehash:!1},w={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(g(e))throw Error("first arg must be private key");if(!g(t))throw Error("second arg must be public key");return l.fromHex(t).multiply(u(e)).toRawBytes(r)},sign:function(e,s,o=x){let{seed:c,k2sig:f}=function(e,s,o=x){if(["recovered","canonical"].some(e=>e in o))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:f}=t,{lowS:h,prehash:g,extraEntropy:b}=o;null==h&&(h=!0),e=P8("msgHash",e),g&&(e=P8("prehashed msgHash",c(e)));let w=y(e),E=u(s),A=[v(E),v(w)];if(null!=b){let e=!0===b?f(r.BYTES):b;A.push(P8("extraEntropy",e))}return{seed:P6(...A),k2sig:function(e){var t;let r=m(e);if(!d(r))return;let s=Cf(r,n),o=l.BASE.multiply(r).toAffine(),u=a(o.x);if(u===CA)return;let c=a(s*a(w+u*E));if(c===CA)return;let f=2*(o.x!==u)|Number(o.y&CS),g=c;return h&&c>n>>CS&&(g=(t=c)>n>>CS?a(-t):t,f^=1),new p(u,g,f)}}}(e,s,o);return P7(t.hash.outputLen,t.nByteLength,t.hmac)(c,f)},verify:function(e,r,s,o=w){var u;let c,d;if(r=P8("msgHash",r),s=P8("publicKey",s),"strict"in o)throw Error("options.strict was renamed to lowS");let{lowS:f,prehash:h}=o;try{if("string"==typeof e||e instanceof Uint8Array)try{c=p.fromDER(e)}catch(t){if(!(t instanceof CE.Err))throw t;c=p.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:r}=e;c=new p(t,r)}else throw Error("PARSE");d=l.fromHex(s)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(f&&c.hasHighS())return!1;h&&(r=t.hash(r));let{r:g,s:m}=c,b=y(r),v=Cf(m,n),x=a(b*v),E=a(g*v),A=null==(u=l.BASE.multiplyAndAddUnsafe(d,x,E))?void 0:u.toAffine();return!!A&&a(A.x)===g},ProjectivePoint:l,Signature:p,utils:{isValidPrivateKey(e){try{return u(e),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let e=Cm(t.n);return function(e,t,r=!1){let n=e.length,s=Cg(t),o=Cm(t);if(n<16||n<o||n>1024)throw Error(`expected ${o}-1024 bytes of input, got ${n}`);let a=Cc(r?P0(e):P1(e),t-Ci)+Ci;return r?P3(a,s):P2(a,s)}(t.randomBytes(e),t.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>_9(t,e,function(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!_Y(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}(...r)),randomBytes:_4});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:CT,n:C_,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-CP*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=BigInt("0x100000000000000000000000000000000"),o=CO(t*e,C_),a=CO(-r*e,C_),l=Cc(e-o*t-a*n,C_),u=Cc(-o*r-a*t,C_),c=l>s,d=u>s;if(c&&(l=C_-l),d&&(u=C_-u),l>s||u>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:l,k2neg:d,k2:u}}}},Po);BigInt(0),CR.ProjectivePoint;let CB="0x0000000000000000000000000000000000000000",CN="0x0000000000000000000000000000000000000000000000000000000000000000",CD=BigInt(0),CL=BigInt(1),CM=BigInt(2),CU=BigInt(27),CF=BigInt(28),Cj=BigInt(35),Cz={},C$=(Dr=class{constructor(e,t,r,n){e2(this,N9,void 0),e2(this,N7,void 0),e2(this,De,void 0),e2(this,Dt,void 0),function(e,t,r){if(null==r&&(r=""),e!==t){let e=r,t="new";r&&(e+=".",t+=" "+r),_E(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}(e,Cz,"Signature"),e3(this,N9,t),e3(this,N7,r),e3(this,De,n),e3(this,Dt,null)}get r(){return e1(this,N9)}set r(e){_A(32===_R(e),"invalid r","value",e),e3(this,N9,_O(e))}get s(){return e1(this,N7)}set s(e){_A(32===_R(e),"invalid s","value",e);let t=_O(e);_A(8>parseInt(t.substring(0,3)),"non-canonical s","value",t),e3(this,N7,t)}get v(){return e1(this,De)}set v(e){let t=_U(e,"value");_A(27===t||28===t,"invalid v","v",e),e3(this,De,t)}get networkV(){return e1(this,Dt)}get legacyChainId(){let e=this.networkV;return null==e?null:Dr.getChainId(e)}get yParity(){return+(27!==this.v)}get yParityAndS(){let e=_k(this.s);return this.yParity&&(e[0]|=128),_O(e)}get compactSerialized(){return _T([this.r,this.yParityAndS])}get serialized(){return _T([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let e=new Dr(Cz,this.r,this.s,this.v);return this.networkV&&e3(e,Dt,this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){let t=_L(e,"v");return t==CU||t==CF?CD:(_A(t>=Cj,"invalid EIP-155 v","v",e),(t-Cj)/CM)}static getChainIdV(e,t){return _L(e)*CM+BigInt(35+t-27)}static getNormalizedV(e){let t=_L(e);return t===CD||t===CU?27:t===CL||t===CF?28:(_A(t>=Cj,"invalid v","v",e),t&CL?27:28)}static from(e){function t(t,r){_A(t,r,"signature",e)}if(null==e)return new Dr(Cz,CN,CN,27);if("string"==typeof e){let r=_k(e,"signature");if(64===r.length){let e=_O(r.slice(0,32)),t=r.slice(32,64),n=128&t[0]?28:27;return t[0]&=127,new Dr(Cz,e,_O(t),n)}if(65===r.length){let e=_O(r.slice(0,32)),n=r.slice(32,64);t((128&n[0])==0,"non-canonical s");let s=Dr.getNormalizedV(r[64]);return new Dr(Cz,e,_O(n),s)}t(!1,"invalid raw signature length")}if(e instanceof Dr)return e.clone();let r=e.r;t(null!=r,"missing r");let n=_B(_j(r),32),s=function(e,r){if(null!=e)return _B(_j(e),32);if(null!=r){t(__(r,32),"invalid yParityAndS");let e=_k(r);return e[0]&=127,_O(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t((128&_k(s)[0])==0,"non-canonical s");let{networkV:o,v:a}=function(e,r,n){if(null!=e){let t=_L(e);return{networkV:t>=Cj?t:void 0,v:Dr.getNormalizedV(t)}}if(null!=r)return t(__(r,32),"invalid yParityAndS"),{v:128&_k(r)[0]?28:27};if(null!=n){switch(_U(n,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new Dr(Cz,n,s,a);return o&&e3(l,Dt,o),t(null==e.yParity||_U(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}},N9=new WeakMap,N7=new WeakMap,De=new WeakMap,Dt=new WeakMap,Dr),CH=(Di=class{constructor(e){e2(this,Dn,void 0),_A(32===_R(e),"invalid private key","privateKey","[REDACTED]"),e3(this,Dn,_O(e))}get privateKey(){return e1(this,Dn)}get publicKey(){return Di.computePublicKey(e1(this,Dn))}get compressedPublicKey(){return Di.computePublicKey(e1(this,Dn),!0)}sign(e){_A(32===_R(e),"invalid digest length","digest",e);let t=CR.sign(_I(e),_I(e1(this,Dn)),{lowS:!0});return C$.from({r:_F(t.r,32),s:_F(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=Di.computePublicKey(e);return _O(CR.getSharedSecret(_I(e1(this,Dn)),_k(t),!1))}static computePublicKey(e,t){let r=_k(e,"key");if(32===r.length)return _O(CR.getPublicKey(r,!!t));if(64===r.length){let e=new Uint8Array(65);e[0]=4,e.set(r,1),r=e}return _O(CR.ProjectivePoint.fromHex(r).toRawBytes(t))}static recoverPublicKey(e,t){_A(32===_R(e),"invalid digest length","digest",e);let r=C$.from(t),n=CR.Signature.fromCompact(_I(_T([r.r,r.s]))),s=(n=n.addRecoveryBit(r.yParity)).recoverPublicKey(_I(e));return _A(null!=s,"invalid signature for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,r){let n=CR.ProjectivePoint.fromHex(Di.computePublicKey(e).substring(2)),s=CR.ProjectivePoint.fromHex(Di.computePublicKey(t).substring(2));return"0x"+n.add(s).toHex(!!r)}},Dn=new WeakMap,Di),CV=BigInt(0),Cq=BigInt(36);function CG(e){let t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);let n=_k(Pj(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}let CW={};for(let e=0;e<10;e++)CW[String(e)]=String(e);for(let e=0;e<26;e++)CW[String.fromCharCode(65+e)]=String(10+e);let CK=function(){let e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function CJ(e){if(_A("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);let t=CG(e);return _A(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){_A(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>CW[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e),"bad icap checksum","address",e);let t=(function(e){e=e.toLowerCase();let t=CV;for(let r=0;r<e.length;r++)t=t*Cq+CK[e[r]];return t})(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return CG("0x"+t)}_A(!1,"invalid address","address",e)}function CZ(e,t){return{address:CJ(e),storageKeys:t.map((e,t)=>(_A(__(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase()))}}function CQ(e){if(Array.isArray(e))return e.map((t,r)=>Array.isArray(t)?(_A(2===t.length,"invalid slot set",`value[${r}]`,t),CZ(t[0],t[1])):(_A(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),CZ(t.address,t.storageKeys)));_A(null!=e&&"object"==typeof e,"invalid access list","value",e);let t=Object.keys(e).map(t=>{let r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return CZ(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}let CX=BigInt(0),CY=BigInt(2),C0=BigInt(27),C1=BigInt(28),C2=BigInt(35),C3=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function C8(e,t){let r=e.toString(16);for(;r.length<2;)r="0"+r;return"0x"+(r+=PV(t).substring(4))}function C6(e){return"0x"===e?null:CJ(e)}function C4(e,t){try{return CQ(e)}catch(r){_A(!1,r.message,t,e)}}function C5(e,t){return"0x"===e?0:_U(e,t)}function C9(e,t){if("0x"===e)return CX;let r=_L(e,t);return _A(r<=C3,"value exceeds uint size",t,r),r}function C7(e,t){let r=_L(e,"value"),n=_j(r);return _A(n.length<=32,"value too large",`tx.${t}`,r),n}function Oe(e){return CQ(e).map(e=>[e.address,e.storageKeys])}function Ot(e,t){let r;try{if(r=C5(t[0],"yParity"),0!==r&&1!==r)throw Error("bad yParity")}catch{_A(!1,"invalid yParity","yParity",t[0])}let n=_B(t[1],32),s=_B(t[2],32);e.signature=C$.from({r:n,s:s,yParity:r})}let Or=(DS=class{constructor(){e2(this,DE),e2(this,Ds,void 0),e2(this,Do,void 0),e2(this,Da,void 0),e2(this,Dl,void 0),e2(this,Du,void 0),e2(this,Dc,void 0),e2(this,Dd,void 0),e2(this,Df,void 0),e2(this,Dh,void 0),e2(this,Dp,void 0),e2(this,Dg,void 0),e2(this,Dm,void 0),e2(this,Dy,void 0),e2(this,Db,void 0),e2(this,Dv,void 0),e2(this,Dx,void 0),e2(this,Dw,void 0),e3(this,Ds,null),e3(this,Do,null),e3(this,Dl,0),e3(this,Du,CX),e3(this,Dc,null),e3(this,Dd,null),e3(this,Df,null),e3(this,Da,"0x"),e3(this,Dh,CX),e3(this,Dp,CX),e3(this,Dg,null),e3(this,Dm,null),e3(this,Dy,null),e3(this,Db,null),e3(this,Dv,null),e3(this,Dx,null),e3(this,Dw,null)}get type(){return e1(this,Ds)}set type(e){switch(e){case null:e3(this,Ds,null);break;case 0:case"legacy":e3(this,Ds,0);break;case 1:case"berlin":case"eip-2930":e3(this,Ds,1);break;case 2:case"london":case"eip-1559":e3(this,Ds,2);break;case 3:case"cancun":case"eip-4844":e3(this,Ds,3);break;case 4:case"pectra":case"eip-7702":e3(this,Ds,4);break;default:_A(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let e=e1(this,Do);return null==e&&3===this.type?CB:e}set to(e){e3(this,Do,null==e?null:CJ(e))}get nonce(){return e1(this,Dl)}set nonce(e){e3(this,Dl,_U(e,"value"))}get gasLimit(){return e1(this,Du)}set gasLimit(e){e3(this,Du,_L(e))}get gasPrice(){let e=e1(this,Dc);return null==e&&(0===this.type||1===this.type)?CX:e}set gasPrice(e){e3(this,Dc,null==e?null:_L(e,"gasPrice"))}get maxPriorityFeePerGas(){return e1(this,Dd)??(2===this.type||3===this.type?CX:null)}set maxPriorityFeePerGas(e){e3(this,Dd,null==e?null:_L(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){return e1(this,Df)??(2===this.type||3===this.type?CX:null)}set maxFeePerGas(e){e3(this,Df,null==e?null:_L(e,"maxFeePerGas"))}get data(){return e1(this,Da)}set data(e){e3(this,Da,_O(e))}get value(){return e1(this,Dh)}set value(e){e3(this,Dh,_L(e,"value"))}get chainId(){return e1(this,Dp)}set chainId(e){e3(this,Dp,_L(e))}get signature(){return e1(this,Dg)||null}set signature(e){e3(this,Dg,null==e?null:C$.from(e))}get accessList(){return(e1(this,Dm)||null)??(1===this.type||2===this.type||3===this.type?[]:null)}set accessList(e){e3(this,Dm,null==e?null:CQ(e))}get authorizationList(){let e=e1(this,Dw)||null;return null==e&&4===this.type?[]:e}set authorizationList(e){e3(this,Dw,null==e?null:e.map(e=>({address:CJ(e.address),nonce:_L(null!=e.nonce?e.nonce:0),chainId:_L(null!=e.chainId?e.chainId:0),signature:C$.from(e.signature)})))}get maxFeePerBlobGas(){let e=e1(this,Dy);return null==e&&3===this.type?CX:e}set maxFeePerBlobGas(e){e3(this,Dy,null==e?null:_L(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=e1(this,Db);return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){_A(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)_A(__(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}e3(this,Db,e)}get blobs(){return null==e1(this,Dx)?null:e1(this,Dx).map(e=>Object.assign({},e))}set blobs(e){if(null==e)return void e3(this,Dx,null);let t=[],r=[];for(let n=0;n<e.length;n++){let s=e[n];if(_P(s)){_E(e1(this,Dv),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=_k(s);if(_A(e.length<=131072,"blob is too large",`blobs[${n}]`,s),131072!==e.length){let t=new Uint8Array(131072);t.set(e),e=t}let o=e1(this,Dv).blobToKzgCommitment(e),a=_O(e1(this,Dv).computeBlobKzgProof(e,o));t.push({data:_O(e),commitment:_O(o),proof:a}),r.push(C8(1,o))}else{let e=_O(s.commitment);t.push({data:_O(s.data),commitment:e,proof:_O(s.proof)}),r.push(C8(1,e))}}e3(this,Dx,t),e3(this,Db,r)}get kzg(){return e1(this,Dv)}set kzg(e){null==e?e3(this,Dv,null):e3(this,Dv,{blobToKzgCommitment:t=>{if("computeBlobProof"in e){if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return _k(e.blobToKzgCommitment(_O(t)))}else if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return _k(e.blobToKzgCommitment(t));if("blobToKZGCommitment"in e&&"function"==typeof e.blobToKZGCommitment)return _k(e.blobToKZGCommitment(_O(t)));_A(!1,"unsupported KZG library","kzg",e)},computeBlobKzgProof:(t,r)=>"computeBlobProof"in e&&"function"==typeof e.computeBlobProof?_k(e.computeBlobProof(_O(t),_O(r))):"computeBlobKzgProof"in e&&"function"==typeof e.computeBlobKzgProof?e.computeBlobKzgProof(t,r):"computeBlobKZGProof"in e&&"function"==typeof e.computeBlobKZGProof?_k(e.computeBlobKZGProof(_O(t),_O(r))):void _A(!1,"unsupported KZG library","kzg",e)})}get hash(){return null==this.signature?null:Pj(e6(this,DE,DA).call(this,!0,!1))}get unsignedHash(){return Pj(this.unsignedSerialized)}get from(){var e,t,r;let n;return null==this.signature?null:(e=this.unsignedHash,t=this.signature,CJ(Pj("0x"+("string"==typeof(r=CH.recoverPublicKey(e,t))?CH.computePublicKey(r,!1):r.publicKey).substring(4)).substring(26)))}get fromPublicKey(){return null==this.signature?null:CH.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){return e6(this,DE,DA).call(this,!0,!0)}get unsignedSerialized(){return e6(this,DE,DA).call(this,!1,!1)}inferType(){let e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){let e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList,n=null!=e1(this,Dy)||e1(this,Db);null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&_E(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),_E(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),_E(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let s=[];return null!=this.type?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):t?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(n&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return DS.from(this)}toJSON(){let e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new DS;if("string"==typeof e){let t=_k(e);if(t[0]>=127)return DS.from(function(e){let t=_V(e);_A(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);let r={type:0,nonce:C5(t[0],"nonce"),gasPrice:C9(t[1],"gasPrice"),gasLimit:C9(t[2],"gasLimit"),to:C6(t[3]),value:C9(t[4],"value"),data:_O(t[5]),chainId:CX};if(6===t.length)return r;let n=C9(t[6],"v"),s=C9(t[7],"r"),o=C9(t[8],"s");if(s===CX&&o===CX)r.chainId=n;else{let e=(n-C2)/CY;e<CX&&(e=CX),r.chainId=e,_A(e!==CX||n===C0||n===C1,"non-canonical legacy v","v",t[6]),r.signature=C$.from({r:_B(t[7],32),s:_B(t[8],32),v:n})}return r}(t));switch(t[0]){case 1:return DS.from(function(e){let t=_V(_k(e).slice(1));_A(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",_O(e));let r={type:1,chainId:C9(t[0],"chainId"),nonce:C5(t[1],"nonce"),gasPrice:C9(t[2],"gasPrice"),gasLimit:C9(t[3],"gasLimit"),to:C6(t[4]),value:C9(t[5],"value"),data:_O(t[6]),accessList:C4(t[7],"accessList")};return 8===t.length||Ot(r,t.slice(8)),r}(t));case 2:return DS.from(function(e){let t=_V(_k(e).slice(1));_A(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",_O(e));let r={type:2,chainId:C9(t[0],"chainId"),nonce:C5(t[1],"nonce"),maxPriorityFeePerGas:C9(t[2],"maxPriorityFeePerGas"),maxFeePerGas:C9(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:C9(t[4],"gasLimit"),to:C6(t[5]),value:C9(t[6],"value"),data:_O(t[7]),accessList:C4(t[8],"accessList")};return 9===t.length||Ot(r,t.slice(9)),r}(t));case 3:return DS.from(function(e){let t=_V(_k(e).slice(1)),r="3",n=null;if(4===t.length&&Array.isArray(t[0])){r="3 (network format)";let e=t[1],s=t[2],o=t[3];_A(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),_A(Array.isArray(s),"invalid network format: commitments not an array","fields[2]",s),_A(Array.isArray(o),"invalid network format: proofs not an array","fields[3]",o),_A(e.length===s.length,"invalid network format: blobs/commitments length mismatch","fields",t),_A(e.length===o.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let r=0;r<t[1].length;r++)n.push({data:e[r],commitment:s[r],proof:o[r]});t=t[0]}_A(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${r}`,"data",_O(e));let s={type:3,chainId:C9(t[0],"chainId"),nonce:C5(t[1],"nonce"),maxPriorityFeePerGas:C9(t[2],"maxPriorityFeePerGas"),maxFeePerGas:C9(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:C9(t[4],"gasLimit"),to:C6(t[5]),value:C9(t[6],"value"),data:_O(t[7]),accessList:C4(t[8],"accessList"),maxFeePerBlobGas:C9(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(s.blobs=n),_A(null!=s.to,`invalid address for transaction type: ${r}`,"data",e),_A(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let t=0;t<s.blobVersionedHashes.length;t++)_A(__(s.blobVersionedHashes[t],32),`invalid blobVersionedHash at index ${t}: must be length 32`,"data",e);return 11===t.length||Ot(s,t.slice(11)),s}(t));case 4:return DS.from(function(e){let t=_V(_k(e).slice(1));_A(Array.isArray(t)&&(10===t.length||13===t.length),"invalid field count for transaction type: 4","data",_O(e));let r={type:4,chainId:C9(t[0],"chainId"),nonce:C5(t[1],"nonce"),maxPriorityFeePerGas:C9(t[2],"maxPriorityFeePerGas"),maxFeePerGas:C9(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:C9(t[4],"gasLimit"),to:C6(t[5]),value:C9(t[6],"value"),data:_O(t[7]),accessList:C4(t[8],"accessList"),authorizationList:function(e,t){try{if(!Array.isArray(e))throw Error("authorizationList: invalid array");let t=[];for(let r=0;r<e.length;r++){let n=e[r];if(!Array.isArray(n))throw Error(`authorization[${r}]: invalid array`);if(6!==n.length)throw Error(`authorization[${r}]: wrong length`);if(!n[1])throw Error(`authorization[${r}]: null address`);t.push({address:C6(n[1]),nonce:C9(n[2],"nonce"),chainId:C9(n[0],"chainId"),signature:C$.from({yParity:C5(n[3],"yParity"),r:_B(n[4],32),s:_B(n[5],32)})})}return t}catch(r){_A(!1,r.message,t,e)}}(t[9],"authorizationList")};return 10===t.length||Ot(r,t.slice(10)),r}(t))}_E(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let t=new DS;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=C$.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.authorizationList&&(t.authorizationList=e.authorizationList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&(_A(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),_A(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&(_A(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),_A(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}},Ds=new WeakMap,Do=new WeakMap,Da=new WeakMap,Dl=new WeakMap,Du=new WeakMap,Dc=new WeakMap,Dd=new WeakMap,Df=new WeakMap,Dh=new WeakMap,Dp=new WeakMap,Dg=new WeakMap,Dm=new WeakMap,Dy=new WeakMap,Db=new WeakMap,Dv=new WeakMap,Dx=new WeakMap,Dw=new WeakMap,DE=new WeakSet,DA=function(e,t){_E(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let r=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){let r=[C7(e.nonce,"nonce"),C7(e.gasPrice||0,"gasPrice"),C7(e.gasLimit,"gasLimit"),e.to||"0x",C7(e.value,"value"),e.data],n=CX;if(e.chainId!=CX)n=_L(e.chainId,"tx.chainId"),_A(!t||null==t.networkV||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){let t=e.signature.legacyChainId;null!=t&&(n=t)}if(!t)return n!==CX&&(r.push(_j(n)),r.push("0x"),r.push("0x")),_W(r);let s=BigInt(27+t.yParity);return n!==CX?s=C$.getChainIdV(n,t.v):BigInt(t.v)!==s&&_A(!1,"tx.chainId/sig.v mismatch","sig",t),r.push(_j(s)),r.push(_j(t.r)),r.push(_j(t.s)),_W(r)}(this,r);case 1:let n=[C7(this.chainId,"chainId"),C7(this.nonce,"nonce"),C7(this.gasPrice||0,"gasPrice"),C7(this.gasLimit,"gasLimit"),this.to||"0x",C7(this.value,"value"),this.data,Oe(this.accessList||[])];return r&&(n.push(C7(r.yParity,"recoveryParam")),n.push(_j(r.r)),n.push(_j(r.s))),_T(["0x01",_W(n)]);case 2:let s=[C7(this.chainId,"chainId"),C7(this.nonce,"nonce"),C7(this.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),C7(this.maxFeePerGas||0,"maxFeePerGas"),C7(this.gasLimit,"gasLimit"),this.to||"0x",C7(this.value,"value"),this.data,Oe(this.accessList||[])];return r&&(s.push(C7(r.yParity,"yParity")),s.push(_j(r.r)),s.push(_j(r.s))),_T(["0x02",_W(s)]);case 3:return function(e,t,r){let n=[C7(e.chainId,"chainId"),C7(e.nonce,"nonce"),C7(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),C7(e.maxFeePerGas||0,"maxFeePerGas"),C7(e.gasLimit,"gasLimit"),e.to||CB,C7(e.value,"value"),e.data,Oe(e.accessList||[]),C7(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),function(e,t){_A(Array.isArray(e),`invalid ${t}`,"value",e);for(let t=0;t<e.length;t++)_A(__(e[t],32),"invalid ${ param } hash",`value[${t}]`,e[t]);return e}(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(C7(t.yParity,"yParity")),n.push(_j(t.r)),n.push(_j(t.s)),r)?_T(["0x03",_W([n,r.map(e=>e.data),r.map(e=>e.commitment),r.map(e=>e.proof)])]):_T(["0x03",_W(n)])}(this,r,t?this.blobs:null);case 4:let o=[C7(this.chainId,"chainId"),C7(this.nonce,"nonce"),C7(this.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),C7(this.maxFeePerGas||0,"maxFeePerGas"),C7(this.gasLimit,"gasLimit"),this.to||"0x",C7(this.value,"value"),this.data,Oe(this.accessList||[]),(this.authorizationList||[]).map(e=>[C7(e.chainId,"chainId"),e.address,C7(e.nonce,"nonce"),C7(e.signature.yParity,"yParity"),e.signature.r,e.signature.s])];return r&&(o.push(C7(r.yParity,"yParity")),o.push(_j(r.r)),o.push(_j(r.s))),_T(["0x04",_W(o)])}_E(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},DS);function On(e){return Pj(function(e,t){_A("string"==typeof e,"invalid string value","str",e);let r=[];for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if((64512&n)==55296){t++;let s=e.charCodeAt(t);_A(t<e.length&&(64512&s)==56320,"invalid surrogate pair","str",e);let o=65536+((1023&n)<<10)+(1023&s);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return new Uint8Array(r)}(e))}let Oi=new Uint8Array(32);Oi.fill(0);let Os=BigInt(-1),Oo=BigInt(0),Oa=BigInt(1),Ol=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Ou=_F(Oa,32),Oc=_F(Oo,32),Od={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Of=["name","version","chainId","verifyingContract","salt"];function Oh(e){return function(t){return _A("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}let Op={name:Oh("name"),version:Oh("version"),chainId:function(e){let t=_L(e,"domain.chainId");return _A(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):function(e){let t=_O(_P(e)?e:_j(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}(t)},verifyingContract:function(e){try{return CJ(e).toLowerCase()}catch{}_A(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){let t=_k(e,"domain.salt");return _A(32===t.length,'invalid domain value "salt"',"domain.salt",e),_O(t)}};function Og(e){{let n=e.match(/^(u?)int(\d+)$/);if(n){var t,r;let s=""===n[1],o=parseInt(n[2]);_A(o%8==0&&0!==o&&o<=256&&n[2]===String(o),"invalid numeric width","type",e);let a=(t=Ol,r=s?o-1:o,_M(t,"value")&(_D<<BigInt(_U(r,"bits")))-_D),l=s?(a+Oa)*Os:Oo;return function(t){let r=_L(t,"value");return _A(r>=l&&r<=a,`value out-of-bounds for ${e}`,"value",r),_F(s?function(e,t){let r=_L(e,"value"),n=BigInt(_U(256,"width")),s=_D<<n-_D;return r<_N?(_E((r=-r)<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~r&(_D<<n)-_D)+_D):(_E(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),r)}(r,0):r,32)}}}{let t=e.match(/^bytes(\d+)$/);if(t){let r=parseInt(t[1]);return _A(0!==r&&r<=32&&t[1]===String(r),"invalid bytes width","type",e),function(t){return _A(_k(t).length===r,`invalid length for ${e}`,"value",t),function(e){let t=_k(e),r=t.length%32;return r?_T([t,Oi.slice(r)]):_O(t)}(t)}}}switch(e){case"address":return function(e){return _B(CJ(e),32)};case"bool":return function(e){return e?Ou:Oc};case"bytes":return function(e){return Pj(e)};case"string":return function(e){return On(e)}}return null}function Om(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}function Oy(e){let t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}let Ob=class e{constructor(e){e2(this,DP),eY(this,"primaryType"),e2(this,Dk,void 0),e2(this,DI,void 0),e2(this,D_,void 0),e3(this,DI,new Map),e3(this,D_,new Map);let t=new Map,r=new Map,n=new Map,s={};for(let o in Object.keys(e).forEach(o=>{s[o]=e[o].map(({name:t,type:r})=>{let{base:n,index:s}=Oy(r);return"int"!==n||e.int||(n="int256"),"uint"!==n||e.uint||(n="uint256"),{name:t,type:n+(s||"")}}),t.set(o,new Set),r.set(o,[]),n.set(o,new Set)}),e3(this,Dk,JSON.stringify(s)),s){let n=new Set;for(let a of s[o]){_A(!n.has(a.name),`duplicate variable name ${JSON.stringify(a.name)} in ${JSON.stringify(o)}`,"types",e),n.add(a.name);let s=Oy(a.type).base;_A(s!==o,`circular type reference to ${JSON.stringify(s)}`,"types",e),Og(s)||(_A(r.has(s),`unknown type ${JSON.stringify(s)}`,"types",e),r.get(s).push(o),t.get(o).add(s))}}let o=Array.from(r.keys()).filter(e=>0===r.get(e).length);for(let[a,l]of(_A(0!==o.length,"missing primary type","types",e),_A(1===o.length,`ambiguous primary types or unused types: ${o.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),_x(this,{primaryType:o[0]}),!function s(o,a){for(let l of(_A(!a.has(o),`circular type reference to ${JSON.stringify(o)}`,"types",e),a.add(o),t.get(o)))if(r.has(l))for(let e of(s(l,a),a))n.get(e).add(l);a.delete(o)}(this.primaryType,new Set),n)){let e=Array.from(l);e.sort(),e1(this,DI).set(a,Om(a,s[a])+e.map(e=>Om(e,s[e])).join(""))}}get types(){return JSON.parse(e1(this,Dk))}getEncoder(e){let t=e1(this,D_).get(e);return t||(t=e6(this,DP,DC).call(this,e),e1(this,D_).set(e,t)),t}encodeType(e){let t=e1(this,DI).get(e);return _A(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Pj(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Og(e))return r(e,t);let n=Oy(e).array;if(n)return _A(-1===n.count||n.count===t.length,`array length mismatch; expected length ${n.count}`,"value",t),t.map(e=>this._visit(n.prefix,e,r));let s=this.types[e];if(s)return s.reduce((e,{name:n,type:s})=>(e[n]=this._visit(s,t[n],r),e),{});_A(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(t){return new e(t)}static getPrimaryType(t){return e.from(t).primaryType}static hashStruct(t,r,n){return e.from(r).hashStruct(t,n)}static hashDomain(t){let r=[];for(let e in t){if(null==t[e])continue;let n=Od[e];_A(n,`invalid typed-data domain key: ${JSON.stringify(e)}`,"domain",t),r.push({name:e,type:n})}return r.sort((e,t)=>Of.indexOf(e.name)-Of.indexOf(t.name)),e.hashStruct("EIP712Domain",{EIP712Domain:r},t)}static encode(t,r,n){return _T(["0x1901",e.hashDomain(t),e.from(r).hash(n)])}static hash(t,r,n){return Pj(e.encode(t,r,n))}static async resolveNames(t,r,n,s){for(let e in t=Object.assign({},t))null==t[e]&&delete t[e];let o={};t.verifyingContract&&!__(t.verifyingContract,20)&&(o[t.verifyingContract]="0x");let a=e.from(r);for(let e in a.visit(n,(e,t)=>("address"!==e||__(t,20)||(o[t]="0x"),t)),o)o[e]=await s(e);return t.verifyingContract&&o[t.verifyingContract]&&(t.verifyingContract=o[t.verifyingContract]),n=a.visit(n,(e,t)=>"address"===e&&o[t]?o[t]:t),{domain:t,value:n}}static getPayload(t,r,n){e.hashDomain(t);let s={},o=[];Of.forEach(e=>{let r=t[e];null!=r&&(s[e]=Op[e](r),o.push({name:e,type:Od[e]}))});let a=e.from(r),l=Object.assign({},r=a.types);return _A(null==l.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",r),l.EIP712Domain=o,a.encode(n),{types:l,domain:s,primaryType:a.primaryType,message:a.visit(n,(e,t)=>{if(e.match(/^bytes(\d*)/))return _O(_k(t));if(e.match(/^u?int/))return _L(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return _A("string"==typeof t,"invalid string","value",t),t}_A(!1,"unsupported type","type",e)})}}};Dk=new WeakMap,DI=new WeakMap,D_=new WeakMap,DP=new WeakSet,DC=function(e){{let t=Og(e);if(t)return t}let t=Oy(e).array;if(t){let e=t.prefix,r=this.getEncoder(e);return n=>{_A(-1===t.count||t.count===n.length,`array length mismatch; expected length ${t.count}`,"value",n);let s=n.map(r);return e1(this,DI).has(e)&&(s=s.map(Pj)),Pj(_T(s))}}let r=this.types[e];if(r){let t=On(e1(this,DI).get(e));return e=>{let n=r.map(({name:t,type:r})=>{let n=this.getEncoder(r)(e[t]);return e1(this,DI).has(r)?Pj(n):n});return n.unshift(t),_T(n)}}_A(!1,`unknown type: ${e}`,"type",e)};let Ov=class{constructor(e,t,r){this.api=e,this.data=t,this.derivationPath=r}async run(){let e=Ob.hashDomain(this.data.domain);if(!this.data.types[this.data.primaryType])throw Error(`Primary type "${this.data.primaryType}" is not defined in the types.`);let{EIP712Domain:t,...r}=this.data.types,n=Ob.hashStruct(this.data.primaryType,r,this.data.message);return await this.api.sendCommand(new kK({derivationPath:this.derivationPath,legacyArgs:rR({domainHash:e,messageHash:n})}))}};class Ox extends sv{makeStateMachine(e){let{getAddress:t,getAppConfig:r,web3CheckOptIn:n,buildContext:s,provideContext:o,signTypedData:a,signTypedDataLegacy:l}=this.extractDependencies(e);return ia({types:{input:{},context:{},output:{}},actors:{openAppStateMachine:new sU({input:{appName:"Ethereum"}}).makeStateMachine(e),getAddress:n6(t),getAppConfig:n6(r),web3CheckOptIn:n6(n),buildContext:n6(s),provideContext:n6(o),signTypedData:n6(a),signTypedDataLegacy:n6(l)},guards:{noInternalError:({context:e})=>null===e._internalState.error,notRefusedByUser:({context:e})=>null!==e._internalState.error&&(!("errorCode"in e._internalState.error)||"6985"!==e._internalState.error.errorCode),isWeb3ChecksSupported:({context:t})=>new Ij(e.getDeviceSessionState(),t._internalState.appConfig).withMinVersionExclusive("1.15.0").excludeDeviceModel(rm.NANO_S).excludeDeviceModel(rm.NANO_SP).excludeDeviceModel(rm.NANO_X).check(),shouldOptIn:({context:e})=>!e._internalState.appConfig.web3ChecksEnabled&&!e._internalState.appConfig.web3ChecksOptIn,skipOpenApp:({context:e})=>e.input.skipOpenApp},actions:{assignErrorFromEvent:n5({_internalState:e=>({...e.context._internalState,error:e.event.error})})}}).createMachine({id:"SignTypedDataDeviceAction",initial:"InitialState",context:({input:e})=>({input:e,intermediateValue:{requiredUserInteraction:rP.None,step:vb.OPEN_APP},_internalState:{error:null,appConfig:null,from:null,typedDataContext:null,signature:null}}),states:{InitialState:{always:[{target:"GetAppConfig",guard:"skipOpenApp"},"OpenAppDeviceAction"]},OpenAppDeviceAction:{invoke:{id:"openAppStateMachine",input:{appName:"Ethereum"},src:"openAppStateMachine",onSnapshot:{actions:n5({intermediateValue:e=>({...e.event.snapshot.context.intermediateValue,step:vb.OPEN_APP})})},onDone:{actions:n5({_internalState:e=>e.event.output.caseOf({Right:()=>e.context._internalState,Left:t=>({...e.context._internalState,error:t})})}),target:"CheckOpenAppDeviceActionResult"}}},CheckOpenAppDeviceActionResult:{always:[{target:"GetAppConfig",guard:"noInternalError"},"Error"]},GetAppConfig:{entry:n5({intermediateValue:{requiredUserInteraction:rP.None,step:vb.GET_APP_CONFIG}}),invoke:{id:"getAppConfig",src:"getAppConfig",onDone:{target:"GetAppConfigResultCheck",actions:[n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,appConfig:e.output.data}:{...t._internalState,error:e.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GetAppConfigResultCheck:{always:[{target:"Web3ChecksOptIn",guard:np(["noInternalError","isWeb3ChecksSupported","shouldOptIn"])},{target:"GetAddress",guard:"noInternalError"},{target:"Error"}]},Web3ChecksOptIn:{entry:n5({intermediateValue:{requiredUserInteraction:rP.Web3ChecksOptIn,step:vb.WEB3_CHECKS_OPT_IN}}),invoke:{id:"web3CheckOptIn",src:"web3CheckOptIn",onDone:{target:"Web3ChecksOptInResult",actions:[n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,appConfig:{...t._internalState.appConfig,web3ChecksEnabled:e.output.data.enabled}}:t._internalState})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},Web3ChecksOptInResult:{entry:n5(({context:e})=>({intermediateValue:{requiredUserInteraction:rP.None,step:vb.WEB3_CHECKS_OPT_IN_RESULT,result:e._internalState.appConfig.web3ChecksEnabled}})),after:{0:{target:"GetAddress"}}},GetAddress:{entry:n5({intermediateValue:{requiredUserInteraction:rP.None,step:vb.GET_ADDRESS}}),invoke:{id:"getAddress",src:"getAddress",input:({context:e})=>({derivationPath:e.input.derivationPath}),onDone:{target:"BuildContext",actions:[n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,from:e.output.data.address}:{...t._internalState,error:e.output.error}})]},onError:{target:"Error"}}},BuildContext:{entry:n5({intermediateValue:{requiredUserInteraction:rP.None,step:vb.BUILD_CONTEXT}}),invoke:{id:"buildContext",src:"buildContext",input:({context:e})=>({contextModule:e.input.contextModule,parser:e.input.parser,transactionParser:e.input.transactionParser,transactionMapper:e.input.transactionMapper,data:e.input.data,appConfig:e._internalState.appConfig,derivationPath:e.input.derivationPath,from:e._internalState.from}),onDone:{target:"ProvideContext",actions:[n5({_internalState:({event:e,context:t})=>({...t._internalState,typedDataContext:e.output})})]},onError:{target:"SignTypedDataLegacy"}}},ProvideContext:{entry:n5({intermediateValue:{requiredUserInteraction:rP.SignTypedData,step:vb.PROVIDE_CONTEXT}}),invoke:{id:"provideContext",src:"provideContext",input:({context:e})=>({contextModule:e.input.contextModule,taskArgs:e._internalState.typedDataContext}),onDone:{actions:n5({_internalState:e=>tg(e.event.output)?e.context._internalState:{...e.context._internalState,error:e.event.output.error}}),target:"ProvideContextResultCheck"},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ProvideContextResultCheck:{always:[{guard:"noInternalError",target:"SignTypedData"},{guard:"notRefusedByUser",target:"SignTypedDataLegacy"},{target:"Error"}]},SignTypedData:{entry:n5({intermediateValue:{requiredUserInteraction:rP.SignTypedData,step:vb.SIGN_TYPED_DATA}}),invoke:{id:"signTypedData",src:"signTypedData",input:({context:e})=>({derivationPath:e.input.derivationPath}),onDone:{target:"SignTypedDataResultCheck",actions:[n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,signature:e.output.data}:{...t._internalState,error:e.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},SignTypedDataResultCheck:{always:[{guard:"noInternalError",target:"Success"},{guard:"notRefusedByUser",target:"SignTypedDataLegacy"},{target:"Error"}]},SignTypedDataLegacy:{entry:n5({intermediateValue:{requiredUserInteraction:rP.SignTypedData,step:vb.SIGN_TYPED_DATA_LEGACY}}),invoke:{id:"signTypedDataLegacy",src:"signTypedDataLegacy",input:({context:e})=>({derivationPath:e.input.derivationPath,data:e.input.data}),onDone:{target:"SignTypedDataLegacyResultCheck",actions:[n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,signature:e.output.data}:{...t._internalState,error:e.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},SignTypedDataLegacyResultCheck:{always:[{guard:"noInternalError",target:"Success"},{target:"Error"}]},Success:{type:"final"},Error:{type:"final"}},output:({context:e})=>e._internalState.signature?rU(e._internalState.signature):rM(e._internalState.error||new ic("No error in final state"))})}extractDependencies(e){return{getAddress:async t=>e.sendCommand(new kG(t.input)),getAppConfig:async()=>e.sendCommand(new kW),web3CheckOptIn:async()=>e.sendCommand(new kJ),buildContext:async t=>new IY(e,t.input.contextModule,t.input.parser,t.input.transactionParser,t.input.transactionMapper,t.input.data,t.input.derivationPath,t.input.appConfig,t.input.from).run(),provideContext:async t=>new _v(e,t.input.contextModule,t.input.taskArgs).run(),signTypedData:async t=>e.sendCommand(new kK({derivationPath:t.input.derivationPath,legacyArgs:rB})),signTypedDataLegacy:async t=>new Ov(e,t.input.data,t.input.derivationPath).run()}}}let Ow=class{constructor(e){eY(this,"name","signPersonalMessage"),eY(this,"args"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){let{data:e,isFirstChunk:t}=this.args;return new tl({cla:224,ins:8,p1:128*!t,p2:0}).addBufferToData(e).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e),r=t.extract8BitUInt();if(void 0===r)return tp({data:rB});let n=t.encodeToHexaString(t.extractFieldByLength(32),!0);if(!n)return tp({error:new td("R is missing")});let s=t.encodeToHexaString(t.extractFieldByLength(32),!0);return tp(s?{data:rR({r:n,s:s,v:r})}:{error:new td("S is missing")})})}},OE=class{constructor(e,t){this.api=e,this.args=t}async run(){let{derivationPath:e,message:t}=this.args,r=k$.splitPath(e),n=new to(t.length+1+(r.length+1)*4);n.add8BitUIntToData(r.length),r.forEach(e=>{n.add32BitUIntToData(e)}),n.add32BitUIntToData(t.length),"string"==typeof t?n.addAsciiStringToData(t):n.addBufferToData(t);let s=n.build(),o=await new _g(this.api,{data:s,commandFactory:e=>new Ow({data:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run();return tg(o)?o.data.mapOrDefault(e=>tp({data:e}),tp({error:new td("no signature returned")})):o}},OA={Dmk:Symbol.for("Dmk"),SessionId:Symbol.for("SessionId"),ContextModule:Symbol.for("ContextModule")},OS={SignTransactionUseCase:Symbol.for("SignTransactionUseCase"),TransactionParserService:Symbol.for("TransactionParserService"),TransactionMapperService:Symbol.for("TransactionMapperService"),TransactionMappers:Symbol.for("TransactionMappers")},Ok=class{constructor(e){this._args=e}run(){let{mapper:e,transaction:t}=this._args,{subset:r,type:n}=e.mapTransactionToSubset(t).unsafeCoerce();return{subset:r,type:n}}},OI=class{constructor(e){eY(this,"name","signTransaction"),eY(this,"errorHelper",new kz(kH,kq)),eY(this,"args"),this.args=e}getApdu(){let{serializedTransaction:e,isFirstChunk:t}=this.args;return new tl({cla:224,ins:4,p1:128*!t,p2:0}).addBufferToData(e).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e),r=t.extract8BitUInt();if(void 0===r)return tp({data:rB});let n=t.encodeToHexaString(t.extractFieldByLength(32),!0);if(!n)return tp({error:new td("R is missing")});let s=t.encodeToHexaString(t.extractFieldByLength(32),!0);return tp(s?{data:rR({v:r,r:n,s:s})}:{error:new td("S is missing")})})}},O_=class{constructor(){eY(this,"name","startTransaction"),eY(this,"errorHelper",new kz(kH,kq))}getApdu(){return new tl({cla:224,ins:4,p1:0,p2:2}).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e),r=t.extract8BitUInt();if(void 0===r)return tp({error:new td("V is missing")});let n=t.encodeToHexaString(t.extractFieldByLength(32),!0);if(!n)return tp({error:new td("R is missing")});let s=t.encodeToHexaString(t.extractFieldByLength(32),!0);return tp(s?{data:rR({v:r,r:n,s:s})}:{error:new td("S is missing")})})}};class OP{constructor(e,t){this.api=e,this.args=t}async run(){if(this.args.clearSigningType===kZ.EIP7730){let e=await this.api.sendCommand(new O_);return tg(e)?this.recoverSignature(e.data).mapOrDefault(e=>tp({data:e}),tp({error:new td("no signature returned")})):e}let{derivationPath:e,serializedTransaction:t}=this.args,r=k$.splitPath(e),n=new to(t.length+1+4*r.length);n.add8BitUIntToData(r.length),r.forEach(e=>{n.add32BitUIntToData(e)});let s=n.build(),o=this.getChunks(s,t),a=rB;for(let e=0;e<o.length;e++){let t=await this.api.sendCommand(new OI({serializedTransaction:o[e],isFirstChunk:0===e}));if(!tg(t))return t;a=t.data}return this.recoverSignature(a).mapOrDefault(e=>tp({data:e}),tp({error:new td("no signature returned")}))}getChunks(e,t){let r=Uint8Array.from([...e,...t]),n=ta;if(r.length<=n)return[r];if(this.args.transactionType===vv.LEGACY)try{let s=_V(t);if(Array.isArray(s)){let t=s.slice(-3),o=_W(t),a=tt(o).subarray(1);for(n=ta;n>e.length;n--){let e=r.length%n;if(0===e||e>a.length)break}}}catch{n=ta}let s=0,o=[];for(;s<r.length;)o.push(r.slice(s,s+n)),s+=n;return o}recoverSignature(e){return e.map(({v:e,r:t,s:r})=>{if(this.args.transactionType!==vv.LEGACY)return{v:e,r:t,s:r};let n=this.args.chainId;for(;n>0xffffffff;)n>>=8;return{v:+(e!=(2*n+35&255))+2*this.args.chainId+35,r:t,s:r}})}}class OC extends sv{makeStateMachine(e){let{getAddress:t,getAppConfig:r,web3CheckOptIn:n,parseTransaction:s,buildContexts:o,signTransaction:a,provideContexts:l}=this.extractDependencies(e);return ia({types:{input:{},context:{},output:{}},actors:{openAppStateMachine:new sU({input:{appName:"Ethereum"}}).makeStateMachine(e),getAddress:n6(t),getAppConfig:n6(r),web3CheckOptIn:n6(n),parseTransaction:n6(s),buildContexts:n6(o),provideContexts:n6(l),signTransaction:n6(a)},guards:{noInternalError:({context:e})=>null===e._internalState.error,notRefusedByUser:({context:e})=>null!==e._internalState.error&&(!("errorCode"in e._internalState.error)||"6985"!==e._internalState.error.errorCode),isWeb3ChecksSupported:({context:t})=>new Ij(e.getDeviceSessionState(),t._internalState.appConfig).withMinVersionExclusive("1.15.0").excludeDeviceModel(rm.NANO_S).excludeDeviceModel(rm.NANO_SP).excludeDeviceModel(rm.NANO_X).check(),shouldOptIn:({context:e})=>!e._internalState.appConfig.web3ChecksEnabled&&!e._internalState.appConfig.web3ChecksOptIn,skipOpenApp:({context:e})=>!!e.input.options.skipOpenApp},actions:{assignErrorFromEvent:n5({_internalState:e=>({...e.context._internalState,error:e.event.error})})}}).createMachine({id:"SignTransactionDeviceAction",initial:"InitialState",context:({input:e})=>({input:e,intermediateValue:{requiredUserInteraction:rP.None,step:vy.OPEN_APP},_internalState:{error:null,appConfig:null,subset:null,contexts:[],clearSigningType:null,transactionType:null,signature:null}}),states:{InitialState:{always:[{target:"GetAppConfig",guard:"skipOpenApp"},"OpenAppDeviceAction"]},OpenAppDeviceAction:{invoke:{id:"openAppStateMachine",input:{appName:"Ethereum"},src:"openAppStateMachine",onSnapshot:{actions:n5({intermediateValue:e=>({...e.event.snapshot.context.intermediateValue,step:vy.OPEN_APP})})},onDone:{actions:n5({_internalState:e=>e.event.output.caseOf({Right:()=>e.context._internalState,Left:t=>({...e.context._internalState,error:t})})}),target:"CheckOpenAppDeviceActionResult"}}},CheckOpenAppDeviceActionResult:{always:[{target:"GetAppConfig",guard:"noInternalError"},"Error"]},GetAppConfig:{entry:n5({intermediateValue:{requiredUserInteraction:rP.None,step:vy.GET_APP_CONFIG}}),invoke:{id:"getAppConfig",src:"getAppConfig",onDone:{target:"GetAppConfigResultCheck",actions:[n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,appConfig:e.output.data}:{...t._internalState,error:e.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GetAppConfigResultCheck:{always:[{target:"Web3ChecksOptIn",guard:np(["noInternalError","isWeb3ChecksSupported","shouldOptIn"])},{target:"ParseTransaction",guard:"noInternalError"},{target:"Error"}]},Web3ChecksOptIn:{entry:n5({intermediateValue:{requiredUserInteraction:rP.Web3ChecksOptIn,step:vy.WEB3_CHECKS_OPT_IN}}),invoke:{id:"web3CheckOptIn",src:"web3CheckOptIn",onDone:{target:"Web3ChecksOptInResult",actions:[n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,appConfig:{...t._internalState.appConfig,web3ChecksEnabled:e.output.data.enabled}}:t._internalState})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},Web3ChecksOptInResult:{entry:n5(({context:e})=>({intermediateValue:{requiredUserInteraction:rP.None,step:vy.WEB3_CHECKS_OPT_IN_RESULT,result:e._internalState.appConfig.web3ChecksEnabled}})),after:{0:{target:"ParseTransaction"}}},ParseTransaction:{entry:n5({intermediateValue:{requiredUserInteraction:rP.None,step:vy.PARSE_TRANSACTION}}),invoke:{id:"parseTransaction",src:"parseTransaction",input:({context:e})=>({mapper:e.input.mapper,transaction:e.input.transaction}),onDone:{target:"GetAddress",actions:n5({_internalState:({event:e,context:t})=>({...t._internalState,subset:e.output.subset,transactionType:e.output.type})})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GetAddress:{entry:n5({intermediateValue:{requiredUserInteraction:rP.None,step:vy.GET_ADDRESS}}),invoke:{id:"getAddress",src:"getAddress",input:({context:e})=>({derivationPath:e.input.derivationPath,checkOnDevice:!1,returnChainCode:!1}),onDone:{target:"BuildContexts",actions:n5({_internalState:({event:e,context:t})=>{if(tg(e.output)){let r={...t._internalState.subset,from:e.output.data.address};return{...t._internalState,subset:r}}return{...t._internalState}}})},onError:{target:"Error"}}},BuildContexts:{entry:n5({intermediateValue:{requiredUserInteraction:rP.None,step:vy.BUILD_CONTEXTS}}),invoke:{id:"buildContexts",src:"buildContexts",input:({context:t})=>({contextModule:t.input.contextModule,mapper:t.input.mapper,parser:t.input.parser,options:t.input.options,appConfig:t._internalState.appConfig,derivationPath:t.input.derivationPath,subset:t._internalState.subset,transaction:t.input.transaction,deviceModelId:e.getDeviceModel().id}),onDone:{target:"ProvideContexts",actions:[n5({_internalState:({event:e,context:t})=>({...t._internalState,contexts:e.output.clearSignContexts,clearSigningType:e.output.clearSigningType})})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ProvideContexts:{entry:n5({intermediateValue:{requiredUserInteraction:rP.None,step:vy.PROVIDE_CONTEXTS}}),exit:n5({_internalState:({context:e})=>({...e._internalState,contexts:e._internalState.contexts.slice(1)})}),invoke:{id:"provideContexts",src:"provideContexts",input:({context:e})=>({contexts:e._internalState.contexts,derivationPath:e.input.derivationPath,serializedTransaction:e.input.transaction}),onDone:{target:"SignTransaction"},onError:{target:"Error",actions:"assignErrorFromEvent"}}},SignTransaction:{entry:n5({intermediateValue:{requiredUserInteraction:rP.SignTransaction,step:vy.SIGN_TRANSACTION}}),invoke:{id:"signTransaction",src:"signTransaction",input:({context:e})=>({derivationPath:e.input.derivationPath,serializedTransaction:e.input.transaction,chainId:e._internalState.subset.chainId,transactionType:e._internalState.transactionType,clearSigningType:e._internalState.clearSigningType}),onDone:{target:"SignTransactionResultCheck",actions:[n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,signature:e.output.data}:{...t._internalState,error:e.output.error}})]},onError:{target:"SignTransactionResultCheck",actions:"assignErrorFromEvent"}}},SignTransactionResultCheck:{always:[{guard:"noInternalError",target:"Success"},{guard:"notRefusedByUser",target:"BlindSignTransactionFallback"},{target:"Error"}]},BlindSignTransactionFallback:{entry:n5({intermediateValue:{requiredUserInteraction:rP.None,step:vy.BLIND_SIGN_TRANSACTION_FALLBACK}}),invoke:{id:"blindSignTransactionFallback",src:"signTransaction",input:({context:e})=>({derivationPath:e.input.derivationPath,serializedTransaction:e.input.transaction,chainId:e._internalState.subset.chainId,transactionType:e._internalState.transactionType,clearSigningType:kZ.BASIC}),onDone:{target:"BlindSignTransactionFallbackResultCheck",actions:[n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,signature:e.output.data}:{...t._internalState,error:e.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},BlindSignTransactionFallbackResultCheck:{always:[{guard:"noInternalError",target:"Success"},{target:"Error"}]},Success:{type:"final"},Error:{type:"final"}},output:({context:e})=>e._internalState.signature?rU(e._internalState.signature):rM(e._internalState.error||new ic("No error in final state"))})}extractDependencies(e){return{getAddress:async t=>e.sendCommand(new kG(t.input)),getAppConfig:async()=>e.sendCommand(new kW),web3CheckOptIn:async()=>e.sendCommand(new kJ),parseTransaction:async e=>Promise.resolve(new Ok({mapper:e.input.mapper,transaction:e.input.transaction}).run()),buildContexts:async t=>new IG(e,t.input).run(),provideContexts:async t=>new _b(e,t.input).run(),signTransaction:async t=>new OP(e,{...t.input}).run()}}}var OO=((eN=OO||{}).OPEN_APP="signer.eth.steps.openApp",eN.BUILD_CONTEXTS="signer.eth.steps.buildContexts",eN.PROVIDE_CONTEXTS="signer.eth.steps.provideContexts",eN.VERIFY_SAFE_ADDRESS="signer.eth.steps.verifySafeAddress",eN);let OT=class{constructor(e,t){this._api=e,this._args=t}async run(){let e=await this._api.sendCommand(new kQ);if(!tg(e))throw Error("Failed to get challenge");let t=e.data.challenge,r=await this._args.contextModule.getContexts({safeContractAddress:this._args.safeContractAddress,chainId:this._args.options.chainId,deviceModelId:this._args.deviceModelId,challenge:t},[vI.SAFE,vI.SIGNER]);if(r.forEach(e=>{if(e.type===vI.ERROR)throw Error(e.error.message)}),2!==r.length||void 0===r.find(e=>e.type===vI.SAFE)||void 0===r.find(e=>e.type===vI.SIGNER))throw Error("Invalid safe address contexts");return{clearSignContexts:r}}},OR=class extends sv{makeStateMachine(e){let{buildSafeAddressContexts:t,provideContexts:r}=this.extractDependencies(e);return ia({types:{input:{},context:{},output:{}},actors:{openAppStateMachine:new sU({input:{appName:"Ethereum"}}).makeStateMachine(e),buildSafeAddressContexts:n6(t),provideContexts:n6(r)},guards:{noInternalError:({context:e})=>null===e._internalState.error,skipOpenApp:({context:e})=>!!e.input.options.skipOpenApp},actions:{assignErrorFromEvent:n5({_internalState:e=>({...e.context._internalState,error:e.event.error})})}}).createMachine({id:"VerifySafeAddressDeviceAction",initial:"InitialState",context:({input:e})=>({input:e,intermediateValue:{requiredUserInteraction:rP.None,step:OO.OPEN_APP},_internalState:{error:null,contexts:[]}}),states:{InitialState:{always:[{target:"BuildSafeAddressContexts",guard:"skipOpenApp"},"OpenAppDeviceAction"]},OpenAppDeviceAction:{invoke:{id:"openAppStateMachine",input:{appName:"Ethereum"},src:"openAppStateMachine",onSnapshot:{actions:n5({intermediateValue:e=>({...e.event.snapshot.context.intermediateValue,step:OO.OPEN_APP})})},onDone:{actions:n5({_internalState:e=>e.event.output.caseOf({Right:()=>e.context._internalState,Left:t=>({...e.context._internalState,error:t})})}),target:"CheckOpenAppDeviceActionResult"}}},CheckOpenAppDeviceActionResult:{always:[{target:"BuildSafeAddressContexts",guard:"noInternalError"},"Error"]},BuildSafeAddressContexts:{entry:n5({intermediateValue:{requiredUserInteraction:rP.None,step:OO.BUILD_CONTEXTS}}),invoke:{id:"buildSafeAddressContexts",src:"buildSafeAddressContexts",input:({context:t})=>({contextModule:t.input.contextModule,safeContractAddress:t.input.safeContractAddress,options:t.input.options,deviceModelId:e.getDeviceModel().id}),onDone:{target:"ProvideContexts",actions:[n5({_internalState:({event:e,context:t})=>({...t._internalState,contexts:e.output.clearSignContexts})})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ProvideContexts:{entry:n5({intermediateValue:{requiredUserInteraction:rP.None,step:OO.VERIFY_SAFE_ADDRESS}}),invoke:{id:"provideContexts",src:"provideContexts",input:({context:e})=>({contexts:e._internalState.contexts}),onDone:{target:"ProvideContextsResultCheck",actions:[n5({_internalState:({event:e,context:t})=>e.output.isLeft()?{...t._internalState,error:e.output.extract()}:{...t._internalState,error:null}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ProvideContextsResultCheck:{always:[{guard:"noInternalError",target:"Success"},{target:"Error"}]},Success:{type:"final"},Error:{type:"final"}},output:({context:e})=>e._internalState.error?rM(e._internalState.error):rU(void 0)})}extractDependencies(e){return{provideContexts:async t=>{for(let r of t.input.contexts){let t=await new _y(e,{context:r}).run();if(!tg(t))return rM(t.error)}return rU(void 0)},buildSafeAddressContexts:async t=>new OT(e,t.input).run()}}},OB=class{constructor(e){eY(this,"name","signEIP7702Authorization"),eY(this,"args"),eY(this,"errorHelper",new kz(kH,kq)),this.args=e}getApdu(){let{data:e,isFirstChunk:t}=this.args;return new tl({cla:224,ins:52,p1:+!!t,p2:0}).addBufferToData(e).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e),r=t.extract8BitUInt();if(void 0===r)return tp({data:rB});let n=t.encodeToHexaString(t.extractFieldByLength(32),!0);if(!n)return tp({error:new td("R is missing")});let s=t.encodeToHexaString(t.extractFieldByLength(32),!0);return tp(s?{data:rR({r:n,s:s,v:r})}:{error:new td("S is missing")})})}},ON=class{constructor(e,t){this.api=e,this.args=t}async run(){let{derivationPath:e,chainId:t,address:r,nonce:n}=this.args,s=k$.splitPath(e),o=this.buildData(s,t,r,n),a=await new _g(this.api,{data:o,commandFactory:e=>new OB({data:e.chunkedData,isFirstChunk:e.isFirstChunk})}).run();return tg(a)?a.data.mapOrDefault(e=>tp({data:e}),tp({error:new td("no signature returned")})):a}buildData(e,t,r,n){let s=new to;s.add8BitUIntToData(e.length),e.forEach(e=>{s.add32BitUIntToData(e)});let o=new to;o.encodeInTLVFromBuffer(0,Uint8Array.from([1])),o.encodeInTLVFromHexa(1,r),o.encodeInTLVFromUInt64(2,t),o.encodeInTLVFromUInt64(3,n);let a=o.build();return s.add16BitUIntToData(a.length).addBufferToData(a).build()}};var OD=Object.defineProperty,OL=Object.getOwnPropertyDescriptor,OM=(e,t)=>(r,n)=>t(r,n,e);let OU=class{constructor(e,t,r,n,s){this.dmk=e,this.contextModule=t,this.mapper=r,this.parser=n,this.sessionId=s}getAddress(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new ov({input:{command:new kG(e),appName:"Ethereum",requiredUserInteraction:e.checkOnDevice?rP.VerifyAddress:rP.None,skipOpenApp:e.skipOpenApp}})})}verifySafeAddress(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new OR({input:{safeContractAddress:e.safeContractAddress,contextModule:this.contextModule,options:e.options??{chainId:1}}})})}signPersonalMessage(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new sF({input:{task:async t=>new OE(t,e).run(),appName:"Ethereum",requiredUserInteraction:rP.SignPersonalMessage,skipOpenApp:e.skipOpenApp}})})}signTransaction(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new OC({input:{derivationPath:e.derivationPath,transaction:e.transaction,mapper:this.mapper,parser:this.parser,contextModule:this.contextModule,options:e.options??{}}})})}signTypedData(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new Ox({input:{derivationPath:e.derivationPath,data:e.data,parser:e.parser,transactionMapper:this.mapper,transactionParser:this.parser,contextModule:this.contextModule,skipOpenApp:e.skipOpenApp}})})}signDelegationAuthorization(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new sF({input:{task:async t=>new ON(t,e).run(),appName:"Ethereum",requiredUserInteraction:rP.SignDelegationAuthorization,skipOpenApp:!1}})})}};OU=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?OL(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&OD(t,r,o),o})([oZ(),OM(0,oW(OA.Dmk)),OM(1,oW(OA.ContextModule)),OM(2,oW(OS.TransactionMapperService)),OM(3,oW(OS.TransactionParserService)),OM(4,oW(OA.SessionId))],OU);let OF=()=>new aP(({bind:e})=>{e(kL.AppBinding).to(OU)}),Oj={SignDelegationAuthorizationUseCase:Symbol.for("SignDelegationAuthorizationUseCase")};var Oz=Object.defineProperty,O$=Object.getOwnPropertyDescriptor;let OH=class{constructor(e){eY(this,"_appBinder"),this._appBinder=e}execute(e,t,r,n){return this._appBinder.signDelegationAuthorization({derivationPath:e,nonce:t,address:r,chainId:n})}};OH=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?O$(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Oz(t,r,o),o})([oZ(),(eD=oW(kL.AppBinding),(e,t)=>eD(e,t,0))],OH);let OV=()=>new aP(({bind:e})=>{e(Oj.SignDelegationAuthorizationUseCase).to(OH)}),Oq={SignMessageUseCase:Symbol.for("SignMessageUseCase")};var OG=Object.defineProperty,OW=Object.getOwnPropertyDescriptor;let OK=class{constructor(e){eY(this,"_appBinder"),this._appBinder=e}execute(e,t,r){return this._appBinder.signPersonalMessage({derivationPath:e,message:t,skipOpenApp:(null==r?void 0:r.skipOpenApp)??!1})}};OK=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?OW(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&OG(t,r,o),o})([oZ(),(eL=oW(kL.AppBinding),(e,t)=>eL(e,t,0))],OK);let OJ=()=>new aP(({bind:e})=>{e(Oq.SignMessageUseCase).to(OK)});var OZ=Object.defineProperty,OQ=Object.getOwnPropertyDescriptor;let OX=class{constructor(e){eY(this,"_appBinder"),this._appBinder=e}execute(e,t){return this._appBinder.verifySafeAddress({safeContractAddress:e,options:t})}};OX=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?OQ(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&OZ(t,r,o),o})([oZ(),(eM=oW(kL.AppBinding),(e,t)=>eM(e,t,0))],OX);let OY={VerifySafeAddressUseCase:Symbol.for("VerifySafeAddressUseCase")},O0=()=>new aP(({bind:e})=>{e(OY.VerifySafeAddressUseCase).to(OX)});var O1=Object.defineProperty,O2=Object.getOwnPropertyDescriptor;let O3=class{constructor(){}mapTransactionToSubset(e){try{let t=Or.from(tr(e)),r=Number(t.chainId.toString());return r<=0?rM(Error("Pre-EIP-155 transactions are not supported")):rU({subset:{chainId:r,to:t.to??void 0,data:t.data,selector:t.data.length>=10?t.data.slice(0,10):t.data,value:t.value},serializedTransaction:_k(t.unsignedSerialized),type:t.type||0})}catch{return rM(Error("Invalid transaction"))}}};O3=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?O2(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&O1(t,r,o),o})([oZ()],O3);var O8=Object.defineProperty,O6=Object.getOwnPropertyDescriptor;let O4=class{extractValue(e,t){let{to:r,data:n,value:s}=e;return t===kR.FROM?rM(Error("Cannot get 'FROM' field of an unsigned transaction")):t===kR.TO?rC.fromNullable(r).map(e=>tt(e)).filter(e=>null!==e).map(e=>[e]).toEither(Error("Failed to extract TO field of transaction")):t===kR.VALUE?rC.fromNullable(s).map(e=>new to().add256BitUIntToData(e).build()).map(e=>[e]).toEither(Error("Failed to extract VALUE field of transaction")):rC.fromNullable(n).toEither(Error("Transaction calldata is empty")).chain(e=>rC.fromNullable(tt(e)).toEither(Error(`Invalid hex string calldata: ${e}`))).chain(e=>this.extractCalldataValue(e,t))}extractCalldataValue(e,t){return e=e.slice(4),0===t.length?rM(Error("Path is empty")):this.extractCalldataValueAt(e,t,0,0)}extractCalldataValueAt(e,t,r,n){let s=t[t.length-1],o=s.type===kB.SLICE?s:null;for(;t.length>0;){let s=t[0];switch(t=t.slice(1),s.type){case kB.TUPLE:n=r,r+=32*s.offset;break;case kB.ARRAY:return this.getU256(e.slice(r)).toEither(Error(`Invalid array length at offset ${r}`)).chain(o=>{r+=32,n=r;let a=void 0===s.start?0:s.start<0?o+s.start:s.start,l=void 0===s.end?o:s.end<0?o+s.end:s.end;return a<0||a>=o||l>o||a>=l?rM(Error(`Array slice out of bounds, start=${s.start}, end=${s.end}`)):Array.from({length:l-a},(e,t)=>t).map(e=>r+(e+a)*s.itemSize*32).reduce((r,s)=>r.chain(r=>this.extractCalldataValueAt(e,t,s,n).map(e=>[...r,...e])),rU([]))});case kB.REF:if(this.getU256(e.slice(r)).ifJust(e=>r=n+e).isNothing())return rM(Error(`Invalid ref at offset ${r}`));break;case kB.LEAF:switch(s.leafType){case kN.ARRAY_LEAF:return rM(Error("Array leaf is not supported in v1 of protocol"));case kN.TUPLE_LEAF:return rM(Error("Tuple leaf is not supported in v1 of protocol"));case kN.STATIC_LEAF:return this.getSlice(e,r,32).chain(e=>null===o?rU([e]):this.sliceLeaf(e,o));case kN.DYNAMIC_LEAF:return this.getU256(e.slice(r)).toEither(Error(`Invalid leaf length at offset ${r}`)).chain(t=>(r+=32,this.getSlice(e,r,t).chain(e=>null===o?rU([e]):this.sliceLeaf(e,o))))}break;case kB.SLICE:return rM(Error("Slice can only be used as last element of the path"))}}return rM(Error("Path did not resolve to a leaf element"))}sliceLeaf(e,t){let r=e.length,n=void 0===t.start?0:t.start<0?r+t.start:t.start,s=void 0===t.end?r:t.end<0?r+t.end:t.end;return n>=s?rM(Error(`invalid leaf slice: start ${n}, end ${s}`)):this.getSlice(e,n,s-n).map(e=>[e])}getSlice(e,t,r){return t<0||e.length<t+r?rM(Error(`calldata too small to slice at offset ${t} of length ${r}`)):rU(e.slice(t,t+r))}getU256(e){return rC.fromNullable(new tu(e).extract256BitUInt(!0)).filter(e=>e<=Number.MAX_SAFE_INTEGER).map(e=>Number(e))}};O4=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?O6(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&O8(t,r,o),o})([oZ()],O4);var O5=Object.defineProperty,O9=Object.getOwnPropertyDescriptor;let O7=class{constructor(e){eY(this,"_appBinding"),this._appBinding=e}execute(e,t,r){return this._appBinding.signTransaction({derivationPath:e,transaction:t,options:r})}};O7=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?O9(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&O5(t,r,o),o})([oZ(),(eU=oW(kL.AppBinding),(e,t)=>eU(e,t,0))],O7);let Te=()=>new aP(({bind:e})=>{e(OS.SignTransactionUseCase).to(O7),e(OS.TransactionMapperService).to(O3),e(OS.TransactionParserService).to(O4)}),Tt={SignTypedDataUseCase:Symbol.for("SignTypedDataUseCase"),TypedDataParserService:Symbol.for("TypedDataParserService")},Tr=class{constructor(e,t){if(eY(this,"domainTypeName","EIP712Domain"),eY(this,"domainDefaultTypes",{name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"}),eY(this,"structs"),!(this.domainTypeName in e)){let r=[];Object.entries(this.domainDefaultTypes).forEach(([e,n])=>{e in t&&r.push({name:e,type:n})}),r.length>0&&(e[this.domainTypeName]=r)}let r={};for(let[t,n]of Object.entries(e)){let e={};for(let t of n)e[t.name]=this.parseType(t.type);r[t]=e}this.structs=r}getStructDefinitions(){return this.structs}parse(e,t){if(!this.isRecord(t))return rM(Error("Message is not a record"));let r=[{path:"",type:"",value:new IZ(e)}];return this.visitValue(e,t,"",e=>r.push(e))?rU(r):rM(Error("Failed to parse"))}isRecord(e){return"object"==typeof e&&null!==e}parseType(e){return this.tryParsePrimitiveType(e).mapOrDefault(e=>e,this.tryParseArrayType(e).mapOrDefault(e=>e,new IJ(e)))}tryParsePrimitiveType(e){{let t=e.match(/^(((u?)int)(\d+))$/);if(t){let e=parseInt(t[4]);return e%8!=0||0===e||e>256?rB:rR(new IW(t[1],t[3]?"uint":"int",rR(e/8)))}}{let t=e.match(/^((bytes)(\d*))$/);if(t){let e=t[3]?parseInt(t[3]):null;return null!==e&&(0===e||e>32)?rB:rR(new IW(t[1],"bytes",rC.fromNullable(e)))}}return"address"===e||"bool"===e||"string"===e?rR(new IW(e,e,rB)):rB}tryParseArrayType(e){let t=e.match(/^([^[[]*)(((\[\d*\])*)\[\d*\])$/);if(t){let r=[...t[2].matchAll(/\[(\d*)\]/g)];if(r&&r.length>0){let n=r.map(([,e])=>e?rR(parseInt(e)):rB);return rR(new IK(e,this.tryParsePrimitiveType(t[1]).mapOrDefault(e=>e,new IJ(t[1])),t[1]+t[3],n[n.length-1],n))}}return rB}visitValue(e,t,r,n){return this.tryVisitStructValue(e,t,r,n)||this.tryVisitPrimitiveValue(e,t,r,n)||this.tryVisitArrayValue(e,t,r,n)}tryVisitPrimitiveValue(e,t,r,n){return!this.isRecord(t)&&!Array.isArray(t)&&this.tryParsePrimitiveType(e).chain(s=>(function(e,t){switch(e.name){case"string":return"string"!=typeof t?rB:rR(new TextEncoder().encode(t));case"bytes":case"address":return"string"!=typeof t?rB:function(e,t){let r="address"===e.name?rR(20):e.size;return rC.fromNullable(tt(t)).filter(e=>r.mapOrDefault(t=>e.length<=t,!0))}(e,t);case"bool":case"uint":case"int":return"bool"===e.name&&"boolean"==typeof t&&(t=Number(t)),"string"!=typeof t&&"number"!=typeof t&&"bigint"!=typeof t?rB:function(e,t,r){let n;switch(typeof r){case"bigint":n=r;break;case"number":if(!Number.isInteger(r))return rB;n=BigInt(r);break;case"string":if(0===r.length)return rB;try{n=BigInt(r)}catch{return rB}}return(function(e,t,r){if(!r)return e>=0n&&e<1n<<t?rR(e):rB;let n=1n<<t-1n;return e>=n||e<-n?rB:(e<0n&&(e=(~(e=-e)&(1n<<t)-1n)+1n),rR(e))})(n,BigInt(t),"int"===e).chain(e=>rC.fromNullable(tt(e.toString(16))))}(e.name,e.size.mapOrDefault(e=>8*e,1),t)}})(s,t).ifJust(t=>{n({path:r,type:e,value:new IX(t)})})).isJust()}tryVisitStructValue(e,t,r,n){let s=this.structs[e];if(void 0===s||!this.isRecord(t))return!1;for(let[e,o]of Object.entries(s)){let s=t[e];if(void 0===s)return!1;let a=r.length?`${r}.${e}`:e;if(!this.visitValue(o.typeName,s,`${a}`,n))return!1}return!0}tryVisitArrayValue(e,t,r,n){return Array.isArray(t)&&this.tryParseArrayType(e).filter(e=>e.count.mapOrDefault(e=>t.length==e,!0)).mapOrDefault(s=>{for(let o of(n({path:r,type:e,value:new IQ(t.length)}),t)){let e=r.length?`${r}.[]`:"[]";if(!this.visitValue(s.rowType,o,`${e}`,n))return!1}return!0},!1)}};var Tn=Object.defineProperty,Ti=Object.getOwnPropertyDescriptor;let Ts=class{parse(e){let t=new Tr(e.types,e.domain),r=t.getStructDefinitions(),n=t.parse("EIP712Domain",e.domain),s=t.parse(e.primaryType,e.message);return n.chain(e=>s.map(t=>({types:r,domain:e,message:t})))}};Ts=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Ti(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&Tn(t,r,o),o})([oZ()],Ts);var To=Object.defineProperty,Ta=Object.getOwnPropertyDescriptor,Tl=(e,t)=>(r,n)=>t(r,n,e);let Tu=class{constructor(e,t){eY(this,"_appBinding"),eY(this,"_parser"),this._appBinding=e,this._parser=t}execute(e,t,r){return this._appBinding.signTypedData({derivationPath:e,parser:this._parser,data:t,skipOpenApp:(null==r?void 0:r.skipOpenApp)??!1})}};Tu=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?Ta(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&To(t,r,o),o})([oZ(),Tl(0,oW(kL.AppBinding)),Tl(1,oW(Tt.TypedDataParserService))],Tu);let Tc=()=>new aP(({bind:e})=>{e(Tt.SignTypedDataUseCase).to(Tu),e(Tt.TypedDataParserService).to(Ts)}),Td=({dmk:e,sessionId:t,contextModule:r})=>{let n=new aZ;return n.bind(OA.Dmk).toConstantValue(e),n.bind(OA.ContextModule).toConstantValue(r),n.bind(OA.SessionId).toConstantValue(t),n.loadSync(kj(),OF(),OV(),OJ(),Te(),Tc(),O0()),n},Tf=class{constructor({dmk:e,sessionId:t,contextModule:r}){eY(this,"_container"),this._container=Td({dmk:e,sessionId:t,contextModule:r})}signTransaction(e,t,r){return this._container.get(OS.SignTransactionUseCase).execute(e,t,r)}signMessage(e,t,r){return this._container.get(Oq.SignMessageUseCase).execute(e,t,r)}signTypedData(e,t,r){return this._container.get(Tt.SignTypedDataUseCase).execute(e,t,r)}getAddress(e,t){return this._container.get(kD.GetAddressUseCase).execute(e,t)}verifySafeAddress(e,t){return this._container.get(OY.VerifySafeAddressUseCase).execute(e,t)}signDelegationAuthorization(e,t,r,n){return this._container.get(Oj.SignDelegationAuthorizationUseCase).execute(e,n,r,t)}},Th=class{constructor({dmk:e,sessionId:t,originToken:r}){eY(this,"_dmk"),eY(this,"_sessionId"),eY(this,"_customContextModule"),eY(this,"_originToken"),this._dmk=e,this._sessionId=t,this._originToken=r}withContextModule(e){return this._customContextModule=e,this}build(){let e=this._customContextModule??new kT({originToken:this._originToken}).build();return new Tf({dmk:this._dmk,sessionId:this._sessionId,contextModule:e})}},Tp={GetAddressUseCase:Symbol.for("GetAddressUseCase"),GetAppConfigurationUseCase:Symbol.for("GetAppConfigurationUseCase"),SignTransactionUseCase:Symbol.for("SignTransactionUseCase"),GenerateTransactionUseCase:Symbol.for("GenerateTransactionUseCase"),SignMessageUseCase:Symbol.for("SignMessageUseCase")},Tg={AppBinder:Symbol.for("AppBinder")},Tm=function(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){let n=e.charAt(r),s=n.charCodeAt(0);if(255!==t[s])throw TypeError(n+" is ambiguous");t[s]=r}let r=e.length,n=e.charAt(0),s=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function a(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let o=0,a=0,l=0;for(;e[o]===n;)a++,o++;let u=(e.length-o)*s+1>>>0,c=new Uint8Array(u);for(;o<e.length;){let n=e.charCodeAt(o);if(n>255)return;let s=t[n];if(255===s)return;let a=0;for(let e=u-1;(0!==s||a<l)&&-1!==e;e--,a++)s+=r*c[e]>>>0,c[e]=s%256>>>0,s=s/256>>>0;if(0!==s)throw Error("Non-zero carry");l=a,o++}let d=u-l;for(;d!==u&&0===c[d];)d++;let f=new Uint8Array(a+(u-d)),h=a;for(;d!==u;)f[h++]=c[d++];return f}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let s=0,a=0,l=0,u=t.length;for(;l!==u&&0===t[l];)l++,s++;let c=(u-l)*o+1>>>0,d=new Uint8Array(c);for(;l!==u;){let e=t[l],n=0;for(let t=c-1;(0!==e||n<a)&&-1!==t;t--,n++)e+=256*d[t]>>>0,d[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw Error("Non-zero carry");a=n,l++}let f=c-a;for(;f!==c&&0===d[f];)f++;let h=n.repeat(s);for(;f<c;++f)h+=e.charAt(d[f]);return h},decodeUnsafe:a,decode:function(e){let t=a(e);if(t)return t;throw Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Ty=class{static encode(e){return Tm.encode(e)}static decode(e){return Tm.decode(e)}},Tb={6700:{message:"Incorrect length"},6982:{message:"Security status not satisfied (Canceled by user)"},"6a80":{message:"Invalid data"},"6a81":{message:"Invalid off-chain message header"},"6a82":{message:"Invalid off-chain message format"},"6b00":{message:"Incorrect parameter P1 or P2"}};class Tv extends ty{constructor(e){super({tag:"SolanaAppCommandError",...e})}}let Tx=e=>new Tv(e),Tw=class{constructor(e,t=Ty){eY(this,"name","getPubKey"),eY(this,"errorHelper",new kz(Tb,Tx)),eY(this,"args"),this.bs58Encoder=t,this.args=e}getApdu(){let e=new tl({cla:224,ins:5,p1:+!!this.args.checkOnDevice,p2:0}),t=this.args.derivationPath,r=k$.splitPath(t);return e.add8BitUIntToData(r.length),r.forEach(t=>{e.add32BitUIntToData(t)}),e.build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e);if(!1===t.testMinimalLength(32))return tp({error:new td("Public key is missing")});let r=t.extractFieldByLength(32);return tp(void 0===r?{error:new td("Unable to extract public key")}:{data:this.bs58Encoder.encode(r)})})}},TE={INIT:0,EXTEND:1,MORE:2},TA=class{constructor(e){eY(this,"name","signOffChainMessage"),this.args=e}getApdu(){return new tl({cla:224,ins:7,p1:1,p2:(this.args.extend?TE.EXTEND:TE.INIT)|(this.args.more?TE.MORE:0)}).addBufferToData(this.args.chunkedData).build()}parseResponse(e){let t=new tc(e).extractFieldByLength(64);return t&&64===t.length?tp({data:t}):tp({data:new Uint8Array(0)})}},TS=class{constructor(e,t){this.api=e,this.args=t}async run(){let{data:e,commandFactory:t}=this.args,r=new to(e.length).addBufferToData(e).build();for(let e=0;e<r.length;e+=ta){let n=e+ta>=r.length,s=await this.api.sendCommand(t({more:!n,extend:e>0,chunkedData:r.slice(e,e+ta)}));if(!tg(s))return s;if(n)return tp({data:s.data})}throw new td("No result after processing all chunks")}};var Tk=((eF=Tk||{})[eF.Ascii=0]="Ascii",eF[eF.Utf8=1]="Utf8",eF[eF.Utf8LongV0=2]="Utf8LongV0",eF);class TI{constructor(e,t,r=Ty){this.api=e,this.args=t,this.bs58Encoder=r}async run(){let{sendingData:e,derivationPath:t}=this.args;if(0===e.length)return tp({error:new td("Message cannot be empty")});if(e.length>65515)return tp({error:new td(`Message too long: ${e.length} bytes (max is 65515)`)});let r=k$.splitPath(t),n=await this.api.sendCommand(new Tw({derivationPath:t,checkOnDevice:!1}));if(!("data"in n))return tp({error:new td("Error getting public key from device")});let s=this.bs58Encoder.decode(n.data),o=this._buildFullMessage(e,s,!1),a=this._buildApduCommand(o,r),l=await this._sendInChunks(a);if(tg(l))try{let e=this._buildEnvelopeBase58(l.data,o);return tp({data:{signature:e}})}catch(e){return tp({error:new td(e instanceof Error?e.message:String(e))})}let u="error"in l?l.error:void 0;if(this._isInvalidOffchainHeaderError(u)){if(e.length>1232)return l;let t=this._buildFullMessage(e,s,!0),n=this._buildApduCommand(t,r),o=await this._sendInChunks(n);if(tg(o))try{let e=this._buildEnvelopeBase58(o.data,t);return tp({data:{signature:e}})}catch(e){return tp({error:new td(e instanceof Error?e.message:String(e))})}return o}return l}_isUTF8(e){try{return new TextDecoder("utf-8",{fatal:!0}).decode(e),!0}catch{return!1}}_findMessageFormat(e,t){let r=t?1232:15312;if(e.length<=r){if(this._isPrintableASCII(e,t))return 0;if(this._isUTF8(e))return 1}else if(e.length<=65515){if(this._isUTF8(e))return 2}else throw new td(`Message too long: ${e.length} bytes (max is 65515)`);return 0}_isPrintableASCII(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(!(!t&&10===n)&&(n<32||n>126))return!1}return!0}_buildFullMessage(e,t,r){let n=this._findMessageFormat(e,r),s=new to;return s.add8BitUIntToData(255).addAsciiStringToData("solana offchain"),s.add8BitUIntToData(0),r||s.addBufferToData(new Uint8Array(32)),s.add8BitUIntToData(n),r||(s.add8BitUIntToData(1),s.addBufferToData(t)),s.add8BitUIntToData(255&e.length),s.add8BitUIntToData(e.length>>8&255),s.addBufferToData(e),s.build()}_isInvalidOffchainHeaderError(e){if(!e||"object"!=typeof e)return!1;let t=e._tag,r=e.errorCode;return"string"==typeof t&&"string"==typeof r&&"6a81"===r.toLowerCase()}_buildApduCommand(e,t){let r=new to(2+4*t.length+e.length);return r.add8BitUIntToData(1),r.add8BitUIntToData(t.length),t.forEach(e=>r.add32BitUIntToData(e)),r.addBufferToData(e),r.build()}async _sendInChunks(e){return await new TS(this.api,{data:e,commandFactory:e=>new TA(e)}).run()}_buildEnvelopeBase58(e,t){if(64!==e.length)throw new td(`Invalid signature length: ${e.length} (expected 64)`);let r=Uint8Array.of(1),n=new Uint8Array(r.length+e.length+t.length);return n.set(r,0),n.set(e,r.length),n.set(t,r.length+e.length),this.bs58Encoder.encode(n)}}let T_={Dmk:Symbol.for("Dmk"),SessionId:Symbol.for("SessionId"),ContextModule:Symbol.for("ContextModule")};var TP=((ej=TP||{}).LONG="long",ej.SHORT="short",ej);class TC{constructor(e){eY(this,"name","getAppConfiguration"),eY(this,"errorHelper",new kz(Tb,Tx)),eY(this,"args"),this.args=e}getApdu(){return new tl({cla:224,ins:4,p1:0,p2:0}).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e).extractFieldByLength(5);return!t||5!==t.length||t.some(e=>void 0===e)?tp({error:new td("Invalid response")}):tp({data:{blindSigningEnabled:!!t[0],pubKeyDisplayMode:0===t[1]?TP.LONG:TP.SHORT,version:`${t[2]}.${t[3]}.${t[4]}`}})})}}var TO={},TT={};TT.byteLength=function(e){var t=TU(e),r=t[0],n=t[1];return(r+n)*3/4-n},TT.toByteArray=function(e){var t,r,n=TU(e),s=n[0],o=n[1],a=new TN((s+o)*3/4-o),l=0,u=o>0?s-4:s;for(r=0;r<u;r+=4)t=TB[e.charCodeAt(r)]<<18|TB[e.charCodeAt(r+1)]<<12|TB[e.charCodeAt(r+2)]<<6|TB[e.charCodeAt(r+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=255&t;return 2===o&&(t=TB[e.charCodeAt(r)]<<2|TB[e.charCodeAt(r+1)]>>4,a[l++]=255&t),1===o&&(t=TB[e.charCodeAt(r)]<<10|TB[e.charCodeAt(r+1)]<<4|TB[e.charCodeAt(r+2)]>>2,a[l++]=t>>8&255,a[l++]=255&t),a},TT.fromByteArray=function(e){for(var t,r=e.length,n=r%3,s=[],o=0,a=r-n;o<a;o+=16383)s.push(function(e,t,r){for(var n,s=[],o=t;o<r;o+=3)s.push(TR[(n=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+TR[n>>12&63]+TR[n>>6&63]+TR[63&n]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===n?s.push(TR[(t=e[r-1])>>2]+TR[t<<4&63]+"=="):2===n&&s.push(TR[(t=(e[r-2]<<8)+e[r-1])>>10]+TR[t>>4&63]+TR[t<<2&63]+"="),s.join("")};for(var TR=[],TB=[],TN="u">typeof Uint8Array?Uint8Array:Array,TD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",TL=0,TM=TD.length;TL<TM;++TL)TR[TL]=TD[TL],TB[TD.charCodeAt(TL)]=TL;function TU(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}TB[45]=62,TB[95]=63;var TF={};TF.read=function(e,t,r,n,s){var o,a,l=8*s-n-1,u=(1<<l)-1,c=u>>1,d=-7,f=r?s-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-d)-1,p>>=-d,d+=l;d>0;o=256*o+e[t+f],f+=h,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=n;d>0;a=256*a+e[t+f],f+=h,d-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},TF.write=function(e,t,r,n,s,o){var a,l,u,c=8*o-s-1,d=(1<<c)-1,f=d>>1,h=5960464477539062e-23*(23===s),p=n?0:o-1,g=n?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(l=+!!isNaN(t),a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+f>=1?t+=h/u:t+=h*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=d?(l=0,a=d):a+f>=1?(l=(t*u-1)*Math.pow(2,s),a+=f):(l=t*Math.pow(2,f-1)*Math.pow(2,s),a=0));s>=8;e[r+p]=255&l,p+=g,l/=256,s-=8);for(a=a<<s|l,c+=s;c>0;e[r+p]=255&a,p+=g,a/=256,c-=8);e[r+p-g]|=128*m},function(e){let t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function r(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,n.prototype),t}function n(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return a(e)}return s(e,t,r)}function s(e,t,s){if("string"==typeof e){var o=e,a=t;if(("string"!=typeof a||""===a)&&(a="utf8"),!n.isEncoding(a))throw TypeError("Unknown encoding: "+a);let s=0|d(o,a),l=r(s),u=l.write(o,a);return u!==s&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e)){var f=e;if(N(f,Uint8Array)){let e=new Uint8Array(f);return u(e.buffer,e.byteOffset,e.byteLength)}return l(f)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(N(e,ArrayBuffer)||e&&N(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(N(e,SharedArrayBuffer)||e&&N(e.buffer,SharedArrayBuffer)))return u(e,t,s);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let h=e.valueOf&&e.valueOf();if(null!=h&&h!==e)return n.from(h,t,s);let p=function(e){if(n.isBuffer(e)){let t=0|c(e.length),n=r(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?r(0):l(e):"Buffer"===e.type&&Array.isArray(e.data)?l(e.data):void 0}(e);if(p)return p;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return n.from(e[Symbol.toPrimitive]("string"),t,s);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return o(e),r(e<0?0:0|c(e))}function l(e){let t=e.length<0?0:0|c(e.length),n=r(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function u(e,t,r){let s;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(s=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),n.prototype),s}function c(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function d(e,t){if(n.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||N(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return R(e).length;default:if(o)return s?-1:T(e).length;t=(""+t).toLowerCase(),o=!0}}function f(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let s="";for(let n=t;n<r;++n)s+=D[e[n]];return s}(this,t,r);case"utf8":case"utf-8":return m(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let s=t;s<r;++s)n+=String.fromCharCode(127&e[s]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let s=t;s<r;++s)n+=String.fromCharCode(e[s]);return n}(this,t,r);case"base64":var s,o,a;return s=this,o=t,a=r,0===o&&a===s.length?TT.fromByteArray(s):TT.fromByteArray(s.slice(o,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),s="";for(let e=0;e<n.length-1;e+=2)s+=String.fromCharCode(n[e]+256*n[e+1]);return s}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function h(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function p(e,t,r,s,o){var a;if(0===e.length)return -1;if("string"==typeof r?(s=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(a=r*=1)!=a&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return -1;r=e.length-1}else if(r<0)if(!o)return -1;else r=0;if("string"==typeof t&&(t=n.from(t,s)),n.isBuffer(t))return 0===t.length?-1:g(e,t,r,s,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,s,o);throw TypeError("val must be string, number or Buffer")}function g(e,t,r,n,s){let o,a=1,l=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;a=2,l/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(s){let n=-1;for(o=r;o<l;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*a}else -1!==n&&(o-=o-n),n=-1}else for(r+u>l&&(r=l-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return -1}function m(e,t,r){r=Math.min(e.length,r);let n=[],s=t;for(;s<r;){let t=e[s],o=null,a=t>239?4:t>223?3:t>191?2:1;if(s+a<=r){let r,n,l,u;switch(a){case 1:t<128&&(o=t);break;case 2:(192&(r=e[s+1]))==128&&(u=(31&t)<<6|63&r)>127&&(o=u);break;case 3:r=e[s+1],n=e[s+2],(192&r)==128&&(192&n)==128&&(u=(15&t)<<12|(63&r)<<6|63&n)>2047&&(u<55296||u>57343)&&(o=u);break;case 4:r=e[s+1],n=e[s+2],l=e[s+3],(192&r)==128&&(192&n)==128&&(192&l)==128&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&l)>65535&&u<1114112&&(o=u)}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),s+=a}var o=n;let a=o.length;if(a<=4096)return String.fromCharCode.apply(String,o);let l="",u=0;for(;u<a;)l+=String.fromCharCode.apply(String,o.slice(u,u+=4096));return l}function y(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function b(e,t,r,s,o,a){if(!n.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw RangeError('"value" argument is out of bounds');if(r+s>e.length)throw RangeError("Index out of range")}function v(e,t,r,n,s){_(t,n,s,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function x(e,t,r,n,s){_(t,n,s,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function w(e,t,r,n,s,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function E(e,t,r,n,s){return t*=1,r>>>=0,s||w(e,t,r,4),TF.write(e,t,r,n,23,4),r+4}function A(e,t,r,n,s){return t*=1,r>>>=0,s||w(e,t,r,8),TF.write(e,t,r,n,52,8),r+8}e.Buffer=n,e.SlowBuffer=function(e){return+e!=e&&(e=0),n.alloc(+e)},e.INSPECT_MAX_BYTES=50,e.kMaxLength=0x7fffffff,n.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),!n.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(e,t,n){return o(e),e<=0?r(e):void 0!==t?"string"==typeof n?r(e).fill(t,n):r(e).fill(t):r(e)},n.allocUnsafe=function(e){return a(e)},n.allocUnsafeSlow=function(e){return a(e)},n.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==n.prototype},n.compare=function(e,t){if(N(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),N(t,Uint8Array)&&(t=n.from(t,t.offset,t.byteLength)),!n.isBuffer(e)||!n.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,s=t.length;for(let n=0,o=Math.min(r,s);n<o;++n)if(e[n]!==t[n]){r=e[n],s=t[n];break}return r<s?-1:+(s<r)},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return n.alloc(0);if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let s=n.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){let t=e[r];if(N(t,Uint8Array))o+t.length>s.length?(n.isBuffer(t)||(t=n.from(t)),t.copy(s,o)):Uint8Array.prototype.set.call(s,t,o);else if(n.isBuffer(t))t.copy(s,o);else throw TypeError('"list" argument must be an Array of Buffers');o+=t.length}return s},n.byteLength=d,n.prototype._isBuffer=!0,n.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)h(this,t,t+1);return this},n.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},n.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},n.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?m(this,0,e):f.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(e){if(!n.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===n.compare(this,e)},n.prototype.inspect=function(){let t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},t&&(n.prototype[t]=n.prototype.inspect),n.prototype.compare=function(e,t,r,s,o){if(N(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),!n.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===o&&(o=this.length),t<0||r>e.length||s<0||o>this.length)throw RangeError("out of range index");if(s>=o&&t>=r)return 0;if(s>=o)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,s>>>=0,o>>>=0,this===e)return 0;let a=o-s,l=r-t,u=Math.min(a,l),c=this.slice(s,o),d=e.slice(t,r);for(let e=0;e<u;++e)if(c[e]!==d[e]){a=c[e],l=d[e];break}return a<l?-1:+(l<a)},n.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},n.prototype.indexOf=function(e,t,r){return p(this,e,t,r,!0)},n.prototype.lastIndexOf=function(e,t,r){return p(this,e,t,r,!1)},n.prototype.write=function(e,t,r,n){var s,o,a,l,u,c,d,f;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let p=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let s;r=Number(r)||0;let o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;let a=t.length;for(n>a/2&&(n=a/2),s=0;s<n;++s){var l;let n=parseInt(t.substr(2*s,2),16);if((l=n)!=l)break;e[r+s]=n}return s}(this,e,t,r);case"utf8":case"utf-8":return s=t,o=r,B(T(e,this.length-s),this,s,o);case"ascii":case"latin1":case"binary":return a=t,l=r,B(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,a,l);case"base64":return u=t,c=r,B(R(e),this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d=t,f=r,B(function(e,t){let r,n,s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,s.push(r%256),s.push(n);return s}(e,this.length-d),this,d,f);default:if(p)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let s=this.subarray(e,t);return Object.setPrototypeOf(s,n.prototype),s},n.prototype.readUintLE=n.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);let n=this[e],s=1,o=0;for(;++o<t&&(s*=256);)n+=this[e+o]*s;return n},n.prototype.readUintBE=n.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);let n=this[e+--t],s=1;for(;t>0&&(s*=256);)n+=this[e+--t]*s;return n},n.prototype.readUint8=n.prototype.readUInt8=function(e,t){return e>>>=0,t||y(e,1,this.length),this[e]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readBigUInt64LE=L(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&C(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],s=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(n)+(BigInt(s)<<BigInt(32))}),n.prototype.readBigUInt64BE=L(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&C(e,this.length-8);let n=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],s=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(s)}),n.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);let n=this[e],s=1,o=0;for(;++o<t&&(s*=256);)n+=this[e+o]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},n.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);let n=t,s=1,o=this[e+--n];for(;n>0&&(s*=256);)o+=this[e+--n]*s;return o>=(s*=128)&&(o-=Math.pow(2,8*t)),o},n.prototype.readInt8=function(e,t){return e>>>=0,t||y(e,1,this.length),128&this[e]?-((255-this[e]+1)*1):this[e]},n.prototype.readInt16LE=function(e,t){e>>>=0,t||y(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},n.prototype.readInt16BE=function(e,t){e>>>=0,t||y(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},n.prototype.readInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readBigInt64LE=L(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&C(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),n.prototype.readBigInt64BE=L(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&C(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),n.prototype.readFloatLE=function(e,t){return e>>>=0,t||y(e,4,this.length),TF.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return e>>>=0,t||y(e,4,this.length),TF.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return e>>>=0,t||y(e,8,this.length),TF.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return e>>>=0,t||y(e,8,this.length),TF.read(this,e,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;b(this,e,t,r,n,0)}let s=1,o=0;for(this[t]=255&e;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;b(this,e,t,r,n,0)}let s=r-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r},n.prototype.writeUint8=n.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,255,0),this[t]=255&e,t+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeBigUInt64LE=L(function(e,t=0){return v(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=L(function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);b(this,e,t,r,n-1,-n)}let s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},n.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);b(this,e,t,r,n-1,-n)}let s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},n.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},n.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},n.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeBigInt64LE=L(function(e,t=0){return v(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=L(function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeFloatLE=function(e,t,r){return E(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){return E(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){return A(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){return A(this,e,t,!1,r)},n.prototype.copy=function(e,t,r,s){if(!n.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<r&&(s=r),s===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(s<0)throw RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-r&&(s=e.length-t+r);let o=s-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,s):Uint8Array.prototype.set.call(e,this.subarray(r,s),t),o},n.prototype.fill=function(e,t,r,s){let o;if("string"==typeof e){if("string"==typeof t?(s=t,t=0,r=this.length):"string"==typeof r&&(s=r,r=this.length),void 0!==s&&"string"!=typeof s)throw TypeError("encoding must be a string");if("string"==typeof s&&!n.isEncoding(s))throw TypeError("Unknown encoding: "+s);if(1===e.length){let t=e.charCodeAt(0);("utf8"===s&&t<128||"latin1"===s)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{let a=n.isBuffer(e)?e:n.from(e,s),l=a.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=a[o%l]}return this};let S={};function k(e,t,r){S[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function I(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function _(e,t,r,n,s,o){if(e>r||e<t){let n,s="bigint"==typeof t?"n":"";throw n=o>3?0===t||t===BigInt(0)?`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:`>= ${t}${s} and <= ${r}${s}`,new S.ERR_OUT_OF_RANGE("value",n,e)}P(s,"offset"),(void 0===n[s]||void 0===n[s+o])&&C(s,n.length-(o+1))}function P(e,t){if("number"!=typeof e)throw new S.ERR_INVALID_ARG_TYPE(t,"number",e)}function C(e,t,r){throw Math.floor(e)!==e?(P(e,r),new S.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new S.ERR_BUFFER_OUT_OF_BOUNDS:new S.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}k("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),k("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),k("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?s=I(String(r)):"bigint"==typeof r&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=I(s)),s+="n"),n+=` It must be ${t}. Received ${s}`},RangeError);let O=/[^+/0-9A-Za-z-_]/g;function T(e,t){let r;t=t||1/0;let n=e.length,s=null,o=[];for(let a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!s){if(r>56319||a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(t-=3)>-1&&o.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function R(e){return TT.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,r,n){let s;for(s=0;s<n&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function N(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let D=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let s=0;s<16;++s)t[n+s]=e[r]+e[s]}return t}();function L(e){return typeof BigInt>"u"?M:e}function M(){throw Error("BigInt not supported")}}(TO);class Tj extends op{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=oi(this.buffer)}update(e){or(this),oe(e=of(e));let{view:t,buffer:r,blockLen:n}=this,s=e.length;for(let o=0;o<s;){let a=Math.min(n-this.pos,s-o);if(a===n){let t=oi(e);for(;n<=s-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){or(this),function(e,t){oe(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:s}=this,{pos:o}=this;t[o++]=128,on(this.buffer.subarray(o)),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let s=BigInt(32),o=BigInt(0xffffffff),a=Number(r>>s&o),l=Number(r&o),u=4*!!n,c=4*!n;e.setUint32(t+u,a,n),e.setUint32(t+c,l,n)})(r,n-8,BigInt(8*this.length),s),this.process(r,0);let a=oi(e),l=this.outputLen;if(l%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=l/4,c=this.get();if(u>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)a.setUint32(4*e,c[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=n,e.pos=a,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let Tz=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),T$=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),TH=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),TV=new Uint32Array(64),Tq=class extends Tj{constructor(e=32){super(64,e,8,!1),this.A=0|Tz[0],this.B=0|Tz[1],this.C=0|Tz[2],this.D=0|Tz[3],this.E=0|Tz[4],this.F=0|Tz[5],this.G=0|Tz[6],this.H=0|Tz[7]}get(){let{A:e,B:t,C:r,D:n,E:s,F:o,G:a,H:l}=this;return[e,t,r,n,s,o,a,l]}set(e,t,r,n,s,o,a,l){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|s,this.F=0|o,this.G=0|a,this.H=0|l}process(e,t){for(let r=0;r<16;r++,t+=4)TV[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=TV[e-15],r=TV[e-2],n=os(t,7)^os(t,18)^t>>>3,s=os(r,17)^os(r,19)^r>>>10;TV[e]=s+TV[e-7]+n+TV[e-16]|0}let{A:r,B:n,C:s,D:o,E:a,F:l,G:u,H:c}=this;for(let e=0;e<64;e++){var d,f,h,p;let t=c+(os(a,6)^os(a,11)^os(a,25))+((d=a)&l^~d&u)+TH[e]+TV[e]|0,g=(os(r,2)^os(r,13)^os(r,22))+((f=r)&(h=n)^f&(p=s)^h&p)|0;c=u,u=l,l=a,a=o+t|0,o=s,s=n,n=r,r=t+g|0}r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,s,o,a,l,u,c)}roundClean(){on(TV)}destroy(){this.set(0,0,0,0,0,0,0,0),on(this.buffer)}},TG=function(e,t=!1){let r=e.length,n=new Uint32Array(r),s=new Uint32Array(r);for(let o=0;o<r;o++){let{h:r,l:a}=function(e,t=!1){return t?{h:Number(e&sG),l:Number(e>>sW&sG)}:{h:0|Number(e>>sW&sG),l:0|Number(e&sG)}}(e[o],t);[n[o],s[o]]=[r,a]}return[n,s]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),TW=TG[0],TK=TG[1],TJ=new Uint32Array(80),TZ=new Uint32Array(80),TQ=class extends Tj{constructor(e=64){super(128,e,16,!1),this.Ah=0|T$[0],this.Al=0|T$[1],this.Bh=0|T$[2],this.Bl=0|T$[3],this.Ch=0|T$[4],this.Cl=0|T$[5],this.Dh=0|T$[6],this.Dl=0|T$[7],this.Eh=0|T$[8],this.El=0|T$[9],this.Fh=0|T$[10],this.Fl=0|T$[11],this.Gh=0|T$[12],this.Gl=0|T$[13],this.Hh=0|T$[14],this.Hl=0|T$[15]}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:c,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:m}=this;return[e,t,r,n,s,o,a,l,u,c,d,f,h,p,g,m]}set(e,t,r,n,s,o,a,l,u,c,d,f,h,p,g,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|s,this.Cl=0|o,this.Dh=0|a,this.Dl=0|l,this.Eh=0|u,this.El=0|c,this.Fh=0|d,this.Fl=0|f,this.Gh=0|h,this.Gl=0|p,this.Hh=0|g,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)TJ[r]=e.getUint32(t),TZ[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|TJ[e-15],r=0|TZ[e-15],n=sZ(t,r,1)^sZ(t,r,8)^sK(t,r,7),s=sQ(t,r,1)^sQ(t,r,8)^sJ(t,r,7),o=0|TJ[e-2],a=0|TZ[e-2],l=sZ(o,a,19)^sX(o,a,61)^sK(o,a,6),u=s3(s,sQ(o,a,19)^sY(o,a,61)^sJ(o,a,6),TZ[e-7],TZ[e-16]),c=s8(u,n,l,TJ[e-7],TJ[e-16]);TJ[e]=0|c,TZ[e]=0|u}let{Ah:r,Al:n,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:c,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:m,Hh:y,Hl:b}=this;for(let e=0;e<80;e++){let t=sZ(d,f,14)^sZ(d,f,18)^sX(d,f,41),v=sQ(d,f,14)^sQ(d,f,18)^sY(d,f,41),x=d&h^~d&g,w=s6(b,v,f&p^~f&m,TK[e],TZ[e]),E=s4(w,y,t,x,TW[e],TJ[e]),A=0|w,S=sZ(r,n,28)^sX(r,n,34)^sX(r,n,39),k=sQ(r,n,28)^sY(r,n,34)^sY(r,n,39),I=r&s^r&a^s&a,_=n&o^n&l^o&l;y=0|g,b=0|m,g=0|h,m=0|p,h=0|d,p=0|f,({h:d,l:f}=s0(0|u,0|c,0|E,0|A)),u=0|a,c=0|l,a=0|s,l=0|o,s=0|r,o=0|n;let P=s1(A,k,_);r=s2(P,E,S,I),n=0|P}({h:r,l:n}=s0(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:o}=s0(0|this.Bh,0|this.Bl,0|s,0|o)),({h:a,l:l}=s0(0|this.Ch,0|this.Cl,0|a,0|l)),({h:u,l:c}=s0(0|this.Dh,0|this.Dl,0|u,0|c)),({h:d,l:f}=s0(0|this.Eh,0|this.El,0|d,0|f)),({h:h,l:p}=s0(0|this.Fh,0|this.Fl,0|h,0|p)),({h:g,l:m}=s0(0|this.Gh,0|this.Gl,0|g,0|m)),({h:y,l:b}=s0(0|this.Hh,0|this.Hl,0|y,0|b)),this.set(r,n,s,o,a,l,u,c,d,f,h,p,g,m,y,b)}roundClean(){on(TJ,TZ)}destroy(){on(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},TX=og(()=>new Tq),TY=og(()=>new TQ),T0=BigInt(0),T1=BigInt(1);function T2(e,t=""){if("boolean"!=typeof e)throw Error((t&&`"${t}"`)+"expected boolean, got type="+typeof e);return e}function T3(e,t,r=""){let n=s9(e),s=null==e?void 0:e.length,o=void 0!==t;if(!n||o&&s!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(o?` of length ${t}`:"")+", got "+(n?`length=${s}`:`type=${typeof e}`));return e}function T8(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function T6(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?T0:BigInt("0x"+e)}function T4(e){return oe(e),T6(ol(Uint8Array.from(e).reverse()))}function T5(e,t){return od(e.toString(16).padStart(2*t,"0"))}function T9(e,t){return T5(e,t).reverse()}function T7(e,t,r){let n;if("string"==typeof t)try{n=od(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(s9(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let s=n.length;if("number"==typeof r&&s!==r)throw Error(e+" of length "+r+" expected, got "+s);return n}function Re(e){return Uint8Array.from(e)}let Rt=e=>"bigint"==typeof e&&T0<=e;function Rr(e,t,r,n){if(!(Rt(t)&&Rt(r)&&Rt(n))||!(r<=t)||!(t<n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function Rn(e){let t;for(t=0;e>T0;e>>=T1,t+=1);return t}let Ri=e=>(T1<<BigInt(e))-T1;function Rs(e,t,r={}){if(!e||"object"!=typeof e)throw Error("expected valid options object");function n(t,r,n){let s=e[t];if(n&&void 0===s)return;let o=typeof s;if(o!==r||null===s)throw Error(`param "${t}" is invalid: expected ${r}, got ${o}`)}Object.entries(t).forEach(([e,t])=>n(e,t,!1)),Object.entries(r).forEach(([e,t])=>n(e,t,!0))}function Ro(e){let t=new WeakMap;return(r,...n)=>{let s=t.get(r);if(void 0!==s)return s;let o=e(r,...n);return t.set(r,o),o}}let Ra=BigInt(0),Rl=BigInt(1),Ru=BigInt(2),Rc=BigInt(3),Rd=BigInt(4),Rf=BigInt(5),Rh=BigInt(7),Rp=BigInt(8),Rg=BigInt(9),Rm=BigInt(16);function Ry(e,t){let r=e%t;return r>=Ra?r:t+r}function Rb(e,t,r){let n=e;for(;t-- >Ra;)n*=n,n%=r;return n}function Rv(e,t){if(e===Ra)throw Error("invert: expected non-zero number");if(t<=Ra)throw Error("invert: expected positive modulus, got "+t);let r=Ry(e,t),n=t,s=Ra,o=Rl;for(;r!==Ra;){let e=n/r,t=n%r,a=s-o*e;n=r,r=t,s=o,o=a}if(n!==Rl)throw Error("invert: does not exist");return Ry(s,t)}function Rx(e,t,r){if(!e.eql(e.sqr(t),r))throw Error("Cannot find square root")}function Rw(e,t){let r=(e.ORDER+Rl)/Rd,n=e.pow(t,r);return Rx(e,n,t),n}function RE(e,t){let r=(e.ORDER-Rf)/Rp,n=e.mul(t,Ru),s=e.pow(n,r),o=e.mul(t,s),a=e.mul(e.mul(o,Ru),s),l=e.mul(o,e.sub(a,e.ONE));return Rx(e,l,t),l}function RA(e){if(e<Rc)throw Error("sqrt is not defined for small field");let t=e-Rl,r=0;for(;t%Ru===Ra;)t/=Ru,r++;let n=Ru,s=RC(e);for(;1===R_(s,n);)if(n++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return Rw;let o=s.pow(n,t),a=(t+Rl)/Ru;return function(e,n){if(e.is0(n))return n;if(1!==R_(e,n))throw Error("Cannot find square root");let s=r,l=e.mul(e.ONE,o),u=e.pow(n,t),c=e.pow(n,a);for(;!e.eql(u,e.ONE);){if(e.is0(u))return e.ZERO;let t=1,r=e.sqr(u);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===s)throw Error("Cannot find square root");let n=Rl<<BigInt(s-t-1),o=e.pow(l,n);s=t,l=e.sqr(o),u=e.mul(u,l),c=e.mul(c,o)}return c}}let RS=(e,t)=>(Ry(e,t)&Rl)===Rl,Rk=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function RI(e,t,r=!1){let n=Array(t.length).fill(r?e.ZERO:void 0),s=t.reduce((t,r,s)=>e.is0(r)?t:(n[s]=t,e.mul(t,r)),e.ONE),o=e.inv(s);return t.reduceRight((t,r,s)=>e.is0(r)?t:(n[s]=e.mul(t,n[s]),e.mul(t,r)),o),n}function R_(e,t){let r=(e.ORDER-Rl)/Ru,n=e.pow(t,r),s=e.eql(n,e.ONE),o=e.eql(n,e.ZERO),a=e.eql(n,e.neg(e.ONE));if(!s&&!o&&!a)throw Error("invalid Legendre symbol result");return s?1:o?0:-1}function RP(e,t){void 0!==t&&s7(t);let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function RC(e,t,r=!1,n={}){let s;if(e<=Ra)throw Error("invalid field: expected ORDER > 0, got "+e);let o,a,l=!1,u;if("object"==typeof t&&null!=t){if(n.sqrt||r)throw Error("cannot specify opts in two arguments");t.BITS&&(o=t.BITS),t.sqrt&&(a=t.sqrt),"boolean"==typeof t.isLE&&(r=t.isLE),"boolean"==typeof t.modFromBytes&&(l=t.modFromBytes),u=t.allowedLengths}else"number"==typeof t&&(o=t),n.sqrt&&(a=n.sqrt);let{nBitLength:c,nByteLength:d}=RP(e,o);if(d>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let f=Object.freeze({ORDER:e,isLE:r,BITS:c,BYTES:d,MASK:Ri(c),ZERO:Ra,ONE:Rl,allowedLengths:u,create:t=>Ry(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return Ra<=t&&t<e},is0:e=>e===Ra,isValidNot0:e=>!f.is0(e)&&f.isValid(e),isOdd:e=>(e&Rl)===Rl,neg:t=>Ry(-t,e),eql:(e,t)=>e===t,sqr:t=>Ry(t*t,e),add:(t,r)=>Ry(t+r,e),sub:(t,r)=>Ry(t-r,e),mul:(t,r)=>Ry(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<Ra)throw Error("invalid exponent, negatives unsupported");if(r===Ra)return e.ONE;if(r===Rl)return t;let n=e.ONE,s=t;for(;r>Ra;)r&Rl&&(n=e.mul(n,s)),s=e.sqr(s),r>>=Rl;return n})(f,e,t),div:(t,r)=>Ry(t*Rv(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Rv(t,e),sqrt:a||(t=>(s||(s=e%Rd===Rc?Rw:e%Rp===Rf?RE:e%Rm===Rg?function(e){let t=RC(e),r=RA(e),n=r(t,t.neg(t.ONE)),s=r(t,n),o=r(t,t.neg(n)),a=(e+Rh)/Rm;return(e,t)=>{let r=e.pow(t,a),l=e.mul(r,n),u=e.mul(r,s),c=e.mul(r,o),d=e.eql(e.sqr(l),t),f=e.eql(e.sqr(u),t);r=e.cmov(r,l,d),l=e.cmov(c,u,f);let h=e.eql(e.sqr(l),t),p=e.cmov(r,l,h);return Rx(e,p,t),p}}(e):RA(e)),s(f,t))),toBytes:e=>r?T9(e,d):T5(e,d),fromBytes:(t,n=!0)=>{if(u){if(!u.includes(t.length)||t.length>d)throw Error("Field.fromBytes: expected "+u+" bytes, got "+t.length);let e=new Uint8Array(d);e.set(t,r?0:e.length-t.length),t=e}if(t.length!==d)throw Error("Field.fromBytes: expected "+d+" bytes, got "+t.length);let s=r?T4(t):T6(ol(t));if(l&&(s=Ry(s,e)),!n&&!f.isValid(s))throw Error("invalid field element: outside of range 0..ORDER");return s},invertBatch:e=>RI(f,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(f)}function RO(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function RT(e){let t=RO(e);return t+Math.ceil(t/2)}let RR=BigInt(0),RB=BigInt(1);function RN(e,t){let r=t.negate();return e?r:t}function RD(e,t){let r=RI(e.Fp,t.map(e=>e.Z));return t.map((t,n)=>e.fromAffine(t.toAffine(r[n])))}function RL(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function RM(e,t){RL(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),s=2**e;return{windows:r,windowSize:n,mask:Ri(e),maxNumber:s,shiftBy:BigInt(e)}}function RU(e,t,r){let{windowSize:n,mask:s,maxNumber:o,shiftBy:a}=r,l=Number(e&s),u=e>>a;l>n&&(l-=o,u+=RB);let c=t*n;return{nextN:u,offset:c+Math.abs(l)-1,isZero:0===l,isNeg:l<0,isNegF:t%2!=0,offsetF:c}}let RF=new WeakMap,Rj=new WeakMap;function Rz(e){return Rj.get(e)||1}function R$(e){if(e!==RR)throw Error("invalid wNAF")}let RH=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let n=e;for(;t>RR;)t&RB&&(r=r.add(n)),n=n.double(),t>>=RB;return r}precomputeWindow(e,t){let{windows:r,windowSize:n}=RM(t,this.bits),s=[],o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,t,r){if(!this.Fn.isValid(r))throw Error("invalid scalar");let n=this.ZERO,s=this.BASE,o=RM(e,this.bits);for(let e=0;e<o.windows;e++){let{nextN:a,offset:l,isZero:u,isNeg:c,isNegF:d,offsetF:f}=RU(r,e,o);r=a,u?s=s.add(RN(d,t[f])):n=n.add(RN(c,t[l]))}return R$(r),{p:n,f:s}}wNAFUnsafe(e,t,r,n=this.ZERO){let s=RM(e,this.bits);for(let e=0;e<s.windows&&r!==RR;e++){let{nextN:o,offset:a,isZero:l,isNeg:u}=RU(r,e,s);if(r=o,!l){let e=t[a];n=n.add(u?e.negate():e)}}return R$(r),n}getPrecomputes(e,t,r){let n=RF.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(n=r(n)),RF.set(t,n))),n}cached(e,t,r){let n=Rz(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)}unsafe(e,t,r,n){let s=Rz(e);return 1===s?this._unsafeLadder(e,t,n):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),t,n)}createCache(e,t){RL(t,this.bits),Rj.set(e,t),RF.delete(e)}hasCache(e){return 1!==Rz(e)}};function RV(e,t,r,n){(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})})(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(n,t);let s=r.length,o=n.length;if(s!==o)throw Error("arrays of points and scalars must have equal length");let a=e.ZERO,l=Rn(BigInt(s)),u=1;l>12?u=l-3:l>4?u=l-2:l>0&&(u=2);let c=Ri(u),d=Array(Number(c)+1).fill(a),f=Math.floor((t.BITS-1)/u)*u,h=a;for(let e=f;e>=0;e-=u){d.fill(a);for(let t=0;t<o;t++){let s=Number(n[t]>>BigInt(e)&c);d[s]=d[s].add(r[t])}let t=a;for(let e=d.length-1,r=a;e>0;e--)r=r.add(d[e]),t=t.add(r);if(h=h.add(t),0!==e)for(let e=0;e<u;e++)h=h.double()}return h}function Rq(e,t,r){if(!t)return RC(e,{isLE:r});if(t.ORDER!==e)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return Rs(t,Rk.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),t}function RG(e,t,r={},n){if(void 0===n&&(n="edwards"===e),!t||"object"!=typeof t)throw Error(`expected valid ${e} CURVE object`);for(let e of["p","n","h"]){let r=t[e];if(!("bigint"==typeof r&&r>RR))throw Error(`CURVE.${e} must be positive bigint`)}let s=Rq(t.p,r.Fp,n),o=Rq(t.n,r.Fn,n);for(let r of["Gx","Gy","a","weierstrass"===e?"b":"d"])if(!s.isValid(t[r]))throw Error(`CURVE.${r} must be valid field element of CURVE.Fp`);return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:s,Fn:o}}let RW=BigInt(0),RK=BigInt(1),RJ=BigInt(2),RZ=BigInt(8),RQ=BigInt(1),RX=BigInt(2);BigInt(3);let RY=BigInt(5),R0=BigInt(8),R1=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),R2={p:R1,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:R0,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")},R3=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),R8=RC(R2.p,{isLE:!0}),R6=function(e){let{CURVE:t,curveOpts:r,hash:n,eddsaOpts:s}=function(e){let t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r={Fp:e.Fp,Fn:RC(t.n,e.nBitLength,!0),uvRatio:e.uvRatio},n={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:r,hash:e.hash,eddsaOpts:n}}(e),o=function(e,t,r={}){if("function"!=typeof t)throw Error('"hash" function param is required');Rs(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=r,{BASE:s,Fp:o,Fn:a}=e,l=r.randomBytes||om,u=r.adjustScalarBytes||(e=>e),c=r.domain||((e,t,r)=>{if(T2(r,"phflag"),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function d(e){return a.create(T4(e))}function f(e){let{head:r,prefix:n,scalar:o}=function(e){let r=y.secretKey;e=T7("private key",e,r);let n=T7("hashed private key",t(e),2*r),s=u(n.slice(0,r)),o=n.slice(r,2*r),a=d(s);return{head:s,prefix:o,scalar:a}}(e),a=s.multiply(o),l=a.toBytes();return{head:r,prefix:n,scalar:o,point:a,pointBytes:l}}function h(e){return f(e).pointBytes}function p(e=Uint8Array.of(),...r){return d(t(c(oh(...r),T7("context",e),!!n)))}let g={zip215:!0},m=o.BYTES,y={secretKey:m,publicKey:m,signature:2*m,seed:m};function b(e=l(y.seed)){return T3(e,y.seed,"seed")}let v={getExtendedPublicKey:f,randomSecretKey:b,isValidSecretKey:function(e){return s9(e)&&e.length===a.BYTES},isValidPublicKey:function(t,r){try{return!!e.fromBytes(t,r)}catch{return!1}},toMontgomery(t){let{y:r}=e.fromBytes(t),n=y.publicKey,s=32===n;if(!s&&57!==n)throw Error("only defined for 25519 and 448");let a=s?o.div(RK+r,RK-r):o.div(r-RK,r+RK);return o.toBytes(a)},toMontgomerySecret(e){let r=y.secretKey;return T3(e,r),u(t(e.subarray(0,r))).subarray(0,r)},randomPrivateKey:b,precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)};return Object.freeze({keygen:function(e){let t=v.randomSecretKey(e);return{secretKey:t,publicKey:h(t)}},getPublicKey:h,sign:function(e,t,r={}){e=T7("message",e),n&&(e=n(e));let{prefix:o,scalar:l,pointBytes:u}=f(t),c=p(r.context,o,e),d=s.multiply(c).toBytes(),h=p(r.context,d,u,e),g=a.create(c+h*l);if(!a.isValid(g))throw Error("sign failed: invalid s");return T3(oh(d,a.toBytes(g)),y.signature,"result")},verify:function(t,r,o,a=g){let l,u,c,{context:d,zip215:f}=a,h=y.signature;t=T7("signature",t,h),r=T7("message",r),o=T7("publicKey",o,y.publicKey),void 0!==f&&T2(f,"zip215"),n&&(r=n(r));let m=h/2,b=t.subarray(0,m),v=T4(t.subarray(m,h));try{l=e.fromBytes(o,f),u=e.fromBytes(b,f),c=s.multiplyUnsafe(v)}catch{return!1}if(!f&&l.isSmallOrder())return!1;let x=p(d,u.toBytes(),l.toBytes(),r);return u.add(l.multiplyUnsafe(x)).subtract(c).clearCofactor().is0()},utils:v,Point:e,lengths:y})}(function(e,t={}){let r=RG("edwards",e,t,t.FpFnLE),{Fp:n,Fn:s}=r,o=r.CURVE,{h:a}=o;Rs(t,{},{uvRatio:"function"});let l=RJ<<BigInt(8*s.BYTES)-RK,u=e=>n.create(e),c=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(n.div(e,t))}}catch{return{isValid:!1,value:RW}}});if(!function(e,t,r,n){let s=e.sqr(r),o=e.sqr(n),a=e.add(e.mul(t.a,s),o),l=e.add(e.ONE,e.mul(t.d,e.mul(s,o)));return e.eql(a,l)}(n,o,o.Gx,o.Gy))throw Error("bad curve params: generator point");function d(e,t,r=!1){return Rr("coordinate "+e,t,r?RK:RW,l),t}function f(e){if(!(e instanceof g))throw Error("ExtendedPoint expected")}let h=Ro((e,t)=>{let{X:r,Y:s,Z:o}=e,a=e.is0();null==t&&(t=a?RZ:n.inv(o));let l=u(r*t),c=u(s*t),d=n.mul(o,t);if(a)return{x:RW,y:RK};if(d!==RK)throw Error("invZ was invalid");return{x:l,y:c}}),p=Ro(e=>{let{a:t,d:r}=o;if(e.is0())throw Error("bad point: ZERO");let{X:n,Y:s,Z:a,T:l}=e,c=u(n*n),d=u(s*s),f=u(a*a),h=u(f*f),p=u(c*t);if(u(f*u(p+d))!==u(h+u(r*u(c*d))))throw Error("bad point: equation left != right (1)");if(u(n*s)!==u(a*l))throw Error("bad point: equation left != right (2)");return!0});class g{constructor(e,t,r,n){this.X=d("x",e),this.Y=d("y",t),this.Z=d("z",r,!0),this.T=d("t",n),Object.freeze(this)}static CURVE(){return o}static fromAffine(e){if(e instanceof g)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return d("x",t),d("y",r),new g(t,r,RK,u(t*r))}static fromBytes(e,t=!1){let r=n.BYTES,{a:s,d:a}=o;e=Re(T3(e,r,"point")),T2(t,"zip215");let d=Re(e),f=e[r-1];d[r-1]=-129&f;let h=T4(d);Rr("point.y",h,RW,t?l:n.ORDER);let p=u(h*h),{isValid:m,value:y}=c(u(p-RK),u(a*p-s));if(!m)throw Error("bad point: invalid y coordinate");let b=(y&RK)===RK,v=(128&f)!=0;if(!t&&y===RW&&v)throw Error("bad point: x=0 and x_0=1");return v!==b&&(y=u(-y)),g.fromAffine({x:y,y:h})}static fromHex(e,t=!1){return g.fromBytes(T7("point",e),t)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return m.createCache(this,e),t||this.multiply(RJ),this}assertValidity(){p(this)}equals(e){f(e);let{X:t,Y:r,Z:n}=this,{X:s,Y:o,Z:a}=e,l=u(t*a),c=u(s*n),d=u(r*a),h=u(o*n);return l===c&&d===h}is0(){return this.equals(g.ZERO)}negate(){return new g(u(-this.X),this.Y,this.Z,u(-this.T))}double(){let{a:e}=o,{X:t,Y:r,Z:n}=this,s=u(t*t),a=u(r*r),l=u(RJ*u(n*n)),c=u(e*s),d=t+r,f=u(u(d*d)-s-a),h=c+a,p=h-l,m=c-a,y=u(f*p),b=u(h*m),v=u(f*m);return new g(y,b,u(p*h),v)}add(e){f(e);let{a:t,d:r}=o,{X:n,Y:s,Z:a,T:l}=this,{X:c,Y:d,Z:h,T:p}=e,m=u(n*c),y=u(s*d),b=u(l*r*p),v=u(a*h),x=u((n+s)*(c+d)-m-y),w=v-b,E=v+b,A=u(y-t*m),S=u(x*w),k=u(E*A),I=u(x*A);return new g(S,k,u(w*E),I)}subtract(e){return this.add(e.negate())}multiply(e){if(!s.isValidNot0(e))throw Error("invalid scalar: expected 1 <= sc < curve.n");let{p:t,f:r}=m.cached(this,e,e=>RD(g,e));return RD(g,[t,r])[0]}multiplyUnsafe(e,t=g.ZERO){if(!s.isValid(e))throw Error("invalid scalar: expected 0 <= sc < curve.n");return e===RW?g.ZERO:this.is0()||e===RK?this:m.unsafe(this,e,e=>RD(g,e),t)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return m.unsafe(this,o.n).is0()}toAffine(e){return h(this,e)}clearCofactor(){return a===RK?this:this.multiplyUnsafe(a)}toBytes(){let{x:e,y:t}=this.toAffine(),r=n.toBytes(t);return r[r.length-1]|=e&RK?128:0,r}toHex(){return ol(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(e){return RD(g,e)}static msm(e,t){return RV(g,s,e,t)}_setWindowSize(e){this.precompute(e)}toRawBytes(){return this.toBytes()}}g.BASE=new g(o.Gx,o.Gy,RK,u(o.Gx*o.Gy)),g.ZERO=new g(RW,RK,RK,RW),g.Fp=n,g.Fn=s;let m=new RH(g,s.BITS);return g.BASE.precompute(8),g}(t,r),n,s),a=o.Point;return Object.assign({},o,{ExtendedPoint:a,CURVE:e,nBitLength:a.Fn.BITS,nByteLength:a.Fn.BYTES})}({...R2,Fp:R8,hash:TY,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){let r=Ry(t*t*t,R1),n=function(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),o=e*e%R1*e%R1,a=Rb(o,RX,R1)*o%R1,l=Rb(a,RQ,R1)*e%R1,u=Rb(l,RY,R1)*l%R1,c=Rb(u,t,R1)*u%R1,d=Rb(c,r,R1)*c%R1,f=Rb(d,n,R1)*d%R1,h=Rb(f,s,R1)*f%R1,p=Rb(h,s,R1)*f%R1,g=Rb(p,t,R1)*u%R1;return{pow_p_5_8:Rb(g,RX,R1)*e%R1,b2:o}}(e*Ry(r*r*t,R1)).pow_p_5_8,s=Ry(e*r*n,R1),o=Ry(t*s*s,R1),a=s,l=Ry(s*R3,R1),u=o===e,c=o===Ry(-e,R1),d=o===Ry(-e*R3,R1);return u&&(s=a),(c||d)&&(s=l),RS(s,R1)&&(s=Ry(-s,R1)),{isValid:u||c,value:s}}});var R4={exports:{}};R4.exports,function(e,t){function r(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{d="u">typeof window&&"u">typeof window.Buffer?window.Buffer:fl.Buffer}catch{}function o(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function a(e,t,r){var n=o(e,r);return r-1>=t&&(n|=o(e,r-1)<<4),n}function l(e,t,n,s){for(var o=0,a=0,l=Math.min(e.length,n),u=t;u<l;u++){var c=e.charCodeAt(u)-48;o*=s,a=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&a<s,"Invalid character"),o+=a}return o}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return 0>e.cmp(t)?e:t},s.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,n):(this._parseBase(e,t,s),"le"===n&&this._initArray(this.toArray(),t,n)))},s.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<0x4000000?(this.words=[0x3ffffff&e],this.length=1):e<0x10000000000000?(this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff],this.length=2):(r(e<0x20000000000000),this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var o,a,l=0;if("be"===n)for(s=e.length-1,o=0;s>=0;s-=3)a=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[o]|=a<<l&0x3ffffff,this.words[o+1]=a>>>26-l&0x3ffffff,(l+=24)>=26&&(l-=26,o++);else if("le"===n)for(s=0,o=0;s<e.length;s+=3)a=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[o]|=a<<l&0x3ffffff,this.words[o+1]=a>>>26-l&0x3ffffff,(l+=24)>=26&&(l-=26,o++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,o=0,l=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)s=a(e,t,n)<<o,this.words[l]|=0x3ffffff&s,o>=18?(o-=18,l+=1,this.words[l]|=s>>>26):o+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)s=a(e,t,n)<<o,this.words[l]|=0x3ffffff&s,o>=18?(o-=18,l+=1,this.words[l]|=s>>>26):o+=8;this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,s=1;s<=0x3ffffff;s*=t)n++;n--,s=s/t|0;for(var o=e.length-r,a=o%n,u=Math.min(o,o-a)+r,c=0,d=r;d<u;d+=n)c=l(e,d,d+n,t),this.imuln(s),this.words[0]+c<0x4000000?this.words[0]+=c:this._iaddn(c);if(0!==a){var f=1;for(c=l(e,d,e.length,t),d=0;d<a;d++)f*=t;this.imuln(f),this.words[0]+c<0x4000000?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){u(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"u">typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=c}catch{s.prototype.inspect=c}else s.prototype.inspect=c;function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d,f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,0x2000000,0x290d741,0x1000000,0x2e90edd,0x39aa400,0x267bf47,0x1000000,0x290d741,1e7,0x12959c3,0x222c000,0x3bd7765,7529536,0xadcea1,0x1000000,0x1704f61,0x206fc40,0x2cddcf9,64e6,4084101,5153632,6436343,7962624,9765625,0xb54ba0,0xdaf26b,0x1069c00,0x138f9ad,243e5,0x1b4d89f,0x2000000,0x25528a1,0x2b54a20,0x3216b93,0x39aa400];function g(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var s=0|e.words[0],o=0|t.words[0],a=s*o,l=0x3ffffff&a,u=a/0x4000000|0;r.words[0]=l;for(var c=1;c<n;c++){for(var d=u>>>26,f=0x3ffffff&u,h=Math.min(c,t.length-1),p=Math.max(0,c-e.length+1);p<=h;p++){var g=c-p|0;d+=(a=(s=0|e.words[g])*(o=0|t.words[p])+f)/0x4000000|0,f=0x3ffffff&a}r.words[c]=0|f,u=0|d}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}s.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var n,s=0,o=0,a=0;a<this.length;a++){var l=this.words[a],u=((l<<s|o)&0xffffff).toString(16);o=l>>>24-s&0xffffff,(s+=2)>=26&&(s-=26,a--),n=0!==o||a!==this.length-1?f[6-u.length]+u+n:u+n}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],d=p[e];n="";var g=this.clone();for(g.negative=0;!g.isZero();){var m=g.modrn(d).toString(e);n=(g=g.idivn(d)).isZero()?m+n:f[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=0x4000000*this.words[1]:3===this.length&&1===this.words[2]?e+=0x10000000000000+0x4000000*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},d&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(d,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,n){this._strip();var s=this.byteLength(),o=n||Math.max(1,s);r(s<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var a=e.allocUnsafe?e.allocUnsafe(o):new e(o);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,s),a},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,s=0,o=0;s<this.length;s++){var a=this.words[s]<<o|n;e[r++]=255&a,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),6===o?(r<e.length&&(e[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,s=0,o=0;s<this.length;s++){var a=this.words[s]<<o|n;e[r--]=255&a,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),6===o?(r>=0&&(e[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return r((this.negative|e.negative)==0),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return r((this.negative|e.negative)==0),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return r((this.negative|e.negative)==0),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var s=0;s<t;s++)this.words[s]=0x3ffffff&~this.words[s];return n>0&&(this.words[s]=~this.words[s]&0x3ffffff>>26-n),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,s=e%26;return this._expand(n+1),t?this.words[n]=this.words[n]|1<<s:this.words[n]=this.words[n]&~(1<<s),this._strip()},s.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var t,r,n,s=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+s,this.words[o]=0x3ffffff&t,s=t>>>26;for(;0!==s&&o<r.length;o++)t=(0|r.words[o])+s,this.words[o]=0x3ffffff&t,s=t>>>26;if(this.length=r.length,0!==s)this.words[this.length]=s,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,r,n=this.iadd(e);return e.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(t=this,r=e):(t=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(n=(0|t.words[a])-(0|r.words[a])+o)>>26,this.words[a]=0x3ffffff&n;for(;0!==o&&a<t.length;a++)o=(n=(0|t.words[a])+o)>>26,this.words[a]=0x3ffffff&n;if(0===o&&a<t.length&&t!==this)for(;a<t.length;a++)this.words[a]=t.words[a];return this.length=Math.max(this.length,a),t!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,s,o,a=e.words,l=t.words,u=r.words,c=0,d=0|a[0],f=8191&d,h=d>>>13,p=0|a[1],g=8191&p,m=p>>>13,y=0|a[2],b=8191&y,v=y>>>13,x=0|a[3],w=8191&x,E=x>>>13,A=0|a[4],S=8191&A,k=A>>>13,I=0|a[5],_=8191&I,P=I>>>13,C=0|a[6],O=8191&C,T=C>>>13,R=0|a[7],B=8191&R,N=R>>>13,D=0|a[8],L=8191&D,M=D>>>13,U=0|a[9],F=8191&U,j=U>>>13,z=0|l[0],$=8191&z,H=z>>>13,V=0|l[1],q=8191&V,G=V>>>13,W=0|l[2],K=8191&W,J=W>>>13,Z=0|l[3],Q=8191&Z,X=Z>>>13,Y=0|l[4],ee=8191&Y,et=Y>>>13,er=0|l[5],en=8191&er,ei=er>>>13,es=0|l[6],eo=8191&es,ea=es>>>13,el=0|l[7],eu=8191&el,ec=el>>>13,ed=0|l[8],ef=8191&ed,eh=ed>>>13,ep=0|l[9],eg=8191&ep,em=ep>>>13;r.negative=e.negative^t.negative,r.length=19,n=Math.imul(f,$),s=(s=Math.imul(f,H))+Math.imul(h,$)|0,o=Math.imul(h,H);var ey=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(ey>>>26)|0,ey&=0x3ffffff,n=Math.imul(g,$),s=(s=Math.imul(g,H))+Math.imul(m,$)|0,o=Math.imul(m,H),n=n+Math.imul(f,q)|0,s=(s=s+Math.imul(f,G)|0)+Math.imul(h,q)|0,o=o+Math.imul(h,G)|0;var eb=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eb>>>26)|0,eb&=0x3ffffff,n=Math.imul(b,$),s=(s=Math.imul(b,H))+Math.imul(v,$)|0,o=Math.imul(v,H),n=n+Math.imul(g,q)|0,s=(s=s+Math.imul(g,G)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,G)|0,n=n+Math.imul(f,K)|0,s=(s=s+Math.imul(f,J)|0)+Math.imul(h,K)|0,o=o+Math.imul(h,J)|0;var ev=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(ev>>>26)|0,ev&=0x3ffffff,n=Math.imul(w,$),s=(s=Math.imul(w,H))+Math.imul(E,$)|0,o=Math.imul(E,H),n=n+Math.imul(b,q)|0,s=(s=s+Math.imul(b,G)|0)+Math.imul(v,q)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(g,K)|0,s=(s=s+Math.imul(g,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0,n=n+Math.imul(f,Q)|0,s=(s=s+Math.imul(f,X)|0)+Math.imul(h,Q)|0,o=o+Math.imul(h,X)|0;var ex=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(ex>>>26)|0,ex&=0x3ffffff,n=Math.imul(S,$),s=(s=Math.imul(S,H))+Math.imul(k,$)|0,o=Math.imul(k,H),n=n+Math.imul(w,q)|0,s=(s=s+Math.imul(w,G)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,G)|0,n=n+Math.imul(b,K)|0,s=(s=s+Math.imul(b,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(g,Q)|0,s=(s=s+Math.imul(g,X)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,X)|0,n=n+Math.imul(f,ee)|0,s=(s=s+Math.imul(f,et)|0)+Math.imul(h,ee)|0,o=o+Math.imul(h,et)|0;var ew=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(ew>>>26)|0,ew&=0x3ffffff,n=Math.imul(_,$),s=(s=Math.imul(_,H))+Math.imul(P,$)|0,o=Math.imul(P,H),n=n+Math.imul(S,q)|0,s=(s=s+Math.imul(S,G)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,G)|0,n=n+Math.imul(w,K)|0,s=(s=s+Math.imul(w,J)|0)+Math.imul(E,K)|0,o=o+Math.imul(E,J)|0,n=n+Math.imul(b,Q)|0,s=(s=s+Math.imul(b,X)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(g,ee)|0,s=(s=s+Math.imul(g,et)|0)+Math.imul(m,ee)|0,o=o+Math.imul(m,et)|0,n=n+Math.imul(f,en)|0,s=(s=s+Math.imul(f,ei)|0)+Math.imul(h,en)|0,o=o+Math.imul(h,ei)|0;var eE=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eE>>>26)|0,eE&=0x3ffffff,n=Math.imul(O,$),s=(s=Math.imul(O,H))+Math.imul(T,$)|0,o=Math.imul(T,H),n=n+Math.imul(_,q)|0,s=(s=s+Math.imul(_,G)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,G)|0,n=n+Math.imul(S,K)|0,s=(s=s+Math.imul(S,J)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(w,Q)|0,s=(s=s+Math.imul(w,X)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,X)|0,n=n+Math.imul(b,ee)|0,s=(s=s+Math.imul(b,et)|0)+Math.imul(v,ee)|0,o=o+Math.imul(v,et)|0,n=n+Math.imul(g,en)|0,s=(s=s+Math.imul(g,ei)|0)+Math.imul(m,en)|0,o=o+Math.imul(m,ei)|0,n=n+Math.imul(f,eo)|0,s=(s=s+Math.imul(f,ea)|0)+Math.imul(h,eo)|0,o=o+Math.imul(h,ea)|0;var eA=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eA>>>26)|0,eA&=0x3ffffff,n=Math.imul(B,$),s=(s=Math.imul(B,H))+Math.imul(N,$)|0,o=Math.imul(N,H),n=n+Math.imul(O,q)|0,s=(s=s+Math.imul(O,G)|0)+Math.imul(T,q)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(_,K)|0,s=(s=s+Math.imul(_,J)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(S,Q)|0,s=(s=s+Math.imul(S,X)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,X)|0,n=n+Math.imul(w,ee)|0,s=(s=s+Math.imul(w,et)|0)+Math.imul(E,ee)|0,o=o+Math.imul(E,et)|0,n=n+Math.imul(b,en)|0,s=(s=s+Math.imul(b,ei)|0)+Math.imul(v,en)|0,o=o+Math.imul(v,ei)|0,n=n+Math.imul(g,eo)|0,s=(s=s+Math.imul(g,ea)|0)+Math.imul(m,eo)|0,o=o+Math.imul(m,ea)|0,n=n+Math.imul(f,eu)|0,s=(s=s+Math.imul(f,ec)|0)+Math.imul(h,eu)|0,o=o+Math.imul(h,ec)|0;var eS=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eS>>>26)|0,eS&=0x3ffffff,n=Math.imul(L,$),s=(s=Math.imul(L,H))+Math.imul(M,$)|0,o=Math.imul(M,H),n=n+Math.imul(B,q)|0,s=(s=s+Math.imul(B,G)|0)+Math.imul(N,q)|0,o=o+Math.imul(N,G)|0,n=n+Math.imul(O,K)|0,s=(s=s+Math.imul(O,J)|0)+Math.imul(T,K)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(_,Q)|0,s=(s=s+Math.imul(_,X)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,X)|0,n=n+Math.imul(S,ee)|0,s=(s=s+Math.imul(S,et)|0)+Math.imul(k,ee)|0,o=o+Math.imul(k,et)|0,n=n+Math.imul(w,en)|0,s=(s=s+Math.imul(w,ei)|0)+Math.imul(E,en)|0,o=o+Math.imul(E,ei)|0,n=n+Math.imul(b,eo)|0,s=(s=s+Math.imul(b,ea)|0)+Math.imul(v,eo)|0,o=o+Math.imul(v,ea)|0,n=n+Math.imul(g,eu)|0,s=(s=s+Math.imul(g,ec)|0)+Math.imul(m,eu)|0,o=o+Math.imul(m,ec)|0,n=n+Math.imul(f,ef)|0,s=(s=s+Math.imul(f,eh)|0)+Math.imul(h,ef)|0,o=o+Math.imul(h,eh)|0;var ek=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(ek>>>26)|0,ek&=0x3ffffff,n=Math.imul(F,$),s=(s=Math.imul(F,H))+Math.imul(j,$)|0,o=Math.imul(j,H),n=n+Math.imul(L,q)|0,s=(s=s+Math.imul(L,G)|0)+Math.imul(M,q)|0,o=o+Math.imul(M,G)|0,n=n+Math.imul(B,K)|0,s=(s=s+Math.imul(B,J)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(O,Q)|0,s=(s=s+Math.imul(O,X)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(_,ee)|0,s=(s=s+Math.imul(_,et)|0)+Math.imul(P,ee)|0,o=o+Math.imul(P,et)|0,n=n+Math.imul(S,en)|0,s=(s=s+Math.imul(S,ei)|0)+Math.imul(k,en)|0,o=o+Math.imul(k,ei)|0,n=n+Math.imul(w,eo)|0,s=(s=s+Math.imul(w,ea)|0)+Math.imul(E,eo)|0,o=o+Math.imul(E,ea)|0,n=n+Math.imul(b,eu)|0,s=(s=s+Math.imul(b,ec)|0)+Math.imul(v,eu)|0,o=o+Math.imul(v,ec)|0,n=n+Math.imul(g,ef)|0,s=(s=s+Math.imul(g,eh)|0)+Math.imul(m,ef)|0,o=o+Math.imul(m,eh)|0,n=n+Math.imul(f,eg)|0,s=(s=s+Math.imul(f,em)|0)+Math.imul(h,eg)|0,o=o+Math.imul(h,em)|0;var eI=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eI>>>26)|0,eI&=0x3ffffff,n=Math.imul(F,q),s=(s=Math.imul(F,G))+Math.imul(j,q)|0,o=Math.imul(j,G),n=n+Math.imul(L,K)|0,s=(s=s+Math.imul(L,J)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,J)|0,n=n+Math.imul(B,Q)|0,s=(s=s+Math.imul(B,X)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,X)|0,n=n+Math.imul(O,ee)|0,s=(s=s+Math.imul(O,et)|0)+Math.imul(T,ee)|0,o=o+Math.imul(T,et)|0,n=n+Math.imul(_,en)|0,s=(s=s+Math.imul(_,ei)|0)+Math.imul(P,en)|0,o=o+Math.imul(P,ei)|0,n=n+Math.imul(S,eo)|0,s=(s=s+Math.imul(S,ea)|0)+Math.imul(k,eo)|0,o=o+Math.imul(k,ea)|0,n=n+Math.imul(w,eu)|0,s=(s=s+Math.imul(w,ec)|0)+Math.imul(E,eu)|0,o=o+Math.imul(E,ec)|0,n=n+Math.imul(b,ef)|0,s=(s=s+Math.imul(b,eh)|0)+Math.imul(v,ef)|0,o=o+Math.imul(v,eh)|0,n=n+Math.imul(g,eg)|0,s=(s=s+Math.imul(g,em)|0)+Math.imul(m,eg)|0,o=o+Math.imul(m,em)|0;var e_=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(e_>>>26)|0,e_&=0x3ffffff,n=Math.imul(F,K),s=(s=Math.imul(F,J))+Math.imul(j,K)|0,o=Math.imul(j,J),n=n+Math.imul(L,Q)|0,s=(s=s+Math.imul(L,X)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,X)|0,n=n+Math.imul(B,ee)|0,s=(s=s+Math.imul(B,et)|0)+Math.imul(N,ee)|0,o=o+Math.imul(N,et)|0,n=n+Math.imul(O,en)|0,s=(s=s+Math.imul(O,ei)|0)+Math.imul(T,en)|0,o=o+Math.imul(T,ei)|0,n=n+Math.imul(_,eo)|0,s=(s=s+Math.imul(_,ea)|0)+Math.imul(P,eo)|0,o=o+Math.imul(P,ea)|0,n=n+Math.imul(S,eu)|0,s=(s=s+Math.imul(S,ec)|0)+Math.imul(k,eu)|0,o=o+Math.imul(k,ec)|0,n=n+Math.imul(w,ef)|0,s=(s=s+Math.imul(w,eh)|0)+Math.imul(E,ef)|0,o=o+Math.imul(E,eh)|0,n=n+Math.imul(b,eg)|0,s=(s=s+Math.imul(b,em)|0)+Math.imul(v,eg)|0,o=o+Math.imul(v,em)|0;var eP=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eP>>>26)|0,eP&=0x3ffffff,n=Math.imul(F,Q),s=(s=Math.imul(F,X))+Math.imul(j,Q)|0,o=Math.imul(j,X),n=n+Math.imul(L,ee)|0,s=(s=s+Math.imul(L,et)|0)+Math.imul(M,ee)|0,o=o+Math.imul(M,et)|0,n=n+Math.imul(B,en)|0,s=(s=s+Math.imul(B,ei)|0)+Math.imul(N,en)|0,o=o+Math.imul(N,ei)|0,n=n+Math.imul(O,eo)|0,s=(s=s+Math.imul(O,ea)|0)+Math.imul(T,eo)|0,o=o+Math.imul(T,ea)|0,n=n+Math.imul(_,eu)|0,s=(s=s+Math.imul(_,ec)|0)+Math.imul(P,eu)|0,o=o+Math.imul(P,ec)|0,n=n+Math.imul(S,ef)|0,s=(s=s+Math.imul(S,eh)|0)+Math.imul(k,ef)|0,o=o+Math.imul(k,eh)|0,n=n+Math.imul(w,eg)|0,s=(s=s+Math.imul(w,em)|0)+Math.imul(E,eg)|0,o=o+Math.imul(E,em)|0;var eC=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eC>>>26)|0,eC&=0x3ffffff,n=Math.imul(F,ee),s=(s=Math.imul(F,et))+Math.imul(j,ee)|0,o=Math.imul(j,et),n=n+Math.imul(L,en)|0,s=(s=s+Math.imul(L,ei)|0)+Math.imul(M,en)|0,o=o+Math.imul(M,ei)|0,n=n+Math.imul(B,eo)|0,s=(s=s+Math.imul(B,ea)|0)+Math.imul(N,eo)|0,o=o+Math.imul(N,ea)|0,n=n+Math.imul(O,eu)|0,s=(s=s+Math.imul(O,ec)|0)+Math.imul(T,eu)|0,o=o+Math.imul(T,ec)|0,n=n+Math.imul(_,ef)|0,s=(s=s+Math.imul(_,eh)|0)+Math.imul(P,ef)|0,o=o+Math.imul(P,eh)|0,n=n+Math.imul(S,eg)|0,s=(s=s+Math.imul(S,em)|0)+Math.imul(k,eg)|0,o=o+Math.imul(k,em)|0;var eO=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eO>>>26)|0,eO&=0x3ffffff,n=Math.imul(F,en),s=(s=Math.imul(F,ei))+Math.imul(j,en)|0,o=Math.imul(j,ei),n=n+Math.imul(L,eo)|0,s=(s=s+Math.imul(L,ea)|0)+Math.imul(M,eo)|0,o=o+Math.imul(M,ea)|0,n=n+Math.imul(B,eu)|0,s=(s=s+Math.imul(B,ec)|0)+Math.imul(N,eu)|0,o=o+Math.imul(N,ec)|0,n=n+Math.imul(O,ef)|0,s=(s=s+Math.imul(O,eh)|0)+Math.imul(T,ef)|0,o=o+Math.imul(T,eh)|0,n=n+Math.imul(_,eg)|0,s=(s=s+Math.imul(_,em)|0)+Math.imul(P,eg)|0,o=o+Math.imul(P,em)|0;var eT=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eT>>>26)|0,eT&=0x3ffffff,n=Math.imul(F,eo),s=(s=Math.imul(F,ea))+Math.imul(j,eo)|0,o=Math.imul(j,ea),n=n+Math.imul(L,eu)|0,s=(s=s+Math.imul(L,ec)|0)+Math.imul(M,eu)|0,o=o+Math.imul(M,ec)|0,n=n+Math.imul(B,ef)|0,s=(s=s+Math.imul(B,eh)|0)+Math.imul(N,ef)|0,o=o+Math.imul(N,eh)|0,n=n+Math.imul(O,eg)|0,s=(s=s+Math.imul(O,em)|0)+Math.imul(T,eg)|0,o=o+Math.imul(T,em)|0;var eR=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eR>>>26)|0,eR&=0x3ffffff,n=Math.imul(F,eu),s=(s=Math.imul(F,ec))+Math.imul(j,eu)|0,o=Math.imul(j,ec),n=n+Math.imul(L,ef)|0,s=(s=s+Math.imul(L,eh)|0)+Math.imul(M,ef)|0,o=o+Math.imul(M,eh)|0,n=n+Math.imul(B,eg)|0,s=(s=s+Math.imul(B,em)|0)+Math.imul(N,eg)|0,o=o+Math.imul(N,em)|0;var eB=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eB>>>26)|0,eB&=0x3ffffff,n=Math.imul(F,ef),s=(s=Math.imul(F,eh))+Math.imul(j,ef)|0,o=Math.imul(j,eh),n=n+Math.imul(L,eg)|0,s=(s=s+Math.imul(L,em)|0)+Math.imul(M,eg)|0,o=o+Math.imul(M,em)|0;var eN=(c+n|0)+((8191&s)<<13)|0;c=(o+(s>>>13)|0)+(eN>>>26)|0,eN&=0x3ffffff,n=Math.imul(F,eg),s=(s=Math.imul(F,em))+Math.imul(j,eg)|0,o=Math.imul(j,em);var eD=(c+n|0)+((8191&s)<<13)|0;return c=(o+(s>>>13)|0)+(eD>>>26)|0,eD&=0x3ffffff,u[0]=ey,u[1]=eb,u[2]=ev,u[3]=ex,u[4]=ew,u[5]=eE,u[6]=eA,u[7]=eS,u[8]=ek,u[9]=eI,u[10]=e_,u[11]=eP,u[12]=eC,u[13]=eO,u[14]=eT,u[15]=eR,u[16]=eB,u[17]=eN,u[18]=eD,0!==c&&(u[19]=c,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,s=0,o=0;o<r.length-1;o++){var a=s;s=0;for(var l=0x3ffffff&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var d=o-c,f=(0|e.words[d])*(0|t.words[c]),h=0x3ffffff&f;a=a+(f/0x4000000|0)|0,l=0x3ffffff&(h=h+l|0),s+=(a=a+(h>>>26)|0)>>>26,a&=0x3ffffff}r.words[o]=l,n=a,a=s}return 0!==n?r.words[o]=n:r.length--,r._strip()}Math.imul||(m=g),s.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return 10===this.length&&10===e.length?r=m(this,e,t):n<63?r=g(this,e,t):(n<1024,r=y(this,e,t)),r},s.prototype.mul=function(e){var t=new s(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=Array(this.length+e.length),y(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<0x4000000);for(var n=0,s=0;s<this.length;s++){var o=(0|this.words[s])*e,a=(0x3ffffff&o)+(0x3ffffff&n);n>>=26,n+=(o/0x4000000|0)+(a>>>26),this.words[s]=0x3ffffff&a}return 0!==n&&(this.words[s]=n,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,s=r%26;t[r]=e.words[n]>>>s&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var o=r.sqr();n<t.length;n++,o=o.sqr())0!==t[n]&&(r=r.mul(o));return r},s.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,s=(e-n)/26,o=0x3ffffff>>>26-n<<26-n;if(0!==n){var a=0;for(t=0;t<this.length;t++){var l=this.words[t]&o,u=(0|this.words[t])-l<<n;this.words[t]=u|a,a=l>>>26-n}a&&(this.words[t]=a,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this._strip()},s.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,n){r("number"==typeof e&&e>=0);var s=t?(t-t%26)/26:0,o=e%26,a=Math.min((e-o)/26,this.length),l=0x3ffffff^0x3ffffff>>>o<<o;if(s-=a,s=Math.max(0,s),n){for(var u=0;u<a;u++)n.words[u]=this.words[u];n.length=a}if(0!==a)if(this.length>a)for(this.length-=a,u=0;u<this.length;u++)this.words[u]=this.words[u+a];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=s);u--){var d=0|this.words[u];this.words[u]=c<<26-o|d>>>o,c=d&l}return n&&0!==c&&(n.words[n.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;return!(this.length<=n)&&!!(this.words[n]&1<<t)},s.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;return(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)?this:(0!==t&&n++,this.length=Math.min(n,this.length),0!==t&&(this.words[this.length-1]&=0x3ffffff^0x3ffffff>>>t<<t),this._strip())},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return r("number"==typeof e),r(e<0x4000000),e<0?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=0x4000000;t++)this.words[t]-=0x4000000,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(r("number"==typeof e),r(e<0x4000000),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=0x4000000,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,n){var s,o=e.length+n;this._expand(o);var a,l=0;for(s=0;s<e.length;s++){a=(0|this.words[s+n])+l;var u=(0|e.words[s])*t;a-=0x3ffffff&u,l=(a>>26)-(u/0x4000000|0),this.words[s+n]=0x3ffffff&a}for(;s<this.length-n;s++)l=(a=(0|this.words[s+n])+l)>>26,this.words[s+n]=0x3ffffff&a;if(0===l)return this._strip();for(r(-1===l),l=0,s=0;s<this.length;s++)l=(a=-(0|this.words[s])+l)>>26,this.words[s]=0x3ffffff&a;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=this.length-e.length,n=this.clone(),o=e,a=0|o.words[o.length-1];0!=(r=26-this._countBits(a))&&(o=o.ushln(r),n.iushln(r),a=0|o.words[o.length-1]);var l,u=n.length-o.length;if("mod"!==t){(l=new s(null)).length=u+1,l.words=Array(l.length);for(var c=0;c<l.length;c++)l.words[c]=0}var d=n.clone()._ishlnsubmul(o,1,u);0===d.negative&&(n=d,l&&(l.words[u]=1));for(var f=u-1;f>=0;f--){var h=(0|n.words[o.length+f])*0x4000000+(0|n.words[o.length+f-1]);for(h=Math.min(h/a|0,0x3ffffff),n._ishlnsubmul(o,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(o,1,f),n.isZero()||(n.negative^=1);l&&(l.words[f]=h)}return l&&l._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:l||null,mod:n}},s.prototype.divmod=function(e,t,n){var o,a,l;return(r(!e.isZero()),this.isZero())?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(l=this.neg().divmod(e,t),"mod"!==t&&(o=l.div.neg()),"div"!==t&&(a=l.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(l=this.divmod(e.neg(),t),"mod"!==t&&(o=l.div.neg()),{div:o,mod:l.mod}):this.negative&e.negative?(l=this.neg().divmod(e.neg(),t),"div"!==t&&(a=l.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:l.div,mod:a}):e.length>this.length||0>this.cmp(e)?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t)},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),s=e.andln(1),o=r.cmp(n);return o<0||1===s&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=0x3ffffff);for(var n=0x4000000%e,s=0,o=this.length-1;o>=0;o--)s=(n*s+(0|this.words[o]))%e;return t?-s:s},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=0x3ffffff);for(var n=0,s=this.length-1;s>=0;s--){var o=(0|this.words[s])+0x4000000*n;this.words[s]=o/e|0,n=o%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new s(1),a=new s(0),l=new s(0),u=new s(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var d=n.clone(),f=t.clone();!t.isZero();){for(var h=0,p=1;!(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(d),a.isub(f)),o.iushrn(1),a.iushrn(1);for(var g=0,m=1;!(n.words[0]&m)&&g<26;++g,m<<=1);if(g>0)for(n.iushrn(g);g-- >0;)(l.isOdd()||u.isOdd())&&(l.iadd(d),u.isub(f)),l.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(l),a.isub(u)):(n.isub(t),l.isub(o),u.isub(a))}return{a:l,b:u,gcd:n.iushln(c)}},s.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t,n=this,o=e.clone();n=0!==n.negative?n.umod(e):n.clone();for(var a=new s(1),l=new s(0),u=o.clone();n.cmpn(1)>0&&o.cmpn(1)>0;){for(var c=0,d=1;!(n.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(n.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var f=0,h=1;!(o.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(o.iushrn(f);f-- >0;)l.isOdd()&&l.iadd(u),l.iushrn(1);n.cmp(o)>=0?(n.isub(o),a.isub(l)):(o.isub(n),l.isub(a))}return 0>(t=0===n.cmpn(1)?a:l).cmpn(0)&&t.iadd(e),t},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var s=t.cmp(r);if(s<0){var o=t;t=r,r=o}else if(0===s||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return(1&this.words[0])==0},s.prototype.isOdd=function(){return(1&this.words[0])==1},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,s=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=s,this;for(var o=s,a=n;0!==o&&a<this.length;a++){var l=0|this.words[a];l+=o,o=l>>>26,l&=0x3ffffff,this.words[a]=l}return 0!==o&&(this.words[a]=o,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return -1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=0x3ffffff,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],s=0|e.words[r];if(n!==s){n<s?t=-1:n>s&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return -1===this.cmpn(e)},s.prototype.lt=function(e){return -1===this.cmp(e)},s.prototype.lten=function(e){return 0>=this.cmpn(e)},s.prototype.lte=function(e){return 0>=this.cmp(e)},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new S(e)},s.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new s(null);return e.words=Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n)var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},n(x,v),x.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9){e.words[0]=0,e.length=1;return}var s=e.words[9];for(t.words[t.length++]=4194303&s,n=10;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|s>>>22,s=o}s>>>=22,e.words[n-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},x.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=0x3ffffff&t,t=64*n+(t/0x4000000|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(w,v),n(E,v),n(A,v),A.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=(0|e.words[r])*19+t,s=0x3ffffff&n;n>>>=26,e.words[r]=s,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){var t;if(b[e])return b[e];if("k256"===e)t=new x;else if("p224"===e)t=new w;else if("p192"===e)t=new E;else if("p25519"===e)t=new A;else throw Error("Unknown prime "+e);return b[e]=t,t},S.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){r((e.negative|t.negative)==0,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new s(1)).iushrn(2);return this.pow(e,n)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);r(!o.isZero());var l=new s(1).toRed(this),u=l.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new s(2*d*d).toRed(this);0!==this.pow(d,c).cmp(u);)d.redIAdd(u);for(var f=this.pow(d,o),h=this.pow(e,o.addn(1).iushrn(1)),p=this.pow(e,o),g=a;0!==p.cmp(l);){for(var m=p,y=0;0!==m.cmp(l);y++)m=m.redSqr();r(y<g);var b=this.pow(f,new s(1).iushln(g-y-1));h=h.redMul(b),f=b.redSqr(),p=p.redMul(f),g=y}return h},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var o=r[0],a=0,l=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],d=u-1;d>=0;d--){var f=c>>d&1;if(o!==r[0]&&(o=this.sqr(o)),0===f&&0===a){l=0;continue}a<<=1,a|=f,(4==++l||0===n&&0===d)&&(o=this.mul(o,r[a]),l=0,a=0)}u=26}return o},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new k(e)},n(k,S),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):0>s.cmpn(0)&&(o=s.iadd(this.m)),o._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):0>o.cmpn(0)&&(a=o.iadd(this.m)),a._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(R4,e4);var R5=R4.exports;let R9=e5(R5);var R7={exports:{}};!function(e,t){var r=TO.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function s(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=TO:(n(TO,t),t.Buffer=s),s.prototype=Object.create(r.prototype),n(r,s),s.from=function(e,t,n){if("number"==typeof e)throw TypeError("Argument must not be a number");return r(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw TypeError("Argument must be a number");var s=r(e);return void 0!==t?"string"==typeof n?s.fill(t,n):s.fill(t):s.fill(0),s},s.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return TO.SlowBuffer(e)}}(R7,R7.exports);var Be=R7.exports,Bt=Be.Buffer;let Br=e5(function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==t[o])throw TypeError(s+" is ambiguous");t[o]=n}var a=e.length,l=e.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return Bt.alloc(0);for(var r=0,n=0,s=0;e[r]===l;)n++,r++;for(var o=(e.length-r)*u+1>>>0,c=new Uint8Array(o);r<e.length;){var d=e.charCodeAt(r);if(d>255)return;var f=t[d];if(255===f)return;for(var h=0,p=o-1;(0!==f||h<s)&&-1!==p;p--,h++)f+=a*c[p]>>>0,c[p]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");s=h,r++}for(var g=o-s;g!==o&&0===c[g];)g++;var m=Bt.allocUnsafe(n+(o-g));m.fill(0,0,n);for(var y=n;g!==o;)m[y++]=c[g++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=Bt.from(t)),!Bt.isBuffer(t))throw TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,n=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var u=(o-s)*c+1>>>0,d=new Uint8Array(u);s!==o;){for(var f=t[s],h=0,p=u-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*d[p]>>>0,d[p]=f%a>>>0,f=f/a>>>0;if(0!==f)throw Error("Non-zero carry");n=h,s++}for(var g=u-n;g!==u&&0===d[g];)g++;for(var m=l.repeat(r);g<u;++g)m+=e.charAt(d[g]);return m},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw Error("Non-base"+a+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"));var Bn={},Bi=Be.Buffer,Bs=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==t[o])throw TypeError(s+" is ambiguous");t[o]=n}var a=e.length,l=e.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return Bi.alloc(0);for(var r=0,n=0,s=0;e[r]===l;)n++,r++;for(var o=(e.length-r)*u+1>>>0,c=new Uint8Array(o);r<e.length;){var d=e.charCodeAt(r);if(d>255)return;var f=t[d];if(255===f)return;for(var h=0,p=o-1;(0!==f||h<s)&&-1!==p;p--,h++)f+=a*c[p]>>>0,c[p]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");s=h,r++}for(var g=o-s;g!==o&&0===c[g];)g++;var m=Bi.allocUnsafe(n+(o-g));m.fill(0,0,n);for(var y=n;g!==o;)m[y++]=c[g++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=Bi.from(t)),!Bi.isBuffer(t))throw TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,n=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var u=(o-s)*c+1>>>0,d=new Uint8Array(u);s!==o;){for(var f=t[s],h=0,p=u-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*d[p]>>>0,d[p]=f%a>>>0,f=f/a>>>0;if(0!==f)throw Error("Non-zero carry");n=h,s++}for(var g=u-n;g!==u&&0===d[g];)g++;for(var m=l.repeat(r);g<u;++g)m+=e.charAt(d[g]);return m},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw Error("Non-base"+a+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function Bo(e,t,r){return t<=e&&e<=r}function Ba(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function Bl(e){this.tokens=[].slice.call(e)}function Bu(e,t){if(e)throw TypeError("Decoder error");return t||65533}Bl.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.push(e.shift());else this.tokens.push(e)}};var Bc="utf-8";function Bd(e,t){if(!(this instanceof Bd))return new Bd(e,t);if((e=void 0!==e?String(e).toLowerCase():Bc)!==Bc)throw Error("Encoding not supported. Only utf-8 is supported");t=Ba(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function Bf(e,t){if(!(this instanceof Bf))return new Bf(e,t);if((e=void 0!==e?String(e).toLowerCase():Bc)!==Bc)throw Error("Encoding not supported. Only utf-8 is supported");t=Ba(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function Bh(e){var t=e.fatal,r=0,n=0,s=0,o=128,a=191;this.handler=function(e,l){if(-1===l&&0!==s)return s=0,Bu(t);if(-1===l)return -1;if(0===s){if(Bo(l,0,127))return l;if(Bo(l,194,223))s=1,r=l-192;else if(Bo(l,224,239))224===l&&(o=160),237===l&&(a=159),s=2,r=l-224;else{if(!Bo(l,240,244))return Bu(t);240===l&&(o=144),244===l&&(a=143),s=3,r=l-240}return r<<=6*s,null}if(!Bo(l,o,a))return r=s=n=0,o=128,a=191,e.prepend(l),Bu(t);if(o=128,a=191,n+=1,r+=l-128<<6*(s-n),n!==s)return null;var u=r;return r=s=n=0,u}}function Bp(e){e.fatal,this.handler=function(e,t){if(-1===t)return -1;if(Bo(t,0,127))return t;Bo(t,128,2047)?(r=1,n=192):Bo(t,2048,65535)?(r=2,n=224):Bo(t,65536,1114111)&&(r=3,n=240);for(var r,n,s=[(t>>6*r)+n];r>0;){var o=t>>6*(r-1);s.push(128|63&o),r-=1}return s}}Bd.prototype={decode:function(e,t){r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=Ba(t),this._streaming||(this._decoder=new Bh({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var r,n,s=new Bl(r),o=[];!s.endOfStream()&&-1!==(n=this._decoder.handler(s,s.read()));)null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n));if(!this._streaming){do{if(-1===(n=this._decoder.handler(s,s.read())))break;null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n))}while(!s.endOfStream())this._decoder=null}return!o.length||-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(1023&n)+56320))}return t}(o)}},Bf.prototype={encode:function(e,t){e=e?String(e):"",t=Ba(t),this._streaming||(this._encoder=new Bp(this._options)),this._streaming=!!t.stream;for(var r,n=[],s=new Bl(function(e){for(var t=String(e),r=t.length,n=0,s=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)s.push(o);else if(56320<=o&&o<=57343)s.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)s.push(65533);else{var a=e.charCodeAt(n+1);if(56320<=a&&a<=57343){var l=1023&o,u=1023&a;s.push(65536+(l<<10)+u),n+=1}else s.push(65533)}n+=1}return s}(e));!s.endOfStream()&&-1!==(r=this._encoder.handler(s,s.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(s,s.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}};let Bg=e9(Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Bd,TextEncoder:Bf},Symbol.toStringTag,{value:"Module"})));var Bm=e4&&e4.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),By=e4&&e4.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Bb=e4&&e4.__decorate||function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},Bv=e4&&e4.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&Bm(t,e,r);return By(t,e),t},Bx=e4&&e4.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bn,"__esModule",{value:!0});var Bw=Bn.deserializeUnchecked=BL=Bn.deserialize=BB=Bn.serialize=Bn.BinaryReader=Bn.BinaryWriter=Bn.BorshError=Bn.baseDecode=Bn.baseEncode=void 0;let BE=Bx(R5),BA=Bx(Bs),BS=Bv(Bg),Bk=new("function"!=typeof TextDecoder?BS.TextDecoder:TextDecoder)("utf-8",{fatal:!0});Bn.baseEncode=function(e){return"string"==typeof e&&(e=eZ.from(e,"utf8")),BA.default.encode(eZ.from(e))},Bn.baseDecode=function(e){return eZ.from(BA.default.decode(e))};class BI extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Bn.BorshError=BI;class B_{constructor(){this.buf=eZ.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=eZ.concat([this.buf,eZ.alloc(1024)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(eZ.from(new BE.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(eZ.from(new BE.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(eZ.from(new BE.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(eZ.from(new BE.default(e).toArray("le",64)))}writeBuffer(e){this.buf=eZ.concat([eZ.from(this.buf.subarray(0,this.length)),e,eZ.alloc(1024)]),this.length+=e.length}writeString(e){this.maybeResize();let t=eZ.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(eZ.from(e))}writeArray(e,t){for(let r of(this.maybeResize(),this.writeU32(e.length),e))this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function BP(e,t,r){let n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(e){if(e instanceof RangeError&&["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e.code)>=0)throw new BI("Reached the end of buffer when deserializing");throw e}}}Bn.BinaryWriter=B_;class BC{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new BE.default(e,"le")}readU128(){let e=this.readBuffer(16);return new BE.default(e,"le")}readU256(){let e=this.readBuffer(32);return new BE.default(e,"le")}readU512(){let e=this.readBuffer(64);return new BE.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new BI(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return Bk.decode(t)}catch(e){throw new BI(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),r=[];for(let n=0;n<t;++n)r.push(e());return r}}function BO(e){return e.charAt(0).toUpperCase()+e.slice(1)}function BT(e,t,r,n,s){try{if("string"==typeof n)s[`write${BO(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new BI(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);s.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new BI(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)BT(e,null,r[t],n[0],s)}else s.writeArray(r,r=>{BT(e,t,r,n[0],s)});else if(void 0!==n.kind)switch(n.kind){case"option":null==r?s.writeU8(0):(s.writeU8(1),BT(e,t,r,n.type,s));break;case"map":s.writeU32(r.size),r.forEach((r,o)=>{BT(e,t,o,n.key,s),BT(e,t,r,n.value,s)});break;default:throw new BI(`FieldType ${n} unrecognized`)}else BR(e,r,s)}catch(e){throw e instanceof BI&&e.addToFieldPath(t),e}}function BR(e,t,r){if("function"==typeof t.borshSerialize)return void t.borshSerialize(r);let n=e.get(t.constructor);if(!n)throw new BI(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map(([n,s])=>{BT(e,n,t[n],s,r)});else if("enum"===n.kind){let s=t[n.field];for(let o=0;o<n.values.length;++o){let[a,l]=n.values[o];if(a===s){r.writeU8(o),BT(e,a,t[a],l,r);break}}}else throw new BI(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}Bb([BP],BC.prototype,"readU8",null),Bb([BP],BC.prototype,"readU16",null),Bb([BP],BC.prototype,"readU32",null),Bb([BP],BC.prototype,"readU64",null),Bb([BP],BC.prototype,"readU128",null),Bb([BP],BC.prototype,"readU256",null),Bb([BP],BC.prototype,"readU512",null),Bb([BP],BC.prototype,"readString",null),Bb([BP],BC.prototype,"readFixedArray",null),Bb([BP],BC.prototype,"readArray",null),Bn.BinaryReader=BC;var BB=Bn.serialize=function(e,t,r=B_){let n=new r;return BR(e,t,n),n.toArray()};function BN(e,t,r,n){try{if("string"==typeof r)return n[`read${BO(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"!=typeof r[1])return n.readArray(()=>BN(e,t,r[0],n));{let t=[];for(let s=0;s<r[1];s++)t.push(BN(e,null,r[0],n));return t}}if("option"===r.kind)return n.readU8()?BN(e,t,r.type,n):void 0;if("map"===r.kind){let s=new Map,o=n.readU32();for(let a=0;a<o;a++){let o=BN(e,t,r.key,n),a=BN(e,t,r.value,n);s.set(o,a)}return s}return BD(e,r,n)}catch(e){throw e instanceof BI&&e.addToFieldPath(t),e}}function BD(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);let n=e.get(t);if(!n)throw new BI(`Class ${t.name} is missing in schema`);if("struct"===n.kind){let n={};for(let[s,o]of e.get(t).fields)n[s]=BN(e,s,o,r);return new t(n)}if("enum"===n.kind){let s=r.readU8();if(s>=n.values.length)throw new BI(`Enum index: ${s} is out of range`);let[o,a]=n.values[s],l=BN(e,o,a,r);return new t({[o]:l})}throw new BI(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}var BL=Bn.deserialize=function(e,t,r,n=BC){let s=new n(r),o=BD(e,t,s);if(s.offset<r.length)throw new BI(`Unexpected ${r.length-s.offset} bytes after deserialized data`);return o};Bw=Bn.deserializeUnchecked=function(e,t,r,n=BC){return BD(e,t,new n(r))};var BM={};function BU(e){if(!(e instanceof Uint8Array))throw TypeError("b must be a Uint8Array")}function BF(e){return BU(e),TO.Buffer.from(e.buffer,e.byteOffset,e.length)}Object.defineProperty(BM,"__esModule",{value:!0}),BM.s16=BM.s8=BM.nu64be=BM.u48be=BM.u40be=BM.u32be=BM.u24be=BM.u16be=Np=BM.nu64=BM.u48=BM.u40=Nh=BM.u32=BM.u24=Nf=BM.u16=Nd=BM.u8=Nc=BM.offset=BM.greedy=BM.Constant=BM.UTF8=BM.CString=BM.Blob=BM.Boolean=BM.BitField=BM.BitStructure=BM.VariantLayout=BM.Union=BM.UnionLayoutDiscriminator=BM.UnionDiscriminator=BM.Structure=BM.Sequence=BM.DoubleBE=BM.Double=BM.FloatBE=BM.Float=BM.NearInt64BE=BM.NearInt64=BM.NearUInt64BE=BM.NearUInt64=BM.IntBE=BM.Int=BM.UIntBE=BM.UInt=BM.OffsetLayout=BM.GreedyCount=BM.ExternalLayout=BM.bindConstructorLayout=BM.nameWithProperty=Bz=BM.Layout=BM.uint8ArrayToBuffer=BM.checkUint8Array=void 0,BM.constant=BM.utf8=BM.cstr=Nb=BM.blob=BM.unionLayoutDiscriminator=BM.union=Ny=BM.seq=BM.bits=Nm=BM.struct=BM.f64be=BM.f64=BM.f32be=BM.f32=BM.ns64be=BM.s48be=BM.s40be=BM.s32be=BM.s24be=BM.s16be=Ng=BM.ns64=BM.s48=BM.s40=BM.s32=BM.s24=void 0,BM.checkUint8Array=BU,BM.uint8ArrayToBuffer=BF;class Bj{constructor(e,t){if(!Number.isInteger(e))throw TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var Bz=BM.Layout=Bj;function B$(e,t){return t.property?e+"["+t.property+"]":e}BM.nameWithProperty=B$,BM.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw Error("Class is already bound to a layout");if(!(t&&t instanceof Bj))throw TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,r)=>t.decode(e,r),writable:!0})};class BH extends Bj{isCount(){throw Error("ExternalLayout is abstract")}}BM.ExternalLayout=BH;class BV extends BH{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){return BU(e),Math.floor((e.length-t)/this.elementSpan)}encode(e,t,r){return 0}}BM.GreedyCount=BV;class Bq extends BH{constructor(e,t=0,r){if(!(e instanceof Bj))throw TypeError("layout must be a Layout");if(!Number.isInteger(t))throw TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof BG||this.layout instanceof BW}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}BM.OffsetLayout=Bq;class BG extends Bj{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return BF(e).readUIntLE(t,this.span)}encode(e,t,r=0){return BF(t).writeUIntLE(e,r,this.span),this.span}}BM.UInt=BG;class BW extends Bj{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return BF(e).readUIntBE(t,this.span)}encode(e,t,r=0){return BF(t).writeUIntBE(e,r,this.span),this.span}}BM.UIntBE=BW;class BK extends Bj{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return BF(e).readIntLE(t,this.span)}encode(e,t,r=0){return BF(t).writeIntLE(e,r,this.span),this.span}}BM.Int=BK;class BJ extends Bj{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return BF(e).readIntBE(t,this.span)}encode(e,t,r=0){return BF(t).writeIntBE(e,r,this.span),this.span}}function BZ(e){let t=Math.floor(e/0x100000000);return{hi32:t,lo32:e-0x100000000*t}}function BQ(e,t){return 0x100000000*e+t}BM.IntBE=BJ;class BX extends Bj{constructor(e){super(8,e)}decode(e,t=0){let r=BF(e),n=r.readUInt32LE(t);return BQ(r.readUInt32LE(t+4),n)}encode(e,t,r=0){let n=BZ(e),s=BF(t);return s.writeUInt32LE(n.lo32,r),s.writeUInt32LE(n.hi32,r+4),8}}BM.NearUInt64=BX;class BY extends Bj{constructor(e){super(8,e)}decode(e,t=0){let r=BF(e);return BQ(r.readUInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){let n=BZ(e),s=BF(t);return s.writeUInt32BE(n.hi32,r),s.writeUInt32BE(n.lo32,r+4),8}}BM.NearUInt64BE=BY;class B0 extends Bj{constructor(e){super(8,e)}decode(e,t=0){let r=BF(e),n=r.readUInt32LE(t);return BQ(r.readInt32LE(t+4),n)}encode(e,t,r=0){let n=BZ(e),s=BF(t);return s.writeUInt32LE(n.lo32,r),s.writeInt32LE(n.hi32,r+4),8}}BM.NearInt64=B0;class B1 extends Bj{constructor(e){super(8,e)}decode(e,t=0){let r=BF(e);return BQ(r.readInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){let n=BZ(e),s=BF(t);return s.writeInt32BE(n.hi32,r),s.writeUInt32BE(n.lo32,r+4),8}}BM.NearInt64BE=B1;class B2 extends Bj{constructor(e){super(4,e)}decode(e,t=0){return BF(e).readFloatLE(t)}encode(e,t,r=0){return BF(t).writeFloatLE(e,r),4}}BM.Float=B2;class B3 extends Bj{constructor(e){super(4,e)}decode(e,t=0){return BF(e).readFloatBE(t)}encode(e,t,r=0){return BF(t).writeFloatBE(e,r),4}}BM.FloatBE=B3;class B8 extends Bj{constructor(e){super(8,e)}decode(e,t=0){return BF(e).readDoubleLE(t)}encode(e,t,r=0){return BF(t).writeDoubleLE(e,r),8}}BM.Double=B8;class B6 extends Bj{constructor(e){super(8,e)}decode(e,t=0){return BF(e).readDoubleBE(t)}encode(e,t,r=0){return BF(t).writeDoubleBE(e,r),8}}BM.DoubleBE=B6;class B4 extends Bj{constructor(e,t,r){if(!(e instanceof Bj))throw TypeError("elementLayout must be a Layout");if(!(t instanceof BH&&t.isCount()||Number.isInteger(t)&&0<=t))throw TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;t instanceof BH||!(0<e.span)||(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof BH&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let s=0;for(;s<n;)r+=this.elementLayout.getSpan(e,t+r),++s}return r}decode(e,t=0){let r=[],n=0,s=this.count;for(s instanceof BH&&(s=s.decode(e,t));n<s;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){let n=this.elementLayout,s=e.reduce((e,s)=>e+n.encode(s,t,r+e),0);return this.count instanceof BH&&this.count.encode(e.length,t,r),s}}BM.Sequence=B4;class B5 extends Bj{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((e,t)=>e&&t instanceof Bj,!0)))throw TypeError("fields must be array of Layout instances");for(let n of("boolean"==typeof t&&void 0===r&&(r=t,t=void 0),e))if(0>n.span&&void 0===n.property)throw Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce((e,t)=>e+t.getSpan(),0)}catch{}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,n)=>{let s=n.getSpan(e,t);return t+=s,r+s},0)}catch{throw RangeError("indeterminate span")}return r}decode(e,t=0){BU(e);let r=this.makeDestinationObject();for(let n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){let n=r,s=0,o=0;for(let n of this.fields){let a=n.span;if(o=0<a?a:0,void 0!==n.property){let s=e[n.property];void 0!==s&&(o=n.encode(s,t,r),0>a&&(a=n.getSpan(t,r)))}s=r,r+=a}return s+o-n}fromArray(e){let t=this.makeDestinationObject();for(let r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw TypeError("property must be string");let t=0;for(let r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}BM.Structure=B5;class B9{constructor(e){this.property=e}decode(e,t){throw Error("UnionDiscriminator is abstract")}encode(e,t,r){throw Error("UnionDiscriminator is abstract")}}BM.UnionDiscriminator=B9;class B7 extends B9{constructor(e,t){if(!(e instanceof BH&&e.isCount()))throw TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}BM.UnionLayoutDiscriminator=B7;class Ne extends Bj{constructor(e,t,r){let n;if(e instanceof BG||e instanceof BW)n=new B7(new Bq(e));else if(e instanceof BH&&e.isCount())n=new B7(e);else if(e instanceof B9)n=e;else throw TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof Bj))throw TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let s=-1;t&&0<=(s=t.span)&&(e instanceof BG||e instanceof BW)&&(s+=n.layout.span),super(s,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof BG||e instanceof BW,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return o(e)},this.configGetSourceVariant=function(e){o=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let r=this.getVariant(e,t);if(!r)throw Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw Error("unable to infer src variant")}decode(e,t=0){let r,n=this.discriminator,s=n.decode(e,t),o=this.registry[s];if(void 0===o){let o=this.defaultLayout,a=0;this.usesPrefixDiscriminator&&(a=n.layout.span),(r=this.makeDestinationObject())[n.property]=s,r[o.property]=o.decode(e,t+a)}else r=o.decode(e,t);return r}encode(e,t,r=0){let n=this.getSourceVariant(e);if(void 0===n){let n=this.discriminator,s=this.defaultLayout,o=0;return this.usesPrefixDiscriminator&&(o=n.layout.span),n.encode(e[n.property],t,r),o+s.encode(e[s.property],t,r+o)}return n.encode(e,t,r)}addVariant(e,t,r){let n=new Nt(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t=0){let r;return r=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[r]}}BM.Union=Ne;class Nt extends Bj{constructor(e,t,r,n){if(!(e instanceof Ne))throw TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof Bj))throw TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw Error("variant span exceeds span of containing union");if("string"!=typeof n)throw TypeError("variant must have a String property")}let s=e.span;0>e.span&&0<=(s=r?r.span:0)&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span),super(s,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e,t=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let s=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),s+=this.layout.getSpan(t,r+n),0<=this.union.span&&s>this.union.span))throw Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function Nr(e){return 0>e&&(e+=0x100000000),e}BM.VariantLayout=Nt;class Nn extends Bj{constructor(e,t,r){if(!(e instanceof BG||e instanceof BW))throw TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=Nr(e),this},this._packedGetValue=function(){return n}}decode(e,t=0){let r=this.makeDestinationObject(),n=this.word.decode(e,t);for(let t of(this._packedSetValue(n),this.fields))void 0!==t.property&&(r[t.property]=t.decode(e));return r}encode(e,t,r=0){let n=this.word.decode(t,r);for(let t of(this._packedSetValue(n),this.fields))if(void 0!==t.property){let r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){let r=new Ni(this,e,t);return this.fields.push(r),r}addBoolean(e){let t=new Ns(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}}BM.BitStructure=Nn;class Ni{constructor(e,t,r){if(!(e instanceof Nn))throw TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw TypeError("bits must be positive integer");let n=8*e.span,s=e.fields.reduce((e,t)=>e+t.bits,0);if(t+s>n)throw Error("bits too long for span remainder ("+(n-s)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=0xffffffff),this.start=s,this.container.msb&&(this.start=n-s-t),this.wordMask=Nr(this.valueMask<<this.start),this.property=r}decode(e,t){return Nr(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==Nr(e&this.valueMask))throw TypeError(B$("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),r=Nr(e<<this.start);this.container._packedSetValue(Nr(t&~this.wordMask)|r)}}BM.BitField=Ni;let Ns=class extends Ni{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e*=1),super.encode(e)}};BM.Boolean=Ns;let No=class extends Bj{constructor(e,t){if(!(e instanceof BH&&e.isCount()||Number.isInteger(e)&&0<=e))throw TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof BH||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),BF(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof BH&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw TypeError(B$("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw RangeError("encoding overruns Uint8Array");let s=BF(e);return BF(t).write(s.toString("hex"),r,n,"hex"),this.length instanceof BH&&this.length.encode(n,t,r),n}};BM.Blob=No;class Na extends Bj{constructor(e){super(-1,e)}getSpan(e,t=0){BU(e);let r=t;for(;r<e.length&&0!==e[r];)r+=1;return 1+r-t}decode(e,t=0){let r=this.getSpan(e,t);return BF(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));let n=TO.Buffer.from(e,"utf8"),s=n.length;if(r+s>t.length)throw RangeError("encoding overruns Buffer");let o=BF(t);return n.copy(o,r),o[r+s]=0,s+1}}BM.CString=Na;class Nl extends Bj{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return BU(e),e.length-t}decode(e,t=0){let r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw RangeError("text length exceeds maxSpan");return BF(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));let n=TO.Buffer.from(e,"utf8"),s=n.length;if(0<=this.maxSpan&&this.maxSpan<s)throw RangeError("text length exceeds maxSpan");if(r+s>t.length)throw RangeError("encoding overruns Buffer");return n.copy(BF(t),r),s}}BM.UTF8=Nl;class Nu extends Bj{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}BM.Constant=Nu,BM.greedy=(e,t)=>new BV(e,t);var Nc=BM.offset=(e,t,r)=>new Bq(e,t,r),Nd=BM.u8=e=>new BG(1,e),Nf=BM.u16=e=>new BG(2,e);BM.u24=e=>new BG(3,e);var Nh=BM.u32=e=>new BG(4,e);BM.u40=e=>new BG(5,e),BM.u48=e=>new BG(6,e);var Np=BM.nu64=e=>new BX(e);BM.u16be=e=>new BW(2,e),BM.u24be=e=>new BW(3,e),BM.u32be=e=>new BW(4,e),BM.u40be=e=>new BW(5,e),BM.u48be=e=>new BW(6,e),BM.nu64be=e=>new BY(e),BM.s8=e=>new BK(1,e),BM.s16=e=>new BK(2,e),BM.s24=e=>new BK(3,e),BM.s32=e=>new BK(4,e),BM.s40=e=>new BK(5,e),BM.s48=e=>new BK(6,e);var Ng=BM.ns64=e=>new B0(e);BM.s16be=e=>new BJ(2,e),BM.s24be=e=>new BJ(3,e),BM.s32be=e=>new BJ(4,e),BM.s40be=e=>new BJ(5,e),BM.s48be=e=>new BJ(6,e),BM.ns64be=e=>new B1(e),BM.f32=e=>new B2(e),BM.f32be=e=>new B3(e),BM.f64=e=>new B8(e),BM.f64be=e=>new B6(e);var Nm=BM.struct=(e,t,r)=>new B5(e,t,r);BM.bits=(e,t,r)=>new Nn(e,t,r);var Ny=BM.seq=(e,t,r)=>new B4(e,t,r);BM.union=(e,t,r)=>new Ne(e,t,r),BM.unionLayoutDiscriminator=(e,t)=>new B7(e,t);var Nb=BM.blob=(e,t)=>new No(e,t);function Nv([e,t]){return`${e}=${function e(t){return Array.isArray(t)?"%5B"+t.map(e).join("%2C%20")+"%5D":"bigint"==typeof t?`${t}n`:encodeURIComponent(String(null!=t&&null===Object.getPrototypeOf(t)?{...t}:t))}(t)}`}BM.cstr=e=>new Na(e),BM.utf8=(e,t)=>new Nl(e,t),BM.constant=(e,t)=>new Nu(e,t);var Nx=class extends Error{constructor(...[e,t]){let r,n;if(t){let{cause:e,...s}=t;e&&(n={cause:e}),Object.keys(s).length>0&&(r=s)}super(function(e,t={}){{let r=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(t).length&&(r+=` '${btoa(Object.entries(t).map(Nv).join("&"))}'`),`${r}\``}}(e,r),n),eY(this,"cause",this.cause),eY(this,"context"),this.context={__code:e,...r},this.name="SolanaError"}};function Nw(e){return"fixedSize"in e&&"number"==typeof e.fixedSize}function NE(e){return(null==e?void 0:e.endian)!==1}var NA=(e={})=>{var t,r;return Object.freeze({...r={fixedSize:(t={config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}).size,write(e,r,n){t.range&&function(e,t,r,n){if(n<t||n>r)throw new Nx(8078011,{codecDescription:e,max:r,min:t,value:n})}(t.name,t.range[0],t.range[1],e);let s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,NE(t.config)),r.set(new Uint8Array(s),n),n+t.size}},encode:e=>{let t=new Uint8Array("fixedSize"in r?r.fixedSize:r.getSizeFromValue(e));return r.write(e,t,0),t}})},NS=(e={})=>{var t,r;return Object.freeze({...r={fixedSize:(t={config:e,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}).size,read(e,r=0){(function(e,t,r=0){if(t.length-r<=0)throw new Nx(8078e3,{codecDescription:e})})(t.name,e,r),function(e,t,r,n=0){let s=r.length-n;if(s<t)throw new Nx(8078001,{bytesLength:s,codecDescription:e,expected:t})}(t.name,t.size,e,r);let n=new DataView(function(e,t,r){let n=e.byteOffset+(t??0),s=r??e.byteLength;return e.buffer.slice(n,n+s)}(e,r,t.size));return[t.get(n,NE(t.config)),r+t.size]}},decode:(e,t=0)=>r.read(e,t)[0]})},Nk=(e={})=>(function(e,t){if(Nw(e)!==Nw(t))throw new Nx(8078004);if(Nw(e)&&Nw(t)&&e.fixedSize!==t.fixedSize)throw new Nx(8078005,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!Nw(e)&&!Nw(t)&&e.maxSize!==t.maxSize)throw new Nx(8078006,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}})(NA(e),NS(e));class NI extends TypeError{constructor(e,t){let r,{message:n,explanation:s,...o}=e,{path:a}=e,l=0===a.length?n:`At path: ${a.join(".")} -- ${n}`;super(s??l),null!=s&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function N_(e){return"object"==typeof e&&null!=e}function NP(e){return N_(e)&&!Array.isArray(e)}function NC(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function*NO(e,t,r,n){var s;for(let o of(N_(s=e)&&"function"==typeof s[Symbol.iterator]||(e=[e]),e)){let e=function(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:s,branch:o}=t,{type:a}=r,{refinement:l,message:u=`Expected a value of type \`${a}\`${l?` with refinement \`${l}\``:""}, but received: \`${NC(n)}\``}=e;return{value:n,type:a,refinement:l,key:s[s.length-1],path:s,branch:o,...e,message:u}}(o,t,r,n);e&&(yield e)}}function*NT(e,t,r={}){let{path:n=[],branch:s=[e],coerce:o=!1,mask:a=!1}=r,l={path:n,branch:s,mask:a};o&&(e=t.coercer(e,l));let u="valid";for(let n of t.validator(e,l))n.explanation=r.message,u="not_valid",yield[n,void 0];for(let[c,d,f]of t.entries(e,l))for(let t of NT(d,f,{path:void 0===c?n:[...n,c],branch:void 0===c?s:[...s,d],coerce:o,mask:a,message:r.message}))t[0]?(u=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):o&&(d=t[1],void 0===c?e=d:e instanceof Map?e.set(c,d):e instanceof Set?e.add(d):N_(e)&&(void 0!==d||c in e)&&(e[c]=d));if("not_valid"!==u)for(let n of t.refiner(e,l))n.explanation=r.message,u="not_refined",yield[n,void 0];"valid"===u&&(yield[void 0,e])}let NR=class{constructor(e){let{type:t,schema:r,validator:n,refiner:s,coercer:o=e=>e,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,n?this.validator=(e,t)=>NO(n(e,t),t,this,e):this.validator=()=>[],s?this.refiner=(e,t)=>NO(s(e,t),t,this,e):this.refiner=()=>[]}assert(e,t){var r=e,n=this,s=t;let o=NN(r,n,{message:s});if(o[0])throw o[0]}create(e,t){return NB(e,this,t)}is(e){var t,r;return t=e,r=this,!NN(t,r)[0]}mask(e,t){var r=e,n=this,s=t;let o=NN(r,n,{coerce:!0,mask:!0,message:s});if(o[0])throw o[0];return o[1]}validate(e,t={}){return NN(e,this,t)}};function NB(e,t,r){let n=NN(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function NN(e,t,r={}){let n=NT(e,t,r),s=function(e){let{done:t,value:r}=e.next();return t?void 0:r}(n);return s[0]?[new NI(s[0],function*(){for(let e of n)e[0]&&(yield e[0])}),void 0]:[void 0,s[1]]}function ND(e,t){return new NR({type:e,schema:null,validator:t})}function NL(e){return new NR({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${NC(e)}`})}function NM(){return ND("boolean",e=>"boolean"==typeof e)}function NU(e){return ND("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${NC(t)}`)}function NF(e){let t=NC(e),r=typeof e;return new NR({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${NC(r)}`})}function Nj(e){return new NR({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function Nz(){return ND("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${NC(e)}`)}function N$(e){return new NR({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function NH(e,t){return new NR({type:"record",schema:null,*entries(r){if(N_(r))for(let n in r){let s=r[n];yield[n,n,e],yield[n,s,t]}},validator:e=>NP(e)||`Expected an object, but received: ${NC(e)}`,coercer:e=>NP(e)?{...e}:e})}function NV(){return ND("string",e=>"string"==typeof e||`Expected a string, but received: ${NC(e)}`)}function Nq(e){let t=ND("never",()=>!1);return new NR({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let n=Math.max(e.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],e[s]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${NC(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function NG(e){let t=Object.keys(e);return new NR({type:"type",schema:e,*entries(r){if(N_(r))for(let n of t)yield[n,r[n],e[n]]},validator:e=>NP(e)||`Expected an object, but received: ${NC(e)}`,coercer:e=>NP(e)?{...e}:e})}function NW(e){let t=e.map(e=>e.type).join(" | ");return new NR({type:"union",schema:null,coercer(t,r){for(let n of e){let[e,s]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return s}return t},validator(r,n){let s=[];for(let t of e){let[...e]=NT(r,t,n),[o]=e;if(!o[0])return[];for(let[t]of e)t&&s.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${NC(r)}`,...s]}})}function NK(){return ND("unknown",()=>!0)}function NJ(e,t,r){return new NR({...e,coercer:(n,s)=>NN(n,t)[0]?e.coercer(n,s):e.coercer(r(n,s),s)})}var NZ,NQ,NX,NY,N0,N1,N2,N3,N8,N6,N4,N5,N9,N7,De,Dt,Dr,Dn,Di,Ds,Do,Da,Dl,Du,Dc,Dd,Df,Dh,Dp,Dg,Dm,Dy,Db,Dv,Dx,Dw,DE,DA,DS,Dk,DI,D_,DP,DC,DO,DT=new Uint8Array(16);function DR(){if(!DO&&!(DO="u">typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"u">typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return DO(DT)}let DB=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function DN(e){return"string"==typeof e&&DB.test(e)}for(var DD=[],DL=0;DL<256;++DL)DD.push((DL+256).toString(16).substr(1));function DM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(DD[e[t+0]]+DD[e[t+1]]+DD[e[t+2]]+DD[e[t+3]]+"-"+DD[e[t+4]]+DD[e[t+5]]+"-"+DD[e[t+6]]+DD[e[t+7]]+"-"+DD[e[t+8]]+DD[e[t+9]]+"-"+DD[e[t+10]]+DD[e[t+11]]+DD[e[t+12]]+DD[e[t+13]]+DD[e[t+14]]+DD[e[t+15]]).toLowerCase();if(!DN(r))throw TypeError("Stringified UUID is invalid");return r}var DU,DF,Dj=0,Dz=0;function D$(e){if(!DN(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/0x10000000000&255,r[11]=t/0x100000000&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function DH(e,t,r){function n(e,n,s,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=D$(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,s){o=o||0;for(var l=0;l<16;++l)s[o+l]=a[l];return s}return DM(a)}try{n.name=e}catch{}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function DV(e){return(e+64>>>9<<4)+14+1}function Dq(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function DG(e,t,r,n,s,o){var a;return Dq((a=Dq(Dq(t,e),Dq(n,o)))<<s|a>>>32-s,r)}function DW(e,t,r,n,s,o,a){return DG(t&r|~t&n,e,t,s,o,a)}function DK(e,t,r,n,s,o,a){return DG(t&n|r&~n,e,t,s,o,a)}function DJ(e,t,r,n,s,o,a){return DG(t^r^n,e,t,s,o,a)}function DZ(e,t,r,n,s,o,a){return DG(r^(t|~n),e,t,s,o,a)}function DQ(e,t){return e<<t|e>>>32-t}let DX=e9(Object.freeze(Object.defineProperty({__proto__:null,NIL:"00000000-0000-0000-0000-000000000000",parse:D$,stringify:DM,v1:function(e,t,r){var n=t&&r||0,s=t||Array(16),o=(e=e||{}).node||DU,a=void 0!==e.clockseq?e.clockseq:DF;if(null==o||null==a){var l=e.random||(e.rng||DR)();null==o&&(o=DU=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==a&&(a=DF=(l[6]<<8|l[7])&16383)}var u=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:Dz+1,d=u-Dj+(c-Dz)/1e4;if(d<0&&void 0===e.clockseq&&(a=a+1&16383),(d<0||u>Dj)&&void 0===e.nsecs&&(c=0),c>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Dj=u,Dz=c,DF=a;var f=((0xfffffff&(u+=122192928e5))*1e4+c)%0x100000000;s[n++]=f>>>24&255,s[n++]=f>>>16&255,s[n++]=f>>>8&255,s[n++]=255&f;var h=u/0x100000000*1e4&0xfffffff;s[n++]=h>>>8&255,s[n++]=255&h,s[n++]=h>>>24&15|16,s[n++]=h>>>16&255,s[n++]=a>>>8|128,s[n++]=255&a;for(var p=0;p<6;++p)s[n+p]=o[p];return t||DM(s)},v3:DH("v3",48,function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",s=0;s<r;s+=8){var o=e[s>>5]>>>s%32&255,a=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[DV(t)-1]=t;for(var r=0x67452301,n=-0x10325477,s=-0x67452302,o=0x10325476,a=0;a<e.length;a+=16){var l=r,u=n,c=s,d=o;r=DW(r,n,s,o,e[a],7,-0x28955b88),o=DW(o,r,n,s,e[a+1],12,-0x173848aa),s=DW(s,o,r,n,e[a+2],17,0x242070db),n=DW(n,s,o,r,e[a+3],22,-0x3e423112),r=DW(r,n,s,o,e[a+4],7,-0xa83f051),o=DW(o,r,n,s,e[a+5],12,0x4787c62a),s=DW(s,o,r,n,e[a+6],17,-0x57cfb9ed),n=DW(n,s,o,r,e[a+7],22,-0x2b96aff),r=DW(r,n,s,o,e[a+8],7,0x698098d8),o=DW(o,r,n,s,e[a+9],12,-0x74bb0851),s=DW(s,o,r,n,e[a+10],17,-42063),n=DW(n,s,o,r,e[a+11],22,-0x76a32842),r=DW(r,n,s,o,e[a+12],7,0x6b901122),o=DW(o,r,n,s,e[a+13],12,-0x2678e6d),s=DW(s,o,r,n,e[a+14],17,-0x5986bc72),n=DW(n,s,o,r,e[a+15],22,0x49b40821),r=DK(r,n,s,o,e[a+1],5,-0x9e1da9e),o=DK(o,r,n,s,e[a+6],9,-0x3fbf4cc0),s=DK(s,o,r,n,e[a+11],14,0x265e5a51),n=DK(n,s,o,r,e[a],20,-0x16493856),r=DK(r,n,s,o,e[a+5],5,-0x29d0efa3),o=DK(o,r,n,s,e[a+10],9,0x2441453),s=DK(s,o,r,n,e[a+15],14,-0x275e197f),n=DK(n,s,o,r,e[a+4],20,-0x182c0438),r=DK(r,n,s,o,e[a+9],5,0x21e1cde6),o=DK(o,r,n,s,e[a+14],9,-0x3cc8f82a),s=DK(s,o,r,n,e[a+3],14,-0xb2af279),n=DK(n,s,o,r,e[a+8],20,0x455a14ed),r=DK(r,n,s,o,e[a+13],5,-0x561c16fb),o=DK(o,r,n,s,e[a+2],9,-0x3105c08),s=DK(s,o,r,n,e[a+7],14,0x676f02d9),n=DK(n,s,o,r,e[a+12],20,-0x72d5b376),r=DJ(r,n,s,o,e[a+5],4,-378558),o=DJ(o,r,n,s,e[a+8],11,-0x788e097f),s=DJ(s,o,r,n,e[a+11],16,0x6d9d6122),n=DJ(n,s,o,r,e[a+14],23,-0x21ac7f4),r=DJ(r,n,s,o,e[a+1],4,-0x5b4115bc),o=DJ(o,r,n,s,e[a+4],11,0x4bdecfa9),s=DJ(s,o,r,n,e[a+7],16,-0x944b4a0),n=DJ(n,s,o,r,e[a+10],23,-0x41404390),r=DJ(r,n,s,o,e[a+13],4,0x289b7ec6),o=DJ(o,r,n,s,e[a],11,-0x155ed806),s=DJ(s,o,r,n,e[a+3],16,-0x2b10cf7b),n=DJ(n,s,o,r,e[a+6],23,0x4881d05),r=DJ(r,n,s,o,e[a+9],4,-0x262b2fc7),o=DJ(o,r,n,s,e[a+12],11,-0x1924661b),s=DJ(s,o,r,n,e[a+15],16,0x1fa27cf8),n=DJ(n,s,o,r,e[a+2],23,-0x3b53a99b),r=DZ(r,n,s,o,e[a],6,-0xbd6ddbc),o=DZ(o,r,n,s,e[a+7],10,0x432aff97),s=DZ(s,o,r,n,e[a+14],15,-0x546bdc59),n=DZ(n,s,o,r,e[a+5],21,-0x36c5fc7),r=DZ(r,n,s,o,e[a+12],6,0x655b59c3),o=DZ(o,r,n,s,e[a+3],10,-0x70f3336e),s=DZ(s,o,r,n,e[a+10],15,-1051523),n=DZ(n,s,o,r,e[a+1],21,-0x7a7ba22f),r=DZ(r,n,s,o,e[a+8],6,0x6fa87e4f),o=DZ(o,r,n,s,e[a+15],10,-0x1d31920),s=DZ(s,o,r,n,e[a+6],15,-0x5cfebcec),n=DZ(n,s,o,r,e[a+13],21,0x4e0811a1),r=DZ(r,n,s,o,e[a+4],6,-0x8ac817e),o=DZ(o,r,n,s,e[a+11],10,-0x42c50dcb),s=DZ(s,o,r,n,e[a+2],15,0x2ad7d2bb),n=DZ(n,s,o,r,e[a+9],21,-0x14792c6f),r=Dq(r,l),n=Dq(n,u),s=Dq(s,c),o=Dq(o,d)}return[r,n,s,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(DV(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}),v4:function(e,t,r){var n=(e=e||{}).random||(e.rng||DR)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=n[s];return t}return DM(n)},v5:DH("v5",80,function(e){var t=[0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xca62c1d6],r=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var s=0;s<n.length;++s)e.push(n.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),l=Array(a),u=0;u<a;++u){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=e[64*u+4*d]<<24|e[64*u+4*d+1]<<16|e[64*u+4*d+2]<<8|e[64*u+4*d+3];l[u]=c}l[a-1][14]=(e.length-1)*8/0x100000000,l[a-1][14]=Math.floor(l[a-1][14]),l[a-1][15]=(e.length-1)*8|0;for(var f=0;f<a;++f){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=l[f][p];for(var g=16;g<80;++g)h[g]=DQ(h[g-3]^h[g-8]^h[g-14]^h[g-16],1);for(var m=r[0],y=r[1],b=r[2],v=r[3],x=r[4],w=0;w<80;++w){var E=Math.floor(w/20),A=DQ(m,5)+function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}(E,y,b,v)+x+t[E]+h[w]>>>0;x=v,v=b,b=DQ(y,30)>>>0,y=m,m=A}r[0]=r[0]+m>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+b>>>0,r[3]=r[3]+v>>>0,r[4]=r[4]+x>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}),validate:DN,version:function(e){if(!DN(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},Symbol.toStringTag,{value:"Module"}))),DY=DX.v4,D0=DX.v4,D1=function(e,t,r,n){if("string"!=typeof e)throw TypeError(e+" must be a string");let s="number"==typeof(n=n||{}).version?n.version:2;if(1!==s&&2!==s)throw TypeError(s+" must be 1 or 2");let o={method:e};if(2===s&&(o.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw TypeError(t+" must be an object, array or omitted");o.params=t}return typeof r>"u"?o.id=("function"==typeof n.generator?n.generator:function(){return DY()})(o,n):2===s&&null===r?n.notificationIdNull&&(o.id=null):o.id=r,o},D2=function(e,t){if(!(this instanceof D2))return new D2(e,t);t||(t={}),this.options={reviver:"u">typeof t.reviver?t.reviver:null,replacer:"u">typeof t.replacer?t.replacer:null,generator:"u">typeof t.generator?t.generator:function(){return D0()},version:"u">typeof t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};D2.prototype.request=function(e,t,r,n){let s,o=this,a=null,l=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&l)throw TypeError("JSON-RPC 1.0 does not support batching");if(l||!l&&e&&"object"==typeof e&&"function"==typeof t)n=t,a=e;else{"function"==typeof r&&(n=r,r=void 0);let s="function"==typeof n;try{a=D1(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(s)return n(e);throw e}if(!s)return a}try{s=JSON.stringify(a,this.options.replacer)}catch(e){return n(e)}return this.callServer(s,function(e,t){o._parseResponse(e,t,n)}),a},D2.prototype._parseResponse=function(e,t,r){let n;if(e)return void r(e);if(!t)return r();try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length)if(!Array.isArray(n))return r(null,n.error,n.result);else{let e=function(e){return"u">typeof e.error};return r(null,n.filter(e),n.filter(function(t){return!e(t)}))}r(null,n)};let D3=e5(D2);var D8={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var l=new s(n,o||e,a),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],l]:e._events[u].push(l):(e._events[u]=l,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function l(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),l.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},l.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=Array(o);s<o;s++)a[s]=n[s].fn;return a},l.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,s,o,a){var l=r?r+e:e;if(!this._events[l])return!1;var u,c,d=this._events[l],f=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),f){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,s),!0;case 5:return d.fn.call(d.context,t,n,s,o),!0;case 6:return d.fn.call(d.context,t,n,s,o,a),!0}for(c=1,u=Array(f-1);c<f;c++)u[c-1]=arguments[c];d.fn.apply(d.context,u)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),f){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,s);break;default:if(!u)for(h=1,u=Array(f-1);h<f;h++)u[h-1]=arguments[h];d[c].fn.apply(d[c].context,u)}}return!0},l.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,n,s){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var l=this._events[o];if(l.fn)l.fn!==t||s&&!l.once||n&&l.context!==n||a(this,o);else{for(var u=0,c=[],d=l.length;u<d;u++)(l[u].fn!==t||s&&!l[u].once||n&&l[u].context!==n)&&c.push(l[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(D8);let D6=e5(D8.exports);var D4=class extends D6{constructor(e,t){super(),eY(this,"socket"),this.socket=new window.WebSocket(e,t.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){let n=r||t;try{this.socket.send(e),n()}catch(e){n(e)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}},D5=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},D9=class extends D6{constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,u){super(),eY(this,"address"),eY(this,"rpc_id"),eY(this,"queue"),eY(this,"options"),eY(this,"autoconnect"),eY(this,"ready"),eY(this,"reconnect"),eY(this,"reconnect_timer_id"),eY(this,"reconnect_interval"),eY(this,"max_reconnects"),eY(this,"rest_options"),eY(this,"current_reconnects"),eY(this,"generate_request_id"),eY(this,"socket"),eY(this,"webSocketFactory"),eY(this,"dataPack"),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),u?this.dataPack=u:this.dataPack=new D5,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,n){return n||"object"!=typeof r||(n=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(Error("socket not ready"));let a=this.generate_request_id(e,t);this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t||void 0,id:a}),n,e=>{if(e)return o(e);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(Error("reply timeout"))},r))})})}async login(e){let t=await this.call("rpc.login",e);if(!t)throw Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,n)=>{if(!this.ready)return n(Error("socket not ready"));this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t}),e=>{if(e)return n(e);r()})})}async subscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket&&this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return void 0!==this.reconnect_timer_id}willReconnect(){return this.reconnect&&(0===this.max_reconnects||this.current_reconnects<this.max_reconnects)}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=TO.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);let t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then(()=>{this.emit.apply(this,t)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,null==e?void 0:e.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:r,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",r,n),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,n),1))})}};let D7=class extends op{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ot(e);let r=of(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,s=new Uint8Array(n);s.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),on(s)}update(e){return or(this),this.iHash.update(e),this}digestInto(e){or(this),oe(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:s,blockLen:o,outputLen:a}=this;return e.finished=n,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Le=(e,t,r)=>new D7(e,t).update(r).digest();Le.create=(e,t)=>new D7(e,t);let Lt=(e,t)=>(e+(e>=0?t:-t)/La)/t;function Lr(e){if(!["compact","recovered","der"].includes(e))throw Error('Signature format must be "compact", "recovered", or "der"');return e}function Ln(e,t){let r={};for(let n of Object.keys(t))r[n]=void 0===e[n]?t[n]:e[n];return T2(r.lowS,"lowS"),T2(r.prehash,"prehash"),void 0!==r.format&&Lr(r.format),r}let Li={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:r}=Li;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,s=T8(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");let o=n>127?T8(s.length/2|128):"";return T8(e)+o+s+t},decode(e,t){let{Err:r}=Li,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let s=t[n++],o=0;if(128&s){let e=127&s;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let a=t.subarray(n,n+e);if(a.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===a[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of a)o=o<<8|e;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=s;let a=t.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(e){let{Err:t}=Li;if(e<Ls)throw new t("integer: negative integers are not allowed");let r=T8(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=Li;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return T6(ol(e))}},toSig(e){let{Err:t,_int:r,_tlv:n}=Li,s=T7("signature",e),{v:o,l:a}=n.decode(48,s);if(a.length)throw new t("invalid signature: left bytes after parsing");let{v:l,l:u}=n.decode(2,o),{v:c,l:d}=n.decode(2,u);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(l),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=Li,n=t.encode(2,r.encode(e.r)),s=t.encode(2,r.encode(e.s));return t.encode(48,n+s)}},Ls=BigInt(0),Lo=BigInt(1),La=BigInt(2),Ll=BigInt(3),Lu=BigInt(4);function Lc(e,t){let r,{BYTES:n}=e;if("bigint"==typeof t)r=t;else{let s=T7("private key",t);try{r=e.fromBytes(s)}catch{throw Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw Error("invalid private key: out of range [1..N-1]");return r}function Ld(e){return Uint8Array.of(e?2:3)}function Lf(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}let Lh={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Lp={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Lg=BigInt(2),Lm=RC(Lh.p,{sqrt:function(e){let t=Lh.p,r=BigInt(3),n=BigInt(6),s=BigInt(11),o=BigInt(22),a=BigInt(23),l=BigInt(44),u=BigInt(88),c=e*e*e%t,d=c*c*e%t,f=Rb(d,r,t)*d%t,h=Rb(f,r,t)*d%t,p=Rb(h,Lg,t)*c%t,g=Rb(p,s,t)*p%t,m=Rb(g,o,t)*g%t,y=Rb(m,l,t)*m%t,b=Rb(y,u,t)*y%t,v=Rb(b,l,t)*m%t,x=Rb(v,r,t)*d%t,w=Rb(x,a,t)*g%t,E=Rb(w,n,t)*c%t,A=Rb(E,Lg,t);if(!Lm.eql(Lm.sqr(A),e))throw Error("Cannot find square root");return A}}),Ly=function(e,t){let r=t=>(function(e){let{CURVE:t,curveOpts:r,hash:n,ecdsaOpts:s}=function(e){let{CURVE:t,curveOpts:r}=function(e){let t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(e=>Math.ceil(e/2)))):void 0,s={Fp:r,Fn:RC(t.n,{BITS:e.nBitLength,allowedLengths:n,modFromBytes:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:s}}(e),n={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:r,hash:e.hash,ecdsaOpts:n}}(e),o=function(e,t,r={}){ot(t),Rs(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=r.randomBytes||om,s=r.hmac||((e,...r)=>Le(t,e,oh(...r))),{Fp:o,Fn:a}=e,{ORDER:l,BITS:u}=a,{keygen:c,getPublicKey:d,getSharedSecret:f,utils:h,lengths:p}=function(e,t={}){let{Fn:r}=e,n=t.randomBytes||om,s=Object.assign(Lf(e.Fp,r),{seed:RT(r.ORDER)});function o(e){try{return!!Lc(r,e)}catch{return!1}}function a(e=n(s.seed)){return function(e,t,r=!1){let n=e.length,s=RO(t),o=RT(t);if(n<16||n<o||n>1024)throw Error("expected "+o+"-1024 bytes of input, got "+n);let a=Ry(r?T4(e):T6(ol(e)),t-Rl)+Rl;return r?T9(a,s):T5(a,s)}(T3(e,s.seed,"seed"),r.ORDER)}function l(t,n=!0){return e.BASE.multiply(Lc(r,t)).toBytes(n)}function u(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;let{secretKey:n,publicKey:o,publicKeyUncompressed:a}=s;if(r.allowedLengths||n===o)return;let l=T7("key",t).length;return l===o||l===a}return Object.freeze({getPublicKey:l,getSharedSecret:function(t,n,s=!0){if(!0===u(t))throw Error("first arg must be private key");if(!1===u(n))throw Error("second arg must be public key");let o=Lc(r,t);return e.fromHex(n).multiply(o).toBytes(s)},keygen:function(e){let t=a(e);return{secretKey:t,publicKey:l(t)}},Point:e,utils:{isValidSecretKey:o,isValidPublicKey:function(t,r){let{publicKey:n,publicKeyUncompressed:o}=s;try{let s=t.length;return(!0!==r||s===n)&&(!1!==r||s===o)&&!!e.fromBytes(t)}catch{return!1}},randomSecretKey:a,isValidPrivateKey:o,randomPrivateKey:a,normPrivateKeyToScalar:e=>Lc(r,e),precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)},lengths:s})}(e,r),g={prehash:!1,lowS:"boolean"==typeof r.lowS&&r.lowS,format:void 0,extraEntropy:!1},m="compact";function y(e,t){if(!a.isValidNot0(t))throw Error(`invalid signature ${e}: out of range 1..Point.Fn.ORDER`);return t}class b{constructor(e,t,r){this.r=y("r",e),this.s=y("s",t),null!=r&&(this.recovery=r),Object.freeze(this)}static fromBytes(e,t=m){let r;if(!function(e,t){Lr(t);let r=p.signature;T3(e,"compact"===t?r:"recovered"===t?r+1:void 0,`${t} signature`)}(e,t),"der"===t){let{r:t,s:r}=Li.toSig(T3(e));return new b(t,r)}"recovered"===t&&(r=e[0],t="compact",e=e.subarray(1));let n=a.BYTES,s=e.subarray(0,n),o=e.subarray(n,2*n);return new b(a.fromBytes(s),a.fromBytes(o),r)}static fromHex(e,t){return this.fromBytes(od(e),t)}addRecoveryBit(e){return new b(this.r,this.s,e)}recoverPublicKey(t){let r=o.ORDER,{r:n,s:s,recovery:u}=this;if(null==u||![0,1,2,3].includes(u))throw Error("recovery id invalid");if(l*La<r&&u>1)throw Error("recovery id is ambiguous for h>1 curve");let c=2===u||3===u?n+l:n;if(!o.isValid(c))throw Error("recovery id 2 or 3 invalid");let d=o.toBytes(c),f=e.fromBytes(oh(Ld((1&u)==0),d)),h=a.inv(c),p=x(T7("msgHash",t)),g=a.create(-p*h),m=a.create(s*h),y=e.BASE.multiplyUnsafe(g).add(f.multiplyUnsafe(m));if(y.is0())throw Error("point at infinify");return y.assertValidity(),y}hasHighS(){return this.s>l>>Lo}toBytes(e=m){if(Lr(e),"der"===e)return od(Li.hexFromSig(this));let t=a.toBytes(this.r),r=a.toBytes(this.s);if("recovered"===e){if(null==this.recovery)throw Error("recovery bit must be present");return oh(Uint8Array.of(this.recovery),t,r)}return oh(t,r)}toHex(e){return ol(this.toBytes(e))}assertValidity(){}static fromCompact(e){return b.fromBytes(T7("sig",e),"compact")}static fromDER(e){return b.fromBytes(T7("sig",e),"der")}normalizeS(){return this.hasHighS()?new b(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ol(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ol(this.toBytes("compact"))}}let v=r.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=T6(ol(e)),r=8*e.length-u;return r>0?t>>BigInt(r):t},x=r.bits2int_modN||function(e){return a.create(v(e))},w=Ri(u);function E(e){return Rr("num < 2^"+u,e,Ls,w),a.toBytes(e)}function A(e,r){return T3(e,void 0,"message"),r?T3(t(e),void 0,"prehashed message"):e}return Object.freeze({keygen:c,getPublicKey:d,getSharedSecret:f,utils:h,lengths:p,Point:e,sign:function(r,o,u={}){let{seed:c,k2sig:d}=function(t,r,s){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{lowS:o,prehash:u,extraEntropy:c}=Ln(s,g),d=x(t=A(t,u)),f=Lc(a,r),h=[E(f),E(d)];if(null!=c&&!1!==c){let e=!0===c?n(p.secretKey):c;h.push(T7("extraEntropy",e))}return{seed:oh(...h),k2sig:function(t){let r=v(t);if(!a.isValidNot0(r))return;let n=a.inv(r),s=e.BASE.multiply(r).toAffine(),u=a.create(s.x);if(u===Ls)return;let c=a.create(n*a.create(d+u*f));if(c===Ls)return;let h=2*(s.x!==u)|Number(s.y&Lo),p=c;return o&&c>l>>Lo&&(p=a.neg(c),h^=1),new b(u,p,h)}}}(r=T7("message",r),o,u);return(function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=e=>new Uint8Array(e),s=e=>Uint8Array.of(e),o=n(e),a=n(e),l=0,u=()=>{o.fill(1),a.fill(0),l=0},c=(...e)=>r(a,o,...e),d=(e=n(0))=>{a=c(s(0),e),o=c(),0!==e.length&&(a=c(s(1),e),o=c())},f=()=>{if(l++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(o=c()).slice();r.push(t),e+=o.length}return oh(...r)};return(e,t)=>{let r;for(u(),d(e);!(r=t(f()));)d();return u(),r}})(t.outputLen,a.BYTES,s)(c,d)},verify:function(t,r,n,s={}){let{lowS:o,prehash:l,format:u}=Ln(s,g);if(n=T7("publicKey",n),r=A(T7("message",r),l),"strict"in s)throw Error("options.strict was renamed to lowS");let c=void 0===u?function(e){let t,r="string"==typeof e||s9(e),n=!r&&null!==e&&"object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!r&&!n)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(n)t=new b(e.r,e.s);else if(r){try{t=b.fromBytes(T7("sig",e),"der")}catch(e){if(!(e instanceof Li.Err))throw e}if(!t)try{t=b.fromBytes(T7("sig",e),"compact")}catch{return!1}}return t||!1}(t):b.fromBytes(T7("sig",t),u);if(!1===c)return!1;try{let t=e.fromBytes(n);if(o&&c.hasHighS())return!1;let{r:s,s:l}=c,u=x(r),d=a.inv(l),f=a.create(u*d),h=a.create(s*d),p=e.BASE.multiplyUnsafe(f).add(t.multiplyUnsafe(h));return!p.is0()&&a.create(p.x)===s}catch{return!1}},recoverPublicKey:function(e,t,r={}){let{prehash:n}=Ln(r,g);return t=A(t,n),b.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:b,hash:t})}(function(e,t={}){let r=RG("weierstrass",e,t),{Fp:n,Fn:s}=r,o=r.CURVE,{h:a,n:l}=o;Rs(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:u}=t;if(u&&(!n.is0(o.a)||"bigint"!=typeof u.beta||!Array.isArray(u.basises)))throw Error('invalid endo: expected "beta": bigint and "basises": array');let c=Lf(n,s);function d(){if(!n.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let f=t.toBytes||function(e,t,r){let{x:s,y:o}=t.toAffine(),a=n.toBytes(s);return(T2(r,"isCompressed"),r)?(d(),oh(Ld(!n.isOdd(o)),a)):oh(Uint8Array.of(4),a,n.toBytes(o))},h=t.fromBytes||function(e){T3(e,void 0,"Point");let{publicKey:t,publicKeyUncompressed:r}=c,s=e.length,o=e[0],a=e.subarray(1);if(s===t&&(2===o||3===o)){let e,t=n.fromBytes(a);if(!n.isValid(t))throw Error("bad point: is not on curve, wrong x");let r=p(t);try{e=n.sqrt(r)}catch(e){throw Error("bad point: is not on curve, sqrt error"+(e instanceof Error?": "+e.message:""))}return d(),(1&o)==1!==n.isOdd(e)&&(e=n.neg(e)),{x:t,y:e}}if(s===r&&4===o){let e=n.BYTES,t=n.fromBytes(a.subarray(0,e)),r=n.fromBytes(a.subarray(e,2*e));if(!g(t,r))throw Error("bad point: is not on curve");return{x:t,y:r}}throw Error(`bad point: got length ${s}, expected compressed=${t} or uncompressed=${r}`)};function p(e){let t=n.sqr(e),r=n.mul(t,e);return n.add(n.add(r,n.mul(e,o.a)),o.b)}function g(e,t){let r=n.sqr(t),s=p(e);return n.eql(r,s)}if(!g(o.Gx,o.Gy))throw Error("bad curve params: generator point");let m=n.mul(n.pow(o.a,Ll),Lu),y=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(m,y)))throw Error("bad curve params: a or b");function b(e,t,r=!1){if(!n.isValid(t)||r&&n.is0(t))throw Error(`bad point coordinate ${e}`);return t}function v(e){if(!(e instanceof S))throw Error("ProjectivePoint expected")}function x(e){if(!u||!u.basises)throw Error("no endo");return function(e,t,r){let[[n,s],[o,a]]=t,l=Lt(a*e,r),u=Lt(-s*e,r),c=e-l*n-u*o,d=-l*s-u*a,f=c<Ls,h=d<Ls;f&&(c=-c),h&&(d=-d);let p=Ri(Math.ceil(Rn(r)/2))+Lo;if(c<Ls||c>=p||d<Ls||d>=p)throw Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:f,k1:c,k2neg:h,k2:d}}(e,u.basises,s.ORDER)}let w=Ro((e,t)=>{let{X:r,Y:s,Z:o}=e;if(n.eql(o,n.ONE))return{x:r,y:s};let a=e.is0();null==t&&(t=a?n.ONE:n.inv(o));let l=n.mul(r,t),u=n.mul(s,t),c=n.mul(o,t);if(a)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw Error("invZ was invalid");return{x:l,y:u}}),E=Ro(e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.Y))return;throw Error("bad point: ZERO")}let{x:r,y:s}=e.toAffine();if(!n.isValid(r)||!n.isValid(s))throw Error("bad point: x or y not field elements");if(!g(r,s))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function A(e,t,r,s,o){return r=new S(n.mul(r.X,e),r.Y,r.Z),t=RN(s,t),r=RN(o,r),t.add(r)}class S{constructor(e,t,r){this.X=b("x",e),this.Y=b("y",t,!0),this.Z=b("z",r),Object.freeze(this)}static CURVE(){return o}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof S)throw Error("projective point not allowed");return n.is0(t)&&n.is0(r)?S.ZERO:new S(t,r,n.ONE)}static fromBytes(e){let t=S.fromAffine(h(T3(e,void 0,"point")));return t.assertValidity(),t}static fromHex(e){return S.fromBytes(T7("pointHex",e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return I.createCache(this,e),t||this.multiply(Ll),this}assertValidity(){E(this)}hasEvenY(){let{y:e}=this.toAffine();if(!n.isOdd)throw Error("Field doesn't support isOdd");return!n.isOdd(e)}equals(e){v(e);let{X:t,Y:r,Z:s}=this,{X:o,Y:a,Z:l}=e,u=n.eql(n.mul(t,l),n.mul(o,s)),c=n.eql(n.mul(r,l),n.mul(a,s));return u&&c}negate(){return new S(this.X,n.neg(this.Y),this.Z)}double(){let{a:e,b:t}=o,r=n.mul(t,Ll),{X:s,Y:a,Z:l}=this,u=n.ZERO,c=n.ZERO,d=n.ZERO,f=n.mul(s,s),h=n.mul(a,a),p=n.mul(l,l),g=n.mul(s,a);return g=n.add(g,g),d=n.mul(s,l),d=n.add(d,d),u=n.mul(e,d),c=n.mul(r,p),c=n.add(u,c),u=n.sub(h,c),c=n.add(h,c),c=n.mul(u,c),u=n.mul(g,u),d=n.mul(r,d),p=n.mul(e,p),g=n.sub(f,p),g=n.mul(e,g),g=n.add(g,d),d=n.add(f,f),f=n.add(d,f),f=n.add(f,p),f=n.mul(f,g),c=n.add(c,f),p=n.mul(a,l),p=n.add(p,p),f=n.mul(p,g),u=n.sub(u,f),d=n.mul(p,h),d=n.add(d,d),new S(u,c,d=n.add(d,d))}add(e){v(e);let{X:t,Y:r,Z:s}=this,{X:a,Y:l,Z:u}=e,c=n.ZERO,d=n.ZERO,f=n.ZERO,h=o.a,p=n.mul(o.b,Ll),g=n.mul(t,a),m=n.mul(r,l),y=n.mul(s,u),b=n.add(t,r),x=n.add(a,l);b=n.mul(b,x),x=n.add(g,m),b=n.sub(b,x),x=n.add(t,s);let w=n.add(a,u);return x=n.mul(x,w),w=n.add(g,y),x=n.sub(x,w),w=n.add(r,s),c=n.add(l,u),w=n.mul(w,c),c=n.add(m,y),w=n.sub(w,c),f=n.mul(h,x),c=n.mul(p,y),f=n.add(c,f),c=n.sub(m,f),f=n.add(m,f),d=n.mul(c,f),m=n.add(g,g),m=n.add(m,g),y=n.mul(h,y),x=n.mul(p,x),m=n.add(m,y),y=n.sub(g,y),y=n.mul(h,y),x=n.add(x,y),g=n.mul(m,x),d=n.add(d,g),g=n.mul(w,x),c=n.mul(b,c),c=n.sub(c,g),g=n.mul(b,m),f=n.mul(w,f),new S(c,d,f=n.add(f,g))}subtract(e){return this.add(e.negate())}is0(){return this.equals(S.ZERO)}multiply(e){let r,n,{endo:o}=t;if(!s.isValidNot0(e))throw Error("invalid scalar: out of range");let a=e=>I.cached(this,e,e=>RD(S,e));if(o){let{k1neg:t,k1:s,k2neg:l,k2:u}=x(e),{p:c,f:d}=a(s),{p:f,f:h}=a(u);n=d.add(h),r=A(o.beta,c,f,t,l)}else{let{p:t,f:s}=a(e);r=t,n=s}return RD(S,[r,n])[0]}multiplyUnsafe(e){let{endo:r}=t;if(!s.isValid(e))throw Error("invalid scalar: out of range");if(e===Ls||this.is0())return S.ZERO;if(e===Lo)return this;if(I.hasCache(this))return this.multiply(e);if(!r)return I.unsafe(this,e);{let{k1neg:t,k1:n,k2neg:s,k2:o}=x(e),{p1:a,p2:l}=function(e,t,r,n){let s=t,o=e.ZERO,a=e.ZERO;for(;r>RR||n>RR;)r&RB&&(o=o.add(s)),n&RB&&(a=a.add(s)),s=s.double(),r>>=RB,n>>=RB;return{p1:o,p2:a}}(S,this,n,o);return A(r.beta,a,l,t,s)}}multiplyAndAddUnsafe(e,t,r){let n=this.multiplyUnsafe(t).add(e.multiplyUnsafe(r));return n.is0()?void 0:n}toAffine(e){return w(this,e)}isTorsionFree(){let{isTorsionFree:e}=t;return a===Lo||(e?e(S,this):I.unsafe(this,l).is0())}clearCofactor(){let{clearCofactor:e}=t;return a===Lo?this:e?e(S,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(e=!0){return T2(e,"isCompressed"),this.assertValidity(),f(S,this,e)}toHex(e=!0){return ol(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(e=!0){return this.toBytes(e)}_setWindowSize(e){this.precompute(e)}static normalizeZ(e){return RD(S,e)}static msm(e,t){return RV(S,s,e,t)}static fromPrivateKey(e){return S.BASE.multiply(Lc(s,e))}}S.BASE=new S(o.Gx,o.Gy,n.ONE),S.ZERO=new S(n.ZERO,n.ONE,n.ZERO),S.Fp=n,S.Fn=s;let k=s.BITS,I=new RH(S,t.endo?Math.ceil(k/2):k);return S.BASE.precompute(8),S}(t,r),n,s),a=o.Point;return Object.assign({},o,{ProjectivePoint:a,CURVE:Object.assign({},e,RP(a.Fn.ORDER,a.Fn.BITS))})})({...e,hash:t});return{...r(t),create:r}}({...Lh,Fp:Lm,lowS:!0,endo:Lp},TX);function Lb(e){try{return R6.ExtendedPoint.fromHex(e),!0}catch{return!1}}R6.utils.randomPrivateKey,R6.getPublicKey;let Lv=(e,t)=>R6.sign(e,t.slice(0,32)),Lx=R6.verify,Lw=e=>TO.Buffer.isBuffer(e)?e:e instanceof Uint8Array?TO.Buffer.from(e.buffer,e.byteOffset,e.byteLength):TO.Buffer.from(e);class LE{constructor(e){Object.assign(this,e)}encode(){return TO.Buffer.from(BB(LA,this))}static decode(e){return BL(LA,this,e)}static decodeUnchecked(e){return Bw(LA,this,e)}}let LA=new Map,LS=1;class Lk extends LE{constructor(e){if(super({}),this._bn=void 0,void 0!==e._bn)this._bn=e._bn;else{if("string"==typeof e){let t=Br.decode(e);if(32!=t.length)throw Error("Invalid public key input");this._bn=new R9(t)}else this._bn=new R9(e);if(this._bn.byteLength()>32)throw Error("Invalid public key input")}}static unique(){let e=new Lk(LS);return LS+=1,new Lk(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Br.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(TO.Buffer);if(32===e.length)return e;let t=TO.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){return new Lk(TX(TO.Buffer.concat([e.toBuffer(),TO.Buffer.from(t),r.toBuffer()])))}static createProgramAddressSync(e,t){let r=TO.Buffer.alloc(0);e.forEach(function(e){if(e.length>32)throw TypeError("Max seed length exceeded");r=TO.Buffer.concat([r,Lw(e)])});let n=TX(r=TO.Buffer.concat([r,t.toBuffer(),TO.Buffer.from("ProgramDerivedAddress")]));if(Lb(n))throw Error("Invalid seeds, address must fall off the curve");return new Lk(n)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,n;for(;0!=r;){try{let s=e.concat(TO.Buffer.from([r]));n=this.createProgramAddressSync(s,t)}catch(e){if(e instanceof TypeError)throw e;r--;continue}return[n,r]}throw Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return Lb(new Lk(e).toBytes())}}Lk.default=new Lk("11111111111111111111111111111111"),LA.set(Lk,{kind:"struct",fields:[["_bn","u256"]]}),new Lk("BPFLoader1111111111111111111111111111111111");class LI extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(LI.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class L_ extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(L_.prototype,"name",{value:"TransactionExpiredTimeoutError"});class LP extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(LP.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class LC{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw Error("Account index overflow encountered during compilation");let t=new Map;this.keySegments().flat().forEach((e,r)=>{t.set(e.toBase58(),r)});let r=e=>{let r=t.get(e.toBase58());if(void 0===r)throw Error("Encountered an unknown instruction account key during compilation");return r};return e.map(e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map(e=>r(e.pubkey)),data:e.data}))}}let LO=(e="publicKey")=>Nb(32,e),LT=(e="signature")=>Nb(64,e),LR=(e="string")=>{let t=Nm([Nh("length"),Nh("lengthPadding"),Nb(Nc(Nh(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t);return t.decode=(e,t)=>r(e,t).chars.toString(),t.encode=(e,t,r)=>n({chars:TO.Buffer.from(e,"utf8")},t,r),t.alloc=e=>Nh().span+Nh().span+TO.Buffer.from(e,"utf8").length,t};function LB(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,!(128&n))break}return t}function LN(e,t){let r=t;for(;;){let t=127&r;if(0==(r>>=7)){e.push(t);break}t|=128,e.push(t)}}function LD(e,t){if(!e)throw Error(t||"Assertion failed")}class LL{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){let r=new Map,n=e=>{let t=e.toBase58(),n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},s=n(t);for(let t of(s.isSigner=!0,s.isWritable=!0,e))for(let e of(n(t.programId).isInvoked=!0,t.keys)){let t=n(e.pubkey);t.isSigner||(t.isSigner=e.isSigner),t.isWritable||(t.isWritable=e.isWritable)}return new LL(t,r)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];LD(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,e])=>e.isSigner&&e.isWritable),r=e.filter(([,e])=>e.isSigner&&!e.isWritable),n=e.filter(([,e])=>!e.isSigner&&e.isWritable),s=e.filter(([,e])=>!e.isSigner&&!e.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{LD(t.length>0,"Expected at least one writable signer key");let[e]=t[0];LD(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...t.map(([e])=>new Lk(e)),...r.map(([e])=>new Lk(e)),...n.map(([e])=>new Lk(e)),...s.map(([e])=>new Lk(e))]]}extractTableLookup(e){let[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&e.isWritable),[n,s]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&!e.isWritable);if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,t){let r=[],n=[];for(let[s,o]of this.keyMetaMap.entries())if(t(o)){let t=new Lk(s),o=e.findIndex(e=>e.equals(t));o>=0&&(LD(o<256,"Max lookup table index exceeded"),r.push(o),n.push(t),this.keyMetaMap.delete(s))}return[r,n]}}let LM="Reached end of buffer unexpectedly";function LU(e){if(0===e.length)throw Error(LM);return e.shift()}function LF(e,...t){let[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw Error(LM);return e.splice(...t)}class Lj{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(e=>new Lk(e)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Br.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new LC(this.staticAccountKeys)}static compile(e){let[t,r]=LL.compile(e.instructions,e.payerKey).getMessageComponents(),n=new LC(r).compileInstructions(e.instructions).map(e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:Br.encode(e.data)}));return new Lj({header:t,accountKeys:r,recentBlockhash:e.recentBlockhash,instructions:n})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;{let r=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return e-t<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];LN(t,e);let r=this.instructions.map(e=>{let{accounts:t,programIdIndex:r}=e,n=Array.from(Br.decode(e.data)),s=[];LN(s,t.length);let o=[];return LN(o,n.length),{programIdIndex:r,keyIndicesCount:TO.Buffer.from(s),keyIndices:t,dataLength:TO.Buffer.from(o),data:n}}),n=[];LN(n,r.length);let s=TO.Buffer.alloc(1232);TO.Buffer.from(n).copy(s);let o=n.length;r.forEach(e=>{let t=Nm([Nd("programIdIndex"),Nb(e.keyIndicesCount.length,"keyIndicesCount"),Ny(Nd("keyIndex"),e.keyIndices.length,"keyIndices"),Nb(e.dataLength.length,"dataLength"),Ny(Nd("userdatum"),e.data.length,"data")]).encode(e,s,o);o+=t}),s=s.slice(0,o);let a=Nm([Nb(1,"numRequiredSignatures"),Nb(1,"numReadonlySignedAccounts"),Nb(1,"numReadonlyUnsignedAccounts"),Nb(t.length,"keyCount"),Ny(LO("key"),e,"keys"),LO("recentBlockhash")]),l={numRequiredSignatures:TO.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:TO.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:TO.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:TO.Buffer.from(t),keys:this.accountKeys.map(e=>Lw(e.toBytes())),recentBlockhash:Br.decode(this.recentBlockhash)},u=TO.Buffer.alloc(2048),c=a.encode(l,u);return s.copy(u,c),u.slice(0,c+s.length)}static from(e){let t=[...e],r=LU(t);if(r!==(127&r))throw Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let n=LU(t),s=LU(t),o=LB(t),a=[];for(let e=0;e<o;e++){let e=LF(t,0,32);a.push(new Lk(TO.Buffer.from(e)))}let l=LF(t,0,32),u=LB(t),c=[];for(let e=0;e<u;e++){let e=LU(t),r=LB(t),n=LF(t,0,r),s=LB(t),o=LF(t,0,s),a=Br.encode(TO.Buffer.from(o));c.push({programIdIndex:e,accounts:n,data:a})}return new Lj({header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:s},recentBlockhash:Br.encode(TO.Buffer.from(l)),accountKeys:a,instructions:c})}}class Lz{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw Error("Failed to get account keys because address table lookups were not resolved");return new LC(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r)return e-r<this.addressTableLookups.reduce((e,t)=>e+t.writableIndexes.length,0);if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;{let n=r-t-this.header.numReadonlyUnsignedAccounts;return e-t<n}}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let r of this.addressTableLookups){let n=e.find(e=>e.key.equals(r.accountKey));if(!n)throw Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let e of r.writableIndexes)if(e<n.state.addresses.length)t.writable.push(n.state.addresses[e]);else throw Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);for(let e of r.readonlyIndexes)if(e<n.state.addresses.length)t.readonly.push(n.state.addresses[e]);else throw Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){let t=LL.compile(e.instructions,e.payerKey),r=[],n={writable:[],readonly:[]};for(let s of e.addressLookupTableAccounts||[]){let e=t.extractTableLookup(s);if(void 0!==e){let[t,{writable:s,readonly:o}]=e;r.push(t),n.writable.push(...s),n.readonly.push(...o)}}let[s,o]=t.getMessageComponents(),a=new LC(o,n).compileInstructions(e.instructions);return new Lz({header:s,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){let e=[];LN(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),r=[];LN(r,this.compiledInstructions.length);let n=this.serializeAddressTableLookups(),s=[];LN(s,this.addressTableLookups.length);let o=Nm([Nd("prefix"),Nm([Nd("numRequiredSignatures"),Nd("numReadonlySignedAccounts"),Nd("numReadonlyUnsignedAccounts")],"header"),Nb(e.length,"staticAccountKeysLength"),Ny(LO(),this.staticAccountKeys.length,"staticAccountKeys"),LO("recentBlockhash"),Nb(r.length,"instructionsLength"),Nb(t.length,"serializedInstructions"),Nb(s.length,"addressTableLookupsLength"),Nb(n.length,"serializedAddressTableLookups")]),a=new Uint8Array(1232),l=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(e=>e.toBytes()),recentBlockhash:Br.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:n},a);return a.slice(0,l)}serializeInstructions(){let e=0,t=new Uint8Array(1232);for(let r of this.compiledInstructions){let n=[];LN(n,r.accountKeyIndexes.length);let s=[];LN(s,r.data.length);let o=Nm([Nd("programIdIndex"),Nb(n.length,"encodedAccountKeyIndexesLength"),Ny(Nd(),r.accountKeyIndexes.length,"accountKeyIndexes"),Nb(s.length,"encodedDataLength"),Nb(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(1232);for(let r of this.addressTableLookups){let n=[];LN(n,r.writableIndexes.length);let s=[];LN(s,r.readonlyIndexes.length);let o=Nm([LO("accountKey"),Nb(n.length,"encodedWritableIndexesLength"),Ny(Nd(),r.writableIndexes.length,"writableIndexes"),Nb(s.length,"encodedReadonlyIndexesLength"),Ny(Nd(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e],r=LU(t),n=127&r;LD(r!==n,"Expected versioned message but received legacy message"),LD(0===n,`Expected versioned message with version 0 but found version ${n}`);let s={numRequiredSignatures:LU(t),numReadonlySignedAccounts:LU(t),numReadonlyUnsignedAccounts:LU(t)},o=[],a=LB(t);for(let e=0;e<a;e++)o.push(new Lk(LF(t,0,32)));let l=Br.encode(LF(t,0,32)),u=LB(t),c=[];for(let e=0;e<u;e++){let e=LU(t),r=LB(t),n=LF(t,0,r),s=LB(t),o=new Uint8Array(LF(t,0,s));c.push({programIdIndex:e,accountKeyIndexes:n,data:o})}let d=LB(t),f=[];for(let e=0;e<d;e++){let e=new Lk(LF(t,0,32)),r=LB(t),n=LF(t,0,r),s=LB(t),o=LF(t,0,s);f.push({accountKey:e,writableIndexes:n,readonlyIndexes:o})}return new Lz({header:s,staticAccountKeys:o,recentBlockhash:l,compiledInstructions:c,addressTableLookups:f})}}let L$={deserializeMessageVersion(e){let t=e[0],r=127&t;return r===t?"legacy":r},deserialize:e=>{let t=L$.deserializeMessageVersion(e);if("legacy"===t)return Lj.from(e);if(0===t)return Lz.deserialize(e);throw Error(`Transaction message version ${t} deserialization is not supported`)}},LH=((FF={})[FF.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",FF[FF.PROCESSED=1]="PROCESSED",FF[FF.TIMED_OUT=2]="TIMED_OUT",FF[FF.NONCE_INVALID=3]="NONCE_INVALID",FF),LV=TO.Buffer.alloc(64).fill(0);class Lq{constructor(e){this.keys=void 0,this.programId=void 0,this.data=TO.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}let LG=class e{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{let{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(0===e.length)throw Error("No instructions");return e.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Lq(e))}),this}compileMessage(){let e,t,r;if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw Error("Transaction fee payer required");for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw Error(`Transaction instruction index ${e} has undefined program id`);let n=[],s=[];t.forEach(e=>{e.keys.forEach(e=>{s.push({...e})});let t=e.programId.toString();n.includes(t)||n.push(t)}),n.forEach(e=>{s.push({pubkey:new Lk(e),isSigner:!1,isWritable:!1})});let o=[];s.forEach(e=>{let t=e.pubkey.toString(),r=o.findIndex(e=>e.pubkey.toString()===t);r>-1?(o[r].isWritable=o[r].isWritable||e.isWritable,o[r].isSigner=o[r].isSigner||e.isSigner):o.push(e)}),o.sort(function(e,t){return e.isSigner!==t.isSigner?e.isSigner?-1:1:e.isWritable!==t.isWritable?e.isWritable?-1:1:e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});let a=o.findIndex(e=>e.pubkey.equals(r));if(a>-1){let[e]=o.splice(a,1);e.isSigner=!0,e.isWritable=!0,o.unshift(e)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let e of this.signatures){let t=o.findIndex(t=>t.pubkey.equals(e.publicKey));if(t>-1)o[t].isSigner||(o[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw Error(`unknown signer: ${e.publicKey.toString()}`)}let l=0,u=0,c=0,d=[],f=[];o.forEach(({pubkey:e,isSigner:t,isWritable:r})=>{t?(d.push(e.toString()),l+=1,r||(u+=1)):(f.push(e.toString()),r||(c+=1))});let h=d.concat(f),p=t.map(e=>{let{data:t,programId:r}=e;return{programIdIndex:h.indexOf(r.toString()),accounts:e.keys.map(e=>h.indexOf(e.pubkey.toString())),data:Br.encode(t)}});return p.forEach(e=>{LD(e.programIdIndex>=0),e.accounts.forEach(e=>LD(e>=0))}),new Lj({header:{numRequiredSignatures:l,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:c},accountKeys:h,recentBlockhash:e,instructions:p})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((e,r)=>t[r].equals(e.publicKey))||(this.signatures=t.map(e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw Error("No signers");let t=new Set;this.signatures=e.filter(e=>{let r=e.toString();return!t.has(r)&&(t.add(r),!0)}).map(e=>({signature:null,publicKey:e}))}sign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let n of e){let e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map(e=>({signature:null,publicKey:e.publicKey}));let n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let n of e){let e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}let n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){let r=e.serialize();t.forEach(e=>{let t=Lv(r,e.secretKey);this._addSignature(e.publicKey,Lw(t))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){LD(64===t.length);let r=this.signatures.findIndex(t=>e.equals(t.publicKey));if(r<0)throw Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=TO.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let r={};for(let{signature:n,publicKey:s}of this.signatures)null===n?t&&(r.missing||(r.missing=[])).push(s):Lx(n,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){let e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`
Invalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map(e=>e.toBase58()).join("`, `")}\`].`),e.missing&&(t+=`
Missing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map(e=>e.toBase58()).join("`, `")}\`].`),Error(t)}}return this._serialize(n)}_serialize(e){let{signatures:t}=this,r=[];LN(r,t.length);let n=r.length+64*t.length+e.length,s=TO.Buffer.alloc(n);return LD(t.length<256),TO.Buffer.from(r).copy(s,0),t.forEach(({signature:e},t)=>{null!==e&&(LD(64===e.length,"signature has invalid length"),TO.Buffer.from(e).copy(s,r.length+64*t))}),e.copy(s,r.length+64*t.length),LD(s.length<=1232,`Transaction too large: ${s.length} > 1232`),s}get keys(){return LD(1===this.instructions.length),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return LD(1===this.instructions.length),this.instructions[0].programId}get data(){return LD(1===this.instructions.length),this.instructions[0].data}static from(t){let r=[...t],n=LB(r),s=[];for(let e=0;e<n;e++){let e=LF(r,0,64);s.push(Br.encode(TO.Buffer.from(e)))}return e.populate(Lj.from(r),s)}static populate(t,r=[]){let n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((e,r)=>{let s={signature:e==Br.encode(LV)?null:Br.decode(e),publicKey:t.accountKeys[r]};n.signatures.push(s)}),t.instructions.forEach(e=>{let r=e.accounts.map(e=>{let r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some(e=>e.publicKey.toString()===r.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});n.instructions.push(new Lq({keys:r,programId:t.accountKeys[e.programIdIndex],data:Br.decode(e.data)}))}),n._message=t,n._json=n.toJSON(),n}};class LW{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)LD(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{let t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(64));this.signatures=t}this.message=e}serialize(){let e=this.message.serialize(),t=[];LN(t,this.signatures.length);let r=Nm([Nb(t.length,"encodedSignaturesLength"),Ny(LT(),this.signatures.length,"signatures"),Nb(e.length,"serializedMessage")]),n=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,s)}static deserialize(e){let t=[...e],r=[],n=LB(t);for(let e=0;e<n;e++)r.push(new Uint8Array(LF(t,0,64)));return new LW(L$.deserialize(new Uint8Array(t)),r)}sign(e){let t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let n of e){let e=r.findIndex(e=>e.equals(n.publicKey));LD(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=Lv(t,n.secretKey)}}addSignature(e,t){LD(64===t.byteLength,"Signature must be 64 bytes long");let r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(t=>t.equals(e));LD(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}new Lk("SysvarC1ock11111111111111111111111111111111"),new Lk("SysvarEpochSchedu1e111111111111111111111111"),new Lk("Sysvar1nstructions1111111111111111111111111");let LK=new Lk("SysvarRecentB1ockHashes11111111111111111111"),LJ=new Lk("SysvarRent111111111111111111111111111111111");new Lk("SysvarRewards111111111111111111111111111111"),new Lk("SysvarS1otHashes111111111111111111111111111"),new Lk("SysvarS1otHistory11111111111111111111111111"),new Lk("SysvarStakeHistory1111111111111111111111111");class LZ extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){let s,o=n?`Logs: 
${JSON.stringify(n.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";switch(e){case"send":s=`Transaction ${t} resulted in an error. 
${r}. `+o+a;break;case"simulate":s=`Simulation failed. 
Message: ${r}. 
`+o+a;break;default:s=`Unknown action '${e}'`}super(s),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(!(null!=e&&"object"==typeof e&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(e=>{if(e&&e.meta&&e.meta.logMessages){let r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class LQ extends Error{constructor({code:e,message:t,data:r},n){super(null!=n?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function LX(e){return new Promise(t=>setTimeout(t,e))}function LY(e,t){let r=e.layout.span>=0?e.layout.span:function e(t,r){let n=t=>{if(t.span>=0)return t.span;if("function"==typeof t.alloc)return t.alloc(r[t.property]);if("count"in t&&"elementLayout"in t){let e=r[t.property];if(Array.isArray(e))return e.length*n(t.elementLayout)}else if("fields"in t)return e({layout:t},r[t.property]);return 0},s=0;return t.layout.fields.forEach(e=>{s+=n(e)}),s}(e,t),n=TO.Buffer.alloc(r),s=Object.assign({instruction:e.index},t);return e.layout.encode(s,n),n}let L0=Np("lamportsPerSignature"),L1=Nm([Nh("version"),Nh("state"),LO("authorizedPubkey"),LO("nonce"),Nm([L0],"feeCalculator")]),L2=L1.span;class L3{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let t=L1.decode(Lw(e),0);return new L3({authorizedPubkey:new Lk(t.authorizedPubkey),nonce:new Lk(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function L8(e){let t=Nb(8,e),r=t.decode.bind(t),n=t.encode.bind(t),s=Nk();return t.decode=(e,t)=>{let n=r(e,t);return s.decode(n)},t.encode=(e,t,r)=>n(s.encode(e),t,r),t}let L6=Object.freeze({Create:{index:0,layout:Nm([Nh("instruction"),Ng("lamports"),Ng("space"),LO("programId")])},Assign:{index:1,layout:Nm([Nh("instruction"),LO("programId")])},Transfer:{index:2,layout:Nm([Nh("instruction"),L8("lamports")])},CreateWithSeed:{index:3,layout:Nm([Nh("instruction"),LO("base"),LR("seed"),Ng("lamports"),Ng("space"),LO("programId")])},AdvanceNonceAccount:{index:4,layout:Nm([Nh("instruction")])},WithdrawNonceAccount:{index:5,layout:Nm([Nh("instruction"),Ng("lamports")])},InitializeNonceAccount:{index:6,layout:Nm([Nh("instruction"),LO("authorized")])},AuthorizeNonceAccount:{index:7,layout:Nm([Nh("instruction"),LO("authorized")])},Allocate:{index:8,layout:Nm([Nh("instruction"),Ng("space")])},AllocateWithSeed:{index:9,layout:Nm([Nh("instruction"),LO("base"),LR("seed"),Ng("space"),LO("programId")])},AssignWithSeed:{index:10,layout:Nm([Nh("instruction"),LO("base"),LR("seed"),LO("programId")])},TransferWithSeed:{index:11,layout:Nm([Nh("instruction"),L8("lamports"),LR("seed"),LO("programId")])},UpgradeNonceAccount:{index:12,layout:Nm([Nh("instruction")])}});class L4{constructor(){}static createAccount(e){let t=LY(L6.Create,{lamports:e.lamports,space:e.space,programId:Lw(e.programId.toBuffer())});return new Lq({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;return"basePubkey"in e?(t=LY(L6.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:Lw(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=LY(L6.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]),new Lq({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;return"basePubkey"in e?(t=LY(L6.AssignWithSeed,{base:Lw(e.basePubkey.toBuffer()),seed:e.seed,programId:Lw(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=LY(L6.Assign,{programId:Lw(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new Lq({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=LY(L6.CreateWithSeed,{base:Lw(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Lw(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Lq({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){let t=new LG;"basePubkey"in e&&"seed"in e?t.add(L4.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:L2,programId:this.programId})):t.add(L4.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:L2,programId:this.programId}));let r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){let t=LY(L6.InitializeNonceAccount,{authorized:Lw(e.authorizedPubkey.toBuffer())});return new Lq({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:LK,isSigner:!1,isWritable:!1},{pubkey:LJ,isSigner:!1,isWritable:!1}],programId:this.programId,data:t})}static nonceAdvance(e){let t=LY(L6.AdvanceNonceAccount);return new Lq({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:LK,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceWithdraw(e){let t=LY(L6.WithdrawNonceAccount,{lamports:e.lamports});return new Lq({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:LK,isSigner:!1,isWritable:!1},{pubkey:LJ,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){let t=LY(L6.AuthorizeNonceAccount,{authorized:Lw(e.newAuthorizedPubkey.toBuffer())});return new Lq({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;return"basePubkey"in e?(t=LY(L6.AllocateWithSeed,{base:Lw(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Lw(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=LY(L6.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new Lq({keys:r,programId:this.programId,data:t})}}L4.programId=new Lk("11111111111111111111111111111111"),new Lk("BPFLoader2111111111111111111111111111111111");var L5=(Fj=function(){if(FV)return FH;FV=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};return FH=function(r){var n=function r(n,s){var o,a,l,u,c,d,f;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),s);if("[object Array]"===(f=e.call(n))){for(l="[",a=n.length-1,o=0;o<a;o++)l+=r(n[o],!0)+",";return a>-1&&(l+=r(n[o],!0)),l+"]"}if("[object Object]"!==f)return JSON.stringify(n);for(a=(u=t(n).sort()).length,l="",o=0;o<a;)void 0!==(d=r(n[c=u[o]],!1))&&(l&&(l+=","),l+=JSON.stringify(c)+":"+d),o++;return"{"+l+"}";case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}(r,!1);if(void 0!==n)return""+n}}())&&Fj.__esModule&&Object.prototype.hasOwnProperty.call(Fj,"default")?Fj.default:Fj;function L9(e){let t=0;for(;e>1;)e/=2,t++;return t}class L7{constructor(e,t,r,n,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){var t;let r=L9(0===(t=e+32+1)?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,(t|=t>>32)+1))-L9(32)-1,n=this.getSlotsInEpoch(r);return[r,e-(n-32)]}{let t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*32:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+L9(32)):this.slotsPerEpoch}}var Me=globalThis.fetch;class Mt extends D9{constructor(e,t,r){super(e=>{let r=new D4(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in r?this.underlyingSocket=r.socket:this.underlyingSocket=r,r},e,t,r),this.underlyingSocket=void 0}call(...e){var t;let r=null==(t=this.underlyingSocket)?void 0:t.readyState;return 1===r?super.call(...e):Promise.reject(Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...e){var t;let r=null==(t=this.underlyingSocket)?void 0:t.readyState;return 1===r?super.notify(...e):Promise.reject(Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}class Mr{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let t=function(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}(Mn,e),r=e.length-56;LD(r>=0,"lookup table is invalid"),LD(r%32==0,"lookup table is invalid");let{addresses:n}=Nm([Ny(LO(),r/32,"addresses")]).decode(e.slice(56));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new Lk(t.authority[0]):void 0,addresses:n.map(e=>new Lk(e))}}}let Mn={index:1,layout:Nm([Nh("typeIndex"),L8("deactivationSlot"),Np("lastExtendedSlot"),Nd("lastExtendedStartIndex"),Nd(),Ny(LO(),Nc(Nd(),-1),"authority")])},Mi=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,Ms=NJ(NU(Lk),NV(),e=>new Lk(e)),Mo=Nq([NV(),NF("base64")]),Ma=NJ(NU(TO.Buffer),Mo,e=>TO.Buffer.from(e[0],"base64"));function Ml(e){let t,r;if("string"==typeof e)t=e;else if(e){let{commitment:n,...s}=e;t=n,r=s}return{commitment:t,config:r}}function Mu(e){return e.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Mc(e){return NW([NG({jsonrpc:NF("2.0"),id:NV(),result:e}),NG({jsonrpc:NF("2.0"),id:NV(),error:NG({code:NK(),message:NV(),data:N$(ND("any",()=>!0))})})])}let Md=Mc(NK());function Mf(e){return NJ(Mc(e),Md,t=>"error"in t?t:{...t,result:NB(t.result,e)})}function Mh(e){return Mf(NG({context:NG({slot:Nz()}),value:e}))}function Mp(e){return NG({context:NG({slot:Nz()}),value:e})}function Mg(e,t){return 0===e?new Lz({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new Lk(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Br.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Lj(t)}let Mm=NG({foundation:Nz(),foundationTerm:Nz(),initial:Nz(),taper:Nz(),terminal:Nz()}),My=Mf(NL(Nj(NG({epoch:Nz(),effectiveSlot:Nz(),amount:Nz(),postBalance:Nz(),commission:N$(Nj(Nz()))})))),Mb=NL(NG({slot:Nz(),prioritizationFee:Nz()})),Mv=NG({total:Nz(),validator:Nz(),foundation:Nz(),epoch:Nz()}),Mx=NG({epoch:Nz(),slotIndex:Nz(),slotsInEpoch:Nz(),absoluteSlot:Nz(),blockHeight:N$(Nz()),transactionCount:N$(Nz())}),Mw=NG({slotsPerEpoch:Nz(),leaderScheduleSlotOffset:Nz(),warmup:NM(),firstNormalEpoch:Nz(),firstNormalSlot:Nz()}),ME=NH(NV(),NL(Nz())),MA=Nj(NW([NG({}),NV()])),MS=NG({err:MA}),Mk=NF("receivedSignature"),MI=NG({"solana-core":NV(),"feature-set":N$(Nz())}),M_=NG({program:NV(),programId:Ms,parsed:NK()}),MP=NG({programId:Ms,accounts:NL(Ms),data:NV()}),MC=Mh(NG({err:Nj(NW([NG({}),NV()])),logs:Nj(NL(NV())),accounts:N$(Nj(NL(Nj(NG({executable:NM(),owner:NV(),lamports:Nz(),data:NL(NV()),rentEpoch:N$(Nz())}))))),unitsConsumed:N$(Nz()),returnData:N$(Nj(NG({programId:NV(),data:Nq([NV(),NF("base64")])}))),innerInstructions:N$(Nj(NL(NG({index:Nz(),instructions:NL(NW([M_,MP]))}))))})),MO=Mh(NG({byIdentity:NH(NV(),NL(Nz())),range:NG({firstSlot:Nz(),lastSlot:Nz()})})),MT=Mf(Mm),MR=Mf(Mv),MB=Mf(Mb),MN=Mf(Mx),MD=Mf(Mw),ML=Mf(ME),MM=Mf(Nz()),MU=Mh(NG({total:Nz(),circulating:Nz(),nonCirculating:Nz(),nonCirculatingAccounts:NL(Ms)})),MF=NG({amount:NV(),uiAmount:Nj(Nz()),decimals:Nz(),uiAmountString:N$(NV())}),Mj=Mh(NL(NG({address:Ms,amount:NV(),uiAmount:Nj(Nz()),decimals:Nz(),uiAmountString:N$(NV())}))),Mz=Mh(NL(NG({pubkey:Ms,account:NG({executable:NM(),owner:Ms,lamports:Nz(),data:Ma,rentEpoch:Nz()})}))),M$=NG({program:NV(),parsed:NK(),space:Nz()}),MH=Mh(NL(NG({pubkey:Ms,account:NG({executable:NM(),owner:Ms,lamports:Nz(),data:M$,rentEpoch:Nz()})}))),MV=Mh(NL(NG({lamports:Nz(),address:Ms}))),Mq=NG({executable:NM(),owner:Ms,lamports:Nz(),data:Ma,rentEpoch:Nz()}),MG=NG({pubkey:Ms,account:Mq}),MW=NJ(NW([NU(TO.Buffer),M$]),NW([Mo,M$]),e=>Array.isArray(e)?NB(e,Ma):e),MK=NG({executable:NM(),owner:Ms,lamports:Nz(),data:MW,rentEpoch:Nz()}),MJ=NG({pubkey:Ms,account:MK}),MZ=NG({state:NW([NF("active"),NF("inactive"),NF("activating"),NF("deactivating")]),active:Nz(),inactive:Nz()}),MQ=Mf(NL(NG({signature:NV(),slot:Nz(),err:MA,memo:Nj(NV()),blockTime:N$(Nj(Nz()))}))),MX=Mf(NL(NG({signature:NV(),slot:Nz(),err:MA,memo:Nj(NV()),blockTime:N$(Nj(Nz()))}))),MY=NG({subscription:Nz(),result:Mp(Mq)}),M0=NG({pubkey:Ms,account:Mq}),M1=NG({subscription:Nz(),result:Mp(M0)}),M2=NG({parent:Nz(),slot:Nz(),root:Nz()}),M3=NG({subscription:Nz(),result:M2}),M8=NW([NG({type:NW([NF("firstShredReceived"),NF("completed"),NF("optimisticConfirmation"),NF("root")]),slot:Nz(),timestamp:Nz()}),NG({type:NF("createdBank"),parent:Nz(),slot:Nz(),timestamp:Nz()}),NG({type:NF("frozen"),slot:Nz(),timestamp:Nz(),stats:NG({numTransactionEntries:Nz(),numSuccessfulTransactions:Nz(),numFailedTransactions:Nz(),maxTransactionsPerEntry:Nz()})}),NG({type:NF("dead"),slot:Nz(),timestamp:Nz(),err:NV()})]),M6=NG({subscription:Nz(),result:M8}),M4=NG({subscription:Nz(),result:Mp(NW([MS,Mk]))}),M5=NG({subscription:Nz(),result:Nz()}),M9=NG({pubkey:NV(),gossip:Nj(NV()),tpu:Nj(NV()),rpc:Nj(NV()),version:Nj(NV())}),M7=NG({votePubkey:NV(),nodePubkey:NV(),activatedStake:Nz(),epochVoteAccount:NM(),epochCredits:NL(Nq([Nz(),Nz(),Nz()])),commission:Nz(),lastVote:Nz(),rootSlot:Nj(Nz())}),Ue=Mf(NG({current:NL(M7),delinquent:NL(M7)})),Ut=NW([NF("processed"),NF("confirmed"),NF("finalized")]),Ur=NG({slot:Nz(),confirmations:Nj(Nz()),err:MA,confirmationStatus:N$(Ut)}),Un=Mh(NL(Nj(Ur))),Ui=Mf(Nz()),Us=NG({accountKey:Ms,writableIndexes:NL(Nz()),readonlyIndexes:NL(Nz())}),Uo=NG({signatures:NL(NV()),message:NG({accountKeys:NL(NV()),header:NG({numRequiredSignatures:Nz(),numReadonlySignedAccounts:Nz(),numReadonlyUnsignedAccounts:Nz()}),instructions:NL(NG({accounts:NL(Nz()),data:NV(),programIdIndex:Nz()})),recentBlockhash:NV(),addressTableLookups:N$(NL(Us))})}),Ua=NG({pubkey:Ms,signer:NM(),writable:NM(),source:N$(NW([NF("transaction"),NF("lookupTable")]))}),Ul=NG({accountKeys:NL(Ua),signatures:NL(NV())}),Uu=NG({parsed:NK(),program:NV(),programId:Ms}),Uc=NG({accounts:NL(Ms),data:NV(),programId:Ms}),Ud=NJ(NW([Uc,Uu]),NW([NG({parsed:NK(),program:NV(),programId:NV()}),NG({accounts:NL(NV()),data:NV(),programId:NV()})]),e=>"accounts"in e?NB(e,Uc):NB(e,Uu)),Uf=NG({signatures:NL(NV()),message:NG({accountKeys:NL(Ua),instructions:NL(Ud),recentBlockhash:NV(),addressTableLookups:N$(Nj(NL(Us)))})}),Uh=NG({accountIndex:Nz(),mint:NV(),owner:N$(NV()),programId:N$(NV()),uiTokenAmount:MF}),Up=NG({writable:NL(Ms),readonly:NL(Ms)}),Ug=NG({err:MA,fee:Nz(),innerInstructions:N$(Nj(NL(NG({index:Nz(),instructions:NL(NG({accounts:NL(Nz()),data:NV(),programIdIndex:Nz()}))})))),preBalances:NL(Nz()),postBalances:NL(Nz()),logMessages:N$(Nj(NL(NV()))),preTokenBalances:N$(Nj(NL(Uh))),postTokenBalances:N$(Nj(NL(Uh))),loadedAddresses:N$(Up),computeUnitsConsumed:N$(Nz()),costUnits:N$(Nz())}),Um=NG({err:MA,fee:Nz(),innerInstructions:N$(Nj(NL(NG({index:Nz(),instructions:NL(Ud)})))),preBalances:NL(Nz()),postBalances:NL(Nz()),logMessages:N$(Nj(NL(NV()))),preTokenBalances:N$(Nj(NL(Uh))),postTokenBalances:N$(Nj(NL(Uh))),loadedAddresses:N$(Up),computeUnitsConsumed:N$(Nz()),costUnits:N$(Nz())}),Uy=NW([NF(0),NF("legacy")]),Ub=NG({pubkey:NV(),lamports:Nz(),postBalance:Nj(Nz()),rewardType:Nj(NV()),commission:N$(Nj(Nz()))}),Uv=Mf(Nj(NG({blockhash:NV(),previousBlockhash:NV(),parentSlot:Nz(),transactions:NL(NG({transaction:Uo,meta:Nj(Ug),version:N$(Uy)})),rewards:N$(NL(Ub)),blockTime:Nj(Nz()),blockHeight:Nj(Nz())}))),Ux=Mf(Nj(NG({blockhash:NV(),previousBlockhash:NV(),parentSlot:Nz(),rewards:N$(NL(Ub)),blockTime:Nj(Nz()),blockHeight:Nj(Nz())}))),Uw=Mf(Nj(NG({blockhash:NV(),previousBlockhash:NV(),parentSlot:Nz(),transactions:NL(NG({transaction:Ul,meta:Nj(Ug),version:N$(Uy)})),rewards:N$(NL(Ub)),blockTime:Nj(Nz()),blockHeight:Nj(Nz())}))),UE=Mf(Nj(NG({blockhash:NV(),previousBlockhash:NV(),parentSlot:Nz(),transactions:NL(NG({transaction:Uf,meta:Nj(Um),version:N$(Uy)})),rewards:N$(NL(Ub)),blockTime:Nj(Nz()),blockHeight:Nj(Nz())}))),UA=Mf(Nj(NG({blockhash:NV(),previousBlockhash:NV(),parentSlot:Nz(),transactions:NL(NG({transaction:Ul,meta:Nj(Um),version:N$(Uy)})),rewards:N$(NL(Ub)),blockTime:Nj(Nz()),blockHeight:Nj(Nz())}))),US=Mf(Nj(NG({blockhash:NV(),previousBlockhash:NV(),parentSlot:Nz(),rewards:N$(NL(Ub)),blockTime:Nj(Nz()),blockHeight:Nj(Nz())}))),Uk=Mf(Nj(NG({blockhash:NV(),previousBlockhash:NV(),parentSlot:Nz(),transactions:NL(NG({transaction:Uo,meta:Nj(Ug)})),rewards:N$(NL(Ub)),blockTime:Nj(Nz())}))),UI=Mf(Nj(NG({blockhash:NV(),previousBlockhash:NV(),parentSlot:Nz(),signatures:NL(NV()),blockTime:Nj(Nz())}))),U_=Mf(Nj(NG({slot:Nz(),meta:Nj(Ug),blockTime:N$(Nj(Nz())),transaction:Uo,version:N$(Uy)}))),UP=Mf(Nj(NG({slot:Nz(),transaction:Uf,meta:Nj(Um),blockTime:N$(Nj(Nz())),version:N$(Uy)}))),UC=Mh(NG({blockhash:NV(),lastValidBlockHeight:Nz()})),UO=Mh(NM()),UT=Mf(NL(NG({slot:Nz(),numTransactions:Nz(),numSlots:Nz(),samplePeriodSecs:Nz()}))),UR=Mh(Nj(NG({feeCalculator:NG({lamportsPerSignature:Nz()})}))),UB=Mf(NV()),UN=Mf(NV()),UD=NG({err:MA,logs:NL(NV()),signature:NV()}),UL=NG({result:Mp(UD),subscription:Nz()}),UM={"solana-client":"js/1.0.0-maintenance"};class UU{constructor(e,t){var r,n;let s,o,a,l,u,c;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let e={};return async t=>{let{commitment:r,config:n}=Ml(t),s=this._buildArgs([],r,void 0,n),o=L5(s);return e[o]=e[o]??(async()=>{try{let e=await this._rpcRequest("getBlockHeight",s),t=NB(e,Mf(Nz()));if("error"in t)throw new LQ(t.error,"failed to get block height information");return t.result}finally{delete e[o]}})(),await e[o]}})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,s=t.wsEndpoint,o=t.httpHeaders,a=t.fetch,l=t.fetchMiddleware,u=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(e),this._rpcWsEndpoint=s||function(e){let t=e.match(Mi);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);let[r,n,s,o]=t,a=e.startsWith("https:")?"wss:":"ws:",l=null==s?null:parseInt(s.slice(1),10),u=null==l?"":`:${l+1}`;return`${a}//${n}${u}${o}`}(e),this._rpcClient=function(e,t,r,n,s,o){let a,l,u=r||Me;return null!=o&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(l=async(e,t)=>{let r=await new Promise((r,s)=>{try{n(e,t,(e,t)=>r([e,t]))}catch(e){s(e)}});return await u(...r)}),new D3(async(r,n)=>{let o={method:"POST",body:r,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},UM)};try{let t=5,r,a=500;for(;r=l?await l(e,o):await u(e,o),!(429!==r.status||!0===s||(t-=1,0===t));)console.error(`Server responded with ${r.status} ${r.statusText}.  Retrying after ${a}ms delay...`),await LX(a),a*=2;let c=await r.text();r.ok?n(null,c):n(Error(`${r.status} ${r.statusText}: ${c}`))}catch(e){e instanceof Error&&n(e)}},{})}(e,o,a,l,u,c),this._rpcRequest=(r=this._rpcClient,(e,t)=>new Promise((n,s)=>{r.request(e,t,(e,t)=>{if(e)return void s(e);n(t)})})),this._rpcBatchRequest=(n=this._rpcClient,e=>new Promise((t,r)=>{0===e.length&&t([]);let s=e.map(e=>n.request(e.methodName,e.args));n.request(s,(e,n)=>{if(e)return void r(e);t(n)})})),this._rpcWebSocket=new Mt(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){let{commitment:r,config:n}=Ml(t),s=this._buildArgs([e.toBase58()],r,void 0,n),o=NB(await this._rpcRequest("getBalance",s),Mh(Nz()));if("error"in o)throw new LQ(o.error,`failed to get balance for ${e.toBase58()}`);return o.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(e=>e.value).catch(t=>{throw Error("failed to get balance of account "+e.toBase58()+": "+t)})}async getBlockTime(e){let t=NB(await this._rpcRequest("getBlockTime",[e]),Mf(Nj(Nz())));if("error"in t)throw new LQ(t.error,`failed to get block time for slot ${e}`);return t.result}async getMinimumLedgerSlot(){let e=NB(await this._rpcRequest("minimumLedgerSlot",[]),Mf(Nz()));if("error"in e)throw new LQ(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){let e=NB(await this._rpcRequest("getFirstAvailableBlock",[]),MM);if("error"in e)throw new LQ(e.error,"failed to get first available block");return e.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};let r=NB(await this._rpcRequest("getSupply",[t]),MU);if("error"in r)throw new LQ(r.error,"failed to get supply");return r.result}async getTokenSupply(e,t){let r=this._buildArgs([e.toBase58()],t),n=NB(await this._rpcRequest("getTokenSupply",r),Mh(MF));if("error"in n)throw new LQ(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(e,t){let r=this._buildArgs([e.toBase58()],t),n=NB(await this._rpcRequest("getTokenAccountBalance",r),Mh(MF));if("error"in n)throw new LQ(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(e,t,r){let{commitment:n,config:s}=Ml(r),o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});let a=this._buildArgs(o,n,"base64",s),l=NB(await this._rpcRequest("getTokenAccountsByOwner",a),Mz);if("error"in l)throw new LQ(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});let s=this._buildArgs(n,r,"jsonParsed"),o=NB(await this._rpcRequest("getTokenAccountsByOwner",s),MH);if("error"in o)throw new LQ(o.error,`failed to get token accounts owned by account ${e.toBase58()}`);return o.result}async getLargestAccounts(e){let t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=NB(await this._rpcRequest("getLargestAccounts",r),MV);if("error"in n)throw new LQ(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(e,t){let r=this._buildArgs([e.toBase58()],t),n=NB(await this._rpcRequest("getTokenLargestAccounts",r),Mj);if("error"in n)throw new LQ(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(e,t){let{commitment:r,config:n}=Ml(t),s=this._buildArgs([e.toBase58()],r,"base64",n),o=NB(await this._rpcRequest("getAccountInfo",s),Mh(Nj(Mq)));if("error"in o)throw new LQ(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getParsedAccountInfo(e,t){let{commitment:r,config:n}=Ml(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=NB(await this._rpcRequest("getAccountInfo",s),Mh(Nj(MK)));if("error"in o)throw new LQ(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(t){throw Error("failed to get info about account "+e.toBase58()+": "+t)}}async getMultipleParsedAccounts(e,t){let{commitment:r,config:n}=Ml(t),s=e.map(e=>e.toBase58()),o=this._buildArgs([s],r,"jsonParsed",n),a=NB(await this._rpcRequest("getMultipleAccounts",o),Mh(NL(Nj(MK))));if("error"in a)throw new LQ(a.error,`failed to get info for accounts ${s}`);return a.result}async getMultipleAccountsInfoAndContext(e,t){let{commitment:r,config:n}=Ml(t),s=e.map(e=>e.toBase58()),o=this._buildArgs([s],r,"base64",n),a=NB(await this._rpcRequest("getMultipleAccounts",o),Mh(NL(Nj(Mq))));if("error"in a)throw new LQ(a.error,`failed to get info for accounts ${s}`);return a.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){let{commitment:n,config:s}=Ml(t),o=this._buildArgs([e.toBase58()],n,void 0,{...s,epoch:r??(null==s?void 0:s.epoch)}),a=NB(await this._rpcRequest("getStakeActivation",o),Mf(MZ));if("error"in a)throw new LQ(a.error,`failed to get Stake Activation ${e.toBase58()}`);return a.result}async getProgramAccounts(e,t){let{commitment:r,config:n}=Ml(t),{encoding:s,...o}=n||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:Mu(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),u=NL(MG),c=!0===o.withContext?NB(l,Mh(u)):NB(l,Mf(u));if("error"in c)throw new LQ(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async getParsedProgramAccounts(e,t){let{commitment:r,config:n}=Ml(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=NB(await this._rpcRequest("getProgramAccounts",s),Mf(NL(MJ)));if("error"in o)throw new LQ(o.error,`failed to get accounts owned by program ${e.toBase58()}`);return o.result}async confirmTransaction(e,t){var r;let n,s;if("string"==typeof e)n=e;else{if(null!=(r=e.abortSignal)&&r.aborted)return Promise.reject(e.abortSignal.reason);n=e.signature}try{s=Br.decode(n)}catch{throw Error("signature must be base58 encoded: "+n)}return LD(64===s.length,"signature has invalid length"),"string"==typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,s=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise((o,a)=>{try{r=this.onSignature(t,(e,t)=>{r=void 0,o({__type:LH.PROCESSED,response:{context:t,value:e}})},e);let l=new Promise(e=>{null==r?e():n=this._onSubscriptionStateChange(r,t=>{"subscribed"===t&&e()})});(async()=>{if(await l,s)return;let r=await this.getSignatureStatus(t);if(s||null==r)return;let{context:n,value:u}=r;if(null!=u)if(null!=u&&u.err)a(u.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===u.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===u.confirmationStatus||"confirmed"===u.confirmationStatus)return}s=!0,o({__type:LH.PROCESSED,response:{context:n,value:u}})}})()}catch(e){a(e)}})}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let s,o=!1,a=new Promise(t=>{let n=async()=>{try{return await this.getBlockHeight(e)}catch{return -1}};(async()=>{let e=await n();if(!o){for(;e<=r;)if(await LX(1e3),o||(e=await n(),o))return;t({__type:LH.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),c=this.getCancellationPromise(t);try{let e=await Promise.race([c,u,a]);if(e.__type===LH.PROCESSED)s=e.response;else throw new LI(n)}finally{o=!0,l()}return s}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:s,signature:o}}){let a,l=!1,u=new Promise(t=>{let o=s,a=null,u=async()=>{try{let{context:t,value:s}=await this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return a=t.slot,null==s?void 0:s.nonce}catch{return o}};(async()=>{if(o=await u(),!l)for(;;){if(s!==o)return void t({__type:LH.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await LX(2e3),l||(o=await u(),l))return}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),f=this.getCancellationPromise(t);try{let t=await Promise.race([f,d,u]);if(t.__type===LH.PROCESSED)a=t.response;else{let n;for(;;){let e=await this.getSignatureStatus(o);if(null==e)break;if(e.context.slot<(t.slotInWhichNonceDidAdvance??r)){await LX(400);continue}n=e;break}if(null!=n&&n.value){let t=e||"finalized",{confirmationStatus:r}=n.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new LP(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new LP(o);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new LP(o)}a={context:n.context,value:{err:n.value.err}}}else throw new LP(o)}}finally{l=!0,c()}return a}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r,n,s=new Promise(t=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout(()=>t({__type:LH.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});try{let e=await Promise.race([a,s]);if(e.__type===LH.PROCESSED)n=e.response;else throw new L_(t,e.timeoutMs/1e3)}finally{clearTimeout(r),o()}return n}async getClusterNodes(){let e=NB(await this._rpcRequest("getClusterNodes",[]),Mf(NL(M9)));if("error"in e)throw new LQ(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(e){let t=this._buildArgs([],e),r=NB(await this._rpcRequest("getVoteAccounts",t),Ue);if("error"in r)throw new LQ(r.error,"failed to get vote accounts");return r.result}async getSlot(e){let{commitment:t,config:r}=Ml(e),n=this._buildArgs([],t,void 0,r),s=NB(await this._rpcRequest("getSlot",n),Mf(Nz()));if("error"in s)throw new LQ(s.error,"failed to get slot");return s.result}async getSlotLeader(e){let{commitment:t,config:r}=Ml(e),n=this._buildArgs([],t,void 0,r),s=NB(await this._rpcRequest("getSlotLeader",n),Mf(NV()));if("error"in s)throw new LQ(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(e,t){let r=NB(await this._rpcRequest("getSlotLeaders",[e,t]),Mf(NL(Ms)));if("error"in r)throw new LQ(r.error,"failed to get slot leaders");return r.result}async getSignatureStatus(e,t){let{context:r,value:n}=await this.getSignatureStatuses([e],t);return LD(1===n.length),{context:r,value:n[0]}}async getSignatureStatuses(e,t){let r=[e];t&&r.push(t);let n=NB(await this._rpcRequest("getSignatureStatuses",r),Un);if("error"in n)throw new LQ(n.error,"failed to get signature status");return n.result}async getTransactionCount(e){let{commitment:t,config:r}=Ml(e),n=this._buildArgs([],t,void 0,r),s=NB(await this._rpcRequest("getTransactionCount",n),Mf(Nz()));if("error"in s)throw new LQ(s.error,"failed to get transaction count");return s.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){let t=this._buildArgs([],e),r=NB(await this._rpcRequest("getInflationGovernor",t),MT);if("error"in r)throw new LQ(r.error,"failed to get inflation");return r.result}async getInflationReward(e,t,r){let{commitment:n,config:s}=Ml(r),o=this._buildArgs([e.map(e=>e.toBase58())],n,void 0,{...s,epoch:t??(null==s?void 0:s.epoch)}),a=NB(await this._rpcRequest("getInflationReward",o),My);if("error"in a)throw new LQ(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){let e=NB(await this._rpcRequest("getInflationRate",[]),MR);if("error"in e)throw new LQ(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(e){let{commitment:t,config:r}=Ml(e),n=this._buildArgs([],t,void 0,r),s=NB(await this._rpcRequest("getEpochInfo",n),MN);if("error"in s)throw new LQ(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){let e=NB(await this._rpcRequest("getEpochSchedule",[]),MD);if("error"in e)throw new LQ(e.error,"failed to get epoch schedule");let t=e.result;return new L7(t.slotsPerEpoch,t.leaderScheduleSlotOffset,t.warmup,t.firstNormalEpoch,t.firstNormalSlot)}async getLeaderSchedule(){let e=NB(await this._rpcRequest("getLeaderSchedule",[]),ML);if("error"in e)throw new LQ(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(e,t){let r=this._buildArgs([e],t),n=NB(await this._rpcRequest("getMinimumBalanceForRentExemption",r),Ui);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(e){let{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(e){let t=NB(await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),UT);if("error"in t)throw new LQ(t.error,"failed to get recent performance samples");return t.result}async getFeeCalculatorForBlockhash(e,t){let r=this._buildArgs([e],t),n=NB(await this._rpcRequest("getFeeCalculatorForBlockhash",r),UR);if("error"in n)throw new LQ(n.error,"failed to get fee calculator");let{context:s,value:o}=n.result;return{context:s,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(e,t){let r=Lw(e.serialize()).toString("base64"),n=this._buildArgs([r],t),s=NB(await this._rpcRequest("getFeeForMessage",n),Mh(Nj(Nz())));if("error"in s)throw new LQ(s.error,"failed to get fee for message");if(null===s.result)throw Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(e){var t;let r=null==(t=null==e?void 0:e.lockedWritableAccounts)?void 0:t.map(e=>e.toBase58()),n=null!=r&&r.length?[r]:[],s=NB(await this._rpcRequest("getRecentPrioritizationFees",n),MB);if("error"in s)throw new LQ(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(e){throw Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(e){throw Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(e){let{commitment:t,config:r}=Ml(e),n=this._buildArgs([],t,void 0,r),s=NB(await this._rpcRequest("getLatestBlockhash",n),UC);if("error"in s)throw new LQ(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(e,t){let{commitment:r,config:n}=Ml(t),s=this._buildArgs([e],r,void 0,n),o=NB(await this._rpcRequest("isBlockhashValid",s),UO);if("error"in o)throw new LQ(o.error,"failed to determine if the blockhash `"+e+"`is valid");return o.result}async getVersion(){let e=NB(await this._rpcRequest("getVersion",[]),Mf(MI));if("error"in e)throw new LQ(e.error,"failed to get version");return e.result}async getGenesisHash(){let e=NB(await this._rpcRequest("getGenesisHash",[]),Mf(NV()));if("error"in e)throw new LQ(e.error,"failed to get genesis hash");return e.result}async getBlock(e,t){let{commitment:r,config:n}=Ml(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=await this._rpcRequest("getBlock",s);try{switch(null==n?void 0:n.transactionDetails){case"accounts":{let e=NB(o,Uw);if("error"in e)throw e.error;return e.result}case"none":{let e=NB(o,Ux);if("error"in e)throw e.error;return e.result}default:{let e=NB(o,Uv);if("error"in e)throw e.error;let{result:t}=e;return t?{...t,transactions:t.transactions.map(({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:Mg(r,e.message)},version:r}))}:null}}}catch(e){throw new LQ(e,"failed to get confirmed block")}}async getParsedBlock(e,t){let{commitment:r,config:n}=Ml(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=await this._rpcRequest("getBlock",s);try{switch(null==n?void 0:n.transactionDetails){case"accounts":{let e=NB(o,UA);if("error"in e)throw e.error;return e.result}case"none":{let e=NB(o,US);if("error"in e)throw e.error;return e.result}default:{let e=NB(o,UE);if("error"in e)throw e.error;return e.result}}}catch(e){throw new LQ(e,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){let{commitment:n,...s}=e;r=n,t=s}let n=this._buildArgs([],r,"base64",t),s=NB(await this._rpcRequest("getBlockProduction",n),MO);if("error"in s)throw new LQ(s.error,"failed to get block production information");return s.result}async getTransaction(e,t){let{commitment:r,config:n}=Ml(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=NB(await this._rpcRequest("getTransaction",s),U_);if("error"in o)throw new LQ(o.error,"failed to get transaction");let a=o.result;return a&&{...a,transaction:{...a.transaction,message:Mg(a.version,a.transaction.message)}}}async getParsedTransaction(e,t){let{commitment:r,config:n}=Ml(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=NB(await this._rpcRequest("getTransaction",s),UP);if("error"in o)throw new LQ(o.error,"failed to get transaction");return o.result}async getParsedTransactions(e,t){let{commitment:r,config:n}=Ml(t),s=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n)}));return(await this._rpcBatchRequest(s)).map(e=>{let t=NB(e,UP);if("error"in t)throw new LQ(t.error,"failed to get transactions");return t.result})}async getTransactions(e,t){let{commitment:r,config:n}=Ml(t),s=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,void 0,n)}));return(await this._rpcBatchRequest(s)).map(e=>{let t=NB(e,U_);if("error"in t)throw new LQ(t.error,"failed to get transactions");let r=t.result;return r&&{...r,transaction:{...r.transaction,message:Mg(r.version,r.transaction.message)}}})}async getConfirmedBlock(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),n=NB(await this._rpcRequest("getBlock",r),Uk);if("error"in n)throw new LQ(n.error,"failed to get confirmed block");let s=n.result;if(!s)throw Error("Confirmed block "+e+" not found");let o={...s,transactions:s.transactions.map(({transaction:e,meta:t})=>{let r=new Lj(e.message);return{meta:t,transaction:{...e,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:e,meta:t})=>({meta:t,transaction:LG.populate(e.message,e.signatures)}))}}async getBlocks(e,t,r){let n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),s=NB(await this._rpcRequest("getBlocks",n),Mf(NL(Nz())));if("error"in s)throw new LQ(s.error,"failed to get blocks");return s.result}async getBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=NB(await this._rpcRequest("getBlock",r),UI);if("error"in n)throw new LQ(n.error,"failed to get block");let s=n.result;if(!s)throw Error("Block "+e+" not found");return s}async getConfirmedBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=NB(await this._rpcRequest("getBlock",r),UI);if("error"in n)throw new LQ(n.error,"failed to get confirmed block");let s=n.result;if(!s)throw Error("Confirmed block "+e+" not found");return s}async getConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),n=NB(await this._rpcRequest("getTransaction",r),U_);if("error"in n)throw new LQ(n.error,"failed to get transaction");let s=n.result;if(!s)return s;let o=new Lj(s.transaction.message),a=s.transaction.signatures;return{...s,transaction:LG.populate(o,a)}}async getParsedConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=NB(await this._rpcRequest("getTransaction",r),UP);if("error"in n)throw new LQ(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(e,t){let r=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(e=>{let t=NB(e,UP);if("error"in t)throw new LQ(t.error,"failed to get confirmed transactions");return t.result})}async getConfirmedSignaturesForAddress(e,t,r){let n={},s=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--t<=0||t<s);)try{let e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let o=await this.getSlot("finalized");for(;!("before"in n)&&!(++r>o);)try{let e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}return(await this.getConfirmedSignaturesForAddress2(e,n)).map(e=>e.signature)}async getConfirmedSignaturesForAddress2(e,t,r){let n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=NB(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),MQ);if("error"in s)throw new LQ(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(e,t,r){let n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=NB(await this._rpcRequest("getSignaturesForAddress",n),MX);if("error"in s)throw new LQ(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(e,t){let{context:r,value:n}=await this.getAccountInfoAndContext(e,t),s=null;return null!==n&&(s=new Mr({key:e,state:Mr.deserialize(n.data)})),{context:r,value:s}}async getNonceAndContext(e,t){let{context:r,value:n}=await this.getAccountInfoAndContext(e,t),s=null;return null!==n&&(s=L3.fromAccountData(n.data)),{context:r,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(e=>e.value).catch(t=>{throw Error("failed to get nonce for account "+e.toBase58()+": "+t)})}async requestAirdrop(e,t){let r=NB(await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),UB);if("error"in r)throw new LQ(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await LX(100);let e=Date.now()-this._blockhashInfo.lastFetch>=3e4;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let e=0;e<50;e++){let e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await LX(200)}throw Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){let{commitment:t,config:r}=Ml(e),n=this._buildArgs([],t,"base64",r),s=NB(await this._rpcRequest("getStakeMinimumDelegation",n),Mh(Nz()));if("error"in s)throw new LQ(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(e,t,r){let n;if("message"in e){let n=e.serialize(),s=TO.Buffer.from(n).toString("base64");if(Array.isArray(t)||void 0!==r)throw Error("Invalid arguments");let o=t||{};o.encoding="base64","commitment"in o||(o.commitment=this.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(o.innerInstructions=t.innerInstructions);let a=[s,o],l=NB(await this._rpcRequest("simulateTransaction",a),MC);if("error"in l)throw Error("failed to simulate transaction: "+l.error.message);return l.result}if(e instanceof LG?((n=new LG).feePayer=e.feePayer,n.instructions=e.instructions,n.nonceInfo=e.nonceInfo,n.signatures=e.signatures):(n=LG.populate(e))._message=n._json=void 0,void 0!==t&&!Array.isArray(t))throw Error("Invalid arguments");if(n.nonceInfo&&t)n.sign(...t);else{let e=this._disableBlockhashCaching;for(;;){let r=await this._blockhashWithExpiryBlockHeight(e);if(n.lastValidBlockHeight=r.lastValidBlockHeight,n.recentBlockhash=r.blockhash,!t)break;if(n.sign(...t),!n.signature)throw Error("!signature");let s=n.signature.toString("base64");if(this._blockhashInfo.simulatedSignatures.includes(s)||this._blockhashInfo.transactionSignatures.includes(s))e=!0;else{this._blockhashInfo.simulatedSignatures.push(s);break}}}let s=n._compile(),o=s.serialize(),a=n._serialize(o).toString("base64"),l={encoding:"base64",commitment:this.commitment};r&&(l.accounts={encoding:"base64",addresses:(Array.isArray(r)?r:s.nonProgramIds()).map(e=>e.toBase58())}),t&&(l.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(l.innerInstructions=t.innerInstructions);let u=[a,l],c=NB(await this._rpcRequest("simulateTransaction",u),MC);if("error"in c){let e;if("data"in c.error&&(e=c.error.data.logs)&&Array.isArray(e)){let t=`
    `,r=t+e.join(t);console.error(c.error.message,r)}throw new LZ({action:"simulate",signature:"",transactionMessage:c.error.message,logs:e})}return c.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw Error("Invalid arguments");let r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw Error("Invalid arguments");if(e.nonceInfo)e.sign(...t);else{let r=this._disableBlockhashCaching;for(;;){let n=await this._blockhashWithExpiryBlockHeight(r);if(e.lastValidBlockHeight=n.lastValidBlockHeight,e.recentBlockhash=n.blockhash,e.sign(...t),!e.signature)throw Error("!signature");let s=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(s))r=!0;else{this._blockhashInfo.transactionSignatures.push(s);break}}}let n=e.serialize();return await this.sendRawTransaction(n,r)}async sendRawTransaction(e,t){let r=Lw(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){let r={encoding:"base64"},n=t&&t.skipPreflight,s=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),s&&(r.preflightCommitment=s);let o=[e,r],a=NB(await this._rpcRequest("sendTransaction",o),UN);if("error"in a){let e;throw"data"in a.error&&(e=a.error.data.logs),new LZ({action:n?"send":"simulate",signature:"",transactionMessage:a.error.message,logs:e})}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3===e)return void this._updateSubscriptions();this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,t])=>{this._setSubscription(e,{...t,state:"pending"})})}_setSubscription(e,t){var r;let n=null==(r=this._subscriptionsByHash[e])?void 0:r.state;if(this._subscriptionsByHash[e]=t,n!==t.state){let r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach(e=>{try{e(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var r;let n=this._subscriptionHashByClientSubscriptionId[e];if(null==n)return()=>{};let s=(r=this._subscriptionStateChangeCallbacksByHash)[n]||(r[n]=new Set);return s.add(t),()=>{s.delete(t),0===s.size&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}},500));return}if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();let e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async e=>{let r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size){delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],await this._updateSubscriptions();return}await (async()=>{let{args:n,method:s}=r;try{this._setSubscription(e,{...r,state:"subscribing"});let t=await this._rpcWebSocket.call(s,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(o){if(console.error(`Received ${o instanceof Error?"":"JSON-RPC "}error calling \`${s}\``,{args:n,error:o}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await (async()=>{let{serverSubscriptionId:n,unsubscribeMethod:s}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(s,[n])}catch(n){if(n instanceof Error&&console.error(`${s} error:`,n.message),!t())return;this._setSubscription(e,{...r,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}}))}_handleServerNotification(e,t){let r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach(e=>{try{e(...t)}catch(e){console.error(e)}})}_wsOnAccountNotification(e){let{result:t,subscription:r}=NB(e,MY);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){let r=this._nextClientSubscriptionId++,n=L5([e.method,t]),s=this._subscriptionsByHash[n];return void 0===s?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];let t=this._subscriptionsByHash[n];LD(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){let{commitment:n,config:s}=Ml(r),o=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){let{result:t,subscription:r}=NB(e,M1);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){let{commitment:s,config:o}=Ml(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(n?{filters:Mu(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){let n=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){let{result:t,subscription:r}=NB(e,UL);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){let{result:t,subscription:r}=NB(e,M3);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){let{result:t,subscription:r}=NB(e,M6);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){let s=t||this._commitment;if(s||r||n){let t={};r&&(t.encoding=r),s&&(t.commitment=s),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){let s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){let{result:t,subscription:r}=NB(e,M4);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){let n=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return s}onSignatureWithOptions(e,t,r){let{commitment:n,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],n,void 0,s),a=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){let{result:t,subscription:r}=NB(e,M5);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Nm([Nh("instruction"),L8("recentSlot"),Nd("bumpSeed")])},FreezeLookupTable:{index:1,layout:Nm([Nh("instruction")])},ExtendLookupTable:{index:2,layout:Nm([Nh("instruction"),L8(),Ny(LO(),Nc(Nh(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Nm([Nh("instruction")])},CloseLookupTable:{index:4,layout:Nm([Nh("instruction")])}}),new Lk("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:Nm([Nd("instruction"),Nh("units"),Nh("additionalFee")])},RequestHeapFrame:{index:1,layout:Nm([Nd("instruction"),Nh("bytes")])},SetComputeUnitLimit:{index:2,layout:Nm([Nd("instruction"),Nh("units")])},SetComputeUnitPrice:{index:3,layout:Nm([Nd("instruction"),L8("microLamports")])}}),new Lk("ComputeBudget111111111111111111111111111111"),Nm([Nd("numSignatures"),Nd("padding"),Nf("signatureOffset"),Nf("signatureInstructionIndex"),Nf("publicKeyOffset"),Nf("publicKeyInstructionIndex"),Nf("messageDataOffset"),Nf("messageDataSize"),Nf("messageInstructionIndex")]),new Lk("Ed25519SigVerify111111111111111111111111111"),Ly.utils.isValidPrivateKey,Nm([Nd("numSignatures"),Nf("signatureOffset"),Nd("signatureInstructionIndex"),Nf("ethAddressOffset"),Nd("ethAddressInstructionIndex"),Nf("messageDataOffset"),Nf("messageDataSize"),Nd("messageInstructionIndex"),Nb(20,"ethAddress"),Nb(64,"signature"),Nd("recoveryId")]),new Lk("KeccakSecp256k11111111111111111111111111111"),new Lk("StakeConfig11111111111111111111111111111111");class UF{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}UF.default=new UF(0,0,Lk.default),Object.freeze({Initialize:{index:0,layout:Nm([Nh("instruction"),((e="authorized")=>Nm([LO("staker"),LO("withdrawer")],e))(),((e="lockup")=>Nm([Ng("unixTimestamp"),Ng("epoch"),LO("custodian")],e))()])},Authorize:{index:1,layout:Nm([Nh("instruction"),LO("newAuthorized"),Nh("stakeAuthorizationType")])},Delegate:{index:2,layout:Nm([Nh("instruction")])},Split:{index:3,layout:Nm([Nh("instruction"),Ng("lamports")])},Withdraw:{index:4,layout:Nm([Nh("instruction"),Ng("lamports")])},Deactivate:{index:5,layout:Nm([Nh("instruction")])},Merge:{index:7,layout:Nm([Nh("instruction")])},AuthorizeWithSeed:{index:8,layout:Nm([Nh("instruction"),LO("newAuthorized"),Nh("stakeAuthorizationType"),LR("authoritySeed"),LO("authorityOwner")])}}),new Lk("Stake11111111111111111111111111111111111111"),Object.freeze({InitializeAccount:{index:0,layout:Nm([Nh("instruction"),((e="voteInit")=>Nm([LO("nodePubkey"),LO("authorizedVoter"),LO("authorizedWithdrawer"),Nd("commission")],e))()])},Authorize:{index:1,layout:Nm([Nh("instruction"),LO("newAuthorized"),Nh("voteAuthorizationType")])},Withdraw:{index:3,layout:Nm([Nh("instruction"),Ng("lamports")])},UpdateValidatorIdentity:{index:4,layout:Nm([Nh("instruction")])},AuthorizeWithSeed:{index:10,layout:Nm([Nh("instruction"),((e="voteAuthorizeWithSeedArgs")=>Nm([Nh("voteAuthorizationType"),LO("currentAuthorityDerivedKeyOwnerPubkey"),LR("currentAuthorityDerivedKeySeed"),LO("newAuthorized")],e))()])}}),new Lk("Vote111111111111111111111111111111111111111"),new Lk("Va1idator1nfo111111111111111111111111111111"),NG({name:NV(),website:N$(NV()),details:N$(NV()),iconUrl:N$(NV()),keybaseUsername:N$(NV())}),new Lk("Vote111111111111111111111111111111111111111"),Nm([LO("nodePubkey"),LO("authorizedWithdrawer"),Nd("commission"),Np(),Ny(Nm([Np("slot"),Nh("confirmationCount")]),Nc(Nh(),-8),"votes"),Nd("rootSlotValid"),Np("rootSlot"),Np(),Ny(Nm([Np("epoch"),LO("authorizedVoter")]),Nc(Nh(),-8),"authorizedVoters"),Nm([Ny(Nm([LO("authorizedPubkey"),Np("epochOfLastAuthorizedSwitch"),Np("targetEpoch")]),32,"buf"),Np("idx"),Nd("isEmpty")],"priorVoters"),Np(),Ny(Nm([Np("epoch"),Np("credits"),Np("prevCredits")]),Nc(Nh(),-8),"epochCredits"),Nm([Np("slot"),Np("timestamp")],"lastTimestamp")]);let Uj=new Lk("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Uz=new Lk("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),U$=new Lk("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new Lk("So11111111111111111111111111111111111111112"),new Lk("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");let UH=e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)});var UV={};Object.defineProperty(UV,"__esModule",{value:!0});var Uq=UV.toBigIntLE=function(e){{let t=eZ.from(e);t.reverse();let r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}};UV.toBigIntBE=function(e){{let t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}};var UG=UV.toBufferLE=function(e,t){{let r=e.toString(16),n=eZ.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return n.reverse(),n}};UV.toBufferBE=function(e,t){{let r=e.toString(16);return eZ.from(r.padStart(2*t,"0").slice(0,2*t),"hex")}};let UW=e=>{let t=Nb(8,e),{encode:r,decode:n}=UH(t);return t.decode=(e,t)=>{let r=n(e,t);return Uq(eZ.from(r))},t.encode=(e,t,n)=>r(UG(e,8),t,n),t},UK=e=>{let t=Nb(32,e),{encode:r,decode:n}=UH(t);return t.decode=(e,t)=>new Lk(n(e,t)),t.encode=(e,t,n)=>r(e.toBuffer(),t,n),t};class UJ extends Error{constructor(e){super(e)}}class UZ extends UJ{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}class UQ extends UJ{constructor(){super(...arguments),this.name="TokenInvalidInstructionProgramError"}}class UX extends UJ{constructor(){super(...arguments),this.name="TokenInvalidInstructionKeysError"}}class UY extends UJ{constructor(){super(...arguments),this.name="TokenInvalidInstructionDataError"}}class U0 extends UJ{constructor(){super(...arguments),this.name="TokenInvalidInstructionTypeError"}}(Fz=Fq||(Fq={}))[Fz.InitializeMint=0]="InitializeMint",Fz[Fz.InitializeAccount=1]="InitializeAccount",Fz[Fz.InitializeMultisig=2]="InitializeMultisig",Fz[Fz.Transfer=3]="Transfer",Fz[Fz.Approve=4]="Approve",Fz[Fz.Revoke=5]="Revoke",Fz[Fz.SetAuthority=6]="SetAuthority",Fz[Fz.MintTo=7]="MintTo",Fz[Fz.Burn=8]="Burn",Fz[Fz.CloseAccount=9]="CloseAccount",Fz[Fz.FreezeAccount=10]="FreezeAccount",Fz[Fz.ThawAccount=11]="ThawAccount",Fz[Fz.TransferChecked=12]="TransferChecked",Fz[Fz.ApproveChecked=13]="ApproveChecked",Fz[Fz.MintToChecked=14]="MintToChecked",Fz[Fz.BurnChecked=15]="BurnChecked",Fz[Fz.InitializeAccount2=16]="InitializeAccount2",Fz[Fz.SyncNative=17]="SyncNative",Fz[Fz.InitializeAccount3=18]="InitializeAccount3",Fz[Fz.InitializeMultisig2=19]="InitializeMultisig2",Fz[Fz.InitializeMint2=20]="InitializeMint2",Fz[Fz.GetAccountDataSize=21]="GetAccountDataSize",Fz[Fz.InitializeImmutableOwner=22]="InitializeImmutableOwner",Fz[Fz.AmountToUiAmount=23]="AmountToUiAmount",Fz[Fz.UiAmountToAmount=24]="UiAmountToAmount",Fz[Fz.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",Fz[Fz.TransferFeeExtension=26]="TransferFeeExtension",Fz[Fz.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",Fz[Fz.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",Fz[Fz.Reallocate=29]="Reallocate",Fz[Fz.MemoTransferExtension=30]="MemoTransferExtension",Fz[Fz.CreateNativeMint=31]="CreateNativeMint",Fz[Fz.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",Fz[Fz.InterestBearingMintExtension=33]="InterestBearingMintExtension",Fz[Fz.CpiGuardExtension=34]="CpiGuardExtension",Fz[Fz.InitializePermanentDelegate=35]="InitializePermanentDelegate",Fz[Fz.TransferHookExtension=36]="TransferHookExtension",Fz[Fz.MetadataPointerExtension=39]="MetadataPointerExtension",Fz[Fz.GroupPointerExtension=40]="GroupPointerExtension",Fz[Fz.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",Fz[Fz.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",Fz[Fz.PausableExtension=44]="PausableExtension";class U1 extends Bz{constructor(e){super(-1,e),this.publicKeyLayout=UK()}decode(e,t=0){return 0===e[t]?null:this.publicKeyLayout.decode(e,t+1)}encode(e,t,r=0){return null===e?(t[r]=0,1):(t[r]=1,this.publicKeyLayout.encode(e,t,r+1),33)}getSpan(e,t=0){if(e)return 0===e[t]?1:1+this.publicKeyLayout.span;throw RangeError("Buffer must be provided")}}(F$=FG||(FG={}))[F$.InitializeTransferFeeConfig=0]="InitializeTransferFeeConfig",F$[F$.TransferCheckedWithFee=1]="TransferCheckedWithFee",F$[F$.WithdrawWithheldTokensFromMint=2]="WithdrawWithheldTokensFromMint",F$[F$.WithdrawWithheldTokensFromAccounts=3]="WithdrawWithheldTokensFromAccounts",F$[F$.HarvestWithheldTokensToMint=4]="HarvestWithheldTokensToMint",F$[F$.SetTransferFee=5]="SetTransferFee",Nm([Nd("instruction"),Nd("transferFeeInstruction"),new U1("transferFeeConfigAuthority"),new U1("withdrawWithheldAuthority"),Nf("transferFeeBasisPoints"),UW("maximumFee")]);let U2=Nm([Nd("instruction"),Nd("transferFeeInstruction"),UW("amount"),Nd("decimals"),UW("fee")]);Nm([Nd("instruction"),Nd("transferFeeInstruction")]),Nm([Nd("instruction"),Nd("transferFeeInstruction"),Nd("numTokenAccounts")]),Nm([Nd("instruction"),Nd("transferFeeInstruction")]),Nm([Nd("instruction"),Nd("transferFeeInstruction"),Nf("transferFeeBasisPoints"),UW("maximumFee")]);let U3=Nm([Nd("instruction"),UW("amount"),Nd("decimals")]);function U8(e,t,r=!1,n=Uj,s=U$){if(!r&&!Lk.isOnCurve(t.toBuffer()))throw new UZ;let[o]=Lk.findProgramAddressSync([t.toBuffer(),n.toBuffer(),e.toBuffer()],s);return o}Nm([Nh("mintAuthorityOption"),UK("mintAuthority"),UW("supply"),Nd("decimals"),(e=>{let t=Nd(e),{encode:r,decode:n}=UH(t);return t.decode=(e,t)=>!!n(e,t),t.encode=(e,t,n)=>r(Number(e),t,n),t})("isInitialized"),Nh("freezeAuthorityOption"),UK("freezeAuthority")]).span;let U6=Nm([Nd("instruction"),UW("amount")]),U4=Nm([Nd("instruction"),UW("amount"),Nd("decimals")]),U5=Nm([Nd("instruction")]),U9=Nm([Nd("instruction")]),U7=Nm([Nd("instruction")]),Fe=Nm([Nd("instruction")]),Ft=Nm([Nd("instruction")]),Fr=Nm([Nd("instruction"),UW("amount")]),Fn=Nm([Nd("instruction"),UK("owner")]),Fi=Nm([Nd("instruction"),UK("owner")]),Fs=Nm([Nd("instruction")]),Fo={USDC:{mint:new Lk("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),decimals:6}};class Fa{generateUsdcTransaction(e,t,r,n=1){return this.generateSplTokenTransaction(e,t,Fo.USDC.mint.toBase58(),r,Fo.USDC.decimals,n)}generateSplTokenTransaction(e,t,r,n,s,o=1){let a=new Lk(e),l=new Lk(t),u=new Lk(r),c=U8(u,a,!1,Uj,U$),d=U8(u,l,!1,Uj,U$),f=BigInt(Math.round(n*10**s)),h=new LG({recentBlockhash:"a3PD566oU2nE9JHwuC897aaT7ispdqaQ63Si6jzyKAg",feePayer:a});for(let e=0;e<o;e++)h.add(function(e,t,r,n,s,o,a=[],l=Uj){let u=function(e,t,r){if(r.length)for(let n of(e.push({pubkey:t,isSigner:!1,isWritable:!1}),r))e.push({pubkey:n instanceof Lk?n:n.publicKey,isSigner:!0,isWritable:!1});else e.push({pubkey:t,isSigner:!0,isWritable:!1});return e}([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0}],n,a),c=eZ.alloc(U3.span);return U3.encode({instruction:Fq.TransferChecked,amount:BigInt(s),decimals:o},c),new Lq({keys:u,programId:l,data:c})}(c,u,d,a,f,s,[]));return h.signatures=[{publicKey:a,signature:null}],this.toBase64(h.serializeMessage())}generatePlainSolanaTransaction(e,t,r,n=1){let s=new Lk(e),o=new Lk(t),a=new LG({recentBlockhash:"a3PD566oU2nE9JHwuC897aaT7ispdqaQ63Si6jzyKAg",feePayer:s});for(let e=0;e<n;e++)a.add(L4.transfer({fromPubkey:s,toPubkey:o,lamports:r}));return a.signatures=[{publicKey:s,signature:null}],this.toBase64(a.serializeMessage())}toBase64(e){let t="";for(let r of e){if("number"!=typeof r)throw Error("Invalid byte value");t+=String.fromCharCode(r)}try{return btoa(t)}catch{return eZ.from(e).toString("base64")}}}class Fl extends sv{makeStateMachine(e){let{getPublicKey:t,generatePlainSolanaTransaction:r}=this.extractDependencies(e);return ia({types:{input:{},context:{},output:{}},actors:{openAppStateMachine:new sU({input:{appName:"Solana"}}).makeStateMachine(e),getPublicKey:n6(t),generatePlainSolanaTransaction:n6(r)},guards:{noInternalError:({context:e})=>null===e._internalState.error,skipOpenApp:({context:e})=>e.input.skipOpenApp},actions:{assignErrorFromEvent:n5({_internalState:e=>({...e.context._internalState,error:new ic(e.event.error instanceof Error?e.event.error.message:String(e.event.error))})})}}).createMachine({id:"GenerateTransactionDeviceAction",initial:"InitialState",context:({input:e})=>({input:e,intermediateValue:{requiredUserInteraction:rP.None},_internalState:{error:null,publicKey:null,serialisedTransaction:null}}),states:{InitialState:{always:[{target:"GetPublicKey",guard:"skipOpenApp"},{target:"OpenAppDeviceAction"}]},OpenAppDeviceAction:{exit:n5({intermediateValue:()=>({requiredUserInteraction:rP.None})}),invoke:{id:"openAppStateMachine",src:"openAppStateMachine",input:()=>({appName:"Solana"}),onSnapshot:{actions:n5({intermediateValue:({event:e})=>e.snapshot.context.intermediateValue})},onDone:{target:"CheckOpenAppDeviceActionResult",actions:n5({_internalState:({event:e,context:t})=>e.output.caseOf({Right:()=>t._internalState,Left:e=>({...t._internalState,error:e})})})}}},CheckOpenAppDeviceActionResult:{always:[{target:"GetPublicKey",guard:"noInternalError"},{target:"Error"}]},GetPublicKey:{entry:n5({intermediateValue:()=>({requiredUserInteraction:rP.None})}),invoke:{id:"getPublicKey",src:"getPublicKey",input:e=>({derivationPath:e.context.input.derivationPath,checkOnDevice:!1}),onDone:{target:"GetPublicKeyResultCheck",actions:n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,publicKey:e.output.data}:{...t._internalState,error:e.output.error}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GetPublicKeyResultCheck:{always:[{target:"GenerateTransaction",guard:"noInternalError"},{target:"Error"}]},GenerateTransaction:{entry:n5({intermediateValue:()=>({requiredUserInteraction:rP.None})}),invoke:{id:"generatePlainSolanaTransaction",src:"generatePlainSolanaTransaction",input:e=>({publicKey:e.context._internalState.publicKey}),onDone:{target:"GenerateTransactionResultCheck",actions:n5({_internalState:({event:e,context:t})=>e.output?{...t._internalState,serialisedTransaction:e.output}:{...t._internalState,error:new ic("Failed to generate transaction")}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GenerateTransactionResultCheck:{always:[{guard:"noInternalError",target:"Success"},{target:"Error"}]},Success:{type:"final"},Error:{type:"final"}},output:({context:e})=>e._internalState.serialisedTransaction?rU(e._internalState.serialisedTransaction):rM(e._internalState.error||new ic("No error or signature available"))})}extractDependencies(e){return{getPublicKey:async t=>e.sendCommand(new Tw(t.input)),generatePlainSolanaTransaction:async e=>Promise.resolve(new Fa().generatePlainSolanaTransaction(e.input.publicKey,e.input.publicKey,1e6,1))}}}let Fu=Object.freeze({OPEN_APP:"signer.sol.steps.openApp",GET_APP_CONFIG:"signer.sol.steps.getAppConfig",INSPECT_TRANSACTION:"signer.sol.steps.inspectTransaction",BUILD_TRANSACTION_CONTEXT:"signer.sol.steps.buildTransactionContext",PROVIDE_TRANSACTION_CONTEXT:"signer.sol.steps.provideTransactionContext",SIGN_TRANSACTION:"signer.sol.steps.signTransaction"}),Fc=class{constructor(e){eY(this,"name","signTransaction"),eY(this,"errorHelper",new kz(Tb,Tx)),eY(this,"args"),this.args=e}getApdu(){let{more:e,extend:t,serializedTransaction:r}=this.args,n=0;return e&&(n|=2),t&&(n|=1),new tl({cla:224,ins:6,p1:1,p2:n}).addBufferToData(r).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e);if(0===t.getUnparsedRemainingLength())return tp({data:rB});let r=t.extractFieldByLength(64);return tp(r?{data:rR(r)}:{error:new td("Signature is missing")})})}};var Fd={exports:{}},Ff={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Fh=()=>{};!function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=Ff,o=(t=e.exports={}).re=[],a=t.safeRe=[],l=t.src=[],u=t.safeSrc=[],c=t.t={},d=0,f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",s],[f,n]],p=e=>{for(let[t,r]of h)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},g=(e,t,r)=>{let n=p(t),s=d++;Fh(e,s,t),c[e]=s,l[s]=t,u[s]=n,o[s]=new RegExp(t,r?"g":void 0),a[s]=new RegExp(n,r?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),g("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${f}+`),g("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),g("FULL",`^${l[c.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),g("LOOSE",`^${l[c.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),g("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",l[c.COERCE],!0),g("COERCERTLFULL",l[c.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Fd,Fd.exports);var Fp=Fd.exports;let Fg=Object.freeze({loose:!0}),Fm=Object.freeze({});var Fy=e=>e?"object"!=typeof e?Fg:e:Fm;let Fb=/^[0-9]+$/,Fv=(e,t)=>{let r=Fb.test(e),n=Fb.test(t);return r&&n&&(e*=1,t*=1),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};var Fx={compareIdentifiers:Fv,rcompareIdentifiers:(e,t)=>Fv(t,e)};let{MAX_LENGTH:Fw,MAX_SAFE_INTEGER:FE}=Ff,{safeRe:FA,t:FS}=Fp,{compareIdentifiers:Fk}=Fx,FI=class e{constructor(t,r){if(r=Fy(r),t instanceof e){if(!!r.loose===t.loose&&!!r.includePrerelease===t.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Fw)throw TypeError(`version is longer than ${Fw} characters`);Fh("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?FA[FS.LOOSE]:FA[FS.FULL]);if(!n)throw TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>FE||this.major<0)throw TypeError("Invalid major version");if(this.minor>FE||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>FE||this.patch<0)throw TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<FE)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Fh("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),Fk(this.major,t.major)||Fk(this.minor,t.minor)||Fk(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return -1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let e=this.prerelease[r],n=t.prerelease[r];if(Fh("prerelease compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return -1;if(e===n)continue;return Fk(e,n)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let e=this.build[r],n=t.build[r];if(Fh("build compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return -1;if(e===n)continue;return Fk(e,n)}while(++r)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?FA[FS.PRERELEASELOOSE]:FA[FS.PRERELEASE]);if(!e||e[1]!==t)throw Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=+!!Number(r);if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===Fk(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var F_=(e,t,r=!1)=>{if(e instanceof FI)return e;try{return new FI(e,t)}catch(e){if(!r)return null;throw e}},FP=(e,t,r)=>new FI(e,r).compare(new FI(t,r)),FC=(e,t,r)=>{let n=new FI(e,r),s=new FI(t,r);return n.compare(s)||n.compareBuild(s)},FO=(e,t,r)=>FP(e,t,r)>0,FT=(e,t,r)=>0>FP(e,t,r),FR=(e,t,r)=>0===FP(e,t,r),FB=(e,t,r)=>0!==FP(e,t,r),FN=(e,t,r)=>FP(e,t,r)>=0,FD=(e,t,r)=>0>=FP(e,t,r),FL=(e,t,r,n)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return FR(e,r,n);case"!=":return FB(e,r,n);case">":return FO(e,r,n);case">=":return FN(e,r,n);case"<":return FT(e,r,n);case"<=":return FD(e,r,n);default:throw TypeError(`Invalid operator: ${t}`)}};let{safeRe:FM,t:FU}=Fp;var FF,Fj,Fz,F$,FH,FV,Fq,FG,FW,FK,FJ=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}};function FZ(){if(FK)return FW;FK=1;let e=/\s+/g;class t{constructor(r,o){if(o=n(o),r instanceof t)return!!o.loose===r.loose&&!!o.includePrerelease===r.includePrerelease?r:new t(r.raw,o);if(r instanceof s)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease,this.raw=r.trim().replace(e," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!g(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(let e of this.set)if(1===e.length&&m(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+e,n=r.get(t);if(n)return n;let a=this.options.loose,m=a?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];o("hyphen replace",e=e.replace(m,P(this.options.includePrerelease))),o("comparator trim",e=e.replace(l[u.COMPARATORTRIM],c)),o("tilde trim",e=e.replace(l[u.TILDETRIM],d)),o("caret trim",e=e.replace(l[u.CARETTRIM],f));let y=e.split(" ").map(e=>b(e,this.options)).join(" ").split(/\s+/).map(e=>_(e,this.options));a&&(y=y.filter(e=>(o("loose invalid filter",e,this.options),!!e.match(l[u.COMPARATORLOOSE])))),o("range list",y);let v=new Map;for(let e of y.map(e=>new s(e,this.options))){if(g(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");let x=[...v.values()];return r.set(t,x),x}intersects(e,r){if(!(e instanceof t))throw TypeError("a Range is required");return this.set.some(t=>y(t,r)&&e.set.some(e=>y(e,r)&&t.every(t=>e.every(e=>t.intersects(e,r)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new a(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(C(this.set[t],e,this.options))return!0;return!1}}FW=t;let r=new FJ,n=Fy,s=FQ(),o=Fh,a=FI,{safeRe:l,t:u,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:f}=Fp,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=Ff,g=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,y=(e,t)=>{let r=!0,n=e.slice(),s=n.pop();for(;r&&n.length;)r=n.every(e=>s.intersects(e,t)),s=n.pop();return r},b=(e,t)=>(o("comp",e,t),o("caret",e=E(e,t)),o("tildes",e=x(e,t)),o("xrange",e=S(e,t)),o("stars",e=I(e,t)),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,x=(e,t)=>e.trim().split(/\s+/).map(e=>w(e,t)).join(" "),w=(e,t)=>{let r=t.loose?l[u.TILDELOOSE]:l[u.TILDE];return e.replace(r,(t,r,n,s,a)=>{let l;return o("tilde",e,t,r,n,s,a),v(r)?l="":v(n)?l=`>=${r}.0.0 <${+r+1}.0.0-0`:v(s)?l=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:a?(o("replaceTilde pr",a),l=`>=${r}.${n}.${s}-${a} <${r}.${+n+1}.0-0`):l=`>=${r}.${n}.${s} <${r}.${+n+1}.0-0`,o("tilde return",l),l})},E=(e,t)=>e.trim().split(/\s+/).map(e=>A(e,t)).join(" "),A=(e,t)=>{o("caret",e,t);let r=t.loose?l[u.CARETLOOSE]:l[u.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,s,a,l)=>{let u;return o("caret",e,t,r,s,a,l),v(r)?u="":v(s)?u=`>=${r}.0.0${n} <${+r+1}.0.0-0`:v(a)?u="0"===r?`>=${r}.${s}.0${n} <${r}.${+s+1}.0-0`:`>=${r}.${s}.0${n} <${+r+1}.0.0-0`:l?(o("replaceCaret pr",l),u="0"===r?"0"===s?`>=${r}.${s}.${a}-${l} <${r}.${s}.${+a+1}-0`:`>=${r}.${s}.${a}-${l} <${r}.${+s+1}.0-0`:`>=${r}.${s}.${a}-${l} <${+r+1}.0.0-0`):(o("no pr"),u="0"===r?"0"===s?`>=${r}.${s}.${a}${n} <${r}.${s}.${+a+1}-0`:`>=${r}.${s}.${a}${n} <${r}.${+s+1}.0-0`:`>=${r}.${s}.${a} <${+r+1}.0.0-0`),o("caret return",u),u})},S=(e,t)=>(o("replaceXRanges",e,t),e.split(/\s+/).map(e=>k(e,t)).join(" ")),k=(e,t)=>{e=e.trim();let r=t.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return e.replace(r,(r,n,s,a,l,u)=>{o("xRange",e,r,n,s,a,l,u);let c=v(s),d=c||v(a),f=d||v(l);return"="===n&&f&&(n=""),u=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&f?(d&&(a=0),l=0,">"===n?(n=">=",d?(s=+s+1,a=0):a=+a+1,l=0):"<="===n&&(n="<",d?s=+s+1:a=+a+1),"<"===n&&(u="-0"),r=`${n+s}.${a}.${l}${u}`):d?r=`>=${s}.0.0${u} <${+s+1}.0.0-0`:f&&(r=`>=${s}.${a}.0${u} <${s}.${+a+1}.0-0`),o("xRange return",r),r})},I=(e,t)=>(o("replaceStars",e,t),e.trim().replace(l[u.STAR],"")),_=(e,t)=>(o("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?u.GTE0PRE:u.GTE0],"")),P=e=>(t,r,n,s,o,a,l,u,c,d,f,h)=>(r=v(n)?"":v(s)?`>=${n}.0.0${e?"-0":""}`:v(o)?`>=${n}.${s}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`,u=v(c)?"":v(d)?`<${+c+1}.0.0-0`:v(f)?`<${c}.${+d+1}.0-0`:h?`<=${c}.${d}.${f}-${h}`:e?`<${c}.${d}.${+f+1}-0`:`<=${u}`,`${r} ${u}`.trim()),C=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(o(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0};return FW}function FQ(){if(hv)return hb;hv=1;let e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(n,s){if(s=r(s),n instanceof t){if(!!s.loose===n.loose)return n;n=n.value}a("comparator",n=n.trim().split(/\s+/).join(" "),s),this.options=s,this.loose=!!s.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(t){let r=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],o=t.match(r);if(!o)throw TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new l(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(a("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new l(t,this.options)}catch{return!1}return o(t,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(e.value,n).test(this.value):""===e.operator?""===e.value||new u(this.value,n).test(e.semver):!((n=r(n)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||o(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||o(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}hb=t;let r=Fy,{safeRe:n,t:s}=Fp,o=FL,a=Fh,l=FI,u=FZ();return hb}let FX=FZ();var FY=(e,t,r)=>{try{t=new FX(t,r)}catch{return!1}return t.test(e)};let F0=FZ(),F1=FZ(),F2=FZ(),F3=FZ(),F8=FZ(),F6=FQ(),{ANY:F4}=F6,F5=FZ();var F9=(e,t,r,n)=>{let s,o,a,l,u;switch(e=new FI(e,n),t=new F5(t,n),r){case">":s=FO,o=FD,a=FT,l=">",u=">=";break;case"<":s=FT,o=FN,a=FO,l="<",u="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(FY(e,t,n))return!1;for(let r=0;r<t.set.length;++r){let c=t.set[r],d=null,f=null;if(c.forEach(e=>{e.semver===F4&&(e=new F6(">=0.0.0")),d=d||e,f=f||e,s(e.semver,d.semver,n)?d=e:a(e.semver,f.semver,n)&&(f=e)}),d.operator===l||d.operator===u||(!f.operator||f.operator===l)&&o(e,f.semver)||f.operator===u&&a(e,f.semver))return!1}return!0};let F7=FZ(),je=FZ(),jt=FQ(),{ANY:jr}=jt,jn=[new jt(">=0.0.0-0")],ji=[new jt(">=0.0.0")],js=(e,t,r)=>{let n,s,o;if(e===t)return!0;if(1===e.length&&e[0].semver===jr){if(1===t.length&&t[0].semver===jr)return!0;e=r.includePrerelease?jn:ji}if(1===t.length&&t[0].semver===jr){if(r.includePrerelease)return!0;t=ji}let a=new Set;for(let t of e)">"===t.operator||">="===t.operator?n=jo(n,t,r):"<"===t.operator||"<="===t.operator?s=ja(s,t,r):a.add(t.semver);if(a.size>1||n&&s&&((o=FP(n.semver,s.semver,r))>0||0===o&&(">="!==n.operator||"<="!==s.operator)))return null;for(let e of a){if(n&&!FY(e,String(n),r)||s&&!FY(e,String(s),r))return null;for(let n of t)if(!FY(e,String(n),r))return!1;return!0}let l,u,c,d,f=!!s&&!r.includePrerelease&&!!s.semver.prerelease.length&&s.semver,h=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver;for(let e of(f&&1===f.prerelease.length&&"<"===s.operator&&0===f.prerelease[0]&&(f=!1),t)){if(d=d||">"===e.operator||">="===e.operator,c=c||"<"===e.operator||"<="===e.operator,n){if(h&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===h.major&&e.semver.minor===h.minor&&e.semver.patch===h.patch&&(h=!1),">"===e.operator||">="===e.operator){if((l=jo(n,e,r))===e&&l!==n)return!1}else if(">="===n.operator&&!FY(n.semver,String(e),r))return!1}if(s){if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),"<"===e.operator||"<="===e.operator){if((u=ja(s,e,r))===e&&u!==s)return!1}else if("<="===s.operator&&!FY(s.semver,String(e),r))return!1}if(!e.operator&&(s||n)&&0!==o)return!1}return!(n&&c&&!s&&0!==o||s&&d&&!n&&0!==o||h||f)},jo=(e,t,r)=>{if(!e)return t;let n=FP(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},ja=(e,t,r)=>{if(!e)return t;let n=FP(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};var jl={parse:F_,valid:(e,t)=>{let r=F_(e,t);return r?r.version:null},clean:(e,t)=>{let r=F_(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},inc:(e,t,r,n,s)=>{"string"==typeof r&&(s=n,n=r,r=void 0);try{return new FI(e instanceof FI?e.version:e,r).inc(t,n,s).version}catch{return null}},diff:(e,t)=>{let r=F_(e,null,!0),n=F_(t,null,!0),s=r.compare(n);if(0===s)return null;let o=s>0,a=o?r:n,l=o?n:r,u=!!a.prerelease.length;if(l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(a))return l.minor&&!l.patch?"minor":"patch"}let c=u?"pre":"";return r.major!==n.major?c+"major":r.minor!==n.minor?c+"minor":r.patch!==n.patch?c+"patch":"prerelease"},major:(e,t)=>new FI(e,t).major,minor:(e,t)=>new FI(e,t).minor,patch:(e,t)=>new FI(e,t).patch,prerelease:(e,t)=>{let r=F_(e,t);return r&&r.prerelease.length?r.prerelease:null},compare:FP,rcompare:(e,t,r)=>FP(t,e,r),compareLoose:(e,t)=>FP(e,t,!0),compareBuild:FC,sort:(e,t)=>e.sort((e,r)=>FC(e,r,t)),rsort:(e,t)=>e.sort((e,r)=>FC(r,e,t)),gt:FO,lt:FT,eq:FR,neq:FB,gte:FN,lte:FD,cmp:FL,coerce:(e,t)=>{if(e instanceof FI)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let n,s=t.includePrerelease?FM[FU.COERCERTLFULL]:FM[FU.COERCERTL];for(;(n=s.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),s.lastIndex=n.index+n[1].length+n[2].length;s.lastIndex=-1}else r=e.match(t.includePrerelease?FM[FU.COERCEFULL]:FM[FU.COERCE]);if(null===r)return null;let n=r[2],s=r[3]||"0",o=r[4]||"0",a=t.includePrerelease&&r[5]?`-${r[5]}`:"",l=t.includePrerelease&&r[6]?`+${r[6]}`:"";return F_(`${n}.${s}.${o}${a}${l}`,t)},Comparator:FQ(),Range:FZ(),satisfies:FY,toComparators:(e,t)=>new F0(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" ")),maxSatisfying:(e,t,r)=>{let n=null,s=null,o=null;try{o=new F1(t,r)}catch{return null}return e.forEach(e=>{o.test(e)&&(!n||-1===s.compare(e))&&(s=new FI(n=e,r))}),n},minSatisfying:(e,t,r)=>{let n=null,s=null,o=null;try{o=new F2(t,r)}catch{return null}return e.forEach(e=>{o.test(e)&&(!n||1===s.compare(e))&&(s=new FI(n=e,r))}),n},minVersion:(e,t)=>{e=new F3(e,t);let r=new FI("0.0.0");if(e.test(r)||(r=new FI("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let n=e.set[t],s=null;n.forEach(e=>{let t=new FI(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!s||FO(t,s))&&(s=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),s&&(!r||FO(r,s))&&(r=s)}return r&&e.test(r)?r:null},validRange:(e,t)=>{try{return new F8(e,t).range||"*"}catch{return null}},outside:F9,gtr:(e,t,r)=>F9(e,t,">",r),ltr:(e,t,r)=>F9(e,t,"<",r),intersects:(e,t,r)=>(e=new F7(e,r),t=new F7(t,r),e.intersects(t,r)),simplifyRange:(e,t,r)=>{let n=[],s=null,o=null,a=e.sort((e,t)=>FP(e,t,r));for(let e of a)FY(e,t,r)?(o=e,s||(s=e)):(o&&n.push([s,o]),o=null,s=null);s&&n.push([s,null]);let l=[];for(let[e,t]of n)e===t?l.push(e):t||e!==a[0]?t?e===a[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");let u=l.join(" || "),c="string"==typeof t.raw?t.raw:String(t);return u.length<c.length?u:t},subset:(e,t,r={})=>{if(e===t)return!0;e=new je(e,r),t=new je(t,r);let n=!1;r:for(let s of e.set){for(let e of t.set){let t=js(s,e,r);if(n=n||null!==t,t)continue r}if(n)return!1}return!0},SemVer:FI,re:Fp.re,src:Fp.src,tokens:Fp.t,SEMVER_SPEC_VERSION:Ff.SEMVER_SPEC_VERSION,RELEASE_TYPES:Ff.RELEASE_TYPES,compareIdentifiers:Fx.compareIdentifiers,rcompareIdentifiers:Fx.rcompareIdentifiers};let ju=class{constructor(e,t){if(eY(this,"isCompatible",!0),eY(this,"version","0.0.1"),eY(this,"modelId"),this.modelId=e.deviceModelId,e.sessionStateType===sx.Connected||"Solana"!==e.currentApp.name){this.isCompatible=!1;return}"Solana"===e.currentApp.name?this.version=e.currentApp.version:this.version=t.version}withMinVersionInclusive(e){return jl.gte(this.version,e)||(this.isCompatible=!1),this}withMinVersionExclusive(e){return jl.gt(this.version,e)||(this.isCompatible=!1),this}excludeDeviceModel(e){return this.modelId===e&&(this.isCompatible=!1),this}check(){return this.isCompatible}},jc=e=>e.equals(Uj)||e.equals(Uz),jd=e=>{try{return e()}catch{return null}},jf=[{when:({programId:e})=>e.equals(U$),decode:({ixMeta:e,message:t})=>{let r=e.accountKeyIndexes??[],n=e=>void 0!==r[e]?t.allKeys[r[e]]??null:null,s=n(1),o=n(3);if(!s||!o)return null;let a=r.map(e=>t.allKeys[e]).filter(e=>!!e),l=a.find(e=>e.equals(Uz))??a.find(e=>e.equals(Uj))??null,u=e=>e.equals(L4.programId)||e.equals(Uj)||e.equals(Uz)||e.equals(U$)||e.equals(LJ),c=a.filter(e=>!u(e)&&!e.equals(s)&&!e.equals(o)),d=(e,t)=>U8(o,e,!0,t,U$);if(l){for(let e of c)if(d(e,l).equals(s))return{createATA:{address:e.toBase58(),mintAddress:o.toBase58()}}}for(let e of c)if(d(e,Uj).equals(s)||d(e,Uz).equals(s))return{createATA:{address:e.toBase58(),mintAddress:o.toBase58()}};return null}},{when:({programId:e})=>e.equals(Uz),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{destination:r}}=function(e,t){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==U2.span)throw new UY;let{keys:{source:r,mint:n,destination:s,authority:o,signers:a},data:l}=function({programId:e,keys:[t,r,n,s,...o],data:a}){let{instruction:l,transferFeeInstruction:u,amount:c,decimals:d,fee:f}=U2.decode(a);return{programId:e,keys:{source:t,mint:r,destination:n,authority:s,signers:o},data:{instruction:l,transferFeeInstruction:u,amount:c,decimals:d,fee:f}}}(e);if(l.instruction!==Fq.TransferFeeExtension||l.transferFeeInstruction!==FG.TransferCheckedWithFee)throw new U0;if(!n)throw new UX;return{programId:t,keys:{source:r,mint:n,destination:s,authority:o,signers:a||null},data:l}}(e,t);return{tokenAddress:r.pubkey.toBase58()}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{destination:r}}=function(e,t=Uj){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==Fr.span)throw new UY;let{keys:{source:r,destination:n,owner:s,multiSigners:o},data:a}=function({programId:e,keys:[t,r,n,...s],data:o}){return{programId:e,keys:{source:t,destination:r,owner:n,multiSigners:s},data:Fr.decode(o)}}(e);if(a.instruction!==Fq.Transfer)throw new U0;if(!r||!n||!s)throw new UX;return{programId:t,keys:{source:r,destination:n,owner:s,multiSigners:o},data:a}}(e,t);return{tokenAddress:r.pubkey.toBase58()}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{destination:r}}=function(e,t=Uj){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==U3.span)throw new UY;let{keys:{source:r,mint:n,destination:s,owner:o,multiSigners:a},data:l}=function({programId:e,keys:[t,r,n,s,...o],data:a}){return{programId:e,keys:{source:t,mint:r,destination:n,owner:s,multiSigners:o},data:U3.decode(a)}}(e);if(l.instruction!==Fq.TransferChecked)throw new U0;if(!r||!n||!s||!o)throw new UX;return{programId:t,keys:{source:r,mint:n,destination:s,owner:o,multiSigners:a},data:l}}(e,t);return{tokenAddress:r.pubkey.toBase58()}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{account:r,mint:n}}=function(e,t=Uj){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==U9.span)throw new UY;let{keys:{account:r,mint:n,owner:s,rent:o},data:a}=function({programId:e,keys:[t,r,n,s],data:o}){return{programId:e,keys:{account:t,mint:r,owner:n,rent:s},data:U9.decode(o)}}(e);if(a.instruction!==Fq.InitializeAccount)throw new U0;if(!r||!n||!s||!o)throw new UX;return{programId:t,keys:{account:r,mint:n,owner:s,rent:o},data:a}}(e,t);return{createATA:{address:r.pubkey.toBase58(),mintAddress:n.pubkey.toBase58()}}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{account:r,mint:n}}=function(e,t=Uj){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==Fn.span)throw new UY;let{keys:{account:r,mint:n,rent:s},data:o}=function({programId:e,keys:[t,r,n],data:s}){return{programId:e,keys:{account:t,mint:r,rent:n},data:Fn.decode(s)}}(e);if(o.instruction!==Fq.InitializeAccount2)throw new U0;if(!r||!n||!s)throw new UX;return{programId:t,keys:{account:r,mint:n,rent:s},data:o}}(e,t);return{createATA:{address:r.pubkey.toBase58(),mintAddress:n.pubkey.toBase58()}}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{account:r,mint:n}}=function(e,t=Uj){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==Fi.span)throw new UY;let{keys:{account:r,mint:n},data:s}=function({programId:e,keys:[t,r],data:n}){return{programId:e,keys:{account:t,mint:r},data:Fi.decode(n)}}(e);if(s.instruction!==Fq.InitializeAccount3)throw new U0;if(!r||!n)throw new UX;return{programId:t,keys:{account:r,mint:n},data:s}}(e,t);return{createATA:{address:r.pubkey.toBase58(),mintAddress:n.pubkey.toBase58()}}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{account:r}}=function(e,t){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==Fs.span)throw new UY;let{keys:{account:r},data:n}=function({programId:e,keys:[t],data:r}){let{instruction:n}=Fs.decode(r);return{programId:e,keys:{account:t},data:{instruction:n}}}(e);if(n.instruction!==Fq.InitializeImmutableOwner)throw new U0;if(!r)throw new UX;return{programId:t,keys:{account:r},data:n}}(e,t);return{tokenAddress:r.pubkey.toBase58()}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{account:r}}=function(e,t=Uj){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==U5.span)throw new UY;let{keys:{account:r,destination:n,authority:s,multiSigners:o},data:a}=function({programId:e,keys:[t,r,n,...s],data:o}){return{programId:e,keys:{account:t,destination:r,authority:n,multiSigners:s},data:U5.decode(o)}}(e);if(a.instruction!==Fq.CloseAccount)throw new U0;if(!r||!n||!s)throw new UX;return{programId:t,keys:{account:r,destination:n,authority:s,multiSigners:o},data:a}}(e,t);return{tokenAddress:r.pubkey.toBase58()}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{account:r}}=function(e,t=Uj){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==U7.span)throw new UY;let{keys:{account:r},data:n}=function({programId:e,keys:[t],data:r}){return{programId:e,keys:{account:t},data:U7.decode(r)}}(e);if(n.instruction!==Fq.SyncNative)throw new U0;if(!r)throw new UX;return{programId:t,keys:{account:r},data:n}}(e,t);return{tokenAddress:r.pubkey.toBase58()}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{account:r}}=function(e,t=Uj){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==U4.span)throw new UY;let{keys:{account:r,mint:n,owner:s,multiSigners:o},data:a}=function({programId:e,keys:[t,r,n,...s],data:o}){return{programId:e,keys:{account:t,mint:r,owner:n,multiSigners:s},data:U4.decode(o)}}(e);if(a.instruction!==Fq.BurnChecked)throw new U0;if(!r||!n||!s)throw new UX;return{programId:t,keys:{account:r,mint:n,owner:s,multiSigners:o},data:a}}(e,t);return{tokenAddress:r.pubkey.toBase58()}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{account:r}}=function(e,t=Uj){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==U6.span)throw new UY;let{keys:{account:r,mint:n,owner:s,multiSigners:o},data:a}=function({programId:e,keys:[t,r,n,...s],data:o}){return{programId:e,keys:{account:t,mint:r,owner:n,multiSigners:s},data:U6.decode(o)}}(e);if(a.instruction!==Fq.Burn)throw new U0;if(!r||!n||!s)throw new UX;return{programId:t,keys:{account:r,mint:n,owner:s,multiSigners:o},data:a}}(e,t);return{tokenAddress:r.pubkey.toBase58()}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{account:r}}=function(e,t=Uj){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==Fe.span)throw new UY;let{keys:{account:r,mint:n,authority:s,multiSigners:o},data:a}=function({programId:e,keys:[t,r,n,...s],data:o}){return{programId:e,keys:{account:t,mint:r,authority:n,multiSigners:s},data:Fe.decode(o)}}(e);if(a.instruction!==Fq.FreezeAccount)throw new U0;if(!r||!n||!s)throw new UX;return{programId:t,keys:{account:r,mint:n,authority:s,multiSigners:o},data:a}}(e,t);return{tokenAddress:r.pubkey.toBase58()}})},{when:({programId:e})=>jc(e),decode:({instruction:e,programId:t})=>jd(()=>{let{keys:{account:r}}=function(e,t=Uj){if(!e.programId.equals(t))throw new UQ;if(e.data.length!==Ft.span)throw new UY;let{keys:{account:r,mint:n,authority:s,multiSigners:o},data:a}=function({programId:e,keys:[t,r,n,...s],data:o}){return{programId:e,keys:{account:t,mint:r,authority:n,multiSigners:s},data:Ft.decode(o)}}(e);if(a.instruction!==Fq.ThawAccount)throw new U0;if(!r||!n||!s)throw new UX;return{programId:t,keys:{account:r,mint:n,authority:s,multiSigners:o},data:a}}(e,t);return{tokenAddress:r.pubkey.toBase58()}})},{when:({programId:e})=>e.equals(U$)||e.equals(Uj)||e.equals(Uz),decode:()=>null}];var jh=((ez=jh||{}).STANDARD="Standard",ez.SPL="SPL",ez);let jp=e=>new UU(e,{commitment:"confirmed"}),jg=e=>!!e&&(e.equals(U$)||e.equals(Uj)||e.equals(Uz)),jm=class e{constructor(e){eY(this,"RPCURL"),this.RPCURL=e}async inspectTransactionType(t,r,n){try{let s=await e.normaliseMessage(t,this.RPCURL||"https://api.mainnet-beta.solana.com/");if(r||n)return{transactionType:s.compiledInstructions.some(e=>jg(s.allKeys[e.programIdIndex]))?"SPL":"Standard",data:{...r?{tokenAddress:r}:{},...n?{createATA:n}:{}}};let o=!1,a={};for(let e of s.compiledInstructions){let t=s.allKeys[e.programIdIndex];if(!t)continue;jg(t)&&(o=!0);let r=e.accountKeyIndexes.map(e=>s.allKeys[e]).filter(e=>!!e),n=new Lq({programId:t,keys:r.map(e=>({pubkey:e,isSigner:!1,isWritable:!1})),data:TO.Buffer.from(e.data)}),l={programId:t,ixMeta:e,message:s,instruction:n};for(let e of jf){if(!e.when(l))continue;let t=e.decode(l);t&&(t.createATA&&!a.createATA?a={...a,createATA:t.createATA}:!t.tokenAddress||a.tokenAddress||a.createATA||(a={...a,tokenAddress:t.tokenAddress}))}}return a.createATA||a.tokenAddress?{transactionType:"SPL",data:a}:o?{transactionType:"SPL",data:{}}:{transactionType:"Standard",data:{}}}catch{return{transactionType:"Standard",data:{}}}}static async normaliseMessage(t,r){let n=e.tryDeserialiseVersioned(t);if(n){let t=n.message,s=r?await e.resolveLookedUpAddressesFromMessage(t,r):void 0,o=[...t.staticAccountKeys,...(null==s?void 0:s.writable)??[],...(null==s?void 0:s.readonly)??[]];return{compiledInstructions:t.compiledInstructions.map(e=>{let t,r=Array.from(e.accounts??e.accountKeyIndexes??[]);return t=e.data instanceof Uint8Array?e.data:"string"==typeof e.data?TO.Buffer.from(e.data,"base64"):Uint8Array.from(e.data??[]),{programIdIndex:e.programIdIndex,accountKeyIndexes:r,data:t}}),allKeys:o}}let s=LG.from(t),o=new Map,a=e=>{if(!e)return;let t=e.toBase58();o.has(t)||o.set(t,e)};for(let e of(a(s.feePayer??null),s.instructions))for(let t of(a(e.programId),e.keys))a(t.pubkey);let l=Array.from(o.values()),u=new Map(l.map((e,t)=>[e.toBase58(),t]));return{compiledInstructions:s.instructions.map(e=>({programIdIndex:u.get(e.programId.toBase58())??-1,accountKeyIndexes:e.keys.map(e=>u.get(e.pubkey.toBase58())??-1),data:e.data})),allKeys:l}}static tryDeserialiseVersioned(e){try{return LW.deserialize(e)}catch{try{return{message:L$.deserialize(e)}}catch{return null}}}static async resolveLookedUpAddressesFromMessage(e,t){let r=e.addressTableLookups??[];if(!r.length)return;let n=[],s=[];for(let e of r){let r=(await jp(t).getAddressLookupTable(e.accountKey)).value;if(!r)continue;let o=r.state.addresses;for(let t of e.writableIndexes??[]){let e=o[t];e&&n.push(e)}for(let t of e.readonlyIndexes??[]){let e=o[t];e&&s.push(e)}}return{writable:n,readonly:s}}},jy=class{constructor(){eY(this,"name","getChallenge"),eY(this,"errorHelper",new kz(Tb,Tx))}getApdu(){return new tl({cla:224,ins:32,p1:0,p2:0}).build()}parseResponse(e){return rC.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{let t=new tc(e);return!1===t.testMinimalLength(4)?tp({error:new td("Challenge key is missing")}):tp({data:{challenge:t.encodeToHexaString(t.extractFieldByLength(4))}})})}},jb=class{constructor(e,t){this.api=e,this.args=t}async run(){let e,{contextModule:t,options:r}=this.args,n=this.api.getDeviceSessionState(),s=await this.api.sendCommand(new jy);return tg(s)&&(e=s.data.challenge),(await t.getSolanaContext({deviceModelId:n.deviceModelId,tokenAddress:r.tokenAddress,challenge:e,createATA:r.createATA,tokenInternalId:r.tokenInternalId,templateId:r.templateId})).caseOf({Left:e=>{throw e},Right:e=>({tlvDescriptor:e.tlvDescriptor,trustedNamePKICertificate:e.trustedNamePKICertificate,loadersResults:e.loadersResults})})}};class jv{constructor(e){eY(this,"errorHelper",new kz(Tb,Tx)),eY(this,"name","ProvideTLVTransactionInstructionDescriptor"),this.args=e}getApdu(){if("empty"===this.args.kind)return new tl({cla:224,ins:34,p1:128*!this.args.isFirstMessage,p2:0}).build();let{dataHex:e,signatureHex:t,isFirstMessage:r}=this.args,n=new tl({cla:224,ins:34,p1:128*!r,p2:0}),s=t.length/2;if(s<70||s>72||t.length%2!=0)throw Error(`Invalid signature length: ${s} bytes`);let o=e.length/2+1+1+s;if(o>255)throw Error(`Descriptor payload too large for short APDU: ${o} > 255`);return n.addHexaStringToData(e).add8BitUIntToData(this.args.swapSignatureTag?21:8).add8BitUIntToData(s).addHexaStringToData(t),n.build()}parseResponse(e){return this.errorHelper.getError(e)||(0!==e.data.length?tp({error:new td("Unexpected data in response")}):tp({data:void 0}))}}class jx{constructor(e){eY(this,"name","provideTLVDescriptor"),eY(this,"errorHelper",new kz(Tb,Tx)),this.args=e}getApdu(){return new tl({cla:224,ins:33,p1:0,p2:0}).addBufferToData(this.args.payload).build()}parseResponse(e){return this.errorHelper.getError(e)||(0!==e.data.length?tp({error:new td("Unexpected data in response")}):tp({data:void 0}))}}class jw{static async normaliseMessage(e){return jm.normaliseMessage(e)}}let jE=class{constructor(e,t,r=jw){this.api=e,this.context=t,this.normaliser=r}async run(){let{tlvDescriptor:e,trustedNamePKICertificate:t,loadersResults:r,transactionBytes:n}=this.context;for(let s of(await this.api.sendCommand(new rE({certificate:t.payload,keyUsage:t.keyUsageNumber})),await this.api.sendCommand(new jx({payload:e})),r))switch(s.type){case AA.SOLANA_TOKEN:{let e=r.find(e=>e.type===AA.SOLANA_TOKEN);e&&await this.provideTokenMetadataContext(e);break}case AA.SOLANA_LIFI:{let e=r.find(e=>e.type===AA.SOLANA_LIFI);e&&await this.provideSwapContext(e,n)}case AA.ERROR:}return rB}async provideTokenMetadataContext(e){let{payload:t,certificate:r}=e;if(t&&r){if(!tg(await this.api.sendCommand(new rE({certificate:r.payload,keyUsage:r.keyUsageNumber}))))throw Error("[SignerSolana] ProvideSolanaTransactionContextTask: Failed to send tokenMetadataCertificate to device, latest firmware version required");await this.api.sendCommand(new jv({kind:"descriptor",dataHex:t.solanaTokenDescriptor.data,signatureHex:t.solanaTokenDescriptor.signature,isFirstMessage:!0,swapSignatureTag:!1}))}}async provideSwapContext(e,t){var r;let n=e.payload;if(n){let e=await this.normaliser.normaliseMessage(t);for(let[t,s]of e.compiledInstructions.entries()){let o=null==(r=e.allKeys[s.programIdIndex])?void 0:r.toBase58(),a=o?n[o]:void 0,l=a&&a.signatures.test;a&&l?await this.api.sendCommand(new jv({kind:"descriptor",dataHex:a.data,signatureHex:l,isFirstMessage:0===t,swapSignatureTag:!0})):await this.api.sendCommand(new jv({kind:"empty",isFirstMessage:0===t,swapSignatureTag:!0}))}}}},jA=class{constructor(e,t){this.api=e,this.args=t}async run(){let{sendingData:e,derivationPath:t,commandFactory:r}=this.args,n=k$.splitPath(t),s=new to(e.length+2+4*n.length);s.add8BitUIntToData(1),s.add8BitUIntToData(n.length),n.forEach(e=>s.add32BitUIntToData(e)),s.addBufferToData(e);let o=s.build();return await new TS(this.api,{data:o,commandFactory:r}).run()}};class jS extends sv{makeStateMachine(e){let{signTransaction:t,getAppConfig:r,buildContext:n,provideContext:s,inspectTransaction:o}=this.extractDependencies(e);return ia({types:{input:{},context:{},output:{}},actors:{openAppStateMachine:new sU({input:{appName:"Solana"}}).makeStateMachine(e),getAppConfig:n6(r),inspectTransaction:n6(({input:e})=>o({serializedTransaction:e.serializedTransaction,resolutionContext:e.resolutionContext,rpcUrl:e.rpcUrl})),buildContext:n6(n),provideContext:n6(s),signTransaction:n6(t)},guards:{noInternalError:({context:e})=>null===e._internalState.error,skipOpenApp:({context:e})=>{var t;return(null==(t=e.input.transactionOptions)?void 0:t.skipOpenApp)||!1},isSPLSupported:({context:t})=>new ju(e.getDeviceSessionState(),t._internalState.appConfig).withMinVersionExclusive("1.4.0").excludeDeviceModel(rm.NANO_S).check(),isAnSPLTransaction:({context:e})=>{var t;return(null==(t=e._internalState.inspectorResult)?void 0:t.transactionType)===jh.SPL},shouldSkipInspection:({context:e})=>{var t;return null===e._internalState.error&&!!(null!=(t=e.input.transactionOptions)&&t.transactionResolutionContext)}},actions:{assignErrorFromEvent:n5({_internalState:e=>({...e.context._internalState,error:new ic(e.event.error instanceof Error?e.event.error.message:String(e.event.error))})})}}).createMachine({id:"SignTransactionDeviceAction",initial:"InitialState",context:({input:e})=>({input:e,intermediateValue:{requiredUserInteraction:rP.None,step:Fu.OPEN_APP},_internalState:{error:null,signature:null,appConfig:null,solanaTransactionContext:null,inspectorResult:null}}),states:{InitialState:{always:[{target:"GetAppConfig",guard:"skipOpenApp"},{target:"OpenAppDeviceAction"}]},OpenAppDeviceAction:{entry:n5({intermediateValue:()=>({requiredUserInteraction:rP.None,step:Fu.OPEN_APP})}),invoke:{id:"openAppStateMachine",src:"openAppStateMachine",input:()=>({appName:"Solana"}),onSnapshot:{actions:n5({intermediateValue:({event:e})=>({...e.snapshot.context.intermediateValue,step:Fu.OPEN_APP})})},onDone:{target:"CheckOpenAppDeviceActionResult",actions:n5({_internalState:({event:e,context:t})=>e.output.caseOf({Right:()=>t._internalState,Left:e=>({...t._internalState,error:e})})})}}},CheckOpenAppDeviceActionResult:{always:[{target:"GetAppConfig",guard:"noInternalError"},{target:"Error"}]},GetAppConfig:{entry:n5({intermediateValue:()=>({requiredUserInteraction:rP.None,step:Fu.GET_APP_CONFIG})}),invoke:{id:"getAppConfig",src:"getAppConfig",onDone:{target:"GetAppConfigResultCheck",actions:n5({_internalState:({event:e,context:t})=>tg(e.output)?{...t._internalState,appConfig:e.output.data}:{...t._internalState,error:e.output.error}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GetAppConfigResultCheck:{always:[{target:"InspectTransaction",guard:"noInternalError"},{target:"Error"}]},InspectTransaction:{entry:n5({intermediateValue:()=>({requiredUserInteraction:rP.None,step:Fu.INSPECT_TRANSACTION})}),invoke:{id:"inspectTransaction",src:"inspectTransaction",input:({context:e})=>{var t,r;return{serializedTransaction:e.input.transaction,resolutionContext:null==(t=e.input.transactionOptions)?void 0:t.transactionResolutionContext,rpcUrl:null==(r=e.input.transactionOptions)?void 0:r.solanaRPCURL}},onDone:{target:"AfterInspect",actions:n5({_internalState:({context:e,event:t})=>({...e._internalState,inspectorResult:t.output})})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},AfterInspect:{always:[{target:"BuildContext",guard:"isAnSPLTransaction"},{target:"SignTransaction",guard:"noInternalError"},{target:"Error"}]},BuildContext:{entry:n5({intermediateValue:()=>({requiredUserInteraction:rP.None,step:Fu.BUILD_TRANSACTION_CONTEXT})}),invoke:{id:"buildContext",src:"buildContext",input:({context:e})=>{var t,r,n,s,o;let a=null==(t=e._internalState.inspectorResult)?void 0:t.data;return{contextModule:e.input.contextModule,options:{tokenAddress:null==a?void 0:a.tokenAddress,createATA:null==a?void 0:a.createATA,tokenInternalId:null==(n=null==(r=e.input.transactionOptions)?void 0:r.transactionResolutionContext)?void 0:n.tokenInternalId,templateId:null==(o=null==(s=e.input.transactionOptions)?void 0:s.transactionResolutionContext)?void 0:o.templateId}}},onDone:{target:"ProvideContext",actions:[n5({_internalState:({event:e,context:t})=>({...t._internalState,solanaTransactionContext:{tlvDescriptor:e.output.tlvDescriptor,trustedNamePKICertificate:e.output.trustedNamePKICertificate,loadersResults:e.output.loadersResults}})})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ProvideContext:{entry:n5({intermediateValue:()=>({requiredUserInteraction:rP.None,step:Fu.PROVIDE_TRANSACTION_CONTEXT})}),invoke:{id:"provideContext",src:"provideContext",input:({context:e})=>{if(!e._internalState.solanaTransactionContext)throw new ic("Solana transaction context is not available");return{...e._internalState.solanaTransactionContext,transactionBytes:e.input.transaction}},onDone:{target:"ProvideContextResultCheck"},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ProvideContextResultCheck:{always:[{target:"SignTransaction",guard:"noInternalError"},{target:"Error"}]},SignTransaction:{entry:n5({intermediateValue:{requiredUserInteraction:rP.SignTransaction,step:Fu.SIGN_TRANSACTION}}),invoke:{id:"signTransaction",src:"signTransaction",input:({context:e})=>({derivationPath:e.input.derivationPath,serializedTransaction:e.input.transaction}),onDone:{target:"SignTransactionResultCheck",actions:[n5({_internalState:({event:e,context:t})=>{if(!tg(e.output))return{...t._internalState,error:e.output.error};let r=e.output.data.extract();return e.output.data.isJust()&&r instanceof Uint8Array?{...t._internalState,signature:r}:{...t._internalState,error:new ic("No Signature available")}},intermediateValue:{requiredUserInteraction:rP.None,step:Fu.SIGN_TRANSACTION}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},SignTransactionResultCheck:{always:[{guard:"noInternalError",target:"Success"},{target:"Error"}]},Success:{type:"final"},Error:{type:"final"}},output:({context:e})=>e._internalState.signature?rU(e._internalState.signature):rM(e._internalState.error||new ic("No error or signature available"))})}extractDependencies(e){return{getAppConfig:async()=>e.sendCommand(new TC),buildContext:async t=>new jb(e,t.input).run(),provideContext:async t=>new jE(e,t.input).run(),signTransaction:async t=>new jA(e,{commandFactory:e=>new Fc({serializedTransaction:e.chunkedData,more:e.more,extend:e.extend}),derivationPath:t.input.derivationPath,sendingData:t.input.serializedTransaction}).run(),inspectTransaction:async e=>{var t,r;return Promise.resolve(new jm(e.rpcUrl).inspectTransactionType(e.serializedTransaction,null==(t=e.resolutionContext)?void 0:t.tokenAddress,null==(r=e.resolutionContext)?void 0:r.createATA))}}}}var jk=Object.defineProperty,jI=Object.getOwnPropertyDescriptor,j_=(e,t)=>(r,n)=>t(r,n,e);let jP=class{constructor(e,t,r){this.dmk=e,this.sessionId=t,this.contextModule=r}getAddress(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new ov({input:{command:new Tw(e),appName:"Solana",requiredUserInteraction:e.checkOnDevice?rP.VerifyAddress:rP.None,skipOpenApp:e.skipOpenApp}})})}signTransaction(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new jS({input:{derivationPath:e.derivationPath,transaction:e.transaction,transactionOptions:e.solanaTransactionOptionalConfig,contextModule:this.contextModule}})})}generateTransaction(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new Fl({input:{derivationPath:e.derivationPath,skipOpenApp:e.skipOpenApp,contextModule:this.contextModule}})})}signMessage(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new sF({input:{task:async t=>new TI(t,{derivationPath:e.derivationPath,sendingData:new TextEncoder().encode(e.message)}).run(),appName:"Solana",requiredUserInteraction:rP.SignPersonalMessage,skipOpenApp:e.skipOpenApp}})})}getAppConfiguration(){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new ov({input:{command:new TC,appName:"Solana",requiredUserInteraction:rP.None,skipOpenApp:!1}})})}};jP=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?jI(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&jk(t,r,o),o})([oZ(),j_(0,oW(T_.Dmk)),j_(1,oW(T_.SessionId)),j_(2,oW(T_.ContextModule))],jP);let jC=()=>new aP(({bind:e})=>{e(Tg.AppBinder).to(jP)});var jO=Object.defineProperty,jT=Object.getOwnPropertyDescriptor;let jR=class{constructor(e){this.appBinder=e}execute(e,t){return this.appBinder.getAddress({derivationPath:e,checkOnDevice:(null==t?void 0:t.checkOnDevice)??!1,skipOpenApp:(null==t?void 0:t.skipOpenApp)??!1})}};jR=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?jT(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&jO(t,r,o),o})([oZ(),(e$=oW(Tg.AppBinder),(e,t)=>e$(e,t,0))],jR);var jB=Object.defineProperty,jN=Object.getOwnPropertyDescriptor;let jD=class{constructor(e){this.appBinder=e}execute(){return this.appBinder.getAppConfiguration()}};jD=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?jN(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&jB(t,r,o),o})([oZ(),(eH=oW(Tg.AppBinder),(e,t)=>eH(e,t,0))],jD);var jL=Object.defineProperty,jM=Object.getOwnPropertyDescriptor;let jU=class{constructor(e){this.appBinder=e}execute(e,t){return this.appBinder.generateTransaction({derivationPath:e,skipOpenApp:(null==t?void 0:t.skipOpenApp)??!1})}};jU=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?jM(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&jL(t,r,o),o})([oZ(),(eV=oW(Tg.AppBinder),(e,t)=>eV(e,t,0))],jU);var jF=Object.defineProperty,jj=Object.getOwnPropertyDescriptor;let jz=class{constructor(e){eY(this,"_appBinder"),this._appBinder=e}execute(e,t,r){return this._appBinder.signMessage({derivationPath:e,message:t,skipOpenApp:(null==r?void 0:r.skipOpenApp)??!1})}};jz=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?jj(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&jF(t,r,o),o})([oZ(),(eq=oW(Tg.AppBinder),(e,t)=>eq(e,t,0))],jz);var j$=Object.defineProperty,jH=Object.getOwnPropertyDescriptor;let jV=class{constructor(e){this.appBinder=e}execute(e,t,r){return this.appBinder.signTransaction({derivationPath:e,transaction:t,solanaTransactionOptionalConfig:r})}};jV=((e,t,r,n)=>{for(var s,o=n>1?void 0:n?jH(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n?s(t,r,o):s(o))||o);return n&&o&&j$(t,r,o),o})([oZ(),(eG=oW(Tg.AppBinder),(e,t)=>eG(e,t,0))],jV);let jq=()=>new aP(({bind:e})=>{e(Tp.GetAddressUseCase).to(jR),e(Tp.GetAppConfigurationUseCase).to(jD),e(Tp.SignTransactionUseCase).to(jV),e(Tp.SignMessageUseCase).to(jz),e(Tp.GenerateTransactionUseCase).to(jU)}),jG=({dmk:e,sessionId:t,contextModule:r})=>{let n=new aZ;return n.bind(T_.Dmk).toConstantValue(e),n.bind(T_.SessionId).toConstantValue(t),n.bind(T_.ContextModule).toConstantValue(r),n.loadSync(jC(),jq()),n};class jW{constructor({dmk:e,sessionId:t,contextModule:r}){eY(this,"_container"),this._container=jG({dmk:e,sessionId:t,contextModule:r})}signTransaction(e,t,r){return this._container.get(Tp.SignTransactionUseCase).execute(e,t,r)}signMessage(e,t,r){return this._container.get(Tp.SignMessageUseCase).execute(e,t,r)}getAddress(e,t){return this._container.get(Tp.GetAddressUseCase).execute(e,t)}getAppConfiguration(){return this._container.get(Tp.GetAppConfigurationUseCase).execute()}}class jK{constructor({dmk:e,sessionId:t,originToken:r}){eY(this,"_dmk"),eY(this,"_sessionId"),eY(this,"_customContextModule"),eY(this,"_originToken"),this._dmk=e,this._sessionId=t,this._originToken=r}withContextModule(e){return this._customContextModule=e,this}build(){return new jW({dmk:this._dmk,sessionId:this._sessionId,contextModule:this._customContextModule??new kT({originToken:this._originToken}).build()})}}let jJ={ledger:e=>`44'/60'/0'/${e}`,ledgerLive:e=>`44'/60'/${e}'/0/0`,bip44:e=>`44'/60'/0'/0/${e}`,solanaBip44Change:e=>`44'/501'/${e}'/0'`,solanaBip44:e=>`44'/501'/${e}'`,solanaDeprecated:e=>`44'/501'/${e}'/0'/0'`};async function jZ({signer:e,derivationPath:t,onInteractionRequested:r}){let{observable:n}=e.getAddress(t);return new Promise((e,t)=>n.subscribe({next:n=>{switch(n.status){case r_.NotStarted:break;case r_.Pending:{let{intermediateValue:{requiredUserInteraction:e}}=n;null==r||r(e);break}case r_.Stopped:t(new vr(vs));break;case r_.Completed:{let{output:t}=n;e(t);break}case r_.Error:{let{error:e}=n;t(vu(e))}}}}))}async function jQ({signer:e,derivationPath:t,onInteractionRequested:r}){let{observable:n}=e.getAddress(t);return new Promise((e,t)=>n.subscribe({next:n=>{switch(n.status){case r_.NotStarted:break;case r_.Pending:{let{intermediateValue:{requiredUserInteraction:e}}=n;null==r||r(e);break}case r_.Stopped:t(new vr(vs));break;case r_.Completed:{let{output:t}=n;e({address:t});break}case r_.Error:{let{error:e}=n;t(vu(e))}}}}))}async function jX({signer:e,type:t,accountIndex:r,onInteractionRequested:n}){let s=jJ[t](r),o=await jZ({signer:e,derivationPath:s,onInteractionRequested:n});return{derivationPath:s,account:o}}async function jY({signer:e,type:t,accountIndex:r,onInteractionRequested:n}){let s=jJ[t](r),o=await jQ({signer:e,derivationPath:s,onInteractionRequested:n});return{derivationPath:s,account:o}}function j0({numberOfIterations:e,asyncFn:t,onProgress:r}){return new Promise((n,s)=>{let o=0;!function a(){t(o++).then(()=>{o<e?(null==r||r(o),a()):(null==r||r(e),n())}).catch(s)}()})}async function j1({type:e,from:t=0,count:r},{sessionId:n,onInteractionRequested:s,onProgress:o}){let a=new Th({dmk:vd,sessionId:n}).build(),l=[];return await j0({numberOfIterations:r,asyncFn:async r=>{let n=await jX({signer:a,type:e,accountIndex:t+r,onInteractionRequested:s});l.push(n)},onProgress:o}),l}async function j2({type:e,from:t=0,count:r},{sessionId:n,onInteractionRequested:s,onProgress:o}){let a=new jK({dmk:vd,sessionId:n}).build(),l=[];return await j0({numberOfIterations:r,asyncFn:async r=>{let n=await jY({signer:a,type:e,accountIndex:t+r,onInteractionRequested:s});l.push(n)},onProgress:o}),l}function j3(e,t,r){for(let n in t){let s=t[n],o=r?r[n]:null;o&&function(e,t,r){let n=t.split("|").map(e=>e.trim());for(let r=0;r<n.length;r++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}let s=Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=e,s}(s,o,n),Object.defineProperty(e,n,{enumerable:!0,value:s,writable:!1})}}function j8(e,t){if(null==e)return"null";if(null==t&&(t=new Set),"object"==typeof e){if(t.has(e))return"[Circular]";t.add(e)}if(Array.isArray(e))return"[ "+e.map(e=>j8(e,t)).join(", ")+" ]";if(e instanceof Uint8Array){let t="0123456789abcdef",r="0x";for(let n=0;n<e.length;n++)r+=t[e[n]>>4],r+=t[15&e[n]];return r}if("object"==typeof e&&"function"==typeof e.toJSON)return j8(e.toJSON(),t);switch(typeof e){case"boolean":case"number":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let r=Object.keys(e);return r.sort(),"{ "+r.map(r=>`${j8(r,t)}: ${j8(e[r],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function j6(e,t,r,n){if(!e)throw function(e,t,r){let n,s=e;{let n=[];if(r){if("message"in r||"code"in r||"name"in r)throw Error(`value will overwrite populated values: ${j8(r)}`);for(let e in r){if("shortMessage"===e)continue;let t=r[e];n.push(e+"="+j8(t))}}n.push(`code=${t}`),n.push("version=6.16.0"),n.length&&(e+=" ("+n.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":n=TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=RangeError(e);break;default:n=Error(e)}return j3(n,{code:t}),r&&Object.assign(n,r),null==n.shortMessage&&j3(n,{shortMessage:s}),n}(t,r,n)}function j4(e,t,r,n){j6(e,t,"INVALID_ARGUMENT",{argument:r,value:n})}function j5(e,t,r){if(e instanceof Uint8Array)return r?new Uint8Array(e):e;if("string"==typeof e&&e.length%2==0&&e.match(/^0x[0-9a-f]*$/i)){let t=new Uint8Array((e.length-2)/2),r=2;for(let n=0;n<t.length;n++)t[n]=parseInt(e.substring(r,r+2),16),r+=2;return t}j4(!1,"invalid BytesLike value",t||"value",e)}function j9(e,t){return j5(e,t,!1)}function j7(e,t){return j5(e,t,!0)}function ze(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||"number"==typeof t&&e.length!==2+2*t||!0===t&&e.length%2!=0)}["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw Error("bad");if("NFD"===t){let e=String.fromCharCode(233).normalize("NFD"),t=String.fromCharCode(101,769);if(e!==t)throw Error("broken")}e.push(t)}catch{}return e},[]);let zt="0123456789abcdef";function zr(e){let t=j9(e),r="0x";for(let e=0;e<t.length;e++){let n=t[e];r+=zt[(240&n)>>4]+zt[15&n]}return r}function zn(e){return"0x"+e.map(e=>zr(e).substring(2)).join("")}function zi(e){return ze(e,!0)?(e.length-2)/2:j9(e).length}function zs(e,t){let r=j9(e);j6(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});let n=new Uint8Array(t);return n.fill(0),n.set(r,t-r.length),zr(n)}let zo=BigInt(0);function za(e,t){switch(typeof e){case"bigint":return e;case"number":return j4(Number.isInteger(e),"underflow",t||"value",e),j4(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(r){j4(!1,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}j4(!1,"invalid BigNumberish value",t||"value",e)}function zl(e,t){let r=za(e,t);return j6(r>=zo,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),r}function zu(e,t){switch(typeof e){case"bigint":return j4(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),Number(e);case"number":return j4(Number.isInteger(e),"underflow",t||"value",e),j4(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),e;case"string":try{if(""===e)throw Error("empty string");return zu(BigInt(e),t)}catch(r){j4(!1,`invalid numeric string: ${r.message}`,t||"value",e)}}j4(!1,"invalid numeric value",t||"value",e)}function zc(e,t){let r=zl(e,"value"),n=r.toString(16);if(null==t)n.length%2&&(n="0"+n);else{let s=zu(t,"width");if(0===s&&r===zo)return"0x";for(j6(2*s>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});n.length<2*s;)n="0"+n}return"0x"+n}function zd(e,t){let r=zl(e,"value");if(r===zo)return new Uint8Array(null!=t?zu(t,"width"):0);let n=r.toString(16);if(n.length%2&&(n="0"+n),null!=t){let r=zu(t,"width");for(;n.length<2*r;)n="00"+n;j6(2*r===n.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:e})}let s=new Uint8Array(n.length/2);for(let e=0;e<s.length;e++){let t=2*e;s[e]=parseInt(n.substring(t,t+2),16)}return s}function zf(e,t,r){let n=0;for(let s=0;s<r;s++)n=256*n+e[t+s];return n}function zh(e,t,r,n){let s=[];for(;r<t+1+n;){let o=zp(e,r);s.push(o.result),j6((r+=o.consumed)<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:e,length:n,offset:t})}return{consumed:1+n,result:s}}function zp(e,t){j6(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});let r=t=>{j6(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){let n=e[t]-247;r(t+1+n);let s=zf(e,t+1,n);return r(t+1+n+s),zh(e,t,t+1+n,n+s)}if(e[t]>=192){let n=e[t]-192;return r(t+1+n),zh(e,t,t+1,n)}if(e[t]>=184){let n=e[t]-183;r(t+1+n);let s=zf(e,t+1,n);r(t+1+n+s);let o=zr(e.slice(t+1+n,t+1+n+s));return{consumed:1+n+s,result:o}}if(e[t]>=128){let n=e[t]-128;r(t+1+n);let s=zr(e.slice(t+1,t+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:function(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}(e[t])}}function zg(e){let t=j9(e,"data"),r=zp(t,0);return j4(r.consumed===t.length,"unexpected junk after rlp payload","data",e),r.result}function zm(e){let t=[];for(;e;)t.unshift(255&e),e>>=8;return t}BigInt(1);let zy="0123456789abcdef";function zb(e){let t="0x";for(let r of function e(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(t){r=r.concat(e(t))}),r.length<=55)return r.unshift(192+r.length),r;let n=zm(r.length);return n.unshift(247+n.length),n.concat(r)}let r=Array.prototype.slice.call(j9(t,"object"));if(1===r.length&&r[0]<=127)return r;if(r.length<=55)return r.unshift(128+r.length),r;let n=zm(r.length);return n.unshift(183+n.length),n.concat(r)}(e))t+=zy[r>>4],t+=zy[15&r];return t}function zv(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function zx(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function zw(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function zE(e,t){zx(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}let zA="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,zS=e=>e instanceof Uint8Array,zk=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),zI=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),z_=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function zP(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),!zS(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}class zC{clone(){return this._cloneInto()}}function zO(e){let t=t=>e().update(zP(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function zT(e=32){if(zA&&"function"==typeof zA.getRandomValues)return zA.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}class zR extends zC{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");zv(e.outputLen),zv(e.blockLen)}(e);let r=zP(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,s=new Uint8Array(n);s.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return zw(this),this.iHash.update(e),this}digestInto(e){zw(this),zx(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:s,blockLen:o,outputLen:a}=this;return e.finished=n,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let zB=(e,t,r)=>new zR(e,t).update(r).digest();zB.create=(e,t)=>new zR(e,t);class zN extends zC{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=zI(this.buffer)}update(e){zw(this);let{view:t,buffer:r,blockLen:n}=this,s=(e=zP(e)).length;for(let o=0;o<s;){let a=Math.min(n-this.pos,s-o);if(a===n){let t=zI(e);for(;n<=s-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){zw(this),zE(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:s}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let s=BigInt(32),o=BigInt(0xffffffff),a=Number(r>>s&o),l=Number(r&o),u=4*!!n,c=4*!n;e.setUint32(t+u,a,n),e.setUint32(t+c,l,n)})(r,n-8,BigInt(8*this.length),s),this.process(r,0);let a=zI(e),l=this.outputLen;if(l%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=l/4,c=this.get();if(u>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)a.setUint32(4*e,c[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%t&&e.buffer.set(r),e}}let zD=(e,t,r)=>e&t^~e&r,zL=(e,t,r)=>e&t^e&r^t&r,zM=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),zU=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),zF=new Uint32Array(64);class zj extends zN{constructor(){super(64,32,8,!1),this.A=0|zU[0],this.B=0|zU[1],this.C=0|zU[2],this.D=0|zU[3],this.E=0|zU[4],this.F=0|zU[5],this.G=0|zU[6],this.H=0|zU[7]}get(){let{A:e,B:t,C:r,D:n,E:s,F:o,G:a,H:l}=this;return[e,t,r,n,s,o,a,l]}set(e,t,r,n,s,o,a,l){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|s,this.F=0|o,this.G=0|a,this.H=0|l}process(e,t){for(let r=0;r<16;r++,t+=4)zF[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=zF[e-15],r=zF[e-2],n=z_(t,7)^z_(t,18)^t>>>3,s=z_(r,17)^z_(r,19)^r>>>10;zF[e]=s+zF[e-7]+n+zF[e-16]|0}let{A:r,B:n,C:s,D:o,E:a,F:l,G:u,H:c}=this;for(let e=0;e<64;e++){let t=c+(z_(a,6)^z_(a,11)^z_(a,25))+zD(a,l,u)+zM[e]+zF[e]|0,d=(z_(r,2)^z_(r,13)^z_(r,22))+zL(r,n,s)|0;c=u,u=l,l=a,a=o+t|0,o=s,s=n,n=r,r=t+d|0}r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,s,o,a,l,u,c)}roundClean(){zF.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let zz=zO(()=>new zj),z$=BigInt(0x100000000-1),zH=BigInt(32);function zV(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){let{h:o,l:a}=function(e,t=!1){return t?{h:Number(e&z$),l:Number(e>>zH&z$)}:{h:0|Number(e>>zH&z$),l:0|Number(e&z$)}}(e[s],t);[r[s],n[s]]=[o,a]}return[r,n]}let zq=(e,t,r)=>e<<r|t>>>32-r,zG=(e,t,r)=>t<<r|e>>>32-r,zW=(e,t,r)=>t<<r-32|e>>>64-r,zK=(e,t,r)=>e<<r-32|t>>>64-r,zJ={split:zV,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,add:function(e,t,r,n){let s=(t>>>0)+(n>>>0);return{h:e+r+(s/0x100000000|0)|0,l:0|s}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,s)=>t+r+n+s+(e/0x100000000|0)|0,add5H:(e,t,r,n,s,o)=>t+r+n+s+o+(e/0x100000000|0)|0,add5L:(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0)},[zZ,zQ]=zJ.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),zX=new Uint32Array(80),zY=new Uint32Array(80);class z0 extends zN{constructor(){super(128,64,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:c,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:m}=this;return[e,t,r,n,s,o,a,l,u,c,d,f,h,p,g,m]}set(e,t,r,n,s,o,a,l,u,c,d,f,h,p,g,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|s,this.Cl=0|o,this.Dh=0|a,this.Dl=0|l,this.Eh=0|u,this.El=0|c,this.Fh=0|d,this.Fl=0|f,this.Gh=0|h,this.Gl=0|p,this.Hh=0|g,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)zX[r]=e.getUint32(t),zY[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|zX[e-15],r=0|zY[e-15],n=zJ.rotrSH(t,r,1)^zJ.rotrSH(t,r,8)^zJ.shrSH(t,r,7),s=zJ.rotrSL(t,r,1)^zJ.rotrSL(t,r,8)^zJ.shrSL(t,r,7),o=0|zX[e-2],a=0|zY[e-2],l=zJ.rotrSH(o,a,19)^zJ.rotrBH(o,a,61)^zJ.shrSH(o,a,6),u=zJ.rotrSL(o,a,19)^zJ.rotrBL(o,a,61)^zJ.shrSL(o,a,6),c=zJ.add4L(s,u,zY[e-7],zY[e-16]),d=zJ.add4H(c,n,l,zX[e-7],zX[e-16]);zX[e]=0|d,zY[e]=0|c}let{Ah:r,Al:n,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:c,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:m,Hh:y,Hl:b}=this;for(let e=0;e<80;e++){let t=zJ.rotrSH(d,f,14)^zJ.rotrSH(d,f,18)^zJ.rotrBH(d,f,41),v=zJ.rotrSL(d,f,14)^zJ.rotrSL(d,f,18)^zJ.rotrBL(d,f,41),x=d&h^~d&g,w=f&p^~f&m,E=zJ.add5L(b,v,w,zQ[e],zY[e]),A=zJ.add5H(E,y,t,x,zZ[e],zX[e]),S=0|E,k=zJ.rotrSH(r,n,28)^zJ.rotrBH(r,n,34)^zJ.rotrBH(r,n,39),I=zJ.rotrSL(r,n,28)^zJ.rotrBL(r,n,34)^zJ.rotrBL(r,n,39),_=r&s^r&a^s&a,P=n&o^n&l^o&l;y=0|g,b=0|m,g=0|h,m=0|p,h=0|d,p=0|f,({h:d,l:f}=zJ.add(0|u,0|c,0|A,0|S)),u=0|a,c=0|l,a=0|s,l=0|o,s=0|r,o=0|n;let C=zJ.add3L(S,I,P);r=zJ.add3H(C,A,k,_),n=0|C}({h:r,l:n}=zJ.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:o}=zJ.add(0|this.Bh,0|this.Bl,0|s,0|o)),({h:a,l:l}=zJ.add(0|this.Ch,0|this.Cl,0|a,0|l)),({h:u,l:c}=zJ.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h:d,l:f}=zJ.add(0|this.Eh,0|this.El,0|d,0|f)),({h:h,l:p}=zJ.add(0|this.Fh,0|this.Fl,0|h,0|p)),({h:g,l:m}=zJ.add(0|this.Gh,0|this.Gl,0|g,0|m)),({h:y,l:b}=zJ.add(0|this.Hh,0|this.Hl,0|y,0|b)),this.set(r,n,s,o,a,l,u,c,d,f,h,p,g,m,y,b)}roundClean(){zX.fill(0),zY.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let z1=zO(()=>new z0),z2=function(){if("u">typeof self)return self;if("u">typeof window)return window;if("u">typeof ea)return ea;throw Error("unable to locate global object")}();z2.crypto||z2.msCrypto;let[z3,z8,z6]=[[],[],[]],z4=BigInt(0),z5=BigInt(1),z9=BigInt(2),z7=BigInt(7),$e=BigInt(256),$t=BigInt(113);for(let e=0,t=z5,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],z3.push(2*(5*n+r)),z8.push((e+1)*(e+2)/2%64);let s=z4;for(let e=0;e<7;e++)(t=(t<<z5^(t>>z7)*$t)%$e)&z9&&(s^=z5<<(z5<<BigInt(e))-z5);z6.push(s)}let[$r,$n]=zV(z6,!0),$i=(e,t,r)=>r>32?zW(e,t,r):zq(e,t,r),$s=(e,t,r)=>r>32?zK(e,t,r):zG(e,t,r);class $o extends zC{constructor(e,t,r,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,zv(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=zk(this.state)}keccak(){(function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,s=(t+2)%10,o=r[s],a=r[s+1],l=$i(o,a,1)^r[n],u=$s(o,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=l,e[t+r+1]^=u}let t=e[2],s=e[3];for(let r=0;r<24;r++){let n=z8[r],o=$i(t,s,n),a=$s(t,s,n),l=z3[r];t=e[l],s=e[l+1],e[l]=o,e[l+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=$r[n],e[1]^=$n[n]}r.fill(0)})(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){zw(this);let{blockLen:t,state:r}=this,n=(e=zP(e)).length;for(let s=0;s<n;){let o=Math.min(t-this.pos,n-s);for(let t=0;t<o;t++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){zw(this,!1),zx(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,s=e.length;n<s;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,s-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return zv(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(zE(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:s,enableXOF:o}=this;return e||(e=new $o(t,r,n,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}let $a=zO(()=>new $o(136,1,32)),$l=!1,$u=function(e){return $a(e)},$c=$u;function $d(e){let t=j9(e,"data");return zr($c(t))}$d._=$u,$d.lock=function(){$l=!0},$d.register=function(e){if($l)throw TypeError("keccak256 is locked");$c=e},Object.freeze($d);let $f=function(e){return(function(e){switch(e){case"sha256":return zz.create();case"sha512":return z1.create()}j4(!1,"invalid hashing algorithm name","algorithm",e)})("sha256").update(e).digest()},$h=$f,$p=!1;function $g(e){let t=j9(e,"data");return zr($h(t))}$g._=$f,$g.lock=function(){$p=!0},$g.register=function(e){if($p)throw Error("sha256 is locked");$h=e},Object.freeze($g),Object.freeze($g);let $m=BigInt(0),$y=BigInt(1),$b=BigInt(2),$v=e=>e instanceof Uint8Array,$x=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function $w(e){if(!$v(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=$x[e[r]];return t}function $E(e){let t=e.toString(16);return 1&t.length?`0${t}`:t}function $A(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function $S(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,s=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(s)||s<0)throw Error("Invalid byte sequence");r[t]=s}return r}function $k(e){return $A($w(e))}function $I(e){if(!$v(e))throw Error("Uint8Array expected");return $A($w(Uint8Array.from(e).reverse()))}function $_(e,t){return $S(e.toString(16).padStart(2*t,"0"))}function $P(e,t){return $_(e,t).reverse()}function $C(e,t,r){let n;if("string"==typeof t)try{n=$S(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if($v(t))n=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let s=n.length;if("number"==typeof r&&s!==r)throw Error(`${e} expected ${r} bytes, got ${s}`);return n}function $O(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!$v(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}let $T=e=>($b<<BigInt(e-1))-$y,$R=e=>new Uint8Array(e),$B=e=>Uint8Array.from(e);function $N(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=$R(e),s=$R(e),o=0,a=()=>{n.fill(1),s.fill(0),o=0},l=(...e)=>r(s,n,...e),u=(e=$R())=>{s=l($B([0]),e),n=l(),0!==e.length&&(s=l($B([1]),e),n=l())},c=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=l()).slice();r.push(t),e+=n.length}return $O(...r)};return(e,t)=>{let r;for(a(),u(e);!(r=t(c()));)u();return a(),r}}let $D={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function $L(e,t,r={}){let n=(t,r,n)=>{let s=$D[r];if("function"!=typeof s)throw Error(`Invalid validator "${r}", expected function`);let o=e[t];if(!(n&&void 0===o)&&!s(o,e))throw Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}let $M=Object.freeze(Object.defineProperty({__proto__:null,bitGet:function(e,t){return e>>BigInt(t)&$y},bitLen:function(e){let t;for(t=0;e>$m;e>>=$y,t+=1);return t},bitMask:$T,bitSet:(e,t,r)=>e|(r?$y:$m)<<BigInt(t),bytesToHex:$w,bytesToNumberBE:$k,bytesToNumberLE:$I,concatBytes:$O,createHmacDrbg:$N,ensureBytes:$C,equalBytes:function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},hexToBytes:$S,hexToNumber:$A,numberToBytesBE:$_,numberToBytesLE:$P,numberToHexUnpadded:$E,numberToVarBytesBE:function(e){return $S($E(e))},utf8ToBytes:function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))},validateObject:$L},Symbol.toStringTag,{value:"Module"})),$U=BigInt(0),$F=BigInt(1),$j=BigInt(2),$z=BigInt(3),$$=BigInt(4),$H=BigInt(5),$V=BigInt(8);function $q(e,t){let r=e%t;return r>=$U?r:t+r}function $G(e,t,r){let n=e;for(;t-- >$U;)n*=n,n%=r;return n}function $W(e,t){if(e===$U||t<=$U)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=$q(e,t),n=t,s=$U,o=$F;for(;r!==$U;){let e=n/r,t=n%r,a=s-o*e;n=r,r=t,s=o,o=a}if(n!==$F)throw Error("invert: does not exist");return $q(s,t)}BigInt(9),BigInt(16);let $K=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $J(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function $Z(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function $Q(e){let t=$Z(e);return t+Math.ceil(t/2)}let $X=BigInt(0),$Y=BigInt(1);function $0(e){return $L(e.Fp,$K.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),$L(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...$J(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}let{bytesToNumberBE:$1,hexToBytes:$2}=$M,$3={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=$3;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:$1(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=$3,r="string"==typeof e?$2(e):e;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:s,l:o}=$3._parseInt(r.subarray(2)),{d:a,l:l}=$3._parseInt(o);if(l.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:a}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),s=t(r(e.r)),o=n.length/2,a=s.length/2,l=r(o),u=r(a);return`30${r(a+o+4)}02${u}${s}02${l}${n}`}},$8=BigInt(0),$6=BigInt(1);BigInt(2);let $4=BigInt(3);BigInt(4);let $5=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),$9=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$7=BigInt(1),He=BigInt(2),Ht=(e,t)=>(e+t/He)/t,Hr=function(e,t,r=!1,n={}){if(e<=$U)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:s,nByteLength:o}=$J(e,t);if(o>2048)throw Error("Field lengths over 2048 bytes are not supported");let a=function(e){if(e%$$===$z){let t=(e+$F)/$$;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%$V===$H){let t=(e-$H)/$V;return function(e,r){let n=e.mul(r,$j),s=e.pow(n,t),o=e.mul(r,s),a=e.mul(e.mul(o,$j),s),l=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(l),r))throw Error("Cannot find square root");return l}}return function(e){let t,r,n,s=(e-$F)/$j;for(t=e-$F,r=0;t%$j===$U;t/=$j,r++);for(n=$j;n<e&&function(e,t,r){if(r<=$U||t<$U)throw Error("Expected power/modulo > 0");if(r===$F)return $U;let n=$F;for(;t>$U;)t&$F&&(n=n*e%r),e=e*e%r,t>>=$F;return n}(n,s,e)!==e-$F;n++);if(1===r){let t=(e+$F)/$$;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let o=(t+$F)/$j;return function(e,a){if(e.pow(a,s)===e.neg(e.ONE))throw Error("Cannot find square root");let l=r,u=e.pow(e.mul(e.ONE,n),t),c=e.pow(a,o),d=e.pow(a,t);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<l&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(u,$F<<BigInt(l-t-1));u=e.sqr(r),c=e.mul(c,r),d=e.mul(d,u),l=t}return c}}(e)}(e),l=Object.freeze({ORDER:e,BITS:s,BYTES:o,MASK:$T(s),ZERO:$U,ONE:$F,create:t=>$q(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return $U<=t&&t<e},is0:e=>e===$U,isOdd:e=>(e&$F)===$F,neg:t=>$q(-t,e),eql:(e,t)=>e===t,sqr:t=>$q(t*t,e),add:(t,r)=>$q(t+r,e),sub:(t,r)=>$q(t-r,e),mul:(t,r)=>$q(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<$U)throw Error("Expected power > 0");if(r===$U)return e.ONE;if(r===$F)return t;let n=e.ONE,s=t;for(;r>$U;)r&$F&&(n=e.mul(n,s)),s=e.sqr(s),r>>=$F;return n})(l,e,t),div:(t,r)=>$q(t*$W(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>$W(t,e),sqrt:n.sqrt||(e=>a(l,e)),invertBatch:e=>(function(e,t){let r=Array(t.length),n=t.reduce((t,n,s)=>e.is0(n)?t:(r[s]=t,e.mul(t,n)),e.ONE),s=e.inv(n);return t.reduceRight((t,n,s)=>e.is0(n)?t:(r[s]=e.mul(t,r[s]),e.mul(t,n)),s),r})(l,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?$P(e,o):$_(e,o),fromBytes:e=>{if(e.length!==o)throw Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return r?$I(e):$k(e)}});return Object.freeze(l)}($5,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%$5,c=u*u*e%$5,d=$G(c,t,$5)*c%$5,f=$G(d,t,$5)*c%$5,h=$G(f,He,$5)*u%$5,p=$G(h,n,$5)*h%$5,g=$G(p,s,$5)*p%$5,m=$G(g,a,$5)*g%$5,y=$G(m,l,$5)*m%$5,b=$G(y,a,$5)*g%$5,v=$G(b,t,$5)*c%$5,x=$G(v,o,$5)*p%$5,w=$G(x,r,$5)*u%$5,E=$G(w,He,$5);if(!Hr.eql(Hr.sqr(E),e))throw Error("Cannot find square root");return E}}),Hn=function(e,t){let r=t=>(function(e){let t=function(e){let t=$0(e);return $L(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,s=r.BYTES+1,o=2*r.BYTES+1;function a(e){return $q(e,n)}let{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:c,isWithinCurveOrder:d}=function(e){let t=function(e){let t=$0(e);$L(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=t;if(r){if(!n.eql(s,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{let s=t.toAffine();return $O(Uint8Array.from([4]),r.toBytes(s.x),r.toBytes(s.y))}),s=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){let{a:n,b:s}=t,o=r.sqr(e),a=r.mul(o,e);return r.add(r.add(a,r.mul(e,n)),s)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw Error("bad generator point: equation left != right");function a(e){return"bigint"==typeof e&&$8<e&&e<t.n}function l(e){if(!a(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function u(e){let r,{allowedPrivateKeyLengths:n,nByteLength:s,wrapPrivateKey:o,n:a}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=$w(e)),"string"!=typeof e||!n.includes(e.length))throw Error("Invalid key");e=e.padStart(2*s,"0")}try{r="bigint"==typeof e?e:$k($C("private key",e,s))}catch{throw Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}return o&&(r=$q(r,a)),l(r),r}let c=new Map;function d(e){if(!(e instanceof f))throw Error("ProjectivePoint expected")}class f{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof f)throw Error("projective point not allowed");let s=e=>r.eql(e,r.ZERO);return s(t)&&s(n)?f.ZERO:new f(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(f.fromAffine)}static fromHex(e){let t=f.fromAffine(s($C("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return f.BASE.multiply(u(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw Error("bad point: x or y not FE");let s=r.sqr(n),a=o(e);if(!r.eql(s,a))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){d(e);let{px:t,py:n,pz:s}=this,{px:o,py:a,pz:l}=e,u=r.eql(r.mul(t,l),r.mul(o,s)),c=r.eql(r.mul(n,l),r.mul(a,s));return u&&c}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,s=r.mul(n,$4),{px:o,py:a,pz:l}=this,u=r.ZERO,c=r.ZERO,d=r.ZERO,h=r.mul(o,o),p=r.mul(a,a),g=r.mul(l,l),m=r.mul(o,a);return m=r.add(m,m),d=r.mul(o,l),d=r.add(d,d),u=r.mul(e,d),c=r.mul(s,g),c=r.add(u,c),u=r.sub(p,c),c=r.add(p,c),c=r.mul(u,c),u=r.mul(m,u),d=r.mul(s,d),g=r.mul(e,g),m=r.sub(h,g),m=r.mul(e,m),m=r.add(m,d),d=r.add(h,h),h=r.add(d,h),h=r.add(h,g),h=r.mul(h,m),c=r.add(c,h),g=r.mul(a,l),g=r.add(g,g),h=r.mul(g,m),u=r.sub(u,h),d=r.mul(g,p),d=r.add(d,d),new f(u,c,d=r.add(d,d))}add(e){d(e);let{px:n,py:s,pz:o}=this,{px:a,py:l,pz:u}=e,c=r.ZERO,h=r.ZERO,p=r.ZERO,g=t.a,m=r.mul(t.b,$4),y=r.mul(n,a),b=r.mul(s,l),v=r.mul(o,u),x=r.add(n,s),w=r.add(a,l);x=r.mul(x,w),w=r.add(y,b),x=r.sub(x,w),w=r.add(n,o);let E=r.add(a,u);return w=r.mul(w,E),E=r.add(y,v),w=r.sub(w,E),E=r.add(s,o),c=r.add(l,u),E=r.mul(E,c),c=r.add(b,v),E=r.sub(E,c),p=r.mul(g,w),c=r.mul(m,v),p=r.add(c,p),c=r.sub(b,p),p=r.add(b,p),h=r.mul(c,p),b=r.add(y,y),b=r.add(b,y),v=r.mul(g,v),w=r.mul(m,w),b=r.add(b,v),v=r.sub(y,v),v=r.mul(g,v),w=r.add(w,v),y=r.mul(b,w),h=r.add(h,y),y=r.mul(E,w),c=r.mul(x,c),c=r.sub(c,y),y=r.mul(x,b),p=r.mul(E,p),new f(c,h,p=r.add(p,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(f.ZERO)}wNAF(e){return p.wNAFCached(this,c,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(f.fromAffine)})}multiplyUnsafe(e){let n=f.ZERO;if(e===$8)return n;if(l(e),e===$6)return this;let{endo:s}=t;if(!s)return p.unsafeLadder(this,e);let{k1neg:o,k1:a,k2neg:u,k2:c}=s.splitScalar(e),d=n,h=n,g=this;for(;a>$8||c>$8;)a&$6&&(d=d.add(g)),c&$6&&(h=h.add(g)),g=g.double(),a>>=$6,c>>=$6;return o&&(d=d.negate()),u&&(h=h.negate()),h=new f(r.mul(h.px,s.beta),h.py,h.pz),d.add(h)}multiply(e){let n,s;l(e);let{endo:o}=t;if(o){let{k1neg:t,k1:a,k2neg:l,k2:u}=o.splitScalar(e),{p:c,f:d}=this.wNAF(a),{p:h,f:g}=this.wNAF(u);c=p.constTimeNegate(t,c),h=p.constTimeNegate(l,h),h=new f(r.mul(h.px,o.beta),h.py,h.pz),n=c.add(h),s=d.add(g)}else{let{p:t,f:r}=this.wNAF(e);n=t,s=r}return f.normalizeZ([n,s])[0]}multiplyAndAddUnsafe(e,t,r){let n=f.BASE,s=(e,t)=>t!==$8&&t!==$6&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=s(this,t).add(s(e,r));return o.is0()?void 0:o}toAffine(e){let{px:t,py:n,pz:s}=this,o=this.is0();null==e&&(e=o?r.ONE:r.inv(s));let a=r.mul(t,e),l=r.mul(n,e),u=r.mul(s,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw Error("invZ was invalid");return{x:a,y:l}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===$6)return!0;if(r)return r(f,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===$6?this:r?r(f,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(f,this,e)}toHex(e=!0){return $w(this.toRawBytes(e))}}f.BASE=new f(t.Gx,t.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);let h=t.nBitLength,p=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,s=t;for(;r>$X;)r&$Y&&(n=n.add(s)),s=s.double(),r>>=$Y;return n},precomputeWindow(e,t){let{windows:r,windowSize:s}=n(t),o=[],a=e,l=a;for(let e=0;e<r;e++){l=a,o.push(l);for(let e=1;e<s;e++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(t,s,o){let{windows:a,windowSize:l}=n(t),u=e.ZERO,c=e.BASE,d=BigInt(2**t-1),f=2**t,h=BigInt(t);for(let e=0;e<a;e++){let t=e*l,n=Number(o&d);o>>=h,n>l&&(n-=f,o+=$Y);let a=t+Math.abs(n)-1,p=e%2!=0,g=n<0;0===n?c=c.add(r(p,s[t])):u=u.add(r(g,s[a]))}return{p:u,f:c}},wNAFCached(e,t,r,n){let s=e._WINDOW_SIZE||1,o=t.get(e);return o||(o=this.precomputeWindow(e,s),1!==s&&t.set(e,n(o))),this.wNAF(s,o,r)}}}(f,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:a}}({...t,toBytes(e,t,n){let s=t.toAffine(),o=r.toBytes(s.x);return n?$O(Uint8Array.from([t.hasEvenY()?2:3]),o):$O(Uint8Array.from([4]),o,r.toBytes(s.y))},fromBytes(e){let t=e.length,n=e[0],a=e.subarray(1);if(t===s&&(2===n||3===n)){let e=$k(a);if(!($8<e&&e<r.ORDER))throw Error("Point is not on curve");let t=c(e),s=r.sqrt(t);return(1&n)==1!=((s&$6)===$6)&&(s=r.neg(s)),{x:e,y:s}}if(t===o&&4===n)return{x:r.fromBytes(a.subarray(0,r.BYTES)),y:r.fromBytes(a.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${s} compressed bytes or ${o} uncompressed bytes`)}}),f=e=>$w($_(e,t.nByteLength)),h=(e,t,r)=>$k(e.slice(t,r));class p{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new p(h(e=$C("compactSignature",e,2*r),0,r),h(e,r,2*r))}static fromDER(e){let{r:t,s:r}=$3.toSig($C("DER",e));return new p(t,r)}assertValidity(){if(!d(this.r))throw Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new p(this.r,this.s,e)}recoverPublicKey(e){let{r:s,s:o,recovery:u}=this,c=y($C("msgHash",e));if(null==u||![0,1,2,3].includes(u))throw Error("recovery id invalid");let d=2===u||3===u?s+t.n:s;if(d>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let h=1&u?"03":"02",p=l.fromHex(h+f(d)),g=$W(d,n),m=a(-c*g),b=a(o*g),v=l.BASE.multiplyAndAddUnsafe(p,m,b);if(!v)throw Error("point at infinify");return v.assertValidity(),v}hasHighS(){return this.s>n>>$6}normalizeS(){return this.hasHighS()?new p(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return $S(this.toDERHex())}toDERHex(){return $3.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return $S(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}function g(e){let t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===s||n===o:r?n===2*s||n===2*o:e instanceof l}let m=t.bits2int||function(e){let r=$k(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},y=t.bits2int_modN||function(e){return a(m(e))},b=$T(t.nBitLength);function v(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!($8<=e&&e<b))throw Error(`bigint expected < 2^${t.nBitLength}`);return $_(e,t.nByteLength)}let x={lowS:t.lowS,prehash:!1},w={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(g(e))throw Error("first arg must be private key");if(!g(t))throw Error("second arg must be public key");return l.fromHex(t).multiply(u(e)).toRawBytes(r)},sign:function(e,s,o=x){let{seed:c,k2sig:f}=function(e,s,o=x){if(["recovered","canonical"].some(e=>e in o))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:f}=t,{lowS:h,prehash:g,extraEntropy:b}=o;null==h&&(h=!0),e=$C("msgHash",e),g&&(e=$C("prehashed msgHash",c(e)));let w=y(e),E=u(s),A=[v(E),v(w)];if(null!=b){let e=!0===b?f(r.BYTES):b;A.push($C("extraEntropy",e))}return{seed:$O(...A),k2sig:function(e){var t;let r=m(e);if(!d(r))return;let s=$W(r,n),o=l.BASE.multiply(r).toAffine(),u=a(o.x);if(u===$8)return;let c=a(s*a(w+u*E));if(c===$8)return;let f=2*(o.x!==u)|Number(o.y&$6),g=c;return h&&c>n>>$6&&(g=(t=c)>n>>$6?a(-t):t,f^=1),new p(u,g,f)}}}(e,s,o);return $N(t.hash.outputLen,t.nByteLength,t.hmac)(c,f)},verify:function(e,r,s,o=w){var u;let c,d;if(r=$C("msgHash",r),s=$C("publicKey",s),"strict"in o)throw Error("options.strict was renamed to lowS");let{lowS:f,prehash:h}=o;try{if("string"==typeof e||e instanceof Uint8Array)try{c=p.fromDER(e)}catch(t){if(!(t instanceof $3.Err))throw t;c=p.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:r}=e;c=new p(t,r)}else throw Error("PARSE");d=l.fromHex(s)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(f&&c.hasHighS())return!1;h&&(r=t.hash(r));let{r:g,s:m}=c,b=y(r),v=$W(m,n),x=a(b*v),E=a(g*v),A=null==(u=l.BASE.multiplyAndAddUnsafe(d,x,E))?void 0:u.toAffine();return!!A&&a(A.x)===g},ProjectivePoint:l,Signature:p,utils:{isValidPrivateKey(e){try{return u(e),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let e=$Q(t.n);return function(e,t,r=!1){let n=e.length,s=$Z(t),o=$Q(t);if(n<16||n<o||n>1024)throw Error(`expected ${o}-1024 bytes of input, got ${n}`);let a=$q(r?$k(e):$I(e),t-$F)+$F;return r?$P(a,s):$_(a,s)}(t.randomBytes(e),t.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>zB(t,e,function(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!zS(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}(...r)),randomBytes:zT});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:Hr,n:$9,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-$7*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=BigInt("0x100000000000000000000000000000000"),o=Ht(t*e,$9),a=Ht(-r*e,$9),l=$q(e-o*t-a*n,$9),u=$q(-o*r-a*t,$9),c=l>s,d=u>s;if(c&&(l=$9-l),d&&(u=$9-u),l>s||u>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:l,k2neg:d,k2:u}}}},zz);BigInt(0),Hn.ProjectivePoint;let Hi="0x0000000000000000000000000000000000000000",Hs="0x0000000000000000000000000000000000000000000000000000000000000000",Ho=BigInt(0),Ha=BigInt(1),Hl=BigInt(2),Hu=BigInt(27),Hc=BigInt(28),Hd=BigInt(35),Hf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Hh=Hf/Hl,Hp=Symbol.for("nodejs.util.inspect.custom"),Hg={};function Hm(e){return zs(zd(e),32)}let Hy=class e{constructor(e,t,r,n){e2(this,hx,void 0),e2(this,hw,void 0),e2(this,hE,void 0),e2(this,hA,void 0),function(e,t,r){if(null==r&&(r=""),e!==t){let e=r,t="new";r&&(e+=".",t+=" "+r),j6(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}(e,Hg,"Signature"),e3(this,hx,t),e3(this,hw,r),e3(this,hE,n),e3(this,hA,null)}get r(){return e1(this,hx)}set r(e){j4(32===zi(e),"invalid r","value",e),e3(this,hx,zr(e))}get s(){return j4(8>parseInt(e1(this,hw).substring(0,3)),"non-canonical s; use ._s","s",e1(this,hw)),e1(this,hw)}set s(e){j4(32===zi(e),"invalid s","value",e),e3(this,hw,zr(e))}get _s(){return e1(this,hw)}isValid(){return BigInt(e1(this,hw))<=Hh}get v(){return e1(this,hE)}set v(e){let t=zu(e,"value");j4(27===t||28===t,"invalid v","v",e),e3(this,hE,t)}get networkV(){return e1(this,hA)}get legacyChainId(){let t=this.networkV;return null==t?null:e.getChainId(t)}get yParity(){return+(27!==this.v)}get yParityAndS(){let e=j9(this.s);return this.yParity&&(e[0]|=128),zr(e)}get compactSerialized(){return zn([this.r,this.yParityAndS])}get serialized(){return zn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;let t=Hf-BigInt(this._s),r=55-this.v,n=new e(Hg,this.r,Hm(t),r);return this.networkV&&e3(n,hA,this.networkV),n}clone(){let t=new e(Hg,this.r,this._s,this.v);return this.networkV&&e3(t,hA,this.networkV),t}toJSON(){let e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this._s,v:this.v}}[Hp](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){let t=za(e,"v");return t==Hu||t==Hc?Ho:(j4(t>=Hd,"invalid EIP-155 v","v",e),(t-Hd)/Hl)}static getChainIdV(e,t){return za(e)*Hl+BigInt(35+t-27)}static getNormalizedV(e){let t=za(e);return t===Ho||t===Hu?27:t===Ha||t===Hc?28:(j4(t>=Hd,"invalid v","v",e),t&Ha?27:28)}static from(t){function r(e,r){j4(e,r,"signature",t)}if(null==t)return new e(Hg,Hs,Hs,27);if("string"==typeof t){let n=j9(t,"signature");if(64===n.length){let t=zr(n.slice(0,32)),r=n.slice(32,64),s=128&r[0]?28:27;return r[0]&=127,new e(Hg,t,zr(r),s)}if(65===n.length){let t=zr(n.slice(0,32)),r=zr(n.slice(32,64)),s=e.getNormalizedV(n[64]);return new e(Hg,t,r,s)}r(!1,"invalid raw signature length")}if(t instanceof e)return t.clone();let n=t.r;r(null!=n,"missing r");let s=Hm(n),o=function(e,t){if(null!=e)return Hm(e);if(null!=t){r(ze(t,32),"invalid yParityAndS");let e=j9(t);return e[0]&=127,zr(e)}r(!1,"missing s")}(t.s,t.yParityAndS),{networkV:a,v:l}=function(t,n,s){if(null!=t){let r=za(t);return{networkV:r>=Hd?r:void 0,v:e.getNormalizedV(r)}}if(null!=n)return r(ze(n,32),"invalid yParityAndS"),{v:128&j9(n)[0]?28:27};if(null!=s){switch(zu(s,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}r(!1,"invalid yParity")}r(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),u=new e(Hg,s,o,l);return a&&e3(u,hA,a),r(null==t.yParity||zu(t.yParity,"sig.yParity")===u.yParity,"yParity mismatch"),r(null==t.yParityAndS||t.yParityAndS===u.yParityAndS,"yParityAndS mismatch"),u}};hx=new WeakMap,hw=new WeakMap,hE=new WeakMap,hA=new WeakMap;let Hb=class e{constructor(e){e2(this,hS,void 0),j4(32===zi(e),"invalid private key","privateKey","[REDACTED]"),e3(this,hS,zr(e))}get privateKey(){return e1(this,hS)}get publicKey(){return e.computePublicKey(e1(this,hS))}get compressedPublicKey(){return e.computePublicKey(e1(this,hS),!0)}sign(e){j4(32===zi(e),"invalid digest length","digest",e);let t=Hn.sign(j7(e),j7(e1(this,hS)),{lowS:!0});return Hy.from({r:zc(t.r,32),s:zc(t.s,32),v:t.recovery?28:27})}computeSharedSecret(t){let r=e.computePublicKey(t);return zr(Hn.getSharedSecret(j7(e1(this,hS)),j9(r),!1))}static computePublicKey(e,t){let r=j9(e,"key");if(32===r.length)return zr(Hn.getPublicKey(r,!!t));if(64===r.length){let e=new Uint8Array(65);e[0]=4,e.set(r,1),r=e}return zr(Hn.ProjectivePoint.fromHex(r).toRawBytes(t))}static recoverPublicKey(e,t){j4(32===zi(e),"invalid digest length","digest",e);let r=Hy.from(t),n=Hn.Signature.fromCompact(j7(zn([r.r,r.s]))),s=(n=n.addRecoveryBit(r.yParity)).recoverPublicKey(j7(e));return j4(null!=s,"invalid signature for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(t,r,n){let s=Hn.ProjectivePoint.fromHex(e.computePublicKey(t).substring(2)),o=Hn.ProjectivePoint.fromHex(e.computePublicKey(r).substring(2));return"0x"+s.add(o).toHex(!!n)}};hS=new WeakMap;let Hv=BigInt(0),Hx=BigInt(36);function Hw(e){let t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);let n=j9($d(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}let HE={};for(let e=0;e<10;e++)HE[String(e)]=String(e);for(let e=0;e<26;e++)HE[String.fromCharCode(65+e)]=String(10+e);let HA=function(){let e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function HS(e){if(j4("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);let t=Hw(e);return j4(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){j4(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>HE[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e),"bad icap checksum","address",e);let t=(function(e){e=e.toLowerCase();let t=Hv;for(let r=0;r<e.length;r++)t=t*Hx+HA[e[r]];return t})(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Hw("0x"+t)}j4(!1,"invalid address","address",e)}function Hk(e,t){return{address:HS(e),storageKeys:t.map((e,t)=>(j4(ze(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase()))}}function HI(e){if(Array.isArray(e))return e.map((t,r)=>Array.isArray(t)?(j4(2===t.length,"invalid slot set",`value[${r}]`,t),Hk(t[0],t[1])):(j4(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),Hk(t.address,t.storageKeys)));j4(null!=e&&"object"==typeof e,"invalid access list","value",e);let t=Object.keys(e).map(t=>{let r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return Hk(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}let H_=BigInt(0),HP=BigInt(2),HC=BigInt(27),HO=BigInt(28),HT=BigInt(35),HR=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),HB=Symbol.for("nodejs.util.inspect.custom");function HN(e,t){let r=e.toString(16);for(;r.length<2;)r="0"+r;return"0x"+(r+=$g(t).substring(4))}function HD(e){return"0x"===e?null:HS(e)}function HL(e,t){try{return HI(e)}catch(r){j4(!1,r.message,t,e)}}function HM(e,t){return"0x"===e?0:zu(e,t)}function HU(e,t){if("0x"===e)return H_;let r=za(e,t);return j4(r<=HR,"value exceeds uint size",t,r),r}function HF(e,t){let r=za(e,"value"),n=zd(r);return j4(n.length<=32,"value too large",`tx.${t}`,r),n}function Hj(e){return HI(e).map(e=>[e.address,e.storageKeys])}function Hz(e,t){let r;try{if(r=HM(t[0],"yParity"),0!==r&&1!==r)throw Error("bad yParity")}catch{j4(!1,"invalid yParity","yParity",t[0])}let n=zs(t[1],32),s=zs(t[2],32);e.signature=Hy.from({r:n,s:s,yParity:r})}let H$=class e{constructor(){e2(this,hH),e2(this,hk,void 0),e2(this,hI,void 0),e2(this,h_,void 0),e2(this,hP,void 0),e2(this,hC,void 0),e2(this,hO,void 0),e2(this,hT,void 0),e2(this,hR,void 0),e2(this,hB,void 0),e2(this,hN,void 0),e2(this,hD,void 0),e2(this,hL,void 0),e2(this,hM,void 0),e2(this,hU,void 0),e2(this,hF,void 0),e2(this,hj,void 0),e2(this,hz,void 0),e2(this,h$,void 0),e3(this,hk,null),e3(this,hI,null),e3(this,hP,0),e3(this,hC,H_),e3(this,hO,null),e3(this,hT,null),e3(this,hR,null),e3(this,h_,"0x"),e3(this,hB,H_),e3(this,hN,H_),e3(this,hD,null),e3(this,hL,null),e3(this,hM,null),e3(this,hU,null),e3(this,hF,null),e3(this,hj,null),e3(this,hz,null),e3(this,h$,null)}get type(){return e1(this,hk)}set type(e){switch(e){case null:e3(this,hk,null);break;case 0:case"legacy":e3(this,hk,0);break;case 1:case"berlin":case"eip-2930":e3(this,hk,1);break;case 2:case"london":case"eip-1559":e3(this,hk,2);break;case 3:case"cancun":case"eip-4844":e3(this,hk,3);break;case 4:case"pectra":case"eip-7702":e3(this,hk,4);break;default:j4(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let e=e1(this,hI);return null==e&&3===this.type?Hi:e}set to(e){e3(this,hI,null==e?null:HS(e))}get nonce(){return e1(this,hP)}set nonce(e){e3(this,hP,zu(e,"value"))}get gasLimit(){return e1(this,hC)}set gasLimit(e){e3(this,hC,za(e))}get gasPrice(){let e=e1(this,hO);return null==e&&(0===this.type||1===this.type)?H_:e}set gasPrice(e){e3(this,hO,null==e?null:za(e,"gasPrice"))}get maxPriorityFeePerGas(){return e1(this,hT)??(2===this.type||3===this.type?H_:null)}set maxPriorityFeePerGas(e){e3(this,hT,null==e?null:za(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){return e1(this,hR)??(2===this.type||3===this.type?H_:null)}set maxFeePerGas(e){e3(this,hR,null==e?null:za(e,"maxFeePerGas"))}get data(){return e1(this,h_)}set data(e){e3(this,h_,zr(e))}get value(){return e1(this,hB)}set value(e){e3(this,hB,za(e,"value"))}get chainId(){return e1(this,hN)}set chainId(e){e3(this,hN,za(e))}get signature(){return e1(this,hD)||null}set signature(e){e3(this,hD,null==e?null:Hy.from(e))}isValid(){let e=this.signature;if(e&&!e.isValid())return!1;let t=this.authorizationList;if(t){for(let e of t)if(!e.signature.isValid())return!1}return!0}get accessList(){return(e1(this,hL)||null)??(1===this.type||2===this.type||3===this.type?[]:null)}set accessList(e){e3(this,hL,null==e?null:HI(e))}get authorizationList(){let e=e1(this,hz)||null;return null==e&&4===this.type?[]:e}set authorizationList(e){e3(this,hz,null==e?null:e.map(e=>({address:HS(e.address),nonce:za(null!=e.nonce?e.nonce:0),chainId:za(null!=e.chainId?e.chainId:0),signature:Hy.from(e.signature)})))}get maxFeePerBlobGas(){let e=e1(this,hM);return null==e&&3===this.type?H_:e}set maxFeePerBlobGas(e){e3(this,hM,null==e?null:za(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=e1(this,hU);return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){j4(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)j4(ze(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}e3(this,hU,e)}get blobs(){return null==e1(this,hj)?null:e1(this,hj).map(e=>Object.assign({},e))}set blobs(e){if(null==e)return void e3(this,hj,null);let t=[],r=[];for(let n=0;n<e.length;n++){let s=e[n];if(ze(s,!0)||s instanceof Uint8Array){j6(e1(this,hF),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=j9(s);if(j4(e.length<=131072,"blob is too large",`blobs[${n}]`,s),131072!==e.length){let t=new Uint8Array(131072);t.set(e),e=t}let o=e1(this,hF).blobToKzgCommitment(e),a=zr(e1(this,hF).computeBlobKzgProof(e,o));t.push({data:zr(e),commitment:zr(o),proof:a}),r.push(HN(1,o))}else{let e=zr(s.data),n=zr(s.commitment),o=zr(s.proof);t.push({data:e,commitment:n,proof:o}),r.push(HN(1,n))}}e3(this,hj,t),e3(this,hU,r)}get kzg(){return e1(this,hF)}set kzg(e){null==e?e3(this,hF,null):e3(this,hF,{blobToKzgCommitment:t=>{if("computeBlobProof"in e){if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return j9(e.blobToKzgCommitment(zr(t)))}else if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return j9(e.blobToKzgCommitment(t));if("blobToKZGCommitment"in e&&"function"==typeof e.blobToKZGCommitment)return j9(e.blobToKZGCommitment(zr(t)));j4(!1,"unsupported KZG library","kzg",e)},computeBlobKzgProof:(t,r)=>"computeBlobProof"in e&&"function"==typeof e.computeBlobProof?j9(e.computeBlobProof(zr(t),zr(r))):"computeBlobKzgProof"in e&&"function"==typeof e.computeBlobKzgProof?e.computeBlobKzgProof(t,r):"computeBlobKZGProof"in e&&"function"==typeof e.computeBlobKZGProof?j9(e.computeBlobKZGProof(zr(t),zr(r))):void j4(!1,"unsupported KZG library","kzg",e)})}get blobWrapperVersion(){return e1(this,h$)}set blobWrapperVersion(e){e3(this,h$,e)}get hash(){return null==this.signature?null:$d(e6(this,hH,hV).call(this,!0,!1))}get unsignedHash(){return $d(this.unsignedSerialized)}get from(){var e,t,r;let n;return null==this.signature?null:(e=this.unsignedHash,t=this.signature.getCanonical(),HS($d("0x"+("string"==typeof(r=Hb.recoverPublicKey(e,t))?Hb.computePublicKey(r,!1):r.publicKey).substring(4)).substring(26)))}get fromPublicKey(){return null==this.signature?null:Hb.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return null!=this.signature}get serialized(){return e6(this,hH,hV).call(this,!0,!0)}get unsignedSerialized(){return e6(this,hH,hV).call(this,!1,!1)}inferType(){let e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){let e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList,n=null!=e1(this,hM)||e1(this,hU);null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&j6(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),j6(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),j6(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let s=[];return null!=this.type?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):t?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(n&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return e.from(this)}toJSON(){let e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[HB](){return this.toString()}toString(){let e=[],t=t=>{let r=this[t];"string"==typeof r&&(r=JSON.stringify(r)),e.push(`${t}: ${r}`)};this.type&&t("type"),t("to"),t("data"),t("nonce"),t("gasLimit"),t("value"),null!=this.chainId&&t("chainId"),this.signature&&(t("from"),e.push(`signature: ${this.signature.toString()}`));let r=this.authorizationList;if(r){let t=[];for(let e of r){let r=[];r.push(`address: ${JSON.stringify(e.address)}`),null!=e.nonce&&r.push(`nonce: ${e.nonce}`),null!=e.chainId&&r.push(`chainId: ${e.chainId}`),e.signature&&r.push(`signature: ${e.signature.toString()}`),t.push(`Authorization { ${r.join(", ")} }`)}e.push(`authorizations: [ ${t.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(t){if(null==t)return new e;if("string"==typeof t){let r=j9(t);if(r[0]>=127)return e.from(function(e){let t=zg(e);j4(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);let r={type:0,nonce:HM(t[0],"nonce"),gasPrice:HU(t[1],"gasPrice"),gasLimit:HU(t[2],"gasLimit"),to:HD(t[3]),value:HU(t[4],"value"),data:zr(t[5]),chainId:H_};if(6===t.length)return r;let n=HU(t[6],"v"),s=HU(t[7],"r"),o=HU(t[8],"s");if(s===H_&&o===H_)r.chainId=n;else{let e=(n-HT)/HP;e<H_&&(e=H_),r.chainId=e,j4(e!==H_||n===HC||n===HO,"non-canonical legacy v","v",t[6]),r.signature=Hy.from({r:zs(t[7],32),s:zs(t[8],32),v:n})}return r}(r));switch(r[0]){case 1:return e.from(function(e){let t=zg(j9(e).slice(1));j4(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",zr(e));let r={type:1,chainId:HU(t[0],"chainId"),nonce:HM(t[1],"nonce"),gasPrice:HU(t[2],"gasPrice"),gasLimit:HU(t[3],"gasLimit"),to:HD(t[4]),value:HU(t[5],"value"),data:zr(t[6]),accessList:HL(t[7],"accessList")};return 8===t.length||Hz(r,t.slice(8)),r}(r));case 2:return e.from(function(e){let t=zg(j9(e).slice(1));j4(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",zr(e));let r={type:2,chainId:HU(t[0],"chainId"),nonce:HM(t[1],"nonce"),maxPriorityFeePerGas:HU(t[2],"maxPriorityFeePerGas"),maxFeePerGas:HU(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:HU(t[4],"gasLimit"),to:HD(t[5]),value:HU(t[6],"value"),data:zr(t[7]),accessList:HL(t[8],"accessList")};return 9===t.length||Hz(r,t.slice(9)),r}(r));case 3:return e.from(function(e){let t=zg(j9(e).slice(1)),r="3",n=null,s=null;if(4===t.length&&Array.isArray(t[0])){r="3 (network format)";let e=t[1],n=t[2],o=t[3];j4(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),j4(Array.isArray(n),"invalid network format: commitments not an array","fields[2]",n),j4(Array.isArray(o),"invalid network format: proofs not an array","fields[3]",o),j4(e.length===n.length,"invalid network format: blobs/commitments length mismatch","fields",t),j4(e.length===o.length,"invalid network format: blobs/proofs length mismatch","fields",t),s=[];for(let r=0;r<t[1].length;r++)s.push({data:e[r],commitment:n[r],proof:o[r]});t=t[0]}else if(5===t.length&&Array.isArray(t[0])){r="3 (EIP-7594 network format)",n=zu(t[1]);let e=t[2],o=t[3],a=t[4];j4(1===n,`unsupported EIP-7594 network format version: ${n}`,"fields[1]",n),j4(Array.isArray(e),"invalid EIP-7594 network format: blobs not an array","fields[2]",e),j4(Array.isArray(o),"invalid EIP-7594 network format: commitments not an array","fields[3]",o),j4(Array.isArray(a),"invalid EIP-7594 network format: proofs not an array","fields[4]",a),j4(e.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",t),j4(128*e.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),s=[];for(let t=0;t<e.length;t++){let r=[];for(let e=0;e<128;e++)r.push(a[128*t+e]);s.push({data:e[t],commitment:o[t],proof:zn(r)})}t=t[0]}j4(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${r}`,"data",zr(e));let o={type:3,chainId:HU(t[0],"chainId"),nonce:HM(t[1],"nonce"),maxPriorityFeePerGas:HU(t[2],"maxPriorityFeePerGas"),maxFeePerGas:HU(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:HU(t[4],"gasLimit"),to:HD(t[5]),value:HU(t[6],"value"),data:zr(t[7]),accessList:HL(t[8],"accessList"),maxFeePerBlobGas:HU(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10],blobWrapperVersion:n};s&&(o.blobs=s),j4(null!=o.to,`invalid address for transaction type: ${r}`,"data",e),j4(Array.isArray(o.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let t=0;t<o.blobVersionedHashes.length;t++)j4(ze(o.blobVersionedHashes[t],32),`invalid blobVersionedHash at index ${t}: must be length 32`,"data",e);return 11===t.length||Hz(o,t.slice(11)),o}(r));case 4:return e.from(function(e){let t=zg(j9(e).slice(1));j4(Array.isArray(t)&&(10===t.length||13===t.length),"invalid field count for transaction type: 4","data",zr(e));let r={type:4,chainId:HU(t[0],"chainId"),nonce:HM(t[1],"nonce"),maxPriorityFeePerGas:HU(t[2],"maxPriorityFeePerGas"),maxFeePerGas:HU(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:HU(t[4],"gasLimit"),to:HD(t[5]),value:HU(t[6],"value"),data:zr(t[7]),accessList:HL(t[8],"accessList"),authorizationList:function(e,t){try{if(!Array.isArray(e))throw Error("authorizationList: invalid array");let t=[];for(let r=0;r<e.length;r++){let n=e[r];if(!Array.isArray(n))throw Error(`authorization[${r}]: invalid array`);if(6!==n.length)throw Error(`authorization[${r}]: wrong length`);if(!n[1])throw Error(`authorization[${r}]: null address`);t.push({address:HD(n[1]),nonce:HU(n[2],"nonce"),chainId:HU(n[0],"chainId"),signature:Hy.from({yParity:HM(n[3],"yParity"),r:zs(n[4],32),s:zs(n[5],32)})})}return t}catch(r){j4(!1,r.message,t,e)}}(t[9],"authorizationList")};return 10===t.length||Hz(r,t.slice(10)),r}(r))}j6(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let r=new e;return null!=t.type&&(r.type=t.type),null!=t.to&&(r.to=t.to),null!=t.nonce&&(r.nonce=t.nonce),null!=t.gasLimit&&(r.gasLimit=t.gasLimit),null!=t.gasPrice&&(r.gasPrice=t.gasPrice),null!=t.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas),null!=t.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas),null!=t.maxFeePerBlobGas&&(r.maxFeePerBlobGas=t.maxFeePerBlobGas),null!=t.data&&(r.data=t.data),null!=t.value&&(r.value=t.value),null!=t.chainId&&(r.chainId=t.chainId),null!=t.signature&&(r.signature=Hy.from(t.signature)),null!=t.accessList&&(r.accessList=t.accessList),null!=t.authorizationList&&(r.authorizationList=t.authorizationList),null!=t.blobVersionedHashes&&(r.blobVersionedHashes=t.blobVersionedHashes),null!=t.kzg&&(r.kzg=t.kzg),null!=t.blobWrapperVersion&&(r.blobWrapperVersion=t.blobWrapperVersion),null!=t.blobs&&(r.blobs=t.blobs),null!=t.hash&&(j4(r.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),j4(r.hash===t.hash,"hash mismatch","tx",t)),null!=t.from&&(j4(r.isSigned(),"unsigned transaction cannot define '.from'","tx",t),j4(r.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),r}};function HH({derivationPath:e,rawTransaction:t},{sessionId:r,onInteractionRequested:n}){let s=new Th({dmk:vd,sessionId:r}).build(),{from:o,...a}=t,l=tt(H$.from(a).unsignedSerialized);if(!l)throw Error("Failed to convert transaction to Uint8Array");let{observable:u,cancel:c}=s.signTransaction(e,l);return{promise:new Promise((e,t)=>{u.subscribe({next:r=>{switch(r.status){case r_.NotStarted:break;case r_.Pending:{let{intermediateValue:{requiredUserInteraction:e}}=r;null==n||n(e);break}case r_.Stopped:t(new vr(vs));break;case r_.Completed:{let{output:t}=r;e({serialized:H$.from({...a,from:o,signature:t}).serialized});break}case r_.Error:{let{error:e}=r;t(vu(e))}}}})}),cancel:c}}function HV({derivationPath:e,transaction:t},{sessionId:r,onInteractionRequested:n}){let s=new jK({dmk:vd,sessionId:r,originToken:"Solana"}).build(),o=function(e){if(0===e.length)return new Uint8Array;if(!/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))return null;try{let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}catch{return Uint8Array.from(eZ.from(e,"base64"))}}(t);if(!o)throw Error("Failed to convert transaction to Uint8Array");let{observable:a,cancel:l}=s.signTransaction(e,o);return{promise:new Promise((e,t)=>{a.subscribe({next:r=>{switch(r.status){case r_.NotStarted:break;case r_.Pending:{let{intermediateValue:{requiredUserInteraction:e}}=r;null==n||n(e);break}case r_.Stopped:t(new vr(vs));break;case r_.Completed:{let{output:t}=r;e({signature:t});break}case r_.Error:{let{error:e}=r;t(vu(e))}}}})}),cancel:l}}function Hq({derivationPath:e,message:t},{sessionId:r,onInteractionRequested:n}){let{observable:s,cancel:o}=new Th({dmk:vd,sessionId:r}).build().signMessage(e,t);return{promise:new Promise((e,t)=>{s.subscribe({next:r=>{switch(r.status){case r_.NotStarted:break;case r_.Pending:{let{intermediateValue:{requiredUserInteraction:e}}=r;null==n||n(e);break}case r_.Stopped:t(new vr(vs));break;case r_.Completed:{let{output:t}=r;e(Hy.from(t).serialized);break}case r_.Error:{let{error:e}=r;t(vu(e))}}}})}),cancel:o}}function HG({derivationPath:e,rawTypedData:t},{sessionId:r,onInteractionRequested:n}){let s=new Th({dmk:vd,sessionId:r}).build(),o="string"==typeof t?JSON.parse(t):t,{observable:a,cancel:l}=s.signTypedData(e,o);return{promise:new Promise((e,t)=>{a.subscribe({next:r=>{switch(r.status){case r_.NotStarted:break;case r_.Pending:{let{intermediateValue:{requiredUserInteraction:e}}=r;null==n||n(e);break}case r_.Stopped:t(new vr(vs));break;case r_.Completed:{let{output:t}=r;e(Hy.from(t).serialized);break}case r_.Error:{let{error:e}=r;t(vu(e))}}}})}),cancel:l}}function HW({derivationPath:e,message:t},{sessionId:r,onInteractionRequested:n}){let{observable:s,cancel:o}=new jK({dmk:vd,sessionId:r}).build().signMessage(e,t);return{promise:new Promise((e,t)=>{s.subscribe({next:r=>{switch(r.status){case r_.NotStarted:break;case r_.Pending:{let{intermediateValue:{requiredUserInteraction:e}}=r;null==n||n(e);break}case r_.Stopped:t(new vr(vs));break;case r_.Completed:{let{output:t}=r;e(t.signature);break}case r_.Error:{let{error:e}=r;t(vu(e))}}}})}),cancel:o}}hk=new WeakMap,hI=new WeakMap,h_=new WeakMap,hP=new WeakMap,hC=new WeakMap,hO=new WeakMap,hT=new WeakMap,hR=new WeakMap,hB=new WeakMap,hN=new WeakMap,hD=new WeakMap,hL=new WeakMap,hM=new WeakMap,hU=new WeakMap,hF=new WeakMap,hj=new WeakMap,hz=new WeakMap,h$=new WeakMap,hH=new WeakSet,hV=function(e,t){j6(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let r=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){let r=[HF(e.nonce,"nonce"),HF(e.gasPrice||0,"gasPrice"),HF(e.gasLimit,"gasLimit"),e.to||"0x",HF(e.value,"value"),e.data],n=H_;if(e.chainId!=H_)n=za(e.chainId,"tx.chainId"),j4(!t||null==t.networkV||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){let t=e.signature.legacyChainId;null!=t&&(n=t)}if(!t)return n!==H_&&(r.push(zd(n)),r.push("0x"),r.push("0x")),zb(r);let s=BigInt(27+t.yParity);return n!==H_?s=Hy.getChainIdV(n,t.v):BigInt(t.v)!==s&&j4(!1,"tx.chainId/sig.v mismatch","sig",t),r.push(zd(s)),r.push(zd(t.r)),r.push(zd(t._s)),zb(r)}(this,r);case 1:let n=[HF(this.chainId,"chainId"),HF(this.nonce,"nonce"),HF(this.gasPrice||0,"gasPrice"),HF(this.gasLimit,"gasLimit"),this.to||"0x",HF(this.value,"value"),this.data,Hj(this.accessList||[])];return r&&(n.push(HF(r.yParity,"recoveryParam")),n.push(zd(r.r)),n.push(zd(r.s))),zn(["0x01",zb(n)]);case 2:let s=[HF(this.chainId,"chainId"),HF(this.nonce,"nonce"),HF(this.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),HF(this.maxFeePerGas||0,"maxFeePerGas"),HF(this.gasLimit,"gasLimit"),this.to||"0x",HF(this.value,"value"),this.data,Hj(this.accessList||[])];return r&&(s.push(HF(r.yParity,"yParity")),s.push(zd(r.r)),s.push(zd(r.s))),zn(["0x02",zb(s)]);case 3:return function(e,t,r){let n=[HF(e.chainId,"chainId"),HF(e.nonce,"nonce"),HF(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),HF(e.maxFeePerGas||0,"maxFeePerGas"),HF(e.gasLimit,"gasLimit"),e.to||Hi,HF(e.value,"value"),e.data,Hj(e.accessList||[]),HF(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),function(e,t){j4(Array.isArray(e),`invalid ${t}`,"value",e);for(let t=0;t<e.length;t++)j4(ze(e[t],32),"invalid ${ param } hash",`value[${t}]`,e[t]);return e}(e.blobVersionedHashes||[],"blobVersionedHashes")];if(t&&(n.push(HF(t.yParity,"yParity")),n.push(zd(t.r)),n.push(zd(t.s)),r)){if(null!=e.blobWrapperVersion){let t=zd(e.blobWrapperVersion),s=[];for(let{proof:e}of r){let t=j9(e),r=t.length/128;for(let e=0;e<t.length;e+=r)s.push(t.subarray(e,e+r))}return zn(["0x03",zb([n,t,r.map(e=>e.data),r.map(e=>e.commitment),s])])}return zn(["0x03",zb([n,r.map(e=>e.data),r.map(e=>e.commitment),r.map(e=>e.proof)])])}return zn(["0x03",zb(n)])}(this,r,t?this.blobs:null);case 4:let o=[HF(this.chainId,"chainId"),HF(this.nonce,"nonce"),HF(this.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),HF(this.maxFeePerGas||0,"maxFeePerGas"),HF(this.gasLimit,"gasLimit"),this.to||"0x",HF(this.value,"value"),this.data,Hj(this.accessList||[]),(this.authorizationList||[]).map(e=>[HF(e.chainId,"chainId"),e.address,HF(e.nonce,"nonce"),HF(e.signature.yParity,"yParity"),zd(e.signature.r),zd(e.signature._s)])];return r&&(o.push(HF(r.yParity,"yParity")),o.push(zd(r.r)),o.push(zd(r.s))),zn(["0x04",zb(o)])}j6(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}}),ef("bIMcy",function(e,r){"use strict";t(e.exports,"Buffer",function(){return n},function(e){return n=e}),t(e.exports,"SlowBuffer",function(){return s},function(e){return s=e}),t(e.exports,"INSPECT_MAX_BYTES",function(){return o},function(e){return o=e}),t(e.exports,"kMaxLength",function(){return a},function(e){return a=e});var n,s,o,a,l=ed("65afk"),u=ed("be71O");let c="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function d(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,f.prototype),t}function f(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return g(e)}return h(e,t,r)}function h(e,t,r){if("string"==typeof e){var n=e,s=t;if(("string"!=typeof s||""===s)&&(s="utf8"),!f.isEncoding(s))throw TypeError("Unknown encoding: "+s);let r=0|v(n,s),o=d(r),a=o.write(n,s);return a!==r&&(o=o.slice(0,a)),o}if(ArrayBuffer.isView(e)){var o=e;if($(o,Uint8Array)){let e=new Uint8Array(o);return y(e.buffer,e.byteOffset,e.byteLength)}return m(o)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if($(e,ArrayBuffer)||e&&$(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&($(e,SharedArrayBuffer)||e&&$(e.buffer,SharedArrayBuffer)))return y(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return f.from(a,t,r);let l=function(e){if(f.isBuffer(e)){let t=0|b(e.length),r=d(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?d(0):m(e):"Buffer"===e.type&&Array.isArray(e.data)?m(e.data):void 0}(e);if(l)return l;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function p(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function g(e){return p(e),d(e<0?0:0|b(e))}function m(e){let t=e.length<0?0:0|b(e.length),r=d(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function y(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),f.prototype),n}function b(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function v(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||$(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let s=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(s)return n?-1:F(e).length;t=(""+t).toLowerCase(),s=!0}}function x(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let s="";for(let n=t;n<r;++n)s+=H[e[n]];return s}(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let s=t;s<r;++s)n+=String.fromCharCode(127&e[s]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let s=t;s<r;++s)n+=String.fromCharCode(e[s]);return n}(this,t,r);case"base64":var s,o,a;return s=this,o=t,a=r,0===o&&a===s.length?l.fromByteArray(s):l.fromByteArray(s.slice(o,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),s="";for(let e=0;e<n.length-1;e+=2)s+=String.fromCharCode(n[e]+256*n[e+1]);return s}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function w(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function E(e,t,r,n,s){var o;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(o=r*=1)!=o&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(s)return -1;else r=e.length-1;else if(r<0)if(!s)return -1;else r=0;if("string"==typeof t&&(t=f.from(t,n)),f.isBuffer(t))return 0===t.length?-1:A(e,t,r,n,s);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(s)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return A(e,[t],r,n,s)}throw TypeError("val must be string, number or Buffer")}function A(e,t,r,n,s){let o,a=1,l=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;a=2,l/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(s){let n=-1;for(o=r;o<l;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*a}else -1!==n&&(o-=o-n),n=-1}else for(r+u>l&&(r=l-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return -1}function S(e,t,r){r=Math.min(e.length,r);let n=[],s=t;for(;s<r;){let t=e[s],o=null,a=t>239?4:t>223?3:t>191?2:1;if(s+a<=r){let r,n,l,u;switch(a){case 1:t<128&&(o=t);break;case 2:(192&(r=e[s+1]))==128&&(u=(31&t)<<6|63&r)>127&&(o=u);break;case 3:r=e[s+1],n=e[s+2],(192&r)==128&&(192&n)==128&&(u=(15&t)<<12|(63&r)<<6|63&n)>2047&&(u<55296||u>57343)&&(o=u);break;case 4:r=e[s+1],n=e[s+2],l=e[s+3],(192&r)==128&&(192&n)==128&&(192&l)==128&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&l)>65535&&u<1114112&&(o=u)}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),s+=a}var o=n;let a=o.length;if(a<=4096)return String.fromCharCode.apply(String,o);let l="",u=0;for(;u<a;)l+=String.fromCharCode.apply(String,o.slice(u,u+=4096));return l}function k(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function I(e,t,r,n,s,o){if(!f.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function _(e,t,r,n,s){D(t,n,s,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function P(e,t,r,n,s){D(t,n,s,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function C(e,t,r,n,s,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function O(e,t,r,n,s){return t*=1,r>>>=0,s||C(e,t,r,4,34028234663852886e22,-34028234663852886e22),u.write(e,t,r,n,23,4),r+4}function T(e,t,r,n,s){return t*=1,r>>>=0,s||C(e,t,r,8,17976931348623157e292,-17976931348623157e292),u.write(e,t,r,n,52,8),r+8}n=f,s=function(e){return+e!=e&&(e=0),f.alloc(+e)},o=50,a=0x7fffffff,f.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(e,t,r){return h(e,t,r)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(e,t,r){return(p(e),e<=0)?d(e):void 0!==t?"string"==typeof r?d(e).fill(t,r):d(e).fill(t):d(e)},f.allocUnsafe=function(e){return g(e)},f.allocUnsafeSlow=function(e){return g(e)},f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if($(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),$(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let s=0,o=Math.min(r,n);s<o;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:+(n<r)},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=f.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){let t=e[r];if($(t,Uint8Array))s+t.length>n.length?(f.isBuffer(t)||(t=f.from(t)),t.copy(n,s)):Uint8Array.prototype.set.call(n,t,s);else if(f.isBuffer(t))t.copy(n,s);else throw TypeError('"list" argument must be an Array of Buffers');s+=t.length}return n},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)w(this,t,t+1);return this},f.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},f.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},f.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?S(this,0,e):x.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(e){if(!f.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){let e="",t=o;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},c&&(f.prototype[c]=f.prototype.inspect),f.prototype.compare=function(e,t,r,n,s){if($(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,s>>>=0,this===e)return 0;let o=s-n,a=r-t,l=Math.min(o,a),u=this.slice(n,s),c=e.slice(t,r);for(let e=0;e<l;++e)if(u[e]!==c[e]){o=u[e],a=c[e];break}return o<a?-1:+(a<o)},f.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},f.prototype.indexOf=function(e,t,r){return E(this,e,t,r,!0)},f.prototype.lastIndexOf=function(e,t,r){return E(this,e,t,r,!1)},f.prototype.write=function(e,t,r,n){var s,o,a,l,u,c,d,f;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let p=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let s;r=Number(r)||0;let o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;let a=t.length;for(n>a/2&&(n=a/2),s=0;s<n;++s){var l;let n=parseInt(t.substr(2*s,2),16);if((l=n)!=l)break;e[r+s]=n}return s}(this,e,t,r);case"utf8":case"utf-8":return s=t,o=r,z(F(e,this.length-s),this,s,o);case"ascii":case"latin1":case"binary":return a=t,l=r,z(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,a,l);case"base64":return u=t,c=r,z(j(e),this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d=t,f=r,z(function(e,t){let r,n,s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,s.push(r%256),s.push(n);return s}(e,this.length-d),this,d,f);default:if(p)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,f.prototype),n},f.prototype.readUintLE=f.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e],s=1,o=0;for(;++o<t&&(s*=256);)n+=this[e+o]*s;return n},f.prototype.readUintBE=f.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e+--t],s=1;for(;t>0&&(s*=256);)n+=this[e+--t]*s;return n},f.prototype.readUint8=f.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readBigUInt64LE=V(function(e){L(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&M(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],s=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(n)+(BigInt(s)<<BigInt(32))}),f.prototype.readBigUInt64BE=V(function(e){L(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&M(e,this.length-8);let n=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],s=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(s)}),f.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e],s=1,o=0;for(;++o<t&&(s*=256);)n+=this[e+o]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},f.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=t,s=1,o=this[e+--n];for(;n>0&&(s*=256);)o+=this[e+--n]*s;return o>=(s*=128)&&(o-=Math.pow(2,8*t)),o},f.prototype.readInt8=function(e,t){return(e>>>=0,t||k(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||k(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},f.prototype.readInt16BE=function(e,t){e>>>=0,t||k(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readBigInt64LE=V(function(e){L(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&M(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),f.prototype.readBigInt64BE=V(function(e){L(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&M(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),f.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),u.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),u.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),u.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),u.read(this,e,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;I(this,e,t,r,n,0)}let s=1,o=0;for(this[t]=255&e;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;I(this,e,t,r,n,0)}let s=r-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r},f.prototype.writeUint8=f.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeBigUInt64LE=V(function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=V(function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}let s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},f.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}let s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},f.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeBigInt64LE=V(function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=V(function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(e,t,r){return O(this,e,t,!0,r)},f.prototype.writeFloatBE=function(e,t,r){return O(this,e,t,!1,r)},f.prototype.writeDoubleLE=function(e,t,r){return T(this,e,t,!0,r)},f.prototype.writeDoubleBE=function(e,t,r){return T(this,e,t,!1,r)},f.prototype.copy=function(e,t,r,n){if(!f.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let s=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),s},f.prototype.fill=function(e,t,r,n){let s;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{let o=f.isBuffer(e)?e:f.from(e,n),a=o.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};let R={};function B(e,t,r){R[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function N(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function D(e,t,r,n,s,o){if(e>r||e<t){let n,s="bigint"==typeof t?"n":"";throw n=o>3?0===t||t===BigInt(0)?`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:`>= ${t}${s} and <= ${r}${s}`,new R.ERR_OUT_OF_RANGE("value",n,e)}L(s,"offset"),(void 0===n[s]||void 0===n[s+o])&&M(s,n.length-(o+1))}function L(e,t){if("number"!=typeof e)throw new R.ERR_INVALID_ARG_TYPE(t,"number",e)}function M(e,t,r){if(Math.floor(e)!==e)throw L(e,r),new R.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new R.ERR_BUFFER_OUT_OF_BOUNDS;throw new R.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}B("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),B("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?s=N(String(r)):"bigint"==typeof r&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=N(s)),s+="n"),n+=` It must be ${t}. Received ${s}`},RangeError);let U=/[^+/0-9A-Za-z-_]/g;function F(e,t){let r;t=t||1/0;let n=e.length,s=null,o=[];for(let a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!s){if(r>56319||a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(t-=3)>-1&&o.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function j(e){return l.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,n){let s;for(s=0;s<n&&!(s+r>=t.length)&&!(s>=e.length);++s)t[s+r]=e[s];return s}function $(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let H=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let s=0;s<16;++s)t[n+s]=e[r]+e[s]}return t}();function V(e){return"undefined"==typeof BigInt?q:e}function q(){throw Error("BigInt not supported")}}),ef("65afk",function(e,r){"use strict";t(e.exports,"toByteArray",function(){return n},function(e){return n=e}),t(e.exports,"fromByteArray",function(){return s},function(e){return s=e});for(var n=function(e){var t,r,n=f(e),s=n[0],o=n[1],u=new l((s+o)*3/4-o),c=0,d=o>0?s-4:s;for(r=0;r<d;r+=4)t=a[e.charCodeAt(r)]<<18|a[e.charCodeAt(r+1)]<<12|a[e.charCodeAt(r+2)]<<6|a[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===o&&(t=a[e.charCodeAt(r)]<<2|a[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===o&&(t=a[e.charCodeAt(r)]<<10|a[e.charCodeAt(r+1)]<<4|a[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},s=function(e){for(var t,r=e.length,n=r%3,s=[],a=0,l=r-n;a<l;a+=16383)s.push(function(e,t,r){for(var n,s=[],a=t;a<r;a+=3)n=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(o[n>>18&63]+o[n>>12&63]+o[n>>6&63]+o[63&n]);return s.join("")}(e,a,a+16383>l?l:a+16383));return 1===n?s.push(o[(t=e[r-1])>>2]+o[t<<4&63]+"=="):2===n&&s.push(o[(t=(e[r-2]<<8)+e[r-1])>>10]+o[t>>4&63]+o[t<<2&63]+"="),s.join("")},o=[],a=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,d=u.length;c<d;++c)o[c]=u[c],a[u.charCodeAt(c)]=c;function f(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}a[45]=62,a[95]=63}),ef("be71O",function(e,r){var n,s;t(e.exports,"read",function(){return n},function(e){return n=e}),t(e.exports,"write",function(){return s},function(e){return s=e}),n=function(e,t,r,n,s){var o,a,l=8*s-n-1,u=(1<<l)-1,c=u>>1,d=-7,f=r?s-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-d)-1,p>>=-d,d+=l;d>0;o=256*o+e[t+f],f+=h,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=n;d>0;a=256*a+e[t+f],f+=h,d-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},s=function(e,t,r,n,s,o){var a,l,u,c=8*o-s-1,d=(1<<c)-1,f=d>>1,h=5960464477539062e-23*(23===s),p=n?0:o-1,g=n?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(l=+!!isNaN(t),a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+f>=1?t+=h/u:t+=h*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=d?(l=0,a=d):a+f>=1?(l=(t*u-1)*Math.pow(2,s),a+=f):(l=t*Math.pow(2,f-1)*Math.pow(2,s),a=0));s>=8;e[r+p]=255&l,p+=g,l/=256,s-=8);for(a=a<<s|l,c+=s;c>0;e[r+p]=255&a,p+=g,a/=256,c-=8);e[r+p-g]|=128*m}}),ef("h3f2T",function(e,t){"use strict";function r(){return(null==ea?void 0:ea.crypto)||(null==ea?void 0:ea.msCrypto)||{}}function n(){let e=r();return e.subtle||e.webkitSubtle}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isBrowserCryptoAvailable=e.exports.getSubtleCrypto=e.exports.getBrowerCrypto=void 0,e.exports.getBrowerCrypto=r,e.exports.getSubtleCrypto=n,e.exports.isBrowserCryptoAvailable=function(){return!!r()&&!!n()}}),ef("dCyCI",function(e,t){"use strict";function r(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isBrowser=e.exports.isNode=e.exports.isReactNative=void 0,e.exports.isReactNative=r,e.exports.isNode=function(){return!1},e.exports.isBrowser=function(){return!r()}}),ef("8XKzF",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wNAF=function(e,t){return{constTimeNegate:a,hasPrecomputes:e=>1!==p(e),unsafeLadder(t,r,n=e.ZERO){let a=t;for(;r>s;)r&o&&(n=n.add(a)),a=a.double(),r>>=o;return n},precomputeWindow(e,r){let{windows:n,windowSize:s}=u(r,t),o=[],a=e,l=a;for(let e=0;e<n;e++){l=a,o.push(l);for(let e=1;e<s;e++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(r,n,s){let{windows:l,windowSize:c}=u(r,t),d=e.ZERO,f=e.BASE,h=BigInt(2**r-1),p=2**r,g=BigInt(r);for(let e=0;e<l;e++){let t=e*c,r=Number(s&h);s>>=g,r>c&&(r-=p,s+=o);let l=t+Math.abs(r)-1,u=e%2!=0,m=r<0;0===r?f=f.add(a(u,n[t])):d=d.add(a(m,n[l]))}return{p:d,f:f}},wNAFUnsafe(r,n,a,l=e.ZERO){let{windows:c,windowSize:d}=u(r,t),f=BigInt(2**r-1),h=2**r,p=BigInt(r);for(let e=0;e<c;e++){let t=e*d;if(a===s)break;let r=Number(a&f);if(a>>=p,r>d&&(r-=h,a+=o),0===r)continue;let u=n[t+Math.abs(r)-1];r<0&&(u=u.negate()),l=l.add(u)}return l},getPrecomputes(e,t,r){let n=f.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&f.set(t,r(n))),n},wNAFCached(e,t,r){let n=p(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let s=p(e);return 1===s?this.unsafeLadder(e,t,n):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),t,n)},setWindowSize(e,r){l(r,t),h.set(e,r),f.delete(e)}}},t.pippenger=function(e,t,r,s){if(c(r,e),d(s,t),r.length!==s.length)throw Error("arrays of points and scalars must have equal length");let o=e.ZERO,a=(0,n.bitLen)(BigInt(r.length)),l=a>12?a-3:a>4?a-2:a?2:1,u=(1<<l)-1,f=Array(u+1).fill(o),h=Math.floor((t.BITS-1)/l)*l,p=o;for(let e=h;e>=0;e-=l){f.fill(o);for(let t=0;t<s.length;t++){let n=Number(s[t]>>BigInt(e)&BigInt(u));f[n]=f[n].add(r[t])}let t=o;for(let e=f.length-1,r=o;e>0;e--)r=r.add(f[e]),t=t.add(r);if(p=p.add(t),0!==e)for(let e=0;e<l;e++)p=p.double()}return p},t.precomputeMSMUnsafe=function(e,t,r,n){l(n,t.BITS),c(r,e);let s=e.ZERO,o=2**n-1,a=Math.ceil(t.BITS/n),u=BigInt((1<<n)-1),f=r.map(e=>{let t=[];for(let r=0,n=e;r<o;r++)t.push(n),n=n.add(e);return t});return e=>{if(d(e,t),e.length>r.length)throw Error("array of scalars must be smaller than array of points");let o=s;for(let t=0;t<a;t++){if(o!==s)for(let e=0;e<n;e++)o=o.double();let r=BigInt(a*n-(t+1)*n);for(let t=0;t<e.length;t++){let n=Number(e[t]>>r&u);n&&(o=o.add(f[t][n-1]))}}return o}},t.validateBasic=function(e){return(0,r.validateField)(e.Fp),(0,n.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})};var r=ed("5a9aS"),n=ed("19JXl");let s=BigInt(0),o=BigInt(1);function a(e,t){let r=t.negate();return e?r:t}function l(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function u(e,t){return l(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function c(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function d(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let f=new WeakMap,h=new WeakMap;function p(e){return h.get(e)||1}}),ef("5a9aS",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isNegativeLE=void 0,e.exports.mod=d,e.exports.pow=f,e.exports.pow2=function(e,t,r){let s=e;for(;t-- >n;)s*=s,s%=r;return s},e.exports.invert=h,e.exports.tonelliShanks=p,e.exports.FpSqrt=g,e.exports.validateField=function(e){let t=m.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.validateObject)(e,t)},e.exports.FpPow=y,e.exports.FpInvertBatch=b,e.exports.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?h(r,e.ORDER):e.inv(r))},e.exports.FpLegendre=v,e.exports.FpIsSquare=function(e){let t=v(e.ORDER);return r=>{let n=t(e,r);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},e.exports.nLength=x,e.exports.Field=function(e,t,o=!1,a={}){let l;if(e<=n)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:u,nByteLength:c}=x(e,t);if(c>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let f=Object.freeze({ORDER:e,isLE:o,BITS:u,BYTES:c,MASK:(0,r.bitMask)(u),ZERO:n,ONE:s,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return n<=t&&t<e},is0:e=>e===n,isOdd:e=>(e&s)===s,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>y(f,e,t),div:(t,r)=>d(t*h(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>h(t,e),sqrt:a.sqrt||(t=>(l||(l=g(e)),l(f,t))),invertBatch:e=>b(f,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>o?(0,r.numberToBytesLE)(e,c):(0,r.numberToBytesBE)(e,c),fromBytes:e=>{if(e.length!==c)throw Error("Field.fromBytes: expected "+c+" bytes, got "+e.length);return o?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e)}});return Object.freeze(f)},e.exports.FpSqrtOdd=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},e.exports.FpSqrtEven=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},e.exports.hashToPrivateScalar=function(e,t,n=!1){let o=(e=(0,r.ensureBytes)("privateHash",e)).length,a=x(t).nByteLength+8;if(a<24||o<a||o>1024)throw Error("hashToPrivateScalar: expected "+a+"-1024 bytes of input, got "+o);return d(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-s)+s},e.exports.getFieldBytesLength=w,e.exports.getMinHashLength=E,e.exports.mapHashToField=function(e,t,n=!1){let o=e.length,a=w(t),l=E(t);if(o<16||o<l||o>1024)throw Error("expected "+l+"-1024 bytes of input, got "+o);let u=d(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-s)+s;return n?(0,r.numberToBytesLE)(u,a):(0,r.numberToBytesBE)(u,a)};var r=ed("19JXl");let n=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3),l=BigInt(4),u=BigInt(5),c=BigInt(8);function d(e,t){let r=e%t;return r>=n?r:t+r}function f(e,t,r){if(t<n)throw Error("invalid exponent, negatives unsupported");if(r<=n)throw Error("invalid modulus");if(r===s)return n;let o=s;for(;t>n;)t&s&&(o=o*e%r),e=e*e%r,t>>=s;return o}function h(e,t){if(e===n)throw Error("invert: expected non-zero number");if(t<=n)throw Error("invert: expected positive modulus, got "+t);let r=d(e,t),o=t,a=n,l=s,u=s,c=n;for(;r!==n;){let e=o/r,t=o%r,n=a-u*e,s=l-c*e;o=r,r=t,a=u,l=c,u=n,c=s}if(o!==s)throw Error("invert: does not exist");return d(a,t)}function p(e){let t,r,a,u=(e-s)/o;for(t=e-s,r=0;t%o===n;t/=o,r++);for(a=o;a<e&&f(a,u,e)!==e-s;a++)if(a>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+s)/l;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let c=(t+s)/o;return function(e,n){if(e.pow(n,u)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,a),t),d=e.pow(n,c),f=e.pow(n,t);for(;!e.eql(f,e.ONE);){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(f);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,s<<BigInt(o-t-1));l=e.sqr(r),d=e.mul(d,r),f=e.mul(f,l),o=t}return d}}function g(e){if(e%l===a){let t=(e+s)/l;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%c===u){let t=(e-u)/c;return function(e,r){let n=e.mul(r,o),s=e.pow(n,t),a=e.mul(r,s),l=e.mul(e.mul(a,o),s),u=e.mul(a,e.sub(l,e.ONE));if(!e.eql(e.sqr(u),r))throw Error("Cannot find square root");return u}}return p(e)}e.exports.isNegativeLE=(e,t)=>(d(e,t)&s)===s;let m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,r){if(r<n)throw Error("invalid exponent, negatives unsupported");if(r===n)return e.ONE;if(r===s)return t;let o=e.ONE,a=t;for(;r>n;)r&s&&(o=e.mul(o,a)),a=e.sqr(a),r>>=s;return o}function b(e,t){let r=Array(t.length),n=t.reduce((t,n,s)=>e.is0(n)?t:(r[s]=t,e.mul(t,n)),e.ONE),s=e.inv(n);return t.reduceRight((t,n,s)=>e.is0(n)?t:(r[s]=e.mul(t,r[s]),e.mul(t,n)),s),r}function v(e){let t=(e-s)/o;return(e,r)=>e.pow(r,t)}function x(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function w(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function E(e){let t=w(e);return t+Math.ceil(t/2)}}),ef("19JXl",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.notImplemented=e.exports.bitMask=void 0,e.exports.isBytes=o,e.exports.abytes=a,e.exports.abool=function(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)},e.exports.bytesToHex=u,e.exports.numberToHexUnpadded=c,e.exports.hexToNumber=d,e.exports.hexToBytes=p,e.exports.bytesToNumberBE=function(e){return d(u(e))},e.exports.bytesToNumberLE=function(e){return a(e),d(u(Uint8Array.from(e).reverse()))},e.exports.numberToBytesBE=g,e.exports.numberToBytesLE=function(e,t){return g(e,t).reverse()},e.exports.numberToVarBytesBE=function(e){return p(c(e))},e.exports.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=p(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(o(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let s=n.length;if("number"==typeof r&&s!==r)throw Error(e+" of length "+r+" expected, got "+s);return n},e.exports.concatBytes=m,e.exports.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},e.exports.utf8ToBytes=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))},e.exports.inRange=b,e.exports.aInRange=function(e,t,r,n){if(!b(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)},e.exports.bitLen=function(e){let t;for(t=0;e>r;e>>=n,t+=1);return t},e.exports.bitGet=function(e,t){return e>>BigInt(t)&n},e.exports.bitSet=function(e,t,s){return e|(s?n:r)<<BigInt(t)},e.exports.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=v(e),s=v(e),o=0,a=()=>{n.fill(1),s.fill(0),o=0},l=(...e)=>r(s,n,...e),u=(e=v())=>{s=l(x([0]),e),n=l(),0!==e.length&&(s=l(x([1]),e),n=l())},c=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=l()).slice();r.push(t),e+=n.length}return m(...r)};return(e,t)=>{let r;for(a(),u(e);!(r=t(c()));)u();return a(),r}},e.exports.validateObject=function(e,t,r={}){let n=(t,r,n)=>{let s=w[r];if("function"!=typeof s)throw Error("invalid validator function");let o=e[t];if((!n||void 0!==o)&&!s(o,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+o)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e},e.exports.memoized=function(e){let t=new WeakMap;return(r,...n)=>{let s=t.get(r);if(void 0!==s)return s;let o=e(r,...n);return t.set(r,o),o}};let r=BigInt(0),n=BigInt(1),s=BigInt(2);function o(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function a(e){if(!o(e))throw Error("Uint8Array expected")}let l=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function u(e){a(e);let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function c(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function d(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?r:BigInt("0x"+e)}let f={_0:48,_9:57,A:65,F:70,a:97,f:102};function h(e){return e>=f._0&&e<=f._9?e-f._0:e>=f.A&&e<=f.F?e-(f.A-10):e>=f.a&&e<=f.f?e-(f.a-10):void 0}function p(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,s=0;t<r;t++,s+=2){let r=h(e.charCodeAt(s)),o=h(e.charCodeAt(s+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[s]+e[s+1])+'" at index '+s);n[t]=16*r+o}return n}function g(e,t){return p(e.toString(16).padStart(2*t,"0"))}function m(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];a(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let s=e[t];r.set(s,n),n+=s.length}return r}let y=e=>"bigint"==typeof e&&r<=e;function b(e,t,r){return y(e)&&y(t)&&y(r)&&t<=e&&e<r}e.exports.bitMask=e=>(s<<BigInt(e-1))-n;let v=e=>new Uint8Array(e),x=e=>Uint8Array.from(e),w={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||o(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};e.exports.notImplemented=()=>{throw Error("not implemented")}}),ef("ct8eT",function(e,t){!function(e,t){"use strict";function r(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{d="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:ed("bHzfV").Buffer}catch(e){}function o(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function a(e,t,r){var n=o(e,r);return r-1>=t&&(n|=o(e,r-1)<<4),n}function l(e,t,n,s){for(var o=0,a=0,l=Math.min(e.length,n),u=t;u<l;u++){var c=e.charCodeAt(u)-48;o*=s,a=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&a<s,"Invalid character"),o+=a}return o}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return 0>e.cmp(t)?e:t},s.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,n):(this._parseBase(e,t,s),"le"===n&&this._initArray(this.toArray(),t,n)))},s.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<0x4000000?(this.words=[0x3ffffff&e],this.length=1):e<0x10000000000000?(this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff],this.length=2):(r(e<0x20000000000000),this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var s,o,a=0;a<this.length;a++)this.words[a]=0;var l=0;if("be"===n)for(a=e.length-1,s=0;a>=0;a-=3)o=e[a]|e[a-1]<<8|e[a-2]<<16,this.words[s]|=o<<l&0x3ffffff,this.words[s+1]=o>>>26-l&0x3ffffff,(l+=24)>=26&&(l-=26,s++);else if("le"===n)for(a=0,s=0;a<e.length;a+=3)o=e[a]|e[a+1]<<8|e[a+2]<<16,this.words[s]|=o<<l&0x3ffffff,this.words[s+1]=o>>>26-l&0x3ffffff,(l+=24)>=26&&(l-=26,s++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n,s=0;s<this.length;s++)this.words[s]=0;var o=0,l=0;if("be"===r)for(s=e.length-1;s>=t;s-=2)n=a(e,t,s)<<o,this.words[l]|=0x3ffffff&n,o>=18?(o-=18,l+=1,this.words[l]|=n>>>26):o+=8;else for(s=(e.length-t)%2==0?t+1:t;s<e.length;s+=2)n=a(e,t,s)<<o,this.words[l]|=0x3ffffff&n,o>=18?(o-=18,l+=1,this.words[l]|=n>>>26):o+=8;this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,s=1;s<=0x3ffffff;s*=t)n++;n--,s=s/t|0;for(var o=e.length-r,a=o%n,u=Math.min(o,o-a)+r,c=0,d=r;d<u;d+=n)c=l(e,d,d+n,t),this.imuln(s),this.words[0]+c<0x4000000?this.words[0]+=c:this._iaddn(c);if(0!==a){var f=1;for(c=l(e,d,e.length,t),d=0;d<a;d++)f*=t;this.imuln(f),this.words[0]+c<0x4000000?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){u(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=c}catch(e){s.prototype.inspect=c}else s.prototype.inspect=c;function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d,f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,0x2000000,0x290d741,0x1000000,0x2e90edd,0x39aa400,0x267bf47,0x1000000,0x290d741,1e7,0x12959c3,0x222c000,0x3bd7765,7529536,0xadcea1,0x1000000,0x1704f61,0x206fc40,0x2cddcf9,64e6,4084101,5153632,6436343,7962624,9765625,0xb54ba0,0xdaf26b,0x1069c00,0x138f9ad,243e5,0x1b4d89f,0x2000000,0x25528a1,0x2b54a20,0x3216b93,0x39aa400];function g(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var s=0|e.words[0],o=0|t.words[0],a=s*o,l=0x3ffffff&a,u=a/0x4000000|0;r.words[0]=l;for(var c=1;c<n;c++){for(var d=u>>>26,f=0x3ffffff&u,h=Math.min(c,t.length-1),p=Math.max(0,c-e.length+1);p<=h;p++){var g=c-p|0;d+=(a=(s=0|e.words[g])*(o=0|t.words[p])+f)/0x4000000|0,f=0x3ffffff&a}r.words[c]=0|f,u=0|d}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}s.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){for(var n="",s=0,o=0,a=0;a<this.length;a++){var l=this.words[a],u=((l<<s|o)&0xffffff).toString(16);o=l>>>24-s&0xffffff,(s+=2)>=26&&(s-=26,a--),n=0!==o||a!==this.length-1?f[6-u.length]+u+n:u+n}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],d=p[e];n="";var g=this.clone();for(g.negative=0;!g.isZero();){var m=g.modrn(d).toString(e);n=(g=g.idivn(d)).isZero()?m+n:f[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=0x4000000*this.words[1]:3===this.length&&1===this.words[2]?e+=0x10000000000000+0x4000000*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},d&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(d,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,n){this._strip();var s=this.byteLength(),o=n||Math.max(1,s);r(s<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var a=e.allocUnsafe?e.allocUnsafe(o):new e(o);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,s),a},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,s=0,o=0;s<this.length;s++){var a=this.words[s]<<o|n;e[r++]=255&a,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),6===o?(r<e.length&&(e[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,s=0,o=0;s<this.length;s++){var a=this.words[s]<<o|n;e[r--]=255&a,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),6===o?(r>=0&&(e[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return(8191&t)==0&&(r+=13,t>>>=13),(127&t)==0&&(r+=7,t>>>=7),(15&t)==0&&(r+=4,t>>>=4),(3&t)==0&&(r+=2,t>>>=2),(1&t)==0&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return r((this.negative|e.negative)==0),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return r((this.negative|e.negative)==0),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){this.length>e.length?(t=this,r=e):(t=e,r=this);for(var t,r,n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return r((this.negative|e.negative)==0),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var s=0;s<t;s++)this.words[s]=0x3ffffff&~this.words[s];return n>0&&(this.words[s]=~this.words[s]&0x3ffffff>>26-n),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,s=e%26;return this._expand(n+1),t?this.words[n]=this.words[n]|1<<s:this.words[n]=this.words[n]&~(1<<s),this._strip()},s.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var t,r,n,s=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+s,this.words[o]=0x3ffffff&t,s=t>>>26;for(;0!==s&&o<r.length;o++)t=(0|r.words[o])+s,this.words[o]=0x3ffffff&t,s=t>>>26;if(this.length=r.length,0!==s)this.words[this.length]=s,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,r,n=this.iadd(e);return e.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(t=this,r=e):(t=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(n=(0|t.words[a])-(0|r.words[a])+o)>>26,this.words[a]=0x3ffffff&n;for(;0!==o&&a<t.length;a++)o=(n=(0|t.words[a])+o)>>26,this.words[a]=0x3ffffff&n;if(0===o&&a<t.length&&t!==this)for(;a<t.length;a++)this.words[a]=t.words[a];return this.length=Math.max(this.length,a),t!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,s,o,a=e.words,l=t.words,u=r.words,c=0,d=0|a[0],f=8191&d,h=d>>>13,p=0|a[1],g=8191&p,m=p>>>13,y=0|a[2],b=8191&y,v=y>>>13,x=0|a[3],w=8191&x,E=x>>>13,A=0|a[4],S=8191&A,k=A>>>13,I=0|a[5],_=8191&I,P=I>>>13,C=0|a[6],O=8191&C,T=C>>>13,R=0|a[7],B=8191&R,N=R>>>13,D=0|a[8],L=8191&D,M=D>>>13,U=0|a[9],F=8191&U,j=U>>>13,z=0|l[0],$=8191&z,H=z>>>13,V=0|l[1],q=8191&V,G=V>>>13,W=0|l[2],K=8191&W,J=W>>>13,Z=0|l[3],Q=8191&Z,X=Z>>>13,Y=0|l[4],ee=8191&Y,et=Y>>>13,er=0|l[5],en=8191&er,ei=er>>>13,es=0|l[6],eo=8191&es,ea=es>>>13,el=0|l[7],eu=8191&el,ec=el>>>13,ed=0|l[8],ef=8191&ed,eh=ed>>>13,ep=0|l[9],eg=8191&ep,em=ep>>>13;r.negative=e.negative^t.negative,r.length=19,n=Math.imul(f,$);var ey=(c+n|0)+((8191&(s=(s=Math.imul(f,H))+Math.imul(h,$)|0))<<13)|0;c=((o=Math.imul(h,H))+(s>>>13)|0)+(ey>>>26)|0,ey&=0x3ffffff,n=Math.imul(g,$),s=(s=Math.imul(g,H))+Math.imul(m,$)|0,o=Math.imul(m,H),n=n+Math.imul(f,q)|0;var eb=(c+n|0)+((8191&(s=(s=s+Math.imul(f,G)|0)+Math.imul(h,q)|0))<<13)|0;c=((o=o+Math.imul(h,G)|0)+(s>>>13)|0)+(eb>>>26)|0,eb&=0x3ffffff,n=Math.imul(b,$),s=(s=Math.imul(b,H))+Math.imul(v,$)|0,o=Math.imul(v,H),n=n+Math.imul(g,q)|0,s=(s=s+Math.imul(g,G)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,G)|0,n=n+Math.imul(f,K)|0;var ev=(c+n|0)+((8191&(s=(s=s+Math.imul(f,J)|0)+Math.imul(h,K)|0))<<13)|0;c=((o=o+Math.imul(h,J)|0)+(s>>>13)|0)+(ev>>>26)|0,ev&=0x3ffffff,n=Math.imul(w,$),s=(s=Math.imul(w,H))+Math.imul(E,$)|0,o=Math.imul(E,H),n=n+Math.imul(b,q)|0,s=(s=s+Math.imul(b,G)|0)+Math.imul(v,q)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(g,K)|0,s=(s=s+Math.imul(g,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0,n=n+Math.imul(f,Q)|0;var ex=(c+n|0)+((8191&(s=(s=s+Math.imul(f,X)|0)+Math.imul(h,Q)|0))<<13)|0;c=((o=o+Math.imul(h,X)|0)+(s>>>13)|0)+(ex>>>26)|0,ex&=0x3ffffff,n=Math.imul(S,$),s=(s=Math.imul(S,H))+Math.imul(k,$)|0,o=Math.imul(k,H),n=n+Math.imul(w,q)|0,s=(s=s+Math.imul(w,G)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,G)|0,n=n+Math.imul(b,K)|0,s=(s=s+Math.imul(b,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(g,Q)|0,s=(s=s+Math.imul(g,X)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,X)|0,n=n+Math.imul(f,ee)|0;var ew=(c+n|0)+((8191&(s=(s=s+Math.imul(f,et)|0)+Math.imul(h,ee)|0))<<13)|0;c=((o=o+Math.imul(h,et)|0)+(s>>>13)|0)+(ew>>>26)|0,ew&=0x3ffffff,n=Math.imul(_,$),s=(s=Math.imul(_,H))+Math.imul(P,$)|0,o=Math.imul(P,H),n=n+Math.imul(S,q)|0,s=(s=s+Math.imul(S,G)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,G)|0,n=n+Math.imul(w,K)|0,s=(s=s+Math.imul(w,J)|0)+Math.imul(E,K)|0,o=o+Math.imul(E,J)|0,n=n+Math.imul(b,Q)|0,s=(s=s+Math.imul(b,X)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(g,ee)|0,s=(s=s+Math.imul(g,et)|0)+Math.imul(m,ee)|0,o=o+Math.imul(m,et)|0,n=n+Math.imul(f,en)|0;var eE=(c+n|0)+((8191&(s=(s=s+Math.imul(f,ei)|0)+Math.imul(h,en)|0))<<13)|0;c=((o=o+Math.imul(h,ei)|0)+(s>>>13)|0)+(eE>>>26)|0,eE&=0x3ffffff,n=Math.imul(O,$),s=(s=Math.imul(O,H))+Math.imul(T,$)|0,o=Math.imul(T,H),n=n+Math.imul(_,q)|0,s=(s=s+Math.imul(_,G)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,G)|0,n=n+Math.imul(S,K)|0,s=(s=s+Math.imul(S,J)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(w,Q)|0,s=(s=s+Math.imul(w,X)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,X)|0,n=n+Math.imul(b,ee)|0,s=(s=s+Math.imul(b,et)|0)+Math.imul(v,ee)|0,o=o+Math.imul(v,et)|0,n=n+Math.imul(g,en)|0,s=(s=s+Math.imul(g,ei)|0)+Math.imul(m,en)|0,o=o+Math.imul(m,ei)|0,n=n+Math.imul(f,eo)|0;var eA=(c+n|0)+((8191&(s=(s=s+Math.imul(f,ea)|0)+Math.imul(h,eo)|0))<<13)|0;c=((o=o+Math.imul(h,ea)|0)+(s>>>13)|0)+(eA>>>26)|0,eA&=0x3ffffff,n=Math.imul(B,$),s=(s=Math.imul(B,H))+Math.imul(N,$)|0,o=Math.imul(N,H),n=n+Math.imul(O,q)|0,s=(s=s+Math.imul(O,G)|0)+Math.imul(T,q)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(_,K)|0,s=(s=s+Math.imul(_,J)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(S,Q)|0,s=(s=s+Math.imul(S,X)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,X)|0,n=n+Math.imul(w,ee)|0,s=(s=s+Math.imul(w,et)|0)+Math.imul(E,ee)|0,o=o+Math.imul(E,et)|0,n=n+Math.imul(b,en)|0,s=(s=s+Math.imul(b,ei)|0)+Math.imul(v,en)|0,o=o+Math.imul(v,ei)|0,n=n+Math.imul(g,eo)|0,s=(s=s+Math.imul(g,ea)|0)+Math.imul(m,eo)|0,o=o+Math.imul(m,ea)|0,n=n+Math.imul(f,eu)|0;var eS=(c+n|0)+((8191&(s=(s=s+Math.imul(f,ec)|0)+Math.imul(h,eu)|0))<<13)|0;c=((o=o+Math.imul(h,ec)|0)+(s>>>13)|0)+(eS>>>26)|0,eS&=0x3ffffff,n=Math.imul(L,$),s=(s=Math.imul(L,H))+Math.imul(M,$)|0,o=Math.imul(M,H),n=n+Math.imul(B,q)|0,s=(s=s+Math.imul(B,G)|0)+Math.imul(N,q)|0,o=o+Math.imul(N,G)|0,n=n+Math.imul(O,K)|0,s=(s=s+Math.imul(O,J)|0)+Math.imul(T,K)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(_,Q)|0,s=(s=s+Math.imul(_,X)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,X)|0,n=n+Math.imul(S,ee)|0,s=(s=s+Math.imul(S,et)|0)+Math.imul(k,ee)|0,o=o+Math.imul(k,et)|0,n=n+Math.imul(w,en)|0,s=(s=s+Math.imul(w,ei)|0)+Math.imul(E,en)|0,o=o+Math.imul(E,ei)|0,n=n+Math.imul(b,eo)|0,s=(s=s+Math.imul(b,ea)|0)+Math.imul(v,eo)|0,o=o+Math.imul(v,ea)|0,n=n+Math.imul(g,eu)|0,s=(s=s+Math.imul(g,ec)|0)+Math.imul(m,eu)|0,o=o+Math.imul(m,ec)|0,n=n+Math.imul(f,ef)|0;var ek=(c+n|0)+((8191&(s=(s=s+Math.imul(f,eh)|0)+Math.imul(h,ef)|0))<<13)|0;c=((o=o+Math.imul(h,eh)|0)+(s>>>13)|0)+(ek>>>26)|0,ek&=0x3ffffff,n=Math.imul(F,$),s=(s=Math.imul(F,H))+Math.imul(j,$)|0,o=Math.imul(j,H),n=n+Math.imul(L,q)|0,s=(s=s+Math.imul(L,G)|0)+Math.imul(M,q)|0,o=o+Math.imul(M,G)|0,n=n+Math.imul(B,K)|0,s=(s=s+Math.imul(B,J)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(O,Q)|0,s=(s=s+Math.imul(O,X)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(_,ee)|0,s=(s=s+Math.imul(_,et)|0)+Math.imul(P,ee)|0,o=o+Math.imul(P,et)|0,n=n+Math.imul(S,en)|0,s=(s=s+Math.imul(S,ei)|0)+Math.imul(k,en)|0,o=o+Math.imul(k,ei)|0,n=n+Math.imul(w,eo)|0,s=(s=s+Math.imul(w,ea)|0)+Math.imul(E,eo)|0,o=o+Math.imul(E,ea)|0,n=n+Math.imul(b,eu)|0,s=(s=s+Math.imul(b,ec)|0)+Math.imul(v,eu)|0,o=o+Math.imul(v,ec)|0,n=n+Math.imul(g,ef)|0,s=(s=s+Math.imul(g,eh)|0)+Math.imul(m,ef)|0,o=o+Math.imul(m,eh)|0,n=n+Math.imul(f,eg)|0;var eI=(c+n|0)+((8191&(s=(s=s+Math.imul(f,em)|0)+Math.imul(h,eg)|0))<<13)|0;c=((o=o+Math.imul(h,em)|0)+(s>>>13)|0)+(eI>>>26)|0,eI&=0x3ffffff,n=Math.imul(F,q),s=(s=Math.imul(F,G))+Math.imul(j,q)|0,o=Math.imul(j,G),n=n+Math.imul(L,K)|0,s=(s=s+Math.imul(L,J)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,J)|0,n=n+Math.imul(B,Q)|0,s=(s=s+Math.imul(B,X)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,X)|0,n=n+Math.imul(O,ee)|0,s=(s=s+Math.imul(O,et)|0)+Math.imul(T,ee)|0,o=o+Math.imul(T,et)|0,n=n+Math.imul(_,en)|0,s=(s=s+Math.imul(_,ei)|0)+Math.imul(P,en)|0,o=o+Math.imul(P,ei)|0,n=n+Math.imul(S,eo)|0,s=(s=s+Math.imul(S,ea)|0)+Math.imul(k,eo)|0,o=o+Math.imul(k,ea)|0,n=n+Math.imul(w,eu)|0,s=(s=s+Math.imul(w,ec)|0)+Math.imul(E,eu)|0,o=o+Math.imul(E,ec)|0,n=n+Math.imul(b,ef)|0,s=(s=s+Math.imul(b,eh)|0)+Math.imul(v,ef)|0,o=o+Math.imul(v,eh)|0,n=n+Math.imul(g,eg)|0;var e_=(c+n|0)+((8191&(s=(s=s+Math.imul(g,em)|0)+Math.imul(m,eg)|0))<<13)|0;c=((o=o+Math.imul(m,em)|0)+(s>>>13)|0)+(e_>>>26)|0,e_&=0x3ffffff,n=Math.imul(F,K),s=(s=Math.imul(F,J))+Math.imul(j,K)|0,o=Math.imul(j,J),n=n+Math.imul(L,Q)|0,s=(s=s+Math.imul(L,X)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,X)|0,n=n+Math.imul(B,ee)|0,s=(s=s+Math.imul(B,et)|0)+Math.imul(N,ee)|0,o=o+Math.imul(N,et)|0,n=n+Math.imul(O,en)|0,s=(s=s+Math.imul(O,ei)|0)+Math.imul(T,en)|0,o=o+Math.imul(T,ei)|0,n=n+Math.imul(_,eo)|0,s=(s=s+Math.imul(_,ea)|0)+Math.imul(P,eo)|0,o=o+Math.imul(P,ea)|0,n=n+Math.imul(S,eu)|0,s=(s=s+Math.imul(S,ec)|0)+Math.imul(k,eu)|0,o=o+Math.imul(k,ec)|0,n=n+Math.imul(w,ef)|0,s=(s=s+Math.imul(w,eh)|0)+Math.imul(E,ef)|0,o=o+Math.imul(E,eh)|0,n=n+Math.imul(b,eg)|0;var eP=(c+n|0)+((8191&(s=(s=s+Math.imul(b,em)|0)+Math.imul(v,eg)|0))<<13)|0;c=((o=o+Math.imul(v,em)|0)+(s>>>13)|0)+(eP>>>26)|0,eP&=0x3ffffff,n=Math.imul(F,Q),s=(s=Math.imul(F,X))+Math.imul(j,Q)|0,o=Math.imul(j,X),n=n+Math.imul(L,ee)|0,s=(s=s+Math.imul(L,et)|0)+Math.imul(M,ee)|0,o=o+Math.imul(M,et)|0,n=n+Math.imul(B,en)|0,s=(s=s+Math.imul(B,ei)|0)+Math.imul(N,en)|0,o=o+Math.imul(N,ei)|0,n=n+Math.imul(O,eo)|0,s=(s=s+Math.imul(O,ea)|0)+Math.imul(T,eo)|0,o=o+Math.imul(T,ea)|0,n=n+Math.imul(_,eu)|0,s=(s=s+Math.imul(_,ec)|0)+Math.imul(P,eu)|0,o=o+Math.imul(P,ec)|0,n=n+Math.imul(S,ef)|0,s=(s=s+Math.imul(S,eh)|0)+Math.imul(k,ef)|0,o=o+Math.imul(k,eh)|0,n=n+Math.imul(w,eg)|0;var eC=(c+n|0)+((8191&(s=(s=s+Math.imul(w,em)|0)+Math.imul(E,eg)|0))<<13)|0;c=((o=o+Math.imul(E,em)|0)+(s>>>13)|0)+(eC>>>26)|0,eC&=0x3ffffff,n=Math.imul(F,ee),s=(s=Math.imul(F,et))+Math.imul(j,ee)|0,o=Math.imul(j,et),n=n+Math.imul(L,en)|0,s=(s=s+Math.imul(L,ei)|0)+Math.imul(M,en)|0,o=o+Math.imul(M,ei)|0,n=n+Math.imul(B,eo)|0,s=(s=s+Math.imul(B,ea)|0)+Math.imul(N,eo)|0,o=o+Math.imul(N,ea)|0,n=n+Math.imul(O,eu)|0,s=(s=s+Math.imul(O,ec)|0)+Math.imul(T,eu)|0,o=o+Math.imul(T,ec)|0,n=n+Math.imul(_,ef)|0,s=(s=s+Math.imul(_,eh)|0)+Math.imul(P,ef)|0,o=o+Math.imul(P,eh)|0,n=n+Math.imul(S,eg)|0;var eO=(c+n|0)+((8191&(s=(s=s+Math.imul(S,em)|0)+Math.imul(k,eg)|0))<<13)|0;c=((o=o+Math.imul(k,em)|0)+(s>>>13)|0)+(eO>>>26)|0,eO&=0x3ffffff,n=Math.imul(F,en),s=(s=Math.imul(F,ei))+Math.imul(j,en)|0,o=Math.imul(j,ei),n=n+Math.imul(L,eo)|0,s=(s=s+Math.imul(L,ea)|0)+Math.imul(M,eo)|0,o=o+Math.imul(M,ea)|0,n=n+Math.imul(B,eu)|0,s=(s=s+Math.imul(B,ec)|0)+Math.imul(N,eu)|0,o=o+Math.imul(N,ec)|0,n=n+Math.imul(O,ef)|0,s=(s=s+Math.imul(O,eh)|0)+Math.imul(T,ef)|0,o=o+Math.imul(T,eh)|0,n=n+Math.imul(_,eg)|0;var eT=(c+n|0)+((8191&(s=(s=s+Math.imul(_,em)|0)+Math.imul(P,eg)|0))<<13)|0;c=((o=o+Math.imul(P,em)|0)+(s>>>13)|0)+(eT>>>26)|0,eT&=0x3ffffff,n=Math.imul(F,eo),s=(s=Math.imul(F,ea))+Math.imul(j,eo)|0,o=Math.imul(j,ea),n=n+Math.imul(L,eu)|0,s=(s=s+Math.imul(L,ec)|0)+Math.imul(M,eu)|0,o=o+Math.imul(M,ec)|0,n=n+Math.imul(B,ef)|0,s=(s=s+Math.imul(B,eh)|0)+Math.imul(N,ef)|0,o=o+Math.imul(N,eh)|0,n=n+Math.imul(O,eg)|0;var eR=(c+n|0)+((8191&(s=(s=s+Math.imul(O,em)|0)+Math.imul(T,eg)|0))<<13)|0;c=((o=o+Math.imul(T,em)|0)+(s>>>13)|0)+(eR>>>26)|0,eR&=0x3ffffff,n=Math.imul(F,eu),s=(s=Math.imul(F,ec))+Math.imul(j,eu)|0,o=Math.imul(j,ec),n=n+Math.imul(L,ef)|0,s=(s=s+Math.imul(L,eh)|0)+Math.imul(M,ef)|0,o=o+Math.imul(M,eh)|0,n=n+Math.imul(B,eg)|0;var eB=(c+n|0)+((8191&(s=(s=s+Math.imul(B,em)|0)+Math.imul(N,eg)|0))<<13)|0;c=((o=o+Math.imul(N,em)|0)+(s>>>13)|0)+(eB>>>26)|0,eB&=0x3ffffff,n=Math.imul(F,ef),s=(s=Math.imul(F,eh))+Math.imul(j,ef)|0,o=Math.imul(j,eh),n=n+Math.imul(L,eg)|0;var eN=(c+n|0)+((8191&(s=(s=s+Math.imul(L,em)|0)+Math.imul(M,eg)|0))<<13)|0;c=((o=o+Math.imul(M,em)|0)+(s>>>13)|0)+(eN>>>26)|0,eN&=0x3ffffff,n=Math.imul(F,eg);var eD=(c+n|0)+((8191&(s=(s=Math.imul(F,em))+Math.imul(j,eg)|0))<<13)|0;return c=((o=Math.imul(j,em))+(s>>>13)|0)+(eD>>>26)|0,eD&=0x3ffffff,u[0]=ey,u[1]=eb,u[2]=ev,u[3]=ex,u[4]=ew,u[5]=eE,u[6]=eA,u[7]=eS,u[8]=ek,u[9]=eI,u[10]=e_,u[11]=eP,u[12]=eC,u[13]=eO,u[14]=eT,u[15]=eR,u[16]=eB,u[17]=eN,u[18]=eD,0!==c&&(u[19]=c,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,s=0,o=0;o<r.length-1;o++){var a=s;s=0;for(var l=0x3ffffff&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var d=o-c,f=(0|e.words[d])*(0|t.words[c]),h=0x3ffffff&f;a=a+(f/0x4000000|0)|0,l=0x3ffffff&(h=h+l|0),s+=(a=a+(h>>>26)|0)>>>26,a&=0x3ffffff}r.words[o]=l,n=a,a=s}return 0!==n?r.words[o]=n:r.length--,r._strip()}function b(e,t){this.x=e,this.y=t}Math.imul||(m=g),s.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return 10===this.length&&10===e.length?r=m(this,e,t):n<63?r=g(this,e,t):r=y(this,e,t),r},b.prototype.makeRBT=function(e){for(var t=Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,s=0;s<t;s++)n|=(1&e)<<t-s-1,e>>=1;return n},b.prototype.permute=function(e,t,r,n,s,o){for(var a=0;a<o;a++)n[a]=t[e[a]],s[a]=r[e[a]]},b.prototype.transform=function(e,t,r,n,s,o){this.permute(o,e,t,r,n,s);for(var a=1;a<s;a<<=1)for(var l=a<<1,u=Math.cos(2*Math.PI/l),c=Math.sin(2*Math.PI/l),d=0;d<s;d+=l)for(var f=u,h=c,p=0;p<a;p++){var g=r[d+p],m=n[d+p],y=r[d+p+a],b=n[d+p+a],v=f*y-h*b;b=f*b+h*y,y=v,r[d+p]=g+y,n[d+p]=m+b,r[d+p+a]=g-y,n[d+p+a]=m-b,p!==l&&(v=u*f-c*h,h=u*h+c*f,f=v)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,s=0;for(r=r/2|0;r;r>>>=1)s++;return 1<<s+1+n},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var s=e[n];e[n]=e[r-n-1],e[r-n-1]=s,s=t[n],t[n]=-t[r-n-1],t[r-n-1]=-s}},b.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var s=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=0x3ffffff&s,r=s<0x4000000?0:s/0x4000000|0}return e},b.prototype.convert13b=function(e,t,n,s){for(var o=0,a=0;a<t;a++)o+=0|e[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<s;++a)n[a]=0;r(0===o),r((-8192&o)==0)},b.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),s=this.makeRBT(n),o=this.stub(n),a=Array(n),l=Array(n),u=Array(n),c=Array(n),d=Array(n),f=Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,c,n),this.transform(a,o,l,u,n,s),this.transform(c,o,d,f,n,s);for(var p=0;p<n;p++){var g=l[p]*d[p]-u[p]*f[p];u[p]=l[p]*f[p]+u[p]*d[p],l[p]=g}return this.conjugate(l,u,n),this.transform(l,u,h,o,n,s),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=Array(this.length+e.length),y(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<0x4000000);for(var n=0,s=0;s<this.length;s++){var o=(0|this.words[s])*e,a=(0x3ffffff&o)+(0x3ffffff&n);n>>=26,n+=(o/0x4000000|0)+(a>>>26),this.words[s]=0x3ffffff&a}return 0!==n&&(this.words[s]=n,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,s=r%26;t[r]=e.words[n]>>>s&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var o=r.sqr();n<t.length;n++,o=o.sqr())0!==t[n]&&(r=r.mul(o));return r},s.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,s=(e-n)/26,o=0x3ffffff>>>26-n<<26-n;if(0!==n){var a=0;for(t=0;t<this.length;t++){var l=this.words[t]&o,u=(0|this.words[t])-l<<n;this.words[t]=u|a,a=l>>>26-n}a&&(this.words[t]=a,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this._strip()},s.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,n){r("number"==typeof e&&e>=0);var s=t?(t-t%26)/26:0,o=e%26,a=Math.min((e-o)/26,this.length),l=0x3ffffff^0x3ffffff>>>o<<o;if(s-=a,s=Math.max(0,s),n){for(var u=0;u<a;u++)n.words[u]=this.words[u];n.length=a}if(0===a);else if(this.length>a)for(this.length-=a,u=0;u<this.length;u++)this.words[u]=this.words[u+a];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=s);u--){var d=0|this.words[u];this.words[u]=c<<26-o|d>>>o,c=d&l}return n&&0!==c&&(n.words[n.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;return!(this.length<=n)&&!!(this.words[n]&1<<t)},s.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;return(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)?this:(0!==t&&n++,this.length=Math.min(n,this.length),0!==t&&(this.words[this.length-1]&=0x3ffffff^0x3ffffff>>>t<<t),this._strip())},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return(r("number"==typeof e),r(e<0x4000000),e<0)?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=0x4000000;t++)this.words[t]-=0x4000000,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(r("number"==typeof e),r(e<0x4000000),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=0x4000000,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,n){var s,o,a=e.length+n;this._expand(a);var l=0;for(s=0;s<e.length;s++){o=(0|this.words[s+n])+l;var u=(0|e.words[s])*t;o-=0x3ffffff&u,l=(o>>26)-(u/0x4000000|0),this.words[s+n]=0x3ffffff&o}for(;s<this.length-n;s++)l=(o=(0|this.words[s+n])+l)>>26,this.words[s+n]=0x3ffffff&o;if(0===l)return this._strip();for(r(-1===l),l=0,s=0;s<this.length;s++)l=(o=-(0|this.words[s])+l)>>26,this.words[s]=0x3ffffff&o;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r,n=this.length-e.length,o=this.clone(),a=e,l=0|a.words[a.length-1];0!=(n=26-this._countBits(l))&&(a=a.ushln(n),o.iushln(n),l=0|a.words[a.length-1]);var u=o.length-a.length;if("mod"!==t){(r=new s(null)).length=u+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var d=o.clone()._ishlnsubmul(a,1,u);0===d.negative&&(o=d,r&&(r.words[u]=1));for(var f=u-1;f>=0;f--){var h=(0|o.words[a.length+f])*0x4000000+(0|o.words[a.length+f-1]);for(h=Math.min(h/l|0,0x3ffffff),o._ishlnsubmul(a,h,f);0!==o.negative;)h--,o.negative=0,o._ishlnsubmul(a,1,f),o.isZero()||(o.negative^=1);r&&(r.words[f]=h)}return r&&r._strip(),o._strip(),"div"!==t&&0!==n&&o.iushrn(n),{div:r||null,mod:o}},s.prototype.divmod=function(e,t,n){var o,a,l;return(r(!e.isZero()),this.isZero())?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(l=this.neg().divmod(e,t),"mod"!==t&&(o=l.div.neg()),"div"!==t&&(a=l.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(l=this.divmod(e.neg(),t),"mod"!==t&&(o=l.div.neg()),{div:o,mod:l.mod}):(this.negative&e.negative)!=0?(l=this.neg().divmod(e.neg(),t),"div"!==t&&(a=l.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:l.div,mod:a}):e.length>this.length||0>this.cmp(e)?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t)},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),s=e.andln(1),o=r.cmp(n);return o<0||1===s&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=0x3ffffff);for(var n=0x4000000%e,s=0,o=this.length-1;o>=0;o--)s=(n*s+(0|this.words[o]))%e;return t?-s:s},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=0x3ffffff);for(var n=0,s=this.length-1;s>=0;s--){var o=(0|this.words[s])+0x4000000*n;this.words[s]=o/e|0,n=o%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new s(1),a=new s(0),l=new s(0),u=new s(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var d=n.clone(),f=t.clone();!t.isZero();){for(var h=0,p=1;(t.words[0]&p)==0&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(d),a.isub(f)),o.iushrn(1),a.iushrn(1);for(var g=0,m=1;(n.words[0]&m)==0&&g<26;++g,m<<=1);if(g>0)for(n.iushrn(g);g-- >0;)(l.isOdd()||u.isOdd())&&(l.iadd(d),u.isub(f)),l.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(l),a.isub(u)):(n.isub(t),l.isub(o),u.isub(a))}return{a:l,b:u,gcd:n.iushln(c)}},s.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t,n=this,o=e.clone();n=0!==n.negative?n.umod(e):n.clone();for(var a=new s(1),l=new s(0),u=o.clone();n.cmpn(1)>0&&o.cmpn(1)>0;){for(var c=0,d=1;(n.words[0]&d)==0&&c<26;++c,d<<=1);if(c>0)for(n.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var f=0,h=1;(o.words[0]&h)==0&&f<26;++f,h<<=1);if(f>0)for(o.iushrn(f);f-- >0;)l.isOdd()&&l.iadd(u),l.iushrn(1);n.cmp(o)>=0?(n.isub(o),a.isub(l)):(o.isub(n),l.isub(a))}return 0>(t=0===n.cmpn(1)?a:l).cmpn(0)&&t.iadd(e),t},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var s=t.cmp(r);if(s<0){var o=t;t=r,r=o}else if(0===s||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return(1&this.words[0])==0},s.prototype.isOdd=function(){return(1&this.words[0])==1},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,s=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=s,this;for(var o=s,a=n;0!==o&&a<this.length;a++){var l=0|this.words[a];l+=o,o=l>>>26,l&=0x3ffffff,this.words[a]=l}return 0!==o&&(this.words[a]=o,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return -1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=0x3ffffff,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],s=0|e.words[r];if(n!==s){n<s?t=-1:n>s&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return -1===this.cmpn(e)},s.prototype.lt=function(e){return -1===this.cmp(e)},s.prototype.lten=function(e){return 0>=this.cmpn(e)},s.prototype.lte=function(e){return 0>=this.cmp(e)},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new k(e)},s.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function x(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}x.prototype._tmp=function(){var e=new s(null);return e.words=Array(Math.ceil(this.n/13)),e},x.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n)var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},x.prototype.split=function(e,t){e.iushrn(this.n,0,t)},x.prototype.imulK=function(e){return e.imul(this.k)},n(w,x),w.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9){e.words[0]=0,e.length=1;return}var s=e.words[9];for(n=10,t.words[t.length++]=4194303&s;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|s>>>22,s=o}s>>>=22,e.words[n-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=0x3ffffff&t,t=64*n+(t/0x4000000|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(E,x),n(A,x),n(S,x),S.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=(0|e.words[r])*19+t,s=0x3ffffff&n;n>>>=26,e.words[r]=s,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){var t;if(v[e])return v[e];if("k256"===e)t=new w;else if("p224"===e)t=new E;else if("p192"===e)t=new A;else if("p25519"===e)t=new S;else throw Error("Unknown prime "+e);return v[e]=t,t},k.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){r((e.negative|t.negative)==0,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},k.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new s(1)).iushrn(2);return this.pow(e,n)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);r(!o.isZero());var l=new s(1).toRed(this),u=l.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new s(2*d*d).toRed(this);0!==this.pow(d,c).cmp(u);)d.redIAdd(u);for(var f=this.pow(d,o),h=this.pow(e,o.addn(1).iushrn(1)),p=this.pow(e,o),g=a;0!==p.cmp(l);){for(var m=p,y=0;0!==m.cmp(l);y++)m=m.redSqr();r(y<g);var b=this.pow(f,new s(1).iushln(g-y-1));h=h.redMul(b),f=b.redSqr(),p=p.redMul(f),g=y}return h},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var o=r[0],a=0,l=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],d=u-1;d>=0;d--){var f=c>>d&1;if(o!==r[0]&&(o=this.sqr(o)),0===f&&0===a){l=0;continue}a<<=1,a|=f,(4==++l||0===n&&0===d)&&(o=this.mul(o,r[a]),l=0,a=0)}u=26}return o},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new I(e)},n(I,k),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):0>s.cmpn(0)&&(o=s.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):0>o.cmpn(0)&&(a=o.iadd(this.m)),a._forceRed(this)},I.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}),ef("bHzfV",function(e,t){}),ef("gcuaM",function(e,t){e.exports=ed("a0BaM")("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}),ef("a0BaM",function(e,t){"use strict";var r=ed("5QttP").Buffer;e.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<e.length;s++){var o=e.charAt(s),a=o.charCodeAt(0);if(255!==t[a])throw TypeError(o+" is ambiguous");t[a]=s}var l=e.length,u=e.charAt(0),c=Math.log(l)/Math.log(256),d=Math.log(256)/Math.log(l);function f(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return r.alloc(0);for(var n=0,s=0,o=0;e[n]===u;)s++,n++;for(var a=(e.length-n)*c+1>>>0,d=new Uint8Array(a);e[n];){var f=t[e.charCodeAt(n)];if(255===f)return;for(var h=0,p=a-1;(0!==f||h<o)&&-1!==p;p--,h++)f+=l*d[p]>>>0,d[p]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");o=h,n++}for(var g=a-o;g!==a&&0===d[g];)g++;var m=r.allocUnsafe(s+(a-g));m.fill(0,0,s);for(var y=s;g!==a;)m[y++]=d[g++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=r.from(t)),!r.isBuffer(t))throw TypeError("Expected Buffer");if(0===t.length)return"";for(var n=0,s=0,o=0,a=t.length;o!==a&&0===t[o];)o++,n++;for(var c=(a-o)*d+1>>>0,f=new Uint8Array(c);o!==a;){for(var h=t[o],p=0,g=c-1;(0!==h||p<s)&&-1!==g;g--,p++)h+=256*f[g]>>>0,f[g]=h%l>>>0,h=h/l>>>0;if(0!==h)throw Error("Non-zero carry");s=p,o++}for(var m=c-s;m!==c&&0===f[m];)m++;for(var y=u.repeat(n);m<c;++m)y+=e.charAt(f[m]);return y},decodeUnsafe:f,decode:function(e){var t=f(e);if(t)return t;throw Error("Non-base"+l+" character")}}}}),ef("5QttP",function(e,t){var r=ed("bIMcy"),n=r.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(s(r,e.exports),e.exports.Buffer=o),s(n,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var s=n(e);return void 0!==t?"string"==typeof r?s.fill(t,r):s.fill(t):s.fill(0),s},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r.SlowBuffer(e)}}),ef("8rtVA",function(e,r){"use strict";function n(e,t,r){return t<=e&&e<=r}function s(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function o(e){this.tokens=[].slice.call(e)}function a(e,t){if(e)throw TypeError("Decoder error");return t||65533}t(e.exports,"TextEncoder",function(){return l},function(e){return l=e}),t(e.exports,"TextDecoder",function(){return u},function(e){return u=e}),o.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.push(e.shift());else this.tokens.push(e)}};var l,u,c="utf-8";function d(e,t){if(!(this instanceof d))return new d(e,t);if((e=void 0!==e?String(e).toLowerCase():c)!==c)throw Error("Encoding not supported. Only utf-8 is supported");t=s(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function f(e,t){if(!(this instanceof f))return new f(e,t);if((e=void 0!==e?String(e).toLowerCase():c)!==c)throw Error("Encoding not supported. Only utf-8 is supported");t=s(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function h(e){var t=e.fatal,r=0,s=0,o=0,l=128,u=191;this.handler=function(e,c){if(-1===c&&0!==o)return o=0,a(t);if(-1===c)return -1;if(0===o){if(n(c,0,127))return c;if(n(c,194,223))o=1,r=c-192;else if(n(c,224,239))224===c&&(l=160),237===c&&(u=159),o=2,r=c-224;else{if(!n(c,240,244))return a(t);240===c&&(l=144),244===c&&(u=143),o=3,r=c-240}return r<<=6*o,null}if(!n(c,l,u))return r=o=s=0,l=128,u=191,e.prepend(c),a(t);if(l=128,u=191,s+=1,r+=c-128<<6*(o-s),s!==o)return null;var d=r;return r=o=s=0,d}}function p(e){e.fatal,this.handler=function(e,t){if(-1===t)return -1;if(n(t,0,127))return t;n(t,128,2047)?(r=1,s=192):n(t,2048,65535)?(r=2,s=224):n(t,65536,1114111)&&(r=3,s=240);for(var r,s,o=[(t>>6*r)+s];r>0;){var a=t>>6*(r-1);o.push(128|63&a),r-=1}return o}}d.prototype={decode:function(e,t){r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=s(t),this._streaming||(this._decoder=new h({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var r,n,a=new o(r),l=[];!a.endOfStream()&&-1!==(n=this._decoder.handler(a,a.read()));)null!==n&&(Array.isArray(n)?l.push.apply(l,n):l.push(n));if(!this._streaming){do{if(-1===(n=this._decoder.handler(a,a.read())))break;if(null===n)continue;Array.isArray(n)?l.push.apply(l,n):l.push(n)}while(!a.endOfStream())this._decoder=null}!l.length||-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===l[0]?(this._BOMseen=!0,l.shift()):this._BOMseen=!0);for(var u="",c=0;c<l.length;++c){var d=l[c];d<=65535?u+=String.fromCharCode(d):(d-=65536,u+=String.fromCharCode((d>>10)+55296,(1023&d)+56320))}return u}},f.prototype={encode:function(e,t){e=e?String(e):"",t=s(t),this._streaming||(this._encoder=new p(this._options)),this._streaming=!!t.stream;for(var r,n=[],a=new o(function(e){for(var t=String(e),r=t.length,n=0,s=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)s.push(o);else if(56320<=o&&o<=57343)s.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)s.push(65533);else{var a=e.charCodeAt(n+1);if(56320<=a&&a<=57343){var l=1023&o,u=1023&a;s.push(65536+(l<<10)+u),n+=1}else s.push(65533)}n+=1}return s}(e));!a.endOfStream()&&-1!==(r=this._encoder.handler(a,a.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(a,a.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}},l=f,u=d}),ef("kbbGT",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ripemd160=e.exports.keccak256=e.exports.randomBytes=e.exports.computeHmac=e.exports.UndecodedEventLog=e.exports.EventLog=e.exports.ContractUnknownEventPayload=e.exports.ContractTransactionResponse=e.exports.ContractTransactionReceipt=e.exports.ContractEventPayload=e.exports.ContractFactory=e.exports.Contract=e.exports.BaseContract=e.exports.MessagePrefix=e.exports.EtherSymbol=e.exports.ZeroHash=e.exports.N=e.exports.MaxInt256=e.exports.MinInt256=e.exports.MaxUint256=e.exports.WeiPerEther=e.exports.ZeroAddress=e.exports.resolveAddress=e.exports.isAddress=e.exports.isAddressable=e.exports.getCreate2Address=e.exports.getCreateAddress=e.exports.getIcapAddress=e.exports.getAddress=e.exports.Typed=e.exports.TransactionDescription=e.exports.Result=e.exports.LogDescription=e.exports.Interface=e.exports.Indexed=e.exports.ErrorDescription=e.exports.checkResultErrors=e.exports.StructFragment=e.exports.ParamType=e.exports.NamedFragment=e.exports.FunctionFragment=e.exports.FallbackFragment=e.exports.Fragment=e.exports.EventFragment=e.exports.ErrorFragment=e.exports.ConstructorFragment=e.exports.AbiCoder=e.exports.encodeBytes32String=e.exports.decodeBytes32String=e.exports.version=void 0,e.exports.WebSocketProvider=e.exports.SocketProvider=e.exports.IpcSocketProvider=e.exports.QuickNodeProvider=e.exports.PocketProvider=e.exports.InfuraWebSocketProvider=e.exports.InfuraProvider=e.exports.EtherscanProvider=e.exports.CloudflareProvider=e.exports.ChainstackProvider=e.exports.BlockscoutProvider=e.exports.AnkrProvider=e.exports.AlchemyProvider=e.exports.BrowserProvider=e.exports.JsonRpcSigner=e.exports.JsonRpcProvider=e.exports.JsonRpcApiProvider=e.exports.FallbackProvider=e.exports.AbstractProvider=e.exports.VoidSigner=e.exports.NonceManager=e.exports.AbstractSigner=e.exports.TransactionResponse=e.exports.TransactionReceipt=e.exports.Log=e.exports.FeeData=e.exports.Block=e.exports.getDefaultProvider=e.exports.verifyTypedData=e.exports.TypedDataEncoder=e.exports.solidityPackedSha256=e.exports.solidityPackedKeccak256=e.exports.solidityPacked=e.exports.verifyMessage=e.exports.hashMessage=e.exports.verifyAuthorization=e.exports.hashAuthorization=e.exports.dnsEncode=e.exports.namehash=e.exports.isValidName=e.exports.ensNormalize=e.exports.id=e.exports.SigningKey=e.exports.Signature=e.exports.lock=e.exports.scryptSync=e.exports.scrypt=e.exports.pbkdf2=e.exports.sha512=e.exports.sha256=void 0,e.exports.FetchCancelSignal=e.exports.FetchResponse=e.exports.FetchRequest=e.exports.EventPayload=e.exports.isError=e.exports.isCallException=e.exports.makeError=e.exports.assertPrivate=e.exports.assertNormalize=e.exports.assertArgumentCount=e.exports.assertArgument=e.exports.assert=e.exports.resolveProperties=e.exports.defineProperties=e.exports.zeroPadValue=e.exports.zeroPadBytes=e.exports.stripZerosLeft=e.exports.isBytesLike=e.exports.isHexString=e.exports.hexlify=e.exports.getBytesCopy=e.exports.getBytes=e.exports.dataSlice=e.exports.dataLength=e.exports.concat=e.exports.encodeBase64=e.exports.decodeBase64=e.exports.encodeBase58=e.exports.decodeBase58=e.exports.Transaction=e.exports.recoverAddress=e.exports.computeAddress=e.exports.authorizationify=e.exports.accessListify=e.exports.showThrottleMessage=e.exports.copyRequest=e.exports.UnmanagedSubscriber=e.exports.SocketSubscriber=e.exports.SocketPendingSubscriber=e.exports.SocketEventSubscriber=e.exports.SocketBlockSubscriber=e.exports.MulticoinProviderPlugin=e.exports.NetworkPlugin=e.exports.GasCostPlugin=e.exports.FetchUrlFeeDataNetworkPlugin=e.exports.FeeDataNetworkPlugin=e.exports.EtherscanPlugin=e.exports.EnsPlugin=e.exports.Network=e.exports.EnsResolver=void 0,e.exports.wordlists=e.exports.WordlistOwlA=e.exports.WordlistOwl=e.exports.LangEn=e.exports.Wordlist=e.exports.encryptKeystoreJsonSync=e.exports.encryptKeystoreJson=e.exports.decryptKeystoreJson=e.exports.decryptKeystoreJsonSync=e.exports.decryptCrowdsaleJson=e.exports.isKeystoreJson=e.exports.isCrowdsaleJson=e.exports.getIndexedAccountPath=e.exports.getAccountPath=e.exports.defaultPath=e.exports.Wallet=e.exports.HDNodeVoidWallet=e.exports.HDNodeWallet=e.exports.BaseWallet=e.exports.Mnemonic=e.exports.uuidV4=e.exports.encodeRlp=e.exports.decodeRlp=e.exports.Utf8ErrorFuncs=e.exports.toUtf8String=e.exports.toUtf8CodePoints=e.exports.toUtf8Bytes=e.exports.parseUnits=e.exports.formatUnits=e.exports.parseEther=e.exports.formatEther=e.exports.mask=e.exports.toTwos=e.exports.fromTwos=e.exports.toQuantity=e.exports.toNumber=e.exports.toBeHex=e.exports.toBigInt=e.exports.toBeArray=e.exports.getUint=e.exports.getNumber=e.exports.getBigInt=e.exports.FixedNumber=void 0;var r=ed("cxVTs");Object.defineProperty(e.exports,"version",{enumerable:!0,get:function(){return r.version}});var n=ed("60lL9");Object.defineProperty(e.exports,"decodeBytes32String",{enumerable:!0,get:function(){return n.decodeBytes32String}}),Object.defineProperty(e.exports,"encodeBytes32String",{enumerable:!0,get:function(){return n.encodeBytes32String}}),Object.defineProperty(e.exports,"AbiCoder",{enumerable:!0,get:function(){return n.AbiCoder}}),Object.defineProperty(e.exports,"ConstructorFragment",{enumerable:!0,get:function(){return n.ConstructorFragment}}),Object.defineProperty(e.exports,"ErrorFragment",{enumerable:!0,get:function(){return n.ErrorFragment}}),Object.defineProperty(e.exports,"EventFragment",{enumerable:!0,get:function(){return n.EventFragment}}),Object.defineProperty(e.exports,"Fragment",{enumerable:!0,get:function(){return n.Fragment}}),Object.defineProperty(e.exports,"FallbackFragment",{enumerable:!0,get:function(){return n.FallbackFragment}}),Object.defineProperty(e.exports,"FunctionFragment",{enumerable:!0,get:function(){return n.FunctionFragment}}),Object.defineProperty(e.exports,"NamedFragment",{enumerable:!0,get:function(){return n.NamedFragment}}),Object.defineProperty(e.exports,"ParamType",{enumerable:!0,get:function(){return n.ParamType}}),Object.defineProperty(e.exports,"StructFragment",{enumerable:!0,get:function(){return n.StructFragment}}),Object.defineProperty(e.exports,"checkResultErrors",{enumerable:!0,get:function(){return n.checkResultErrors}}),Object.defineProperty(e.exports,"ErrorDescription",{enumerable:!0,get:function(){return n.ErrorDescription}}),Object.defineProperty(e.exports,"Indexed",{enumerable:!0,get:function(){return n.Indexed}}),Object.defineProperty(e.exports,"Interface",{enumerable:!0,get:function(){return n.Interface}}),Object.defineProperty(e.exports,"LogDescription",{enumerable:!0,get:function(){return n.LogDescription}}),Object.defineProperty(e.exports,"Result",{enumerable:!0,get:function(){return n.Result}}),Object.defineProperty(e.exports,"TransactionDescription",{enumerable:!0,get:function(){return n.TransactionDescription}}),Object.defineProperty(e.exports,"Typed",{enumerable:!0,get:function(){return n.Typed}});var s=ed("emjD2");Object.defineProperty(e.exports,"getAddress",{enumerable:!0,get:function(){return s.getAddress}}),Object.defineProperty(e.exports,"getIcapAddress",{enumerable:!0,get:function(){return s.getIcapAddress}}),Object.defineProperty(e.exports,"getCreateAddress",{enumerable:!0,get:function(){return s.getCreateAddress}}),Object.defineProperty(e.exports,"getCreate2Address",{enumerable:!0,get:function(){return s.getCreate2Address}}),Object.defineProperty(e.exports,"isAddressable",{enumerable:!0,get:function(){return s.isAddressable}}),Object.defineProperty(e.exports,"isAddress",{enumerable:!0,get:function(){return s.isAddress}}),Object.defineProperty(e.exports,"resolveAddress",{enumerable:!0,get:function(){return s.resolveAddress}});var o=ed("k3VZL");Object.defineProperty(e.exports,"ZeroAddress",{enumerable:!0,get:function(){return o.ZeroAddress}}),Object.defineProperty(e.exports,"WeiPerEther",{enumerable:!0,get:function(){return o.WeiPerEther}}),Object.defineProperty(e.exports,"MaxUint256",{enumerable:!0,get:function(){return o.MaxUint256}}),Object.defineProperty(e.exports,"MinInt256",{enumerable:!0,get:function(){return o.MinInt256}}),Object.defineProperty(e.exports,"MaxInt256",{enumerable:!0,get:function(){return o.MaxInt256}}),Object.defineProperty(e.exports,"N",{enumerable:!0,get:function(){return o.N}}),Object.defineProperty(e.exports,"ZeroHash",{enumerable:!0,get:function(){return o.ZeroHash}}),Object.defineProperty(e.exports,"EtherSymbol",{enumerable:!0,get:function(){return o.EtherSymbol}}),Object.defineProperty(e.exports,"MessagePrefix",{enumerable:!0,get:function(){return o.MessagePrefix}});var a=ed("aeK1b");Object.defineProperty(e.exports,"BaseContract",{enumerable:!0,get:function(){return a.BaseContract}}),Object.defineProperty(e.exports,"Contract",{enumerable:!0,get:function(){return a.Contract}}),Object.defineProperty(e.exports,"ContractFactory",{enumerable:!0,get:function(){return a.ContractFactory}}),Object.defineProperty(e.exports,"ContractEventPayload",{enumerable:!0,get:function(){return a.ContractEventPayload}}),Object.defineProperty(e.exports,"ContractTransactionReceipt",{enumerable:!0,get:function(){return a.ContractTransactionReceipt}}),Object.defineProperty(e.exports,"ContractTransactionResponse",{enumerable:!0,get:function(){return a.ContractTransactionResponse}}),Object.defineProperty(e.exports,"ContractUnknownEventPayload",{enumerable:!0,get:function(){return a.ContractUnknownEventPayload}}),Object.defineProperty(e.exports,"EventLog",{enumerable:!0,get:function(){return a.EventLog}}),Object.defineProperty(e.exports,"UndecodedEventLog",{enumerable:!0,get:function(){return a.UndecodedEventLog}});var l=ed("eap8h");Object.defineProperty(e.exports,"computeHmac",{enumerable:!0,get:function(){return l.computeHmac}}),Object.defineProperty(e.exports,"randomBytes",{enumerable:!0,get:function(){return l.randomBytes}}),Object.defineProperty(e.exports,"keccak256",{enumerable:!0,get:function(){return l.keccak256}}),Object.defineProperty(e.exports,"ripemd160",{enumerable:!0,get:function(){return l.ripemd160}}),Object.defineProperty(e.exports,"sha256",{enumerable:!0,get:function(){return l.sha256}}),Object.defineProperty(e.exports,"sha512",{enumerable:!0,get:function(){return l.sha512}}),Object.defineProperty(e.exports,"pbkdf2",{enumerable:!0,get:function(){return l.pbkdf2}}),Object.defineProperty(e.exports,"scrypt",{enumerable:!0,get:function(){return l.scrypt}}),Object.defineProperty(e.exports,"scryptSync",{enumerable:!0,get:function(){return l.scryptSync}}),Object.defineProperty(e.exports,"lock",{enumerable:!0,get:function(){return l.lock}}),Object.defineProperty(e.exports,"Signature",{enumerable:!0,get:function(){return l.Signature}}),Object.defineProperty(e.exports,"SigningKey",{enumerable:!0,get:function(){return l.SigningKey}});var u=ed("3A2Kh");Object.defineProperty(e.exports,"id",{enumerable:!0,get:function(){return u.id}}),Object.defineProperty(e.exports,"ensNormalize",{enumerable:!0,get:function(){return u.ensNormalize}}),Object.defineProperty(e.exports,"isValidName",{enumerable:!0,get:function(){return u.isValidName}}),Object.defineProperty(e.exports,"namehash",{enumerable:!0,get:function(){return u.namehash}}),Object.defineProperty(e.exports,"dnsEncode",{enumerable:!0,get:function(){return u.dnsEncode}}),Object.defineProperty(e.exports,"hashAuthorization",{enumerable:!0,get:function(){return u.hashAuthorization}}),Object.defineProperty(e.exports,"verifyAuthorization",{enumerable:!0,get:function(){return u.verifyAuthorization}}),Object.defineProperty(e.exports,"hashMessage",{enumerable:!0,get:function(){return u.hashMessage}}),Object.defineProperty(e.exports,"verifyMessage",{enumerable:!0,get:function(){return u.verifyMessage}}),Object.defineProperty(e.exports,"solidityPacked",{enumerable:!0,get:function(){return u.solidityPacked}}),Object.defineProperty(e.exports,"solidityPackedKeccak256",{enumerable:!0,get:function(){return u.solidityPackedKeccak256}}),Object.defineProperty(e.exports,"solidityPackedSha256",{enumerable:!0,get:function(){return u.solidityPackedSha256}}),Object.defineProperty(e.exports,"TypedDataEncoder",{enumerable:!0,get:function(){return u.TypedDataEncoder}}),Object.defineProperty(e.exports,"verifyTypedData",{enumerable:!0,get:function(){return u.verifyTypedData}});var c=ed("8d7kA");Object.defineProperty(e.exports,"getDefaultProvider",{enumerable:!0,get:function(){return c.getDefaultProvider}}),Object.defineProperty(e.exports,"Block",{enumerable:!0,get:function(){return c.Block}}),Object.defineProperty(e.exports,"FeeData",{enumerable:!0,get:function(){return c.FeeData}}),Object.defineProperty(e.exports,"Log",{enumerable:!0,get:function(){return c.Log}}),Object.defineProperty(e.exports,"TransactionReceipt",{enumerable:!0,get:function(){return c.TransactionReceipt}}),Object.defineProperty(e.exports,"TransactionResponse",{enumerable:!0,get:function(){return c.TransactionResponse}}),Object.defineProperty(e.exports,"AbstractSigner",{enumerable:!0,get:function(){return c.AbstractSigner}}),Object.defineProperty(e.exports,"NonceManager",{enumerable:!0,get:function(){return c.NonceManager}}),Object.defineProperty(e.exports,"VoidSigner",{enumerable:!0,get:function(){return c.VoidSigner}}),Object.defineProperty(e.exports,"AbstractProvider",{enumerable:!0,get:function(){return c.AbstractProvider}}),Object.defineProperty(e.exports,"FallbackProvider",{enumerable:!0,get:function(){return c.FallbackProvider}}),Object.defineProperty(e.exports,"JsonRpcApiProvider",{enumerable:!0,get:function(){return c.JsonRpcApiProvider}}),Object.defineProperty(e.exports,"JsonRpcProvider",{enumerable:!0,get:function(){return c.JsonRpcProvider}}),Object.defineProperty(e.exports,"JsonRpcSigner",{enumerable:!0,get:function(){return c.JsonRpcSigner}}),Object.defineProperty(e.exports,"BrowserProvider",{enumerable:!0,get:function(){return c.BrowserProvider}}),Object.defineProperty(e.exports,"AlchemyProvider",{enumerable:!0,get:function(){return c.AlchemyProvider}}),Object.defineProperty(e.exports,"AnkrProvider",{enumerable:!0,get:function(){return c.AnkrProvider}}),Object.defineProperty(e.exports,"BlockscoutProvider",{enumerable:!0,get:function(){return c.BlockscoutProvider}}),Object.defineProperty(e.exports,"ChainstackProvider",{enumerable:!0,get:function(){return c.ChainstackProvider}}),Object.defineProperty(e.exports,"CloudflareProvider",{enumerable:!0,get:function(){return c.CloudflareProvider}}),Object.defineProperty(e.exports,"EtherscanProvider",{enumerable:!0,get:function(){return c.EtherscanProvider}}),Object.defineProperty(e.exports,"InfuraProvider",{enumerable:!0,get:function(){return c.InfuraProvider}}),Object.defineProperty(e.exports,"InfuraWebSocketProvider",{enumerable:!0,get:function(){return c.InfuraWebSocketProvider}}),Object.defineProperty(e.exports,"PocketProvider",{enumerable:!0,get:function(){return c.PocketProvider}}),Object.defineProperty(e.exports,"QuickNodeProvider",{enumerable:!0,get:function(){return c.QuickNodeProvider}}),Object.defineProperty(e.exports,"IpcSocketProvider",{enumerable:!0,get:function(){return c.IpcSocketProvider}}),Object.defineProperty(e.exports,"SocketProvider",{enumerable:!0,get:function(){return c.SocketProvider}}),Object.defineProperty(e.exports,"WebSocketProvider",{enumerable:!0,get:function(){return c.WebSocketProvider}}),Object.defineProperty(e.exports,"EnsResolver",{enumerable:!0,get:function(){return c.EnsResolver}}),Object.defineProperty(e.exports,"Network",{enumerable:!0,get:function(){return c.Network}}),Object.defineProperty(e.exports,"EnsPlugin",{enumerable:!0,get:function(){return c.EnsPlugin}}),Object.defineProperty(e.exports,"EtherscanPlugin",{enumerable:!0,get:function(){return c.EtherscanPlugin}}),Object.defineProperty(e.exports,"FeeDataNetworkPlugin",{enumerable:!0,get:function(){return c.FeeDataNetworkPlugin}}),Object.defineProperty(e.exports,"FetchUrlFeeDataNetworkPlugin",{enumerable:!0,get:function(){return c.FetchUrlFeeDataNetworkPlugin}}),Object.defineProperty(e.exports,"GasCostPlugin",{enumerable:!0,get:function(){return c.GasCostPlugin}}),Object.defineProperty(e.exports,"NetworkPlugin",{enumerable:!0,get:function(){return c.NetworkPlugin}}),Object.defineProperty(e.exports,"MulticoinProviderPlugin",{enumerable:!0,get:function(){return c.MulticoinProviderPlugin}}),Object.defineProperty(e.exports,"SocketBlockSubscriber",{enumerable:!0,get:function(){return c.SocketBlockSubscriber}}),Object.defineProperty(e.exports,"SocketEventSubscriber",{enumerable:!0,get:function(){return c.SocketEventSubscriber}}),Object.defineProperty(e.exports,"SocketPendingSubscriber",{enumerable:!0,get:function(){return c.SocketPendingSubscriber}}),Object.defineProperty(e.exports,"SocketSubscriber",{enumerable:!0,get:function(){return c.SocketSubscriber}}),Object.defineProperty(e.exports,"UnmanagedSubscriber",{enumerable:!0,get:function(){return c.UnmanagedSubscriber}}),Object.defineProperty(e.exports,"copyRequest",{enumerable:!0,get:function(){return c.copyRequest}}),Object.defineProperty(e.exports,"showThrottleMessage",{enumerable:!0,get:function(){return c.showThrottleMessage}});var d=ed("73u8n");Object.defineProperty(e.exports,"accessListify",{enumerable:!0,get:function(){return d.accessListify}}),Object.defineProperty(e.exports,"authorizationify",{enumerable:!0,get:function(){return d.authorizationify}}),Object.defineProperty(e.exports,"computeAddress",{enumerable:!0,get:function(){return d.computeAddress}}),Object.defineProperty(e.exports,"recoverAddress",{enumerable:!0,get:function(){return d.recoverAddress}}),Object.defineProperty(e.exports,"Transaction",{enumerable:!0,get:function(){return d.Transaction}});var f=ed("49y6x");Object.defineProperty(e.exports,"decodeBase58",{enumerable:!0,get:function(){return f.decodeBase58}}),Object.defineProperty(e.exports,"encodeBase58",{enumerable:!0,get:function(){return f.encodeBase58}}),Object.defineProperty(e.exports,"decodeBase64",{enumerable:!0,get:function(){return f.decodeBase64}}),Object.defineProperty(e.exports,"encodeBase64",{enumerable:!0,get:function(){return f.encodeBase64}}),Object.defineProperty(e.exports,"concat",{enumerable:!0,get:function(){return f.concat}}),Object.defineProperty(e.exports,"dataLength",{enumerable:!0,get:function(){return f.dataLength}}),Object.defineProperty(e.exports,"dataSlice",{enumerable:!0,get:function(){return f.dataSlice}}),Object.defineProperty(e.exports,"getBytes",{enumerable:!0,get:function(){return f.getBytes}}),Object.defineProperty(e.exports,"getBytesCopy",{enumerable:!0,get:function(){return f.getBytesCopy}}),Object.defineProperty(e.exports,"hexlify",{enumerable:!0,get:function(){return f.hexlify}}),Object.defineProperty(e.exports,"isHexString",{enumerable:!0,get:function(){return f.isHexString}}),Object.defineProperty(e.exports,"isBytesLike",{enumerable:!0,get:function(){return f.isBytesLike}}),Object.defineProperty(e.exports,"stripZerosLeft",{enumerable:!0,get:function(){return f.stripZerosLeft}}),Object.defineProperty(e.exports,"zeroPadBytes",{enumerable:!0,get:function(){return f.zeroPadBytes}}),Object.defineProperty(e.exports,"zeroPadValue",{enumerable:!0,get:function(){return f.zeroPadValue}}),Object.defineProperty(e.exports,"defineProperties",{enumerable:!0,get:function(){return f.defineProperties}}),Object.defineProperty(e.exports,"resolveProperties",{enumerable:!0,get:function(){return f.resolveProperties}}),Object.defineProperty(e.exports,"assert",{enumerable:!0,get:function(){return f.assert}}),Object.defineProperty(e.exports,"assertArgument",{enumerable:!0,get:function(){return f.assertArgument}}),Object.defineProperty(e.exports,"assertArgumentCount",{enumerable:!0,get:function(){return f.assertArgumentCount}}),Object.defineProperty(e.exports,"assertNormalize",{enumerable:!0,get:function(){return f.assertNormalize}}),Object.defineProperty(e.exports,"assertPrivate",{enumerable:!0,get:function(){return f.assertPrivate}}),Object.defineProperty(e.exports,"makeError",{enumerable:!0,get:function(){return f.makeError}}),Object.defineProperty(e.exports,"isCallException",{enumerable:!0,get:function(){return f.isCallException}}),Object.defineProperty(e.exports,"isError",{enumerable:!0,get:function(){return f.isError}}),Object.defineProperty(e.exports,"EventPayload",{enumerable:!0,get:function(){return f.EventPayload}}),Object.defineProperty(e.exports,"FetchRequest",{enumerable:!0,get:function(){return f.FetchRequest}}),Object.defineProperty(e.exports,"FetchResponse",{enumerable:!0,get:function(){return f.FetchResponse}}),Object.defineProperty(e.exports,"FetchCancelSignal",{enumerable:!0,get:function(){return f.FetchCancelSignal}}),Object.defineProperty(e.exports,"FixedNumber",{enumerable:!0,get:function(){return f.FixedNumber}}),Object.defineProperty(e.exports,"getBigInt",{enumerable:!0,get:function(){return f.getBigInt}}),Object.defineProperty(e.exports,"getNumber",{enumerable:!0,get:function(){return f.getNumber}}),Object.defineProperty(e.exports,"getUint",{enumerable:!0,get:function(){return f.getUint}}),Object.defineProperty(e.exports,"toBeArray",{enumerable:!0,get:function(){return f.toBeArray}}),Object.defineProperty(e.exports,"toBigInt",{enumerable:!0,get:function(){return f.toBigInt}}),Object.defineProperty(e.exports,"toBeHex",{enumerable:!0,get:function(){return f.toBeHex}}),Object.defineProperty(e.exports,"toNumber",{enumerable:!0,get:function(){return f.toNumber}}),Object.defineProperty(e.exports,"toQuantity",{enumerable:!0,get:function(){return f.toQuantity}}),Object.defineProperty(e.exports,"fromTwos",{enumerable:!0,get:function(){return f.fromTwos}}),Object.defineProperty(e.exports,"toTwos",{enumerable:!0,get:function(){return f.toTwos}}),Object.defineProperty(e.exports,"mask",{enumerable:!0,get:function(){return f.mask}}),Object.defineProperty(e.exports,"formatEther",{enumerable:!0,get:function(){return f.formatEther}}),Object.defineProperty(e.exports,"parseEther",{enumerable:!0,get:function(){return f.parseEther}}),Object.defineProperty(e.exports,"formatUnits",{enumerable:!0,get:function(){return f.formatUnits}}),Object.defineProperty(e.exports,"parseUnits",{enumerable:!0,get:function(){return f.parseUnits}}),Object.defineProperty(e.exports,"toUtf8Bytes",{enumerable:!0,get:function(){return f.toUtf8Bytes}}),Object.defineProperty(e.exports,"toUtf8CodePoints",{enumerable:!0,get:function(){return f.toUtf8CodePoints}}),Object.defineProperty(e.exports,"toUtf8String",{enumerable:!0,get:function(){return f.toUtf8String}}),Object.defineProperty(e.exports,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return f.Utf8ErrorFuncs}}),Object.defineProperty(e.exports,"decodeRlp",{enumerable:!0,get:function(){return f.decodeRlp}}),Object.defineProperty(e.exports,"encodeRlp",{enumerable:!0,get:function(){return f.encodeRlp}}),Object.defineProperty(e.exports,"uuidV4",{enumerable:!0,get:function(){return f.uuidV4}});var h=ed("2ctgy");Object.defineProperty(e.exports,"Mnemonic",{enumerable:!0,get:function(){return h.Mnemonic}}),Object.defineProperty(e.exports,"BaseWallet",{enumerable:!0,get:function(){return h.BaseWallet}}),Object.defineProperty(e.exports,"HDNodeWallet",{enumerable:!0,get:function(){return h.HDNodeWallet}}),Object.defineProperty(e.exports,"HDNodeVoidWallet",{enumerable:!0,get:function(){return h.HDNodeVoidWallet}}),Object.defineProperty(e.exports,"Wallet",{enumerable:!0,get:function(){return h.Wallet}}),Object.defineProperty(e.exports,"defaultPath",{enumerable:!0,get:function(){return h.defaultPath}}),Object.defineProperty(e.exports,"getAccountPath",{enumerable:!0,get:function(){return h.getAccountPath}}),Object.defineProperty(e.exports,"getIndexedAccountPath",{enumerable:!0,get:function(){return h.getIndexedAccountPath}}),Object.defineProperty(e.exports,"isCrowdsaleJson",{enumerable:!0,get:function(){return h.isCrowdsaleJson}}),Object.defineProperty(e.exports,"isKeystoreJson",{enumerable:!0,get:function(){return h.isKeystoreJson}}),Object.defineProperty(e.exports,"decryptCrowdsaleJson",{enumerable:!0,get:function(){return h.decryptCrowdsaleJson}}),Object.defineProperty(e.exports,"decryptKeystoreJsonSync",{enumerable:!0,get:function(){return h.decryptKeystoreJsonSync}}),Object.defineProperty(e.exports,"decryptKeystoreJson",{enumerable:!0,get:function(){return h.decryptKeystoreJson}}),Object.defineProperty(e.exports,"encryptKeystoreJson",{enumerable:!0,get:function(){return h.encryptKeystoreJson}}),Object.defineProperty(e.exports,"encryptKeystoreJsonSync",{enumerable:!0,get:function(){return h.encryptKeystoreJsonSync}});var p=ed("jKfOW");Object.defineProperty(e.exports,"Wordlist",{enumerable:!0,get:function(){return p.Wordlist}}),Object.defineProperty(e.exports,"LangEn",{enumerable:!0,get:function(){return p.LangEn}}),Object.defineProperty(e.exports,"WordlistOwl",{enumerable:!0,get:function(){return p.WordlistOwl}}),Object.defineProperty(e.exports,"WordlistOwlA",{enumerable:!0,get:function(){return p.WordlistOwlA}}),Object.defineProperty(e.exports,"wordlists",{enumerable:!0,get:function(){return p.wordlists}})}),ef("cxVTs",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.version=void 0,e.exports.version="6.14.0"}),ef("60lL9",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Typed=e.exports.Result=e.exports.TransactionDescription=e.exports.LogDescription=e.exports.ErrorDescription=e.exports.Interface=e.exports.Indexed=e.exports.checkResultErrors=e.exports.StructFragment=e.exports.ParamType=e.exports.NamedFragment=e.exports.FunctionFragment=e.exports.Fragment=e.exports.FallbackFragment=e.exports.EventFragment=e.exports.ErrorFragment=e.exports.ConstructorFragment=e.exports.encodeBytes32String=e.exports.decodeBytes32String=e.exports.AbiCoder=void 0;var r=ed("3zhID");Object.defineProperty(e.exports,"AbiCoder",{enumerable:!0,get:function(){return r.AbiCoder}});var n=ed("75Swx");Object.defineProperty(e.exports,"decodeBytes32String",{enumerable:!0,get:function(){return n.decodeBytes32String}}),Object.defineProperty(e.exports,"encodeBytes32String",{enumerable:!0,get:function(){return n.encodeBytes32String}});var s=ed("9XiND");Object.defineProperty(e.exports,"ConstructorFragment",{enumerable:!0,get:function(){return s.ConstructorFragment}}),Object.defineProperty(e.exports,"ErrorFragment",{enumerable:!0,get:function(){return s.ErrorFragment}}),Object.defineProperty(e.exports,"EventFragment",{enumerable:!0,get:function(){return s.EventFragment}}),Object.defineProperty(e.exports,"FallbackFragment",{enumerable:!0,get:function(){return s.FallbackFragment}}),Object.defineProperty(e.exports,"Fragment",{enumerable:!0,get:function(){return s.Fragment}}),Object.defineProperty(e.exports,"FunctionFragment",{enumerable:!0,get:function(){return s.FunctionFragment}}),Object.defineProperty(e.exports,"NamedFragment",{enumerable:!0,get:function(){return s.NamedFragment}}),Object.defineProperty(e.exports,"ParamType",{enumerable:!0,get:function(){return s.ParamType}}),Object.defineProperty(e.exports,"StructFragment",{enumerable:!0,get:function(){return s.StructFragment}});var o=ed("jk1l0");Object.defineProperty(e.exports,"checkResultErrors",{enumerable:!0,get:function(){return o.checkResultErrors}}),Object.defineProperty(e.exports,"Indexed",{enumerable:!0,get:function(){return o.Indexed}}),Object.defineProperty(e.exports,"Interface",{enumerable:!0,get:function(){return o.Interface}}),Object.defineProperty(e.exports,"ErrorDescription",{enumerable:!0,get:function(){return o.ErrorDescription}}),Object.defineProperty(e.exports,"LogDescription",{enumerable:!0,get:function(){return o.LogDescription}}),Object.defineProperty(e.exports,"TransactionDescription",{enumerable:!0,get:function(){return o.TransactionDescription}}),Object.defineProperty(e.exports,"Result",{enumerable:!0,get:function(){return o.Result}});var a=ed("9hHQl");Object.defineProperty(e.exports,"Typed",{enumerable:!0,get:function(){return a.Typed}})}),ef("3zhID",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AbiCoder=void 0;var r=ed("49y6x"),n=ed("7zdr9"),s=ed("7OW7j"),o=ed("fMnq9"),a=ed("bNAjr"),l=ed("dFjpj"),u=ed("73ySn"),c=ed("45f7V"),d=ed("lOoCL"),f=ed("aegdZ"),h=ed("3Xe9e"),p=ed("9XiND"),g=ed("emjD2"),r=ed("49y6x");let m=new Map;m.set(0,"GENERIC_PANIC"),m.set(1,"ASSERT_FALSE"),m.set(17,"OVERFLOW"),m.set(18,"DIVIDE_BY_ZERO"),m.set(33,"ENUM_RANGE_ERROR"),m.set(34,"BAD_STORAGE_DATA"),m.set(49,"STACK_UNDERFLOW"),m.set(50,"ARRAY_RANGE_ERROR"),m.set(65,"OUT_OF_MEMORY"),m.set(81,"UNINITIALIZED_FUNCTION_CALL");let y=new RegExp(/^bytes([0-9]*)$/),b=new RegExp(/^(u?int)([0-9]*)$/),v=null,x=1024;class w{#e(e){if(e.isArray())return new o.ArrayCoder(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new h.TupleCoder(e.components.map(e=>this.#e(e)),e.name);switch(e.baseType){case"address":return new s.AddressCoder(e.name);case"bool":return new a.BooleanCoder(e.name);case"string":return new f.StringCoder(e.name);case"bytes":return new l.BytesCoder(e.name);case"":return new c.NullCoder(e.name)}let t=e.type.match(b);if(t){let n=parseInt(t[2]||"256");return(0,r.assertArgument)(0!==n&&n<=256&&n%8==0,"invalid "+t[1]+" bit length","param",e),new d.NumberCoder(n/8,"int"===t[1],e.name)}if(t=e.type.match(y)){let n=parseInt(t[1]);return(0,r.assertArgument)(0!==n&&n<=32,"invalid bytes length","param",e),new u.FixedBytesCoder(n,e.name)}(0,r.assertArgument)(!1,"invalid type","type",e.type)}getDefaultValue(e){let t=e.map(e=>this.#e(p.ParamType.from(e)));return new h.TupleCoder(t,"_").defaultValue()}encode(e,t){(0,r.assertArgumentCount)(t.length,e.length,"types/values length mismatch");let s=e.map(e=>this.#e(p.ParamType.from(e))),o=new h.TupleCoder(s,"_"),a=new n.Writer;return o.encode(a,t),a.data}decode(e,t,r){let s=e.map(e=>this.#e(p.ParamType.from(e)));return new h.TupleCoder(s,"_").decode(new n.Reader(t,r,x))}static _setDefaultMaxInflation(e){(0,r.assertArgument)("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),x=e}static defaultAbiCoder(){return null==v&&(v=new w),v}static getBuiltinCallException(e,t,n){return function(e,t,n,s){let o="missing revert data",a=null,l=null;if(n){o="execution reverted";let e=(0,r.getBytes)(n);if(n=(0,r.hexlify)(n),0===e.length)o+=" (no data present; likely require(false) occurred",a="require(false)";else if(e.length%32!=4)o+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===(0,r.hexlify)(e.slice(0,4)))try{a=s.decode(["string"],e.slice(4))[0],l={signature:"Error(string)",name:"Error",args:[a]},o+=`: ${JSON.stringify(a)}`}catch(e){o+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===(0,r.hexlify)(e.slice(0,4)))try{let t=Number(s.decode(["uint256"],e.slice(4))[0]);l={signature:"Panic(uint256)",name:"Panic",args:[t]},a=`Panic due to ${m.get(t)||"UNKNOWN"}(${t})`,o+=`: ${a}`}catch(e){o+=" (could not decode panic code)"}else o+=" (unknown custom error)"}let u={to:t.to?(0,g.getAddress)(t.to):null,data:t.data||"0x"};return t.from&&(u.from=(0,g.getAddress)(t.from)),(0,r.makeError)(o,"CALL_EXCEPTION",{action:e,data:n,reason:a,transaction:u,invocation:null,revert:l})}(e,t,n,w.defaultAbiCoder())}}e.exports.AbiCoder=w}),ef("49y6x",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.toUtf8String=e.exports.toUtf8CodePoints=e.exports.toUtf8Bytes=e.exports.parseUnits=e.exports.formatUnits=e.exports.parseEther=e.exports.formatEther=e.exports.encodeRlp=e.exports.decodeRlp=e.exports.defineProperties=e.exports.resolveProperties=e.exports.toQuantity=e.exports.toBeArray=e.exports.toBeHex=e.exports.toNumber=e.exports.toBigInt=e.exports.getUint=e.exports.getNumber=e.exports.getBigInt=e.exports.mask=e.exports.toTwos=e.exports.fromTwos=e.exports.FixedNumber=e.exports.FetchCancelSignal=e.exports.FetchResponse=e.exports.FetchRequest=e.exports.EventPayload=e.exports.makeError=e.exports.assertNormalize=e.exports.assertPrivate=e.exports.assertArgumentCount=e.exports.assertArgument=e.exports.assert=e.exports.isError=e.exports.isCallException=e.exports.zeroPadBytes=e.exports.zeroPadValue=e.exports.stripZerosLeft=e.exports.dataSlice=e.exports.dataLength=e.exports.concat=e.exports.hexlify=e.exports.isBytesLike=e.exports.isHexString=e.exports.getBytesCopy=e.exports.getBytes=e.exports.encodeBase64=e.exports.decodeBase64=e.exports.encodeBase58=e.exports.decodeBase58=void 0,e.exports.uuidV4=e.exports.Utf8ErrorFuncs=void 0;var r=ed("35SxV");Object.defineProperty(e.exports,"decodeBase58",{enumerable:!0,get:function(){return r.decodeBase58}}),Object.defineProperty(e.exports,"encodeBase58",{enumerable:!0,get:function(){return r.encodeBase58}});var n=ed("bRIRO");Object.defineProperty(e.exports,"decodeBase64",{enumerable:!0,get:function(){return n.decodeBase64}}),Object.defineProperty(e.exports,"encodeBase64",{enumerable:!0,get:function(){return n.encodeBase64}});var s=ed("7WAs2");Object.defineProperty(e.exports,"getBytes",{enumerable:!0,get:function(){return s.getBytes}}),Object.defineProperty(e.exports,"getBytesCopy",{enumerable:!0,get:function(){return s.getBytesCopy}}),Object.defineProperty(e.exports,"isHexString",{enumerable:!0,get:function(){return s.isHexString}}),Object.defineProperty(e.exports,"isBytesLike",{enumerable:!0,get:function(){return s.isBytesLike}}),Object.defineProperty(e.exports,"hexlify",{enumerable:!0,get:function(){return s.hexlify}}),Object.defineProperty(e.exports,"concat",{enumerable:!0,get:function(){return s.concat}}),Object.defineProperty(e.exports,"dataLength",{enumerable:!0,get:function(){return s.dataLength}}),Object.defineProperty(e.exports,"dataSlice",{enumerable:!0,get:function(){return s.dataSlice}}),Object.defineProperty(e.exports,"stripZerosLeft",{enumerable:!0,get:function(){return s.stripZerosLeft}}),Object.defineProperty(e.exports,"zeroPadValue",{enumerable:!0,get:function(){return s.zeroPadValue}}),Object.defineProperty(e.exports,"zeroPadBytes",{enumerable:!0,get:function(){return s.zeroPadBytes}});var o=ed("iCL5a");Object.defineProperty(e.exports,"isCallException",{enumerable:!0,get:function(){return o.isCallException}}),Object.defineProperty(e.exports,"isError",{enumerable:!0,get:function(){return o.isError}}),Object.defineProperty(e.exports,"assert",{enumerable:!0,get:function(){return o.assert}}),Object.defineProperty(e.exports,"assertArgument",{enumerable:!0,get:function(){return o.assertArgument}}),Object.defineProperty(e.exports,"assertArgumentCount",{enumerable:!0,get:function(){return o.assertArgumentCount}}),Object.defineProperty(e.exports,"assertPrivate",{enumerable:!0,get:function(){return o.assertPrivate}}),Object.defineProperty(e.exports,"assertNormalize",{enumerable:!0,get:function(){return o.assertNormalize}}),Object.defineProperty(e.exports,"makeError",{enumerable:!0,get:function(){return o.makeError}});var a=ed("cYuZC");Object.defineProperty(e.exports,"EventPayload",{enumerable:!0,get:function(){return a.EventPayload}});var l=ed("18n3n");Object.defineProperty(e.exports,"FetchRequest",{enumerable:!0,get:function(){return l.FetchRequest}}),Object.defineProperty(e.exports,"FetchResponse",{enumerable:!0,get:function(){return l.FetchResponse}}),Object.defineProperty(e.exports,"FetchCancelSignal",{enumerable:!0,get:function(){return l.FetchCancelSignal}});var u=ed("i2sMR");Object.defineProperty(e.exports,"FixedNumber",{enumerable:!0,get:function(){return u.FixedNumber}});var c=ed("6oX7q");Object.defineProperty(e.exports,"fromTwos",{enumerable:!0,get:function(){return c.fromTwos}}),Object.defineProperty(e.exports,"toTwos",{enumerable:!0,get:function(){return c.toTwos}}),Object.defineProperty(e.exports,"mask",{enumerable:!0,get:function(){return c.mask}}),Object.defineProperty(e.exports,"getBigInt",{enumerable:!0,get:function(){return c.getBigInt}}),Object.defineProperty(e.exports,"getNumber",{enumerable:!0,get:function(){return c.getNumber}}),Object.defineProperty(e.exports,"getUint",{enumerable:!0,get:function(){return c.getUint}}),Object.defineProperty(e.exports,"toBigInt",{enumerable:!0,get:function(){return c.toBigInt}}),Object.defineProperty(e.exports,"toNumber",{enumerable:!0,get:function(){return c.toNumber}}),Object.defineProperty(e.exports,"toBeHex",{enumerable:!0,get:function(){return c.toBeHex}}),Object.defineProperty(e.exports,"toBeArray",{enumerable:!0,get:function(){return c.toBeArray}}),Object.defineProperty(e.exports,"toQuantity",{enumerable:!0,get:function(){return c.toQuantity}});var d=ed("80jBQ");Object.defineProperty(e.exports,"resolveProperties",{enumerable:!0,get:function(){return d.resolveProperties}}),Object.defineProperty(e.exports,"defineProperties",{enumerable:!0,get:function(){return d.defineProperties}});var f=ed("j9qrZ");Object.defineProperty(e.exports,"decodeRlp",{enumerable:!0,get:function(){return f.decodeRlp}});var h=ed("LkU7x");Object.defineProperty(e.exports,"encodeRlp",{enumerable:!0,get:function(){return h.encodeRlp}});var p=ed("l4OI4");Object.defineProperty(e.exports,"formatEther",{enumerable:!0,get:function(){return p.formatEther}}),Object.defineProperty(e.exports,"parseEther",{enumerable:!0,get:function(){return p.parseEther}}),Object.defineProperty(e.exports,"formatUnits",{enumerable:!0,get:function(){return p.formatUnits}}),Object.defineProperty(e.exports,"parseUnits",{enumerable:!0,get:function(){return p.parseUnits}});var g=ed("jv4tR");Object.defineProperty(e.exports,"toUtf8Bytes",{enumerable:!0,get:function(){return g.toUtf8Bytes}}),Object.defineProperty(e.exports,"toUtf8CodePoints",{enumerable:!0,get:function(){return g.toUtf8CodePoints}}),Object.defineProperty(e.exports,"toUtf8String",{enumerable:!0,get:function(){return g.toUtf8String}}),Object.defineProperty(e.exports,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return g.Utf8ErrorFuncs}});var m=ed("eolpH");Object.defineProperty(e.exports,"uuidV4",{enumerable:!0,get:function(){return m.uuidV4}})}),ef("35SxV",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decodeBase58=e.exports.encodeBase58=void 0;var r=ed("7WAs2"),n=ed("iCL5a"),s=ed("6oX7q");let o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",a=null,l=BigInt(0),u=BigInt(58);e.exports.encodeBase58=function(e){let t=(0,r.getBytes)(e),n=(0,s.toBigInt)(t),a="";for(;n;)a=o[Number(n%u)]+a,n/=u;for(let e=0;e<t.length&&!t[e];e++)a=o[0]+a;return a},e.exports.decodeBase58=function(e){let t=l;for(let r=0;r<e.length;r++)t*=u,t+=function(e){if(null==a){a={};for(let e=0;e<o.length;e++)a[o[e]]=BigInt(e)}let t=a[e];return(0,n.assertArgument)(null!=t,"invalid base58 value","letter",e),t}(e[r]);return t}}),ef("7WAs2",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.zeroPadBytes=e.exports.zeroPadValue=e.exports.stripZerosLeft=e.exports.dataSlice=e.exports.dataLength=e.exports.concat=e.exports.hexlify=e.exports.isBytesLike=e.exports.isHexString=e.exports.getBytesCopy=e.exports.getBytes=void 0;var r=ed("iCL5a");function n(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let t=new Uint8Array((e.length-2)/2),r=2;for(let n=0;n<t.length;n++)t[n]=parseInt(e.substring(r,r+2),16),r+=2;return t}(0,r.assertArgument)(!1,"invalid BytesLike value",t||"value",e)}function s(e,t){return n(e,t,!1)}function o(e,t){return"string"==typeof e&&!!e.match(/^0x[0-9A-Fa-f]*$/)&&("number"!=typeof t||e.length===2+2*t)&&(!0!==t||e.length%2==0)}e.exports.getBytes=s,e.exports.getBytesCopy=function(e,t){return n(e,t,!0)},e.exports.isHexString=o,e.exports.isBytesLike=function(e){return o(e,!0)||e instanceof Uint8Array};let a="0123456789abcdef";function l(e){let t=s(e),r="0x";for(let e=0;e<t.length;e++){let n=t[e];r+=a[(240&n)>>4]+a[15&n]}return r}function u(e,t,n){let o=s(e);(0,r.assert)(t>=o.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(o),length:t,offset:t+1});let a=new Uint8Array(t);return a.fill(0),n?a.set(o,t-o.length):a.set(o,0),l(a)}e.exports.hexlify=l,e.exports.concat=function(e){return"0x"+e.map(e=>l(e).substring(2)).join("")},e.exports.dataLength=function(e){return o(e,!0)?(e.length-2)/2:s(e).length},e.exports.dataSlice=function(e,t,n){let o=s(e);return null!=n&&n>o.length&&(0,r.assert)(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:o,length:o.length,offset:n}),l(o.slice(null==t?0:t,null==n?o.length:n))},e.exports.stripZerosLeft=function(e){let t=l(e).substring(2);for(;t.startsWith("00");)t=t.substring(2);return"0x"+t},e.exports.zeroPadValue=function(e,t){return u(e,t,!0)},e.exports.zeroPadBytes=function(e,t){return u(e,t,!1)}}),ef("iCL5a",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.assertPrivate=e.exports.assertNormalize=e.exports.assertArgumentCount=e.exports.assertArgument=e.exports.assert=e.exports.makeError=e.exports.isCallException=e.exports.isError=void 0;var r=ed("cxVTs"),n=ed("80jBQ");function s(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(s).join(", ")+" ]";if(e instanceof Uint8Array){let t="0123456789abcdef",r="0x";for(let n=0;n<e.length;n++)r+=t[e[n]>>4],r+=t[15&e[n]];return r}if("object"==typeof e&&"function"==typeof e.toJSON)return s(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let t=Object.keys(e);return t.sort(),"{ "+t.map(t=>`${s(t)}: ${s(e[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function o(e,t){return e&&e.code===t}function a(e,t,o){let a,l=e;{let n=[];if(o){if("message"in o||"code"in o||"name"in o)throw Error(`value will overwrite populated values: ${s(o)}`);for(let e in o){if("shortMessage"===e)continue;let t=o[e];n.push(e+"="+s(t))}}n.push(`code=${t}`),n.push(`version=${r.version}`),n.length&&(e+=" ("+n.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":a=TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":a=RangeError(e);break;default:a=Error(e)}return(0,n.defineProperties)(a,{code:t}),o&&Object.assign(a,o),null==a.shortMessage&&(0,n.defineProperties)(a,{shortMessage:l}),a}function l(e,t,r,n){if(!e)throw a(t,r,n)}e.exports.isError=o,e.exports.isCallException=function(e){return o(e,"CALL_EXCEPTION")},e.exports.makeError=a,e.exports.assert=l,e.exports.assertArgument=function(e,t,r,n){l(e,t,"INVALID_ARGUMENT",{argument:r,value:n})},e.exports.assertArgumentCount=function(e,t,r){null==r&&(r=""),r&&(r=": "+r),l(e>=t,"missing argument"+r,"MISSING_ARGUMENT",{count:e,expectedCount:t}),l(e<=t,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})};let u=["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw Error("bad");if("NFD"===t){let e=String.fromCharCode(233).normalize("NFD"),t=String.fromCharCode(101,769);if(e!==t)throw Error("broken")}e.push(t)}catch(e){}return e},[]);e.exports.assertNormalize=function(e){l(u.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})},e.exports.assertPrivate=function(e,t,r){if(null==r&&(r=""),e!==t){let e=r,t="new";r&&(e+=".",t+=" "+r),l(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}}),ef("80jBQ",function(e,t){"use strict";async function r(e){let t=Object.keys(e);return(await Promise.all(t.map(t=>Promise.resolve(e[t])))).reduce((e,r,n)=>(e[t[n]]=r,e),{})}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.defineProperties=e.exports.resolveProperties=void 0,e.exports.resolveProperties=r,e.exports.defineProperties=function(e,t,r){for(let n in t){let s=t[n],o=r?r[n]:null;o&&function(e,t,r){let n=t.split("|").map(e=>e.trim());for(let r=0;r<n.length;r++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}let s=Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=e,s}(s,o,n),Object.defineProperty(e,n,{enumerable:!0,value:s,writable:!1})}}}),ef("6oX7q",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.toQuantity=e.exports.toBeArray=e.exports.toBeHex=e.exports.toNumber=e.exports.getNumber=e.exports.toBigInt=e.exports.getUint=e.exports.getBigInt=e.exports.mask=e.exports.toTwos=e.exports.fromTwos=void 0;var r=ed("7WAs2"),n=ed("iCL5a");let s=BigInt(0),o=BigInt(1);function a(e,t){switch(typeof e){case"bigint":return e;case"number":return(0,n.assertArgument)(Number.isInteger(e),"underflow",t||"value",e),(0,n.assertArgument)(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw Error("empty string");if("-"===e[0]&&"-"!==e[1])return-BigInt(e.substring(1));return BigInt(e)}catch(r){(0,n.assertArgument)(!1,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}(0,n.assertArgument)(!1,"invalid BigNumberish value",t||"value",e)}function l(e,t){let r=a(e,t);return(0,n.assert)(r>=s,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),r}e.exports.fromTwos=function(e,t){let r=l(e,"value"),a=BigInt(d(t,"width"));return((0,n.assert)(r>>a===s,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),r>>a-o)?-((~r&(o<<a)-o)+o):r},e.exports.toTwos=function(e,t){let r=a(e,"value"),l=BigInt(d(t,"width")),u=o<<l-o;return r<s?(r=-r,(0,n.assert)(r<=u,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~r&(o<<l)-o)+o):((0,n.assert)(r<u,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),r)},e.exports.mask=function(e,t){return l(e,"value")&(o<<BigInt(d(t,"bits")))-o},e.exports.getBigInt=a,e.exports.getUint=l;let u="0123456789abcdef";function c(e){if(e instanceof Uint8Array){let t="0x0";for(let r of e)t+=u[r>>4],t+=u[15&r];return BigInt(t)}return a(e)}function d(e,t){switch(typeof e){case"bigint":return(0,n.assertArgument)(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),Number(e);case"number":return(0,n.assertArgument)(Number.isInteger(e),"underflow",t||"value",e),(0,n.assertArgument)(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),e;case"string":try{if(""===e)throw Error("empty string");return d(BigInt(e),t)}catch(r){(0,n.assertArgument)(!1,`invalid numeric string: ${r.message}`,t||"value",e)}}(0,n.assertArgument)(!1,"invalid numeric value",t||"value",e)}function f(e){let t=l(e,"value");if(t===s)return new Uint8Array([]);let r=t.toString(16);r.length%2&&(r="0"+r);let n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){let t=2*e;n[e]=parseInt(r.substring(t,t+2),16)}return n}e.exports.toBigInt=c,e.exports.getNumber=d,e.exports.toNumber=function(e){return d(c(e))},e.exports.toBeHex=function(e,t){let r=l(e,"value").toString(16);if(null==t)r.length%2&&(r="0"+r);else{let s=d(t,"width");for((0,n.assert)(2*s>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<2*s;)r="0"+r}return"0x"+r},e.exports.toBeArray=f,e.exports.toQuantity=function(e){let t=(0,r.hexlify)((0,r.isBytesLike)(e)?e:f(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}}),ef("bRIRO",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encodeBase64=e.exports.decodeBase64=void 0;var r=ed("7WAs2");e.exports.decodeBase64=function(e){let t=new Uint8Array((e=atob(e)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return(0,r.getBytes)(t)},e.exports.encodeBase64=function(e){let t=(0,r.getBytes)(e),n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return btoa(n)}}),ef("cYuZC",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EventPayload=void 0;var r=ed("80jBQ");e.exports.EventPayload=class{filter;emitter;#t;constructor(e,t,n){this.#t=t,(0,r.defineProperties)(this,{emitter:e,filter:n})}async removeListener(){null!=this.#t&&await this.emitter.off(this.filter,this.#t)}}}),ef("18n3n",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FetchResponse=e.exports.FetchRequest=e.exports.FetchCancelSignal=void 0;var r=ed("bRIRO"),n=ed("7WAs2"),s=ed("iCL5a"),o=ed("80jBQ"),a=ed("jv4tR"),l=ed("7pZXb");let u=(0,l.createGetUrl)(),c=RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),d=RegExp("^ipfs://(ipfs/)?(.*)$","i"),f=!1;async function h(e,t){try{var n;let t=e.match(c);if(!t)throw Error("invalid data");return new x(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?(0,r.decodeBase64)(t[3]):(n=t[3],(0,a.toUtf8Bytes)(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(t){return new x(599,"BAD REQUEST (invalid data: URI)",{},null,new v(e))}}function p(e){return async function(t,r){try{let r=t.match(d);if(!r)throw Error("invalid link");return new v(`${e}${r[2]}`)}catch(e){return new x(599,"BAD REQUEST (invalid IPFS URI)",{},null,new v(t))}}}let g={data:h,ipfs:p("https://gateway.ipfs.io/ipfs/")},m=new WeakMap;class y{#r;#n;constructor(e){this.#r=[],this.#n=!1,m.set(e,()=>{if(!this.#n){for(let e of(this.#n=!0,this.#r))setTimeout(()=>{e()},0);this.#r=[]}})}addListener(e){(0,s.assert)(!this.#n,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#r.push(e)}get cancelled(){return this.#n}checkSignal(){(0,s.assert)(!this.cancelled,"cancelled","CANCELLED",{})}}function b(e){if(null==e)throw Error("missing signal; should not happen");return e.checkSignal(),e}e.exports.FetchCancelSignal=y;class v{#i;#s;#o;#a;#l;#u;#c;#d;#f;#h;#p;#g;#m;#y;#b;get url(){return this.#u}set url(e){this.#u=String(e)}get body(){return null==this.#c?null:new Uint8Array(this.#c)}set body(e){if(null==e)this.#c=void 0,this.#d=void 0;else if("string"==typeof e)this.#c=(0,a.toUtf8Bytes)(e),this.#d="text/plain";else if(e instanceof Uint8Array)this.#c=e,this.#d="application/octet-stream";else if("object"==typeof e)this.#c=(0,a.toUtf8Bytes)(JSON.stringify(e)),this.#d="application/json";else throw Error("invalid body")}hasBody(){return null!=this.#c}get method(){return this.#a?this.#a:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#a=String(e).toUpperCase()}get headers(){let e=Object.assign({},this.#o);return this.#f&&(e.authorization=`Basic ${(0,r.encodeBase64)((0,a.toUtf8Bytes)(this.#f))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#d&&(e["content-type"]=this.#d),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#o[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#o={}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let n=t[r++];return{value:[n,e[n]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#f||null}setCredentials(e,t){(0,s.assertArgument)(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#f=`${e}:${t}`}get allowGzip(){return this.#s}set allowGzip(e){this.#s=!!e}get allowInsecureAuthentication(){return!!this.#i}set allowInsecureAuthentication(e){this.#i=!!e}get timeout(){return this.#l}set timeout(e){(0,s.assertArgument)(e>=0,"timeout must be non-zero","timeout",e),this.#l=e}get preflightFunc(){return this.#h||null}set preflightFunc(e){this.#h=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#g||null}set retryFunc(e){this.#g=e}get getUrlFunc(){return this.#b||u}set getUrlFunc(e){this.#b=e}constructor(e){this.#u=String(e),this.#i=!1,this.#s=!0,this.#o={},this.#a="",this.#l=3e5,this.#y={slotInterval:250,maxAttempts:12},this.#b=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#c?(0,n.hexlify)(this.#c):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#y.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#y.maxAttempts=e.maxAttempts)}async #v(e,t,r,n,o){var a;if(e>=this.#y.maxAttempts)return o.makeServerError("exceeded maximum retry limit");(0,s.assert)(w()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:n}),r>0&&await (a=r,new Promise(e=>setTimeout(e,a)));let l=this.clone(),u=(l.url.split(":")[0]||"").toLowerCase();if(u in g){let e=await g[u](l.url,b(n.#m));if(e instanceof x){let t=e;if(this.processFunc){b(n.#m);try{t=await this.processFunc(l,t)}catch(e){(null==e.throttle||"number"!=typeof e.stall)&&t.makeServerError("error in post-processing function",e).assertOk()}}return t}l=e}this.preflightFunc&&(l=await this.preflightFunc(l));let c=await this.getUrlFunc(l,b(n.#m)),d=new x(c.statusCode,c.statusMessage,c.headers,c.body,n);if(301===d.statusCode||302===d.statusCode){try{let r=d.headers.location||"";return l.redirect(r).#v(e+1,t,0,n,d)}catch(e){}return d}if(429===d.statusCode&&(null==this.retryFunc||await this.retryFunc(l,d,e))){let r=d.headers["retry-after"],s=this.#y.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof r&&r.match(/^[1-9][0-9]*$/)&&(s=parseInt(r)),l.clone().#v(e+1,t,s,n,d)}if(this.processFunc){b(n.#m);try{d=await this.processFunc(l,d)}catch(s){(null==s.throttle||"number"!=typeof s.stall)&&d.makeServerError("error in post-processing function",s).assertOk();let r=this.#y.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return s.stall>=0&&(r=s.stall),l.clone().#v(e+1,t,r,n,d)}}return d}send(){return(0,s.assert)(null==this.#m,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#m=new y(this),this.#v(0,w()+this.timeout,0,this,new x(0,"",{},null,this))}cancel(){(0,s.assert)(null!=this.#m,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let e=m.get(this);if(!e)throw Error("missing signal; should not happen");e()}redirect(e){let t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();(0,s.assert)("GET"===this.method&&("https"!==t||"http"!==r)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});let n=new v(e);return n.method="GET",n.allowGzip=this.allowGzip,n.timeout=this.timeout,n.#o=Object.assign({},this.#o),this.#c&&(n.#c=new Uint8Array(this.#c)),n.#d=this.#d,n}clone(){let e=new v(this.url);return e.#a=this.#a,this.#c&&(e.#c=this.#c),e.#d=this.#d,e.#o=Object.assign({},this.#o),e.#f=this.#f,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#h=this.#h,e.#p=this.#p,e.#g=this.#g,e.#y=Object.assign({},this.#y),e.#b=this.#b,e}static lockConfig(){f=!0}static getGateway(e){return g[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw Error(`cannot intercept ${e}; use registerGetUrl`);if(f)throw Error("gateways locked");g[e]=t}static registerGetUrl(e){if(f)throw Error("gateways locked");u=e}static createGetUrlFunc(e){return(0,l.createGetUrl)(e)}static createDataGateway(){return h}static createIpfsGatewayFunc(e){return p(e)}}e.exports.FetchRequest=v;class x{#x;#w;#o;#c;#E;#A;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#c?(0,n.hexlify)(this.#c):"null"}>`}get statusCode(){return this.#x}get statusMessage(){return this.#w}get headers(){return Object.assign({},this.#o)}get body(){return null==this.#c?null:new Uint8Array(this.#c)}get bodyText(){try{return null==this.#c?"":(0,a.toUtf8String)(this.#c)}catch(e){(0,s.assert)(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){(0,s.assert)(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let n=t[r++];return{value:[n,e[n]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,r,n,s){this.#x=e,this.#w=t,this.#o=Object.keys(r).reduce((e,t)=>(e[t.toLowerCase()]=String(r[t]),e),{}),this.#c=null==n?null:new Uint8Array(n),this.#E=s||null,this.#A={message:""}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);let n=new x(599,r,this.headers,this.body,this.#E||void 0);return n.#A={message:e,error:t},n}throwThrottleError(e,t){null==t?t=-1:(0,s.assertArgument)(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);let r=Error(e||"throttling requests");throw(0,o.defineProperties)(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#c}get request(){return this.#E}ok(){return""===this.#A.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#A;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let n=null;try{this.#c&&(n=(0,a.toUtf8String)(this.#c))}catch(e){}(0,s.assert)(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:n,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function w(){return new Date().getTime()}e.exports.FetchResponse=x}),ef("jv4tR",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.toUtf8CodePoints=e.exports.toUtf8String=e.exports.toUtf8Bytes=e.exports.Utf8ErrorFuncs=void 0;var r=ed("7WAs2"),n=ed("iCL5a");function s(e,t,r,n,s){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return"OVERRUN"===e?r.length-t-1:0}function o(t,n){null==n&&(n=e.exports.Utf8ErrorFuncs.error);let s=(0,r.getBytes)(t,"bytes"),o=[],a=0;for(;a<s.length;){let e=s[a++];if(e>>7==0){o.push(e);continue}let t=null,r=null;if((224&e)==192)t=1,r=127;else if((240&e)==224)t=2,r=2047;else if((248&e)==240)t=3,r=65535;else{(192&e)==128?a+=n("UNEXPECTED_CONTINUE",a-1,s,o):a+=n("BAD_PREFIX",a-1,s,o);continue}if(a-1+t>=s.length){a+=n("OVERRUN",a-1,s,o);continue}let l=e&(1<<8-t-1)-1;for(let e=0;e<t;e++){let e=s[a];if((192&e)!=128){a+=n("MISSING_CONTINUE",a,s,o),l=null;break}l=l<<6|63&e,a++}if(null!==l){if(l>1114111){a+=n("OUT_OF_RANGE",a-1-t,s,o,l);continue}if(l>=55296&&l<=57343){a+=n("UTF16_SURROGATE",a-1-t,s,o,l);continue}if(l<=r){a+=n("OVERLONG",a-1-t,s,o,l);continue}o.push(l)}}return o}function a(e,t){(0,n.assertArgument)("string"==typeof e,"invalid string value","str",e),null!=t&&((0,n.assertNormalize)(t),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){let s=e.charCodeAt(t);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(63&s|128);else if((64512&s)==55296){t++;let o=e.charCodeAt(t);(0,n.assertArgument)(t<e.length&&(64512&o)==56320,"invalid surrogate pair","str",e);let a=65536+((1023&s)<<10)+(1023&o);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(63&s|128)}return new Uint8Array(r)}e.exports.Utf8ErrorFuncs=Object.freeze({error:function(e,t,r,s,o){(0,n.assertArgument)(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:s,replace:function(e,t,r,o,a){return"OVERLONG"===e?((0,n.assertArgument)("number"==typeof a,"invalid bad code point for replacement","badCodepoint",a),o.push(a),0):(o.push(65533),s(e,t,r,o,a))}}),e.exports.toUtf8Bytes=a,e.exports.toUtf8String=function(e,t){return o(e,t).map(e=>e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10&1023)+55296,(1023&e)+56320)).join("")},e.exports.toUtf8CodePoints=function(e,t){return o(a(e,t))}}),ef("7pZXb",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getUrl=e.exports.createGetUrl=void 0;var r=ed("iCL5a");function n(e){return async function(t,n){let s;(0,r.assert)(null==n||!n.cancelled,"request cancelled before sending","CANCELLED");let o=t.url.split(":")[0].toLowerCase();(0,r.assert)("http"===o||"https"===o,`unsupported protocol ${o}`,"UNSUPPORTED_OPERATION",{info:{protocol:o},operation:"request"}),(0,r.assert)("https"===o||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let a=null,l=new AbortController,u=setTimeout(()=>{a=(0,r.makeError)("request timeout","TIMEOUT"),l.abort()},t.timeout);n&&n.addListener(()=>{a=(0,r.makeError)("request cancelled","CANCELLED"),l.abort()});let c=Object.assign({},e,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:l.signal});try{s=await fetch(t.url,c)}catch(e){if(clearTimeout(u),a)throw a;throw e}clearTimeout(u);let d={};s.headers.forEach((e,t)=>{d[t.toLowerCase()]=e});let f=await s.arrayBuffer(),h=null==f?null:new Uint8Array(f);return{statusCode:s.status,statusMessage:s.statusText,headers:d,body:h}}}e.exports.createGetUrl=n;let s=n({});async function o(e,t){return s(e,t)}e.exports.getUrl=o}),ef("i2sMR",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FixedNumber=void 0;var r=ed("7WAs2"),n=ed("iCL5a"),s=ed("6oX7q"),o=ed("80jBQ");let a=BigInt(-1),l=BigInt(0),u=BigInt(1),c=BigInt(5),d={},f="0000";for(;f.length<80;)f+=f;function h(e){let t=f;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function p(e,t,r){let o=BigInt(t.width);if(t.signed){let t=u<<o-u;(0,n.assert)(null==r||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e}),e=e>l?(0,s.fromTwos)((0,s.mask)(e,o),o):-(0,s.fromTwos)((0,s.mask)(-e,o),o)}else{let t=u<<o;(0,n.assert)(null==r||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e}),e=(e%t+t)%t&t-u}return e}function g(e){"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,r=128,s=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{let o=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);(0,n.assertArgument)(o,"invalid fixed format","format",e),t="u"!==o[1],r=parseInt(o[2]),s=parseInt(o[3])}else if(e){let o=e,a=(e,t,r)=>null==o[e]?r:((0,n.assertArgument)(typeof o[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,o[e]),o[e]);t=a("signed","boolean",t),r=a("width","number",r),s=a("decimals","number",s)}(0,n.assertArgument)(r%8==0,"invalid FixedNumber width (not byte aligned)","format.width",r),(0,n.assertArgument)(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);let o=(t?"":"u")+"fixed"+String(r)+"x"+String(s);return{signed:t,width:r,decimals:s,name:o}}class m{format;#S;#k;#I;_value;constructor(e,t,r){(0,n.assertPrivate)(e,d,"FixedNumber"),this.#k=t,this.#S=r;let s=function(e,t){let r="";e<l&&(r="-",e*=a);let n=e.toString();if(0===t)return r+n;for(;n.length<=t;)n=f+n;let s=n.length-t;for(n=n.substring(0,s)+"."+n.substring(s);"0"===n[0]&&"."!==n[1];)n=n.substring(1);for(;"0"===n[n.length-1]&&"."!==n[n.length-2];)n=n.substring(0,n.length-1);return r+n}(t,r.decimals);(0,o.defineProperties)(this,{format:r.name,_value:s}),this.#I=h(r.decimals)}get signed(){return this.#S.signed}get width(){return this.#S.width}get decimals(){return this.#S.decimals}get value(){return this.#k}#_(e){(0,n.assertArgument)(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#P(e,t){return new m(d,e=p(e,this.#S,t),this.#S)}#C(e,t){return this.#_(e),this.#P(this.#k+e.#k,t)}addUnsafe(e){return this.#C(e)}add(e){return this.#C(e,"add")}#O(e,t){return this.#_(e),this.#P(this.#k-e.#k,t)}subUnsafe(e){return this.#O(e)}sub(e){return this.#O(e,"sub")}#T(e,t){return this.#_(e),this.#P(this.#k*e.#k/this.#I,t)}mulUnsafe(e){return this.#T(e)}mul(e){return this.#T(e,"mul")}mulSignal(e){this.#_(e);let t=this.#k*e.#k;return(0,n.assert)(t%this.#I===l,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#P(t/this.#I,"mulSignal")}#R(e,t){return(0,n.assert)(e.#k!==l,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#_(e),this.#P(this.#k*this.#I/e.#k,t)}divUnsafe(e){return this.#R(e)}div(e){return this.#R(e,"div")}divSignal(e){(0,n.assert)(e.#k!==l,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#_(e);let t=this.#k*this.#I;return(0,n.assert)(t%e.#k===l,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#P(t/e.#k,"divSignal")}cmp(e){let t=this.value,r=e.value,n=this.decimals-e.decimals;return(n>0?r*=h(n):n<0&&(t*=h(-n)),t<r)?-1:+(t>r)}eq(e){return 0===this.cmp(e)}lt(e){return 0>this.cmp(e)}lte(e){return 0>=this.cmp(e)}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#k;return this.#k<l&&(e-=this.#I-u),e=this.#k/this.#I*this.#I,this.#P(e,"floor")}ceiling(){let e=this.#k;return this.#k>l&&(e+=this.#I-u),e=this.#k/this.#I*this.#I,this.#P(e,"ceiling")}round(e){if(null==e&&(e=0),e>=this.decimals)return this;let t=this.decimals-e,r=c*h(t-1),n=this.value+r,s=h(t);return p(n=n/s*s,this.#S,"round"),new m(d,n,this.#S)}isZero(){return this.#k===l}isNegative(){return this.#k<l}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return m.fromString(this.toString(),e)}static fromValue(e,t,r){let o=null==t?0:(0,s.getNumber)(t),a=g(r),u=(0,s.getBigInt)(e,"value"),c=o-a.decimals;if(c>0){let t=h(c);(0,n.assert)(u%t===l,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),u/=t}else c<0&&(u*=h(-c));return p(u,a,"fromValue"),new m(d,u,a)}static fromString(e,t){let r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);(0,n.assertArgument)(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);let s=g(t),o=r[2]||"0",a=r[3]||"";for(;a.length<s.decimals;)a+=f;(0,n.assert)(a.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),a=a.substring(0,s.decimals);let l=BigInt(r[1]+o+a);return p(l,s,"fromString"),new m(d,l,s)}static fromBytes(e,t){let n=(0,s.toBigInt)((0,r.getBytes)(e,"value")),o=g(t);return o.signed&&(n=(0,s.fromTwos)(n,o.width)),p(n,o,"fromBytes"),new m(d,n,o)}}e.exports.FixedNumber=m}),ef("j9qrZ",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decodeRlp=void 0;var r=ed("7WAs2"),n=ed("iCL5a"),r=ed("7WAs2");function s(e,t,r){let n=0;for(let s=0;s<r;s++)n=256*n+e[t+s];return n}function o(e,t,r,s){let o=[];for(;r<t+1+s;){let l=a(e,r);o.push(l.result),r+=l.consumed,(0,n.assert)(r<=t+1+s,"child data too short","BUFFER_OVERRUN",{buffer:e,length:s,offset:t})}return{consumed:1+s,result:o}}function a(e,t){(0,n.assert)(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});let a=t=>{(0,n.assert)(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){let r=e[t]-247;a(t+1+r);let n=s(e,t+1,r);return a(t+1+r+n),o(e,t,t+1+r,r+n)}if(e[t]>=192){let r=e[t]-192;return a(t+1+r),o(e,t,t+1,r)}if(e[t]>=184){let n=e[t]-183;a(t+1+n);let o=s(e,t+1,n);a(t+1+n+o);let l=(0,r.hexlify)(e.slice(t+1+n,t+1+n+o));return{consumed:1+n+o,result:l}}if(e[t]>=128){let n=e[t]-128;a(t+1+n);let s=(0,r.hexlify)(e.slice(t+1,t+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:function(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}(e[t])}}e.exports.decodeRlp=function(e){let t=(0,r.getBytes)(e,"data"),s=a(t,0);return(0,n.assertArgument)(s.consumed===t.length,"unexpected junk after rlp payload","data",e),s.result}}),ef("LkU7x",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encodeRlp=void 0;var r=ed("7WAs2");function n(e){let t=[];for(;e;)t.unshift(255&e),e>>=8;return t}let s="0123456789abcdef";e.exports.encodeRlp=function(e){let t="0x";for(let o of function e(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(t){r=r.concat(e(t))}),r.length<=55)return r.unshift(192+r.length),r;let s=n(r.length);return s.unshift(247+s.length),s.concat(r)}let s=Array.prototype.slice.call((0,r.getBytes)(t,"object"));if(1===s.length&&s[0]<=127)return s;if(s.length<=55)return s.unshift(128+s.length),s;let o=n(s.length);return o.unshift(183+o.length),o.concat(s)}(e))t+=s[o>>4],t+=s[15&o];return t}}),ef("l4OI4",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.parseEther=e.exports.formatEther=e.exports.parseUnits=e.exports.formatUnits=void 0;var r=ed("iCL5a"),n=ed("i2sMR"),s=ed("6oX7q");let o=["wei","kwei","mwei","gwei","szabo","finney","ether"];function a(e,t){let a=18;if("string"==typeof t){let e=o.indexOf(t);(0,r.assertArgument)(e>=0,"invalid unit","unit",t),a=3*e}else null!=t&&(a=(0,s.getNumber)(t,"unit"));return n.FixedNumber.fromValue(e,a,{decimals:a,width:512}).toString()}function l(e,t){(0,r.assertArgument)("string"==typeof e,"value must be a string","value",e);let a=18;if("string"==typeof t){let e=o.indexOf(t);(0,r.assertArgument)(e>=0,"invalid unit","unit",t),a=3*e}else null!=t&&(a=(0,s.getNumber)(t,"unit"));return n.FixedNumber.fromString(e,{decimals:a,width:512}).value}e.exports.formatUnits=a,e.exports.parseUnits=l,e.exports.formatEther=function(e){return a(e,18)},e.exports.parseEther=function(e){return l(e,18)}}),ef("eolpH",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.uuidV4=void 0;var r=ed("7WAs2");e.exports.uuidV4=function(e){let t=(0,r.getBytes)(e,"randomBytes");t[6]=15&t[6]|64,t[8]=63&t[8]|128;let n=(0,r.hexlify)(t);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}}),ef("7zdr9",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Reader=e.exports.Writer=e.exports.Coder=e.exports.checkResultErrors=e.exports.Result=e.exports.WordSize=void 0;var r=ed("49y6x");e.exports.WordSize=32;let n=new Uint8Array(e.exports.WordSize),s=["then"],o={},a=new WeakMap;function l(e){return a.get(e)}function u(e,t){let r=Error(`deferred error during ABI decoding triggered accessing ${e}`);throw r.error=t,r}class c extends Array{#B;constructor(...e){var t,n;let c=e[0],d=e[1],f=(e[2]||[]).slice(),h=!0;c!==o&&(d=e,f=[],h=!1),super(d.length),d.forEach((e,t)=>{this[t]=e});let p=f.reduce((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e),new Map);if(t=Object.freeze(d.map((e,t)=>{let r=f[t];return null!=r&&1===p.get(r)?r:null})),a.set(this,t),this.#B=[],null==this.#B&&this.#B,!h)return;Object.freeze(this);let g=new Proxy(this,{get:(e,t,n)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){let n=(0,r.getNumber)(t,"%index");if(n<0||n>=this.length)throw RangeError("out of result range");let s=e[n];return s instanceof Error&&u(`index ${n}`,s),s}if(s.indexOf(t)>=0)return Reflect.get(e,t,n);let o=e[t];if(o instanceof Function)return function(...t){return o.apply(this===n?e:this,t)};if(!(t in e))return e.getValue.apply(this===n?e:this,[t])}return Reflect.get(e,t,n)}});return n=l(this),a.set(g,n),g}toArray(e){let t=[];return this.forEach((r,n)=>{r instanceof Error&&u(`index ${n}`,r),e&&r instanceof c&&(r=r.toArray(e)),t.push(r)}),t}toObject(e){let t=l(this);return t.reduce((n,s,o)=>((0,r.assert)(null!=s,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),function e(t,r,n){return t.indexOf(null)>=0?r.map((t,r)=>t instanceof c?e(l(t),t,n):t):t.reduce((t,s,o)=>{let a=r.getValue(s);return s in t||(n&&a instanceof c&&(a=e(l(a),a,n)),t[s]=a),t},{})}(t,this,e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);let r=l(this),n=[],s=[];for(let o=e;o<t;o++)n.push(this[o]),s.push(r[o]);return new c(o,n,s)}filter(e,t){let r=l(this),n=[],s=[];for(let o=0;o<this.length;o++){let a=this[o];a instanceof Error&&u(`index ${o}`,a),e.call(t,a,o,this)&&(n.push(a),s.push(r[o]))}return new c(o,n,s)}map(e,t){let r=[];for(let n=0;n<this.length;n++){let s=this[n];s instanceof Error&&u(`index ${n}`,s),r.push(e.call(t,s,n,this))}return r}getValue(e){let t=l(this).indexOf(e);if(-1===t)return;let r=this[t];return r instanceof Error&&u(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,t){return new c(o,e,t)}}function d(t){let s=(0,r.toBeArray)(t);return(0,r.assert)(s.length<=e.exports.WordSize,"value out-of-bounds","BUFFER_OVERRUN",{buffer:s,length:e.exports.WordSize,offset:s.length}),s.length!==e.exports.WordSize&&(s=(0,r.getBytesCopy)((0,r.concat)([n.slice(s.length%e.exports.WordSize),s]))),s}e.exports.Result=c,e.exports.checkResultErrors=function(e){let t=[],r=function(e,n){if(Array.isArray(n))for(let s in n){let o=e.slice();o.push(s);try{r(o,n[s])}catch(e){t.push({path:o,error:e})}}};return r([],e),t},e.exports.Coder=class{name;type;localName;dynamic;constructor(e,t,n,s){(0,r.defineProperties)(this,{name:e,type:t,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){(0,r.assertArgument)(!1,e,this.localName,t)}},e.exports.Writer=class{#N;#D;constructor(){this.#N=[],this.#D=0}get data(){return(0,r.concat)(this.#N)}get length(){return this.#D}#L(e){return this.#N.push(e),this.#D+=e.length,e.length}appendWriter(e){return this.#L((0,r.getBytesCopy)(e.data))}writeBytes(t){let s=(0,r.getBytesCopy)(t),o=s.length%e.exports.WordSize;return o&&(s=(0,r.getBytesCopy)((0,r.concat)([s,n.slice(o)]))),this.#L(s)}writeValue(e){return this.#L(d(e))}writeUpdatableValue(){let t=this.#N.length;return this.#N.push(n),this.#D+=e.exports.WordSize,e=>{this.#N[t]=d(e)}}};class f{allowLoose;#N;#M;#U;#F;#j;constructor(e,t,n){(0,r.defineProperties)(this,{allowLoose:!!t}),this.#N=(0,r.getBytesCopy)(e),this.#U=0,this.#F=null,this.#j=null!=n?n:1024,this.#M=0}get data(){return(0,r.hexlify)(this.#N)}get dataLength(){return this.#N.length}get consumed(){return this.#M}get bytes(){return new Uint8Array(this.#N)}#z(e){if(this.#F)return this.#F.#z(e);this.#U+=e,(0,r.assert)(this.#j<1||this.#U<=this.#j*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#j} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:(0,r.getBytesCopy)(this.#N),offset:this.#M,length:e,info:{bytesRead:this.#U,dataLength:this.dataLength}})}#$(t,n,s){let o=Math.ceil(n/e.exports.WordSize)*e.exports.WordSize;return this.#M+o>this.#N.length&&(this.allowLoose&&s&&this.#M+n<=this.#N.length?o=n:(0,r.assert)(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:(0,r.getBytesCopy)(this.#N),length:this.#N.length,offset:this.#M+o})),this.#N.slice(this.#M,this.#M+o)}subReader(e){let t=new f(this.#N.slice(this.#M+e),this.allowLoose,this.#j);return t.#F=this,t}readBytes(e,t){let r=this.#$(0,e,!!t);return this.#z(e),this.#M+=r.length,r.slice(0,e)}readValue(){return(0,r.toBigInt)(this.readBytes(e.exports.WordSize))}readIndex(){return(0,r.toNumber)(this.readBytes(e.exports.WordSize))}}e.exports.Reader=f}),ef("7OW7j",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AddressCoder=void 0;var r=ed("emjD2"),n=ed("6oX7q"),s=ed("9hHQl"),o=ed("7zdr9");class a extends o.Coder{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=s.Typed.dereference(t,"string");try{n=(0,r.getAddress)(n)}catch(e){return this._throwError(e.message,t)}return e.writeValue(n)}decode(e){return(0,r.getAddress)((0,n.toBeHex)(e.readValue(),20))}}e.exports.AddressCoder=a}),ef("emjD2",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.resolveAddress=e.exports.isAddress=e.exports.isAddressable=e.exports.getCreate2Address=e.exports.getCreateAddress=e.exports.getIcapAddress=e.exports.getAddress=void 0;var r=ed("fv6dK");Object.defineProperty(e.exports,"getAddress",{enumerable:!0,get:function(){return r.getAddress}}),Object.defineProperty(e.exports,"getIcapAddress",{enumerable:!0,get:function(){return r.getIcapAddress}});var n=ed("jF7Lp");Object.defineProperty(e.exports,"getCreateAddress",{enumerable:!0,get:function(){return n.getCreateAddress}}),Object.defineProperty(e.exports,"getCreate2Address",{enumerable:!0,get:function(){return n.getCreate2Address}});var s=ed("lBcD2");Object.defineProperty(e.exports,"isAddressable",{enumerable:!0,get:function(){return s.isAddressable}}),Object.defineProperty(e.exports,"isAddress",{enumerable:!0,get:function(){return s.isAddress}}),Object.defineProperty(e.exports,"resolveAddress",{enumerable:!0,get:function(){return s.resolveAddress}})}),ef("fv6dK",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getIcapAddress=e.exports.getAddress=void 0;var r=ed("eap8h"),n=ed("49y6x");let s=BigInt(0),o=BigInt(36);function a(e){let t=(e=e.toLowerCase()).substring(2).split(""),s=new Uint8Array(40);for(let e=0;e<40;e++)s[e]=t[e].charCodeAt(0);let o=(0,n.getBytes)((0,r.keccak256)(s));for(let e=0;e<40;e+=2)o[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&o[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}let l={};for(let e=0;e<10;e++)l[String(e)]=String(e);for(let e=0;e<26;e++)l[String.fromCharCode(65+e)]=String(10+e);function u(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>l[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}let c=function(){let e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function d(e){if((0,n.assertArgument)("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);let t=a(e);return(0,n.assertArgument)(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){(0,n.assertArgument)(e.substring(2,4)===u(e),"bad icap checksum","address",e);let t=(function(e){e=e.toLowerCase();let t=s;for(let r=0;r<e.length;r++)t=t*o+c[e[r]];return t})(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return a("0x"+t)}(0,n.assertArgument)(!1,"invalid address","address",e)}e.exports.getAddress=d,e.exports.getIcapAddress=function(e){let t=BigInt(d(e)).toString(36).toUpperCase();for(;t.length<30;)t="0"+t;return"XE"+u("XE00"+t)+t}}),ef("eap8h",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.lock=e.exports.Signature=e.exports.SigningKey=e.exports.scryptSync=e.exports.scrypt=e.exports.pbkdf2=e.exports.sha512=e.exports.sha256=e.exports.ripemd160=e.exports.keccak256=e.exports.randomBytes=e.exports.computeHmac=void 0;var r=ed("3kdO0");Object.defineProperty(e.exports,"computeHmac",{enumerable:!0,get:function(){return r.computeHmac}});var n=ed("a6byD");Object.defineProperty(e.exports,"keccak256",{enumerable:!0,get:function(){return n.keccak256}});var s=ed("eWPMO");Object.defineProperty(e.exports,"ripemd160",{enumerable:!0,get:function(){return s.ripemd160}});var o=ed("dOocr");Object.defineProperty(e.exports,"pbkdf2",{enumerable:!0,get:function(){return o.pbkdf2}});var a=ed("lz1P5");Object.defineProperty(e.exports,"randomBytes",{enumerable:!0,get:function(){return a.randomBytes}});var l=ed("HcpWq");Object.defineProperty(e.exports,"scrypt",{enumerable:!0,get:function(){return l.scrypt}}),Object.defineProperty(e.exports,"scryptSync",{enumerable:!0,get:function(){return l.scryptSync}});var u=ed("k4GAD");Object.defineProperty(e.exports,"sha256",{enumerable:!0,get:function(){return u.sha256}}),Object.defineProperty(e.exports,"sha512",{enumerable:!0,get:function(){return u.sha512}});var c=ed("1pfHW");Object.defineProperty(e.exports,"SigningKey",{enumerable:!0,get:function(){return c.SigningKey}});var d=ed("6Afi3");Object.defineProperty(e.exports,"Signature",{enumerable:!0,get:function(){return d.Signature}}),e.exports.lock=function(){r.computeHmac.lock(),n.keccak256.lock(),o.pbkdf2.lock(),a.randomBytes.lock(),s.ripemd160.lock(),l.scrypt.lock(),l.scryptSync.lock(),u.sha256.lock(),u.sha512.lock(),a.randomBytes.lock()}}),ef("3kdO0",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.computeHmac=void 0;var r=ed("4kVBU"),n=ed("49y6x");let s=!1,o=function(e,t,n){return(0,r.createHmac)(e,t).update(n).digest()},a=o;function l(e,t,r){let s=(0,n.getBytes)(t,"key"),o=(0,n.getBytes)(r,"data");return(0,n.hexlify)(a(e,s,o))}e.exports.computeHmac=l,l._=o,l.lock=function(){s=!0},l.register=function(e){if(s)throw Error("computeHmac is locked");a=e},Object.freeze(l)}),ef("4kVBU",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.randomBytes=e.exports.pbkdf2Sync=e.exports.createHmac=e.exports.createHash=void 0;var r=ed("7CRQN"),n=ed("d6ZPz"),s=ed("3HYlQ"),o=ed("ftFTh"),a=ed("49y6x");let l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==ea)return ea;throw Error("unable to locate global object")}(),u=l.crypto||l.msCrypto;e.exports.createHash=function(e){switch(e){case"sha256":return s.sha256.create();case"sha512":return o.sha512.create()}(0,a.assertArgument)(!1,"invalid hashing algorithm name","algorithm",e)},e.exports.createHmac=function(e,t){let n={sha256:s.sha256,sha512:o.sha512}[e];return(0,a.assertArgument)(null!=n,"invalid hmac algorithm","algorithm",e),r.hmac.create(n,t)},e.exports.pbkdf2Sync=function(e,t,r,l,u){let c={sha256:s.sha256,sha512:o.sha512}[u];return(0,a.assertArgument)(null!=c,"invalid pbkdf2 algorithm","algorithm",u),(0,n.pbkdf2)(c,e,t,{c:r,dkLen:l})},e.exports.randomBytes=function(e){(0,a.assert)(null!=u,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),(0,a.assertArgument)(Number.isInteger(e)&&e>0&&e<=1024,"invalid length","length",e);let t=new Uint8Array(e);return u.getRandomValues(t),t}}),ef("7CRQN",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.hmac=e.exports.HMAC=void 0;var r=ed("719zM"),n=ed("d6rAR");class s extends n.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,r.hash)(e);let s=(0,n.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,a=new Uint8Array(o);a.set(s.length>o?e.create().update(s).digest():s);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),a.fill(0)}update(e){return(0,r.exists)(this),this.iHash.update(e),this}digestInto(e){(0,r.exists)(this),(0,r.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:s,blockLen:o,outputLen:a}=this;return e.finished=n,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.exports.HMAC=s,e.exports.hmac=(e,t,r)=>new s(e,t).update(r).digest(),e.exports.hmac.create=(e,t)=>new s(e,t)}),ef("719zM",function(e,t){"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function n(e){if("boolean"!=typeof e)throw Error(`Expected boolean, not ${e}`)}function s(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function l(e,t){s(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.output=e.exports.exists=e.exports.hash=e.exports.bytes=e.exports.bool=e.exports.number=void 0,e.exports.number=r,e.exports.bool=n,e.exports.bytes=s,e.exports.hash=o,e.exports.exists=a,e.exports.output=l,e.exports.default={number:r,bool:n,bytes:s,hash:o,exists:a,output:l}}),ef("d6rAR",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.randomBytes=e.exports.wrapXOFConstructorWithOpts=e.exports.wrapConstructorWithOpts=e.exports.wrapConstructor=e.exports.checkOpts=e.exports.Hash=e.exports.concatBytes=e.exports.toBytes=e.exports.utf8ToBytes=e.exports.asyncLoop=e.exports.nextTick=e.exports.hexToBytes=e.exports.bytesToHex=e.exports.isLE=e.exports.rotr=e.exports.createView=e.exports.u32=e.exports.u8=void 0;var r=ed("ASya2");let n=e=>e instanceof Uint8Array;if(e.exports.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),e.exports.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),e.exports.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),e.exports.rotr=(e,t)=>e<<32-t|e>>>t,e.exports.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],!e.exports.isLE)throw Error("Non little-endian hardware is not supported");let s=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));e.exports.bytesToHex=function(e){if(!n(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t},e.exports.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,s=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(s)||s<0)throw Error("Invalid byte sequence");r[t]=s}return r};let o=async()=>{};async function a(t,r,n){let s=Date.now();for(let o=0;o<t;o++){n(o);let t=Date.now()-s;t>=0&&t<r||(await (0,e.exports.nextTick)(),s+=t)}}function l(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function u(e){if("string"==typeof e&&(e=l(e)),!n(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}e.exports.nextTick=o,e.exports.asyncLoop=a,e.exports.utf8ToBytes=l,e.exports.toBytes=u,e.exports.concatBytes=function(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!n(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t},e.exports.Hash=class{clone(){return this._cloneInto()}};let c={}.toString;e.exports.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==c.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},e.exports.wrapConstructor=function(e){let t=t=>e().update(u(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},e.exports.wrapConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(u(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.exports.wrapXOFConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(u(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.exports.randomBytes=function(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}}),ef("ASya2",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.crypto=void 0,e.exports.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0}),ef("d6ZPz",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.pbkdf2Async=e.exports.pbkdf2=void 0;var r=ed("719zM"),n=ed("7CRQN"),s=ed("d6rAR");function o(e,t,o,a){(0,r.hash)(e);let{c:l,dkLen:u,asyncTick:c}=(0,s.checkOpts)({dkLen:32,asyncTick:10},a);if((0,r.number)(l),(0,r.number)(u),(0,r.number)(c),l<1)throw Error("PBKDF2: iterations (c) should be >= 1");let d=(0,s.toBytes)(t),f=(0,s.toBytes)(o),h=new Uint8Array(u),p=n.hmac.create(e,d),g=p._cloneInto().update(f);return{c:l,dkLen:u,asyncTick:c,DK:h,PRF:p,PRFSalt:g}}function a(e,t,r,n,s){return e.destroy(),t.destroy(),n&&n.destroy(),s.fill(0),r}async function l(e,t,r,n){let l,{c:u,dkLen:c,asyncTick:d,DK:f,PRF:h,PRFSalt:p}=o(e,t,r,n),g=new Uint8Array(4),m=(0,s.createView)(g),y=new Uint8Array(h.outputLen);for(let e=1,t=0;t<c;e++,t+=h.outputLen){let r=f.subarray(t,t+h.outputLen);m.setInt32(0,e,!1),(l=p._cloneInto(l)).update(g).digestInto(y),r.set(y.subarray(0,r.length)),await (0,s.asyncLoop)(u-1,d,()=>{h._cloneInto(l).update(y).digestInto(y);for(let e=0;e<r.length;e++)r[e]^=y[e]})}return a(h,p,f,l,y)}e.exports.pbkdf2=function(e,t,r,n){let l,{c:u,dkLen:c,DK:d,PRF:f,PRFSalt:h}=o(e,t,r,n),p=new Uint8Array(4),g=(0,s.createView)(p),m=new Uint8Array(f.outputLen);for(let e=1,t=0;t<c;e++,t+=f.outputLen){let r=d.subarray(t,t+f.outputLen);g.setInt32(0,e,!1),(l=h._cloneInto(l)).update(p).digestInto(m),r.set(m.subarray(0,r.length));for(let e=1;e<u;e++){f._cloneInto(l).update(m).digestInto(m);for(let e=0;e<r.length;e++)r[e]^=m[e]}}return a(f,h,d,l,m)},e.exports.pbkdf2Async=l}),ef("3HYlQ",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.sha224=e.exports.sha256=void 0;var r=ed("eT9ys"),n=ed("d6rAR");let s=(e,t,r)=>e&t^~e&r,o=(e,t,r)=>e&t^e&r^t&r,a=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),l=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),u=new Uint32Array(64);class c extends r.SHA2{constructor(){super(64,32,8,!1),this.A=0|l[0],this.B=0|l[1],this.C=0|l[2],this.D=0|l[3],this.E=0|l[4],this.F=0|l[5],this.G=0|l[6],this.H=0|l[7]}get(){let{A:e,B:t,C:r,D:n,E:s,F:o,G:a,H:l}=this;return[e,t,r,n,s,o,a,l]}set(e,t,r,n,s,o,a,l){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|s,this.F=0|o,this.G=0|a,this.H=0|l}process(e,t){for(let r=0;r<16;r++,t+=4)u[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=u[e-15],r=u[e-2],s=(0,n.rotr)(t,7)^(0,n.rotr)(t,18)^t>>>3,o=(0,n.rotr)(r,17)^(0,n.rotr)(r,19)^r>>>10;u[e]=o+u[e-7]+s+u[e-16]|0}let{A:r,B:l,C:c,D:d,E:f,F:h,G:p,H:g}=this;for(let e=0;e<64;e++){let t=g+((0,n.rotr)(f,6)^(0,n.rotr)(f,11)^(0,n.rotr)(f,25))+s(f,h,p)+a[e]+u[e]|0,m=((0,n.rotr)(r,2)^(0,n.rotr)(r,13)^(0,n.rotr)(r,22))+o(r,l,c)|0;g=p,p=h,h=f,f=d+t|0,d=c,c=l,l=r,r=t+m|0}r=r+this.A|0,l=l+this.B|0,c=c+this.C|0,d=d+this.D|0,f=f+this.E|0,h=h+this.F|0,p=p+this.G|0,g=g+this.H|0,this.set(r,l,c,d,f,h,p,g)}roundClean(){u.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class d extends c{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}e.exports.sha256=(0,n.wrapConstructor)(()=>new c),e.exports.sha224=(0,n.wrapConstructor)(()=>new d)}),ef("eT9ys",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SHA2=void 0;var r=ed("719zM"),n=ed("d6rAR");class s extends n.Hash{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,n.createView)(this.buffer)}update(e){(0,r.exists)(this);let{view:t,buffer:s,blockLen:o}=this,a=(e=(0,n.toBytes)(e)).length;for(let r=0;r<a;){let l=Math.min(o-this.pos,a-r);if(l===o){let t=(0,n.createView)(e);for(;o<=a-r;r+=o)this.process(t,r);continue}s.set(e.subarray(r,r+l),this.pos),this.pos+=l,r+=l,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.exists)(this),(0,r.output)(e,this),this.finished=!0;let{buffer:t,view:s,blockLen:o,isLE:a}=this,{pos:l}=this;t[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>o-l&&(this.process(s,0),l=0);for(let e=l;e<o;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let s=BigInt(32),o=BigInt(0xffffffff),a=Number(r>>s&o),l=Number(r&o),u=4*!!n,c=4*!n;e.setUint32(t+u,a,n),e.setUint32(t+c,l,n)}(s,o-8,BigInt(8*this.length),a),this.process(s,0);let u=(0,n.createView)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let d=c/4,f=this.get();if(d>f.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<d;e++)u.setUint32(4*e,f[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%t&&e.buffer.set(r),e}}e.exports.SHA2=s}),ef("ftFTh",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.sha384=e.exports.sha512_256=e.exports.sha512_224=e.exports.sha512=e.exports.SHA512=void 0;var r=ed("eT9ys"),n=ed("j2qkt"),s=ed("d6rAR");let[o,a]=n.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),l=new Uint32Array(80),u=new Uint32Array(80);class c extends r.SHA2{constructor(){super(128,64,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:c,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:m}=this;return[e,t,r,n,s,o,a,l,u,c,d,f,h,p,g,m]}set(e,t,r,n,s,o,a,l,u,c,d,f,h,p,g,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|s,this.Cl=0|o,this.Dh=0|a,this.Dl=0|l,this.Eh=0|u,this.El=0|c,this.Fh=0|d,this.Fl=0|f,this.Gh=0|h,this.Gl=0|p,this.Hh=0|g,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)l[r]=e.getUint32(t),u[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|l[e-15],r=0|u[e-15],s=n.default.rotrSH(t,r,1)^n.default.rotrSH(t,r,8)^n.default.shrSH(t,r,7),o=n.default.rotrSL(t,r,1)^n.default.rotrSL(t,r,8)^n.default.shrSL(t,r,7),a=0|l[e-2],c=0|u[e-2],d=n.default.rotrSH(a,c,19)^n.default.rotrBH(a,c,61)^n.default.shrSH(a,c,6),f=n.default.rotrSL(a,c,19)^n.default.rotrBL(a,c,61)^n.default.shrSL(a,c,6),h=n.default.add4L(o,f,u[e-7],u[e-16]),p=n.default.add4H(h,s,d,l[e-7],l[e-16]);l[e]=0|p,u[e]=0|h}let{Ah:r,Al:s,Bh:c,Bl:d,Ch:f,Cl:h,Dh:p,Dl:g,Eh:m,El:y,Fh:b,Fl:v,Gh:x,Gl:w,Hh:E,Hl:A}=this;for(let e=0;e<80;e++){let t=n.default.rotrSH(m,y,14)^n.default.rotrSH(m,y,18)^n.default.rotrBH(m,y,41),S=n.default.rotrSL(m,y,14)^n.default.rotrSL(m,y,18)^n.default.rotrBL(m,y,41),k=m&b^~m&x,I=y&v^~y&w,_=n.default.add5L(A,S,I,a[e],u[e]),P=n.default.add5H(_,E,t,k,o[e],l[e]),C=0|_,O=n.default.rotrSH(r,s,28)^n.default.rotrBH(r,s,34)^n.default.rotrBH(r,s,39),T=n.default.rotrSL(r,s,28)^n.default.rotrBL(r,s,34)^n.default.rotrBL(r,s,39),R=r&c^r&f^c&f,B=s&d^s&h^d&h;E=0|x,A=0|w,x=0|b,w=0|v,b=0|m,v=0|y,({h:m,l:y}=n.default.add(0|p,0|g,0|P,0|C)),p=0|f,g=0|h,f=0|c,h=0|d,c=0|r,d=0|s;let N=n.default.add3L(C,T,B);r=n.default.add3H(N,P,O,R),s=0|N}({h:r,l:s}=n.default.add(0|this.Ah,0|this.Al,0|r,0|s)),({h:c,l:d}=n.default.add(0|this.Bh,0|this.Bl,0|c,0|d)),({h:f,l:h}=n.default.add(0|this.Ch,0|this.Cl,0|f,0|h)),({h:p,l:g}=n.default.add(0|this.Dh,0|this.Dl,0|p,0|g)),({h:m,l:y}=n.default.add(0|this.Eh,0|this.El,0|m,0|y)),({h:b,l:v}=n.default.add(0|this.Fh,0|this.Fl,0|b,0|v)),({h:x,l:w}=n.default.add(0|this.Gh,0|this.Gl,0|x,0|w)),({h:E,l:A}=n.default.add(0|this.Hh,0|this.Hl,0|E,0|A)),this.set(r,s,c,d,f,h,p,g,m,y,b,v,x,w,E,A)}roundClean(){l.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}e.exports.SHA512=c;class d extends c{constructor(){super(),this.Ah=-0x73c2c838,this.Al=0x19544da2,this.Bh=0x73e19966,this.Bl=-0x76232b2a,this.Ch=0x1dfab7ae,this.Cl=0x32ff9c82,this.Dh=0x679dd514,this.Dl=0x582f9fcf,this.Eh=0xf6d2b69,this.El=0x7bd44da8,this.Fh=0x77e36f73,this.Fl=0x4c48942,this.Gh=0x3f9d85a8,this.Gl=0x6a1d36c8,this.Hh=0x1112e6ad,this.Hl=-0x6e296d5f,this.outputLen=28}}class f extends c{constructor(){super(),this.Ah=0x22312194,this.Al=-0x3d408d4,this.Bh=-0x60aaa05d,this.Bl=-0x37b39b3e,this.Ch=0x2393b86b,this.Cl=0x6f53b151,this.Dh=-0x69c788e7,this.Dl=0x5940eabd,this.Eh=-0x69d7c11e,this.El=-0x5771001d,this.Fh=-0x41a1e1db,this.Fl=0x53863992,this.Gh=0x2b0199fc,this.Gl=0x2c85b8aa,this.Hh=0xeb72ddc,this.Hl=-0x7e3ad35e,this.outputLen=32}}class h extends c{constructor(){super(),this.Ah=-0x344462a3,this.Al=-0x3efa6128,this.Bh=0x629a292a,this.Bl=0x367cd507,this.Ch=-0x6ea6fea6,this.Cl=0x3070dd17,this.Dh=0x152fecd8,this.Dl=-0x8f1a6c7,this.Eh=0x67332667,this.El=-4191439,this.Fh=-0x714bb579,this.Fl=0x68581511,this.Gh=-0x24f3d1f3,this.Gl=0x64f98fa7,this.Hh=0x47b5481d,this.Hl=-0x4105b05c,this.outputLen=48}}e.exports.sha512=(0,s.wrapConstructor)(()=>new c),e.exports.sha512_224=(0,s.wrapConstructor)(()=>new d),e.exports.sha512_256=(0,s.wrapConstructor)(()=>new f),e.exports.sha384=(0,s.wrapConstructor)(()=>new h)}),ef("j2qkt",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.add5L=e.exports.add5H=e.exports.add4H=e.exports.add4L=e.exports.add3H=e.exports.add3L=e.exports.add=e.exports.rotlBL=e.exports.rotlBH=e.exports.rotlSL=e.exports.rotlSH=e.exports.rotr32L=e.exports.rotr32H=e.exports.rotrBL=e.exports.rotrBH=e.exports.rotrSL=e.exports.rotrSH=e.exports.shrSL=e.exports.shrSH=e.exports.toBig=e.exports.split=e.exports.fromBig=void 0;let r=BigInt(0x100000000-1),n=BigInt(32);function s(e,t=!1){return t?{h:Number(e&r),l:Number(e>>n&r)}:{h:0|Number(e>>n&r),l:0|Number(e&r)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){let{h:a,l:l}=s(e[o],t);[r[o],n[o]]=[a,l]}return[r,n]}e.exports.fromBig=s,e.exports.split=o;let a=(e,t)=>BigInt(e>>>0)<<n|BigInt(t>>>0);e.exports.toBig=a;let l=(e,t,r)=>e>>>r;e.exports.shrSH=l;let u=(e,t,r)=>e<<32-r|t>>>r;e.exports.shrSL=u;let c=(e,t,r)=>e>>>r|t<<32-r;e.exports.rotrSH=c;let d=(e,t,r)=>e<<32-r|t>>>r;e.exports.rotrSL=d;let f=(e,t,r)=>e<<64-r|t>>>r-32;e.exports.rotrBH=f;let h=(e,t,r)=>e>>>r-32|t<<64-r;e.exports.rotrBL=h;let p=(e,t)=>t;e.exports.rotr32H=p;let g=(e,t)=>e;e.exports.rotr32L=g;let m=(e,t,r)=>e<<r|t>>>32-r;e.exports.rotlSH=m;let y=(e,t,r)=>t<<r|e>>>32-r;e.exports.rotlSL=y;let b=(e,t,r)=>t<<r-32|e>>>64-r;e.exports.rotlBH=b;let v=(e,t,r)=>e<<r-32|t>>>64-r;function x(e,t,r,n){let s=(t>>>0)+(n>>>0);return{h:e+r+(s/0x100000000|0)|0,l:0|s}}e.exports.rotlBL=v,e.exports.add=x;let w=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);e.exports.add3L=w;let E=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0;e.exports.add3H=E;let A=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);e.exports.add4L=A;let S=(e,t,r,n,s)=>t+r+n+s+(e/0x100000000|0)|0;e.exports.add4H=S;let k=(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0);e.exports.add5L=k;let I=(e,t,r,n,s,o)=>t+r+n+s+o+(e/0x100000000|0)|0;e.exports.add5H=I,e.exports.default={fromBig:s,split:o,toBig:a,shrSH:l,shrSL:u,rotrSH:c,rotrSL:d,rotrBH:f,rotrBL:h,rotr32H:p,rotr32L:g,rotlSH:m,rotlSL:y,rotlBH:b,rotlBL:v,add:x,add3L:w,add3H:E,add4L:A,add4H:S,add5H:I,add5L:k}}),ef("a6byD",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.keccak256=void 0;var r=ed("j5LRk"),n=ed("49y6x");let s=!1,o=function(e){return(0,r.keccak_256)(e)},a=o;function l(e){let t=(0,n.getBytes)(e,"data");return(0,n.hexlify)(a(t))}e.exports.keccak256=l,l._=o,l.lock=function(){s=!0},l.register=function(e){if(s)throw TypeError("keccak256 is locked");a=e},Object.freeze(l)}),ef("j5LRk",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.shake256=e.exports.shake128=e.exports.keccak_512=e.exports.keccak_384=e.exports.keccak_256=e.exports.keccak_224=e.exports.sha3_512=e.exports.sha3_384=e.exports.sha3_256=e.exports.sha3_224=e.exports.Keccak=e.exports.keccakP=void 0;var r=ed("719zM"),n=ed("j2qkt"),s=ed("d6rAR");let[o,a,l]=[[],[],[]],u=BigInt(0),c=BigInt(1),d=BigInt(2),f=BigInt(7),h=BigInt(256),p=BigInt(113);for(let e=0,t=c,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let s=u;for(let e=0;e<7;e++)(t=(t<<c^(t>>f)*p)%h)&d&&(s^=c<<(c<<BigInt(e))-c);l.push(s)}let[g,m]=(0,n.split)(l,!0),y=(e,t,r)=>r>32?(0,n.rotlBH)(e,t,r):(0,n.rotlSH)(e,t,r),b=(e,t,r)=>r>32?(0,n.rotlBL)(e,t,r):(0,n.rotlSL)(e,t,r);function v(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,s=(t+2)%10,o=r[s],a=r[s+1],l=y(o,a,1)^r[n],u=b(o,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=l,e[t+r+1]^=u}let t=e[2],s=e[3];for(let r=0;r<24;r++){let n=a[r],l=y(t,s,n),u=b(t,s,n),c=o[r];t=e[c],s=e[c+1],e[c]=l,e[c+1]=u}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=g[n],e[1]^=m[n]}r.fill(0)}e.exports.keccakP=v;class x extends s.Hash{constructor(e,t,n,o=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=o,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,r.number)(n),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){v(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,r.exists)(this);let{blockLen:t,state:n}=this,o=(e=(0,s.toBytes)(e)).length;for(let r=0;r<o;){let s=Math.min(t-this.pos,o-r);for(let t=0;t<s;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,r.exists)(this,!1),(0,r.bytes)(e),this.finish();let t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();let o=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,r.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,r.output)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:s,enableXOF:o}=this;return e||(e=new x(t,r,n,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}e.exports.Keccak=x;let w=(e,t,r)=>(0,s.wrapConstructor)(()=>new x(t,e,r));e.exports.sha3_224=w(6,144,28),e.exports.sha3_256=w(6,136,32),e.exports.sha3_384=w(6,104,48),e.exports.sha3_512=w(6,72,64),e.exports.keccak_224=w(1,144,28),e.exports.keccak_256=w(1,136,32),e.exports.keccak_384=w(1,104,48),e.exports.keccak_512=w(1,72,64);let E=(e,t,r)=>(0,s.wrapXOFConstructorWithOpts)((n={})=>new x(t,e,void 0===n.dkLen?r:n.dkLen,!0));e.exports.shake128=E(31,168,16),e.exports.shake256=E(31,136,32)}),ef("eWPMO",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ripemd160=void 0;var r=ed("5i78P"),n=ed("49y6x");let s=!1,o=function(e){return(0,r.ripemd160)(e)},a=o;function l(e){let t=(0,n.getBytes)(e,"data");return(0,n.hexlify)(a(t))}e.exports.ripemd160=l,l._=o,l.lock=function(){s=!0},l.register=function(e){if(s)throw TypeError("ripemd160 is locked");a=e},Object.freeze(l)}),ef("5i78P",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ripemd160=e.exports.RIPEMD160=void 0;var r=ed("eT9ys"),n=ed("d6rAR");let s=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),o=Uint8Array.from({length:16},(e,t)=>t),a=o.map(e=>(9*e+5)%16),l=[o],u=[a];for(let e=0;e<4;e++)for(let t of[l,u])t.push(t[e].map(e=>s[e]));let c=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),d=l.map((e,t)=>e.map(e=>c[t][e])),f=u.map((e,t)=>e.map(e=>c[t][e])),h=new Uint32Array([0,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e]),p=new Uint32Array([0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0]),g=(e,t)=>e<<t|e>>>32-t;function m(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}let y=new Uint32Array(16);class b extends r.SHA2{constructor(){super(64,20,8,!0),this.h0=0x67452301,this.h1=-0x10325477,this.h2=-0x67452302,this.h3=0x10325476,this.h4=-0x3c2d1e10}get(){let{h0:e,h1:t,h2:r,h3:n,h4:s}=this;return[e,t,r,n,s]}set(e,t,r,n,s){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|s}process(e,t){for(let r=0;r<16;r++,t+=4)y[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,s=0|this.h1,o=s,a=0|this.h2,c=a,b=0|this.h3,v=b,x=0|this.h4,w=x;for(let e=0;e<5;e++){let t=4-e,E=h[e],A=p[e],S=l[e],k=u[e],I=d[e],_=f[e];for(let t=0;t<16;t++){let n=g(r+m(e,s,a,b)+y[S[t]]+E,I[t])+x|0;r=x,x=b,b=0|g(a,10),a=s,s=n}for(let e=0;e<16;e++){let r=g(n+m(t,o,c,v)+y[k[e]]+A,_[e])+w|0;n=w,w=v,v=0|g(c,10),c=o,o=r}}this.set(this.h1+a+v|0,this.h2+b+w|0,this.h3+x+n|0,this.h4+r+o|0,this.h0+s+c|0)}roundClean(){y.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}e.exports.RIPEMD160=b,e.exports.ripemd160=(0,n.wrapConstructor)(()=>new b)}),ef("dOocr",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.pbkdf2=void 0;var r=ed("4kVBU"),n=ed("49y6x");let s=!1,o=function(e,t,n,s,o){return(0,r.pbkdf2Sync)(e,t,n,s,o)},a=o;function l(e,t,r,s,o){let l=(0,n.getBytes)(e,"password"),u=(0,n.getBytes)(t,"salt");return(0,n.hexlify)(a(l,u,r,s,o))}e.exports.pbkdf2=l,l._=o,l.lock=function(){s=!0},l.register=function(e){if(s)throw Error("pbkdf2 is locked");a=e},Object.freeze(l)}),ef("lz1P5",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.randomBytes=void 0;var r=ed("4kVBU");let n=!1,s=function(e){return new Uint8Array((0,r.randomBytes)(e))},o=s;function a(e){return o(e)}e.exports.randomBytes=a,a._=s,a.lock=function(){n=!0},a.register=function(e){if(n)throw Error("randomBytes is locked");o=e},Object.freeze(a)}),ef("HcpWq",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.scryptSync=e.exports.scrypt=void 0;var r=ed("j8cgd"),n=ed("49y6x");let s=!1,o=!1,a=async function(e,t,n,s,o,a,l){return await (0,r.scryptAsync)(e,t,{N:n,r:s,p:o,dkLen:a,onProgress:l})},l=function(e,t,n,s,o,a){return(0,r.scrypt)(e,t,{N:n,r:s,p:o,dkLen:a})},u=a,c=l;async function d(e,t,r,s,o,a,l){let c=(0,n.getBytes)(e,"passwd"),d=(0,n.getBytes)(t,"salt");return(0,n.hexlify)(await u(c,d,r,s,o,a,l))}function f(e,t,r,s,o,a){let l=(0,n.getBytes)(e,"passwd"),u=(0,n.getBytes)(t,"salt");return(0,n.hexlify)(c(l,u,r,s,o,a))}e.exports.scrypt=d,d._=a,d.lock=function(){o=!0},d.register=function(e){if(o)throw Error("scrypt is locked");u=e},Object.freeze(d),e.exports.scryptSync=f,f._=l,f.lock=function(){s=!0},f.register=function(e){if(s)throw Error("scryptSync is locked");c=e},Object.freeze(f)}),ef("j8cgd",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.scryptAsync=e.exports.scrypt=void 0;var r=ed("719zM"),n=ed("3HYlQ"),s=ed("d6ZPz"),o=ed("d6rAR");let a=(e,t)=>e<<t|e>>>32-t;function l(e,t,r,n,s,o){let l=e[t++]^r[n++],u=e[t++]^r[n++],c=e[t++]^r[n++],d=e[t++]^r[n++],f=e[t++]^r[n++],h=e[t++]^r[n++],p=e[t++]^r[n++],g=e[t++]^r[n++],m=e[t++]^r[n++],y=e[t++]^r[n++],b=e[t++]^r[n++],v=e[t++]^r[n++],x=e[t++]^r[n++],w=e[t++]^r[n++],E=e[t++]^r[n++],A=e[t++]^r[n++],S=l,k=u,I=c,_=d,P=f,C=h,O=p,T=g,R=m,B=y,N=b,D=v,L=x,M=w,U=E,F=A;for(let e=0;e<8;e+=2)P^=a(S+L|0,7),R^=a(P+S|0,9),L^=a(R+P|0,13),S^=a(L+R|0,18),B^=a(C+k|0,7),M^=a(B+C|0,9),k^=a(M+B|0,13),C^=a(k+M|0,18),U^=a(N+O|0,7),I^=a(U+N|0,9),O^=a(I+U|0,13),N^=a(O+I|0,18),_^=a(F+D|0,7),T^=a(_+F|0,9),D^=a(T+_|0,13),F^=a(D+T|0,18),k^=a(S+_|0,7),I^=a(k+S|0,9),_^=a(I+k|0,13),S^=a(_+I|0,18),O^=a(C+P|0,7),T^=a(O+C|0,9),P^=a(T+O|0,13),C^=a(P+T|0,18),D^=a(N+B|0,7),R^=a(D+N|0,9),B^=a(R+D|0,13),N^=a(B+R|0,18),L^=a(F+U|0,7),M^=a(L+F|0,9),U^=a(M+L|0,13),F^=a(U+M|0,18);s[o++]=l+S|0,s[o++]=u+k|0,s[o++]=c+I|0,s[o++]=d+_|0,s[o++]=f+P|0,s[o++]=h+C|0,s[o++]=p+O|0,s[o++]=g+T|0,s[o++]=m+R|0,s[o++]=y+B|0,s[o++]=b+N|0,s[o++]=v+D|0,s[o++]=x+L|0,s[o++]=w+M|0,s[o++]=E+U|0,s[o++]=A+F|0}function u(e,t,r,n,s){let o=n+0,a=n+16*s;for(let n=0;n<16;n++)r[a+n]=e[t+(2*s-1)*16+n];for(let n=0;n<s;n++,o+=16,t+=16)l(r,a,e,t,r,o),n>0&&(a+=16),l(r,o,e,t+=16,r,a)}function c(e,t,a){let{N:l,r:u,p:c,dkLen:d,asyncTick:f,maxmem:h,onProgress:p}=(0,o.checkOpts)({dkLen:32,asyncTick:10,maxmem:0x40000400},a);if((0,r.number)(l),(0,r.number)(u),(0,r.number)(c),(0,r.number)(d),(0,r.number)(f),(0,r.number)(h),void 0!==p&&"function"!=typeof p)throw Error("progressCb should be function");let g=128*u,m=g/4;if(l<=1||(l&l-1)!=0||l>=2**(g/8)||l>0x100000000)throw Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(c<0||c>(0x100000000-1)*32/g)throw Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(d<0||d>(0x100000000-1)*32)throw Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");let y=g*(l+c);if(y>h)throw Error(`Scrypt: parameters too large, ${y} (128 * r * (N + p)) > ${h} (maxmem)`);let b=(0,s.pbkdf2)(n.sha256,e,t,{c:1,dkLen:g*c}),v=(0,o.u32)(b),x=(0,o.u32)(new Uint8Array(g*l)),w=(0,o.u32)(new Uint8Array(g)),E=()=>{};if(p){let e=2*l*c,t=Math.max(Math.floor(e/1e4),1),r=0;E=()=>{r++,p&&(!(r%t)||r===e)&&p(r/e)}}return{N:l,r:u,p:c,dkLen:d,blockSize32:m,V:x,B32:v,B:b,tmp:w,blockMixCb:E,asyncTick:f}}function d(e,t,r,o,a){let l=(0,s.pbkdf2)(n.sha256,e,r,{c:1,dkLen:t});return r.fill(0),o.fill(0),a.fill(0),l}async function f(e,t,r){let{N:n,r:s,p:a,dkLen:l,blockSize32:f,V:h,B32:p,B:g,tmp:m,blockMixCb:y,asyncTick:b}=c(e,t,r);for(let e=0;e<a;e++){let t=f*e;for(let e=0;e<f;e++)h[e]=p[t+e];let r=0;await (0,o.asyncLoop)(n-1,b,()=>{u(h,r,h,r+=f,s),y()}),u(h,(n-1)*f,p,t,s),y(),await (0,o.asyncLoop)(n,b,()=>{let e=p[t+f-16]%n;for(let r=0;r<f;r++)m[r]=p[t+r]^h[e*f+r];u(m,0,p,t,s),y()})}return d(e,l,g,h,m)}e.exports.scrypt=function(e,t,r){let{N:n,r:s,p:o,dkLen:a,blockSize32:l,V:f,B32:h,B:p,tmp:g,blockMixCb:m}=c(e,t,r);for(let e=0;e<o;e++){let t=l*e;for(let e=0;e<l;e++)f[e]=h[t+e];for(let e=0,t=0;e<n-1;e++)u(f,t,f,t+=l,s),m();u(f,(n-1)*l,h,t,s),m();for(let e=0;e<n;e++){let e=h[t+l-16]%n;for(let r=0;r<l;r++)g[r]=h[t+r]^f[e*l+r];u(g,0,h,t,s),m()}}return d(e,a,p,f,g)},e.exports.scryptAsync=f}),ef("k4GAD",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.sha512=e.exports.sha256=void 0;var r=ed("4kVBU"),n=ed("49y6x");let s=function(e){return(0,r.createHash)("sha256").update(e).digest()},o=function(e){return(0,r.createHash)("sha512").update(e).digest()},a=s,l=o,u=!1,c=!1;function d(e){let t=(0,n.getBytes)(e,"data");return(0,n.hexlify)(a(t))}function f(e){let t=(0,n.getBytes)(e,"data");return(0,n.hexlify)(l(t))}e.exports.sha256=d,d._=s,d.lock=function(){u=!0},d.register=function(e){if(u)throw Error("sha256 is locked");a=e},Object.freeze(d),e.exports.sha512=f,f._=o,f.lock=function(){c=!0},f.register=function(e){if(c)throw Error("sha512 is locked");l=e},Object.freeze(d)}),ef("1pfHW",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SigningKey=void 0;var r=ed("3sulO"),n=ed("49y6x"),s=ed("6Afi3");class o{#H;constructor(e){(0,n.assertArgument)(32===(0,n.dataLength)(e),"invalid private key","privateKey","[REDACTED]"),this.#H=(0,n.hexlify)(e)}get privateKey(){return this.#H}get publicKey(){return o.computePublicKey(this.#H)}get compressedPublicKey(){return o.computePublicKey(this.#H,!0)}sign(e){(0,n.assertArgument)(32===(0,n.dataLength)(e),"invalid digest length","digest",e);let t=r.secp256k1.sign((0,n.getBytesCopy)(e),(0,n.getBytesCopy)(this.#H),{lowS:!0});return s.Signature.from({r:(0,n.toBeHex)(t.r,32),s:(0,n.toBeHex)(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=o.computePublicKey(e);return(0,n.hexlify)(r.secp256k1.getSharedSecret((0,n.getBytesCopy)(this.#H),(0,n.getBytes)(t),!1))}static computePublicKey(e,t){let s=(0,n.getBytes)(e,"key");if(32===s.length){let e=r.secp256k1.getPublicKey(s,!!t);return(0,n.hexlify)(e)}if(64===s.length){let e=new Uint8Array(65);e[0]=4,e.set(s,1),s=e}let o=r.secp256k1.ProjectivePoint.fromHex(s);return(0,n.hexlify)(o.toRawBytes(t))}static recoverPublicKey(e,t){(0,n.assertArgument)(32===(0,n.dataLength)(e),"invalid digest length","digest",e);let o=s.Signature.from(t),a=r.secp256k1.Signature.fromCompact((0,n.getBytesCopy)((0,n.concat)([o.r,o.s]))),l=(a=a.addRecoveryBit(o.yParity)).recoverPublicKey((0,n.getBytesCopy)(e));return(0,n.assertArgument)(null!=l,"invalid signature for digest","signature",t),"0x"+l.toHex(!1)}static addPoints(e,t,n){let s=r.secp256k1.ProjectivePoint.fromHex(o.computePublicKey(e).substring(2)),a=r.secp256k1.ProjectivePoint.fromHex(o.computePublicKey(t).substring(2));return"0x"+s.add(a).toHex(!!n)}}e.exports.SigningKey=o}),ef("3sulO",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encodeToCurve=e.exports.hashToCurve=e.exports.schnorr=e.exports.secp256k1=void 0;var r=ed("3HYlQ"),n=ed("d6rAR"),s=ed("d756k"),o=ed("46WB6"),a=ed("c3X5Z"),l=ed("cbZDg"),u=ed("esKei");let c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),f=BigInt(1),h=BigInt(2),p=(e,t)=>(e+t/h)/t;function g(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),o=BigInt(22),a=BigInt(23),l=BigInt(44),u=BigInt(88),d=e*e*e%c,f=d*d*e%c,p=(0,s.pow2)(f,t,c)*f%c,g=(0,s.pow2)(p,t,c)*f%c,y=(0,s.pow2)(g,h,c)*d%c,b=(0,s.pow2)(y,n,c)*y%c,v=(0,s.pow2)(b,o,c)*b%c,x=(0,s.pow2)(v,l,c)*v%c,w=(0,s.pow2)(x,u,c)*x%c,E=(0,s.pow2)(w,l,c)*v%c,A=(0,s.pow2)(E,t,c)*f%c,S=(0,s.pow2)(A,a,c)*b%c,k=(0,s.pow2)(S,r,c)*d%c,I=(0,s.pow2)(k,h,c);if(!m.eql(m.sqr(I),e))throw Error("Cannot find square root");return I}let m=(0,s.Field)(c,void 0,void 0,{sqrt:g});e.exports.secp256k1=(0,u.createCurve)({a:BigInt(0),b:BigInt(7),Fp:m,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-f*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=BigInt("0x100000000000000000000000000000000"),a=p(t*e,d),l=p(-r*e,d),u=(0,s.mod)(e-a*t-l*n,d),c=(0,s.mod)(-a*r-l*t,d),h=u>o,g=c>o;if(h&&(u=d-u),g&&(c=d-c),u>o||c>o)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:u,k2neg:g,k2:c}}}},r.sha256);let y=BigInt(0),b=e=>"bigint"==typeof e&&y<e&&e<c,v=e=>"bigint"==typeof e&&y<e&&e<d,x={};function w(e,...t){let n=x[e];if(void 0===n){let t=(0,r.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));n=(0,a.concatBytes)(t,t),x[e]=n}return(0,r.sha256)((0,a.concatBytes)(n,...t))}let E=e=>e.toRawBytes(!0).slice(1),A=e=>(0,a.numberToBytesBE)(e,32),S=e=>(0,s.mod)(e,c),k=e=>(0,s.mod)(e,d),I=e.exports.secp256k1.ProjectivePoint,_=(e,t,r)=>I.BASE.multiplyAndAddUnsafe(e,t,r);function P(t){let r=e.exports.secp256k1.utils.normPrivateKeyToScalar(t),n=I.fromPrivateKey(r);return{scalar:n.hasEvenY()?r:k(-r),bytes:E(n)}}function C(e){if(!b(e))throw Error("bad x: need 0 < x < p");let t=S(e*e),r=g(S(t*e+BigInt(7)));r%h!==y&&(r=S(-r));let n=new I(e,r,f);return n.assertValidity(),n}function O(...e){return k((0,a.bytesToNumberBE)(w("BIP0340/challenge",...e)))}function T(e,t,r){let n=(0,a.ensureBytes)("signature",e,64),s=(0,a.ensureBytes)("message",t),o=(0,a.ensureBytes)("publicKey",r,32);try{let e=C((0,a.bytesToNumberBE)(o)),t=(0,a.bytesToNumberBE)(n.subarray(0,32));if(!b(t))return!1;let r=(0,a.bytesToNumberBE)(n.subarray(32,64));if(!v(r))return!1;let l=O(A(t),E(e),s),u=_(e,r,k(-l));if(!u||!u.hasEvenY()||u.toAffine().x!==t)return!1;return!0}catch(e){return!1}}e.exports.schnorr={getPublicKey:function(e){return P(e).bytes},sign:function(e,t,r=(0,n.randomBytes)(32)){let s=(0,a.ensureBytes)("message",e),{bytes:o,scalar:l}=P(t),u=(0,a.ensureBytes)("auxRand",r,32),c=A(l^(0,a.bytesToNumberBE)(w("BIP0340/aux",u))),d=w("BIP0340/nonce",c,o,s),f=k((0,a.bytesToNumberBE)(d));if(f===y)throw Error("sign failed: k is zero");let{bytes:h,scalar:p}=P(f),g=O(h,o,s),m=new Uint8Array(64);if(m.set(h,0),m.set(A(k(p+g*l)),32),!T(m,s,o))throw Error("sign: Invalid signature produced");return m},verify:T,utils:{randomPrivateKey:e.exports.secp256k1.utils.randomPrivateKey,lift_x:C,pointToBytes:E,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,taggedHash:w,mod:s.mod}};let R=(0,l.isogenyMap)(m,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),B=(0,o.mapToCurveSimpleSWU)(m,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:m.create(BigInt("-11"))}),N=(0,l.createHasher)(e.exports.secp256k1.ProjectivePoint,e=>{let{x:t,y:r}=B(m.create(e[0]));return R(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:r.sha256});e.exports.hashToCurve=N.hashToCurve,e.exports.encodeToCurve=N.encodeToCurve}),ef("d756k",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.mapHashToField=e.exports.getMinHashLength=e.exports.getFieldBytesLength=e.exports.hashToPrivateScalar=e.exports.FpSqrtEven=e.exports.FpSqrtOdd=e.exports.Field=e.exports.nLength=e.exports.FpIsSquare=e.exports.FpDiv=e.exports.FpInvertBatch=e.exports.FpPow=e.exports.validateField=e.exports.isNegativeLE=e.exports.FpSqrt=e.exports.tonelliShanks=e.exports.invert=e.exports.pow2=e.exports.pow=e.exports.mod=void 0;var r=ed("c3X5Z");let n=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3),l=BigInt(4),u=BigInt(5),c=BigInt(8);function d(e,t){let r=e%t;return r>=n?r:t+r}function f(e,t,r){if(r<=n||t<n)throw Error("Expected power/modulo > 0");if(r===s)return n;let o=s;for(;t>n;)t&s&&(o=o*e%r),e=e*e%r,t>>=s;return o}function h(e,t){if(e===n||t<=n)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=d(e,t),o=t,a=n,l=s,u=s,c=n;for(;r!==n;){let e=o/r,t=o%r,n=a-u*e,s=l-c*e;o=r,r=t,a=u,l=c,u=n,c=s}if(o!==s)throw Error("invert: does not exist");return d(a,t)}function p(e){let t,r,a,u=(e-s)/o;for(t=e-s,r=0;t%o===n;t/=o,r++);for(a=o;a<e&&f(a,u,e)!==e-s;a++);if(1===r){let t=(e+s)/l;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let c=(t+s)/o;return function(e,n){if(e.pow(n,u)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,a),t),d=e.pow(n,c),f=e.pow(n,t);for(;!e.eql(f,e.ONE);){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(f);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,s<<BigInt(o-t-1));l=e.sqr(r),d=e.mul(d,r),f=e.mul(f,l),o=t}return d}}function g(e){if(e%l===a){let t=(e+s)/l;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%c===u){let t=(e-u)/c;return function(e,r){let n=e.mul(r,o),s=e.pow(n,t),a=e.mul(r,s),l=e.mul(e.mul(a,o),s),u=e.mul(a,e.sub(l,e.ONE));if(!e.eql(e.sqr(u),r))throw Error("Cannot find square root");return u}}return p(e)}BigInt(9),BigInt(16),e.exports.mod=d,e.exports.pow=f,e.exports.pow2=function(e,t,r){let s=e;for(;t-- >n;)s*=s,s%=r;return s},e.exports.invert=h,e.exports.tonelliShanks=p,e.exports.FpSqrt=g,e.exports.isNegativeLE=(e,t)=>(d(e,t)&s)===s;let m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,r){if(r<n)throw Error("Expected power > 0");if(r===n)return e.ONE;if(r===s)return t;let o=e.ONE,a=t;for(;r>n;)r&s&&(o=e.mul(o,a)),a=e.sqr(a),r>>=s;return o}function b(e,t){let r=Array(t.length),n=t.reduce((t,n,s)=>e.is0(n)?t:(r[s]=t,e.mul(t,n)),e.ONE),s=e.inv(n);return t.reduceRight((t,n,s)=>e.is0(n)?t:(r[s]=e.mul(t,r[s]),e.mul(t,n)),s),r}function v(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function x(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function w(e){let t=x(e);return t+Math.ceil(t/2)}e.exports.validateField=function(e){let t=m.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.validateObject)(e,t)},e.exports.FpPow=y,e.exports.FpInvertBatch=b,e.exports.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?h(r,e.ORDER):e.inv(r))},e.exports.FpIsSquare=function(e){let t=(e.ORDER-s)/o;return r=>{let n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},e.exports.nLength=v,e.exports.Field=function(e,t,o=!1,a={}){if(e<=n)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:l,nByteLength:u}=v(e,t);if(u>2048)throw Error("Field lengths over 2048 bytes are not supported");let c=g(e),f=Object.freeze({ORDER:e,BITS:l,BYTES:u,MASK:(0,r.bitMask)(l),ZERO:n,ONE:s,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return n<=t&&t<e},is0:e=>e===n,isOdd:e=>(e&s)===s,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>y(f,e,t),div:(t,r)=>d(t*h(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>h(t,e),sqrt:a.sqrt||(e=>c(f,e)),invertBatch:e=>b(f,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>o?(0,r.numberToBytesLE)(e,u):(0,r.numberToBytesBE)(e,u),fromBytes:e=>{if(e.length!==u)throw Error(`Fp.fromBytes: expected ${u}, got ${e.length}`);return o?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e)}});return Object.freeze(f)},e.exports.FpSqrtOdd=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},e.exports.FpSqrtEven=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},e.exports.hashToPrivateScalar=function(e,t,n=!1){let o=(e=(0,r.ensureBytes)("privateHash",e)).length,a=v(t).nByteLength+8;if(a<24||o<a||o>1024)throw Error(`hashToPrivateScalar: expected ${a}-1024 bytes of input, got ${o}`);return d(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-s)+s},e.exports.getFieldBytesLength=x,e.exports.getMinHashLength=w,e.exports.mapHashToField=function(e,t,n=!1){let o=e.length,a=x(t),l=w(t);if(o<16||o<l||o>1024)throw Error(`expected ${l}-1024 bytes of input, got ${o}`);let u=d(n?(0,r.bytesToNumberBE)(e):(0,r.bytesToNumberLE)(e),t-s)+s;return n?(0,r.numberToBytesLE)(u,a):(0,r.numberToBytesBE)(u,a)}}),ef("c3X5Z",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.validateObject=e.exports.createHmacDrbg=e.exports.bitMask=e.exports.bitSet=e.exports.bitGet=e.exports.bitLen=e.exports.utf8ToBytes=e.exports.equalBytes=e.exports.concatBytes=e.exports.ensureBytes=e.exports.numberToVarBytesBE=e.exports.numberToBytesLE=e.exports.numberToBytesBE=e.exports.bytesToNumberLE=e.exports.bytesToNumberBE=e.exports.hexToBytes=e.exports.hexToNumber=e.exports.numberToHexUnpadded=e.exports.bytesToHex=void 0;let r=BigInt(0),n=BigInt(1),s=BigInt(2),o=e=>e instanceof Uint8Array,a=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function l(e){if(!o(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=a[e[r]];return t}function u(e){let t=e.toString(16);return 1&t.length?`0${t}`:t}function c(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function d(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,s=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(s)||s<0)throw Error("Invalid byte sequence");r[t]=s}return r}function f(e,t){return d(e.toString(16).padStart(2*t,"0"))}function h(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!o(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}e.exports.bytesToHex=l,e.exports.numberToHexUnpadded=u,e.exports.hexToNumber=c,e.exports.hexToBytes=d,e.exports.bytesToNumberBE=function(e){return c(l(e))},e.exports.bytesToNumberLE=function(e){if(!o(e))throw Error("Uint8Array expected");return c(l(Uint8Array.from(e).reverse()))},e.exports.numberToBytesBE=f,e.exports.numberToBytesLE=function(e,t){return f(e,t).reverse()},e.exports.numberToVarBytesBE=function(e){return d(u(e))},e.exports.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=d(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(o(t))n=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let s=n.length;if("number"==typeof r&&s!==r)throw Error(`${e} expected ${r} bytes, got ${s}`);return n},e.exports.concatBytes=h,e.exports.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},e.exports.utf8ToBytes=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))},e.exports.bitLen=function(e){let t;for(t=0;e>r;e>>=n,t+=1);return t},e.exports.bitGet=function(e,t){return e>>BigInt(t)&n},e.exports.bitSet=(e,t,s)=>e|(s?n:r)<<BigInt(t),e.exports.bitMask=e=>(s<<BigInt(e-1))-n;let p=e=>new Uint8Array(e),g=e=>Uint8Array.from(e);e.exports.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=p(e),s=p(e),o=0,a=()=>{n.fill(1),s.fill(0),o=0},l=(...e)=>r(s,n,...e),u=(e=p())=>{s=l(g([0]),e),n=l(),0!==e.length&&(s=l(g([1]),e),n=l())},c=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=l()).slice();r.push(t),e+=n.length}return h(...r)};return(e,t)=>{let r;for(a(),u(e);!(r=t(c()));)u();return a(),r}};let m={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};e.exports.validateObject=function(e,t,r={}){let n=(t,r,n)=>{let s=m[r];if("function"!=typeof s)throw Error(`Invalid validator "${r}", expected function`);let o=e[t];if((!n||void 0!==o)&&!s(o,e))throw Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}}),ef("46WB6",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.mapToCurveSimpleSWU=e.exports.SWUFpSqrtRatio=e.exports.weierstrass=e.exports.weierstrassPoints=e.exports.DER=void 0;var r=ed("d756k"),n=(ed("c3X5Z"),ed("c3X5Z")),s=ed("heaYg");let{bytesToNumberBE:o,hexToBytes:a}=n;e.exports.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:r}=e.exports.DER;if(t.length<2||2!==t[0])throw new r("Invalid signature integer tag");let n=t[1],s=t.subarray(2,n+2);if(!n||s.length!==n)throw new r("Invalid signature integer: wrong length");if(128&s[0])throw new r("Invalid signature integer: negative");if(0===s[0]&&!(128&s[1]))throw new r("Invalid signature integer: unnecessary leading zero");return{d:o(s),l:t.subarray(n+2)}},toSig(t){let{Err:r}=e.exports.DER,n="string"==typeof t?a(t):t;if(!(n instanceof Uint8Array))throw Error("ui8a expected");let s=n.length;if(s<2||48!=n[0])throw new r("Invalid signature tag");if(n[1]!==s-2)throw new r("Invalid signature: incorrect length");let{d:o,l:l}=e.exports.DER._parseInt(n.subarray(2)),{d:u,l:c}=e.exports.DER._parseInt(l);if(c.length)throw new r("Invalid signature: left bytes after parsing");return{r:o,s:u}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),s=t(r(e.r)),o=n.length/2,a=s.length/2,l=r(o),u=r(a);return`30${r(a+o+4)}02${u}${s}02${l}${n}`}};let l=BigInt(0),u=BigInt(1),c=BigInt(2),d=BigInt(3),f=BigInt(4);function h(e){let t=function(e){let t=(0,s.validateBasic)(e);n.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:o,a:a}=t;if(r){if(!o.eql(a,o.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:o}=t,a=t.toBytes||((e,t,r)=>{let s=t.toAffine();return n.concatBytes(Uint8Array.from([4]),o.toBytes(s.x),o.toBytes(s.y))}),c=t.fromBytes||(e=>{let t=e.subarray(1);return{x:o.fromBytes(t.subarray(0,o.BYTES)),y:o.fromBytes(t.subarray(o.BYTES,2*o.BYTES))}});function f(e){let{a:r,b:n}=t,s=o.sqr(e),a=o.mul(s,e);return o.add(o.add(a,o.mul(e,r)),n)}if(!o.eql(o.sqr(t.Gy),f(t.Gx)))throw Error("bad generator point: equation left != right");function h(e){return"bigint"==typeof e&&l<e&&e<t.n}function p(e){if(!h(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function g(e){let s,{allowedPrivateKeyLengths:o,nByteLength:a,wrapPrivateKey:l,n:u}=t;if(o&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=n.bytesToHex(e)),"string"!=typeof e||!o.includes(e.length))throw Error("Invalid key");e=e.padStart(2*a,"0")}try{s="bigint"==typeof e?e:n.bytesToNumberBE((0,n.ensureBytes)("private key",e,a))}catch(t){throw Error(`private key must be ${a} bytes, hex or bigint, not ${typeof e}`)}return l&&(s=r.mod(s,u)),p(s),s}let m=new Map;function y(e){if(!(e instanceof b))throw Error("ProjectivePoint expected")}class b{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!o.isValid(e))throw Error("x required");if(null==t||!o.isValid(t))throw Error("y required");if(null==r||!o.isValid(r))throw Error("z required")}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!o.isValid(t)||!o.isValid(r))throw Error("invalid affine point");if(e instanceof b)throw Error("projective point not allowed");let n=e=>o.eql(e,o.ZERO);return n(t)&&n(r)?b.ZERO:new b(t,r,o.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=o.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(b.fromAffine)}static fromHex(e){let t=b.fromAffine(c((0,n.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return b.BASE.multiply(g(e))}_setWindowSize(e){this._WINDOW_SIZE=e,m.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!o.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:r}=this.toAffine();if(!o.isValid(e)||!o.isValid(r))throw Error("bad point: x or y not FE");let n=o.sqr(r),s=f(e);if(!o.eql(n,s))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(o.isOdd)return!o.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){y(e);let{px:t,py:r,pz:n}=this,{px:s,py:a,pz:l}=e,u=o.eql(o.mul(t,l),o.mul(s,n)),c=o.eql(o.mul(r,l),o.mul(a,n));return u&&c}negate(){return new b(this.px,o.neg(this.py),this.pz)}double(){let{a:e,b:r}=t,n=o.mul(r,d),{px:s,py:a,pz:l}=this,u=o.ZERO,c=o.ZERO,f=o.ZERO,h=o.mul(s,s),p=o.mul(a,a),g=o.mul(l,l),m=o.mul(s,a);return m=o.add(m,m),f=o.mul(s,l),f=o.add(f,f),u=o.mul(e,f),c=o.mul(n,g),c=o.add(u,c),u=o.sub(p,c),c=o.add(p,c),c=o.mul(u,c),u=o.mul(m,u),f=o.mul(n,f),g=o.mul(e,g),m=o.sub(h,g),m=o.mul(e,m),m=o.add(m,f),f=o.add(h,h),h=o.add(f,h),h=o.add(h,g),h=o.mul(h,m),c=o.add(c,h),g=o.mul(a,l),g=o.add(g,g),h=o.mul(g,m),u=o.sub(u,h),f=o.mul(g,p),f=o.add(f,f),new b(u,c,f=o.add(f,f))}add(e){y(e);let{px:r,py:n,pz:s}=this,{px:a,py:l,pz:u}=e,c=o.ZERO,f=o.ZERO,h=o.ZERO,p=t.a,g=o.mul(t.b,d),m=o.mul(r,a),v=o.mul(n,l),x=o.mul(s,u),w=o.add(r,n),E=o.add(a,l);w=o.mul(w,E),E=o.add(m,v),w=o.sub(w,E),E=o.add(r,s);let A=o.add(a,u);return E=o.mul(E,A),A=o.add(m,x),E=o.sub(E,A),A=o.add(n,s),c=o.add(l,u),A=o.mul(A,c),c=o.add(v,x),A=o.sub(A,c),h=o.mul(p,E),c=o.mul(g,x),h=o.add(c,h),c=o.sub(v,h),h=o.add(v,h),f=o.mul(c,h),v=o.add(m,m),v=o.add(v,m),x=o.mul(p,x),E=o.mul(g,E),v=o.add(v,x),x=o.sub(m,x),x=o.mul(p,x),E=o.add(E,x),m=o.mul(v,E),f=o.add(f,m),m=o.mul(A,E),c=o.mul(w,c),c=o.sub(c,m),m=o.mul(w,v),h=o.mul(A,h),new b(c,f,h=o.add(h,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(b.ZERO)}wNAF(e){return x.wNAFCached(this,m,e,e=>{let t=o.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(b.fromAffine)})}multiplyUnsafe(e){let r=b.ZERO;if(e===l)return r;if(p(e),e===u)return this;let{endo:n}=t;if(!n)return x.unsafeLadder(this,e);let{k1neg:s,k1:a,k2neg:c,k2:d}=n.splitScalar(e),f=r,h=r,g=this;for(;a>l||d>l;)a&u&&(f=f.add(g)),d&u&&(h=h.add(g)),g=g.double(),a>>=u,d>>=u;return s&&(f=f.negate()),c&&(h=h.negate()),h=new b(o.mul(h.px,n.beta),h.py,h.pz),f.add(h)}multiply(e){let r,n;p(e);let{endo:s}=t;if(s){let{k1neg:t,k1:a,k2neg:l,k2:u}=s.splitScalar(e),{p:c,f:d}=this.wNAF(a),{p:f,f:h}=this.wNAF(u);c=x.constTimeNegate(t,c),f=x.constTimeNegate(l,f),f=new b(o.mul(f.px,s.beta),f.py,f.pz),r=c.add(f),n=d.add(h)}else{let{p:t,f:s}=this.wNAF(e);r=t,n=s}return b.normalizeZ([r,n])[0]}multiplyAndAddUnsafe(e,t,r){let n=b.BASE,s=(e,t)=>t!==l&&t!==u&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=s(this,t).add(s(e,r));return o.is0()?void 0:o}toAffine(e){let{px:t,py:r,pz:n}=this,s=this.is0();null==e&&(e=s?o.ONE:o.inv(n));let a=o.mul(t,e),l=o.mul(r,e),u=o.mul(n,e);if(s)return{x:o.ZERO,y:o.ZERO};if(!o.eql(u,o.ONE))throw Error("invZ was invalid");return{x:a,y:l}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===u)return!0;if(r)return r(b,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===u?this:r?r(b,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),a(b,this,e)}toHex(e=!0){return n.bytesToHex(this.toRawBytes(e))}}b.BASE=new b(t.Gx,t.Gy,o.ONE),b.ZERO=new b(o.ZERO,o.ONE,o.ZERO);let v=t.nBitLength,x=(0,s.wNAF)(b,t.endo?Math.ceil(v/2):v);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:g,weierstrassEquation:f,isWithinCurveOrder:h}}function p(e,t){let r=e.ORDER,n=l;for(let e=r-u;e%c===l;e/=c)n+=u;let s=n,o=c<<s-u-u,a=o*c,h=(r-u)/a,p=(h-u)/c,g=a-u,m=e.pow(t,h),y=e.pow(t,(h+u)/c),b=(t,r)=>{let n=m,a=e.pow(r,g),l=e.sqr(a);l=e.mul(l,r);let d=e.mul(t,l);d=e.pow(d,p),d=e.mul(d,a),a=e.mul(d,r),l=e.mul(d,t);let f=e.mul(l,a);d=e.pow(f,o);let h=e.eql(d,e.ONE);a=e.mul(l,y),d=e.mul(f,n),l=e.cmov(a,l,h),f=e.cmov(d,f,h);for(let t=s;t>u;t--){let r=t-c;r=c<<r-u;let s=e.pow(f,r),o=e.eql(s,e.ONE);a=e.mul(l,n),n=e.mul(n,n),s=e.mul(f,n),l=e.cmov(a,l,o),f=e.cmov(s,f,o)}return{isValid:h,value:l}};if(e.ORDER%f===d){let r=(e.ORDER-d)/f,n=e.sqrt(e.neg(t));b=(t,s)=>{let o=e.sqr(s),a=e.mul(t,s);o=e.mul(o,a);let l=e.pow(o,r);l=e.mul(l,a);let u=e.mul(l,n),c=e.mul(e.sqr(l),s),d=e.eql(c,t),f=e.cmov(u,l,d);return{isValid:d,value:f}}}return b}e.exports.weierstrassPoints=h,e.exports.weierstrass=function(t){let o=function(e){let t=(0,s.validateBasic)(e);return n.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(t),{Fp:a,n:c}=o,d=a.BYTES+1,f=2*a.BYTES+1;function p(e){return r.mod(e,c)}function g(e){return r.invert(e,c)}let{ProjectivePoint:m,normPrivateKeyToScalar:y,weierstrassEquation:b,isWithinCurveOrder:v}=h({...o,toBytes(e,t,r){let s=t.toAffine(),o=a.toBytes(s.x),l=n.concatBytes;return r?l(Uint8Array.from([t.hasEvenY()?2:3]),o):l(Uint8Array.from([4]),o,a.toBytes(s.y))},fromBytes(e){let t=e.length,r=e[0],s=e.subarray(1);if(t===d&&(2===r||3===r)){let e=n.bytesToNumberBE(s);if(!(l<e&&e<a.ORDER))throw Error("Point is not on curve");let t=b(e),o=a.sqrt(t);return(1&r)==1!=((o&u)===u)&&(o=a.neg(o)),{x:e,y:o}}if(t===f&&4===r)return{x:a.fromBytes(s.subarray(0,a.BYTES)),y:a.fromBytes(s.subarray(a.BYTES,2*a.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${d} compressed bytes or ${f} uncompressed bytes`)}}),x=e=>n.bytesToHex(n.numberToBytesBE(e,o.nByteLength)),w=(e,t,r)=>n.bytesToNumberBE(e.slice(t,r));class E{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let t=o.nByteLength;return new E(w(e=(0,n.ensureBytes)("compactSignature",e,2*t),0,t),w(e,t,2*t))}static fromDER(t){let{r:r,s:s}=e.exports.DER.toSig((0,n.ensureBytes)("DER",t));return new E(r,s)}assertValidity(){if(!v(this.r))throw Error("r must be 0 < r < CURVE.n");if(!v(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new E(this.r,this.s,e)}recoverPublicKey(e){let{r:t,s:r,recovery:s}=this,l=k((0,n.ensureBytes)("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw Error("recovery id invalid");let u=2===s||3===s?t+o.n:t;if(u>=a.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&s)==0?"02":"03",d=m.fromHex(c+x(u)),f=g(u),h=p(-l*f),y=p(r*f),b=m.BASE.multiplyAndAddUnsafe(d,h,y);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>c>>u}normalizeS(){return this.hasHighS()?new E(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return n.hexToBytes(this.toDERHex())}toDERHex(){return e.exports.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return n.hexToBytes(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}function A(e){let t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===d||n===f:r?n===2*d||n===2*f:e instanceof m}let S=o.bits2int||function(e){let t=n.bytesToNumberBE(e),r=8*e.length-o.nBitLength;return r>0?t>>BigInt(r):t},k=o.bits2int_modN||function(e){return p(S(e))},I=n.bitMask(o.nBitLength);function _(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(l<=e&&e<I))throw Error(`bigint expected < 2^${o.nBitLength}`);return n.numberToBytesBE(e,o.nByteLength)}let P={lowS:o.lowS,prehash:!1},C={lowS:o.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:o,getPublicKey:function(e,t=!0){return m.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(A(e))throw Error("first arg must be private key");if(!A(t))throw Error("second arg must be public key");return m.fromHex(t).multiply(y(e)).toRawBytes(r)},sign:function(e,t,r=P){let{seed:s,k2sig:d}=function(e,t,r=P){if(["recovered","canonical"].some(e=>e in r))throw Error("sign() legacy options not supported");let{hash:s,randomBytes:d}=o,{lowS:f,prehash:h,extraEntropy:b}=r;null==f&&(f=!0),e=(0,n.ensureBytes)("msgHash",e),h&&(e=(0,n.ensureBytes)("prehashed msgHash",s(e)));let x=k(e),w=y(t),A=[_(w),_(x)];if(null!=b){let e=!0===b?d(a.BYTES):b;A.push((0,n.ensureBytes)("extraEntropy",e))}return{seed:n.concatBytes(...A),k2sig:function(e){var t;let r=S(e);if(!v(r))return;let n=g(r),s=m.BASE.multiply(r).toAffine(),o=p(s.x);if(o===l)return;let a=p(n*p(x+o*w));if(a===l)return;let d=2*(s.x!==o)|Number(s.y&u),h=a;return f&&a>c>>u&&(h=(t=a)>c>>u?p(-t):t,d^=1),new E(o,h,d)}}}(e,t,r);return n.createHmacDrbg(o.hash.outputLen,o.nByteLength,o.hmac)(s,d)},verify:function(t,r,s,a=C){let l,u;if(r=(0,n.ensureBytes)("msgHash",r),s=(0,n.ensureBytes)("publicKey",s),"strict"in a)throw Error("options.strict was renamed to lowS");let{lowS:c,prehash:d}=a;try{if("string"==typeof t||t instanceof Uint8Array)try{u=E.fromDER(t)}catch(r){if(!(r instanceof e.exports.DER.Err))throw r;u=E.fromCompact(t)}else if("object"==typeof t&&"bigint"==typeof t.r&&"bigint"==typeof t.s){let{r:e,s:r}=t;u=new E(e,r)}else throw Error("PARSE");l=m.fromHex(s)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&u.hasHighS())return!1;d&&(r=o.hash(r));let{r:f,s:h}=u,y=k(r),b=g(h),v=p(y*b),x=p(f*b),w=m.BASE.multiplyAndAddUnsafe(l,v,x)?.toAffine();return!!w&&p(w.x)===f},ProjectivePoint:m,Signature:E,utils:{isValidPrivateKey(e){try{return y(e),!0}catch(e){return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{let e=r.getMinHashLength(o.n);return r.mapHashToField(o.randomBytes(e),o.n)},precompute:(e=8,t=m.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}},e.exports.SWUFpSqrtRatio=p,e.exports.mapToCurveSimpleSWU=function(e,t){if(r.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let n=p(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return r=>{let s,o,a,l,u,c,d,f;s=e.sqr(r),s=e.mul(s,t.Z),o=e.sqr(s),o=e.add(o,s),a=e.add(o,e.ONE),a=e.mul(a,t.B),l=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),l=e.mul(l,t.A),o=e.sqr(a),c=e.sqr(l),u=e.mul(c,t.A),o=e.add(o,u),o=e.mul(o,a),c=e.mul(c,l),u=e.mul(c,t.B),o=e.add(o,u),d=e.mul(s,a);let{isValid:h,value:p}=n(o,c);f=e.mul(s,r),f=e.mul(f,p),d=e.cmov(d,a,h),f=e.cmov(f,p,h);let g=e.isOdd(r)===e.isOdd(f);return f=e.cmov(e.neg(f),f,g),{x:d=e.div(d,l),y:f}}}}),ef("heaYg",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateBasic=t.wNAF=void 0;var r=ed("d756k"),n=ed("c3X5Z");let s=BigInt(0),o=BigInt(1);t.wNAF=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,a=t;for(;r>s;)r&o&&(n=n.add(a)),a=a.double(),r>>=o;return n},precomputeWindow(e,t){let{windows:r,windowSize:s}=n(t),o=[],a=e,l=a;for(let e=0;e<r;e++){l=a,o.push(l);for(let e=1;e<s;e++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(t,s,a){let{windows:l,windowSize:u}=n(t),c=e.ZERO,d=e.BASE,f=BigInt(2**t-1),h=2**t,p=BigInt(t);for(let e=0;e<l;e++){let t=e*u,n=Number(a&f);a>>=p,n>u&&(n-=h,a+=o);let l=t+Math.abs(n)-1,g=e%2!=0,m=n<0;0===n?d=d.add(r(g,s[t])):c=c.add(r(m,s[l]))}return{p:c,f:d}},wNAFCached(e,t,r,n){let s=e._WINDOW_SIZE||1,o=t.get(e);return o||(o=this.precomputeWindow(e,s),1!==s&&t.set(e,n(o))),this.wNAF(s,o,r)}}},t.validateBasic=function(e){return(0,r.validateField)(e.Fp),(0,n.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}}),ef("cbZDg",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createHasher=e.exports.isogenyMap=e.exports.hash_to_field=e.exports.expand_message_xof=e.exports.expand_message_xmd=void 0;var r=ed("d756k"),n=ed("c3X5Z");let s=n.bytesToNumberBE;function o(e,t){if(e<0||e>=1<<8*t)throw Error(`bad I2OSP call: value=${e} length=${t}`);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function a(e){if(!(e instanceof Uint8Array))throw Error("Uint8Array expected")}function l(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function u(e,t,r,s){a(e),a(t),l(r),t.length>255&&(t=s((0,n.concatBytes)((0,n.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:u,blockLen:c}=s,d=Math.ceil(r/u);if(d>255)throw Error("Invalid xmd length");let f=(0,n.concatBytes)(t,o(t.length,1)),h=o(0,c),p=o(r,2),g=Array(d),m=s((0,n.concatBytes)(h,e,p,o(0,1),f));g[0]=s((0,n.concatBytes)(m,o(1,1),f));for(let e=1;e<=d;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}(m,g[e-1]),o(e+1,1),f];g[e]=s((0,n.concatBytes)(...t))}return(0,n.concatBytes)(...g).slice(0,r)}function c(e,t,r,s,u){if(a(e),a(t),l(r),t.length>255){let e=Math.ceil(2*s/8);t=u.create({dkLen:e}).update((0,n.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return u.create({dkLen:r}).update(e).update(o(r,2)).update(t).update(o(t.length,1)).digest()}function d(e,t,o){let d;(0,n.validateObject)(o,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:f,k:h,m:p,hash:g,expand:m,DST:y}=o;a(e),l(t);let b=function(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return(0,n.utf8ToBytes)(e);throw Error("DST must be Uint8Array or string")}(y),v=Math.ceil((f.toString(2).length+h)/8),x=t*p*v;if("xmd"===m)d=u(e,b,x,g);else if("xof"===m)d=c(e,b,x,h,g);else if("_internal_pass"===m)d=e;else throw Error('expand must be "xmd" or "xof"');let w=Array(t);for(let e=0;e<t;e++){let t=Array(p);for(let n=0;n<p;n++){let o=v*(n+e*p),a=d.subarray(o,o+v);t[n]=(0,r.mod)(s(a),f)}w[e]=t}return w}e.exports.expand_message_xmd=u,e.exports.expand_message_xof=c,e.exports.hash_to_field=d,e.exports.isogenyMap=function(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,n)=>{let[s,o,a,l]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n)));return t=e.div(s,o),n=e.mul(n,e.div(a,l)),{x:t,y:n}}},e.exports.createHasher=function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");return{hashToCurve(n,s){let o=d(n,2,{...r,DST:r.DST,...s}),a=e.fromAffine(t(o[0])),l=e.fromAffine(t(o[1])),u=a.add(l).clearCofactor();return u.assertValidity(),u},encodeToCurve(n,s){let o=d(n,1,{...r,DST:r.encodeDST,...s}),a=e.fromAffine(t(o[0])).clearCofactor();return a.assertValidity(),a}}}}),ef("esKei",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createCurve=e.exports.getHash=void 0;var r=ed("7CRQN"),n=ed("d6rAR"),s=ed("46WB6");function o(e){return{hash:e,hmac:(t,...s)=>(0,r.hmac)(e,t,(0,n.concatBytes)(...s)),randomBytes:n.randomBytes}}e.exports.getHash=o,e.exports.createCurve=function(e,t){let r=t=>(0,s.weierstrass)({...e,...o(t)});return Object.freeze({...r(t),create:r})}}),ef("6Afi3",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Signature=void 0;var r=ed("k3VZL"),n=ed("49y6x");let s=BigInt(0),o=BigInt(1),a=BigInt(2),l=BigInt(27),u=BigInt(28),c=BigInt(35),d={};function f(e){return(0,n.zeroPadValue)((0,n.toBeArray)(e),32)}class h{#V;#q;#G;#W;get r(){return this.#V}set r(e){(0,n.assertArgument)(32===(0,n.dataLength)(e),"invalid r","value",e),this.#V=(0,n.hexlify)(e)}get s(){return this.#q}set s(e){(0,n.assertArgument)(32===(0,n.dataLength)(e),"invalid s","value",e);let t=(0,n.hexlify)(e);(0,n.assertArgument)(8>parseInt(t.substring(0,3)),"non-canonical s","value",t),this.#q=t}get v(){return this.#G}set v(e){let t=(0,n.getNumber)(e,"value");(0,n.assertArgument)(27===t||28===t,"invalid v","v",e),this.#G=t}get networkV(){return this.#W}get legacyChainId(){let e=this.networkV;return null==e?null:h.getChainId(e)}get yParity(){return+(27!==this.v)}get yParityAndS(){let e=(0,n.getBytes)(this.s);return this.yParity&&(e[0]|=128),(0,n.hexlify)(e)}get compactSerialized(){return(0,n.concat)([this.r,this.yParityAndS])}get serialized(){return(0,n.concat)([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,s){(0,n.assertPrivate)(e,d,"Signature"),this.#V=t,this.#q=r,this.#G=s,this.#W=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let e=new h(d,this.r,this.s,this.v);return this.networkV&&(e.#W=this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){let t=(0,n.getBigInt)(e,"v");return t==l||t==u?s:((0,n.assertArgument)(t>=c,"invalid EIP-155 v","v",e),(t-c)/a)}static getChainIdV(e,t){return(0,n.getBigInt)(e)*a+BigInt(35+t-27)}static getNormalizedV(e){let t=(0,n.getBigInt)(e);return t===s||t===l?27:t===o||t===u?28:((0,n.assertArgument)(t>=c,"invalid v","v",e),t&o?27:28)}static from(e){function t(t,r){(0,n.assertArgument)(t,r,"signature",e)}if(null==e)return new h(d,r.ZeroHash,r.ZeroHash,27);if("string"==typeof e){let r=(0,n.getBytes)(e,"signature");if(64===r.length){let e=(0,n.hexlify)(r.slice(0,32)),t=r.slice(32,64),s=128&t[0]?28:27;return t[0]&=127,new h(d,e,(0,n.hexlify)(t),s)}if(65===r.length){let e=(0,n.hexlify)(r.slice(0,32)),s=r.slice(32,64);t((128&s[0])==0,"non-canonical s");let o=h.getNormalizedV(r[64]);return new h(d,e,(0,n.hexlify)(s),o)}t(!1,"invalid raw signature length")}if(e instanceof h)return e.clone();let s=e.r;t(null!=s,"missing r");let o=f(s),a=function(e,r){if(null!=e)return f(e);if(null!=r){t((0,n.isHexString)(r,32),"invalid yParityAndS");let e=(0,n.getBytes)(r);return e[0]&=127,(0,n.hexlify)(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t((128&(0,n.getBytes)(a)[0])==0,"non-canonical s");let{networkV:l,v:u}=function(e,r,s){if(null!=e){let t=(0,n.getBigInt)(e);return{networkV:t>=c?t:void 0,v:h.getNormalizedV(t)}}if(null!=r)return t((0,n.isHexString)(r,32),"invalid yParityAndS"),{v:128&(0,n.getBytes)(r)[0]?28:27};if(null!=s){switch((0,n.getNumber)(s,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),p=new h(d,o,a,u);return l&&(p.#W=l),t(null==e.yParity||(0,n.getNumber)(e.yParity,"sig.yParity")===p.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===p.yParityAndS,"yParityAndS mismatch"),p}}e.exports.Signature=h}),ef("k3VZL",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MessagePrefix=e.exports.EtherSymbol=e.exports.MaxInt256=e.exports.MinInt256=e.exports.MaxUint256=e.exports.WeiPerEther=e.exports.N=e.exports.ZeroHash=e.exports.ZeroAddress=void 0;var r=ed("zn59G");Object.defineProperty(e.exports,"ZeroAddress",{enumerable:!0,get:function(){return r.ZeroAddress}});var n=ed("dZVp3");Object.defineProperty(e.exports,"ZeroHash",{enumerable:!0,get:function(){return n.ZeroHash}});var s=ed("8BqBg");Object.defineProperty(e.exports,"N",{enumerable:!0,get:function(){return s.N}}),Object.defineProperty(e.exports,"WeiPerEther",{enumerable:!0,get:function(){return s.WeiPerEther}}),Object.defineProperty(e.exports,"MaxUint256",{enumerable:!0,get:function(){return s.MaxUint256}}),Object.defineProperty(e.exports,"MinInt256",{enumerable:!0,get:function(){return s.MinInt256}}),Object.defineProperty(e.exports,"MaxInt256",{enumerable:!0,get:function(){return s.MaxInt256}});var o=ed("fZseQ");Object.defineProperty(e.exports,"EtherSymbol",{enumerable:!0,get:function(){return o.EtherSymbol}}),Object.defineProperty(e.exports,"MessagePrefix",{enumerable:!0,get:function(){return o.MessagePrefix}})}),ef("zn59G",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ZeroAddress=void 0,e.exports.ZeroAddress="0x0000000000000000000000000000000000000000"}),ef("dZVp3",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ZeroHash=void 0,e.exports.ZeroHash="0x0000000000000000000000000000000000000000000000000000000000000000"}),ef("8BqBg",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MaxInt256=e.exports.MinInt256=e.exports.MaxUint256=e.exports.WeiPerEther=e.exports.N=void 0,e.exports.N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),e.exports.WeiPerEther=BigInt("1000000000000000000"),e.exports.MaxUint256=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),e.exports.MinInt256=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),e.exports.MaxInt256=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")}),ef("fZseQ",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MessagePrefix=e.exports.EtherSymbol=void 0,e.exports.EtherSymbol="",e.exports.MessagePrefix="\x19Ethereum Signed Message:\n"}),ef("jF7Lp",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getCreate2Address=e.exports.getCreateAddress=void 0;var r=ed("eap8h"),n=ed("49y6x"),s=ed("fv6dK");e.exports.getCreateAddress=function(e){let t=(0,s.getAddress)(e.from),o=(0,n.getBigInt)(e.nonce,"tx.nonce").toString(16);return o="0"===o?"0x":o.length%2?"0x0"+o:"0x"+o,(0,s.getAddress)((0,n.dataSlice)((0,r.keccak256)((0,n.encodeRlp)([t,o])),12))},e.exports.getCreate2Address=function(e,t,o){let a=(0,s.getAddress)(e),l=(0,n.getBytes)(t,"salt"),u=(0,n.getBytes)(o,"initCodeHash");return(0,n.assertArgument)(32===l.length,"salt must be 32 bytes","salt",t),(0,n.assertArgument)(32===u.length,"initCodeHash must be 32 bytes","initCodeHash",o),(0,s.getAddress)((0,n.dataSlice)((0,r.keccak256)((0,n.concat)(["0xff",a,l,u])),12))}}),ef("lBcD2",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.resolveAddress=e.exports.isAddress=e.exports.isAddressable=void 0;var r=ed("49y6x"),n=ed("fv6dK");function s(e){return e&&"function"==typeof e.getAddress}async function o(e,t){let s=await t;return(null==s||"0x0000000000000000000000000000000000000000"===s)&&((0,r.assert)("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),(0,r.assertArgument)(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),(0,n.getAddress)(s)}e.exports.isAddressable=s,e.exports.isAddress=function(e){try{return(0,n.getAddress)(e),!0}catch(e){}return!1},e.exports.resolveAddress=function(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?(0,n.getAddress)(e):((0,r.assert)(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),o(e,t.resolveName(e))):s(e)?o(e,e.getAddress()):e&&"function"==typeof e.then?o(e,e):void(0,r.assertArgument)(!1,"unsupported addressable value","target",e)}}),ef("9hHQl",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Typed=void 0;var r=ed("49y6x");let n={};function s(e,t){let r=!1;return t<0&&(r=!0,t*=-1),new l(n,`${r?"":"u"}int${t}`,e,{signed:r,width:t})}function o(e,t){return new l(n,`bytes${t||""}`,e,{size:t})}let a=Symbol.for("_ethers_typed");class l{type;value;#K;_typedSymbol;constructor(e,t,s,o){null==o&&(o=null),(0,r.assertPrivate)(n,e,"Typed"),(0,r.defineProperties)(this,{_typedSymbol:a,type:t,value:s}),this.#K=o,this.format()}format(){if("array"===this.type||"dynamicArray"===this.type)throw Error("");return"tuple"===this.type?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#K}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#K?-1:!1===this.#K?this.value.length:null}static from(e,t){return new l(n,e,t)}static uint8(e){return s(e,8)}static uint16(e){return s(e,16)}static uint24(e){return s(e,24)}static uint32(e){return s(e,32)}static uint40(e){return s(e,40)}static uint48(e){return s(e,48)}static uint56(e){return s(e,56)}static uint64(e){return s(e,64)}static uint72(e){return s(e,72)}static uint80(e){return s(e,80)}static uint88(e){return s(e,88)}static uint96(e){return s(e,96)}static uint104(e){return s(e,104)}static uint112(e){return s(e,112)}static uint120(e){return s(e,120)}static uint128(e){return s(e,128)}static uint136(e){return s(e,136)}static uint144(e){return s(e,144)}static uint152(e){return s(e,152)}static uint160(e){return s(e,160)}static uint168(e){return s(e,168)}static uint176(e){return s(e,176)}static uint184(e){return s(e,184)}static uint192(e){return s(e,192)}static uint200(e){return s(e,200)}static uint208(e){return s(e,208)}static uint216(e){return s(e,216)}static uint224(e){return s(e,224)}static uint232(e){return s(e,232)}static uint240(e){return s(e,240)}static uint248(e){return s(e,248)}static uint256(e){return s(e,256)}static uint(e){return s(e,256)}static int8(e){return s(e,-8)}static int16(e){return s(e,-16)}static int24(e){return s(e,-24)}static int32(e){return s(e,-32)}static int40(e){return s(e,-40)}static int48(e){return s(e,-48)}static int56(e){return s(e,-56)}static int64(e){return s(e,-64)}static int72(e){return s(e,-72)}static int80(e){return s(e,-80)}static int88(e){return s(e,-88)}static int96(e){return s(e,-96)}static int104(e){return s(e,-104)}static int112(e){return s(e,-112)}static int120(e){return s(e,-120)}static int128(e){return s(e,-128)}static int136(e){return s(e,-136)}static int144(e){return s(e,-144)}static int152(e){return s(e,-152)}static int160(e){return s(e,-160)}static int168(e){return s(e,-168)}static int176(e){return s(e,-176)}static int184(e){return s(e,-184)}static int192(e){return s(e,-192)}static int200(e){return s(e,-200)}static int208(e){return s(e,-208)}static int216(e){return s(e,-216)}static int224(e){return s(e,-224)}static int232(e){return s(e,-232)}static int240(e){return s(e,-240)}static int248(e){return s(e,-248)}static int256(e){return s(e,-256)}static int(e){return s(e,-256)}static bytes1(e){return o(e,1)}static bytes2(e){return o(e,2)}static bytes3(e){return o(e,3)}static bytes4(e){return o(e,4)}static bytes5(e){return o(e,5)}static bytes6(e){return o(e,6)}static bytes7(e){return o(e,7)}static bytes8(e){return o(e,8)}static bytes9(e){return o(e,9)}static bytes10(e){return o(e,10)}static bytes11(e){return o(e,11)}static bytes12(e){return o(e,12)}static bytes13(e){return o(e,13)}static bytes14(e){return o(e,14)}static bytes15(e){return o(e,15)}static bytes16(e){return o(e,16)}static bytes17(e){return o(e,17)}static bytes18(e){return o(e,18)}static bytes19(e){return o(e,19)}static bytes20(e){return o(e,20)}static bytes21(e){return o(e,21)}static bytes22(e){return o(e,22)}static bytes23(e){return o(e,23)}static bytes24(e){return o(e,24)}static bytes25(e){return o(e,25)}static bytes26(e){return o(e,26)}static bytes27(e){return o(e,27)}static bytes28(e){return o(e,28)}static bytes29(e){return o(e,29)}static bytes30(e){return o(e,30)}static bytes31(e){return o(e,31)}static bytes32(e){return o(e,32)}static address(e){return new l(n,"address",e)}static bool(e){return new l(n,"bool",!!e)}static bytes(e){return new l(n,"bytes",e)}static string(e){return new l(n,"string",e)}static array(e,t){throw Error("not implemented yet")}static tuple(e,t){throw Error("not implemented yet")}static overrides(e){return new l(n,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===a}static dereference(e,t){if(l.isTyped(e)){if(e.type!==t)throw Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}e.exports.Typed=l}),ef("fMnq9",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ArrayCoder=e.exports.unpack=e.exports.pack=void 0;var r=ed("49y6x"),n=ed("9hHQl"),s=ed("7zdr9"),o=ed("aqF6z");function a(e,t,n){let o=[];if(Array.isArray(n))o=n;else if(n&&"object"==typeof n){let e={};o=t.map(t=>{let s=t.localName;return(0,r.assert)(s,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),(0,r.assert)(!e[s],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),e[s]=!0,n[s]})}else(0,r.assertArgument)(!1,"invalid tuple value","tuple",n);(0,r.assertArgument)(t.length===o.length,"types/value length mismatch","tuple",n);let a=new s.Writer,l=new s.Writer,u=[];t.forEach((e,t)=>{let r=o[t];if(e.dynamic){let t=l.length;e.encode(l,r);let n=a.writeUpdatableValue();u.push(e=>{n(e+t)})}else e.encode(a,r)}),u.forEach(e=>{e(a.length)});let c=e.appendWriter(a);return c+e.appendWriter(l)}function l(e,t){let n=[],o=[],a=e.subReader(0);return t.forEach(t=>{let s=null;if(t.dynamic){let n=e.readIndex(),o=a.subReader(n);try{s=t.decode(o)}catch(e){if((0,r.isError)(e,"BUFFER_OVERRUN"))throw e;(s=e).baseType=t.name,s.name=t.localName,s.type=t.type}}else try{s=t.decode(e)}catch(e){if((0,r.isError)(e,"BUFFER_OVERRUN"))throw e;(s=e).baseType=t.name,s.name=t.localName,s.type=t.type}if(void 0==s)throw Error("investigate");n.push(s),o.push(t.localName||null)}),s.Result.fromItems(n,o)}e.exports.pack=a,e.exports.unpack=l;class u extends s.Coder{coder;length;constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),(0,r.defineProperties)(this,{coder:e,length:t})}defaultValue(){let e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){let s=n.Typed.dereference(t,"array");Array.isArray(s)||this._throwError("expected array value",s);let o=this.length;-1===o&&(o=s.length,e.writeValue(s.length)),(0,r.assertArgumentCount)(s.length,o,"coder array"+(this.localName?" "+this.localName:""));let l=[];for(let e=0;e<s.length;e++)l.push(this.coder);return a(e,l,s)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),(0,r.assert)(t*s.WordSize<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*s.WordSize,length:e.dataLength}));let n=[];for(let e=0;e<t;e++)n.push(new o.AnonymousCoder(this.coder));return l(e,n)}}e.exports.ArrayCoder=u}),ef("aqF6z",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AnonymousCoder=void 0;var r=ed("7zdr9");class n extends r.Coder{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}e.exports.AnonymousCoder=n}),ef("bNAjr",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BooleanCoder=void 0;var r=ed("9hHQl"),n=ed("7zdr9");class s extends n.Coder{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){let n=r.Typed.dereference(t,"bool");return e.writeValue(+!!n)}decode(e){return!!e.readValue()}}e.exports.BooleanCoder=s}),ef("dFjpj",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BytesCoder=e.exports.DynamicBytesCoder=void 0;var r=ed("49y6x"),n=ed("7zdr9");class s extends n.Coder{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=(0,r.getBytesCopy)(t);let n=e.writeValue(t.length);return n+e.writeBytes(t)}decode(e){return e.readBytes(e.readIndex(),!0)}}e.exports.DynamicBytesCoder=s,e.exports.BytesCoder=class extends s{constructor(e){super("bytes",e)}decode(e){return(0,r.hexlify)(super.decode(e))}}}),ef("73ySn",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FixedBytesCoder=void 0;var r=ed("49y6x"),n=ed("9hHQl"),s=ed("7zdr9");class o extends s.Coder{size;constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),(0,r.defineProperties)(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let s=(0,r.getBytesCopy)(n.Typed.dereference(t,this.type));return s.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(s)}decode(e){return(0,r.hexlify)(e.readBytes(this.size))}}e.exports.FixedBytesCoder=o}),ef("45f7V",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.NullCoder=void 0;var r=ed("7zdr9");let n=new Uint8Array([]);class s extends r.Coder{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(n)}decode(e){return e.readBytes(0),null}}e.exports.NullCoder=s}),ef("lOoCL",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.NumberCoder=void 0;var r=ed("49y6x"),n=ed("9hHQl"),s=ed("7zdr9");let o=BigInt(0),a=BigInt(1),l=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class u extends s.Coder{size;signed;constructor(e,t,n){let s=(t?"int":"uint")+8*e;super(s,s,n,!1),(0,r.defineProperties)(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let u=(0,r.getBigInt)(n.Typed.dereference(t,this.type)),c=(0,r.mask)(l,8*s.WordSize);if(this.signed){let e=(0,r.mask)(c,8*this.size-1);(u>e||u<-(e+a))&&this._throwError("value out-of-bounds",t),u=(0,r.toTwos)(u,8*s.WordSize)}else(u<o||u>(0,r.mask)(c,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(u)}decode(e){let t=(0,r.mask)(e.readValue(),8*this.size);return this.signed&&(t=(0,r.fromTwos)(t,8*this.size)),t}}e.exports.NumberCoder=u}),ef("aegdZ",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.StringCoder=void 0;var r=ed("jv4tR"),n=ed("9hHQl"),s=ed("dFjpj");class o extends s.DynamicBytesCoder{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,(0,r.toUtf8Bytes)(n.Typed.dereference(t,"string")))}decode(e){return(0,r.toUtf8String)(super.decode(e))}}e.exports.StringCoder=o}),ef("3Xe9e",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TupleCoder=void 0;var r=ed("80jBQ"),n=ed("9hHQl"),s=ed("7zdr9"),o=ed("fMnq9");class a extends s.Coder{coders;constructor(e,t){let n=!1,s=[];e.forEach(e=>{e.dynamic&&(n=!0),s.push(e.type)}),super("tuple","tuple("+s.join(",")+")",t,n),(0,r.defineProperties)(this,{coders:Object.freeze(e.slice())})}defaultValue(){let e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});let t=this.coders.reduce((e,t)=>{let r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let s=r.localName;s&&1===t[s]&&("length"===s&&(s="_length"),null==e[s]&&(e[s]=e[n]))}),Object.freeze(e)}encode(e,t){let r=n.Typed.dereference(t,"tuple");return(0,o.pack)(e,this.coders,r)}decode(e){return(0,o.unpack)(e,this.coders)}}e.exports.TupleCoder=a}),ef("9XiND",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.StructFragment=e.exports.FunctionFragment=e.exports.FallbackFragment=e.exports.ConstructorFragment=e.exports.EventFragment=e.exports.ErrorFragment=e.exports.NamedFragment=e.exports.Fragment=e.exports.ParamType=void 0;var r=ed("49y6x"),n=ed("3A2Kh");function s(e){let t=new Set;return e.forEach(e=>t.add(e)),Object.freeze(t)}let o=s("external public payable override".split(" ")),a="constant external internal payable private public pure view override",l=s(a.split(" ")),u="constructor error event fallback function receive struct",c=s(u.split(" ")),d="calldata memory storage payable indexed",f=s(d.split(" ")),h=s([u,d,"tuple returns",a].join(" ").split(" ")),p={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},g=RegExp("^(\\s*)"),m=RegExp("^([0-9]+)"),y=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),b=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),v=RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class x{#M;#J;get offset(){return this.#M}get length(){return this.#J.length-this.#M}constructor(e){this.#M=0,this.#J=e.slice()}clone(){return new x(this.#J)}reset(){this.#M=0}#Z(e=0,t=0){return new x(this.#J.slice(e,t).map(t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e}))))}popKeyword(e){let t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){let t=this.peek();throw Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=this.#Z(this.#M+1,e.match+1);return this.#M=e.match+1,t}popParams(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=[];for(;this.#M<e.match-1;){let e=this.peek().linkNext;t.push(this.#Z(this.#M+1,e)),this.#M=e}return this.#M=e.match+1,t}peek(){if(this.#M>=this.#J.length)throw Error("out-of-bounds");return this.#J[this.#M]}peekKeyword(e){let t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;let t=this.peek();return t.type===e?t.text:null}pop(){let e=this.peek();return this.#M++,e}toString(){let e=[];for(let t=this.#M;t<this.#J.length;t++){let r=this.#J[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function w(e){let t=[],n=t=>{let r=a<e.length?JSON.stringify(e[a]):"$EOI";throw Error(`invalid token ${r} at ${a}: ${t}`)},s=[],o=[],a=0;for(;a<e.length;){let l=e.substring(a),u=l.match(g);u&&(a+=u[1].length,l=e.substring(a));let c={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:a,value:-1};t.push(c);let d=p[l[0]]||"";if(d){if(c.type=d,c.text=l[0],a++,"OPEN_PAREN"===d)s.push(t.length-1),o.push(t.length-1);else if("CLOSE_PAREN"==d)0===s.length&&n("no matching open bracket"),c.match=s.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=o.pop(),t[c.linkBack].linkNext=t.length-1;else if("COMMA"===d)c.linkBack=o.pop(),t[c.linkBack].linkNext=t.length-1,o.push(t.length-1);else if("OPEN_BRACKET"===d)c.type="BRACKET";else if("CLOSE_BRACKET"===d){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){let n=t.pop().text;e=n+e,t[t.length-1].value=(0,r.getNumber)(n)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw Error("missing opening bracket");t[t.length-1].text+=e}continue}if(u=l.match(y)){if(c.text=u[1],a+=c.text.length,h.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(v)){c.type="TYPE";continue}c.type="ID";continue}if(u=l.match(m)){c.text=u[1],c.type="NUMBER",a+=c.text.length;continue}throw Error(`unexpected token ${JSON.stringify(l[0])} at position ${a}`)}return new x(t.map(e=>Object.freeze(e)))}function E(e,t){let r=[];for(let n in t.keys())e.has(n)&&r.push(n);if(r.length>1)throw Error(`conflicting types: ${r.join(", ")}`)}function A(e,t){if(t.peekKeyword(c)){let r=t.pop().text;if(r!==e)throw Error(`expected ${e}, got ${r}`)}return t.popType("ID")}function S(e,t){let r=new Set;for(;;){let n=e.peekType("KEYWORD");if(null==n||t&&!t.has(n))break;if(e.pop(),r.has(n))throw Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function k(e){let t=S(e,l);return(E(t,s("constant payable nonpayable".split(" "))),E(t,s("pure view payable nonpayable".split(" "))),t.has("view"))?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function I(e,t){return e.popParams().map(e=>j.from(e,t))}function _(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return(0,r.getBigInt)(e.pop().text);throw Error("invalid gas")}return null}function P(e){if(e.length)throw Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}let C=new RegExp(/^(.*)\[([0-9]*)\]$/);function O(e){let t=e.match(v);if((0,r.assertArgument)(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){let n=parseInt(t[2]);(0,r.assertArgument)(0!==n&&n<=32,"invalid bytes length","type",e)}else if(t[3]){let n=parseInt(t[3]);(0,r.assertArgument)(0!==n&&n<=256&&n%8==0,"invalid numeric width","type",e)}return e}let T={},R=Symbol.for("_ethers_internal"),B="_ParamTypeInternal",N="_ErrorInternal",D="_EventInternal",L="_ConstructorInternal",M="_FallbackInternal",U="_FunctionInternal",F="_StructInternal";class j{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,n,s,o,a,l,u){if((0,r.assertPrivate)(e,T,"ParamType"),Object.defineProperty(this,R,{value:B}),a&&(a=Object.freeze(a.slice())),"array"===s){if(null==l||null==u)throw Error("")}else if(null!=l||null!=u)throw Error("");if("tuple"===s){if(null==a)throw Error("")}else if(null!=a)throw Error("");(0,r.defineProperties)(this,{name:t,type:n,baseType:s,indexed:o,components:a,arrayLength:l,arrayChildren:u})}format(e){if(null==e&&(e="sighash"),"json"===e){let t=this.name||"";if(this.isArray()){let e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}let r={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(r)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(t=>t.format(e)).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw Error("array is wrong length");let r=this;return e.map(e=>r.arrayChildren.walk(e,t))}if(this.isTuple()){if(!Array.isArray(e))throw Error("invalid tuple value");if(e.length!==this.components.length)throw Error("array is wrong length");let r=this;return e.map((e,n)=>r.components[n].walk(e,t))}return t(this.type,e)}#Q(e,t,r,n){if(this.isArray()){if(!Array.isArray(t))throw Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw Error("array is wrong length");let s=this.arrayChildren,o=t.slice();o.forEach((t,n)=>{s.#Q(e,t,r,e=>{o[n]=e})}),n(o);return}if(this.isTuple()){let s,o=this.components;if(Array.isArray(t))s=t.slice();else{if(null==t||"object"!=typeof t)throw Error("invalid tuple value");s=o.map(e=>{if(!e.name)throw Error("cannot use object value with unnamed components");if(!(e.name in t))throw Error(`missing value for component ${e.name}`);return t[e.name]})}if(s.length!==this.components.length)throw Error("array is wrong length");s.forEach((t,n)=>{o[n].#Q(e,t,r,e=>{s[n]=e})}),n(s);return}let s=r(this.type,t);s.then?e.push(async function(){n(await s)}()):n(s)}async walkAsync(e,t){let r=[],n=[e];return this.#Q(r,e,t,e=>{n[0]=e}),r.length&&await Promise.all(r),n[0]}static from(e,t){if(j.isParamType(e))return e;if("string"==typeof e)try{return j.from(w(e),t)}catch(t){(0,r.assertArgument)(!1,"invalid param type","obj",e)}else if(e instanceof x){let r="",n="",o=null;S(e,s(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(n="tuple",o=e.popParams().map(e=>j.from(e)),r=`tuple(${o.map(e=>e.format()).join(",")})`):n=r=O(e.popType("TYPE"));let a=null,l=null;for(;e.length&&e.peekType("BRACKET");){let t=e.pop();a=new j(T,"",r,n,null,o,l,a),l=t.value,r+=t.text,n="array",o=null}let u=null;if(S(e,f).has("indexed")){if(!t)throw Error("");u=!0}let c=e.peekType("ID")?e.pop().text:"";if(e.length)throw Error("leftover tokens");return new j(T,c,r,n,u,o,l,a)}let n=e.name;(0,r.assertArgument)(!n||"string"==typeof n&&n.match(b),"invalid name","obj.name",n);let o=e.indexed;null!=o&&((0,r.assertArgument)(t,"parameter cannot be indexed","obj.indexed",e.indexed),o=!!o);let a=e.type,l=a.match(C);if(l){let t=parseInt(l[2]||"-1"),r=j.from({type:l[1],components:e.components});return new j(T,n||"",a,"array",o,null,t,r)}if("tuple"===a||a.startsWith("tuple(")||a.startsWith("(")){let t=null!=e.components?e.components.map(e=>j.from(e)):null;return new j(T,n||"",a,"tuple",o,t,null,null)}return new j(T,n||"",a=O(e.type),a,o,null,null,null)}static isParamType(e){return e&&e[R]===B}}e.exports.ParamType=j;class z{type;inputs;constructor(e,t,n){(0,r.assertPrivate)(e,T,"Fragment"),n=Object.freeze(n.slice()),(0,r.defineProperties)(this,{type:t,inputs:n})}static from(e){if("string"==typeof e){try{z.from(JSON.parse(e))}catch(e){}return z.from(w(e))}if(e instanceof x)switch(e.peekKeyword(c)){case"constructor":return G.from(e);case"error":return V.from(e);case"event":return q.from(e);case"fallback":case"receive":return W.from(e);case"function":return K.from(e);case"struct":return J.from(e)}else if("object"==typeof e){switch(e.type){case"constructor":return G.from(e);case"error":return V.from(e);case"event":return q.from(e);case"fallback":case"receive":return W.from(e);case"function":return K.from(e);case"struct":return J.from(e)}(0,r.assert)(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}(0,r.assertArgument)(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return G.isFragment(e)}static isError(e){return V.isFragment(e)}static isEvent(e){return q.isFragment(e)}static isFunction(e){return K.isFragment(e)}static isStruct(e){return J.isFragment(e)}}e.exports.Fragment=z;class $ extends z{name;constructor(e,t,n,s){super(e,t,s),(0,r.assertArgument)("string"==typeof n&&n.match(b),"invalid identifier","name",n),s=Object.freeze(s.slice()),(0,r.defineProperties)(this,{name:n})}}function H(e,t){return"("+t.map(t=>t.format(e)).join("full"===e?", ":",")+")"}e.exports.NamedFragment=$;class V extends ${constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,R,{value:N})}get selector(){return(0,n.id)(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+H(e,this.inputs)),t.join(" ")}static from(e){if(V.isFragment(e))return e;if("string"==typeof e)return V.from(w(e));if(e instanceof x){let t=A("error",e),r=I(e);return P(e),new V(T,t,r)}return new V(T,e.name,e.inputs?e.inputs.map(j.from):[])}static isFragment(e){return e&&e[R]===N}}e.exports.ErrorFragment=V;class q extends ${anonymous;constructor(e,t,n,s){super(e,"event",t,n),Object.defineProperty(this,R,{value:D}),(0,r.defineProperties)(this,{anonymous:s})}get topicHash(){return(0,n.id)(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+H(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return new q(T,e,t=(t||[]).map(e=>j.from(e)),!1).topicHash}static from(e){if(q.isFragment(e))return e;if("string"==typeof e)try{return q.from(w(e))}catch(t){(0,r.assertArgument)(!1,"invalid event fragment","obj",e)}else if(e instanceof x){let t=A("event",e),r=I(e,!0),n=!!S(e,s(["anonymous"])).has("anonymous");return P(e),new q(T,t,r,n)}return new q(T,e.name,e.inputs?e.inputs.map(e=>j.from(e,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[R]===D}}e.exports.EventFragment=q;class G extends z{payable;gas;constructor(e,t,n,s,o){super(e,t,n),Object.defineProperty(this,R,{value:L}),(0,r.defineProperties)(this,{payable:s,gas:o})}format(e){if((0,r.assert)(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[`constructor${H(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(G.isFragment(e))return e;if("string"==typeof e)try{return G.from(w(e))}catch(t){(0,r.assertArgument)(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof x){S(e,s(["constructor"]));let t=I(e),r=!!S(e,o).has("payable"),n=_(e);return P(e),new G(T,"constructor",t,r,n)}return new G(T,"constructor",e.inputs?e.inputs.map(j.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[R]===L}}e.exports.ConstructorFragment=G;class W extends z{payable;constructor(e,t,n){super(e,"fallback",t),Object.defineProperty(this,R,{value:M}),(0,r.defineProperties)(this,{payable:n})}format(e){let t=0===this.inputs.length?"receive":"fallback";return"json"===e?JSON.stringify({type:t,stateMutability:this.payable?"payable":"nonpayable"}):`${t}()${this.payable?" payable":""}`}static from(e){if(W.isFragment(e))return e;if("string"==typeof e)try{return W.from(w(e))}catch(t){(0,r.assertArgument)(!1,"invalid fallback fragment","obj",e)}else if(e instanceof x){let t=e.toString(),n=e.peekKeyword(s(["fallback","receive"]));if((0,r.assertArgument)(n,"type must be fallback or receive","obj",t),"receive"===e.popKeyword(s(["fallback","receive"]))){let t=I(e);return(0,r.assertArgument)(0===t.length,"receive cannot have arguments","obj.inputs",t),S(e,s(["payable"])),P(e),new W(T,[],!0)}let o=I(e);o.length?(0,r.assertArgument)(1===o.length&&"bytes"===o[0].type,"invalid fallback inputs","obj.inputs",o.map(e=>e.format("minimal")).join(", ")):o=[j.from("bytes")];let a=k(e);if((0,r.assertArgument)("nonpayable"===a||"payable"===a,"fallback cannot be constants","obj.stateMutability",a),S(e,s(["returns"])).has("returns")){let t=I(e);(0,r.assertArgument)(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map(e=>e.format("minimal")).join(", "))}return P(e),new W(T,o,"payable"===a)}return"receive"===e.type?new W(T,[],!0):"fallback"===e.type?new W(T,[j.from("bytes")],"payable"===e.stateMutability):void(0,r.assertArgument)(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[R]===M}}e.exports.FallbackFragment=W;class K extends ${constant;outputs;stateMutability;payable;gas;constructor(e,t,n,s,o,a){super(e,"function",t,s),Object.defineProperty(this,R,{value:U}),o=Object.freeze(o.slice()),(0,r.defineProperties)(this,{constant:"view"===n||"pure"===n,gas:a,outputs:o,payable:"payable"===n,stateMutability:n})}get selector(){return(0,n.id)(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+H(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(H(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return new K(T,e,"view",t=(t||[]).map(e=>j.from(e)),[],null).selector}static from(e){if(K.isFragment(e))return e;if("string"==typeof e)try{return K.from(w(e))}catch(t){(0,r.assertArgument)(!1,"invalid function fragment","obj",e)}else if(e instanceof x){let t=A("function",e),r=I(e),n=k(e),o=[];S(e,s(["returns"])).has("returns")&&(o=I(e));let a=_(e);return P(e),new K(T,t,n,r,o,a)}let t=e.stateMutability;return null==t&&(t="payable","boolean"==typeof e.constant?(t="view",!e.constant&&(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new K(T,e.name,t,e.inputs?e.inputs.map(j.from):[],e.outputs?e.outputs.map(j.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[R]===U}}e.exports.FunctionFragment=K;class J extends ${constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,R,{value:F})}format(){throw Error("@TODO")}static from(e){if("string"==typeof e)try{return J.from(w(e))}catch(t){(0,r.assertArgument)(!1,"invalid struct fragment","obj",e)}else if(e instanceof x){let t=A("struct",e),r=I(e);return P(e),new J(T,t,r)}return new J(T,e.name,e.inputs?e.inputs.map(j.from):[])}static isFragment(e){return e&&e[R]===F}}e.exports.StructFragment=J}),ef("3A2Kh",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.verifyTypedData=e.exports.TypedDataEncoder=e.exports.solidityPackedSha256=e.exports.solidityPackedKeccak256=e.exports.solidityPacked=e.exports.verifyMessage=e.exports.hashMessage=e.exports.dnsEncode=e.exports.namehash=e.exports.isValidName=e.exports.ensNormalize=e.exports.id=e.exports.verifyAuthorization=e.exports.hashAuthorization=void 0;var r=ed("9L0Xc");Object.defineProperty(e.exports,"hashAuthorization",{enumerable:!0,get:function(){return r.hashAuthorization}}),Object.defineProperty(e.exports,"verifyAuthorization",{enumerable:!0,get:function(){return r.verifyAuthorization}});var n=ed("48KJK");Object.defineProperty(e.exports,"id",{enumerable:!0,get:function(){return n.id}});var s=ed("i03Th");Object.defineProperty(e.exports,"ensNormalize",{enumerable:!0,get:function(){return s.ensNormalize}}),Object.defineProperty(e.exports,"isValidName",{enumerable:!0,get:function(){return s.isValidName}}),Object.defineProperty(e.exports,"namehash",{enumerable:!0,get:function(){return s.namehash}}),Object.defineProperty(e.exports,"dnsEncode",{enumerable:!0,get:function(){return s.dnsEncode}});var o=ed("4NSSA");Object.defineProperty(e.exports,"hashMessage",{enumerable:!0,get:function(){return o.hashMessage}}),Object.defineProperty(e.exports,"verifyMessage",{enumerable:!0,get:function(){return o.verifyMessage}});var a=ed("h0zWJ");Object.defineProperty(e.exports,"solidityPacked",{enumerable:!0,get:function(){return a.solidityPacked}}),Object.defineProperty(e.exports,"solidityPackedKeccak256",{enumerable:!0,get:function(){return a.solidityPackedKeccak256}}),Object.defineProperty(e.exports,"solidityPackedSha256",{enumerable:!0,get:function(){return a.solidityPackedSha256}});var l=ed("gWCcQ");Object.defineProperty(e.exports,"TypedDataEncoder",{enumerable:!0,get:function(){return l.TypedDataEncoder}}),Object.defineProperty(e.exports,"verifyTypedData",{enumerable:!0,get:function(){return l.verifyTypedData}})}),ef("9L0Xc",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.verifyAuthorization=e.exports.hashAuthorization=void 0;var r=ed("emjD2"),n=ed("eap8h"),s=ed("73u8n"),o=ed("49y6x");function a(e){return(0,o.assertArgument)("string"==typeof e.address,"invalid address for hashAuthorization","auth.address",e),(0,n.keccak256)((0,o.concat)(["0x05",(0,o.encodeRlp)([null!=e.chainId?(0,o.toBeArray)(e.chainId):"0x",(0,r.getAddress)(e.address),null!=e.nonce?(0,o.toBeArray)(e.nonce):"0x"])]))}e.exports.hashAuthorization=a,e.exports.verifyAuthorization=function(e,t){return(0,s.recoverAddress)(a(e),t)}}),ef("73u8n",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Transaction=e.exports.recoverAddress=e.exports.computeAddress=e.exports.authorizationify=e.exports.accessListify=void 0;var r=ed("1pGY0");Object.defineProperty(e.exports,"accessListify",{enumerable:!0,get:function(){return r.accessListify}});var n=ed("aAF77");Object.defineProperty(e.exports,"authorizationify",{enumerable:!0,get:function(){return n.authorizationify}});var s=ed("eY8RU");Object.defineProperty(e.exports,"computeAddress",{enumerable:!0,get:function(){return s.computeAddress}}),Object.defineProperty(e.exports,"recoverAddress",{enumerable:!0,get:function(){return s.recoverAddress}});var o=ed("9Cj8P");Object.defineProperty(e.exports,"Transaction",{enumerable:!0,get:function(){return o.Transaction}})}),ef("1pGY0",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.accessListify=void 0;var r=ed("emjD2"),n=ed("49y6x");function s(e,t){return{address:(0,r.getAddress)(e),storageKeys:t.map((e,t)=>((0,n.assertArgument)((0,n.isHexString)(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase()))}}e.exports.accessListify=function(e){if(Array.isArray(e))return e.map((t,r)=>Array.isArray(t)?((0,n.assertArgument)(2===t.length,"invalid slot set",`value[${r}]`,t),s(t[0],t[1])):((0,n.assertArgument)(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),s(t.address,t.storageKeys)));(0,n.assertArgument)(null!=e&&"object"==typeof e,"invalid access list","value",e);let t=Object.keys(e).map(t=>{let r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return s(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}}),ef("aAF77",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.authorizationify=void 0;var r=ed("emjD2"),n=ed("eap8h"),s=ed("49y6x");e.exports.authorizationify=function(e){return{address:(0,r.getAddress)(e.address),nonce:(0,s.getBigInt)(null!=e.nonce?e.nonce:0),chainId:(0,s.getBigInt)(null!=e.chainId?e.chainId:0),signature:n.Signature.from(e.signature)}}}),ef("eY8RU",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.recoverAddress=e.exports.computeAddress=void 0;var r=ed("emjD2"),n=ed("eap8h");function s(e){let t;return t="string"==typeof e?n.SigningKey.computePublicKey(e,!1):e.publicKey,(0,r.getAddress)((0,n.keccak256)("0x"+t.substring(4)).substring(26))}e.exports.computeAddress=s,e.exports.recoverAddress=function(e,t){return s(n.SigningKey.recoverPublicKey(e,t))}}),ef("9Cj8P",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Transaction=void 0;var r=ed("emjD2"),n=ed("zn59G"),s=ed("eap8h"),o=ed("49y6x"),a=ed("1pGY0"),l=ed("aAF77"),u=ed("eY8RU");let c=BigInt(0),d=BigInt(2),f=BigInt(27),h=BigInt(28),p=BigInt(35),g=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function m(e,t){let r=e.toString(16);for(;r.length<2;)r="0"+r;return"0x"+(r+=(0,s.sha256)(t).substring(4))}function y(e){return"0x"===e?null:(0,r.getAddress)(e)}function b(e,t){try{return(0,a.accessListify)(e)}catch(r){(0,o.assertArgument)(!1,r.message,t,e)}}function v(e,t){return"0x"===e?0:(0,o.getNumber)(e,t)}function x(e,t){if("0x"===e)return c;let r=(0,o.getBigInt)(e,t);return(0,o.assertArgument)(r<=g,"value exceeds uint size",t,r),r}function w(e,t){let r=(0,o.getBigInt)(e,"value"),n=(0,o.toBeArray)(r);return(0,o.assertArgument)(n.length<=32,"value too large",`tx.${t}`,r),n}function E(e){return(0,a.accessListify)(e).map(e=>[e.address,e.storageKeys])}function A(e,t){let r;try{if(r=v(t[0],"yParity"),0!==r&&1!==r)throw Error("bad yParity")}catch(e){(0,o.assertArgument)(!1,"invalid yParity","yParity",t[0])}let n=(0,o.zeroPadValue)(t[1],32),a=(0,o.zeroPadValue)(t[2],32);e.signature=s.Signature.from({r:n,s:a,yParity:r})}class S{#X;#Y;#N;#ee;#et;#er;#en;#ei;#es;#eo;#ea;#el;#eu;#ec;#ed;#ef;#eh;get type(){return this.#X}set type(e){switch(e){case null:this.#X=null;break;case 0:case"legacy":this.#X=0;break;case 1:case"berlin":case"eip-2930":this.#X=1;break;case 2:case"london":case"eip-1559":this.#X=2;break;case 3:case"cancun":case"eip-4844":this.#X=3;break;case 4:case"pectra":case"eip-7702":this.#X=4;break;default:(0,o.assertArgument)(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let e=this.#Y;return null==e&&3===this.type?n.ZeroAddress:e}set to(e){this.#Y=null==e?null:(0,r.getAddress)(e)}get nonce(){return this.#ee}set nonce(e){this.#ee=(0,o.getNumber)(e,"value")}get gasLimit(){return this.#et}set gasLimit(e){this.#et=(0,o.getBigInt)(e)}get gasPrice(){let e=this.#er;return null==e&&(0===this.type||1===this.type)?c:e}set gasPrice(e){this.#er=null==e?null:(0,o.getBigInt)(e,"gasPrice")}get maxPriorityFeePerGas(){let e=this.#en;return null==e?2===this.type||3===this.type?c:null:e}set maxPriorityFeePerGas(e){this.#en=null==e?null:(0,o.getBigInt)(e,"maxPriorityFeePerGas")}get maxFeePerGas(){let e=this.#ei;return null==e?2===this.type||3===this.type?c:null:e}set maxFeePerGas(e){this.#ei=null==e?null:(0,o.getBigInt)(e,"maxFeePerGas")}get data(){return this.#N}set data(e){this.#N=(0,o.hexlify)(e)}get value(){return this.#es}set value(e){this.#es=(0,o.getBigInt)(e,"value")}get chainId(){return this.#eo}set chainId(e){this.#eo=(0,o.getBigInt)(e)}get signature(){return this.#ea||null}set signature(e){this.#ea=null==e?null:s.Signature.from(e)}get accessList(){let e=this.#el||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){this.#el=null==e?null:(0,a.accessListify)(e)}get authorizationList(){let e=this.#eh||null;return null==e&&4===this.type?[]:e}set authorizationList(e){this.#eh=null==e?null:e.map(e=>(0,l.authorizationify)(e))}get maxFeePerBlobGas(){let e=this.#eu;return null==e&&3===this.type?c:e}set maxFeePerBlobGas(e){this.#eu=null==e?null:(0,o.getBigInt)(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#ec;return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){(0,o.assertArgument)(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)(0,o.assertArgument)((0,o.isHexString)(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#ec=e}get blobs(){return null==this.#ef?null:this.#ef.map(e=>Object.assign({},e))}set blobs(e){if(null==e){this.#ef=null;return}let t=[],r=[];for(let n=0;n<e.length;n++){let s=e[n];if((0,o.isBytesLike)(s)){(0,o.assert)(this.#ed,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=(0,o.getBytes)(s);if((0,o.assertArgument)(e.length<=131072,"blob is too large",`blobs[${n}]`,s),131072!==e.length){let t=new Uint8Array(131072);t.set(e),e=t}let a=this.#ed.blobToKzgCommitment(e),l=(0,o.hexlify)(this.#ed.computeBlobKzgProof(e,a));t.push({data:(0,o.hexlify)(e),commitment:(0,o.hexlify)(a),proof:l}),r.push(m(1,a))}else{let e=(0,o.hexlify)(s.commitment);t.push({data:(0,o.hexlify)(s.data),commitment:e,proof:(0,o.hexlify)(s.proof)}),r.push(m(1,e))}}this.#ef=t,this.#ec=r}get kzg(){return this.#ed}set kzg(e){if(null==e)this.#ed=null;else this.#ed={blobToKzgCommitment:t=>{if("computeBlobProof"in e){if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return(0,o.getBytes)(e.blobToKzgCommitment((0,o.hexlify)(t)))}else if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return(0,o.getBytes)(e.blobToKzgCommitment(t));if("blobToKZGCommitment"in e&&"function"==typeof e.blobToKZGCommitment)return(0,o.getBytes)(e.blobToKZGCommitment((0,o.hexlify)(t)));(0,o.assertArgument)(!1,"unsupported KZG library","kzg",e)},computeBlobKzgProof:(t,r)=>"computeBlobProof"in e&&"function"==typeof e.computeBlobProof?(0,o.getBytes)(e.computeBlobProof((0,o.hexlify)(t),(0,o.hexlify)(r))):"computeBlobKzgProof"in e&&"function"==typeof e.computeBlobKzgProof?e.computeBlobKzgProof(t,r):"computeBlobKZGProof"in e&&"function"==typeof e.computeBlobKZGProof?(0,o.getBytes)(e.computeBlobKZGProof((0,o.hexlify)(t),(0,o.hexlify)(r))):void(0,o.assertArgument)(!1,"unsupported KZG library","kzg",e)}}constructor(){this.#X=null,this.#Y=null,this.#ee=0,this.#et=c,this.#er=null,this.#en=null,this.#ei=null,this.#N="0x",this.#es=c,this.#eo=c,this.#ea=null,this.#el=null,this.#eu=null,this.#ec=null,this.#ed=null,this.#ef=null,this.#eh=null}get hash(){return null==this.signature?null:(0,s.keccak256)(this.#ep(!0,!1))}get unsignedHash(){return(0,s.keccak256)(this.unsignedSerialized)}get from(){return null==this.signature?null:(0,u.recoverAddress)(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:s.SigningKey.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#ep(e,t){(0,o.assert)(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let r=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){let r=[w(e.nonce,"nonce"),w(e.gasPrice||0,"gasPrice"),w(e.gasLimit,"gasLimit"),e.to||"0x",w(e.value,"value"),e.data],n=c;if(e.chainId!=c)n=(0,o.getBigInt)(e.chainId,"tx.chainId"),(0,o.assertArgument)(!t||null==t.networkV||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){let t=e.signature.legacyChainId;null!=t&&(n=t)}if(!t)return n!==c&&(r.push((0,o.toBeArray)(n)),r.push("0x"),r.push("0x")),(0,o.encodeRlp)(r);let a=BigInt(27+t.yParity);return n!==c?a=s.Signature.getChainIdV(n,t.v):BigInt(t.v)!==a&&(0,o.assertArgument)(!1,"tx.chainId/sig.v mismatch","sig",t),r.push((0,o.toBeArray)(a)),r.push((0,o.toBeArray)(t.r)),r.push((0,o.toBeArray)(t.s)),(0,o.encodeRlp)(r)}(this,r);case 1:let a=[w(this.chainId,"chainId"),w(this.nonce,"nonce"),w(this.gasPrice||0,"gasPrice"),w(this.gasLimit,"gasLimit"),this.to||"0x",w(this.value,"value"),this.data,E(this.accessList||[])];return r&&(a.push(w(r.yParity,"recoveryParam")),a.push((0,o.toBeArray)(r.r)),a.push((0,o.toBeArray)(r.s))),(0,o.concat)(["0x01",(0,o.encodeRlp)(a)]);case 2:let l=[w(this.chainId,"chainId"),w(this.nonce,"nonce"),w(this.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),w(this.maxFeePerGas||0,"maxFeePerGas"),w(this.gasLimit,"gasLimit"),this.to||"0x",w(this.value,"value"),this.data,E(this.accessList||[])];return r&&(l.push(w(r.yParity,"yParity")),l.push((0,o.toBeArray)(r.r)),l.push((0,o.toBeArray)(r.s))),(0,o.concat)(["0x02",(0,o.encodeRlp)(l)]);case 3:return function(e,t,r){let s=[w(e.chainId,"chainId"),w(e.nonce,"nonce"),w(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),w(e.maxFeePerGas||0,"maxFeePerGas"),w(e.gasLimit,"gasLimit"),e.to||n.ZeroAddress,w(e.value,"value"),e.data,E(e.accessList||[]),w(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),function(e,t){(0,o.assertArgument)(Array.isArray(e),`invalid ${t}`,"value",e);for(let t=0;t<e.length;t++)(0,o.assertArgument)((0,o.isHexString)(e[t],32),"invalid ${ param } hash",`value[${t}]`,e[t]);return e}(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(s.push(w(t.yParity,"yParity")),s.push((0,o.toBeArray)(t.r)),s.push((0,o.toBeArray)(t.s)),r)?(0,o.concat)(["0x03",(0,o.encodeRlp)([s,r.map(e=>e.data),r.map(e=>e.commitment),r.map(e=>e.proof)])]):(0,o.concat)(["0x03",(0,o.encodeRlp)(s)])}(this,r,t?this.blobs:null);case 4:let u=[w(this.chainId,"chainId"),w(this.nonce,"nonce"),w(this.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),w(this.maxFeePerGas||0,"maxFeePerGas"),w(this.gasLimit,"gasLimit"),this.to||"0x",w(this.value,"value"),this.data,E(this.accessList||[]),(this.authorizationList||[]).map(e=>[w(e.chainId,"chainId"),e.address,w(e.nonce,"nonce"),w(e.signature.yParity,"yParity"),e.signature.r,e.signature.s])];return r&&(u.push(w(r.yParity,"yParity")),u.push((0,o.toBeArray)(r.r)),u.push((0,o.toBeArray)(r.s))),(0,o.concat)(["0x04",(0,o.encodeRlp)(u)])}(0,o.assert)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#ep(!0,!0)}get unsignedSerialized(){return this.#ep(!1,!1)}inferType(){let e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){let e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList,n=null!=this.#eu||this.#ec;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&(0,o.assert)(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),(0,o.assert)(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),(0,o.assert)(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let s=[];return null!=this.type?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):t?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(n&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return S.from(this)}toJSON(){let e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new S;if("string"==typeof e){let t=(0,o.getBytes)(e);if(t[0]>=127)return S.from(function(e){let t=(0,o.decodeRlp)(e);(0,o.assertArgument)(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);let r={type:0,nonce:v(t[0],"nonce"),gasPrice:x(t[1],"gasPrice"),gasLimit:x(t[2],"gasLimit"),to:y(t[3]),value:x(t[4],"value"),data:(0,o.hexlify)(t[5]),chainId:c};if(6===t.length)return r;let n=x(t[6],"v"),a=x(t[7],"r"),l=x(t[8],"s");if(a===c&&l===c)r.chainId=n;else{let e=(n-p)/d;e<c&&(e=c),r.chainId=e,(0,o.assertArgument)(e!==c||n===f||n===h,"non-canonical legacy v","v",t[6]),r.signature=s.Signature.from({r:(0,o.zeroPadValue)(t[7],32),s:(0,o.zeroPadValue)(t[8],32),v:n})}return r}(t));switch(t[0]){case 1:return S.from(function(e){let t=(0,o.decodeRlp)((0,o.getBytes)(e).slice(1));(0,o.assertArgument)(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",(0,o.hexlify)(e));let r={type:1,chainId:x(t[0],"chainId"),nonce:v(t[1],"nonce"),gasPrice:x(t[2],"gasPrice"),gasLimit:x(t[3],"gasLimit"),to:y(t[4]),value:x(t[5],"value"),data:(0,o.hexlify)(t[6]),accessList:b(t[7],"accessList")};return 8===t.length||A(r,t.slice(8)),r}(t));case 2:return S.from(function(e){let t=(0,o.decodeRlp)((0,o.getBytes)(e).slice(1));(0,o.assertArgument)(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",(0,o.hexlify)(e));let r={type:2,chainId:x(t[0],"chainId"),nonce:v(t[1],"nonce"),maxPriorityFeePerGas:x(t[2],"maxPriorityFeePerGas"),maxFeePerGas:x(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:x(t[4],"gasLimit"),to:y(t[5]),value:x(t[6],"value"),data:(0,o.hexlify)(t[7]),accessList:b(t[8],"accessList")};return 9===t.length||A(r,t.slice(9)),r}(t));case 3:return S.from(function(e){let t=(0,o.decodeRlp)((0,o.getBytes)(e).slice(1)),r="3",n=null;if(4===t.length&&Array.isArray(t[0])){r="3 (network format)";let e=t[1],s=t[2],a=t[3];(0,o.assertArgument)(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),(0,o.assertArgument)(Array.isArray(s),"invalid network format: commitments not an array","fields[2]",s),(0,o.assertArgument)(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),(0,o.assertArgument)(e.length===s.length,"invalid network format: blobs/commitments length mismatch","fields",t),(0,o.assertArgument)(e.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let r=0;r<t[1].length;r++)n.push({data:e[r],commitment:s[r],proof:a[r]});t=t[0]}(0,o.assertArgument)(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${r}`,"data",(0,o.hexlify)(e));let s={type:3,chainId:x(t[0],"chainId"),nonce:v(t[1],"nonce"),maxPriorityFeePerGas:x(t[2],"maxPriorityFeePerGas"),maxFeePerGas:x(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:x(t[4],"gasLimit"),to:y(t[5]),value:x(t[6],"value"),data:(0,o.hexlify)(t[7]),accessList:b(t[8],"accessList"),maxFeePerBlobGas:x(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(s.blobs=n),(0,o.assertArgument)(null!=s.to,`invalid address for transaction type: ${r}`,"data",e),(0,o.assertArgument)(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let t=0;t<s.blobVersionedHashes.length;t++)(0,o.assertArgument)((0,o.isHexString)(s.blobVersionedHashes[t],32),`invalid blobVersionedHash at index ${t}: must be length 32`,"data",e);return 11===t.length||A(s,t.slice(11)),s}(t));case 4:return S.from(function(e){let t=(0,o.decodeRlp)((0,o.getBytes)(e).slice(1));(0,o.assertArgument)(Array.isArray(t)&&(10===t.length||13===t.length),"invalid field count for transaction type: 4","data",(0,o.hexlify)(e));let r={type:4,chainId:x(t[0],"chainId"),nonce:v(t[1],"nonce"),maxPriorityFeePerGas:x(t[2],"maxPriorityFeePerGas"),maxFeePerGas:x(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:x(t[4],"gasLimit"),to:y(t[5]),value:x(t[6],"value"),data:(0,o.hexlify)(t[7]),accessList:b(t[8],"accessList"),authorizationList:function(e,t){try{if(!Array.isArray(e))throw Error("authorizationList: invalid array");let t=[];for(let r=0;r<e.length;r++){let n=e[r];if(!Array.isArray(n))throw Error(`authorization[${r}]: invalid array`);if(6!==n.length)throw Error(`authorization[${r}]: wrong length`);if(!n[1])throw Error(`authorization[${r}]: null address`);t.push({address:y(n[1]),nonce:x(n[2],"nonce"),chainId:x(n[0],"chainId"),signature:s.Signature.from({yParity:v(n[3],"yParity"),r:(0,o.zeroPadValue)(n[4],32),s:(0,o.zeroPadValue)(n[5],32)})})}return t}catch(r){(0,o.assertArgument)(!1,r.message,t,e)}}(t[9],"authorizationList")};return 10===t.length||A(r,t.slice(10)),r}(t))}(0,o.assert)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let t=new S;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=s.Signature.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.authorizationList&&(t.authorizationList=e.authorizationList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&((0,o.assertArgument)(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),(0,o.assertArgument)(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&((0,o.assertArgument)(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),(0,o.assertArgument)(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}e.exports.Transaction=S}),ef("48KJK",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.id=void 0;var r=ed("eap8h"),n=ed("49y6x");e.exports.id=function(e){return(0,r.keccak256)((0,n.toUtf8Bytes)(e))}}),ef("i03Th",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.dnsEncode=e.exports.namehash=e.exports.isValidName=e.exports.ensNormalize=void 0;var r=ed("eap8h"),n=ed("49y6x"),s=ed("hKRF7");let o=new Uint8Array(32);function a(e){return(0,n.assertArgument)(0!==e.length,"invalid ENS name; empty component","comp",e),e}function l(e){let t=(0,n.toUtf8Bytes)(u(e)),r=[];if(0===e.length)return r;let s=0;for(let e=0;e<t.length;e++)46===t[e]&&(r.push(a(t.slice(s,e))),s=e+1);return(0,n.assertArgument)(s<t.length,"invalid ENS name; empty component","name",e),r.push(a(t.slice(s))),r}function u(e){try{if(0===e.length)throw Error("empty label");return(0,s.ens_normalize)(e)}catch(t){(0,n.assertArgument)(!1,`invalid ENS name (${t.message})`,"name",e)}}o.fill(0),e.exports.ensNormalize=u,e.exports.isValidName=function(e){try{return 0!==l(e).length}catch(e){}return!1},e.exports.namehash=function(e){(0,n.assertArgument)("string"==typeof e,"invalid ENS name; not a string","name",e),(0,n.assertArgument)(e.length,"invalid ENS name (empty label)","name",e);let t=o,s=l(e);for(;s.length;)t=(0,r.keccak256)((0,n.concat)([t,(0,r.keccak256)(s.pop())]));return(0,n.hexlify)(t)},e.exports.dnsEncode=function(e,t){let r=null!=t?t:63;return(0,n.assertArgument)(r<=255,"DNS encoded label cannot exceed 255","length",r),(0,n.hexlify)((0,n.concat)(l(e).map(t=>{(0,n.assertArgument)(t.length<=r,`label ${JSON.stringify(e)} exceeds ${r} bytes`,"name",e);let s=new Uint8Array(t.length+1);return s.set(t,1),s[0]=s.length-1,s})))+"00"}}),ef("hKRF7",function(e,r){let n,s,o,a,l,u,c,d,f,h,p,g,m,y,b;t(e.exports,"ens_normalize",function(){return H});let v=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function x(e){var t;let r;return t=function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),s=1,o=[0,1];for(let e=1;e<n;e++)o.push(s+=r());let a=r(),l=t;t+=a;let u=0,c=0;function d(){return 0==u&&(c=c<<8|e[t++],u=8),c>>--u&1}let f=0x80000000-1,h=0;for(let e=0;e<31;e++)h=h<<1|d();let p=[],g=0,m=0x80000000;for(;;){let e=Math.floor(((h-g+1)*s-1)/m),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<o[n]?r=n:t=n}if(0==t)break;p.push(t);let a=g+Math.floor(m*o[t]/s),l=g+Math.floor(m*o[t+1]/s)-1;for(;((a^l)&0x40000000)==0;)h=h<<1&f|d(),a=a<<1&f,l=l<<1&f|1;for(;a&~l&0x20000000;)h=0x40000000&h|h<<1&f>>>1|d(),a=a<<1^0x40000000,l=(0x40000000^l)<<1|0x40000001;g=a,m=1+l-a}let y=n-4;return p.map(t=>{switch(t-y){case 3:return y+65792+(e[l++]<<16|e[l++]<<8|e[l++]);case 2:return y+256+(e[l++]<<8|e[l++]);case 1:return y+e[l++];default:return t-1}})}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((e,r)=>t[e.charCodeAt(0)]=r);let r=e.length,n=new Uint8Array(6*r>>3);for(let s=0,o=0,a=0,l=0;s<r;s++)l=l<<6|t[e.charCodeAt(s)],(a+=6)>=8&&(n[o++]=l>>(a-=8));return n}(e)),r=0,()=>t[r++]}function w(e,t=0){let r=[];for(;;){let n=e(),s=e();if(!s)break;t+=n;for(let e=0;e<s;e++)r.push(t+e);t+=s+1}return r}function E(e){return S(()=>{let t=w(e);if(t.length)return t})}function A(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(function(e,t){let r=1+t(),n=t(),s=S(t);return k(s.length,1+e,t).flatMap((e,t)=>{let[o,...a]=e;return Array(s[t]).fill().map((e,t)=>{let s=t*n;return[o+t*r,a.map(e=>e+s)]})})}(r,e))}for(;;){var r,n;let s=e()-1;if(s<0)break;t.push((r=s,k(1+(n=e)(),1+r,n).map(e=>[e[0],e.slice(1)])))}return t.flat()}function S(e){let t=[];for(;;){let r=e(t.length);if(!r)break;t.push(r)}return t}function k(e,t,r){let n=Array(e).fill().map(()=>[]);for(let s=0;s<t;s++)(function(e,t){let r=Array(e);for(let s=0,o=0;s<e;s++){var n;r[s]=o+=1&(n=t())?~n>>1:n>>1}return r})(e,r).forEach((e,t)=>n[t].push(e));return n}function I(e){return`{${e.toString(16).toUpperCase().padStart(2,"0")}}`}function _(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let r=[];for(let n=0;n<t;)r.push(String.fromCodePoint(...e.slice(n,n+=4096)));return r.join("")}function P(e,t){let r=e.length,n=r-t.length;for(let s=0;0==n&&s<r;s++)n=e[s]-t[s];return n}let C=55204;function O(e){return e>>24&255}function T(e){return 0xffffff&e}function R(e){return e>=44032&&e<C}function B(e){n||function(){let e=x("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");for(let[t,r]of(n=new Map(E(e).flatMap((e,t)=>e.map(e=>[e,t+1<<24]))),s=new Set(w(e)),o=new Map,a=new Map,A(e))){if(!s.has(t)&&2==r.length){let[e,n]=r,s=a.get(e);s||(s=new Map,a.set(e,s)),s.set(n,t)}o.set(t,r.reverse())}}();let t=[],r=[],l=!1;function u(e){let r=n.get(e);r&&(l=!0,e|=r),t.push(e)}for(let n of e)for(;;){if(n<128)t.push(n);else if(R(n)){let e=n-44032,t=e/588|0,r=e%588/28|0,s=e%28;u(4352+t),u(4449+r),s>0&&u(4519+s)}else{let e=o.get(n);e?r.push(...e):u(n)}if(!r.length)break;n=r.pop()}if(l&&t.length>1){let e=O(t[0]);for(let r=1;r<t.length;r++){let n=O(t[r]);if(0==n||e<=n){e=n;continue}let s=r-1;for(;;){let r=t[s+1];if(t[s+1]=t[s],t[s]=r,!s||(e=O(t[--s]))<=n)break}e=O(t[r])}}return t}function N(e){return function(e){let t=[],r=[],n=-1,s=0;for(let o of e){let e=O(o),l=T(o);if(-1==n)0==e?n=l:t.push(l);else if(s>0&&s>=e)0==e?(t.push(n,...r),r.length=0,n=l):r.push(l),s=e;else{let o=function(e,t){if(e>=4352&&e<4371&&t>=4449&&t<4470)return 44032+(e-4352)*588+(t-4449)*28;{if(R(e)&&t>4519&&t<4547&&(e-44032)%28==0)return e+(t-4519);let r=a.get(e);return r&&(r=r.get(t))?r:-1}}(n,l);o>=0?n=o:0==s&&0==e?(t.push(n),n=l):(r.push(l),s=e)}}return n>=0&&t.push(n,...r),t}(B(e))}let D=e=>Array.from(e);function L(e,t){return e.P.has(t)||e.Q.has(t)}class M extends Array{get is_emoji(){return!0}}function U(){let e,t;if(l)return;let r=x("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI"),n=()=>w(r),s=()=>new Set(n()),o=(e,t)=>t.forEach(t=>e.add(t));l=new Map(A(r)),u=s(),c=n(),d=new Set(n().map(e=>c[e])),c=new Set(c),f=s(),s();let a=E(r),v=r(),k=()=>{let e=new Set;return n().forEach(t=>o(e,a[t])),o(e,n()),e};h=S(e=>{let t=S(r).map(e=>e+96);if(t.length){let n=e>=v;return t[0]-=32,t=_(t),n&&(t=`Restricted[${t}]`),{N:t,P:k(),Q:k(),M:!r(),R:n}}}),p=s(),g=new Map;let I=n().concat(D(p)).sort((e,t)=>e-t);for(let{V:e,M:t}of(I.forEach((e,t)=>{let n=r(),s=I[t]=n?I[t-n]:{V:[],M:new Map};s.V.push(e),p.has(e)||g.set(e,s)}),new Set(g.values()))){let r=[];for(let t of e){let e=h.filter(e=>L(e,t)),n=r.find(({G:t})=>e.some(e=>t.has(e)));n||(n={G:new Set,V:[]},r.push(n)),n.V.push(t),o(n.G,e)}let n=r.flatMap(e=>D(e.G));for(let{G:e,V:s}of r){let r=new Set(n.filter(t=>!e.has(t)));for(let e of s)t.set(e,r)}}m=new Set;let C=new Set,O=e=>m.has(e)?C.add(e):m.add(e);for(let e of h){for(let t of e.P)O(t);for(let t of e.Q)O(t)}for(let e of m)g.has(e)||C.has(e)||g.set(e,1);for(let n of(o(m,B(m).map(T)),y=(e=[],t=w(r),function t({S:r,B:n},s,o){if(!(4&r)||o!==s[s.length-1])for(let a of(2&r&&(o=s[s.length-1]),1&r&&e.push(s),n))for(let e of a.Q)t(a,[...s,e],o)}(function e(n){return{S:r(),B:S(()=>{let n=w(r).map(e=>t[e]);if(n.length)return e(n)}),Q:n}}([]),[]),e).map(e=>M.from(e)).sort(P),b=new Map,y)){let e=[b];for(let t of n){let r=e.map(e=>{let r=e.get(t);return r||(r=new Map,e.set(t,r)),r});65039===t?e.push(...r):e=r}for(let t of e)t.V=n}}function F(e){return($(e)?"":`${j(z([e]))} `)+I(e)}function j(e){return`"${e}"\u200E`}function z(e,t=1/0,r=I){var n;let s=[];n=e[0],U(),c.has(n)&&s.push(""),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let o=0,a=e.length;for(let t=0;t<a;t++){let n=e[t];$(n)&&(s.push(_(e.slice(o,t))),s.push(r(n)),o=t+1)}return s.push(_(e.slice(o,a))),s.join("")}function $(e){return U(),f.has(e)}function H(e){var t;return(t=function(e,t,r){if(!e)return[];U();let n=0;return e.split(".").map(e=>{let s=function(e){let t=[];for(let r=0,n=e.length;r<n;){let n=e.codePointAt(r);r+=n<65536?1:2,t.push(n)}return t}(e),o={input:s,offset:n};n+=s.length+1;try{let e,n=o.tokens=function(e,t,r){let n=[],s=[];for(e=e.slice().reverse();e.length;){let o=function(e,t){let r,n=b,s=e.length;for(;s&&(n=n.get(e[--s]));){let{V:t}=n;t&&(r=t,e.length=s)}return r}(e);if(o)s.length&&(n.push(t(s)),s=[]),n.push(r(o));else{let t=e.pop();if(m.has(t))s.push(t);else{let e=l.get(t);if(e)s.push(...e);else if(!u.has(t))throw V(t)}}}return s.length&&n.push(t(s)),n}(s,t,r),a=n.length;if(!a)throw Error("empty label");let f=o.output=n.flat();for(let e=f.lastIndexOf(95);e>0;)if(95!==f[--e])throw Error("underscore allowed only at start");if(!(o.emoji=a>1||n[0].is_emoji)&&f.every(e=>e<128)){if(f.length>=4&&45==f[2]&&45==f[3])throw Error(`invalid label extension: "${_(f.slice(0,4))}"`);e="ASCII"}else{let t=n.flatMap(e=>e.is_emoji?[]:e);if(t.length){if(c.has(f[0]))throw G("leading combining mark");for(let e=1;e<a;e++){let t=n[e];if(!t.is_emoji&&c.has(t[0]))throw G(`emoji + combining mark: "${_(n[e-1])} + ${z([t[0]])}"`)}!function(e){let t=e[0],r=v.get(t);if(r)throw G(`leading ${r}`);let n=e.length,s=-1;for(let o=1;o<n;o++){t=e[o];let n=v.get(t);if(n){if(s==o)throw G(`${r} + ${n}`);s=o+1,r=n}}if(s==n)throw G(`trailing ${r}`)}(f);let r=D(new Set(t)),[s]=function(e){let t=h;for(let r of e){let e=t.filter(e=>L(e,r));if(!e.length)if(h.some(e=>L(e,r)))throw q(t[0],r);else throw V(r);if(t=e,1==e.length)break}return t}(r);(function(e,t){for(let r of t)if(!L(e,r))throw q(e,r);if(e.M){let e=B(t).map(T);for(let t=1,r=e.length;t<r;t++)if(d.has(e[t])){let n=t+1;for(let s;n<r&&d.has(s=e[n]);n++)for(let r=t;r<n;r++)if(e[r]==s)throw Error(`duplicate non-spacing marks: ${F(s)}`);if(n-t>4)throw Error(`excessive non-spacing marks: ${j(z(e.slice(t-1,n)))} (${n-t}/4)`);t=n}}})(s,t),function(e,t){let r,n=[];for(let e of t){let t=g.get(e);if(1===t)return;if(t){let n=t.M.get(e);if(!(r=r?r.filter(e=>n.has(e)):D(n)).length)return}else n.push(e)}if(r){for(let t of r)if(n.every(e=>L(t,e)))throw Error(`whole-script confusable: ${e.N}/${t.N}`)}}(s,r),e=s.N}else e="Emoji"}o.type=e}catch(e){o.error=e}return o})}(e,N,W)).map(({input:e,error:r,output:n})=>{if(r){let n=r.message;throw Error(1==t.length?n:`Invalid label ${j(z(e,63))}: ${n}`)}return _(n)}).join(".")}function V(e){return Error(`disallowed character: ${F(e)}`)}function q(e,t){let r=F(t),n=h.find(e=>e.P.has(t));return n&&(r=`${n.N} ${r}`),Error(`illegal mixture: ${e.N} + ${r}`)}function G(e){return Error(`illegal placement: ${e}`)}function W(e){return e.filter(e=>65039!=e)}}),ef("4NSSA",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.verifyMessage=e.exports.hashMessage=void 0;var r=ed("eap8h"),n=ed("k3VZL"),s=ed("73u8n"),o=ed("49y6x");function a(e){return"string"==typeof e&&(e=(0,o.toUtf8Bytes)(e)),(0,r.keccak256)((0,o.concat)([(0,o.toUtf8Bytes)(n.MessagePrefix),(0,o.toUtf8Bytes)(String(e.length)),e]))}e.exports.hashMessage=a,e.exports.verifyMessage=function(e,t){let r=a(e);return(0,s.recoverAddress)(r,t)}}),ef("h0zWJ",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.solidityPackedSha256=e.exports.solidityPackedKeccak256=e.exports.solidityPacked=void 0;var r=ed("emjD2"),n=ed("eap8h"),s=ed("49y6x");let o=RegExp("^bytes([0-9]+)$"),a=RegExp("^(u?int)([0-9]*)$"),l=RegExp("^(.*)\\[([0-9]*)\\]$");function u(e,t){(0,s.assertArgument)(e.length===t.length,"wrong number of values; expected ${ types.length }","values",t);let n=[];return e.forEach(function(e,u){n.push(function e(t,n,u){switch(t){case"address":if(u)return(0,s.getBytes)((0,s.zeroPadValue)(n,32));return(0,s.getBytes)((0,r.getAddress)(n));case"string":return(0,s.toUtf8Bytes)(n);case"bytes":return(0,s.getBytes)(n);case"bool":if(n=n?"0x01":"0x00",u)return(0,s.getBytes)((0,s.zeroPadValue)(n,32));return(0,s.getBytes)(n)}let c=t.match(a);if(c){let e="int"===c[1],r=parseInt(c[2]||"256");return(0,s.assertArgument)((!c[2]||c[2]===String(r))&&r%8==0&&0!==r&&r<=256,"invalid number type","type",t),u&&(r=256),e&&(n=(0,s.toTwos)(n,r)),(0,s.getBytes)((0,s.zeroPadValue)((0,s.toBeArray)(n),r/8))}if(c=t.match(o)){let e=parseInt(c[1]);return((0,s.assertArgument)(String(e)===c[1]&&0!==e&&e<=32,"invalid bytes type","type",t),(0,s.assertArgument)((0,s.dataLength)(n)===e,`invalid value for ${t}`,"value",n),u)?(0,s.getBytes)((0,s.zeroPadBytes)(n,32)):n}if((c=t.match(l))&&Array.isArray(n)){let r=c[1],o=parseInt(c[2]||String(n.length));(0,s.assertArgument)(o===n.length,`invalid array length for ${t}`,"value",n);let a=[];return n.forEach(function(t){a.push(e(r,t,!0))}),(0,s.getBytes)((0,s.concat)(a))}(0,s.assertArgument)(!1,"invalid type","type",t)}(e,t[u]))}),(0,s.hexlify)((0,s.concat)(n))}e.exports.solidityPacked=u,e.exports.solidityPackedKeccak256=function(e,t){return(0,n.keccak256)(u(e,t))},e.exports.solidityPackedSha256=function(e,t){return(0,n.sha256)(u(e,t))}}),ef("gWCcQ",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.verifyTypedData=e.exports.TypedDataEncoder=void 0;var r=ed("emjD2"),n=ed("eap8h"),s=ed("73u8n"),o=ed("49y6x"),a=ed("48KJK");let l=new Uint8Array(32);l.fill(0);let u=BigInt(-1),c=BigInt(0),d=BigInt(1),f=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),h=(0,o.toBeHex)(d,32),p=(0,o.toBeHex)(c,32),g={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},m=["name","version","chainId","verifyingContract","salt"];function y(e){return function(t){return(0,o.assertArgument)("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}let b={name:y("name"),version:y("version"),chainId:function(e){let t=(0,o.getBigInt)(e,"domain.chainId");return((0,o.assertArgument)(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t))?Number(t):(0,o.toQuantity)(t)},verifyingContract:function(e){try{return(0,r.getAddress)(e).toLowerCase()}catch(e){}(0,o.assertArgument)(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){let t=(0,o.getBytes)(e,"domain.salt");return(0,o.assertArgument)(32===t.length,'invalid domain value "salt"',"domain.salt",e),(0,o.hexlify)(t)}};function v(e){{let t=e.match(/^(u?)int(\d+)$/);if(t){let r=""===t[1],n=parseInt(t[2]);(0,o.assertArgument)(n%8==0&&0!==n&&n<=256&&t[2]===String(n),"invalid numeric width","type",e);let s=(0,o.mask)(f,r?n-1:n),a=r?(s+d)*u:c;return function(t){let n=(0,o.getBigInt)(t,"value");return(0,o.assertArgument)(n>=a&&n<=s,`value out-of-bounds for ${e}`,"value",n),(0,o.toBeHex)(r?(0,o.toTwos)(n,256):n,32)}}}{let t=e.match(/^bytes(\d+)$/);if(t){let r=parseInt(t[1]);return(0,o.assertArgument)(0!==r&&r<=32&&t[1]===String(r),"invalid bytes width","type",e),function(t){let n=(0,o.getBytes)(t);(0,o.assertArgument)(n.length===r,`invalid length for ${e}`,"value",t);let s=(0,o.getBytes)(t),a=s.length%32;return a?(0,o.concat)([s,l.slice(a)]):(0,o.hexlify)(s)}}}switch(e){case"address":return function(e){return(0,o.zeroPadValue)((0,r.getAddress)(e),32)};case"bool":return function(e){return e?h:p};case"bytes":return function(e){return(0,n.keccak256)(e)};case"string":return function(e){return(0,a.id)(e)}}return null}function x(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}function w(e){let t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}class E{primaryType;#eg;get types(){return JSON.parse(this.#eg)}#em;#ey;constructor(e){this.#em=new Map,this.#ey=new Map;let t=new Map,r=new Map,n=new Map,s={};for(let a in Object.keys(e).forEach(o=>{s[o]=e[o].map(({name:t,type:r})=>{let{base:n,index:s}=w(r);return"int"!==n||e.int||(n="int256"),"uint"!==n||e.uint||(n="uint256"),{name:t,type:n+(s||"")}}),t.set(o,new Set),r.set(o,[]),n.set(o,new Set)}),this.#eg=JSON.stringify(s),s){let n=new Set;for(let l of s[a]){(0,o.assertArgument)(!n.has(l.name),`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(a)}`,"types",e),n.add(l.name);let s=w(l.type).base;(0,o.assertArgument)(s!==a,`circular type reference to ${JSON.stringify(s)}`,"types",e),v(s)||((0,o.assertArgument)(r.has(s),`unknown type ${JSON.stringify(s)}`,"types",e),r.get(s).push(a),t.get(a).add(s))}}let a=Array.from(r.keys()).filter(e=>0===r.get(e).length);for(let[l,u]of((0,o.assertArgument)(0!==a.length,"missing primary type","types",e),(0,o.assertArgument)(1===a.length,`ambiguous primary types or unused types: ${a.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),(0,o.defineProperties)(this,{primaryType:a[0]}),!function s(a,l){for(let u of((0,o.assertArgument)(!l.has(a),`circular type reference to ${JSON.stringify(a)}`,"types",e),l.add(a),t.get(a)))if(r.has(u))for(let e of(s(u,l),l))n.get(e).add(u);l.delete(a)}(this.primaryType,new Set),n)){let e=Array.from(u);e.sort(),this.#em.set(l,x(l,s[l])+e.map(e=>x(e,s[e])).join(""))}}getEncoder(e){let t=this.#ey.get(e);return t||(t=this.#eb(e),this.#ey.set(e,t)),t}#eb(e){{let t=v(e);if(t)return t}let t=w(e).array;if(t){let e=t.prefix,r=this.getEncoder(e);return s=>{(0,o.assertArgument)(-1===t.count||t.count===s.length,`array length mismatch; expected length ${t.count}`,"value",s);let a=s.map(r);return this.#em.has(e)&&(a=a.map(n.keccak256)),(0,n.keccak256)((0,o.concat)(a))}}let r=this.types[e];if(r){let t=(0,a.id)(this.#em.get(e));return e=>{let s=r.map(({name:t,type:r})=>{let s=this.getEncoder(r)(e[t]);return this.#em.has(r)?(0,n.keccak256)(s):s});return s.unshift(t),(0,o.concat)(s)}}(0,o.assertArgument)(!1,`unknown type: ${e}`,"type",e)}encodeType(e){let t=this.#em.get(e);return(0,o.assertArgument)(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return(0,n.keccak256)(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(v(e))return r(e,t);let n=w(e).array;if(n)return(0,o.assertArgument)(-1===n.count||n.count===t.length,`array length mismatch; expected length ${n.count}`,"value",t),t.map(e=>this._visit(n.prefix,e,r));let s=this.types[e];if(s)return s.reduce((e,{name:n,type:s})=>(e[n]=this._visit(s,t[n],r),e),{});(0,o.assertArgument)(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new E(e)}static getPrimaryType(e){return E.from(e).primaryType}static hashStruct(e,t,r){return E.from(t).hashStruct(e,r)}static hashDomain(e){let t=[];for(let r in e){if(null==e[r])continue;let n=g[r];(0,o.assertArgument)(n,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort((e,t)=>m.indexOf(e.name)-m.indexOf(t.name)),E.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return(0,o.concat)(["0x1901",E.hashDomain(e),E.from(t).hash(r)])}static hash(e,t,r){return(0,n.keccak256)(E.encode(e,t,r))}static async resolveNames(e,t,r,n){for(let t in e=Object.assign({},e))null==e[t]&&delete e[t];let s={};e.verifyingContract&&!(0,o.isHexString)(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");let a=E.from(t);for(let e in a.visit(r,(e,t)=>("address"!==e||(0,o.isHexString)(t,20)||(s[t]="0x"),t)),s)s[e]=await n(e);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=a.visit(r,(e,t)=>"address"===e&&s[t]?s[t]:t),{domain:e,value:r}}static getPayload(e,t,r){E.hashDomain(e);let n={},s=[];m.forEach(t=>{let r=e[t];null!=r&&(n[t]=b[t](r),s.push({name:t,type:g[t]}))});let a=E.from(t),l=Object.assign({},t=a.types);return(0,o.assertArgument)(null==l.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),l.EIP712Domain=s,a.encode(r),{types:l,domain:n,primaryType:a.primaryType,message:a.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return(0,o.hexlify)((0,o.getBytes)(t));if(e.match(/^u?int/))return(0,o.getBigInt)(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return(0,o.assertArgument)("string"==typeof t,"invalid string","value",t),t}(0,o.assertArgument)(!1,"unsupported type","type",e)})}}}e.exports.TypedDataEncoder=E,e.exports.verifyTypedData=function(e,t,r,n){return(0,s.recoverAddress)(E.hash(e,t,r),n)}}),ef("75Swx",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decodeBytes32String=e.exports.encodeBytes32String=void 0;var r=ed("49y6x");e.exports.encodeBytes32String=function(e){let t=(0,r.toUtf8Bytes)(e);if(t.length>31)throw Error("bytes32 string must be less than 32 bytes");return(0,r.zeroPadBytes)(t,32)},e.exports.decodeBytes32String=function(e){let t=(0,r.getBytes)(e,"bytes");if(32!==t.length)throw Error("invalid bytes32 - not 32 bytes long");if(0!==t[31])throw Error("invalid bytes32 string - no null terminator");let n=31;for(;0===t[n-1];)n--;return(0,r.toUtf8String)(t.slice(0,n))}}),ef("jk1l0",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Interface=e.exports.Indexed=e.exports.ErrorDescription=e.exports.TransactionDescription=e.exports.LogDescription=e.exports.Result=e.exports.checkResultErrors=void 0;var r=ed("eap8h"),n=ed("3A2Kh"),s=ed("49y6x"),o=ed("3zhID"),a=ed("7zdr9");Object.defineProperty(e.exports,"checkResultErrors",{enumerable:!0,get:function(){return a.checkResultErrors}}),Object.defineProperty(e.exports,"Result",{enumerable:!0,get:function(){return a.Result}});var l=ed("9XiND"),u=ed("9hHQl");class c{fragment;name;signature;topic;args;constructor(e,t,r){let n=e.name,o=e.format();(0,s.defineProperties)(this,{fragment:e,name:n,signature:o,topic:t,args:r})}}e.exports.LogDescription=c;class d{fragment;name;args;signature;selector;value;constructor(e,t,r,n){let o=e.name,a=e.format();(0,s.defineProperties)(this,{fragment:e,name:o,args:r,signature:a,selector:t,value:n})}}e.exports.TransactionDescription=d;class f{fragment;name;args;signature;selector;constructor(e,t,r){let n=e.name,o=e.format();(0,s.defineProperties)(this,{fragment:e,name:n,args:r,signature:o,selector:t})}}e.exports.ErrorDescription=f;class h{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){(0,s.defineProperties)(this,{hash:e,_isIndexed:!0})}}e.exports.Indexed=h;let p={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},g={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&p[e.toString()]&&(t=p[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class m{fragments;deploy;fallback;receive;#ev;#ex;#ew;#eE;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#ew=new Map,this.#ev=new Map,this.#ex=new Map;let r=[];for(let e of t)try{r.push(l.Fragment.from(e))}catch(t){console.log(`[Warning] Invalid Fragment ${JSON.stringify(e)}:`,t.message)}(0,s.defineProperties)(this,{fragments:Object.freeze(r)});let n=null,o=!1;this.#eE=this.getAbiCoder(),this.fragments.forEach((e,t)=>{let r;switch(e.type){case"constructor":if(this.deploy)return void console.log("duplicate definition - constructor");(0,s.defineProperties)(this,{deploy:e});return;case"fallback":0===e.inputs.length?o=!0:((0,s.assertArgument)(!n||e.payable!==n.payable,"conflicting fallback fragments",`fragments[${t}]`,e),o=(n=e).payable);return;case"function":r=this.#ew;break;case"event":r=this.#ex;break;case"error":r=this.#ev;break;default:return}let a=e.format();r.has(a)||r.set(a,e)}),this.deploy||(0,s.defineProperties)(this,{deploy:l.ConstructorFragment.from("constructor()")}),(0,s.defineProperties)(this,{fallback:n,receive:o})}format(e){let t=e?"minimal":"full";return this.fragments.map(e=>e.format(t))}formatJson(){return JSON.stringify(this.fragments.map(e=>e.format("json")).map(e=>JSON.parse(e)))}getAbiCoder(){return o.AbiCoder.defaultAbiCoder()}#eA(e,t,r){if((0,s.isHexString)(e)){let t=e.toLowerCase();for(let e of this.#ew.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let n=[];for(let[t,r]of this.#ew)t.split("(")[0]===e&&n.push(r);if(t){let e=t.length>0?t[t.length-1]:null,r=t.length,s=!0;u.Typed.isTyped(e)&&"overrides"===e.type&&(s=!1,r--);for(let e=n.length-1;e>=0;e--){let t=n[e].inputs.length;t===r||s&&t===r-1||n.splice(e,1)}for(let e=n.length-1;e>=0;e--){let r=n[e].inputs;for(let s=0;s<t.length;s++)if(u.Typed.isTyped(t[s])){if(s>=r.length){if("overrides"===t[s].type)continue;n.splice(e,1);break}if(t[s].type!==r[s].baseType){n.splice(e,1);break}}}}if(1===n.length&&t&&t.length!==n[0].inputs.length){let e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&n.splice(0,1)}if(0===n.length)return null;if(n.length>1&&r){let t=n.map(e=>JSON.stringify(e.format())).join(", ");(0,s.assertArgument)(!1,`ambiguous function description (i.e. matches ${t})`,"key",e)}return n[0]}let n=this.#ew.get(l.FunctionFragment.from(e).format());return n||null}getFunctionName(e){let t=this.#eA(e,null,!1);return(0,s.assertArgument)(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#eA(e,null,!1)}getFunction(e,t){return this.#eA(e,t||null,!0)}forEachFunction(e){let t=Array.from(this.#ew.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#ew.get(n),r)}}#eS(e,t,r){if((0,s.isHexString)(e)){let t=e.toLowerCase();for(let e of this.#ex.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){let n=[];for(let[t,r]of this.#ex)t.split("(")[0]===e&&n.push(r);if(t){for(let e=n.length-1;e>=0;e--)n[e].inputs.length<t.length&&n.splice(e,1);for(let e=n.length-1;e>=0;e--){let r=n[e].inputs;for(let s=0;s<t.length;s++)if(u.Typed.isTyped(t[s])&&t[s].type!==r[s].baseType){n.splice(e,1);break}}}if(0===n.length)return null;if(n.length>1&&r){let t=n.map(e=>JSON.stringify(e.format())).join(", ");(0,s.assertArgument)(!1,`ambiguous event description (i.e. matches ${t})`,"key",e)}return n[0]}let n=this.#ex.get(l.EventFragment.from(e).format());return n||null}getEventName(e){let t=this.#eS(e,null,!1);return(0,s.assertArgument)(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#eS(e,null,!1)}getEvent(e,t){return this.#eS(e,t||null,!0)}forEachEvent(e){let t=Array.from(this.#ex.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#ex.get(n),r)}}getError(e,t){if((0,s.isHexString)(e)){let t=e.toLowerCase();if(g[t])return l.ErrorFragment.from(g[t].signature);for(let e of this.#ev.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let t=[];for(let[r,n]of this.#ev)r.split("(")[0]===e&&t.push(n);if(0===t.length)return"Error"===e?l.ErrorFragment.from("error Error(string)"):"Panic"===e?l.ErrorFragment.from("error Panic(uint256)"):null;if(t.length>1){let r=t.map(e=>JSON.stringify(e.format())).join(", ");(0,s.assertArgument)(!1,`ambiguous error description (i.e. ${r})`,"name",e)}return t[0]}if("Error(string)"===(e=l.ErrorFragment.from(e).format()))return l.ErrorFragment.from("error Error(string)");if("Panic(uint256)"===e)return l.ErrorFragment.from("error Panic(uint256)");let r=this.#ev.get(e);return r||null}forEachError(e){let t=Array.from(this.#ev.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#ev.get(n),r)}}_decodeParams(e,t){return this.#eE.decode(e,t)}_encodeParams(e,t){return this.#eE.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);(0,s.assertArgument)(t,"unknown error","fragment",e),e=t}return(0,s.assertArgument)((0,s.dataSlice)(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,(0,s.dataSlice)(t,4))}encodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);(0,s.assertArgument)(t,"unknown error","fragment",e),e=t}return(0,s.concat)([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,s.assertArgument)(t,"unknown function","fragment",e),e=t}return(0,s.assertArgument)((0,s.dataSlice)(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,(0,s.dataSlice)(t,4))}encodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,s.assertArgument)(t,"unknown function","fragment",e),e=t}return(0,s.concat)([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,s.assertArgument)(t,"unknown function","fragment",e),e=t}let r="invalid length for result data",n=(0,s.getBytesCopy)(t);if(n.length%32==0)try{return this.#eE.decode(e.outputs,n)}catch(e){r="could not decode result data"}(0,s.assert)(!1,r,"BAD_DATA",{value:(0,s.hexlify)(n),info:{method:e.name,signature:e.format()}})}makeError(e,t){let r=(0,s.getBytes)(e,"data"),n=o.AbiCoder.getBuiltinCallException("call",t,r);if(n.message.startsWith("execution reverted (unknown custom error)")){let e=(0,s.hexlify)(r.slice(0,4)),t=this.getError(e);if(t)try{let e=this.#eE.decode(t.inputs,r.slice(4));n.revert={name:t.name,signature:t.format(),args:e},n.reason=n.revert.signature,n.message=`execution reverted: ${n.reason}`}catch(e){n.message="execution reverted (coult not decode custom error)"}}let a=this.parseTransaction(t);return a&&(n.invocation={method:a.name,signature:a.signature,args:a.args}),n}encodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,s.assertArgument)(t,"unknown function","fragment",e),e=t}return(0,s.hexlify)(this.#eE.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){let t=this.getEvent(e);(0,s.assertArgument)(t,"unknown event","eventFragment",e),e=t}(0,s.assert)(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});let o=[];e.anonymous||o.push(e.topicHash);let a=(e,t)=>"string"===e.type?(0,n.id)(t):"bytes"===e.type?(0,r.keccak256)((0,s.hexlify)(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=(0,s.toBeHex)(t):e.type.match(/^bytes/)?t=(0,s.zeroPadBytes)(t,32):"address"===e.type&&this.#eE.encode(["address"],[t]),(0,s.zeroPadValue)((0,s.hexlify)(t),32));for(t.forEach((t,r)=>{let n=e.inputs[r];if(!n.indexed)return void(0,s.assertArgument)(null==t,"cannot filter non-indexed parameters; must be null","contract."+n.name,t);null==t?o.push(null):"array"===n.baseType||"tuple"===n.baseType?(0,s.assertArgument)(!1,"filtering with tuples or arrays not supported","contract."+n.name,t):Array.isArray(t)?o.push(t.map(e=>a(n,e))):o.push(a(n,t))});o.length&&null===o[o.length-1];)o.pop();return o}encodeEventLog(e,t){if("string"==typeof e){let t=this.getEvent(e);(0,s.assertArgument)(t,"unknown event","eventFragment",e),e=t}let o=[],a=[],l=[];return e.anonymous||o.push(e.topicHash),(0,s.assertArgument)(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((e,s)=>{let u=t[s];if(e.indexed)if("string"===e.type)o.push((0,n.id)(u));else if("bytes"===e.type)o.push((0,r.keccak256)(u));else if("tuple"===e.baseType||"array"===e.baseType)throw Error("not implemented");else o.push(this.#eE.encode([e.type],[u]));else a.push(e),l.push(u)}),{data:this.#eE.encode(a,l),topics:o}}decodeEventLog(e,t,r){if("string"==typeof e){let t=this.getEvent(e);(0,s.assertArgument)(t,"unknown event","eventFragment",e),e=t}if(null!=r&&!e.anonymous){let t=e.topicHash;(0,s.assertArgument)((0,s.isHexString)(r[0],32)&&r[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}let n=[],o=[],u=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(l.ParamType.from({type:"bytes32",name:e.name})),u.push(!0)):(n.push(e),u.push(!1)):(o.push(e),u.push(!1))});let c=null!=r?this.#eE.decode(n,(0,s.concat)(r)):null,d=this.#eE.decode(o,t,!0),f=[],p=[],g=0,m=0;return e.inputs.forEach((e,t)=>{let r=null;if(e.indexed)if(null==c)r=new h(null);else if(u[t])r=new h(c[m++]);else try{r=c[m++]}catch(e){r=e}else try{r=d[g++]}catch(e){r=e}f.push(r),p.push(e.name||null)}),a.Result.fromItems(f,p)}parseTransaction(e){let t=(0,s.getBytes)(e.data,"tx.data"),r=(0,s.getBigInt)(null!=e.value?e.value:0,"tx.value"),n=this.getFunction((0,s.hexlify)(t.slice(0,4)));if(!n)return null;let o=this.#eE.decode(n.inputs,t.slice(4));return new d(n,n.selector,o,r)}parseCallResult(e){throw Error("@TODO")}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new c(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){let t=(0,s.hexlify)(e),r=this.getError((0,s.dataSlice)(t,0,4));if(!r)return null;let n=this.#eE.decode(r.inputs,(0,s.dataSlice)(t,4));return new f(r,r.selector,n)}static from(e){return e instanceof m?e:new m("string"==typeof e?JSON.parse(e):"function"==typeof e.formatJson?e.formatJson():"function"==typeof e.format?e.format("json"):e)}}e.exports.Interface=m}),ef("aeK1b",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.UndecodedEventLog=e.exports.EventLog=e.exports.ContractTransactionResponse=e.exports.ContractTransactionReceipt=e.exports.ContractUnknownEventPayload=e.exports.ContractEventPayload=e.exports.ContractFactory=e.exports.Contract=e.exports.BaseContract=void 0;var r=ed("3G68W");Object.defineProperty(e.exports,"BaseContract",{enumerable:!0,get:function(){return r.BaseContract}}),Object.defineProperty(e.exports,"Contract",{enumerable:!0,get:function(){return r.Contract}});var n=ed("a1hDY");Object.defineProperty(e.exports,"ContractFactory",{enumerable:!0,get:function(){return n.ContractFactory}});var s=ed("4EokO");Object.defineProperty(e.exports,"ContractEventPayload",{enumerable:!0,get:function(){return s.ContractEventPayload}}),Object.defineProperty(e.exports,"ContractUnknownEventPayload",{enumerable:!0,get:function(){return s.ContractUnknownEventPayload}}),Object.defineProperty(e.exports,"ContractTransactionReceipt",{enumerable:!0,get:function(){return s.ContractTransactionReceipt}}),Object.defineProperty(e.exports,"ContractTransactionResponse",{enumerable:!0,get:function(){return s.ContractTransactionResponse}}),Object.defineProperty(e.exports,"EventLog",{enumerable:!0,get:function(){return s.EventLog}}),Object.defineProperty(e.exports,"UndecodedEventLog",{enumerable:!0,get:function(){return s.UndecodedEventLog}})}),ef("3G68W",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Contract=e.exports.BaseContract=e.exports.resolveArgs=e.exports.copyOverrides=void 0;var r=ed("60lL9"),n=ed("emjD2"),s=ed("79orL"),o=ed("49y6x"),a=ed("4EokO");let l=BigInt(0);function u(e){return e&&"function"==typeof e.call}function c(e){return e&&"function"==typeof e.estimateGas}function d(e){return e&&"function"==typeof e.resolveName}function f(e){return e&&"function"==typeof e.sendTransaction}function h(e){if(null!=e){if(d(e))return e;if(e.provider)return e.provider}}class p{#ek;fragment;constructor(e,t,r){if((0,o.defineProperties)(this,{fragment:t}),t.inputs.length<r.length)throw Error("too many arguments");let s=g(e.runner,"resolveName"),a=d(s)?s:null;this.#ek=async function(){let s=await Promise.all(t.inputs.map((e,t)=>null==r[t]?null:e.walkAsync(r[t],(e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map(e=>(0,n.resolveAddress)(e,a))):(0,n.resolveAddress)(t,a):t)));return e.interface.encodeFilterTopics(t,s)}()}getTopicFilter(){return this.#ek}}function g(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function m(e){return null==e?null:e.provider||null}async function y(e,t){let n=r.Typed.dereference(e,"overrides");(0,o.assertArgument)("object"==typeof n,"invalid overrides parameter","overrides",e);let a=(0,s.copyRequest)(n);return(0,o.assertArgument)(null==a.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",a.to),(0,o.assertArgument)(null==a.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",a.data),a.from&&(a.from=a.from),a}async function b(e,t,s){let o=g(e,"resolveName"),a=d(o)?o:null;return await Promise.all(t.map((e,t)=>e.walkAsync(s[t],(e,t)=>(t=r.Typed.dereference(t,e),"address"===e)?(0,n.resolveAddress)(t,a):t)))}e.exports.copyOverrides=y,e.exports.resolveArgs=b;let v=Symbol.for("_ethersInternal_contract"),x=new WeakMap;function w(e){return x.get(e[v])}async function E(e,t){let r,n=null;if(Array.isArray(t)){let n=function(t){if((0,o.isHexString)(t,32))return t;let r=e.interface.getEvent(t);return(0,o.assertArgument)(r,"unknown fragment","name",t),r.topicHash};r=t.map(e=>null==e?null:Array.isArray(e)?e.map(n):n(e))}else if("*"===t)r=[null];else if("string"==typeof t)(0,o.isHexString)(t,32)?r=[t]:(n=e.interface.getEvent(t),(0,o.assertArgument)(n,"unknown fragment","event",t),r=[n.topicHash]);else t&&"object"==typeof t&&"getTopicFilter"in t&&"function"==typeof t.getTopicFilter&&t.fragment?r=await t.getTopicFilter():"fragment"in t?r=[(n=t.fragment).topicHash]:(0,o.assertArgument)(!1,"unknown event name","event",t);return{fragment:n,tag:(r=r.map(e=>{if(null==e)return null;if(Array.isArray(e)){let t=Array.from(new Set(e.map(e=>e.toLowerCase())).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()})).map(e=>null==e?"null":Array.isArray(e)?e.join("|"):e).join("&"),topics:r}}async function A(e,t){let{subs:r}=w(e);return r.get((await E(e,t)).tag)||null}async function S(e,t,r){let n=m(e.runner);(0,o.assert)(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});let{fragment:s,tag:l,topics:u}=await E(e,r),{addr:c,subs:d}=w(e),f=d.get(l);if(!f){let t={address:c||e,topics:u},o=t=>{let n=s;if(null==n)try{n=e.interface.getEvent(t.topics[0])}catch(e){}if(n){let o=n,l=s?e.interface.decodeEventLog(s,t.data,t.topics):[];_(e,r,l,n=>new a.ContractEventPayload(e,n,r,o,t))}else _(e,r,[],n=>new a.ContractUnknownEventPayload(e,n,r,t))},h=[];f={tag:l,listeners:[],start:()=>{h.length||h.push(n.on(t,o))},stop:async()=>{if(0==h.length)return;let e=h;h=[],await Promise.all(e),n.off(t,o)}},d.set(l,f)}return f}let k=Promise.resolve();async function I(e,t,r,n){await k;let s=await A(e,t);if(!s)return!1;let o=s.listeners.length;return s.listeners=s.listeners.filter(({listener:t,once:s})=>{let o=Array.from(r);n&&o.push(n(s?null:t));try{t.call(e,...o)}catch(e){}return!s}),0===s.listeners.length&&(s.stop(),w(e).subs.delete(s.tag)),o>0}async function _(e,t,r,n){try{await k}catch(e){}let s=I(e,t,r,n);return k=s,await s}let P=["then"];class C{target;interface;runner;filters;[v];fallback;constructor(e,t,s,p){var b;let E;(0,o.assertArgument)("string"==typeof e||(0,n.isAddressable)(e),"invalid value for Contract target","target",e),null==s&&(s=null);let A=r.Interface.from(t);(0,o.defineProperties)(this,{target:e,runner:s,interface:A}),Object.defineProperty(this,v,{value:{}});let S=null,k=null;if(p){let e=m(s);k=new a.ContractTransactionResponse(this.interface,e,p)}let I=new Map;if("string"==typeof e)if((0,o.isHexString)(e))S=e,E=Promise.resolve(e);else{let t=g(s,"resolveName");if(!d(t))throw(0,o.makeError)("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});E=t.resolveName(e).then(t=>{if(null==t)throw(0,o.makeError)("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return w(this).addr=t,t})}else E=e.getAddress().then(e=>{if(null==e)throw Error("TODO");return w(this).addr=e,e});b={addrPromise:E,addr:S,deployTx:k,subs:I},x.set(this[v],b);let _=new Proxy({},{get:(e,t,r)=>{if("symbol"==typeof t||P.indexOf(t)>=0)return Reflect.get(e,t,r);try{return this.getEvent(t)}catch(e){if(!(0,o.isError)(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>P.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return(0,o.defineProperties)(this,{filters:_}),(0,o.defineProperties)(this,{fallback:A.receive||A.fallback?function(e){let t=async function(t){let r=await y(t,["data"]);r.to=await e.getAddress(),r.from&&(r.from=await (0,n.resolveAddress)(r.from,h(e.runner)));let s=e.interface,a=(0,o.getBigInt)(r.value||l,"overrides.value")===l,u="0x"===(r.data||"0x");!s.fallback||s.fallback.payable||!s.receive||u||a||(0,o.assertArgument)(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),(0,o.assertArgument)(s.fallback||u,"cannot send data to receive-only contract","overrides.data",r.data);let c=s.receive||s.fallback&&s.fallback.payable;return(0,o.assertArgument)(c||a,"cannot send value to non-payable fallback","overrides.value",r.value),(0,o.assertArgument)(s.fallback||u,"cannot send data to receive-only contract","overrides.data",r.data),r},r=async function(r){let n=g(e.runner,"call");(0,o.assert)(u(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let s=await t(r);try{return await n.call(s)}catch(t){if((0,o.isCallException)(t)&&t.data)throw e.interface.makeError(t.data,s);throw t}},s=async function(r){let n=e.runner;(0,o.assert)(f(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let s=await n.sendTransaction(await t(r)),l=m(e.runner);return new a.ContractTransactionResponse(e.interface,l,s)},d=async function(r){let n=g(e.runner,"estimateGas");return(0,o.assert)(c(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await t(r))},p=async e=>await s(e);return(0,o.defineProperties)(p,{_contract:e,estimateGas:d,populateTransaction:t,send:s,staticCall:r}),p}(this):null}),new Proxy(this,{get:(e,t,r)=>{if("symbol"==typeof t||t in e||P.indexOf(t)>=0)return Reflect.get(e,t,r);try{return e.getFunction(t)}catch(e){if(!(0,o.isError)(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||P.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new C(this.target,this.interface,e)}attach(e){return new C(e,this.interface,this.runner)}async getAddress(){return await w(this).addrPromise}async getDeployedCode(){let e=m(this.runner);(0,o.assert)(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){let e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;let t=m(this.runner);return(0,o.assert)(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((e,r)=>{let n=async()=>{try{let r=await this.getDeployedCode();if(null!=r)return e(this);t.once("block",n)}catch(e){r(e)}};n()})}deploymentTransaction(){return w(this).deployTx}getFunction(e){return"string"!=typeof e&&(e=e.format()),function(e,t){let r=function(...r){let n=e.interface.getFunction(t,r);return(0,o.assert)(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),n},s=async function(...t){let s=r(...t),a={};if(s.inputs.length+1===t.length&&(a=await y(t.pop())).from&&(a.from=await (0,n.resolveAddress)(a.from,h(e.runner))),s.inputs.length!==t.length)throw Error("internal error: fragment inputs doesn't match arguments; should not happen");let l=await b(e.runner,s.inputs,t);return Object.assign({},a,await (0,o.resolveProperties)({to:e.getAddress(),data:e.interface.encodeFunctionData(s,l)}))},l=async function(...e){let t=await v(...e);return 1===t.length?t[0]:t},d=async function(...t){let r=e.runner;(0,o.assert)(f(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let n=await r.sendTransaction(await s(...t)),l=m(e.runner);return new a.ContractTransactionResponse(e.interface,l,n)},p=async function(...t){let r=g(e.runner,"estimateGas");return(0,o.assert)(c(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await s(...t))},v=async function(...t){let n=g(e.runner,"call");(0,o.assert)(u(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let a=await s(...t),l="0x";try{l=await n.call(a)}catch(t){if((0,o.isCallException)(t)&&t.data)throw e.interface.makeError(t.data,a);throw t}let c=r(...t);return e.interface.decodeFunctionResult(c,l)},x=async(...e)=>r(...e).constant?await l(...e):await d(...e);return(0,o.defineProperties)(x,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:r,estimateGas:p,populateTransaction:s,send:d,staticCall:l,staticCallResult:v}),Object.defineProperty(x,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=e.interface.getFunction(t);return(0,o.assert)(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),x}(this,e)}getEvent(e){"string"!=typeof e&&(e=e.format());var t=this,r=e;let n=function(...e){let n=t.interface.getEvent(r,e);return(0,o.assert)(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:r,args:e}}),n},s=function(...e){return new p(t,n(...e),e)};return(0,o.defineProperties)(s,{name:t.interface.getEventName(r),_contract:t,_key:r,getFragment:n}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{let e=t.interface.getEvent(r);return(0,o.assert)(e,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:r}}),e}}),s}async queryTransaction(e){throw Error("@TODO")}async queryFilter(e,t,r){null==t&&(t=0),null==r&&(r="latest");let{addr:n,addrPromise:l}=w(this),u=n||await l,{fragment:c,topics:d}=await E(this,e),f={address:u,topics:d,fromBlock:t,toBlock:r},h=m(this.runner);return(0,o.assert)(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(f)).map(e=>{let t=c;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new a.EventLog(e,this.interface,t)}catch(t){return new a.UndecodedEventLog(e,t)}return new s.Log(e,h)})}async on(e,t){let r=await S(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){let r=await S(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await _(this,e,t,null)}async listenerCount(e){if(e){let t=await A(this,e);return t?t.listeners.length:0}let{subs:t}=w(this),r=0;for(let{listeners:e}of t.values())r+=e.length;return r}async listeners(e){if(e){let t=await A(this,e);return t?t.listeners.map(({listener:e})=>e):[]}let{subs:t}=w(this),r=[];for(let{listeners:e}of t.values())r=r.concat(e.map(({listener:e})=>e));return r}async off(e,t){let r=await A(this,e);if(!r)return this;if(t){let e=r.listeners.map(({listener:e})=>e).indexOf(t);e>=0&&r.listeners.splice(e,1)}return(null==t||0===r.listeners.length)&&(r.stop(),w(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){let t=await A(this,e);if(!t)return this;t.stop(),w(this).subs.delete(t.tag)}else{let{subs:e}=w(this);for(let{tag:t,stop:r}of e.values())r(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){return class extends C{constructor(t,r=null){super(t,e,r)}}}static from(e,t,r){return null==r&&(r=null),new this(e,t,r)}}function O(){return C}e.exports.BaseContract=C;class T extends O(){}e.exports.Contract=T}),ef("79orL",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TransactionResponse=e.exports.TransactionReceipt=e.exports.Log=e.exports.Block=e.exports.copyRequest=e.exports.FeeData=void 0;var r=ed("49y6x"),n=ed("73u8n");let s=BigInt(0);function o(e){return null==e?null:e}function a(e){return null==e?null:e.toString()}e.exports.FeeData=class{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,n){(0,r.defineProperties)(this,{gasPrice:o(e),maxFeePerGas:o(t),maxPriorityFeePerGas:o(n)})}toJSON(){let{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:a(e),maxFeePerGas:a(t),maxPriorityFeePerGas:a(r)}}},e.exports.copyRequest=function(e){let t={};for(let n of(e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=(0,r.hexlify)(e.data)),"chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/)))n in e&&null!=e[n]&&(t[n]=(0,r.getBigInt)(e[n],`request.${n}`));for(let n of"type,nonce".split(/,/))n in e&&null!=e[n]&&(t[n]=(0,r.getNumber)(e[n],`request.${n}`));return e.accessList&&(t.accessList=(0,n.accessListify)(e.accessList)),e.authorizationList&&(t.authorizationList=e.authorizationList.slice()),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(e=>(0,r.isBytesLike)(e)?(0,r.hexlify)(e):Object.assign({},e))),t};class l{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#eI;constructor(e,t){this.#eI=e.transactions.map(e=>"string"!=typeof e?new d(e,t):e),(0,r.defineProperties)(this,{provider:t,hash:o(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:o(e.prevRandao),extraData:e.extraData,baseFeePerGas:o(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#eI.map(e=>"string"==typeof e?e:e.hash)}get prefetchedTransactions(){let e=this.#eI.slice();return 0===e.length?[]:((0,r.assert)("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){let{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:n,gasUsed:s,hash:o,miner:l,prevRandao:u,nonce:c,number:d,parentHash:f,parentBeaconBlockRoot:h,stateRoot:p,receiptsRoot:g,timestamp:m,transactions:y}=this;return{_type:"Block",baseFeePerGas:a(e),difficulty:a(t),extraData:r,gasLimit:a(n),gasUsed:a(s),blobGasUsed:a(this.blobGasUsed),excessBlobGas:a(this.excessBlobGas),hash:o,miner:l,prevRandao:u,nonce:c,number:d,parentHash:f,timestamp:m,parentBeaconBlockRoot:h,stateRoot:p,receiptsRoot:g,transactions:y}}[Symbol.iterator](){let e=0,t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#eI.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=this.#eI[e];else{let r=e.toLowerCase();for(let e of this.#eI)if("string"==typeof e){if(e!==r)continue;t=e;break}else{if(e.hash!==r)continue;t=e;break}}if(null==t)throw Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){let t=this.prefetchedTransactions;if("number"==typeof e)return t[e];for(let r of(e=e.toLowerCase(),t))if(r.hash===e)return r;(0,r.assertArgument)(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){var e;if(!this.isMined())throw Error("");return e=this,{orphan:"drop-block",hash:e.hash,number:e.number}}}e.exports.Block=l;class u{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;let n=Object.freeze(e.topics.slice());(0,r.defineProperties)(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){let{address:e,blockHash:t,blockNumber:r,data:n,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:u}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:n,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:u}}async getBlock(){let e=await this.provider.getBlock(this.blockHash);return(0,r.assert)(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){let e=await this.provider.getTransaction(this.transactionHash);return(0,r.assert)(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){let e=await this.provider.getTransactionReceipt(this.transactionHash);return(0,r.assert)(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){var e;return e=this,{orphan:"drop-log",log:{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}}}}e.exports.Log=u;class c{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e_;constructor(e,t){this.#e_=Object.freeze(e.logs.map(e=>new u(e,t)));let n=s;null!=e.effectiveGasPrice?n=e.effectiveGasPrice:null!=e.gasPrice&&(n=e.gasPrice),(0,r.defineProperties)(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e_}toJSON(){let{to:e,from:t,contractAddress:r,hash:n,index:s,blockHash:o,blockNumber:l,logsBloom:u,logs:c,status:d,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:l,contractAddress:r,cumulativeGasUsed:a(this.cumulativeGasUsed),from:t,gasPrice:a(this.gasPrice),blobGasUsed:a(this.blobGasUsed),blobGasPrice:a(this.blobGasPrice),gasUsed:a(this.gasUsed),hash:n,index:s,logs:c,logsBloom:u,root:f,status:d,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let e=await this.provider.getBlock(this.blockHash);if(null==e)throw Error("TODO");return e}async getTransaction(){let e=await this.provider.getTransaction(this.hash);if(null==e)throw Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return h(this)}reorderedEvent(e){return(0,r.assert)(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),f(this,e)}}e.exports.TransactionReceipt=c;class d{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#eP;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.authorizationList=null!=e.authorizationList?e.authorizationList:null,this.#eP=-1}toJSON(){let{blockNumber:e,blockHash:t,index:r,hash:n,type:s,to:o,from:l,nonce:u,data:c,signature:d,accessList:f,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:t,blobVersionedHashes:h,chainId:a(this.chainId),data:c,from:l,gasLimit:a(this.gasLimit),gasPrice:a(this.gasPrice),hash:n,maxFeePerGas:a(this.maxFeePerGas),maxPriorityFeePerGas:a(this.maxPriorityFeePerGas),maxFeePerBlobGas:a(this.maxFeePerBlobGas),nonce:u,signature:d,to:o,index:r,type:s,value:a(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){let t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;let t=this.provider.getBlock(e);if(null==t)throw Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){let{tx:e,blockNumber:t}=await (0,r.resolveProperties)({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){let n=null==e?1:e,o=null==t?0:t,a=this.#eP,l=-1,u=-1===a,c=async()=>{if(u)return null;let{blockNumber:e,nonce:t}=await (0,r.resolveProperties)({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce){a=e;return}if(u)return null;let o=await this.getTransaction();if(!o||null==o.blockNumber)for(-1===l&&(l=a-3)<this.#eP&&(l=this.#eP);l<=e;){if(u)return null;let t=await this.provider.getBlock(l,!0);if(null==t)break;for(let e of t)if(e===this.hash)return;for(let o=0;o<t.length;o++){let l=await t.getTransaction(o);if(l.from===this.from&&l.nonce===this.nonce){if(u)return null;let t=await this.provider.getTransactionReceipt(l.hash);if(null==t||e-t.blockNumber+1<n)return;let o="replaced";l.data===this.data&&l.to===this.to&&l.value===this.value?o="repriced":"0x"===l.data&&l.from===l.to&&l.value===s&&(o="cancelled"),(0,r.assert)(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===o||"cancelled"===o,reason:o,replacement:l.replaceableTransaction(a),hash:l.hash,receipt:t})}}l++}},d=e=>{if(null==e||0!==e.status)return e;(0,r.assert)(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},f=await this.provider.getTransactionReceipt(this.hash);if(0===n)return d(f);if(f){if(await f.confirmations()>=n)return d(f)}else if(await c(),0===n)return null;let h=new Promise((e,t)=>{let s=[],l=()=>{s.forEach(e=>e())};if(s.push(()=>{u=!0}),o>0){let e=setTimeout(()=>{l(),t((0,r.makeError)("wait for transaction timeout","TIMEOUT"))},o);s.push(()=>{clearTimeout(e)})}let f=async r=>{if(await r.confirmations()>=n){l();try{e(d(r))}catch(e){t(e)}}};if(s.push(()=>{this.provider.off(this.hash,f)}),this.provider.on(this.hash,f),a>=0){let e=async()=>{try{await c()}catch(e){if((0,r.isError)(e,"TRANSACTION_REPLACED")){l(),t(e);return}}u||this.provider.once("block",e)};s.push(()=>{this.provider.off("block",e)}),this.provider.once("block",e)}});return await h}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return(0,r.assert)(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),h(this)}reorderedEvent(e){return(0,r.assert)(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),(0,r.assert)(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),f(this,e)}replaceableTransaction(e){(0,r.assertArgument)(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);let t=new d(this,this.provider);return t.#eP=e,t}}function f(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function h(e){return{orphan:"drop-transaction",tx:e}}e.exports.TransactionResponse=d}),ef("4EokO",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ContractEventPayload=e.exports.ContractUnknownEventPayload=e.exports.ContractTransactionResponse=e.exports.ContractTransactionReceipt=e.exports.UndecodedEventLog=e.exports.EventLog=void 0;var r=ed("79orL"),n=ed("49y6x");class s extends r.Log{interface;fragment;args;constructor(e,t,r){super(e,e.provider);let s=t.decodeEventLog(r,e.data,e.topics);(0,n.defineProperties)(this,{args:s,fragment:r,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}e.exports.EventLog=s;class o extends r.Log{error;constructor(e,t){super(e,e.provider),(0,n.defineProperties)(this,{error:t})}}e.exports.UndecodedEventLog=o;class a extends r.TransactionReceipt{#eC;constructor(e,t,r){super(r,t),this.#eC=e}get logs(){return super.logs.map(e=>{let t=e.topics.length?this.#eC.getEvent(e.topics[0]):null;if(t)try{return new s(e,this.#eC,t)}catch(t){return new o(e,t)}return e})}}e.exports.ContractTransactionReceipt=a;class l extends r.TransactionResponse{#eC;constructor(e,t,r){super(r,t),this.#eC=e}async wait(e,t){let r=await super.wait(e,t);return null==r?null:new a(this.#eC,this.provider,r)}}e.exports.ContractTransactionResponse=l;class u extends n.EventPayload{log;constructor(e,t,r,s){super(e,t,r),(0,n.defineProperties)(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}e.exports.ContractUnknownEventPayload=u,e.exports.ContractEventPayload=class extends u{constructor(e,t,r,o,a){super(e,t,r,new s(a,e.interface,o));let l=e.interface.decodeEventLog(o,this.log.data,this.log.topics);(0,n.defineProperties)(this,{args:l,fragment:o})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}}),ef("a1hDY",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ContractFactory=void 0;var r=ed("60lL9"),n=ed("emjD2"),s=ed("49y6x"),o=ed("3G68W");class a{interface;bytecode;runner;constructor(e,t,n){let o=r.Interface.from(e);t instanceof Uint8Array||("object"==typeof t&&(t=t.object),t.startsWith("0x")||(t="0x"+t)),t=(0,s.hexlify)((0,s.getBytes)(t)),(0,s.defineProperties)(this,{bytecode:t,interface:o,runner:n||null})}attach(e){return new o.BaseContract(e,this.interface,this.runner)}async getDeployTransaction(...e){let t={},r=this.interface.deploy;if(r.inputs.length+1===e.length&&(t=await (0,o.copyOverrides)(e.pop())),r.inputs.length!==e.length)throw Error("incorrect number of arguments to constructor");let n=await (0,o.resolveArgs)(this.runner,r.inputs,e);return Object.assign({},t,{data:(0,s.concat)([this.bytecode,this.interface.encodeDeploy(n)])})}async deploy(...e){let t=await this.getDeployTransaction(...e);(0,s.assert)(this.runner&&"function"==typeof this.runner.sendTransaction,"factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let r=await this.runner.sendTransaction(t),a=(0,n.getCreateAddress)(r);return new o.BaseContract(a,this.interface,this.runner,r)}connect(e){return new a(this.interface,this.bytecode,e)}static fromSolidity(e,t){(0,s.assertArgument)(null!=e,"bad compiler output","output",e),"string"==typeof e&&(e=JSON.parse(e));let r=e.abi,n="";return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new this(r,n,t)}}e.exports.ContractFactory=a}),ef("8d7kA",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SocketEventSubscriber=e.exports.SocketPendingSubscriber=e.exports.SocketBlockSubscriber=e.exports.SocketSubscriber=e.exports.WebSocketProvider=e.exports.SocketProvider=e.exports.IpcSocketProvider=e.exports.QuickNodeProvider=e.exports.PocketProvider=e.exports.InfuraWebSocketProvider=e.exports.InfuraProvider=e.exports.EtherscanPlugin=e.exports.EtherscanProvider=e.exports.ChainstackProvider=e.exports.CloudflareProvider=e.exports.AnkrProvider=e.exports.BlockscoutProvider=e.exports.AlchemyProvider=e.exports.BrowserProvider=e.exports.JsonRpcSigner=e.exports.JsonRpcProvider=e.exports.JsonRpcApiProvider=e.exports.FallbackProvider=e.exports.copyRequest=e.exports.TransactionResponse=e.exports.TransactionReceipt=e.exports.Log=e.exports.FeeData=e.exports.Block=e.exports.FetchUrlFeeDataNetworkPlugin=e.exports.FeeDataNetworkPlugin=e.exports.EnsPlugin=e.exports.GasCostPlugin=e.exports.NetworkPlugin=e.exports.NonceManager=e.exports.Network=e.exports.MulticoinProviderPlugin=e.exports.EnsResolver=e.exports.getDefaultProvider=e.exports.showThrottleMessage=e.exports.VoidSigner=e.exports.AbstractSigner=e.exports.UnmanagedSubscriber=e.exports.AbstractProvider=void 0;var r=ed("lMpgd");Object.defineProperty(e.exports,"AbstractProvider",{enumerable:!0,get:function(){return r.AbstractProvider}}),Object.defineProperty(e.exports,"UnmanagedSubscriber",{enumerable:!0,get:function(){return r.UnmanagedSubscriber}});var n=ed("jHmag");Object.defineProperty(e.exports,"AbstractSigner",{enumerable:!0,get:function(){return n.AbstractSigner}}),Object.defineProperty(e.exports,"VoidSigner",{enumerable:!0,get:function(){return n.VoidSigner}});var s=ed("3rFUk");Object.defineProperty(e.exports,"showThrottleMessage",{enumerable:!0,get:function(){return s.showThrottleMessage}});var o=ed("jNmNF");Object.defineProperty(e.exports,"getDefaultProvider",{enumerable:!0,get:function(){return o.getDefaultProvider}});var a=ed("8wxjg");Object.defineProperty(e.exports,"EnsResolver",{enumerable:!0,get:function(){return a.EnsResolver}}),Object.defineProperty(e.exports,"MulticoinProviderPlugin",{enumerable:!0,get:function(){return a.MulticoinProviderPlugin}});var l=ed("9dQkq");Object.defineProperty(e.exports,"Network",{enumerable:!0,get:function(){return l.Network}});var u=ed("bBVbj");Object.defineProperty(e.exports,"NonceManager",{enumerable:!0,get:function(){return u.NonceManager}});var c=ed("kNuS3");Object.defineProperty(e.exports,"NetworkPlugin",{enumerable:!0,get:function(){return c.NetworkPlugin}}),Object.defineProperty(e.exports,"GasCostPlugin",{enumerable:!0,get:function(){return c.GasCostPlugin}}),Object.defineProperty(e.exports,"EnsPlugin",{enumerable:!0,get:function(){return c.EnsPlugin}}),Object.defineProperty(e.exports,"FeeDataNetworkPlugin",{enumerable:!0,get:function(){return c.FeeDataNetworkPlugin}}),Object.defineProperty(e.exports,"FetchUrlFeeDataNetworkPlugin",{enumerable:!0,get:function(){return c.FetchUrlFeeDataNetworkPlugin}});var d=ed("79orL");Object.defineProperty(e.exports,"Block",{enumerable:!0,get:function(){return d.Block}}),Object.defineProperty(e.exports,"FeeData",{enumerable:!0,get:function(){return d.FeeData}}),Object.defineProperty(e.exports,"Log",{enumerable:!0,get:function(){return d.Log}}),Object.defineProperty(e.exports,"TransactionReceipt",{enumerable:!0,get:function(){return d.TransactionReceipt}}),Object.defineProperty(e.exports,"TransactionResponse",{enumerable:!0,get:function(){return d.TransactionResponse}}),Object.defineProperty(e.exports,"copyRequest",{enumerable:!0,get:function(){return d.copyRequest}});var f=ed("2q0Lm");Object.defineProperty(e.exports,"FallbackProvider",{enumerable:!0,get:function(){return f.FallbackProvider}});var h=ed("f0CZw");Object.defineProperty(e.exports,"JsonRpcApiProvider",{enumerable:!0,get:function(){return h.JsonRpcApiProvider}}),Object.defineProperty(e.exports,"JsonRpcProvider",{enumerable:!0,get:function(){return h.JsonRpcProvider}}),Object.defineProperty(e.exports,"JsonRpcSigner",{enumerable:!0,get:function(){return h.JsonRpcSigner}});var p=ed("a7w2w");Object.defineProperty(e.exports,"BrowserProvider",{enumerable:!0,get:function(){return p.BrowserProvider}});var g=ed("61bnA");Object.defineProperty(e.exports,"AlchemyProvider",{enumerable:!0,get:function(){return g.AlchemyProvider}});var m=ed("fKyLA");Object.defineProperty(e.exports,"BlockscoutProvider",{enumerable:!0,get:function(){return m.BlockscoutProvider}});var y=ed("80Doo");Object.defineProperty(e.exports,"AnkrProvider",{enumerable:!0,get:function(){return y.AnkrProvider}});var b=ed("8eL9s");Object.defineProperty(e.exports,"CloudflareProvider",{enumerable:!0,get:function(){return b.CloudflareProvider}});var v=ed("03oXh");Object.defineProperty(e.exports,"ChainstackProvider",{enumerable:!0,get:function(){return v.ChainstackProvider}});var x=ed("7EULV");Object.defineProperty(e.exports,"EtherscanProvider",{enumerable:!0,get:function(){return x.EtherscanProvider}}),Object.defineProperty(e.exports,"EtherscanPlugin",{enumerable:!0,get:function(){return x.EtherscanPlugin}});var w=ed("1IDpG");Object.defineProperty(e.exports,"InfuraProvider",{enumerable:!0,get:function(){return w.InfuraProvider}}),Object.defineProperty(e.exports,"InfuraWebSocketProvider",{enumerable:!0,get:function(){return w.InfuraWebSocketProvider}});var E=ed("fZ0SP");Object.defineProperty(e.exports,"PocketProvider",{enumerable:!0,get:function(){return E.PocketProvider}});var A=ed("8pqRO");Object.defineProperty(e.exports,"QuickNodeProvider",{enumerable:!0,get:function(){return A.QuickNodeProvider}});var S=ed("430QS");Object.defineProperty(e.exports,"IpcSocketProvider",{enumerable:!0,get:function(){return S.IpcSocketProvider}});var k=ed("jhe5A");Object.defineProperty(e.exports,"SocketProvider",{enumerable:!0,get:function(){return k.SocketProvider}});var I=ed("gNjEj");Object.defineProperty(e.exports,"WebSocketProvider",{enumerable:!0,get:function(){return I.WebSocketProvider}});var k=ed("jhe5A");Object.defineProperty(e.exports,"SocketSubscriber",{enumerable:!0,get:function(){return k.SocketSubscriber}}),Object.defineProperty(e.exports,"SocketBlockSubscriber",{enumerable:!0,get:function(){return k.SocketBlockSubscriber}}),Object.defineProperty(e.exports,"SocketPendingSubscriber",{enumerable:!0,get:function(){return k.SocketPendingSubscriber}}),Object.defineProperty(e.exports,"SocketEventSubscriber",{enumerable:!0,get:function(){return k.SocketEventSubscriber}})}),ef("lMpgd",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AbstractProvider=e.exports.UnmanagedSubscriber=void 0;var r=ed("emjD2"),n=ed("k3VZL"),s=ed("aeK1b"),o=ed("3A2Kh"),a=ed("73u8n"),l=ed("49y6x"),u=ed("8wxjg"),c=ed("cA7xi"),d=ed("9dQkq"),f=ed("79orL"),h=ed("7omAq");let p=BigInt(2);function g(e){return e&&"function"==typeof e.then}function m(e,t){return e+":"+JSON.stringify(t,(e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){let e=Object.keys(t);return e.sort(),e.reduce((e,r)=>(e[r]=t[r],e),{})}return t})}class y{name;constructor(e){(0,l.defineProperties)(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function b(e){return(e=Array.from(new Set(e).values())).sort(),e}async function v(e,t){if(null==e)throw Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if((0,l.isHexString)(e,32)){let t=e.toLowerCase();return{type:"transaction",tag:m("tx",{hash:t}),hash:t}}if(e.orphan){let t=e;return{type:"orphan",tag:m("orphan",t),filter:JSON.parse(JSON.stringify(t))}}if(e.address||e.topics){let n=e,s={topics:(n.topics||[]).map(e=>null==e?null:Array.isArray(e)?b(e.map(e=>e.toLowerCase())):e.toLowerCase())};if(n.address){let e=[],o=[],a=n=>{(0,l.isHexString)(n)?e.push(n):o.push((async()=>{e.push(await (0,r.resolveAddress)(n,t))})())};Array.isArray(n.address)?n.address.forEach(a):a(n.address),o.length&&await Promise.all(o),s.address=b(e.map(e=>e.toLowerCase()))}return{filter:s,tag:m("event",s),type:"event"}}(0,l.assertArgument)(!1,"unknown ProviderEvent","event",e)}function x(){return new Date().getTime()}e.exports.UnmanagedSubscriber=y;let w={cacheTimeout:250,pollingInterval:4e3};function E(e,t){if("0x"===e)return null;try{let r=(0,l.getNumber)((0,l.dataSlice)(e,t,t+32)),n=(0,l.getNumber)((0,l.dataSlice)(e,r,r+32));return(0,l.dataSlice)(e,r+32,r+32+n)}catch(e){}return null}function A(e){let t=(0,l.toBeArray)(e);if(t.length>32)throw Error("internal; should not happen");let r=new Uint8Array(32);return r.set(t,32-t.length),r}e.exports.AbstractProvider=class{#eO;#eT;#eR;#eB;#eN;#eD;#eL;#eM;#eU;#eF;#ej;#K;constructor(e,t){if(this.#K=Object.assign({},w,t||{}),"any"===e)this.#eD=!0,this.#eN=null;else if(e){let t=d.Network.from(e);this.#eD=!1,this.#eN=Promise.resolve(t),setTimeout(()=>{this.emit("network",t,null)},0)}else this.#eD=!1,this.#eN=null;this.#eM=-1,this.#eL=new Map,this.#eO=new Map,this.#eT=new Map,this.#eR=null,this.#eB=!1,this.#eU=1,this.#eF=new Map,this.#ej=!1}get pollingInterval(){return this.#K.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#eT.values())}attachPlugin(e){if(this.#eT.get(e.name))throw Error(`cannot replace existing plugin: ${e.name} `);return this.#eT.set(e.name,e.connect(this)),this}getPlugin(e){return this.#eT.get(e)||null}get disableCcipRead(){return this.#ej}set disableCcipRead(e){this.#ej=!!e}async #ez(e){let t=this.#K.cacheTimeout;if(t<0)return await this._perform(e);let r=m(e.method,e),n=this.#eL.get(r);return n||(n=this._perform(e),this.#eL.set(r,n),setTimeout(()=>{this.#eL.get(r)===n&&this.#eL.delete(r)},t)),await n}async ccipReadFetch(e,t,r){if(this.disableCcipRead||0===r.length||null==e.to)return null;let n=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let t=0;t<r.length;t++){let a,u=r[t],c=u.replace("{sender}",n).replace("{data}",s),d=new l.FetchRequest(c);-1===u.indexOf("{data}")&&(d.body={data:s,sender:n}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:t,urls:r});let f="unknown error";try{a=await d.send()}catch(e){o.push(e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:e}});continue}try{let e=a.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:e}),e.data;e.message&&(f=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:e})}catch(e){}(0,l.assert)(a.statusCode<400||a.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:u,errorMessage:f}}),o.push(f)}(0,l.assert)(!1,`error encountered during CCIP fetch: ${o.map(e=>JSON.stringify(e)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,t){return new f.Block((0,c.formatBlock)(e),this)}_wrapLog(e,t){return new f.Log((0,c.formatLog)(e),this)}_wrapTransactionReceipt(e,t){return new f.TransactionReceipt((0,c.formatTransactionReceipt)(e),this)}_wrapTransactionResponse(e,t){return new f.TransactionResponse((0,c.formatTransactionResponse)(e),this)}_detectNetwork(){(0,l.assert)(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){(0,l.assert)(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){let e=(0,l.getNumber)(await this.#ez({method:"getBlockNumber"}),"%response");return this.#eM>=0&&(this.#eM=e),e}_getAddress(e){return(0,r.resolveAddress)(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return(0,l.isHexString)(e)?(0,l.isHexString)(e,32)?e:(0,l.toQuantity)(e):("bigint"==typeof e&&(e=(0,l.getNumber)(e,"blockTag")),"number"==typeof e)?e>=0?(0,l.toQuantity)(e):this.#eM>=0?(0,l.toQuantity)(this.#eM+e):this.getBlockNumber().then(t=>(0,l.toQuantity)(t+e)):void(0,l.assertArgument)(!1,"invalid blockTag","blockTag",e)}_getFilter(e){let t,r,n=(e.topics||[]).map(e=>null==e?null:Array.isArray(e)?b(e.map(e=>e.toLowerCase())):e.toLowerCase()),s="blockHash"in e?e.blockHash:void 0,o=(e,t,r)=>{let o;switch(e.length){case 0:break;case 1:o=e[0];break;default:e.sort(),o=e}if(s&&(null!=t||null!=r))throw Error("invalid filter");let a={};return o&&(a.address=o),n.length&&(a.topics=n),t&&(a.fromBlock=t),r&&(a.toBlock=r),s&&(a.blockHash=s),a},a=[];if(e.address)if(Array.isArray(e.address))for(let t of e.address)a.push(this._getAddress(t));else a.push(this._getAddress(e.address));return"fromBlock"in e&&(t=this._getBlockTag(e.fromBlock)),("toBlock"in e&&(r=this._getBlockTag(e.toBlock)),a.filter(e=>"string"!=typeof e).length||null!=t&&"string"!=typeof t||null!=r&&"string"!=typeof r)?Promise.all([Promise.all(a),t,r]).then(e=>o(e[0],e[1],e[2])):o(a,t,r)}_getTransactionRequest(e){let t=(0,f.copyRequest)(e),n=[];if(["to","from"].forEach(e=>{if(null==t[e])return;let s=(0,r.resolveAddress)(t[e],this);g(s)?n.push(async function(){t[e]=await s}()):t[e]=s}),null!=t.blockTag){let e=this._getBlockTag(t.blockTag);g(e)?n.push(async function(){t.blockTag=await e}()):t.blockTag=e}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(null==this.#eN){let e=(async()=>{try{let e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw this.#eN===e&&(this.#eN=null),t}})();return this.#eN=e,(await e).clone()}let e=this.#eN,[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(this.#eD?(this.emit("network",r,t),this.#eN===e&&(this.#eN=Promise.resolve(r))):(0,l.assert)(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){let e=await this.getNetwork(),t=async()=>{let{_block:t,gasPrice:r,priorityFee:n}=await (0,l.resolveProperties)({_block:this.#e$("latest",!1),gasPrice:(async()=>{try{let e=await this.#ez({method:"getGasPrice"});return(0,l.getBigInt)(e,"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{let e=await this.#ez({method:"getPriorityFee"});return(0,l.getBigInt)(e,"%response")}catch(e){}return null})()}),s=null,o=null,a=this._wrapBlock(t,e);return a&&a.baseFeePerGas&&(o=null!=n?n:BigInt("1000000000"),s=a.baseFeePerGas*p+o),new f.FeeData(r,s,o)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){let e=new l.FetchRequest(r.url),n=await r.processFunc(t,this,e);return new f.FeeData(n.gasPrice,n.maxFeePerGas,n.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return g(t)&&(t=await t),(0,l.getBigInt)(await this.#ez({method:"estimateGas",transaction:t}),"%response")}async #eH(e,t,n){(0,l.assert)(n<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});let s=(0,f.copyRequest)(e);try{return(0,l.hexlify)(await this._perform({method:"call",transaction:s,blockTag:t}))}catch(e){if(!this.disableCcipRead&&(0,l.isCallException)(e)&&e.data&&n>=0&&"latest"===t&&null!=s.to&&"0x556f1830"===(0,l.dataSlice)(e.data,0,4)){let o,a=e.data,u=await (0,r.resolveAddress)(s.to,this);try{o=function(e){let t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};(0,l.assert)((0,l.dataLength)(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});let r=(0,l.dataSlice)(e,0,32);(0,l.assert)((0,l.dataSlice)(r,0,12)===(0,l.dataSlice)(k,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=(0,l.dataSlice)(r,12);try{let r=[],n=(0,l.getNumber)((0,l.dataSlice)(e,32,64)),s=(0,l.getNumber)((0,l.dataSlice)(e,n,n+32)),o=(0,l.dataSlice)(e,n+32);for(let e=0;e<s;e++){let t=function(e,t){try{let r=E(e,t);if(r)return(0,l.toUtf8String)(r)}catch(e){}return null}(o,32*e);if(null==t)throw Error("abort");r.push(t)}t.urls=r}catch(e){(0,l.assert)(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{let r=E(e,64);if(null==r)throw Error("abort");t.calldata=r}catch(e){(0,l.assert)(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}(0,l.assert)((0,l.dataSlice)(e,100,128)===(0,l.dataSlice)(k,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=(0,l.dataSlice)(e,96,100);try{let r=E(e,128);if(null==r)throw Error("abort");t.extraData=r}catch(e){(0,l.assert)(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(e=>t[e]),t}((0,l.dataSlice)(e.data,4))}catch(e){(0,l.assert)(!1,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:a}})}(0,l.assert)(o.sender.toLowerCase()===u.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:a,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:o.errorArgs}});let c=await this.ccipReadFetch(s,o.calldata,o.urls);(0,l.assert)(null!=c,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:e.data,errorArgs:o.errorArgs}});let d={to:u,data:(0,l.concat)([o.selector,function(e){let t=[],r=0;for(let n=0;n<e.length;n++)t.push(S),r+=32;for(let n=0;n<e.length;n++){let s=(0,l.getBytes)(e[n]);t[n]=A(r),t.push(A(s.length)),t.push(function(e){if(e.length%32==0)return e;let t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}(s)),r+=32+32*Math.ceil(s.length/32)}return(0,l.concat)(t)}([c,o.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{let e=await this.#eH(d,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:e}),e}catch(e){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:e}),e}}throw e}}async #eV(e){let{value:t}=await (0,l.resolveProperties)({network:this.getNetwork(),value:e});return t}async call(e){let{tx:t,blockTag:r}=await (0,l.resolveProperties)({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#eV(this.#eH(t,r,e.enableCcipRead?0:-1))}async #eq(e,t,r){let n=this._getAddress(t),s=this._getBlockTag(r);return("string"!=typeof n||"string"!=typeof s)&&([n,s]=await Promise.all([n,s])),await this.#eV(this.#ez(Object.assign(e,{address:n,blockTag:s})))}async getBalance(e,t){return(0,l.getBigInt)(await this.#eq({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return(0,l.getNumber)(await this.#eq({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return(0,l.hexlify)(await this.#eq({method:"getCode"},e,t))}async getStorage(e,t,r){let n=(0,l.getBigInt)(t,"position");return(0,l.hexlify)(await this.#eq({method:"getStorage",position:n},e,r))}async broadcastTransaction(e){let{blockNumber:t,hash:r,network:n}=await (0,l.resolveProperties)({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=a.Transaction.from(e);if(s.hash!==r)throw Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,n).replaceableTransaction(t)}async #e$(e,t){if((0,l.isHexString)(e,32))return await this.#ez({method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return"string"!=typeof r&&(r=await r),await this.#ez({method:"getBlock",blockTag:r,includeTransactions:t})}async getBlock(e,t){let{network:r,params:n}=await (0,l.resolveProperties)({network:this.getNetwork(),params:this.#e$(e,!!t)});return null==n?null:this._wrapBlock(n,r)}async getTransaction(e){let{network:t,params:r}=await (0,l.resolveProperties)({network:this.getNetwork(),params:this.#ez({method:"getTransaction",hash:e})});return null==r?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){let{network:t,params:r}=await (0,l.resolveProperties)({network:this.getNetwork(),params:this.#ez({method:"getTransactionReceipt",hash:e})});if(null==r)return null;if(null==r.gasPrice&&null==r.effectiveGasPrice){let t=await this.#ez({method:"getTransaction",hash:e});if(null==t)throw Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){let{result:t}=await (0,l.resolveProperties)({network:this.getNetwork(),result:this.#ez({method:"getTransactionResult",hash:e})});return null==t?null:(0,l.hexlify)(t)}async getLogs(e){let t=this._getFilter(e);g(t)&&(t=await t);let{network:r,params:n}=await (0,l.resolveProperties)({network:this.getNetwork(),params:this.#ez({method:"getLogs",filter:t})});return n.map(e=>this._wrapLog(e,r))}_getProvider(e){(0,l.assert)(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await u.EnsResolver.fromName(this,e)}async getAvatar(e){let t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){let t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=(0,r.getAddress)(e);let t=(0,o.namehash)(e.substring(2).toLowerCase()+".addr.reverse");try{let r=await u.EnsResolver.getEnsAddress(this),o=new s.Contract(r,["function resolver(bytes32) view returns (address)"],this),a=await o.resolver(t);if(null==a||a===n.ZeroAddress)return null;let l=new s.Contract(a,["function name(bytes32) view returns (string)"],this),c=await l.name(t);if(await this.resolveName(c)!==e)return null;return c}catch(e){if((0,l.isError)(e,"BAD_DATA")&&"0x"===e.value||(0,l.isError)(e,"CALL_EXCEPTION"))return null;throw e}}async waitForTransaction(e,t,r){let n=null!=t?t:1;return 0===n?this.getTransactionReceipt(e):new Promise(async(t,s)=>{let o=null,a=async r=>{try{let s=await this.getTransactionReceipt(e);if(null!=s&&r-s.blockNumber+1>=n){t(s),o&&(clearTimeout(o),o=null);return}}catch(e){console.log("EEE",e)}this.once("block",a)};null!=r&&(o=setTimeout(()=>{null!=o&&(o=null,this.off("block",a),s((0,l.makeError)("timeout","TIMEOUT",{reason:"timeout"})))},r)),a(await this.getBlockNumber())})}async waitForBlock(e){(0,l.assert)(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){let t=this.#eF.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#eF.delete(e))}_setTimeout(e,t){null==t&&(t=0);let r=this.#eU++,n=()=>{this.#eF.delete(r),e()};if(this.paused)this.#eF.set(r,{timer:null,func:n,time:t});else{let e=setTimeout(n,t);this.#eF.set(r,{timer:e,func:n,time:x()})}return r}_forEachSubscriber(e){for(let t of this.#eO.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new y(e.type);case"block":{let e=new h.PollingBlockSubscriber(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new h.PollingBlockTagSubscriber(this,e.type);case"event":return new h.PollingEventSubscriber(this,e.filter);case"transaction":return new h.PollingTransactionSubscriber(this,e.hash);case"orphan":return new h.PollingOrphanSubscriber(this,e.filter)}throw Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(let r of this.#eO.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),null!=this.#eR&&t.pause(this.#eR);break}}async #eG(e,t){let r=await v(e,this);return"event"===r.type&&t&&t.length>0&&!0===t[0].removed&&(r=await v({orphan:"drop-log",log:t[0]},this)),this.#eO.get(r.tag)||null}async #eW(e){let t=await v(e,this),r=t.tag,n=this.#eO.get(r);if(!n){let e=this._getSubscriber(t);n={subscriber:e,tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#eO.set(r,n)}return n}async on(e,t){let r=await this.#eW(e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#eR&&r.subscriber.pause(this.#eR)),this}async once(e,t){let r=await this.#eW(e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#eR&&r.subscriber.pause(this.#eR)),this}async emit(e,...t){let r=await this.#eG(e,t);if(!r||0===r.listeners.length)return!1;let n=r.listeners.length;return r.listeners=r.listeners.filter(({listener:r,once:n})=>{let s=new l.EventPayload(this,n?null:r,e);try{r.call(this,...t,s)}catch(e){}return!n}),0===r.listeners.length&&(r.started&&r.subscriber.stop(),this.#eO.delete(r.tag)),n>0}async listenerCount(e){if(e){let t=await this.#eG(e);return t?t.listeners.length:0}let t=0;for(let{listeners:e}of this.#eO.values())t+=e.length;return t}async listeners(e){if(e){let t=await this.#eG(e);return t?t.listeners.map(({listener:e})=>e):[]}let t=[];for(let{listeners:e}of this.#eO.values())t=t.concat(e.map(({listener:e})=>e));return t}async off(e,t){let r=await this.#eG(e);if(!r)return this;if(t){let e=r.listeners.map(({listener:e})=>e).indexOf(t);e>=0&&r.listeners.splice(e,1)}return t&&0!==r.listeners.length||(r.started&&r.subscriber.stop(),this.#eO.delete(r.tag)),this}async removeAllListeners(e){if(e){let{tag:t,started:r,subscriber:n}=await this.#eW(e);r&&n.stop(),this.#eO.delete(t)}else for(let[e,{started:t,subscriber:r}]of this.#eO)t&&r.stop(),this.#eO.delete(e);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#eB}destroy(){for(let e of(this.removeAllListeners(),this.#eF.keys()))this._clearTimeout(e);this.#eB=!0}get paused(){return null!=this.#eR}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#eM=-1,null!=this.#eR){if(!!e==this.#eR)return;(0,l.assert)(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}for(let t of(this._forEachSubscriber(t=>t.pause(e)),this.#eR=!!e,this.#eF.values()))t.timer&&clearTimeout(t.timer),t.time=x()-t.time}resume(){if(null!=this.#eR)for(let e of(this._forEachSubscriber(e=>e.resume()),this.#eR=null,this.#eF.values())){let t=e.time;t<0&&(t=0),e.time=x(),setTimeout(e.func,t)}}};let S=new Uint8Array([]),k="0x0000000000000000000000000000000000000000000000000000000000000000"}),ef("8wxjg",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EnsResolver=e.exports.BasicMulticoinProviderPlugin=e.exports.MulticoinProviderPlugin=void 0;var r=ed("emjD2"),n=ed("k3VZL"),s=ed("aeK1b"),o=ed("3A2Kh"),a=ed("49y6x");function l(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):(0,a.assertArgument)(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class u{name;constructor(e){(0,a.defineProperties)(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw Error("unsupported coin")}async decodeAddress(e,t){throw Error("unsupported coin")}}e.exports.MulticoinProviderPlugin=u,e.exports.BasicMulticoinProviderPlugin=class extends u{constructor(){super("org.ethers.plugins.provider.BasicMulticoin")}};let c=RegExp("^(ipfs)://(.*)$","i"),d=[RegExp("^(https)://(.*)$","i"),RegExp("^(data):(.*)$","i"),c,RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class f{provider;address;name;#eK;#eJ;constructor(e,t,r){(0,a.defineProperties)(this,{provider:e,address:t,name:r}),this.#eK=null,this.#eJ=new s.Contract(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#eK&&(this.#eK=(async()=>{try{return await this.#eJ.supportsInterface("0x9061b923")}catch(e){if((0,a.isError)(e,"CALL_EXCEPTION"))return!1;throw this.#eK=null,e}})()),await this.#eK}async #eZ(e,t){t=(t||[]).slice();let r=this.#eJ.interface;t.unshift((0,o.namehash)(this.name));let n=null;await this.supportsWildcard()&&(n=r.getFunction(e),(0,a.assert)(n,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[(0,o.dnsEncode)(this.name,255),r.encodeFunctionData(n,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{let s=await this.#eJ[e](...t);if(n)return r.decodeFunctionResult(n,s)[0];return s}catch(e){if(!(0,a.isError)(e,"CALL_EXCEPTION"))throw e}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{let e=await this.#eZ("addr(bytes32)");if(null==e||e===n.ZeroAddress)return null;return e}catch(e){if((0,a.isError)(e,"CALL_EXCEPTION"))return null;throw e}if(e>=0&&e<0x80000000){let t=e+0x80000000,n=await this.#eZ("addr(bytes32,uint)",[t]);if((0,a.isHexString)(n,20))return(0,r.getAddress)(n)}let t=null;for(let r of this.provider.plugins)if(r instanceof u&&r.supportsCoinType(e)){t=r;break}if(null==t)return null;let s=await this.#eZ("addr(bytes32,uint)",[e]);if(null==s||"0x"===s)return null;let o=await t.decodeAddress(e,s);if(null!=o)return o;(0,a.assert)(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:s}})}async getText(e){let t=await this.#eZ("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){let e=await this.#eZ("contenthash(bytes32)");if(null==e||"0x"===e)return null;let t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){let e="e3010170"===t[1]?"ipfs":"ipns",r=parseInt(t[4],16);if(t[5].length===2*r)return`${e}://${(0,a.encodeBase58)("0x"+t[2])}`}let r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return`bzz://${r[1]}`;(0,a.assert)(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){let e=[{type:"name",value:this.name}];try{let t=await this.getText("avatar");if(null==t)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<d.length;r++){let n=t.match(d[r]);if(null==n)continue;let o=n[1].toLowerCase();switch(o){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{let r=l(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:r}),{linkage:e,url:r}}case"erc721":case"erc1155":{let r="erc721"===o?"tokenURI(uint256)":"uri(uint256)";e.push({type:o,value:t});let u=await this.getAddress();if(null==u)return e.push({type:"!owner",value:""}),{url:null,linkage:e};let d=(n[2]||"").split("/");if(2!==d.length)return e.push({type:`!${o}caip`,value:n[2]||""}),{url:null,linkage:e};let f=d[1],h=new s.Contract(d[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===o){let t=await h.ownerOf(f);if(u!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===o){let t=await h.balanceOf(u,f);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let p=await h[r](f);if(null==p||"0x"===p)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:p}),"erc1155"===o&&(p=p.replace("{id}",(0,a.toBeHex)(f,32).substring(2)),e.push({type:"metadata-url-expanded",value:p})),p.match(/^ipfs:/i)&&(p=l(p)),e.push({type:"metadata-url",value:p});let g={},m=await new a.FetchRequest(p).send();m.assertOk();try{g=m.bodyJson}catch(t){try{e.push({type:"!metadata",value:m.bodyText})}catch(r){let t=m.body;t&&e.push({type:"!metadata",value:(0,a.hexlify)(t)})}return{url:null,linkage:e}}if(!g)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(g)});let y=g.image;if("string"!=typeof y)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(y.match(/^(https:\/\/|data:)/i));else{let t=y.match(c);if(null==t)return e.push({type:"!imageUrl-ipfs",value:y}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:y}),y=l(y)}return e.push({type:"url",value:y}),{linkage:e,url:y}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){let t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return(0,a.assert)(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async #eQ(e,t){let r=await f.getEnsAddress(e);try{let a=new s.Contract(r,["function resolver(bytes32) view returns (address)"],e),l=await a.resolver((0,o.namehash)(t),{enableCcipRead:!0});if(l===n.ZeroAddress)return null;return l}catch(e){throw e}}static async fromName(e,t){let r=t;for(;;){if(""===r||"."===r||"eth"!==t&&"eth"===r)return null;let n=await f.#eQ(e,r);if(null!=n){let s=new f(e,n,t);if(r!==t&&!await s.supportsWildcard())return null;return s}r=r.split(".").slice(1).join(".")}}}e.exports.EnsResolver=f}),ef("cA7xi",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.formatTransactionResponse=e.exports.formatTransactionReceipt=e.exports.formatReceiptLog=e.exports.formatBlock=e.exports.formatLog=e.exports.formatUint256=e.exports.formatHash=e.exports.formatData=e.exports.formatBoolean=e.exports.object=e.exports.arrayOf=e.exports.allowNull=void 0;var r=ed("emjD2"),n=ed("eap8h"),s=ed("73u8n"),o=ed("49y6x");let a=BigInt(0);function l(e,t){return function(r){return null==r?t:e(r)}}function u(e,t){return r=>{if(t&&null==r)return null;if(!Array.isArray(r))throw Error("not an array");return r.map(t=>e(t))}}function c(e,t){return r=>{let n={};for(let s in e){let a=s;if(t&&s in t&&!(a in r)){for(let e of t[s])if(e in r){a=e;break}}try{let t=e[s](r[a]);void 0!==t&&(n[s]=t)}catch(t){let e=t instanceof Error?t.message:"not-an-error";(0,o.assert)(!1,`invalid value for value.${s} (${e})`,"BAD_DATA",{value:r})}}return n}}function d(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}(0,o.assertArgument)(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}function f(e){return(0,o.assertArgument)((0,o.isHexString)(e,!0),"invalid data","value",e),e}function h(e){return(0,o.assertArgument)((0,o.isHexString)(e,32),"invalid hash","value",e),e}e.exports.allowNull=l,e.exports.arrayOf=u,e.exports.object=c,e.exports.formatBoolean=d,e.exports.formatData=f,e.exports.formatHash=h,e.exports.formatUint256=function(e){if(!(0,o.isHexString)(e))throw Error("invalid uint256");return(0,o.zeroPadValue)(e,32)};let p=c({address:r.getAddress,blockHash:h,blockNumber:o.getNumber,data:f,index:o.getNumber,removed:l(d,!1),topics:u(h),transactionHash:h,transactionIndex:o.getNumber},{index:["logIndex"]});e.exports.formatLog=function(e){return p(e)};let g=c({hash:l(h),parentHash:h,parentBeaconBlockRoot:l(h,null),number:o.getNumber,timestamp:o.getNumber,nonce:l(f),difficulty:o.getBigInt,gasLimit:o.getBigInt,gasUsed:o.getBigInt,stateRoot:l(h,null),receiptsRoot:l(h,null),blobGasUsed:l(o.getBigInt,null),excessBlobGas:l(o.getBigInt,null),miner:l(r.getAddress),prevRandao:l(h,null),extraData:f,baseFeePerGas:l(o.getBigInt)},{prevRandao:["mixHash"]});e.exports.formatBlock=function(e){let t=g(e);return t.transactions=e.transactions.map(e=>"string"==typeof e?e:v(e)),t};let m=c({transactionIndex:o.getNumber,blockNumber:o.getNumber,transactionHash:h,address:r.getAddress,topics:u(h),data:f,index:o.getNumber,blockHash:h},{index:["logIndex"]});function y(e){return m(e)}e.exports.formatReceiptLog=y;let b=c({to:l(r.getAddress,null),from:l(r.getAddress,null),contractAddress:l(r.getAddress,null),index:o.getNumber,root:l(o.hexlify),gasUsed:o.getBigInt,blobGasUsed:l(o.getBigInt,null),logsBloom:l(f),blockHash:h,hash:h,logs:u(y),blockNumber:o.getNumber,cumulativeGasUsed:o.getBigInt,effectiveGasPrice:l(o.getBigInt),blobGasPrice:l(o.getBigInt,null),status:l(o.getNumber),type:l(o.getNumber,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function v(e){e.to&&(0,o.getBigInt)(e.to)===a&&(e.to="0x0000000000000000000000000000000000000000");let t=c({hash:h,index:l(o.getNumber,void 0),type:e=>"0x"===e||null==e?0:(0,o.getNumber)(e),accessList:l(s.accessListify,null),blobVersionedHashes:l(u(h,!0),null),authorizationList:l(u(e=>({address:(0,r.getAddress)(e.address),chainId:(0,o.getBigInt)(e.chainId),nonce:(0,o.getBigInt)(e.nonce),signature:n.Signature.from(e.signature?e.signature:e)}),!1),null),blockHash:l(h,null),blockNumber:l(o.getNumber,null),transactionIndex:l(o.getNumber,null),from:r.getAddress,gasPrice:l(o.getBigInt),maxPriorityFeePerGas:l(o.getBigInt),maxFeePerGas:l(o.getBigInt),maxFeePerBlobGas:l(o.getBigInt,null),gasLimit:o.getBigInt,to:l(r.getAddress,null),value:o.getBigInt,nonce:o.getNumber,data:f,creates:l(r.getAddress,null),chainId:l(o.getBigInt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=(0,r.getCreateAddress)(t)),(1===e.type||2===e.type)&&null==e.accessList&&(t.accessList=[]),e.signature?t.signature=n.Signature.from(e.signature):t.signature=n.Signature.from(e),null==t.chainId){let e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&(0,o.getBigInt)(t.blockHash)===a&&(t.blockHash=null),t}e.exports.formatTransactionReceipt=function(e){return b(e)},e.exports.formatTransactionResponse=v}),ef("9dQkq",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Network=void 0;var r=ed("73u8n"),n=ed("49y6x"),s=ed("kNuS3");let o=new Map;class a{#eX;#eo;#eT;constructor(e,t){this.#eX=e,this.#eo=(0,n.getBigInt)(t),this.#eT=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#eX}set name(e){this.#eX=e}get chainId(){return this.#eo}set chainId(e){this.#eo=(0,n.getBigInt)(e,"chainId")}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===(0,n.getBigInt)(e)}catch(e){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===(0,n.getBigInt)(e)}catch(e){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===(0,n.getBigInt)(e.chainId)}catch(e){}return!1}if(null!=e.name)return this.name===e.name}return!1}get plugins(){return Array.from(this.#eT.values())}attachPlugin(e){if(this.#eT.get(e.name))throw Error(`cannot replace existing plugin: ${e.name} `);return this.#eT.set(e.name,e.clone()),this}getPlugin(e){return this.#eT.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){let e=new a(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){let t=this.getPlugin("org.ethers.plugins.network.GasCost")||new s.GasCostPlugin,n=t.txBase;if(null==e.to&&(n+=t.txCreate),e.data)for(let r=2;r<e.data.length;r+=2)"00"===e.data.substring(r,r+2)?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){let s=(0,r.accessListify)(e.accessList);for(let e in s)n+=t.txAccessListAddress+t.txAccessListStorageKey*s[e].storageKeys.length}return n}static from(e){if(function(){c||(c=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",0xaa36a7,{ensNetwork:0xaa36a7}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[u("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[u("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",0xaa37dc,{}),e("xdai",100,{ensNetwork:1}));function e(e,t,r){let n=function(){let n=new a(e,t);return null!=r.ensNetwork&&n.attachPlugin(new s.EnsPlugin(null,r.ensNetwork)),n.attachPlugin(new s.GasCostPlugin),(r.plugins||[]).forEach(e=>{n.attachPlugin(e)}),n};a.register(e,n),a.register(t,n),r.altNames&&r.altNames.forEach(e=>{a.register(e,n)})}}(),null==e)return a.from("mainnet");if("number"==typeof e&&(e=BigInt(e)),"string"==typeof e||"bigint"==typeof e){let t=o.get(e);if(t)return t();if("bigint"==typeof e)return new a("unknown",e);(0,n.assertArgument)(!1,"unknown network","network",e)}if("function"==typeof e.clone)return e.clone();if("object"==typeof e){(0,n.assertArgument)("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);let t=new a(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new s.EnsPlugin(e.ensAddress,e.ensNetwork)),t}(0,n.assertArgument)(!1,"invalid network","network",e)}static register(e,t){"number"==typeof e&&(e=BigInt(e));let r=o.get(e);r&&(0,n.assertArgument)(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),o.set(e,t)}}function l(e,t){let r=String(e);if(!r.match(/^[0-9.]+$/))throw Error(`invalid gwei value: ${e}`);let n=r.split(".");if(1===n.length&&n.push(""),2!==n.length)throw Error(`invalid gwei value: ${e}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let e=BigInt(n[1].substring(0,9));!n[1].substring(9).match(/^0+$/)&&e++,n[1]=e.toString()}return BigInt(n[0]+n[1])}function u(e){return new s.FetchUrlFeeDataNetworkPlugin(e,async(e,t,r)=>{let s;r.setHeader("User-Agent","ethers");try{let[t,n]=await Promise.all([r.send(),e()]),o=(s=t).bodyJson.standard;return{gasPrice:n.gasPrice,maxFeePerGas:l(o.maxFee,9),maxPriorityFeePerGas:l(o.maxPriorityFee,9)}}catch(e){(0,n.assert)(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:e})}})}e.exports.Network=a;let c=!1}),ef("kNuS3",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FetchUrlFeeDataNetworkPlugin=e.exports.FeeDataNetworkPlugin=e.exports.EnsPlugin=e.exports.GasCostPlugin=e.exports.NetworkPlugin=void 0;var r=ed("80jBQ"),n=ed("49y6x");class s{name;constructor(e){(0,r.defineProperties)(this,{name:e})}clone(){return new s(this.name)}}e.exports.NetworkPlugin=s;class o extends s{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);let s={effectiveBlock:e};function o(e,r){let o=(t||{})[e];null==o&&(o=r),(0,n.assertArgument)("number"==typeof o,`invalud value for ${e}`,"costs",t),s[e]=o}o("txBase",21e3),o("txCreate",32e3),o("txDataZero",4),o("txDataNonzero",16),o("txAccessListStorageKey",1900),o("txAccessListAddress",2400),(0,r.defineProperties)(this,s)}clone(){return new o(this.effectiveBlock,this)}}e.exports.GasCostPlugin=o;class a extends s{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),(0,r.defineProperties)(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new a(this.address,this.targetNetwork)}}e.exports.EnsPlugin=a;class l extends s{#eY;get feeDataFunc(){return this.#eY}constructor(e){super("org.ethers.plugins.network.FeeData"),this.#eY=e}async getFeeData(e){return await this.#eY(e)}clone(){return new l(this.#eY)}}e.exports.FeeDataNetworkPlugin=l,e.exports.FetchUrlFeeDataNetworkPlugin=class extends s{#u;#e0;get url(){return this.#u}get processFunc(){return this.#e0}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#u=e,this.#e0=t}clone(){return this}}}),ef("7omAq",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PollingEventSubscriber=e.exports.PollingTransactionSubscriber=e.exports.PollingOrphanSubscriber=e.exports.PollingBlockTagSubscriber=e.exports.OnBlockSubscriber=e.exports.PollingBlockSubscriber=e.exports.getPollingSubscriber=void 0;var r=ed("49y6x");function n(e){return JSON.parse(JSON.stringify(e))}e.exports.getPollingSubscriber=function(e,t){return"block"===t?new s(e):(0,r.isHexString)(t,32)?new a(e,t):void(0,r.assert)(!1,"unsupported polling event","UNSUPPORTED_OPERATION",{operation:"getPollingSubscriber",info:{event:t}})};class s{#e1;#e2;#e3;#e8;constructor(e){this.#e1=e,this.#e2=null,this.#e3=4e3,this.#e8=-2}get pollingInterval(){return this.#e3}set pollingInterval(e){this.#e3=e}async #e6(){try{let e=await this.#e1.getBlockNumber();if(-2===this.#e8){this.#e8=e;return}if(e!==this.#e8){for(let t=this.#e8+1;t<=e;t++){if(null==this.#e2)return;await this.#e1.emit("block",t)}this.#e8=e}}catch(e){}null!=this.#e2&&(this.#e2=this.#e1._setTimeout(this.#e6.bind(this),this.#e3))}start(){this.#e2||(this.#e2=this.#e1._setTimeout(this.#e6.bind(this),this.#e3),this.#e6())}stop(){this.#e2&&(this.#e1._clearTimeout(this.#e2),this.#e2=null)}pause(e){this.stop(),e&&(this.#e8=-2)}resume(){this.start()}}e.exports.PollingBlockSubscriber=s;class o{#e1;#e6;#e4;constructor(e){this.#e1=e,this.#e4=!1,this.#e6=e=>{this._poll(e,this.#e1)}}async _poll(e,t){throw Error("sub-classes must override this")}start(){this.#e4||(this.#e4=!0,this.#e6(-2),this.#e1.on("block",this.#e6))}stop(){this.#e4&&(this.#e4=!1,this.#e1.off("block",this.#e6))}pause(e){this.stop()}resume(){this.start()}}e.exports.OnBlockSubscriber=o,e.exports.PollingBlockTagSubscriber=class extends o{#e5;#e9;constructor(e,t){super(e),this.#e5=t,this.#e9=-2}pause(e){e&&(this.#e9=-2),super.pause(e)}async _poll(e,t){let r=await t.getBlock(this.#e5);null!=r&&(-2===this.#e9?this.#e9=r.number:r.number>this.#e9&&(t.emit(this.#e5,r.number),this.#e9=r.number))}},e.exports.PollingOrphanSubscriber=class extends o{#ek;constructor(e,t){super(e),this.#ek=n(t)}async _poll(e,t){throw Error("@TODO")}};class a extends o{#e7;constructor(e,t){super(e),this.#e7=t}async _poll(e,t){let r=await t.getTransactionReceipt(this.#e7);r&&t.emit(this.#e7,r)}}e.exports.PollingTransactionSubscriber=a,e.exports.PollingEventSubscriber=class{#e1;#ek;#e2;#e4;#e8;constructor(e,t){this.#e1=e,this.#ek=n(t),this.#e2=this.#e6.bind(this),this.#e4=!1,this.#e8=-2}async #e6(e){if(-2===this.#e8)return;let t=n(this.#ek);t.fromBlock=this.#e8+1,t.toBlock=e;let r=await this.#e1.getLogs(t);if(0===r.length){this.#e8<e-60&&(this.#e8=e-60);return}for(let e of r)this.#e1.emit(this.#ek,e),this.#e8=e.blockNumber}start(){this.#e4||(this.#e4=!0,-2===this.#e8&&this.#e1.getBlockNumber().then(e=>{this.#e8=e}),this.#e1.on("block",this.#e2))}stop(){this.#e4&&(this.#e4=!1,this.#e1.off("block",this.#e2))}pause(e){this.stop(),e&&(this.#e8=-2)}resume(){this.start()}}}),ef("jHmag",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.VoidSigner=e.exports.AbstractSigner=void 0;var r=ed("emjD2"),n=ed("73u8n"),s=ed("49y6x"),o=ed("79orL");function a(e,t){if(e.provider)return e.provider;(0,s.assert)(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function l(e,t){let n=(0,o.copyRequest)(t);if(null!=n.to&&(n.to=(0,r.resolveAddress)(n.to,e)),null!=n.from){let t=n.from;n.from=Promise.all([e.getAddress(),(0,r.resolveAddress)(t,e)]).then(([e,t])=>((0,s.assertArgument)(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e))}else n.from=e.getAddress();return await (0,s.resolveProperties)(n)}class u{provider;constructor(e){(0,s.defineProperties)(this,{provider:e||null})}async getNonce(e){return a(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await l(this,e)}async populateTransaction(e){let t=a(this,"populateTransaction"),r=await l(this,e);null==r.nonce&&(r.nonce=await this.getNonce("pending")),null==r.gasLimit&&(r.gasLimit=await this.estimateGas(r));let n=await this.provider.getNetwork();if(null!=r.chainId){let t=(0,s.getBigInt)(r.chainId);(0,s.assertArgument)(t===n.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=n.chainId;let o=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;if(null!=r.gasPrice&&(2===r.type||o)?(0,s.assertArgument)(!1,"eip-1559 transaction do not support gasPrice","tx",e):(0===r.type||1===r.type)&&o&&(0,s.assertArgument)(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(2===r.type||null==r.type)&&null!=r.maxFeePerGas&&null!=r.maxPriorityFeePerGas)r.type=2;else if(0===r.type||1===r.type){let e=await t.getFeeData();(0,s.assert)(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice)}else{let e=await t.getFeeData();if(null==r.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,null!=r.gasPrice){let e=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=e,r.maxPriorityFeePerGas=e}else null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?((0,s.assert)(!o,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice),r.type=0):(0,s.assert)(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(2===r.type||3===r.type||4===r.type)&&(null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}return await (0,s.resolveProperties)(r)}async populateAuthorization(e){let t=Object.assign({},e);return null==t.chainId&&(t.chainId=(await a(this,"getNetwork").getNetwork()).chainId),null==t.nonce&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return a(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return a(this,"call").call(await this.populateCall(e))}async resolveName(e){let t=a(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){let t=a(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;let s=n.Transaction.from(r);return await t.broadcastTransaction(await this.signTransaction(s))}authorize(e){(0,s.assert)(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}e.exports.AbstractSigner=u;class c extends u{address;constructor(e,t){super(t),(0,s.defineProperties)(this,{address:e})}async getAddress(){return this.address}connect(e){return new c(this.address,e)}#te(e,t){(0,s.assert)(!1,`VoidSigner cannot sign ${e}`,"UNSUPPORTED_OPERATION",{operation:t})}async signTransaction(e){this.#te("transactions","signTransaction")}async signMessage(e){this.#te("messages","signMessage")}async signTypedData(e,t,r){this.#te("typed-data","signTypedData")}}e.exports.VoidSigner=c}),ef("3rFUk",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.showThrottleMessage=void 0;let r=new Set;e.exports.showThrottleMessage=function(e){r.has(e)||(r.add(e),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${e} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}}),ef("jNmNF",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getDefaultProvider=void 0;var r=ed("49y6x"),n=ed("80Doo"),s=ed("61bnA"),o=ed("03oXh"),a=ed("8eL9s"),l=ed("7EULV"),u=ed("1IDpG"),c=ed("8pqRO"),d=ed("2q0Lm"),f=ed("f0CZw"),h=ed("9dQkq"),p=ed("gNjEj");let g="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");e.exports.getDefaultProvider=function(e,t){null==t&&(t={});let m=e=>"-"!==t[e]&&("string"==typeof t.exclusive?e===t.exclusive:!Array.isArray(t.exclusive)||-1!==t.exclusive.indexOf(e));if("string"==typeof e&&e.match(/^https?:/))return new f.JsonRpcProvider(e);if("string"==typeof e&&e.match(/^wss?:/)||e&&"function"==typeof e.send&&"function"==typeof e.close)return new p.WebSocketProvider(e);let y=null;try{y=h.Network.from(e)}catch(e){}let b=[];if(m("publicPolygon")&&y&&("matic"===y.name?b.push(new f.JsonRpcProvider("https://polygon-rpc.com/",y,{staticNetwork:y})):"matic-amoy"===y.name&&b.push(new f.JsonRpcProvider("https://rpc-amoy.polygon.technology/",y,{staticNetwork:y}))),m("alchemy"))try{b.push(new s.AlchemyProvider(e,t.alchemy))}catch(e){}if(m("ankr")&&null!=t.ankr)try{b.push(new n.AnkrProvider(e,t.ankr))}catch(e){}if(m("chainstack"))try{b.push(new o.ChainstackProvider(e,t.chainstack))}catch(e){}if(m("cloudflare"))try{b.push(new a.CloudflareProvider(e))}catch(e){}if(m("etherscan"))try{b.push(new l.EtherscanProvider(e,t.etherscan))}catch(e){}if(m("infura"))try{let r,n=t.infura;"object"==typeof n&&(r=n.projectSecret,n=n.projectId),b.push(new u.InfuraProvider(e,n,r))}catch(e){}if(m("quicknode"))try{let r=t.quicknode;b.push(new c.QuickNodeProvider(e,r))}catch(e){}if((0,r.assert)(b.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),1===b.length)return b[0];let v=Math.floor(b.length/2);return v>2&&(v=2),y&&-1!==g.indexOf(y.name)&&(v=1),t&&t.quorum&&(v=t.quorum),new d.FallbackProvider(b,void 0,{quorum:v})}}),ef("80Doo",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AnkrProvider=void 0;var r=ed("49y6x"),n=ed("3rFUk"),s=ed("9dQkq"),o=ed("f0CZw");let a="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";class l extends o.JsonRpcProvider{apiKey;constructor(e,t){null==e&&(e="mainnet");let n=s.Network.from(e);null==t&&(t=a),super(l.getRequest(n,t),n,{polling:!0,staticNetwork:n}),(0,r.defineProperties)(this,{apiKey:t})}_getProvider(e){try{return new l(e,this.apiKey)}catch(e){}return super._getProvider(e)}static getRequest(e,t){null==t&&(t=a);let s=new r.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"sepolia":return"rpc.ankr.com/eth_sepolia";case"arbitrum":return"rpc.ankr.com/arbitrum";case"base":return"rpc.ankr.com/base";case"base-goerli":return"rpc.ankr.com/base_goerli";case"base-sepolia":return"rpc.ankr.com/base_sepolia";case"bnb":return"rpc.ankr.com/bsc";case"bnbt":return"rpc.ankr.com/bsc_testnet_chapel";case"matic":return"rpc.ankr.com/polygon";case"matic-mumbai":return"rpc.ankr.com/polygon_mumbai";case"optimism":return"rpc.ankr.com/optimism";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia"}(0,r.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/${t}`);return s.allowGzip=!0,t===a&&(s.retryFunc=async(e,t,r)=>((0,n.showThrottleMessage)("AnkrProvider"),!0)),s}getRpcError(e,t){return"eth_sendRawTransaction"===e.method&&t&&t.error&&"INTERNAL_ERROR: could not replace existing tx"===t.error.message&&(t.error.message="replacement transaction underpriced"),super.getRpcError(e,t)}isCommunityResource(){return this.apiKey===a}}e.exports.AnkrProvider=l}),ef("f0CZw",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.JsonRpcProvider=e.exports.JsonRpcApiPollingProvider=e.exports.JsonRpcApiProvider=e.exports.JsonRpcSigner=void 0;var r=ed("60lL9"),n=ed("emjD2"),s=ed("3A2Kh"),o=ed("73u8n"),a=ed("49y6x"),l=ed("lMpgd"),u=ed("jHmag"),c=ed("9dQkq"),d=ed("JJVUT"),f=ed("7omAq");let h="bigint,boolean,function,number,string,symbol".split(/,/g);function p(e){if(null==e||h.indexOf(typeof e)>=0||"function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(p);if("object"==typeof e)return Object.keys(e).reduce((t,r)=>(t[r]=e[r],t),{});throw Error(`should not happen: ${e} (${typeof e})`)}function g(e){return e?e.toLowerCase():e}function m(e){return e&&"number"==typeof e.pollingInterval}let y={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1048576,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class b extends u.AbstractSigner{address;constructor(e,t){super(e),t=(0,n.getAddress)(t),(0,a.defineProperties)(this,{address:t})}connect(e){(0,a.assert)(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){let t=p(e),r=[];if(t.from){let s=t.from;r.push((async()=>{let r=await (0,n.resolveAddress)(s,this.provider);(0,a.assertArgument)(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r})())}else t.from=this.address;if(null==t.gasLimit&&r.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){let e=t.to;r.push((async()=>{t.to=await (0,n.resolveAddress)(e,this.provider)})())}r.length&&await Promise.all(r);let s=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(e){let t=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((e,n)=>{let s=[1e3,100],o=0,l=async()=>{try{let n=await this.provider.getTransaction(r);if(null!=n)return void e(n.replaceableTransaction(t))}catch(e){if((0,a.isError)(e,"CANCELLED")||(0,a.isError)(e,"BAD_DATA")||(0,a.isError)(e,"NETWORK_ERROR")||(0,a.isError)(e,"UNSUPPORTED_OPERATION")){null==e.info&&(e.info={}),e.info.sendTransactionHash=r,n(e);return}if((0,a.isError)(e,"INVALID_ARGUMENT")&&(o++,null==e.info&&(e.info={}),e.info.sendTransactionHash=r,o>10))return void n(e);this.provider.emit("error",(0,a.makeError)("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:e}))}this.provider._setTimeout(()=>{l()},s.pop()||4e3)};l()})}async signTransaction(e){let t=p(e);if(t.from){let r=await (0,n.resolveAddress)(t.from,this.provider);(0,a.assertArgument)(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r}else t.from=this.address;let r=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){let t="string"==typeof e?(0,a.toUtf8Bytes)(e):e;return await this.provider.send("personal_sign",[(0,a.hexlify)(t),this.address.toLowerCase()])}async signTypedData(e,t,r){let o=p(r),l=await s.TypedDataEncoder.resolveNames(e,t,o,async e=>{let t=await (0,n.resolveAddress)(e);return(0,a.assertArgument)(null!=t,"TypedData does not support null address","value",e),t});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(s.TypedDataEncoder.getPayload(l.domain,t,l.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){let t="string"==typeof e?(0,a.toUtf8Bytes)(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),(0,a.hexlify)(t)])}}e.exports.JsonRpcSigner=b;class v extends l.AbstractProvider{#K;#tt;#tr;#tn;#ti;#ts;#to;#ta(){if(this.#tn)return;let e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#tn=setTimeout(()=>{this.#tn=null;let e=this.#tr;for(this.#tr=[];e.length;){let t=[e.shift()];for(;e.length&&t.length!==this.#K.batchMaxCount;)if(t.push(e.shift()),JSON.stringify(t.map(e=>e.payload)).length>this.#K.batchMaxSize){e.unshift(t.pop());break}(async()=>{let e=1===t.length?t[0].payload:t.map(e=>e.payload);this.emit("debug",{action:"sendRpcPayload",payload:e});try{let r=await this._send(e);for(let{resolve:e,reject:n,payload:s}of(this.emit("debug",{action:"receiveRpcResult",result:r}),t)){if(this.destroyed){n((0,a.makeError)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:s.method}));continue}let t=r.filter(e=>e.id===s.id)[0];if(null==t){let e=(0,a.makeError)("missing response for request","BAD_DATA",{value:r,info:{payload:s}});this.emit("error",e),n(e);continue}if("error"in t){n(this.getRpcError(s,t));continue}e(t.result)}}catch(e){for(let{reject:r}of(this.emit("debug",{action:"receiveRpcError",error:e}),t))r(e)}})()}},e)}constructor(e,t){super(e,t),this.#tt=1,this.#K=Object.assign({},y,t||{}),this.#tr=[],this.#tn=null,this.#ts=null,this.#to=null;{let e=null,t=new Promise(t=>{e=t});this.#ti={promise:t,resolve:e}}let r=this._getOption("staticNetwork");"boolean"==typeof r?((0,a.assertArgument)(!r||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),r&&null!=e&&(this.#ts=c.Network.from(e))):r&&((0,a.assertArgument)(null==e||r.matches(e),"staticNetwork MUST match network object","options",t),this.#ts=r)}_getOption(e){return this.#K[e]}get _network(){return(0,a.assert)(this.#ts,"network is not available yet","NETWORK_ERROR"),this.#ts}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&(0,a.getBigInt)(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){let r=await this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}let t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){let e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;else if(this.#ts)return this.#ts}return this.#to||(this.ready?this.#to=(async()=>{try{let e=c.Network.from((0,a.getBigInt)(await this.send("eth_chainId",[])));return this.#to=null,e}catch(e){throw this.#to=null,e}})():this.#to=(async()=>{let e,t={id:this.#tt++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});try{e=(await this._send(t))[0],this.#to=null}catch(e){throw this.#to=null,this.emit("debug",{action:"receiveRpcError",error:e}),e}if(this.emit("debug",{action:"receiveRpcResult",result:e}),"result"in e)return c.Network.from((0,a.getBigInt)(e.result));throw this.getRpcError(t,e)})()),await this.#to}_start(){null!=this.#ti&&null!=this.#ti.resolve&&(this.#ti.resolve(),this.#ti=null,(async()=>{for(;null==this.#ts&&!this.destroyed;)try{this.#ts=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",(0,a.makeError)("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await new Promise(e=>{setTimeout(e,1e3)})}this.#ta()})())}async _waitUntilReady(){if(null!=this.#ti)return await this.#ti.promise}_getSubscriber(e){return"pending"===e.type?new d.FilterIdPendingSubscriber(this):"event"===e.type?this._getOption("polling")?new f.PollingEventSubscriber(this,e.filter):new d.FilterIdEventSubscriber(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new l.UnmanagedSubscriber("orphan"):super._getSubscriber(e)}get ready(){return null==this.#ti}getRpcTransaction(e){let t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(null==e[r])return;let n=r;"gasLimit"===r&&(n="gas"),t[n]=(0,a.toQuantity)((0,a.getBigInt)(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{null!=e[r]&&(t[r]=(0,a.hexlify)(e[r]))}),e.accessList&&(t.accessList=(0,o.accessListify)(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(e=>e.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(e=>{let t=(0,o.authorizationify)(e);return{address:t.address,nonce:(0,a.toQuantity)(t.nonce),chainId:(0,a.toQuantity)(t.chainId),yParity:(0,a.toQuantity)(t.signature.yParity),r:t.signature.r,s:t.signature.s}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[g(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[g(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[g(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[g(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(g):e.filter.address=g(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){let{method:n}=e,{error:s}=t;if("eth_estimateGas"===n&&s.message){let t=s.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return(0,a.makeError)("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:s}});if(t.match(/nonce/i)&&t.match(/too low/i))return(0,a.makeError)("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:s}})}if("eth_call"===n||"eth_estimateGas"===n){let t=function e(t){if(null==t)return null;if("string"==typeof t.message&&t.message.match(/revert/i)&&(0,a.isHexString)(t.data))return{message:t.message,data:t.data};if("object"==typeof t){for(let r in t){let n=e(t[r]);if(n)return n}return null}if("string"==typeof t)try{return e(JSON.parse(t))}catch(e){}return null}(s),o=r.AbiCoder.getBuiltinCallException("eth_call"===n?"call":"estimateGas",e.params[0],t?t.data:null);return o.info={error:s,payload:e},o}let o=JSON.stringify(function(e){let t=[];return!function e(t,r){if(null!=t){if("string"==typeof t.message&&r.push(t.message),"object"==typeof t)for(let n in t)e(t[n],r);if("string"==typeof t)try{return e(JSON.parse(t),r)}catch(e){}}}(e,t),t}(s));if("string"==typeof s.message&&s.message.match(/user denied|ethers-user-denied/i))return(0,a.makeError)("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:s}});if("eth_sendRawTransaction"===n||"eth_sendTransaction"===n){let t=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return(0,a.makeError)("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return(0,a.makeError)("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return(0,a.makeError)("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:s}});if(o.match(/only replay-protected/i))return(0,a.makeError)("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:t,info:{error:s}}})}let l=!!o.match(/the method .* does not exist/i);return(!l&&s&&s.details&&s.details.startsWith("Unauthorized method:")&&(l=!0),l)?(0,a.makeError)("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:s,payload:e}}):(0,a.makeError)("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:e})}send(e,t){if(this.destroyed)return Promise.reject((0,a.makeError)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));let r=this.#tt++,n=new Promise((n,s)=>{this.#tr.push({resolve:n,reject:s,payload:{method:e,params:t,id:r,jsonrpc:"2.0"}})});return this.#ta(),n}async getSigner(e){null==e&&(e=0);let t=this.send("eth_accounts",[]);if("number"==typeof e){let r=await t;if(e>=r.length)throw Error("no such account");return new b(this,r[e])}let{accounts:r}=await (0,a.resolveProperties)({network:this.getNetwork(),accounts:t});for(let t of(e=(0,n.getAddress)(e),r))if((0,n.getAddress)(t)===e)return new b(this,e);throw Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(e=>new b(this,e))}destroy(){for(let{payload:e,reject:t}of(this.#tn&&(clearTimeout(this.#tn),this.#tn=null),this.#tr))t((0,a.makeError)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#tr=[],super.destroy()}}e.exports.JsonRpcApiProvider=v;class x extends v{#tl;constructor(e,t){super(e,t);let r=this._getOption("pollingInterval");null==r&&(r=y.pollingInterval),this.#tl=r}_getSubscriber(e){let t=super._getSubscriber(e);return m(t)&&(t.pollingInterval=this.#tl),t}get pollingInterval(){return this.#tl}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw Error("invalid interval");this.#tl=e,this._forEachSubscriber(e=>{m(e)&&(e.pollingInterval=this.#tl)})}}e.exports.JsonRpcApiPollingProvider=x,e.exports.JsonRpcProvider=class extends x{#tu;constructor(e,t,r){null==e&&(e="http://localhost:8545"),super(t,r),"string"==typeof e?this.#tu=new a.FetchRequest(e):this.#tu=e.clone()}_getConnection(){return this.#tu.clone()}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){let t=this._getConnection();t.body=JSON.stringify(e),t.setHeader("content-type","application/json");let r=await t.send();r.assertOk();let n=r.bodyJson;return Array.isArray(n)||(n=[n]),n}}}),ef("JJVUT",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FilterIdPendingSubscriber=e.exports.FilterIdEventSubscriber=e.exports.FilterIdSubscriber=void 0;var r=ed("49y6x"),n=ed("7omAq");class s{#e1;#tc;#e2;#e4;#ts;#td;constructor(e){this.#e1=e,this.#tc=null,this.#e2=this.#e6.bind(this),this.#e4=!1,this.#ts=null,this.#td=!1}_subscribe(e){throw Error("subclasses must override this")}_emitResults(e,t){throw Error("subclasses must override this")}_recover(e){throw Error("subclasses must override this")}async #e6(e){try{null==this.#tc&&(this.#tc=this._subscribe(this.#e1));let e=null;try{e=await this.#tc}catch(e){if(!(0,r.isError)(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==e){this.#tc=null,this.#e1._recoverSubscriber(this,this._recover(this.#e1));return}let t=await this.#e1.getNetwork();if(this.#ts||(this.#ts=t),this.#ts.chainId!==t.chainId)throw Error("chaid changed");if(this.#td)return;let n=await this.#e1.send("eth_getFilterChanges",[e]);await this._emitResults(this.#e1,n)}catch(e){console.log("@TODO",e)}this.#e1.once("block",this.#e2)}#tf(){let e=this.#tc;e&&(this.#tc=null,e.then(e=>{this.#e1.destroyed||this.#e1.send("eth_uninstallFilter",[e])}))}start(){this.#e4||(this.#e4=!0,this.#e6(-2))}stop(){this.#e4&&(this.#e4=!1,this.#td=!0,this.#tf(),this.#e1.off("block",this.#e2))}pause(e){e&&this.#tf(),this.#e1.off("block",this.#e2)}resume(){this.start()}}e.exports.FilterIdSubscriber=s,e.exports.FilterIdEventSubscriber=class extends s{#th;constructor(e,t){super(e),this.#th=JSON.parse(JSON.stringify(t))}_recover(e){return new n.PollingEventSubscriber(e,this.#th)}async _subscribe(e){return await e.send("eth_newFilter",[this.#th])}async _emitResults(e,t){for(let r of t)e.emit(this.#th,e._wrapLog(r,e._network))}},e.exports.FilterIdPendingSubscriber=class extends s{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(let r of t)e.emit("pending",r)}}}),ef("61bnA",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AlchemyProvider=void 0;var r=ed("49y6x"),n=ed("3rFUk"),s=ed("9dQkq"),o=ed("f0CZw");let a="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class l extends o.JsonRpcProvider{apiKey;constructor(e,t){null==e&&(e="mainnet");let n=s.Network.from(e);null==t&&(t=a),super(l.getRequest(n,t),n,{staticNetwork:n}),(0,r.defineProperties)(this,{apiKey:t})}_getProvider(e){try{return new l(e,this.apiKey)}catch(e){}return super._getProvider(e)}async _perform(e){if("getTransactionResult"===e.method){let t,{trace:n,tx:s}=await (0,r.resolveProperties)({trace:this.send("trace_transaction",[e.hash]),tx:this.getTransaction(e.hash)});if(null==n||null==s)return null;let o=!1;try{t=n[0].result.output,o="Reverted"===n[0].error}catch(e){}if(t)return(0,r.assert)(!o,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:t,reason:null,transaction:s,invocation:null,revert:null}),t;(0,r.assert)(!1,"could not parse trace result","BAD_DATA",{value:n})}return await super._perform(e)}isCommunityResource(){return this.apiKey===a}static getRequest(e,t){null==t&&(t=a);let s=new r.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"arbitrum-sepolia":return"arb-sepolia.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"base-sepolia":return"base-sepolia.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-amoy":return"polygon-amoy.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com";case"optimism-sepolia":return"opt-sepolia.g.alchemy.com"}(0,r.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/v2/${t}`);return s.allowGzip=!0,t===a&&(s.retryFunc=async(e,t,r)=>((0,n.showThrottleMessage)("alchemy"),!0)),s}}e.exports.AlchemyProvider=l}),ef("03oXh",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ChainstackProvider=void 0;var r=ed("49y6x"),n=ed("3rFUk"),s=ed("9dQkq"),o=ed("f0CZw");function a(e){switch(e){case"mainnet":return"39f1d67cedf8b7831010a665328c9197";case"arbitrum":return"0550c209db33c3abf4cc927e1e18cea1";case"bnb":return"98b5a77e531614387366f6fc5da097f8";case"matic":return"cd9d4d70377471aa7c142ec4a4205249"}(0,r.assertArgument)(!1,"unsupported network","network",e)}class l extends o.JsonRpcProvider{apiKey;constructor(e,t){null==e&&(e="mainnet");let n=s.Network.from(e);null==t&&(t=a(n.name)),super(l.getRequest(n,t),n,{staticNetwork:n}),(0,r.defineProperties)(this,{apiKey:t})}_getProvider(e){try{return new l(e,this.apiKey)}catch(e){}return super._getProvider(e)}isCommunityResource(){return this.apiKey===a(this._network.name)}static getRequest(e,t){null==t&&(t=a(e.name));let s=new r.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"ethereum-mainnet.core.chainstack.com";case"arbitrum":return"arbitrum-mainnet.core.chainstack.com";case"bnb":return"bsc-mainnet.core.chainstack.com";case"matic":return"polygon-mainnet.core.chainstack.com"}(0,r.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/${t}`);return s.allowGzip=!0,t===a(e.name)&&(s.retryFunc=async(e,t,r)=>((0,n.showThrottleMessage)("ChainstackProvider"),!0)),s}}e.exports.ChainstackProvider=l}),ef("8eL9s",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CloudflareProvider=void 0;var r=ed("49y6x"),n=ed("9dQkq"),s=ed("f0CZw");class o extends s.JsonRpcProvider{constructor(e){null==e&&(e="mainnet");let t=n.Network.from(e);(0,r.assertArgument)("mainnet"===t.name,"unsupported network","network",e),super("https://cloudflare-eth.com/",t,{staticNetwork:t})}}e.exports.CloudflareProvider=o}),ef("7EULV",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EtherscanProvider=e.exports.EtherscanPlugin=void 0;var r=ed("60lL9"),n=ed("aeK1b"),s=ed("73u8n"),o=ed("49y6x"),a=ed("lMpgd"),l=ed("9dQkq"),u=ed("kNuS3"),c=ed("3rFUk");let d="org.ethers.plugins.provider.Etherscan";class f extends u.NetworkPlugin{baseUrl;constructor(e){super(d),(0,o.defineProperties)(this,{baseUrl:e})}clone(){return new f(this.baseUrl)}}e.exports.EtherscanPlugin=f;let h=["enableCcipRead"],p=1;class g extends a.AbstractProvider{network;apiKey;#tp;constructor(e,t){super();let r=l.Network.from(e);this.#tp=r.getPlugin(d),(0,o.defineProperties)(this,{apiKey:null!=t?t:null,network:r}),this.getBaseUrl()}getBaseUrl(){if(this.#tp)return this.#tp.baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"holesky":return"https://api-holesky.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"base":return"https://api.basescan.org";case"base-sepolia":return"https://api-sepolia.basescan.org";case"bnb":return"https://api.bscscan.com";case"bnbt":return"https://api-testnet.bscscan.com";case"matic":return"https://api.polygonscan.com";case"matic-amoy":return"https://api-amoy.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}(0,o.assertArgument)(!1,"unsupported network","network",this.network)}getUrl(e,t){let r=Object.keys(t).reduce((e,r)=>{let n=t[r];return null!=n&&(e+=`&${r}=${n}`),e},""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.getBaseUrl()}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.getBaseUrl()}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}async detectNetwork(){return this.network}async fetch(e,t,r){let n=p++,s=r?this.getPostUrl():this.getUrl(e,t),a=r?this.getPostData(e,t):null;this.emit("debug",{action:"sendRequest",id:n,url:s,payload:a});let l=new o.FetchRequest(s);l.setThrottleParams({slotInterval:1e3}),l.retryFunc=(e,t,r)=>(this.isCommunityResource()&&(0,c.showThrottleMessage)("Etherscan"),Promise.resolve(!0)),l.processFunc=async(t,r)=>{let s=r.hasBody()?JSON.parse((0,o.toUtf8String)(r.body)):{},a=("string"==typeof s.result?s.result:"").toLowerCase().indexOf("rate limit")>=0;return"proxy"===e?s&&0==s.status&&"NOTOK"==s.message&&a&&(this.emit("debug",{action:"receiveError",id:n,reason:"proxy-NOTOK",error:s}),r.throwThrottleError(s.result,2e3)):a&&(this.emit("debug",{action:"receiveError",id:n,reason:"null result",error:s.result}),r.throwThrottleError(s.result,2e3)),r},a&&(l.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),l.body=Object.keys(a).map(e=>`${e}=${a[e]}`).join("&"));let u=await l.send();try{u.assertOk()}catch(e){this.emit("debug",{action:"receiveError",id:n,error:e,reason:"assertOk"}),(0,o.assert)(!1,"response error","SERVER_ERROR",{request:l,response:u})}u.hasBody()||(this.emit("debug",{action:"receiveError",id:n,error:"missing body",reason:"null body"}),(0,o.assert)(!1,"missing response","SERVER_ERROR",{request:l,response:u}));let d=JSON.parse((0,o.toUtf8String)(u.body));return"proxy"===e?("2.0"!=d.jsonrpc&&(this.emit("debug",{action:"receiveError",id:n,result:d,reason:"invalid JSON-RPC"}),(0,o.assert)(!1,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:l,response:u,info:{result:d}})),d.error&&(this.emit("debug",{action:"receiveError",id:n,result:d,reason:"JSON-RPC error"}),(0,o.assert)(!1,"error response","SERVER_ERROR",{request:l,response:u,info:{result:d}}))):0==d.status&&("No records found"===d.message||"No transactions found"===d.message)||1==d.status&&("string"!=typeof d.message||d.message.match(/^OK/))||(this.emit("debug",{action:"receiveError",id:n,result:d}),(0,o.assert)(!1,"error response","SERVER_ERROR",{request:l,response:u,info:{result:d}})),this.emit("debug",{action:"receiveRequest",id:n,result:d}),d.result}_getTransactionPostData(e){let t={};for(let r in e){if(h.indexOf(r)>=0||null==e[r])continue;let n=e[r];if(("type"!==r||0!==n)&&("blockTag"!==r||"latest"!==n)){if(({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0})[r])n=(0,o.toQuantity)(n);else if("accessList"===r)n="["+(0,s.accessListify)(n).map(e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`).join(",")+"]";else if("blobVersionedHashes"===r){if(0===n.length)continue;(0,o.assert)(!1,"Etherscan API does not support blobVersionedHashes","UNSUPPORTED_OPERATION",{operation:"_getTransactionPostData",info:{transaction:e}})}else n=(0,o.hexlify)(n);t[r]=n}}return t}_checkError(e,t,n){let a="";if((0,o.isError)(t,"SERVER_ERROR")){try{a=t.info.result.error.message}catch(e){}if(!a)try{a=t.info.message}catch(e){}}if("estimateGas"===e.method&&!a.match(/revert/i)&&a.match(/insufficient funds/i)&&(0,o.assert)(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.transaction}),("call"===e.method||"estimateGas"===e.method)&&a.match(/execution reverted/i)){let n="";try{n=t.info.result.error.data}catch(e){}let s=r.AbiCoder.getBuiltinCallException(e.method,e.transaction,n);throw s.info={request:e,error:t},s}if(a&&"broadcastTransaction"===e.method){let t=s.Transaction.from(e.signedTransaction);a.match(/replacement/i)&&a.match(/underpriced/i)&&(0,o.assert)(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t}),a.match(/insufficient funds/)&&(0,o.assert)(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t}),a.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&(0,o.assert)(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:t})}throw t}async _detectNetwork(){return this.network}async _perform(e){switch(e.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if("mainnet"===this.network.name)return"1000000000";if("optimism"===this.network.name)return"1000000";throw Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch(t=>this._checkError(e,t,e.signedTransaction));case"getBlock":if("blockTag"in e)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});(0,o.assert)(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.hash});case"call":{if("latest"!==e.blockTag)throw Error("EtherscanProvider does not support blockTag for call");let t=this._getTransactionPostData(e.transaction);t.module="proxy",t.action="eth_call";try{return await this.fetch("proxy",t,!0)}catch(t){return this._checkError(e,t,e.transaction)}}case"estimateGas":{let t=this._getTransactionPostData(e.transaction);t.module="proxy",t.action="eth_estimateGas";try{return await this.fetch("proxy",t,!0)}catch(t){return this._checkError(e,t,e.transaction)}}}return super._perform(e)}async getNetwork(){return this.network}async getEtherPrice(){return"mainnet"!==this.network.name?0:parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(e){var t;let r=this._getAddress(e);(t=r)&&"function"==typeof t.then&&(r=await r);try{let e=await this.fetch("contract",{action:"getabi",address:r}),t=JSON.parse(e);return new n.Contract(r,t,this)}catch(e){return null}}isCommunityResource(){return null==this.apiKey}}e.exports.EtherscanProvider=g}),ef("1IDpG",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.InfuraProvider=e.exports.InfuraWebSocketProvider=void 0;var r=ed("49y6x"),n=ed("3rFUk"),s=ed("9dQkq"),o=ed("f0CZw"),a=ed("gNjEj");let l="84842078b09946638c03157f83405213";class u extends a.WebSocketProvider{projectId;projectSecret;constructor(e,t){let n=new c(e,t),s=n._getConnection();(0,r.assert)(!s.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"}),super(s.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),n._network),(0,r.defineProperties)(this,{projectId:n.projectId,projectSecret:n.projectSecret})}isCommunityResource(){return this.projectId===l}}e.exports.InfuraWebSocketProvider=u;class c extends o.JsonRpcProvider{projectId;projectSecret;constructor(e,t,n){null==e&&(e="mainnet");let o=s.Network.from(e);null==t&&(t=l),null==n&&(n=null),super(c.getRequest(o,t,n),o,{staticNetwork:o}),(0,r.defineProperties)(this,{projectId:t,projectSecret:n})}_getProvider(e){try{return new c(e,this.projectId,this.projectSecret)}catch(e){}return super._getProvider(e)}isCommunityResource(){return this.projectId===l}static getWebSocketProvider(e,t){return new u(e,t)}static getRequest(e,t,s){null==t&&(t=l),null==s&&(s=null);let o=new r.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":case"base-goerli":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bsc-mainnet.infura.io";case"bnbt":return"bsc-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}(0,r.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/v3/${t}`);return o.allowGzip=!0,s&&o.setCredentials("",s),t===l&&(o.retryFunc=async(e,t,r)=>((0,n.showThrottleMessage)("InfuraProvider"),!0)),o}}e.exports.InfuraProvider=c}),ef("gNjEj",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.WebSocketProvider=void 0;var r=ed("l2gAA"),n=ed("jhe5A");class s extends n.SocketProvider{#tu;#tg;get websocket(){if(null==this.#tg)throw Error("websocket closed");return this.#tg}constructor(e,t,n){super(t,n),"string"==typeof e?(this.#tu=()=>new r.WebSocket(e),this.#tg=this.#tu()):"function"==typeof e?(this.#tu=e,this.#tg=e()):(this.#tu=null,this.#tg=e),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(e){console.log("failed to start WebsocketProvider",e)}},this.websocket.onmessage=e=>{this._processMessage(e.data)}}async _write(e){this.websocket.send(e)}async destroy(){null!=this.#tg&&(this.#tg.close(),this.#tg=null),super.destroy()}}e.exports.WebSocketProvider=s}),ef("l2gAA",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.WebSocket=void 0;let r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==ea)return ea;throw Error("unable to locate global object")}().WebSocket;e.exports.WebSocket=r}),ef("jhe5A",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SocketProvider=e.exports.SocketEventSubscriber=e.exports.SocketPendingSubscriber=e.exports.SocketBlockSubscriber=e.exports.SocketSubscriber=void 0;var r=ed("lMpgd"),n=ed("49y6x"),s=ed("f0CZw");class o{#e1;#ek;get filter(){return JSON.parse(this.#ek)}#tm;#ty;#tb;constructor(e,t){this.#e1=e,this.#ek=JSON.stringify(t),this.#tm=null,this.#ty=null,this.#tb=null}start(){this.#tm=this.#e1.send("eth_subscribe",this.filter).then(e=>(this.#e1._register(e,this),e))}stop(){this.#tm.then(e=>{this.#e1.destroyed||this.#e1.send("eth_unsubscribe",[e])}),this.#tm=null}pause(e){(0,n.assert)(e,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),this.#ty=!!e}resume(){this.#ty=null}_handleMessage(e){if(null!=this.#tm&&null===this.#ty){let t=this.#tb;t=null==t?this._emit(this.#e1,e):t.then(async()=>{await this._emit(this.#e1,e)}),this.#tb=t.then(()=>{this.#tb===t&&(this.#tb=null)})}}async _emit(e,t){throw Error("sub-classes must implemente this; _emit")}}e.exports.SocketSubscriber=o;class a extends o{constructor(e){super(e,["newHeads"])}async _emit(e,t){e.emit("block",parseInt(t.number))}}e.exports.SocketBlockSubscriber=a;class l extends o{constructor(e){super(e,["newPendingTransactions"])}async _emit(e,t){e.emit("pending",t)}}e.exports.SocketPendingSubscriber=l;class u extends o{#tv;get logFilter(){return JSON.parse(this.#tv)}constructor(e,t){super(e,["logs",t]),this.#tv=JSON.stringify(t)}async _emit(e,t){e.emit(this.logFilter,e._wrapLog(t,e._network))}}e.exports.SocketEventSubscriber=u;class c extends s.JsonRpcApiProvider{#tx;#eO;#tw;constructor(e,t){let r=Object.assign({},null!=t?t:{});(0,n.assertArgument)(null==r.batchMaxCount||1===r.batchMaxCount,"sockets-based providers do not support batches","options.batchMaxCount",t),r.batchMaxCount=1,null==r.staticNetwork&&(r.staticNetwork=!0),super(e,r),this.#tx=new Map,this.#eO=new Map,this.#tw=new Map}_getSubscriber(e){switch(e.type){case"close":return new r.UnmanagedSubscriber("close");case"block":return new a(this);case"pending":return new l(this);case"event":return new u(this,e.filter);case"orphan":if("drop-log"===e.filter.orphan)return new r.UnmanagedSubscriber("drop-log")}return super._getSubscriber(e)}_register(e,t){this.#eO.set(e,t);let r=this.#tw.get(e);if(r){for(let e of r)t._handleMessage(e);this.#tw.delete(e)}}async _send(e){(0,n.assertArgument)(!Array.isArray(e),"WebSocket does not support batch send","payload",e);let t=new Promise((t,r)=>{this.#tx.set(e.id,{payload:e,resolve:t,reject:r})});return await this._waitUntilReady(),await this._write(JSON.stringify(e)),[await t]}async _processMessage(e){let t=JSON.parse(e);if(t&&"object"==typeof t&&"id"in t){let e=this.#tx.get(t.id);if(null==e)return void this.emit("error",(0,n.makeError)("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:t}));this.#tx.delete(t.id),e.resolve(t)}else{if(!t||"eth_subscription"!==t.method)return void this.emit("error",(0,n.makeError)("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:t}));let e=t.params.subscription,r=this.#eO.get(e);if(r)r._handleMessage(t.params.result);else{let r=this.#tw.get(e);null==r&&(r=[],this.#tw.set(e,r)),r.push(t.params.result)}}}async _write(e){throw Error("sub-classes must override this")}}e.exports.SocketProvider=c}),ef("8pqRO",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.QuickNodeProvider=void 0;var r=ed("49y6x"),n=ed("3rFUk"),s=ed("9dQkq"),o=ed("f0CZw");let a="919b412a057b5e9c9b6dce193c5a60242d6efadb";class l extends o.JsonRpcProvider{token;constructor(e,t){null==e&&(e="mainnet");let n=s.Network.from(e);null==t&&(t=a),super(l.getRequest(n,t),n,{staticNetwork:n}),(0,r.defineProperties)(this,{token:t})}_getProvider(e){try{return new l(e,this.token)}catch(e){}return super._getProvider(e)}isCommunityResource(){return this.token===a}static getRequest(e,t){null==t&&(t=a);let s=new r.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"sepolia":return"ethers.ethereum-sepolia.quiknode.pro";case"holesky":return"ethers.ethereum-holesky.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"arbitrum-sepolia":return"ethers.arbitrum-sepolia.quiknode.pro";case"base":return"ethers.base-mainnet.quiknode.pro";case"base-goerli":return"ethers.base-goerli.quiknode.pro";case"base-spolia":return"ethers.base-sepolia.quiknode.pro";case"bnb":return"ethers.bsc.quiknode.pro";case"bnbt":return"ethers.bsc-testnet.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro";case"optimism-sepolia":return"ethers.optimism-sepolia.quiknode.pro";case"xdai":return"ethers.xdai.quiknode.pro"}(0,r.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/${t}`);return s.allowGzip=!0,t===a&&(s.retryFunc=async(e,t,r)=>((0,n.showThrottleMessage)("QuickNodeProvider"),!0)),s}}e.exports.QuickNodeProvider=l}),ef("2q0Lm",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FallbackProvider=void 0;var r=ed("49y6x"),n=ed("lMpgd"),s=ed("9dQkq");let o=BigInt("1"),a=BigInt("2");function l(){return new Date().getTime()}function u(e){return JSON.stringify(e,(e,t)=>"bigint"==typeof t?{type:"bigint",value:t.toString()}:t)}let c={stallTimeout:400,priority:1,weight:1},d={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};async function f(e,t){for(;(e.blockNumber<0||e.blockNumber<t)&&(e._updateNumber||(e._updateNumber=(async()=>{try{let t=await e.provider.getBlockNumber();t>e.blockNumber&&(e.blockNumber=t)}catch(t){e.blockNumber=-2,e._lastFatalError=t,e._lastFatalErrorTimestamp=l()}e._updateNumber=null})()),await e._updateNumber,e.outOfSync++,!e._lastFatalError););}function h(e){if(null==e)return"null";if(Array.isArray(e))return"["+e.map(h).join(",")+"]";if("object"==typeof e&&"function"==typeof e.toJSON)return h(e.toJSON());switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":case"number":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let t=Object.keys(e);return t.sort(),"{"+t.map(t=>`${JSON.stringify(t)}:${h(e[t])}`).join(",")+"}"}}throw console.log("Could not serialize",e),Error("Hmm...")}function p(e,t){if("error"in t){let e,n=t.error;return{tag:(0,r.isError)(n,"CALL_EXCEPTION")?h(Object.assign({},n,{shortMessage:void 0,reason:void 0,info:void 0})):h(n),value:n}}let n=t.result;return{tag:h(n),value:n}}function g(e,t){let r=new Map;for(let{value:e,tag:n,weight:s}of t){let t=r.get(n)||{value:e,weight:0};t.weight+=s,r.set(n,t)}let n=null;for(let t of r.values())t.weight>=e&&(!n||t.weight>n.weight)&&(n=t);if(n)return n.value}function m(e,t){let r=0,n=new Map,s=null,l=[];for(let{value:e,tag:o,weight:a}of t)if(e instanceof Error){let t=n.get(o)||{value:e,weight:0};t.weight+=a,n.set(o,t),(null==s||t.weight>s.weight)&&(s=t)}else l.push(BigInt(e)),r+=a;if(r<e)return s&&s.weight>=e?s.value:void 0;l.sort((e,t)=>e<t?-1:+(t>e));let u=Math.floor(l.length/2);return l.length%2?l[u]:(l[u-1]+l[u]+o)/a}function y(e,t){let r=g(e,t);if(void 0!==r)return r;for(let e of t)if(e.value)return e.value}class b extends n.AbstractProvider{quorum;eventQuorum;eventWorkers;#tE;#tA;#tS;constructor(e,t,s){super(t,s),this.#tE=e.map(e=>e instanceof n.AbstractProvider?Object.assign({provider:e},c,d):Object.assign({},c,e,d)),this.#tA=-2,this.#tS=null,s&&null!=s.quorum?this.quorum=s.quorum:this.quorum=Math.ceil(this.#tE.reduce((e,t)=>e+=t.weight,0)/2),this.eventQuorum=1,this.eventWorkers=1,(0,r.assertArgument)(this.quorum<=this.#tE.reduce((e,t)=>e+t.weight,0),"quorum exceed provider weight","quorum",this.quorum)}get providerConfigs(){return this.#tE.map(e=>{let t=Object.assign({},e);for(let e in t)"_"===e[0]&&delete t[e];return t})}async _detectNetwork(){return s.Network.from((0,r.getBigInt)(await this._perform({method:"chainId"})))}async _translatePerform(e,t){switch(t.method){case"broadcastTransaction":return await e.broadcastTransaction(t.signedTransaction);case"call":return await e.call(Object.assign({},t.transaction,{blockTag:t.blockTag}));case"chainId":return(await e.getNetwork()).chainId;case"estimateGas":return await e.estimateGas(t.transaction);case"getBalance":return await e.getBalance(t.address,t.blockTag);case"getBlock":{let r="blockHash"in t?t.blockHash:t.blockTag;return await e.getBlock(r,t.includeTransactions)}case"getBlockNumber":return await e.getBlockNumber();case"getCode":return await e.getCode(t.address,t.blockTag);case"getGasPrice":return(await e.getFeeData()).gasPrice;case"getPriorityFee":return(await e.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await e.getLogs(t.filter);case"getStorage":return await e.getStorage(t.address,t.position,t.blockTag);case"getTransaction":return await e.getTransaction(t.hash);case"getTransactionCount":return await e.getTransactionCount(t.address,t.blockTag);case"getTransactionReceipt":return await e.getTransactionReceipt(t.hash);case"getTransactionResult":return await e.getTransactionResult(t.hash)}}#tk(e){let t=Array.from(e).map(e=>e.config),r=this.#tE.slice();for(let e=r.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1)),n=r[e];r[e]=r[t],r[t]=n}for(let e of(r.sort((e,t)=>e.priority-t.priority),r))if(!e._lastFatalError&&-1===t.indexOf(e))return e;return null}#tI(e,t){let r=this.#tk(e);if(null==r)return null;let n={config:r,result:null,didBump:!1,perform:null,staller:null},s=l();return n.perform=(async()=>{try{r.requests++,n.result={result:await this._translatePerform(r.provider,t)}}catch(e){r.errorResponses++,n.result={error:e}}let e=l()-s;r._totalTime+=e,r.rollingDuration=.95*r.rollingDuration+.05*e,n.perform=null})(),n.staller=(async()=>{var e;await (e=r.stallTimeout,new Promise(t=>{setTimeout(t,e)})),n.staller=null})(),e.add(n),n}async #t_(){let e=this.#tS;if(!e){let t=[];this.#tE.forEach(e=>{t.push((async()=>{await f(e,0),e._lastFatalError||(e._network=await e.provider.getNetwork())})())}),this.#tS=e=(async()=>{await Promise.all(t);let e=null;for(let t of this.#tE){if(t._lastFatalError)continue;let n=t._network;null==e?e=n.chainId:n.chainId!==e&&(0,r.assert)(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})()}await e}async #tP(e,t){let n=[];for(let r of e)if(null!=r.result){let{tag:e,value:s}=p(t.method,r.result);n.push({tag:e,value:s,weight:r.config.weight})}if(!(n.reduce((e,t)=>e+t.weight,0)<this.quorum)){switch(t.method){case"getBlockNumber":{-2===this.#tA&&(this.#tA=Math.ceil((0,r.getNumber)(m(this.quorum,this.#tE.filter(e=>!e._lastFatalError).map(e=>({value:e.blockNumber,tag:(0,r.getNumber)(e.blockNumber).toString(),weight:e.weight}))))));let e=function(e,t){let n;if(1===e)return(0,r.getNumber)(m(e,t),"%internal");let s=new Map,o=(e,t)=>{let r=s.get(e)||{result:e,weight:0};r.weight+=t,s.set(e,r)};for(let{weight:e,value:n}of t){let t=(0,r.getNumber)(n);o(t-1,e),o(t,e),o(t+1,e)}let a=0;for(let{weight:t,result:r}of s.values())t>=e&&(t>a||null!=n&&t===a&&r>n)&&(a=t,n=r);return n}(this.quorum,n);if(void 0===e)return;return e>this.#tA&&(this.#tA=e),this.#tA}case"getGasPrice":case"getPriorityFee":case"estimateGas":return m(this.quorum,n);case"getBlock":if("blockTag"in t&&"pending"===t.blockTag)return y(this.quorum,n);return g(this.quorum,n);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return g(this.quorum,n);case"broadcastTransaction":return y(this.quorum,n)}(0,r.assert)(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${u(t.method)})`})}}async #tC(e,t){if(0===e.size)throw Error("no runners?!");let n=[],s=0;for(let t of e){if(t.perform&&n.push(t.perform),t.staller){n.push(t.staller);continue}!t.didBump&&(t.didBump=!0,s++)}let o=await this.#tP(e,t);if(void 0!==o){if(o instanceof Error)throw o;return o}for(let r=0;r<s;r++)this.#tI(e,t);return(0,r.assert)(n.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:Array.from(e).map(e=>u(e.result))}}),await Promise.race(n),await this.#tC(e,t)}async _perform(e){if("broadcastTransaction"===e.method){let t=this.#tE.map(e=>null),n=this.#tE.map(async({provider:r,weight:n},s)=>{try{let o=await r._perform(e);t[s]=Object.assign(p(e.method,{result:o}),{weight:n})}catch(r){t[s]=Object.assign(p(e.method,{error:r}),{weight:n})}});for(;;){for(let{value:e}of t.filter(e=>null!=e))if(!(e instanceof Error))return e;let e=g(this.quorum,t.filter(e=>null!=e));if((0,r.isError)(e,"INSUFFICIENT_FUNDS"))throw e;let s=n.filter((e,r)=>null==t[r]);if(0===s.length)break;await Promise.race(s)}let s=y(this.quorum,t);if((0,r.assert)(void 0!==s,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:e,results:t.map(u)}}),s instanceof Error)throw s;return s}await this.#t_();let t=new Set,n=0;for(;;){let r=this.#tI(t,e);if(null==r||(n+=r.config.weight)>=this.quorum)break}let s=await this.#tC(t,e);for(let e of t)e.perform&&null==e.result&&e.config.lateResponses++;return s}async destroy(){for(let{provider:e}of this.#tE)e.destroy();super.destroy()}}e.exports.FallbackProvider=b}),ef("bBVbj",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.NonceManager=void 0;var r=ed("49y6x"),n=ed("jHmag");class s extends n.AbstractSigner{signer;#tO;#tT;constructor(e){super(e.provider),(0,r.defineProperties)(this,{signer:e}),this.#tO=null,this.#tT=0}async getAddress(){return this.signer.getAddress()}connect(e){return new s(this.signer.connect(e))}async getNonce(e){if("pending"===e){null==this.#tO&&(this.#tO=super.getNonce("pending"));let e=this.#tT;return await this.#tO+e}return super.getNonce(e)}increment(){this.#tT++}reset(){this.#tT=0,this.#tO=null}async sendTransaction(e){let t=this.getNonce("pending");return this.increment(),(e=await this.signer.populateTransaction(e)).nonce=await t,await this.signer.sendTransaction(e)}signTransaction(e){return this.signer.signTransaction(e)}signMessage(e){return this.signer.signMessage(e)}signTypedData(e,t,r){return this.signer.signTypedData(e,t,r)}}e.exports.NonceManager=s}),ef("a7w2w",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BrowserProvider=void 0;var r=ed("49y6x"),n=ed("f0CZw");class s extends n.JsonRpcApiPollingProvider{#E;#tR;constructor(e,t,n){let s=Object.assign({},null!=n?n:{},{batchMaxCount:1});(0,r.assertArgument)(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,s),this.#tR=null,n&&n.providerInfo&&(this.#tR=n.providerInfo),this.#E=async(t,r)=>{let n={method:t,params:r};this.emit("debug",{action:"sendEip1193Request",payload:n});try{let t=await e.request(n);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(t){let e=Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=n,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}get providerInfo(){return this.#tR}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){(0,r.assertArgument)(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{let t=await this.#E(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);let t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter(t=>t.toLowerCase()===e).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#E("eth_requestAccounts",[])}catch(t){let e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}static async discover(e){if(null==e&&(e={}),e.provider)return new s(e.provider);let t=e.window?e.window:"undefined"!=typeof window?window:null;if(null==t)return null;let n=e.anyProvider;if(n&&t.ethereum)return new s(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;let o=e.timeout?e.timeout:300;return 0===o?null:await new Promise((a,l)=>{let u=[],c=e=>{u.push(e.detail),n&&d()},d=()=>{if(clearTimeout(f),u.length)if(e&&e.filter){let t=e.filter(u.map(e=>Object.assign({},e.info)));if(null==t)a(null);else if(t instanceof s)a(t);else{let e=null;if(t.uuid&&(e=u.filter(e=>t.uuid===e.info.uuid)[0]),e){let{provider:t,info:r}=e;a(new s(t,void 0,{providerInfo:r}))}else l((0,r.makeError)("filter returned unknown info","UNSUPPORTED_OPERATION",{value:t}))}}else{let{provider:e,info:t}=u[0];a(new s(e,void 0,{providerInfo:t}))}else a(null);t.removeEventListener("eip6963:announceProvider",c)},f=setTimeout(()=>{d()},o);t.addEventListener("eip6963:announceProvider",c),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}e.exports.BrowserProvider=s}),ef("fKyLA",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BlockscoutProvider=void 0;var r=ed("49y6x"),n=ed("9dQkq"),s=ed("f0CZw");class o extends s.JsonRpcProvider{apiKey;constructor(e,t){null==e&&(e="mainnet");let s=n.Network.from(e);null==t&&(t=null),super(o.getRequest(s),s,{staticNetwork:s}),(0,r.defineProperties)(this,{apiKey:t})}_getProvider(e){try{return new o(e,this.apiKey)}catch(e){}return super._getProvider(e)}isCommunityResource(){return null===this.apiKey}getRpcRequest(e){let t=super.getRpcRequest(e);return t&&"eth_estimateGas"===t.method&&1==t.args.length&&(t.args=t.args.slice(),t.args.push("latest")),t}getRpcError(e,t){let n=t?t.error:null;if(n&&-32015===n.code&&!(0,r.isHexString)(n.data||"",!0)){let e={"assert(false)":"01","arithmetic underflow or overflow":"11","division or modulo by zero":"12","out-of-bounds array access; popping on an empty array":"31","out-of-bounds access of an array or bytesN":"32"},t="";"VM execution error."===n.message?t=e[n.data]||"":e[n.message||""]&&(t=e[n.message||""]),t&&(n.message+=` (reverted: ${n.data})`,n.data="0x4e487b7100000000000000000000000000000000000000000000000000000000000000"+t)}else n&&-32e3===n.code&&"wrong transaction nonce"===n.message&&(n.message+=" (nonce too low)");return super.getRpcError(e,t)}static getRequest(e){let t=new r.FetchRequest(function(e){switch(e){case"mainnet":return"https://eth.blockscout.com/api/eth-rpc";case"sepolia":return"https://eth-sepolia.blockscout.com/api/eth-rpc";case"holesky":return"https://eth-holesky.blockscout.com/api/eth-rpc";case"classic":return"https://etc.blockscout.com/api/eth-rpc";case"arbitrum":return"https://arbitrum.blockscout.com/api/eth-rpc";case"base":return"https://base.blockscout.com/api/eth-rpc";case"base-sepolia":return"https://base-sepolia.blockscout.com/api/eth-rpc";case"matic":return"https://polygon.blockscout.com/api/eth-rpc";case"optimism":return"https://optimism.blockscout.com/api/eth-rpc";case"optimism-sepolia":return"https://optimism-sepolia.blockscout.com/api/eth-rpc";case"xdai":return"https://gnosis.blockscout.com/api/eth-rpc"}(0,r.assertArgument)(!1,"unsupported network","network",e)}(e.name));return t.allowGzip=!0,t}}e.exports.BlockscoutProvider=o}),ef("fZ0SP",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PocketProvider=void 0;var r=ed("49y6x"),n=ed("3rFUk"),s=ed("9dQkq"),o=ed("f0CZw");let a="62e1ad51b37b8e00394bda3b";class l extends o.JsonRpcProvider{applicationId;applicationSecret;constructor(e,t,n){null==e&&(e="mainnet");let o=s.Network.from(e);null==t&&(t=a),null==n&&(n=null),super(l.getRequest(o,t,n),o,{staticNetwork:o}),(0,r.defineProperties)(this,{applicationId:t,applicationSecret:n})}_getProvider(e){try{return new l(e,this.applicationId,this.applicationSecret)}catch(e){}return super._getProvider(e)}static getRequest(e,t,s){null==t&&(t=a);let o=new r.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}(0,r.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/v1/lb/${t}`);return o.allowGzip=!0,s&&o.setCredentials("",s),t===a&&(o.retryFunc=async(e,t,r)=>((0,n.showThrottleMessage)("PocketProvider"),!0)),o}isCommunityResource(){return this.applicationId===a}}e.exports.PocketProvider=l}),ef("430QS",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.IpcSocketProvider=void 0,e.exports.IpcSocketProvider=void 0}),ef("2ctgy",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Wallet=e.exports.Mnemonic=e.exports.encryptKeystoreJsonSync=e.exports.encryptKeystoreJson=e.exports.decryptKeystoreJson=e.exports.decryptKeystoreJsonSync=e.exports.isKeystoreJson=e.exports.decryptCrowdsaleJson=e.exports.isCrowdsaleJson=e.exports.HDNodeVoidWallet=e.exports.HDNodeWallet=e.exports.getIndexedAccountPath=e.exports.getAccountPath=e.exports.defaultPath=e.exports.BaseWallet=void 0;var r=ed("cNALk");Object.defineProperty(e.exports,"BaseWallet",{enumerable:!0,get:function(){return r.BaseWallet}});var n=ed("2WRKv");Object.defineProperty(e.exports,"defaultPath",{enumerable:!0,get:function(){return n.defaultPath}}),Object.defineProperty(e.exports,"getAccountPath",{enumerable:!0,get:function(){return n.getAccountPath}}),Object.defineProperty(e.exports,"getIndexedAccountPath",{enumerable:!0,get:function(){return n.getIndexedAccountPath}}),Object.defineProperty(e.exports,"HDNodeWallet",{enumerable:!0,get:function(){return n.HDNodeWallet}}),Object.defineProperty(e.exports,"HDNodeVoidWallet",{enumerable:!0,get:function(){return n.HDNodeVoidWallet}});var s=ed("hZzAM");Object.defineProperty(e.exports,"isCrowdsaleJson",{enumerable:!0,get:function(){return s.isCrowdsaleJson}}),Object.defineProperty(e.exports,"decryptCrowdsaleJson",{enumerable:!0,get:function(){return s.decryptCrowdsaleJson}});var o=ed("cIMq3");Object.defineProperty(e.exports,"isKeystoreJson",{enumerable:!0,get:function(){return o.isKeystoreJson}}),Object.defineProperty(e.exports,"decryptKeystoreJsonSync",{enumerable:!0,get:function(){return o.decryptKeystoreJsonSync}}),Object.defineProperty(e.exports,"decryptKeystoreJson",{enumerable:!0,get:function(){return o.decryptKeystoreJson}}),Object.defineProperty(e.exports,"encryptKeystoreJson",{enumerable:!0,get:function(){return o.encryptKeystoreJson}}),Object.defineProperty(e.exports,"encryptKeystoreJsonSync",{enumerable:!0,get:function(){return o.encryptKeystoreJsonSync}});var a=ed("ezv9m");Object.defineProperty(e.exports,"Mnemonic",{enumerable:!0,get:function(){return a.Mnemonic}});var l=ed("9Tqfz");Object.defineProperty(e.exports,"Wallet",{enumerable:!0,get:function(){return l.Wallet}})}),ef("cNALk",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BaseWallet=void 0;var r=ed("emjD2"),n=ed("3A2Kh"),s=ed("8d7kA"),o=ed("73u8n"),a=ed("49y6x");class l extends s.AbstractSigner{address;#tB;constructor(e,t){super(t),(0,a.assertArgument)(e&&"function"==typeof e.sign,"invalid private key","privateKey","[ REDACTED ]"),this.#tB=e;let r=(0,o.computeAddress)(this.signingKey.publicKey);(0,a.defineProperties)(this,{address:r})}get signingKey(){return this.#tB}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(e){return new l(this.#tB,e)}async signTransaction(e){e=(0,s.copyRequest)(e);let{to:t,from:n}=await (0,a.resolveProperties)({to:e.to?(0,r.resolveAddress)(e.to,this):void 0,from:e.from?(0,r.resolveAddress)(e.from,this):void 0});null!=t&&(e.to=t),null!=n&&(e.from=n),null!=e.from&&((0,a.assertArgument)((0,r.getAddress)(e.from)===this.address,"transaction from address mismatch","tx.from",e.from),delete e.from);let l=o.Transaction.from(e);return l.signature=this.signingKey.sign(l.unsignedHash),l.serialized}async signMessage(e){return this.signMessageSync(e)}signMessageSync(e){return this.signingKey.sign((0,n.hashMessage)(e)).serialized}authorizeSync(e){(0,a.assertArgument)("string"==typeof e.address,"invalid address for authorizeSync","auth.address",e);let t=this.signingKey.sign((0,n.hashAuthorization)(e));return Object.assign({},{address:(0,r.getAddress)(e.address),nonce:(0,a.getBigInt)(e.nonce||0),chainId:(0,a.getBigInt)(e.chainId||0)},{signature:t})}async authorize(e){return e=Object.assign({},e,{address:await (0,r.resolveAddress)(e.address,this)}),this.authorizeSync(await this.populateAuthorization(e))}async signTypedData(e,t,r){let s=await n.TypedDataEncoder.resolveNames(e,t,r,async e=>{(0,a.assert)(null!=this.provider,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:e}});let t=await this.provider.resolveName(e);return(0,a.assert)(null!=t,"unconfigured ENS name","UNCONFIGURED_NAME",{value:e}),t});return this.signingKey.sign(n.TypedDataEncoder.hash(s.domain,t,s.value)).serialized}}e.exports.BaseWallet=l}),ef("2WRKv",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getIndexedAccountPath=e.exports.getAccountPath=e.exports.HDNodeVoidWallet=e.exports.HDNodeWallet=e.exports.defaultPath=void 0;var r=ed("eap8h"),n=ed("8d7kA"),s=ed("73u8n"),o=ed("49y6x"),a=ed("loF6I"),l=ed("cNALk"),u=ed("ezv9m"),c=ed("cIMq3");e.exports.defaultPath="m/44'/60'/0'/0/0";let d=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),f=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");function h(e,t){let r="";for(;e;)r="0123456789abcdef"[e%16]+r,e=Math.trunc(e/16);for(;r.length<2*t;)r="0"+r;return"0x"+r}function p(e){let t=(0,o.getBytes)(e),n=(0,o.dataSlice)((0,r.sha256)((0,r.sha256)(t)),0,4),s=(0,o.concat)([t,n]);return(0,o.encodeBase58)(s)}let g={};function m(e,t,n,s){let a=new Uint8Array(37);0x80000000&e?((0,o.assert)(null!=s,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),a.set((0,o.getBytes)(s),1)):a.set((0,o.getBytes)(n));for(let t=24;t>=0;t-=8)a[33+(t>>3)]=e>>24-t&255;let l=(0,o.getBytes)((0,r.computeHmac)("sha512",t,a));return{IL:l.slice(0,32),IR:l.slice(32)}}function y(e,t){let r=t.split("/");(0,o.assertArgument)(r.length>0,"invalid path","path",t),"m"===r[0]&&((0,o.assertArgument)(0===e.depth,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${e.depth}`,"path",t),r.shift());let n=e;for(let e=0;e<r.length;e++){let t=r[e];if(t.match(/^[0-9]+'$/)){let r=parseInt(t.substring(0,t.length-1));(0,o.assertArgument)(r<0x80000000,"invalid path index",`path[${e}]`,t),n=n.deriveChild(0x80000000+r)}else if(t.match(/^[0-9]+$/)){let r=parseInt(t);(0,o.assertArgument)(r<0x80000000,"invalid path index",`path[${e}]`,t),n=n.deriveChild(r)}else(0,o.assertArgument)(!1,"invalid path component",`path[${e}]`,t)}return n}class b extends l.BaseWallet{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(e,t,n,s,a,l,u,c,d){super(t,d),(0,o.assertPrivate)(e,g,"HDNodeWallet"),(0,o.defineProperties)(this,{publicKey:t.compressedPublicKey});let f=(0,o.dataSlice)((0,r.ripemd160)((0,r.sha256)(this.publicKey)),0,4);(0,o.defineProperties)(this,{parentFingerprint:n,fingerprint:f,chainCode:s,path:a,index:l,depth:u}),(0,o.defineProperties)(this,{mnemonic:c})}connect(e){return new b(g,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,e)}#tN(){let e={address:this.address,privateKey:this.privateKey},t=this.mnemonic;return this.path&&t&&"en"===t.wordlist.locale&&""===t.password&&(e.mnemonic={path:this.path,locale:"en",entropy:t.entropy}),e}async encrypt(e,t){return await (0,c.encryptKeystoreJson)(this.#tN(),e,{progressCallback:t})}encryptSync(e){return(0,c.encryptKeystoreJsonSync)(this.#tN(),e)}get extendedKey(){return(0,o.assert)(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),p((0,o.concat)(["0x0488ADE4",h(this.depth,1),this.parentFingerprint,h(this.index,4),this.chainCode,(0,o.concat)(["0x00",this.privateKey])]))}hasPath(){return null!=this.path}neuter(){return new v(g,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(e){let t=(0,o.getNumber)(e,"index");(0,o.assertArgument)(t<=0xffffffff,"invalid index","index",t);let n=this.path;n&&(n+="/"+(0x7fffffff&t),0x80000000&t&&(n+="'"));let{IR:s,IL:a}=m(t,this.chainCode,this.publicKey,this.privateKey);return new b(g,new r.SigningKey((0,o.toBeHex)(((0,o.toBigInt)(a)+BigInt(this.privateKey))%f,32)),this.fingerprint,(0,o.hexlify)(s),n,t,this.depth+1,this.mnemonic,this.provider)}derivePath(e){return y(this,e)}static #tD(e,t){(0,o.assertArgument)((0,o.isBytesLike)(e),"invalid seed","seed","[REDACTED]");let n=(0,o.getBytes)(e,"seed");(0,o.assertArgument)(n.length>=16&&n.length<=64,"invalid seed","seed","[REDACTED]");let s=(0,o.getBytes)((0,r.computeHmac)("sha512",d,n));return new b(g,new r.SigningKey((0,o.hexlify)(s.slice(0,32))),"0x00000000",(0,o.hexlify)(s.slice(32)),"m",0,0,t,null)}static fromExtendedKey(e){let t=(0,o.toBeArray)((0,o.decodeBase58)(e));(0,o.assertArgument)(82===t.length||p(t.slice(0,78))===e,"invalid extended key","extendedKey","[ REDACTED ]");let n=t[4],a=(0,o.hexlify)(t.slice(5,9)),l=parseInt((0,o.hexlify)(t.slice(9,13)).substring(2),16),u=(0,o.hexlify)(t.slice(13,45)),c=t.slice(45,78);switch((0,o.hexlify)(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":{let e=(0,o.hexlify)(c);return new v(g,(0,s.computeAddress)(e),e,a,u,null,l,n,null)}case"0x0488ade4":case"0x04358394 ":if(0!==c[0])break;return new b(g,new r.SigningKey(c.slice(1)),a,u,null,l,n,null,null)}(0,o.assertArgument)(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(t,n,s){null==t&&(t=""),null==n&&(n=e.exports.defaultPath),null==s&&(s=a.LangEn.wordlist());let o=u.Mnemonic.fromEntropy((0,r.randomBytes)(16),t,s);return b.#tD(o.computeSeed(),o).derivePath(n)}static fromMnemonic(t,r){return r||(r=e.exports.defaultPath),b.#tD(t.computeSeed(),t).derivePath(r)}static fromPhrase(t,r,n,s){null==r&&(r=""),null==n&&(n=e.exports.defaultPath),null==s&&(s=a.LangEn.wordlist());let o=u.Mnemonic.fromPhrase(t,r,s);return b.#tD(o.computeSeed(),o).derivePath(n)}static fromSeed(e){return b.#tD(e,null)}}e.exports.HDNodeWallet=b;class v extends n.VoidSigner{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(e,t,n,s,a,l,u,c,d){super(t,d),(0,o.assertPrivate)(e,g,"HDNodeVoidWallet"),(0,o.defineProperties)(this,{publicKey:n});let f=(0,o.dataSlice)((0,r.ripemd160)((0,r.sha256)(n)),0,4);(0,o.defineProperties)(this,{publicKey:n,fingerprint:f,parentFingerprint:s,chainCode:a,path:l,index:u,depth:c})}connect(e){return new v(g,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,e)}get extendedKey(){return(0,o.assert)(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),p((0,o.concat)(["0x0488B21E",h(this.depth,1),this.parentFingerprint,h(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return null!=this.path}deriveChild(e){let t=(0,o.getNumber)(e,"index");(0,o.assertArgument)(t<=0xffffffff,"invalid index","index",t);let n=this.path;n&&(n+="/"+(0x7fffffff&t),0x80000000&t&&(n+="'"));let{IR:a,IL:l}=m(t,this.chainCode,this.publicKey,null),u=r.SigningKey.addPoints(l,this.publicKey,!0);return new v(g,(0,s.computeAddress)(u),u,this.fingerprint,(0,o.hexlify)(a),n,t,this.depth+1,this.provider)}derivePath(e){return y(this,e)}}e.exports.HDNodeVoidWallet=v,e.exports.getAccountPath=function(e){let t=(0,o.getNumber)(e,"index");return(0,o.assertArgument)(t>=0&&t<0x80000000,"invalid account index","index",t),`m/44'/60'/${t}'/0/0`},e.exports.getIndexedAccountPath=function(e){let t=(0,o.getNumber)(e,"index");return(0,o.assertArgument)(t>=0&&t<0x80000000,"invalid account index","index",t),`m/44'/60'/0'/0/${t}`}}),ef("loF6I",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.LangEn=void 0;var r=ed("hsNgL");let n=null;class s extends r.WordlistOwl{constructor(){super("en","0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO","0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60")}static wordlist(){return null==n&&(n=new s),n}}e.exports.LangEn=s}),ef("hsNgL",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.WordlistOwl=void 0;var r=ed("3A2Kh"),n=ed("49y6x"),s=ed("7V25m"),o=ed("gU8yF");class a extends o.Wordlist{#N;#tL;constructor(e,t,r){super(e),this.#N=t,this.#tL=r,this.#tM=null}get _data(){return this.#N}_decodeWords(){return(0,s.decodeOwl)(this.#N)}#tM;#tU(){if(null==this.#tM){let e=this._decodeWords();if((0,r.id)(e.join("\n")+"\n")!==this.#tL)throw Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#tM=e}return this.#tM}getWord(e){let t=this.#tU();return(0,n.assertArgument)(e>=0&&e<t.length,`invalid word index: ${e}`,"index",e),t[e]}getWordIndex(e){return this.#tU().indexOf(e)}}e.exports.WordlistOwl=a}),ef("7V25m",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decodeOwl=e.exports.decode=void 0;var r=ed("49y6x");let n=" !#$%&'()*+,-./<=>?@[]^_`{|}~",s=/^[a-z]*$/i;function o(e,t){let r=97;return e.reduce((e,n)=>(n===t?r++:n.match(s)?e.push(String.fromCharCode(r)+n):(r=97,e.push(n)),e),[])}function a(e,t){for(let r=n.length-1;r>=0;r--)e=e.split(n[r]).join(t.substring(2*r,2*r+2));let r=[],s=e.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(e,t,n,s)=>{if(n)for(let e=parseInt(n);e>=0;e--)r.push(";");else r.push(t.toLowerCase());return""});if(s)throw Error(`leftovers: ${JSON.stringify(s)}`);return o(o(r,";"),":")}e.exports.decode=a,e.exports.decodeOwl=function(e){return(0,r.assertArgument)("0"===e[0],"unsupported auwl data","data",e),a(e.substring(1+2*n.length),e.substring(1,1+2*n.length))}}),ef("gU8yF",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Wordlist=void 0;var r=ed("49y6x");e.exports.Wordlist=class{locale;constructor(e){(0,r.defineProperties)(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}}),ef("ezv9m",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Mnemonic=void 0;var r=ed("eap8h"),n=ed("49y6x"),s=ed("loF6I");function o(e){return(1<<e)-1<<8-e&255}function a(e,t){(0,n.assertNormalize)("NFKD"),null==t&&(t=s.LangEn.wordlist());let a=t.split(e);(0,n.assertArgument)(a.length%3==0&&a.length>=12&&a.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");let l=new Uint8Array(Math.ceil(11*a.length/8)),u=0;for(let e=0;e<a.length;e++){let r=t.getWordIndex(a[e].normalize("NFKD"));(0,n.assertArgument)(r>=0,`invalid mnemonic word at index ${e}`,"mnemonic","[ REDACTED ]");for(let e=0;e<11;e++)r&1<<10-e&&(l[u>>3]|=1<<7-u%8),u++}let c=32*a.length/3,d=o(a.length/3),f=(0,n.getBytes)((0,r.sha256)(l.slice(0,c/8)))[0]&d;return(0,n.assertArgument)(f===(l[l.length-1]&d),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),(0,n.hexlify)(l.slice(0,c/8))}function l(e,t){(0,n.assertArgument)(e.length%4==0&&e.length>=16&&e.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),null==t&&(t=s.LangEn.wordlist());let a=[0],l=11;for(let t=0;t<e.length;t++)l>8?(a[a.length-1]<<=8,a[a.length-1]|=e[t],l-=8):(a[a.length-1]<<=l,a[a.length-1]|=e[t]>>8-l,a.push(e[t]&((1<<8-l)-1&255)),l+=3);let u=e.length/4,c=parseInt((0,r.sha256)(e).substring(2,4),16)&o(u);return a[a.length-1]<<=u,a[a.length-1]|=c>>8-u,t.join(a.map(e=>t.getWord(e)))}let u={};class c{phrase;password;wordlist;entropy;constructor(e,t,r,o,a){null==o&&(o=""),null==a&&(a=s.LangEn.wordlist()),(0,n.assertPrivate)(e,u,"Mnemonic"),(0,n.defineProperties)(this,{phrase:r,password:o,wordlist:a,entropy:t})}computeSeed(){let e=(0,n.toUtf8Bytes)("mnemonic"+this.password,"NFKD");return(0,r.pbkdf2)((0,n.toUtf8Bytes)(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,r){let s=a(e,r);return e=l((0,n.getBytes)(s),r),new c(u,s,e,t,r)}static fromEntropy(e,t,r){let s=(0,n.getBytes)(e,"entropy"),o=l(s,r);return new c(u,(0,n.hexlify)(s),o,t,r)}static entropyToPhrase(e,t){return l((0,n.getBytes)(e,"entropy"),t)}static phraseToEntropy(e,t){return a(e,t)}static isValidMnemonic(e,t){try{return a(e,t),!0}catch(e){}return!1}}e.exports.Mnemonic=c}),ef("cIMq3",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encryptKeystoreJson=e.exports.encryptKeystoreJsonSync=e.exports.decryptKeystoreJson=e.exports.decryptKeystoreJsonSync=e.exports.isKeystoreJson=void 0,ed("jJNkF");var r=ed("iyqRZ"),n=ed("emjD2"),s=ed("eap8h"),o=ed("73u8n"),a=ed("49y6x"),l=ed("6XF0D"),u=ed("cxVTs");let c="m/44'/60'/0'/0/0";function d(e,t){let u=(0,a.getBytes)(t),d=(0,l.spelunk)(e,"crypto.ciphertext:data!"),f=(0,a.hexlify)((0,s.keccak256)((0,a.concat)([u.slice(16,32),d]))).substring(2);(0,a.assertArgument)(f===(0,l.spelunk)(e,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");let h=function(e,t,n){if("aes-128-ctr"===(0,l.spelunk)(e,"crypto.cipher:string")){let s=(0,l.spelunk)(e,"crypto.cipherparams.iv:data!"),o=new r.CTR(t,s);return(0,a.hexlify)(o.decrypt(n))}(0,a.assert)(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}(e,u.slice(0,16),d),p=(0,o.computeAddress)(h);if(e.address){let t=e.address.toLowerCase();t.startsWith("0x")||(t="0x"+t),(0,a.assertArgument)((0,n.getAddress)(t)===p,"keystore address/privateKey mismatch","address",e.address)}let g={address:p,privateKey:h};if("0.1"===(0,l.spelunk)(e,"x-ethers.version:string")){let t=u.slice(32,64),n=(0,l.spelunk)(e,"x-ethers.mnemonicCiphertext:data!"),s=(0,l.spelunk)(e,"x-ethers.mnemonicCounter:data!"),o=new r.CTR(t,s);g.mnemonic={path:(0,l.spelunk)(e,"x-ethers.path:string")||c,locale:(0,l.spelunk)(e,"x-ethers.locale:string")||"en",entropy:(0,a.hexlify)((0,a.getBytes)(o.decrypt(n)))}}return g}function f(e){let t=(0,l.spelunk)(e,"crypto.kdf:string");if(t&&"string"==typeof t){if("scrypt"===t.toLowerCase()){let r=(0,l.spelunk)(e,"crypto.kdfparams.salt:data!"),n=(0,l.spelunk)(e,"crypto.kdfparams.n:int!"),s=(0,l.spelunk)(e,"crypto.kdfparams.r:int!"),o=(0,l.spelunk)(e,"crypto.kdfparams.p:int!");(0,a.assertArgument)(n>0&&(n&n-1)==0,"invalid kdf.N","kdf.N",n),(0,a.assertArgument)(s>0&&o>0,"invalid kdf","kdf",t);let u=(0,l.spelunk)(e,"crypto.kdfparams.dklen:int!");return(0,a.assertArgument)(32===u,"invalid kdf.dklen","kdf.dflen",u),{name:"scrypt",salt:r,N:n,r:s,p:o,dkLen:64}}else if("pbkdf2"===t.toLowerCase()){let t=(0,l.spelunk)(e,"crypto.kdfparams.salt:data!"),r=(0,l.spelunk)(e,"crypto.kdfparams.prf:string!"),n=r.split("-").pop();(0,a.assertArgument)("sha256"===n||"sha512"===n,"invalid kdf.pdf","kdf.pdf",r);let s=(0,l.spelunk)(e,"crypto.kdfparams.c:int!"),o=(0,l.spelunk)(e,"crypto.kdfparams.dklen:int!");return(0,a.assertArgument)(32===o,"invalid kdf.dklen","kdf.dklen",o),{name:"pbkdf2",salt:t,count:s,dkLen:o,algorithm:n}}}(0,a.assertArgument)(!1,"unsupported key-derivation function","kdf",t)}function h(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}async function p(e,t,r){let n=JSON.parse(e),o=(0,l.getPassword)(t),u=f(n);if("pbkdf2"===u.name){r&&(r(0),await h(0));let{salt:e,count:t,dkLen:a,algorithm:l}=u,c=(0,s.pbkdf2)(o,e,t,a,l);return r&&(r(1),await h(0)),d(n,c)}(0,a.assert)("scrypt"===u.name,"cannot be reached","UNKNOWN_ERROR",{params:u});let{salt:c,N:p,r:g,p:m,dkLen:y}=u;return d(n,await (0,s.scrypt)(o,c,p,g,m,y,r))}function g(e){let t=null!=e.salt?(0,a.getBytes)(e.salt,"options.salt"):(0,s.randomBytes)(32),r=131072,n=8,o=1;return e.scrypt&&(e.scrypt.N&&(r=e.scrypt.N),e.scrypt.r&&(n=e.scrypt.r),e.scrypt.p&&(o=e.scrypt.p)),(0,a.assertArgument)("number"==typeof r&&r>0&&Number.isSafeInteger(r)&&(BigInt(r)&BigInt(r-1))===BigInt(0),"invalid scrypt N parameter","options.N",r),(0,a.assertArgument)("number"==typeof n&&n>0&&Number.isSafeInteger(n),"invalid scrypt r parameter","options.r",n),(0,a.assertArgument)("number"==typeof o&&o>0&&Number.isSafeInteger(o),"invalid scrypt p parameter","options.p",o),{name:"scrypt",dkLen:32,salt:t,N:r,r:n,p:o}}function m(e,t,n,o){let d=(0,a.getBytes)(n.privateKey,"privateKey"),f=null!=o.iv?(0,a.getBytes)(o.iv,"options.iv"):(0,s.randomBytes)(16);(0,a.assertArgument)(16===f.length,"invalid options.iv length","options.iv",o.iv);let h=null!=o.uuid?(0,a.getBytes)(o.uuid,"options.uuid"):(0,s.randomBytes)(16);(0,a.assertArgument)(16===h.length,"invalid options.uuid length","options.uuid",o.iv);let p=e.slice(0,16),g=e.slice(16,32),m=new r.CTR(p,f),y=(0,a.getBytes)(m.encrypt(d)),b=(0,s.keccak256)((0,a.concat)([g,y])),v={address:n.address.substring(2).toLowerCase(),id:(0,a.uuidV4)(h),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:(0,a.hexlify)(f).substring(2)},ciphertext:(0,a.hexlify)(y).substring(2),kdf:"scrypt",kdfparams:{salt:(0,a.hexlify)(t.salt).substring(2),n:t.N,dklen:32,p:t.p,r:t.r},mac:b.substring(2)}};if(n.mnemonic){let t=null!=o.client?o.client:`ethers/${u.version}`,d=n.mnemonic.path||c,f=n.mnemonic.locale||"en",h=e.slice(32,64),p=(0,a.getBytes)(n.mnemonic.entropy,"account.mnemonic.entropy"),g=(0,s.randomBytes)(16),m=new r.CTR(h,g),y=(0,a.getBytes)(m.encrypt(p)),b=new Date,x="UTC--"+(b.getUTCFullYear()+"-"+(0,l.zpad)(b.getUTCMonth()+1,2)+"-"+(0,l.zpad)(b.getUTCDate(),2)+"T"+(0,l.zpad)(b.getUTCHours(),2)+"-"+(0,l.zpad)(b.getUTCMinutes(),2)+"-"+(0,l.zpad)(b.getUTCSeconds(),2))+".0Z--"+v.address;v["x-ethers"]={client:t,gethFilename:x,path:d,locale:f,mnemonicCounter:(0,a.hexlify)(g).substring(2),mnemonicCiphertext:(0,a.hexlify)(y).substring(2),version:"0.1"}}return JSON.stringify(v)}async function y(e,t,r){null==r&&(r={});let n=(0,l.getPassword)(t),o=g(r),u=await (0,s.scrypt)(n,o.salt,o.N,o.r,o.p,64,r.progressCallback);return m((0,a.getBytes)(u),o,e,r)}e.exports.isKeystoreJson=function(e){try{let t=JSON.parse(e),r=null!=t.version?parseInt(t.version):0;if(3===r)return!0}catch(e){}return!1},e.exports.decryptKeystoreJsonSync=function(e,t){let r=JSON.parse(e),n=(0,l.getPassword)(t),o=f(r);if("pbkdf2"===o.name){let{salt:e,count:t,dkLen:a,algorithm:l}=o;return d(r,(0,s.pbkdf2)(n,e,t,a,l))}(0,a.assert)("scrypt"===o.name,"cannot be reached","UNKNOWN_ERROR",{params:o});let{salt:u,N:c,r:h,p:p,dkLen:g}=o;return d(r,(0,s.scryptSync)(n,u,c,h,p,g))},e.exports.decryptKeystoreJson=p,e.exports.encryptKeystoreJsonSync=function(e,t,r){null==r&&(r={});let n=(0,l.getPassword)(t),o=g(r),u=(0,s.scryptSync)(n,o.salt,o.N,o.r,o.p,64);return m((0,a.getBytes)(u),o,e,r)},e.exports.encryptKeystoreJson=y}),ef("jJNkF",function(e,r){t(e.exports,"CBC",function(){return ed("4YnQP").CBC}),t(e.exports,"CTR",function(){return ed("iyqRZ").CTR}),t(e.exports,"pkcs7Strip",function(){return ed("evYsa").pkcs7Strip}),ed("jCAgV"),ed("9F3VN"),ed("4YnQP"),ed("5zk4Q"),ed("iyqRZ"),ed("6ln50"),ed("2KiSV"),ed("evYsa")}),ef("jCAgV",function(e,r){t(e.exports,"AES",function(){return I});var n,s,o,a=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},l=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};let u={16:10,24:12,32:14},c=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],d=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],h=[0xc66363a5,0xf87c7c84,0xee777799,0xf67b7b8d,0xfff2f20d,0xd66b6bbd,0xde6f6fb1,0x91c5c554,0x60303050,0x2010103,0xce6767a9,0x562b2b7d,0xe7fefe19,0xb5d7d762,0x4dababe6,0xec76769a,0x8fcaca45,0x1f82829d,0x89c9c940,0xfa7d7d87,0xeffafa15,0xb25959eb,0x8e4747c9,0xfbf0f00b,0x41adadec,0xb3d4d467,0x5fa2a2fd,0x45afafea,0x239c9cbf,0x53a4a4f7,0xe4727296,0x9bc0c05b,0x75b7b7c2,0xe1fdfd1c,0x3d9393ae,0x4c26266a,0x6c36365a,0x7e3f3f41,0xf5f7f702,0x83cccc4f,0x6834345c,0x51a5a5f4,0xd1e5e534,0xf9f1f108,0xe2717193,0xabd8d873,0x62313153,0x2a15153f,0x804040c,0x95c7c752,0x46232365,0x9dc3c35e,0x30181828,0x379696a1,0xa05050f,0x2f9a9ab5,0xe070709,0x24121236,0x1b80809b,0xdfe2e23d,0xcdebeb26,0x4e272769,0x7fb2b2cd,0xea75759f,0x1209091b,0x1d83839e,0x582c2c74,0x341a1a2e,0x361b1b2d,0xdc6e6eb2,0xb45a5aee,0x5ba0a0fb,0xa45252f6,0x763b3b4d,0xb7d6d661,0x7db3b3ce,0x5229297b,0xdde3e33e,0x5e2f2f71,0x13848497,0xa65353f5,0xb9d1d168,0,0xc1eded2c,0x40202060,0xe3fcfc1f,0x79b1b1c8,0xb65b5bed,0xd46a6abe,0x8dcbcb46,0x67bebed9,0x7239394b,0x944a4ade,0x984c4cd4,0xb05858e8,0x85cfcf4a,0xbbd0d06b,0xc5efef2a,0x4faaaae5,0xedfbfb16,0x864343c5,0x9a4d4dd7,0x66333355,0x11858594,0x8a4545cf,0xe9f9f910,0x4020206,0xfe7f7f81,0xa05050f0,0x783c3c44,0x259f9fba,0x4ba8a8e3,0xa25151f3,0x5da3a3fe,0x804040c0,0x58f8f8a,0x3f9292ad,0x219d9dbc,0x70383848,0xf1f5f504,0x63bcbcdf,0x77b6b6c1,0xafdada75,0x42212163,0x20101030,0xe5ffff1a,0xfdf3f30e,0xbfd2d26d,0x81cdcd4c,0x180c0c14,0x26131335,0xc3ecec2f,0xbe5f5fe1,0x359797a2,0x884444cc,0x2e171739,0x93c4c457,0x55a7a7f2,0xfc7e7e82,0x7a3d3d47,0xc86464ac,0xba5d5de7,0x3219192b,0xe6737395,0xc06060a0,0x19818198,0x9e4f4fd1,0xa3dcdc7f,0x44222266,0x542a2a7e,0x3b9090ab,0xb888883,0x8c4646ca,0xc7eeee29,0x6bb8b8d3,0x2814143c,0xa7dede79,0xbc5e5ee2,0x160b0b1d,0xaddbdb76,0xdbe0e03b,0x64323256,0x743a3a4e,0x140a0a1e,0x924949db,0xc06060a,0x4824246c,0xb85c5ce4,0x9fc2c25d,0xbdd3d36e,0x43acacef,0xc46262a6,0x399191a8,0x319595a4,0xd3e4e437,0xf279798b,0xd5e7e732,0x8bc8c843,0x6e373759,0xda6d6db7,0x18d8d8c,0xb1d5d564,0x9c4e4ed2,0x49a9a9e0,0xd86c6cb4,0xac5656fa,0xf3f4f407,0xcfeaea25,0xca6565af,0xf47a7a8e,0x47aeaee9,0x10080818,0x6fbabad5,0xf0787888,0x4a25256f,0x5c2e2e72,0x381c1c24,0x57a6a6f1,0x73b4b4c7,0x97c6c651,0xcbe8e823,0xa1dddd7c,0xe874749c,0x3e1f1f21,0x964b4bdd,0x61bdbddc,0xd8b8b86,0xf8a8a85,0xe0707090,0x7c3e3e42,0x71b5b5c4,0xcc6666aa,0x904848d8,0x6030305,0xf7f6f601,0x1c0e0e12,0xc26161a3,0x6a35355f,0xae5757f9,0x69b9b9d0,0x17868691,0x99c1c158,0x3a1d1d27,0x279e9eb9,0xd9e1e138,0xebf8f813,0x2b9898b3,0x22111133,0xd26969bb,0xa9d9d970,0x78e8e89,0x339494a7,0x2d9b9bb6,0x3c1e1e22,0x15878792,0xc9e9e920,0x87cece49,0xaa5555ff,0x50282878,0xa5dfdf7a,0x38c8c8f,0x59a1a1f8,0x9898980,0x1a0d0d17,0x65bfbfda,0xd7e6e631,0x844242c6,0xd06868b8,0x824141c3,0x299999b0,0x5a2d2d77,0x1e0f0f11,0x7bb0b0cb,0xa85454fc,0x6dbbbbd6,0x2c16163a],p=[0xa5c66363,0x84f87c7c,0x99ee7777,0x8df67b7b,0xdfff2f2,0xbdd66b6b,0xb1de6f6f,0x5491c5c5,0x50603030,0x3020101,0xa9ce6767,0x7d562b2b,0x19e7fefe,0x62b5d7d7,0xe64dabab,0x9aec7676,0x458fcaca,0x9d1f8282,0x4089c9c9,0x87fa7d7d,0x15effafa,0xebb25959,0xc98e4747,0xbfbf0f0,0xec41adad,0x67b3d4d4,0xfd5fa2a2,0xea45afaf,0xbf239c9c,0xf753a4a4,0x96e47272,0x5b9bc0c0,0xc275b7b7,0x1ce1fdfd,0xae3d9393,0x6a4c2626,0x5a6c3636,0x417e3f3f,0x2f5f7f7,0x4f83cccc,0x5c683434,0xf451a5a5,0x34d1e5e5,0x8f9f1f1,0x93e27171,0x73abd8d8,0x53623131,0x3f2a1515,0xc080404,0x5295c7c7,0x65462323,0x5e9dc3c3,0x28301818,0xa1379696,0xf0a0505,0xb52f9a9a,0x90e0707,0x36241212,0x9b1b8080,0x3ddfe2e2,0x26cdebeb,0x694e2727,0xcd7fb2b2,0x9fea7575,0x1b120909,0x9e1d8383,0x74582c2c,0x2e341a1a,0x2d361b1b,0xb2dc6e6e,0xeeb45a5a,0xfb5ba0a0,0xf6a45252,0x4d763b3b,0x61b7d6d6,0xce7db3b3,0x7b522929,0x3edde3e3,0x715e2f2f,0x97138484,0xf5a65353,0x68b9d1d1,0,0x2cc1eded,0x60402020,0x1fe3fcfc,0xc879b1b1,0xedb65b5b,0xbed46a6a,0x468dcbcb,0xd967bebe,0x4b723939,0xde944a4a,0xd4984c4c,0xe8b05858,0x4a85cfcf,0x6bbbd0d0,0x2ac5efef,0xe54faaaa,0x16edfbfb,0xc5864343,0xd79a4d4d,0x55663333,0x94118585,0xcf8a4545,0x10e9f9f9,0x6040202,0x81fe7f7f,0xf0a05050,0x44783c3c,0xba259f9f,0xe34ba8a8,0xf3a25151,0xfe5da3a3,0xc0804040,0x8a058f8f,0xad3f9292,0xbc219d9d,0x48703838,0x4f1f5f5,0xdf63bcbc,0xc177b6b6,0x75afdada,0x63422121,0x30201010,0x1ae5ffff,0xefdf3f3,0x6dbfd2d2,0x4c81cdcd,0x14180c0c,0x35261313,0x2fc3ecec,0xe1be5f5f,0xa2359797,0xcc884444,0x392e1717,0x5793c4c4,0xf255a7a7,0x82fc7e7e,0x477a3d3d,0xacc86464,0xe7ba5d5d,0x2b321919,0x95e67373,0xa0c06060,0x98198181,0xd19e4f4f,0x7fa3dcdc,0x66442222,0x7e542a2a,0xab3b9090,0x830b8888,0xca8c4646,0x29c7eeee,0xd36bb8b8,0x3c281414,0x79a7dede,0xe2bc5e5e,0x1d160b0b,0x76addbdb,0x3bdbe0e0,0x56643232,0x4e743a3a,0x1e140a0a,0xdb924949,0xa0c0606,0x6c482424,0xe4b85c5c,0x5d9fc2c2,0x6ebdd3d3,0xef43acac,0xa6c46262,0xa8399191,0xa4319595,0x37d3e4e4,0x8bf27979,0x32d5e7e7,0x438bc8c8,0x596e3737,0xb7da6d6d,0x8c018d8d,0x64b1d5d5,0xd29c4e4e,0xe049a9a9,0xb4d86c6c,0xfaac5656,0x7f3f4f4,0x25cfeaea,0xafca6565,0x8ef47a7a,0xe947aeae,0x18100808,0xd56fbaba,0x88f07878,0x6f4a2525,0x725c2e2e,0x24381c1c,0xf157a6a6,0xc773b4b4,0x5197c6c6,0x23cbe8e8,0x7ca1dddd,0x9ce87474,0x213e1f1f,0xdd964b4b,0xdc61bdbd,0x860d8b8b,0x850f8a8a,0x90e07070,0x427c3e3e,0xc471b5b5,0xaacc6666,0xd8904848,0x5060303,0x1f7f6f6,0x121c0e0e,0xa3c26161,0x5f6a3535,0xf9ae5757,0xd069b9b9,0x91178686,0x5899c1c1,0x273a1d1d,0xb9279e9e,0x38d9e1e1,0x13ebf8f8,0xb32b9898,0x33221111,0xbbd26969,0x70a9d9d9,0x89078e8e,0xa7339494,0xb62d9b9b,0x223c1e1e,0x92158787,0x20c9e9e9,0x4987cece,0xffaa5555,0x78502828,0x7aa5dfdf,0x8f038c8c,0xf859a1a1,0x80098989,0x171a0d0d,0xda65bfbf,0x31d7e6e6,0xc6844242,0xb8d06868,0xc3824141,0xb0299999,0x775a2d2d,0x111e0f0f,0xcb7bb0b0,0xfca85454,0xd66dbbbb,0x3a2c1616],g=[0x63a5c663,0x7c84f87c,0x7799ee77,0x7b8df67b,0xf20dfff2,0x6bbdd66b,0x6fb1de6f,0xc55491c5,0x30506030,0x1030201,0x67a9ce67,0x2b7d562b,0xfe19e7fe,0xd762b5d7,0xabe64dab,0x769aec76,0xca458fca,0x829d1f82,0xc94089c9,0x7d87fa7d,0xfa15effa,0x59ebb259,0x47c98e47,0xf00bfbf0,0xadec41ad,0xd467b3d4,0xa2fd5fa2,0xafea45af,0x9cbf239c,0xa4f753a4,0x7296e472,0xc05b9bc0,0xb7c275b7,0xfd1ce1fd,0x93ae3d93,0x266a4c26,0x365a6c36,0x3f417e3f,0xf702f5f7,0xcc4f83cc,0x345c6834,0xa5f451a5,0xe534d1e5,0xf108f9f1,0x7193e271,0xd873abd8,0x31536231,0x153f2a15,0x40c0804,0xc75295c7,0x23654623,0xc35e9dc3,0x18283018,0x96a13796,0x50f0a05,0x9ab52f9a,0x7090e07,0x12362412,0x809b1b80,0xe23ddfe2,0xeb26cdeb,0x27694e27,0xb2cd7fb2,0x759fea75,0x91b1209,0x839e1d83,0x2c74582c,0x1a2e341a,0x1b2d361b,0x6eb2dc6e,0x5aeeb45a,0xa0fb5ba0,0x52f6a452,0x3b4d763b,0xd661b7d6,0xb3ce7db3,0x297b5229,0xe33edde3,0x2f715e2f,0x84971384,0x53f5a653,0xd168b9d1,0,0xed2cc1ed,0x20604020,0xfc1fe3fc,0xb1c879b1,0x5bedb65b,0x6abed46a,0xcb468dcb,0xbed967be,0x394b7239,0x4ade944a,0x4cd4984c,0x58e8b058,0xcf4a85cf,0xd06bbbd0,0xef2ac5ef,0xaae54faa,0xfb16edfb,0x43c58643,0x4dd79a4d,0x33556633,0x85941185,0x45cf8a45,0xf910e9f9,0x2060402,0x7f81fe7f,0x50f0a050,0x3c44783c,0x9fba259f,0xa8e34ba8,0x51f3a251,0xa3fe5da3,0x40c08040,0x8f8a058f,0x92ad3f92,0x9dbc219d,0x38487038,0xf504f1f5,0xbcdf63bc,0xb6c177b6,0xda75afda,0x21634221,0x10302010,0xff1ae5ff,0xf30efdf3,0xd26dbfd2,0xcd4c81cd,0xc14180c,0x13352613,0xec2fc3ec,0x5fe1be5f,0x97a23597,0x44cc8844,0x17392e17,0xc45793c4,0xa7f255a7,0x7e82fc7e,0x3d477a3d,0x64acc864,0x5de7ba5d,0x192b3219,0x7395e673,0x60a0c060,0x81981981,0x4fd19e4f,0xdc7fa3dc,0x22664422,0x2a7e542a,0x90ab3b90,0x88830b88,0x46ca8c46,0xee29c7ee,0xb8d36bb8,0x143c2814,0xde79a7de,0x5ee2bc5e,0xb1d160b,0xdb76addb,0xe03bdbe0,0x32566432,0x3a4e743a,0xa1e140a,0x49db9249,0x60a0c06,0x246c4824,0x5ce4b85c,0xc25d9fc2,0xd36ebdd3,0xacef43ac,0x62a6c462,0x91a83991,0x95a43195,0xe437d3e4,0x798bf279,0xe732d5e7,0xc8438bc8,0x37596e37,0x6db7da6d,0x8d8c018d,0xd564b1d5,0x4ed29c4e,0xa9e049a9,0x6cb4d86c,0x56faac56,0xf407f3f4,0xea25cfea,0x65afca65,0x7a8ef47a,0xaee947ae,0x8181008,0xbad56fba,0x7888f078,0x256f4a25,0x2e725c2e,0x1c24381c,0xa6f157a6,0xb4c773b4,0xc65197c6,0xe823cbe8,0xdd7ca1dd,0x749ce874,0x1f213e1f,0x4bdd964b,0xbddc61bd,0x8b860d8b,0x8a850f8a,0x7090e070,0x3e427c3e,0xb5c471b5,0x66aacc66,0x48d89048,0x3050603,0xf601f7f6,0xe121c0e,0x61a3c261,0x355f6a35,0x57f9ae57,0xb9d069b9,0x86911786,0xc15899c1,0x1d273a1d,0x9eb9279e,0xe138d9e1,0xf813ebf8,0x98b32b98,0x11332211,0x69bbd269,0xd970a9d9,0x8e89078e,0x94a73394,0x9bb62d9b,0x1e223c1e,0x87921587,0xe920c9e9,0xce4987ce,0x55ffaa55,0x28785028,0xdf7aa5df,0x8c8f038c,0xa1f859a1,0x89800989,0xd171a0d,0xbfda65bf,0xe631d7e6,0x42c68442,0x68b8d068,0x41c38241,0x99b02999,0x2d775a2d,0xf111e0f,0xb0cb7bb0,0x54fca854,0xbbd66dbb,0x163a2c16],m=[0x6363a5c6,0x7c7c84f8,0x777799ee,0x7b7b8df6,0xf2f20dff,0x6b6bbdd6,0x6f6fb1de,0xc5c55491,0x30305060,0x1010302,0x6767a9ce,0x2b2b7d56,0xfefe19e7,0xd7d762b5,0xababe64d,0x76769aec,0xcaca458f,0x82829d1f,0xc9c94089,0x7d7d87fa,0xfafa15ef,0x5959ebb2,0x4747c98e,0xf0f00bfb,0xadadec41,0xd4d467b3,0xa2a2fd5f,0xafafea45,0x9c9cbf23,0xa4a4f753,0x727296e4,0xc0c05b9b,0xb7b7c275,0xfdfd1ce1,0x9393ae3d,0x26266a4c,0x36365a6c,0x3f3f417e,0xf7f702f5,0xcccc4f83,0x34345c68,0xa5a5f451,0xe5e534d1,0xf1f108f9,0x717193e2,0xd8d873ab,0x31315362,0x15153f2a,0x4040c08,0xc7c75295,0x23236546,0xc3c35e9d,0x18182830,0x9696a137,0x5050f0a,0x9a9ab52f,0x707090e,0x12123624,0x80809b1b,0xe2e23ddf,0xebeb26cd,0x2727694e,0xb2b2cd7f,0x75759fea,0x9091b12,0x83839e1d,0x2c2c7458,0x1a1a2e34,0x1b1b2d36,0x6e6eb2dc,0x5a5aeeb4,0xa0a0fb5b,0x5252f6a4,0x3b3b4d76,0xd6d661b7,0xb3b3ce7d,0x29297b52,0xe3e33edd,0x2f2f715e,0x84849713,0x5353f5a6,0xd1d168b9,0,0xeded2cc1,0x20206040,0xfcfc1fe3,0xb1b1c879,0x5b5bedb6,0x6a6abed4,0xcbcb468d,0xbebed967,0x39394b72,0x4a4ade94,0x4c4cd498,0x5858e8b0,0xcfcf4a85,0xd0d06bbb,0xefef2ac5,0xaaaae54f,0xfbfb16ed,0x4343c586,0x4d4dd79a,0x33335566,0x85859411,0x4545cf8a,0xf9f910e9,0x2020604,0x7f7f81fe,0x5050f0a0,0x3c3c4478,0x9f9fba25,0xa8a8e34b,0x5151f3a2,0xa3a3fe5d,0x4040c080,0x8f8f8a05,0x9292ad3f,0x9d9dbc21,0x38384870,0xf5f504f1,0xbcbcdf63,0xb6b6c177,0xdada75af,0x21216342,0x10103020,0xffff1ae5,0xf3f30efd,0xd2d26dbf,0xcdcd4c81,0xc0c1418,0x13133526,0xecec2fc3,0x5f5fe1be,0x9797a235,0x4444cc88,0x1717392e,0xc4c45793,0xa7a7f255,0x7e7e82fc,0x3d3d477a,0x6464acc8,0x5d5de7ba,0x19192b32,0x737395e6,0x6060a0c0,0x81819819,0x4f4fd19e,0xdcdc7fa3,0x22226644,0x2a2a7e54,0x9090ab3b,0x8888830b,0x4646ca8c,0xeeee29c7,0xb8b8d36b,0x14143c28,0xdede79a7,0x5e5ee2bc,0xb0b1d16,0xdbdb76ad,0xe0e03bdb,0x32325664,0x3a3a4e74,0xa0a1e14,0x4949db92,0x6060a0c,0x24246c48,0x5c5ce4b8,0xc2c25d9f,0xd3d36ebd,0xacacef43,0x6262a6c4,0x9191a839,0x9595a431,0xe4e437d3,0x79798bf2,0xe7e732d5,0xc8c8438b,0x3737596e,0x6d6db7da,0x8d8d8c01,0xd5d564b1,0x4e4ed29c,0xa9a9e049,0x6c6cb4d8,0x5656faac,0xf4f407f3,0xeaea25cf,0x6565afca,0x7a7a8ef4,0xaeaee947,0x8081810,0xbabad56f,0x787888f0,0x25256f4a,0x2e2e725c,0x1c1c2438,0xa6a6f157,0xb4b4c773,0xc6c65197,0xe8e823cb,0xdddd7ca1,0x74749ce8,0x1f1f213e,0x4b4bdd96,0xbdbddc61,0x8b8b860d,0x8a8a850f,0x707090e0,0x3e3e427c,0xb5b5c471,0x6666aacc,0x4848d890,0x3030506,0xf6f601f7,0xe0e121c,0x6161a3c2,0x35355f6a,0x5757f9ae,0xb9b9d069,0x86869117,0xc1c15899,0x1d1d273a,0x9e9eb927,0xe1e138d9,0xf8f813eb,0x9898b32b,0x11113322,0x6969bbd2,0xd9d970a9,0x8e8e8907,0x9494a733,0x9b9bb62d,0x1e1e223c,0x87879215,0xe9e920c9,0xcece4987,0x5555ffaa,0x28287850,0xdfdf7aa5,0x8c8c8f03,0xa1a1f859,0x89898009,0xd0d171a,0xbfbfda65,0xe6e631d7,0x4242c684,0x6868b8d0,0x4141c382,0x9999b029,0x2d2d775a,0xf0f111e,0xb0b0cb7b,0x5454fca8,0xbbbbd66d,0x16163a2c],y=[0x51f4a750,0x7e416553,0x1a17a4c3,0x3a275e96,0x3bab6bcb,0x1f9d45f1,0xacfa58ab,0x4be30393,0x2030fa55,0xad766df6,0x88cc7691,0xf5024c25,0x4fe5d7fc,0xc52acbd7,0x26354480,0xb562a38f,0xdeb15a49,0x25ba1b67,0x45ea0e98,0x5dfec0e1,0xc32f7502,0x814cf012,0x8d4697a3,0x6bd3f9c6,0x38f5fe7,0x15929c95,0xbf6d7aeb,0x955259da,0xd4be832d,0x587421d3,0x49e06929,0x8ec9c844,0x75c2896a,0xf48e7978,0x99583e6b,0x27b971dd,0xbee14fb6,0xf088ad17,0xc920ac66,0x7dce3ab4,0x63df4a18,0xe51a3182,0x97513360,0x62537f45,0xb16477e0,0xbb6bae84,0xfe81a01c,0xf9082b94,0x70486858,0x8f45fd19,0x94de6c87,0x527bf8b7,0xab73d323,0x724b02e2,0xe31f8f57,0x6655ab2a,0xb2eb2807,0x2fb5c203,0x86c57b9a,0xd33708a5,0x302887f2,0x23bfa5b2,0x2036aba,0xed16825c,0x8acf1c2b,0xa779b492,0xf307f2f0,0x4e69e2a1,0x65daf4cd,0x605bed5,0xd134621f,0xc4a6fe8a,0x342e539d,0xa2f355a0,0x58ae132,0xa4f6eb75,0xb83ec39,0x4060efaa,0x5e719f06,0xbd6e1051,0x3e218af9,0x96dd063d,0xdd3e05ae,0x4de6bd46,0x91548db5,0x71c45d05,0x406d46f,0x605015ff,0x1998fb24,0xd6bde997,0x894043cc,0x67d99e77,0xb0e842bd,0x7898b88,0xe7195b38,0x79c8eedb,0xa17c0a47,0x7c420fe9,0xf8841ec9,0,0x9808683,0x322bed48,0x1e1170ac,0x6c5a724e,0xfd0efffb,0xf853856,0x3daed51e,0x362d3927,0xa0fd964,0x685ca621,0x9b5b54d1,0x24362e3a,0xc0a67b1,0x9357e70f,0xb4ee96d2,0x1b9b919e,0x80c0c54f,0x61dc20a2,0x5a774b69,0x1c121a16,0xe293ba0a,0xc0a02ae5,0x3c22e043,0x121b171d,0xe090d0b,0xf28bc7ad,0x2db6a8b9,0x141ea9c8,0x57f11985,0xaf75074c,0xee99ddbb,0xa37f60fd,0xf701269f,0x5c72f5bc,0x44663bc5,0x5bfb7e34,0x8b432976,0xcb23c6dc,0xb6edfc68,0xb8e4f163,0xd731dcca,0x42638510,0x13972240,0x84c61120,0x854a247d,0xd2bb3df8,0xaef93211,0xc729a16d,0x1d9e2f4b,0xdcb230f3,0xd8652ec,0x77c1e3d0,0x2bb3166c,0xa970b999,0x119448fa,0x47e96422,0xa8fc8cc4,0xa0f03f1a,0x567d2cd8,0x223390ef,0x87494ec7,0xd938d1c1,0x8ccaa2fe,0x98d40b36,0xa6f581cf,0xa57ade28,0xdab78e26,0x3fadbfa4,0x2c3a9de4,0x5078920d,0x6a5fcc9b,0x547e4662,0xf68d13c2,0x90d8b8e8,0x2e39f75e,0x82c3aff5,0x9f5d80be,0x69d0937c,0x6fd52da9,0xcf2512b3,0xc8ac993b,0x10187da7,0xe89c636e,0xdb3bbb7b,0xcd267809,0x6e5918f4,0xec9ab701,0x834f9aa8,0xe6956e65,0xaaffe67e,0x21bccf08,0xef15e8e6,0xbae79bd9,0x4a6f36ce,0xea9f09d4,0x29b07cd6,0x31a4b2af,0x2a3f2331,0xc6a59430,0x35a266c0,0x744ebc37,0xfc82caa6,0xe090d0b0,0x33a7d815,0xf104984a,0x41ecdaf7,0x7fcd500e,0x1791f62f,0x764dd68d,0x43efb04d,0xccaa4d54,0xe49604df,0x9ed1b5e3,0x4c6a881b,0xc12c1fb8,0x4665517f,0x9d5eea04,0x18c355d,0xfa877473,0xfb0b412e,0xb3671d5a,0x92dbd252,0xe9105633,0x6dd64713,0x9ad7618c,0x37a10c7a,0x59f8148e,0xeb133c89,0xcea927ee,0xb761c935,0xe11ce5ed,0x7a47b13c,0x9cd2df59,0x55f2733f,0x1814ce79,0x73c737bf,0x53f7cdea,0x5ffdaa5b,0xdf3d6f14,0x7844db86,0xcaaff381,0xb968c43e,0x3824342c,0xc2a3405f,0x161dc372,0xbce2250c,0x283c498b,0xff0d9541,0x39a80171,0x80cb3de,0xd8b4e49c,0x6456c190,0x7bcb8461,0xd532b670,0x486c5c74,0xd0b85742],b=[0x5051f4a7,0x537e4165,0xc31a17a4,0x963a275e,0xcb3bab6b,0xf11f9d45,0xabacfa58,0x934be303,0x552030fa,0xf6ad766d,0x9188cc76,0x25f5024c,0xfc4fe5d7,0xd7c52acb,0x80263544,0x8fb562a3,0x49deb15a,0x6725ba1b,0x9845ea0e,0xe15dfec0,0x2c32f75,0x12814cf0,0xa38d4697,0xc66bd3f9,0xe7038f5f,0x9515929c,0xebbf6d7a,0xda955259,0x2dd4be83,0xd3587421,0x2949e069,0x448ec9c8,0x6a75c289,0x78f48e79,0x6b99583e,0xdd27b971,0xb6bee14f,0x17f088ad,0x66c920ac,0xb47dce3a,0x1863df4a,0x82e51a31,0x60975133,0x4562537f,0xe0b16477,0x84bb6bae,0x1cfe81a0,0x94f9082b,0x58704868,0x198f45fd,0x8794de6c,0xb7527bf8,0x23ab73d3,0xe2724b02,0x57e31f8f,0x2a6655ab,0x7b2eb28,0x32fb5c2,0x9a86c57b,0xa5d33708,0xf2302887,0xb223bfa5,0xba02036a,0x5ced1682,0x2b8acf1c,0x92a779b4,0xf0f307f2,0xa14e69e2,0xcd65daf4,0xd50605be,0x1fd13462,0x8ac4a6fe,0x9d342e53,0xa0a2f355,0x32058ae1,0x75a4f6eb,0x390b83ec,0xaa4060ef,0x65e719f,0x51bd6e10,0xf93e218a,0x3d96dd06,0xaedd3e05,0x464de6bd,0xb591548d,0x571c45d,0x6f0406d4,0xff605015,0x241998fb,0x97d6bde9,0xcc894043,0x7767d99e,0xbdb0e842,0x8807898b,0x38e7195b,0xdb79c8ee,0x47a17c0a,0xe97c420f,0xc9f8841e,0,0x83098086,0x48322bed,0xac1e1170,0x4e6c5a72,0xfbfd0eff,0x560f8538,0x1e3daed5,0x27362d39,0x640a0fd9,0x21685ca6,0xd19b5b54,0x3a24362e,0xb10c0a67,0xf9357e7,0xd2b4ee96,0x9e1b9b91,0x4f80c0c5,0xa261dc20,0x695a774b,0x161c121a,0xae293ba,0xe5c0a02a,0x433c22e0,0x1d121b17,0xb0e090d,0xadf28bc7,0xb92db6a8,0xc8141ea9,0x8557f119,0x4caf7507,0xbbee99dd,0xfda37f60,0x9ff70126,0xbc5c72f5,0xc544663b,0x345bfb7e,0x768b4329,0xdccb23c6,0x68b6edfc,0x63b8e4f1,0xcad731dc,0x10426385,0x40139722,0x2084c611,0x7d854a24,0xf8d2bb3d,0x11aef932,0x6dc729a1,0x4b1d9e2f,0xf3dcb230,0xec0d8652,0xd077c1e3,0x6c2bb316,0x99a970b9,0xfa119448,0x2247e964,0xc4a8fc8c,0x1aa0f03f,0xd8567d2c,0xef223390,0xc787494e,0xc1d938d1,0xfe8ccaa2,0x3698d40b,0xcfa6f581,0x28a57ade,0x26dab78e,0xa43fadbf,0xe42c3a9d,0xd507892,0x9b6a5fcc,0x62547e46,0xc2f68d13,0xe890d8b8,0x5e2e39f7,0xf582c3af,0xbe9f5d80,0x7c69d093,0xa96fd52d,0xb3cf2512,0x3bc8ac99,0xa710187d,0x6ee89c63,0x7bdb3bbb,0x9cd2678,0xf46e5918,0x1ec9ab7,0xa8834f9a,0x65e6956e,0x7eaaffe6,0x821bccf,0xe6ef15e8,0xd9bae79b,0xce4a6f36,0xd4ea9f09,0xd629b07c,0xaf31a4b2,0x312a3f23,0x30c6a594,0xc035a266,0x37744ebc,0xa6fc82ca,0xb0e090d0,0x1533a7d8,0x4af10498,0xf741ecda,0xe7fcd50,0x2f1791f6,0x8d764dd6,0x4d43efb0,0x54ccaa4d,0xdfe49604,0xe39ed1b5,0x1b4c6a88,0xb8c12c1f,0x7f466551,0x49d5eea,0x5d018c35,0x73fa8774,0x2efb0b41,0x5ab3671d,0x5292dbd2,0x33e91056,0x136dd647,0x8c9ad761,0x7a37a10c,0x8e59f814,0x89eb133c,0xeecea927,0x35b761c9,0xede11ce5,0x3c7a47b1,0x599cd2df,0x3f55f273,0x791814ce,0xbf73c737,0xea53f7cd,0x5b5ffdaa,0x14df3d6f,0x867844db,0x81caaff3,0x3eb968c4,0x2c382434,0x5fc2a340,0x72161dc3,0xcbce225,0x8b283c49,0x41ff0d95,0x7139a801,0xde080cb3,0x9cd8b4e4,0x906456c1,0x617bcb84,0x70d532b6,0x74486c5c,0x42d0b857],v=[0xa75051f4,0x65537e41,0xa4c31a17,0x5e963a27,0x6bcb3bab,0x45f11f9d,0x58abacfa,0x3934be3,0xfa552030,0x6df6ad76,0x769188cc,0x4c25f502,0xd7fc4fe5,0xcbd7c52a,0x44802635,0xa38fb562,0x5a49deb1,0x1b6725ba,0xe9845ea,0xc0e15dfe,0x7502c32f,0xf012814c,0x97a38d46,0xf9c66bd3,0x5fe7038f,0x9c951592,0x7aebbf6d,0x59da9552,0x832dd4be,0x21d35874,0x692949e0,0xc8448ec9,0x896a75c2,0x7978f48e,1047239e3,0x71dd27b9,0x4fb6bee1,0xad17f088,0xac66c920,0x3ab47dce,0x4a1863df,0x3182e51a,0x33609751,0x7f456253,0x77e0b164,0xae84bb6b,0xa01cfe81,0x2b94f908,0x68587048,0xfd198f45,0x6c8794de,0xf8b7527b,0xd323ab73,0x2e2724b,0x8f57e31f,0xab2a6655,0x2807b2eb,0xc2032fb5,0x7b9a86c5,0x8a5d337,0x87f23028,0xa5b223bf,0x6aba0203,0x825ced16,0x1c2b8acf,0xb492a779,0xf2f0f307,0xe2a14e69,0xf4cd65da,0xbed50605,0x621fd134,0xfe8ac4a6,0x539d342e,0x55a0a2f3,0xe132058a,0xeb75a4f6,0xec390b83,0xefaa4060,0x9f065e71,0x1051bd6e,0x8af93e21,0x63d96dd,0x5aedd3e,0xbd464de6,0x8db59154,0x5d0571c4,0xd46f0406,0x15ff6050,0xfb241998,0xe997d6bd,0x43cc8940,0x9e7767d9,0x42bdb0e8,0x8b880789,0x5b38e719,0xeedb79c8,0xa47a17c,0xfe97c42,0x1ec9f884,0,0x86830980,0xed48322b,0x70ac1e11,0x724e6c5a,0xfffbfd0e,0x38560f85,0xd51e3dae,0x3927362d,0xd9640a0f,0xa621685c,0x54d19b5b,0x2e3a2436,0x67b10c0a,0xe70f9357,0x96d2b4ee,0x919e1b9b,0xc54f80c0,0x20a261dc,0x4b695a77,0x1a161c12,0xba0ae293,0x2ae5c0a0,0xe0433c22,0x171d121b,0xd0b0e09,0xc7adf28b,0xa8b92db6,0xa9c8141e,0x198557f1,0x74caf75,0xddbbee99,0x60fda37f,0x269ff701,0xf5bc5c72,0x3bc54466,0x7e345bfb,0x29768b43,0xc6dccb23,0xfc68b6ed,0xf163b8e4,0xdccad731,0x85104263,0x22401397,0x112084c6,0x247d854a,0x3df8d2bb,0x3211aef9,0xa16dc729,0x2f4b1d9e,0x30f3dcb2,0x52ec0d86,0xe3d077c1,0x166c2bb3,0xb999a970,0x48fa1194,0x642247e9,0x8cc4a8fc,0x3f1aa0f0,0x2cd8567d,0x90ef2233,0x4ec78749,0xd1c1d938,0xa2fe8cca,0xb3698d4,0x81cfa6f5,0xde28a57a,0x8e26dab7,0xbfa43fad,0x9de42c3a,0x920d5078,0xcc9b6a5f,0x4662547e,0x13c2f68d,0xb8e890d8,0xf75e2e39,0xaff582c3,0x80be9f5d,0x937c69d0,0x2da96fd5,0x12b3cf25,0x993bc8ac,0x7da71018,0x636ee89c,0xbb7bdb3b,0x7809cd26,0x18f46e59,0xb701ec9a,0x9aa8834f,0x6e65e695,0xe67eaaff,0xcf0821bc,0xe8e6ef15,0x9bd9bae7,0x36ce4a6f,0x9d4ea9f,0x7cd629b0,0xb2af31a4,0x23312a3f,0x9430c6a5,0x66c035a2,0xbc37744e,0xcaa6fc82,0xd0b0e090,0xd81533a7,0x984af104,0xdaf741ec,0x500e7fcd,0xf62f1791,0xd68d764d,0xb04d43ef,0x4d54ccaa,0x4dfe496,0xb5e39ed1,0x881b4c6a,0x1fb8c12c,0x517f4665,0xea049d5e,0x355d018c,0x7473fa87,0x412efb0b,0x1d5ab367,0xd25292db,0x5633e910,0x47136dd6,0x618c9ad7,0xc7a37a1,0x148e59f8,0x3c89eb13,0x27eecea9,0xc935b761,0xe5ede11c,0xb13c7a47,0xdf599cd2,0x733f55f2,0xce791814,0x37bf73c7,0xcdea53f7,0xaa5b5ffd,0x6f14df3d,0xdb867844,0xf381caaf,0xc43eb968,0x342c3824,0x405fc2a3,0xc372161d,0x250cbce2,0x498b283c,0x9541ff0d,0x17139a8,0xb3de080c,0xe49cd8b4,0xc1906456,0x84617bcb,0xb670d532,0x5c74486c,0x5742d0b8],x=[0xf4a75051,0x4165537e,0x17a4c31a,0x275e963a,0xab6bcb3b,0x9d45f11f,0xfa58abac,0xe303934b,0x30fa5520,0x766df6ad,0xcc769188,0x24c25f5,0xe5d7fc4f,0x2acbd7c5,0x35448026,0x62a38fb5,0xb15a49de,0xba1b6725,0xea0e9845,0xfec0e15d,0x2f7502c3,0x4cf01281,0x4697a38d,0xd3f9c66b,0x8f5fe703,0x929c9515,0x6d7aebbf,0x5259da95,0xbe832dd4,0x7421d358,0xe0692949,0xc9c8448e,0xc2896a75,0x8e7978f4,0x583e6b99,0xb971dd27,0xe14fb6be,0x88ad17f0,0x20ac66c9,0xce3ab47d,0xdf4a1863,0x1a3182e5,0x51336097,0x537f4562,0x6477e0b1,0x6bae84bb,0x81a01cfe,0x82b94f9,0x48685870,0x45fd198f,0xde6c8794,0x7bf8b752,0x73d323ab,0x4b02e272,0x1f8f57e3,0x55ab2a66,0xeb2807b2,0xb5c2032f,0xc57b9a86,0x3708a5d3,679998e3,0xbfa5b223,0x36aba02,0x16825ced,0xcf1c2b8a,0x79b492a7,0x7f2f0f3,0x69e2a14e,0xdaf4cd65,0x5bed506,0x34621fd1,0xa6fe8ac4,0x2e539d34,0xf355a0a2,0x8ae13205,0xf6eb75a4,0x83ec390b,0x60efaa40,0x719f065e,0x6e1051bd,0x218af93e,0xdd063d96,0x3e05aedd,0xe6bd464d,0x548db591,0xc45d0571,0x6d46f04,0x5015ff60,0x98fb2419,0xbde997d6,0x4043cc89,0xd99e7767,0xe842bdb0,0x898b8807,0x195b38e7,0xc8eedb79,0x7c0a47a1,0x420fe97c,0x841ec9f8,0,0x80868309,0x2bed4832,0x1170ac1e,0x5a724e6c,0xefffbfd,0x8538560f,0xaed51e3d,0x2d392736,0xfd9640a,0x5ca62168,0x5b54d19b,0x362e3a24,0xa67b10c,0x57e70f93,0xee96d2b4,0x9b919e1b,0xc0c54f80,0xdc20a261,0x774b695a,0x121a161c,0x93ba0ae2,0xa02ae5c0,0x22e0433c,0x1b171d12,0x90d0b0e,0x8bc7adf2,0xb6a8b92d,0x1ea9c814,0xf1198557,0x75074caf,0x99ddbbee,0x7f60fda3,0x1269ff7,0x72f5bc5c,0x663bc544,0xfb7e345b,0x4329768b,0x23c6dccb,0xedfc68b6,0xe4f163b8,0x31dccad7,0x63851042,0x97224013,0xc6112084,0x4a247d85,0xbb3df8d2,0xf93211ae,0x29a16dc7,0x9e2f4b1d,0xb230f3dc,0x8652ec0d,0xc1e3d077,0xb3166c2b,0x70b999a9,0x9448fa11,0xe9642247,0xfc8cc4a8,0xf03f1aa0,0x7d2cd856,0x3390ef22,0x494ec787,0x38d1c1d9,0xcaa2fe8c,0xd40b3698,0xf581cfa6,0x7ade28a5,0xb78e26da,0xadbfa43f,0x3a9de42c,0x78920d50,0x5fcc9b6a,0x7e466254,0x8d13c2f6,0xd8b8e890,0x39f75e2e,0xc3aff582,0x5d80be9f,0xd0937c69,0xd52da96f,0x2512b3cf,0xac993bc8,0x187da710,0x9c636ee8,0x3bbb7bdb,0x267809cd,0x5918f46e,0x9ab701ec,0x4f9aa883,0x956e65e6,0xffe67eaa,0xbccf0821,0x15e8e6ef,0xe79bd9ba,0x6f36ce4a,0x9f09d4ea,0xb07cd629,0xa4b2af31,0x3f23312a,0xa59430c6,0xa266c035,0x4ebc3774,0x82caa6fc,0x90d0b0e0,0xa7d81533,0x4984af1,0xecdaf741,0xcd500e7f,0x91f62f17,0x4dd68d76,0xefb04d43,0xaa4d54cc,0x9604dfe4,0xd1b5e39e,0x6a881b4c,0x2c1fb8c1,0x65517f46,0x5eea049d,0x8c355d01,0x877473fa,0xb412efb,0x671d5ab3,0xdbd25292,0x105633e9,0xd647136d,0xd7618c9a,0xa10c7a37,0xf8148e59,0x133c89eb,0xa927eece,0x61c935b7,0x1ce5ede1,0x47b13c7a,0xd2df599c,0xf2733f55,0x14ce7918,0xc737bf73,0xf7cdea53,0xfdaa5b5f,0x3d6f14df,0x44db8678,0xaff381ca,0x68c43eb9,0x24342c38,0xa3405fc2,0x1dc37216,0xe2250cbc,0x3c498b28,0xd9541ff,0xa8017139,0xcb3de08,0xb4e49cd8,0x56c19064,0xcb84617b,0x32b670d5,0x6c5c7448,0xb85742d0],w=[0,0xe090d0b,0x1c121a16,0x121b171d,0x3824342c,0x362d3927,0x24362e3a,0x2a3f2331,0x70486858,0x7e416553,0x6c5a724e,0x62537f45,0x486c5c74,0x4665517f,0x547e4662,0x5a774b69,0xe090d0b0,0xee99ddbb,0xfc82caa6,0xf28bc7ad,0xd8b4e49c,0xd6bde997,0xc4a6fe8a,0xcaaff381,0x90d8b8e8,0x9ed1b5e3,0x8ccaa2fe,0x82c3aff5,0xa8fc8cc4,0xa6f581cf,0xb4ee96d2,0xbae79bd9,0xdb3bbb7b,0xd532b670,0xc729a16d,0xc920ac66,0xe31f8f57,0xed16825c,0xff0d9541,0xf104984a,0xab73d323,0xa57ade28,0xb761c935,0xb968c43e,0x9357e70f,0x9d5eea04,0x8f45fd19,0x814cf012,0x3bab6bcb,0x35a266c0,0x27b971dd,0x29b07cd6,0x38f5fe7,0xd8652ec,0x1f9d45f1,0x119448fa,0x4be30393,0x45ea0e98,0x57f11985,0x59f8148e,0x73c737bf,0x7dce3ab4,0x6fd52da9,0x61dc20a2,0xad766df6,0xa37f60fd,0xb16477e0,0xbf6d7aeb,0x955259da,0x9b5b54d1,0x894043cc,0x87494ec7,0xdd3e05ae,0xd33708a5,0xc12c1fb8,0xcf2512b3,0xe51a3182,0xeb133c89,0xf9082b94,0xf701269f,0x4de6bd46,0x43efb04d,0x51f4a750,0x5ffdaa5b,0x75c2896a,0x7bcb8461,0x69d0937c,0x67d99e77,0x3daed51e,0x33a7d815,0x21bccf08,0x2fb5c203,0x58ae132,0xb83ec39,0x1998fb24,0x1791f62f,0x764dd68d,0x7844db86,0x6a5fcc9b,0x6456c190,0x4e69e2a1,0x4060efaa,0x527bf8b7,0x5c72f5bc,0x605bed5,0x80cb3de,0x1a17a4c3,0x141ea9c8,0x3e218af9,0x302887f2,0x223390ef,0x2c3a9de4,0x96dd063d,0x98d40b36,0x8acf1c2b,0x84c61120,0xaef93211,0xa0f03f1a,0xb2eb2807,0xbce2250c,0xe6956e65,0xe89c636e,0xfa877473,0xf48e7978,0xdeb15a49,0xd0b85742,0xc2a3405f,0xccaa4d54,0x41ecdaf7,0x4fe5d7fc,0x5dfec0e1,0x53f7cdea,0x79c8eedb,0x77c1e3d0,0x65daf4cd,0x6bd3f9c6,0x31a4b2af,0x3fadbfa4,0x2db6a8b9,0x23bfa5b2,0x9808683,0x7898b88,0x15929c95,0x1b9b919e,0xa17c0a47,0xaf75074c,0xbd6e1051,0xb3671d5a,0x99583e6b,0x97513360,0x854a247d,0x8b432976,0xd134621f,0xdf3d6f14,0xcd267809,0xc32f7502,0xe9105633,0xe7195b38,0xf5024c25,0xfb0b412e,0x9ad7618c,0x94de6c87,0x86c57b9a,0x88cc7691,0xa2f355a0,0xacfa58ab,0xbee14fb6,0xb0e842bd,0xea9f09d4,0xe49604df,0xf68d13c2,0xf8841ec9,0xd2bb3df8,0xdcb230f3,0xcea927ee,0xc0a02ae5,0x7a47b13c,0x744ebc37,0x6655ab2a,0x685ca621,0x42638510,0x4c6a881b,0x5e719f06,0x5078920d,0xa0fd964,0x406d46f,0x161dc372,0x1814ce79,0x322bed48,0x3c22e043,0x2e39f75e,0x2030fa55,0xec9ab701,0xe293ba0a,0xf088ad17,0xfe81a01c,0xd4be832d,0xdab78e26,0xc8ac993b,0xc6a59430,0x9cd2df59,0x92dbd252,0x80c0c54f,0x8ec9c844,0xa4f6eb75,0xaaffe67e,0xb8e4f163,0xb6edfc68,0xc0a67b1,0x2036aba,0x10187da7,0x1e1170ac,0x342e539d,0x3a275e96,0x283c498b,0x26354480,0x7c420fe9,0x724b02e2,0x605015ff,0x6e5918f4,0x44663bc5,0x4a6f36ce,0x587421d3,0x567d2cd8,0x37a10c7a,0x39a80171,0x2bb3166c,0x25ba1b67,0xf853856,0x18c355d,0x13972240,0x1d9e2f4b,0x47e96422,0x49e06929,0x5bfb7e34,0x55f2733f,0x7fcd500e,0x71c45d05,0x63df4a18,0x6dd64713,0xd731dcca,0xd938d1c1,0xcb23c6dc,0xc52acbd7,0xef15e8e6,0xe11ce5ed,0xf307f2f0,0xfd0efffb,0xa779b492,0xa970b999,0xbb6bae84,0xb562a38f,0x9f5d80be,0x91548db5,0x834f9aa8,0x8d4697a3],E=[0,0xb0e090d,0x161c121a,0x1d121b17,0x2c382434,0x27362d39,0x3a24362e,0x312a3f23,0x58704868,0x537e4165,0x4e6c5a72,0x4562537f,0x74486c5c,0x7f466551,0x62547e46,0x695a774b,0xb0e090d0,0xbbee99dd,0xa6fc82ca,0xadf28bc7,0x9cd8b4e4,0x97d6bde9,0x8ac4a6fe,0x81caaff3,0xe890d8b8,0xe39ed1b5,0xfe8ccaa2,0xf582c3af,0xc4a8fc8c,0xcfa6f581,0xd2b4ee96,0xd9bae79b,0x7bdb3bbb,0x70d532b6,0x6dc729a1,0x66c920ac,0x57e31f8f,0x5ced1682,0x41ff0d95,0x4af10498,0x23ab73d3,0x28a57ade,0x35b761c9,0x3eb968c4,0xf9357e7,0x49d5eea,0x198f45fd,0x12814cf0,0xcb3bab6b,0xc035a266,0xdd27b971,0xd629b07c,0xe7038f5f,0xec0d8652,0xf11f9d45,0xfa119448,0x934be303,0x9845ea0e,0x8557f119,0x8e59f814,0xbf73c737,0xb47dce3a,0xa96fd52d,0xa261dc20,0xf6ad766d,0xfda37f60,0xe0b16477,0xebbf6d7a,0xda955259,0xd19b5b54,0xcc894043,0xc787494e,0xaedd3e05,0xa5d33708,0xb8c12c1f,0xb3cf2512,0x82e51a31,0x89eb133c,0x94f9082b,0x9ff70126,0x464de6bd,0x4d43efb0,0x5051f4a7,0x5b5ffdaa,0x6a75c289,0x617bcb84,0x7c69d093,0x7767d99e,0x1e3daed5,0x1533a7d8,0x821bccf,0x32fb5c2,0x32058ae1,0x390b83ec,0x241998fb,0x2f1791f6,0x8d764dd6,0x867844db,0x9b6a5fcc,0x906456c1,0xa14e69e2,0xaa4060ef,0xb7527bf8,0xbc5c72f5,0xd50605be,0xde080cb3,0xc31a17a4,0xc8141ea9,0xf93e218a,0xf2302887,0xef223390,0xe42c3a9d,0x3d96dd06,0x3698d40b,0x2b8acf1c,0x2084c611,0x11aef932,0x1aa0f03f,0x7b2eb28,0xcbce225,0x65e6956e,0x6ee89c63,0x73fa8774,0x78f48e79,0x49deb15a,0x42d0b857,0x5fc2a340,0x54ccaa4d,0xf741ecda,0xfc4fe5d7,0xe15dfec0,0xea53f7cd,0xdb79c8ee,0xd077c1e3,0xcd65daf4,0xc66bd3f9,0xaf31a4b2,0xa43fadbf,0xb92db6a8,0xb223bfa5,0x83098086,0x8807898b,0x9515929c,0x9e1b9b91,0x47a17c0a,0x4caf7507,0x51bd6e10,0x5ab3671d,0x6b99583e,0x60975133,0x7d854a24,0x768b4329,0x1fd13462,0x14df3d6f,0x9cd2678,0x2c32f75,0x33e91056,0x38e7195b,0x25f5024c,0x2efb0b41,0x8c9ad761,0x8794de6c,0x9a86c57b,0x9188cc76,0xa0a2f355,0xabacfa58,0xb6bee14f,0xbdb0e842,0xd4ea9f09,0xdfe49604,0xc2f68d13,0xc9f8841e,0xf8d2bb3d,0xf3dcb230,0xeecea927,0xe5c0a02a,0x3c7a47b1,0x37744ebc,0x2a6655ab,0x21685ca6,0x10426385,0x1b4c6a88,0x65e719f,0xd507892,0x640a0fd9,0x6f0406d4,0x72161dc3,0x791814ce,0x48322bed,0x433c22e0,0x5e2e39f7,0x552030fa,0x1ec9ab7,0xae293ba,0x17f088ad,0x1cfe81a0,0x2dd4be83,0x26dab78e,0x3bc8ac99,0x30c6a594,0x599cd2df,0x5292dbd2,0x4f80c0c5,0x448ec9c8,0x75a4f6eb,0x7eaaffe6,0x63b8e4f1,0x68b6edfc,0xb10c0a67,0xba02036a,0xa710187d,0xac1e1170,0x9d342e53,0x963a275e,0x8b283c49,0x80263544,0xe97c420f,0xe2724b02,0xff605015,0xf46e5918,0xc544663b,0xce4a6f36,0xd3587421,0xd8567d2c,0x7a37a10c,0x7139a801,0x6c2bb316,0x6725ba1b,0x560f8538,0x5d018c35,0x40139722,0x4b1d9e2f,0x2247e964,0x2949e069,0x345bfb7e,0x3f55f273,0xe7fcd50,0x571c45d,0x1863df4a,0x136dd647,0xcad731dc,0xc1d938d1,0xdccb23c6,0xd7c52acb,0xe6ef15e8,0xede11ce5,0xf0f307f2,0xfbfd0eff,0x92a779b4,0x99a970b9,0x84bb6bae,0x8fb562a3,0xbe9f5d80,0xb591548d,0xa8834f9a,0xa38d4697],A=[0,0xd0b0e09,0x1a161c12,0x171d121b,0x342c3824,0x3927362d,0x2e3a2436,0x23312a3f,0x68587048,0x65537e41,0x724e6c5a,0x7f456253,0x5c74486c,0x517f4665,0x4662547e,0x4b695a77,0xd0b0e090,0xddbbee99,0xcaa6fc82,0xc7adf28b,0xe49cd8b4,0xe997d6bd,0xfe8ac4a6,0xf381caaf,0xb8e890d8,0xb5e39ed1,0xa2fe8cca,0xaff582c3,0x8cc4a8fc,0x81cfa6f5,0x96d2b4ee,0x9bd9bae7,0xbb7bdb3b,0xb670d532,0xa16dc729,0xac66c920,0x8f57e31f,0x825ced16,0x9541ff0d,0x984af104,0xd323ab73,0xde28a57a,0xc935b761,0xc43eb968,0xe70f9357,0xea049d5e,0xfd198f45,0xf012814c,0x6bcb3bab,0x66c035a2,0x71dd27b9,0x7cd629b0,0x5fe7038f,0x52ec0d86,0x45f11f9d,0x48fa1194,0x3934be3,0xe9845ea,0x198557f1,0x148e59f8,0x37bf73c7,0x3ab47dce,0x2da96fd5,0x20a261dc,0x6df6ad76,0x60fda37f,0x77e0b164,0x7aebbf6d,0x59da9552,0x54d19b5b,0x43cc8940,0x4ec78749,0x5aedd3e,0x8a5d337,0x1fb8c12c,0x12b3cf25,0x3182e51a,0x3c89eb13,0x2b94f908,0x269ff701,0xbd464de6,0xb04d43ef,0xa75051f4,0xaa5b5ffd,0x896a75c2,0x84617bcb,0x937c69d0,0x9e7767d9,0xd51e3dae,0xd81533a7,0xcf0821bc,0xc2032fb5,0xe132058a,0xec390b83,0xfb241998,0xf62f1791,0xd68d764d,0xdb867844,0xcc9b6a5f,0xc1906456,0xe2a14e69,0xefaa4060,0xf8b7527b,0xf5bc5c72,0xbed50605,0xb3de080c,0xa4c31a17,0xa9c8141e,0x8af93e21,0x87f23028,0x90ef2233,0x9de42c3a,0x63d96dd,0xb3698d4,0x1c2b8acf,0x112084c6,0x3211aef9,0x3f1aa0f0,0x2807b2eb,0x250cbce2,0x6e65e695,0x636ee89c,0x7473fa87,0x7978f48e,0x5a49deb1,0x5742d0b8,0x405fc2a3,0x4d54ccaa,0xdaf741ec,0xd7fc4fe5,0xc0e15dfe,0xcdea53f7,0xeedb79c8,0xe3d077c1,0xf4cd65da,0xf9c66bd3,0xb2af31a4,0xbfa43fad,0xa8b92db6,0xa5b223bf,0x86830980,0x8b880789,0x9c951592,0x919e1b9b,0xa47a17c,0x74caf75,0x1051bd6e,0x1d5ab367,1047239e3,0x33609751,0x247d854a,0x29768b43,0x621fd134,0x6f14df3d,0x7809cd26,0x7502c32f,0x5633e910,0x5b38e719,0x4c25f502,0x412efb0b,0x618c9ad7,0x6c8794de,0x7b9a86c5,0x769188cc,0x55a0a2f3,0x58abacfa,0x4fb6bee1,0x42bdb0e8,0x9d4ea9f,0x4dfe496,0x13c2f68d,0x1ec9f884,0x3df8d2bb,0x30f3dcb2,0x27eecea9,0x2ae5c0a0,0xb13c7a47,0xbc37744e,0xab2a6655,0xa621685c,0x85104263,0x881b4c6a,0x9f065e71,0x920d5078,0xd9640a0f,0xd46f0406,0xc372161d,0xce791814,0xed48322b,0xe0433c22,0xf75e2e39,0xfa552030,0xb701ec9a,0xba0ae293,0xad17f088,0xa01cfe81,0x832dd4be,0x8e26dab7,0x993bc8ac,0x9430c6a5,0xdf599cd2,0xd25292db,0xc54f80c0,0xc8448ec9,0xeb75a4f6,0xe67eaaff,0xf163b8e4,0xfc68b6ed,0x67b10c0a,0x6aba0203,0x7da71018,0x70ac1e11,0x539d342e,0x5e963a27,0x498b283c,0x44802635,0xfe97c42,0x2e2724b,0x15ff6050,0x18f46e59,0x3bc54466,0x36ce4a6f,0x21d35874,0x2cd8567d,0xc7a37a1,0x17139a8,0x166c2bb3,0x1b6725ba,0x38560f85,0x355d018c,0x22401397,0x2f4b1d9e,0x642247e9,0x692949e0,0x7e345bfb,0x733f55f2,0x500e7fcd,0x5d0571c4,0x4a1863df,0x47136dd6,0xdccad731,0xd1c1d938,0xc6dccb23,0xcbd7c52a,0xe8e6ef15,0xe5ede11c,0xf2f0f307,0xfffbfd0e,0xb492a779,0xb999a970,0xae84bb6b,0xa38fb562,0x80be9f5d,0x8db59154,0x9aa8834f,0x97a38d46],S=[0,0x90d0b0e,0x121a161c,0x1b171d12,0x24342c38,0x2d392736,0x362e3a24,0x3f23312a,0x48685870,0x4165537e,0x5a724e6c,0x537f4562,0x6c5c7448,0x65517f46,0x7e466254,0x774b695a,0x90d0b0e0,0x99ddbbee,0x82caa6fc,0x8bc7adf2,0xb4e49cd8,0xbde997d6,0xa6fe8ac4,0xaff381ca,0xd8b8e890,0xd1b5e39e,0xcaa2fe8c,0xc3aff582,0xfc8cc4a8,0xf581cfa6,0xee96d2b4,0xe79bd9ba,0x3bbb7bdb,0x32b670d5,0x29a16dc7,0x20ac66c9,0x1f8f57e3,0x16825ced,0xd9541ff,0x4984af1,0x73d323ab,0x7ade28a5,0x61c935b7,0x68c43eb9,0x57e70f93,0x5eea049d,0x45fd198f,0x4cf01281,0xab6bcb3b,0xa266c035,0xb971dd27,0xb07cd629,0x8f5fe703,0x8652ec0d,0x9d45f11f,0x9448fa11,0xe303934b,0xea0e9845,0xf1198557,0xf8148e59,0xc737bf73,0xce3ab47d,0xd52da96f,0xdc20a261,0x766df6ad,0x7f60fda3,0x6477e0b1,0x6d7aebbf,0x5259da95,0x5b54d19b,0x4043cc89,0x494ec787,0x3e05aedd,0x3708a5d3,0x2c1fb8c1,0x2512b3cf,0x1a3182e5,0x133c89eb,0x82b94f9,0x1269ff7,0xe6bd464d,0xefb04d43,0xf4a75051,0xfdaa5b5f,0xc2896a75,0xcb84617b,0xd0937c69,0xd99e7767,0xaed51e3d,0xa7d81533,0xbccf0821,0xb5c2032f,0x8ae13205,0x83ec390b,0x98fb2419,0x91f62f17,0x4dd68d76,0x44db8678,0x5fcc9b6a,0x56c19064,0x69e2a14e,0x60efaa40,0x7bf8b752,0x72f5bc5c,0x5bed506,0xcb3de08,0x17a4c31a,0x1ea9c814,0x218af93e,679998e3,0x3390ef22,0x3a9de42c,0xdd063d96,0xd40b3698,0xcf1c2b8a,0xc6112084,0xf93211ae,0xf03f1aa0,0xeb2807b2,0xe2250cbc,0x956e65e6,0x9c636ee8,0x877473fa,0x8e7978f4,0xb15a49de,0xb85742d0,0xa3405fc2,0xaa4d54cc,0xecdaf741,0xe5d7fc4f,0xfec0e15d,0xf7cdea53,0xc8eedb79,0xc1e3d077,0xdaf4cd65,0xd3f9c66b,0xa4b2af31,0xadbfa43f,0xb6a8b92d,0xbfa5b223,0x80868309,0x898b8807,0x929c9515,0x9b919e1b,0x7c0a47a1,0x75074caf,0x6e1051bd,0x671d5ab3,0x583e6b99,0x51336097,0x4a247d85,0x4329768b,0x34621fd1,0x3d6f14df,0x267809cd,0x2f7502c3,0x105633e9,0x195b38e7,0x24c25f5,0xb412efb,0xd7618c9a,0xde6c8794,0xc57b9a86,0xcc769188,0xf355a0a2,0xfa58abac,0xe14fb6be,0xe842bdb0,0x9f09d4ea,0x9604dfe4,0x8d13c2f6,0x841ec9f8,0xbb3df8d2,0xb230f3dc,0xa927eece,0xa02ae5c0,0x47b13c7a,0x4ebc3774,0x55ab2a66,0x5ca62168,0x63851042,0x6a881b4c,0x719f065e,0x78920d50,0xfd9640a,0x6d46f04,0x1dc37216,0x14ce7918,0x2bed4832,0x22e0433c,0x39f75e2e,0x30fa5520,0x9ab701ec,0x93ba0ae2,0x88ad17f0,0x81a01cfe,0xbe832dd4,0xb78e26da,0xac993bc8,0xa59430c6,0xd2df599c,0xdbd25292,0xc0c54f80,0xc9c8448e,0xf6eb75a4,0xffe67eaa,0xe4f163b8,0xedfc68b6,0xa67b10c,0x36aba02,0x187da710,0x1170ac1e,0x2e539d34,0x275e963a,0x3c498b28,0x35448026,0x420fe97c,0x4b02e272,0x5015ff60,0x5918f46e,0x663bc544,0x6f36ce4a,0x7421d358,0x7d2cd856,0xa10c7a37,0xa8017139,0xb3166c2b,0xba1b6725,0x8538560f,0x8c355d01,0x97224013,0x9e2f4b1d,0xe9642247,0xe0692949,0xfb7e345b,0xf2733f55,0xcd500e7f,0xc45d0571,0xdf4a1863,0xd647136d,0x31dccad7,0x38d1c1d9,0x23c6dccb,0x2acbd7c5,0x15e8e6ef,0x1ce5ede1,0x7f2f0f3,0xefffbfd,0x79b492a7,0x70b999a9,0x6bae84bb,0x62a38fb5,0x5d80be9f,0x548db591,0x4f9aa883,0x4697a38d];function k(e){let t=[];for(let r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}class I{get key(){return a(this,n,"f").slice()}constructor(e){let t;if(n.set(this,void 0),s.set(this,void 0),o.set(this,void 0),!(this instanceof I))throw Error("AES must be instanitated with `new`");l(this,n,new Uint8Array(e),"f");let r=u[this.key.length];if(null==r)throw TypeError("invalid key size (must be 16, 24 or 32 bytes)");l(this,o,[],"f"),l(this,s,[],"f");for(let e=0;e<=r;e++)a(this,o,"f").push([0,0,0,0]),a(this,s,"f").push([0,0,0,0]);let f=(r+1)*4,h=this.key.length/4,p=k(this.key);for(let e=0;e<h;e++)t=e>>2,a(this,o,"f")[t][e%4]=p[e],a(this,s,"f")[r-t][e%4]=p[e];let g=0,m=h,y;for(;m<f;){if(y=p[h-1],p[0]^=d[y>>16&255]<<24^d[y>>8&255]<<16^d[255&y]<<8^d[y>>24&255]^c[g]<<24,g+=1,8!=h)for(let e=1;e<h;e++)p[e]^=p[e-1];else{for(let e=1;e<h/2;e++)p[e]^=p[e-1];y=p[h/2-1],p[h/2]^=d[255&y]^d[y>>8&255]<<8^d[y>>16&255]<<16^d[y>>24&255]<<24;for(let e=h/2+1;e<h;e++)p[e]^=p[e-1]}let e=0,t,n;for(;e<h&&m<f;)t=m>>2,n=m%4,a(this,o,"f")[t][n]=p[e],a(this,s,"f")[r-t][n]=p[e++],m++}for(let e=1;e<r;e++)for(let t=0;t<4;t++)y=a(this,s,"f")[e][t],a(this,s,"f")[e][t]=w[y>>24&255]^E[y>>16&255]^A[y>>8&255]^S[255&y]}encrypt(e){if(16!=e.length)throw TypeError("invalid plaintext size (must be 16 bytes)");let t=a(this,o,"f").length-1,r=[0,0,0,0],n=k(e);for(let e=0;e<4;e++)n[e]^=a(this,o,"f")[0][e];for(let e=1;e<t;e++){for(let t=0;t<4;t++)r[t]=h[n[t]>>24&255]^p[n[(t+1)%4]>>16&255]^g[n[(t+2)%4]>>8&255]^m[255&n[(t+3)%4]]^a(this,o,"f")[e][t];n=r.slice()}let s=new Uint8Array(16),l=0;for(let e=0;e<4;e++)l=a(this,o,"f")[t][e],s[4*e]=(d[n[e]>>24&255]^l>>24)&255,s[4*e+1]=(d[n[(e+1)%4]>>16&255]^l>>16)&255,s[4*e+2]=(d[n[(e+2)%4]>>8&255]^l>>8)&255,s[4*e+3]=(d[255&n[(e+3)%4]]^l)&255;return s}decrypt(e){if(16!=e.length)throw TypeError("invalid ciphertext size (must be 16 bytes)");let t=a(this,s,"f").length-1,r=[0,0,0,0],n=k(e);for(let e=0;e<4;e++)n[e]^=a(this,s,"f")[0][e];for(let e=1;e<t;e++){for(let t=0;t<4;t++)r[t]=y[n[t]>>24&255]^b[n[(t+3)%4]>>16&255]^v[n[(t+2)%4]>>8&255]^x[255&n[(t+1)%4]]^a(this,s,"f")[e][t];n=r.slice()}let o=new Uint8Array(16),l=0;for(let e=0;e<4;e++)l=a(this,s,"f")[t][e],o[4*e]=(f[n[e]>>24&255]^l>>24)&255,o[4*e+1]=(f[n[(e+3)%4]>>16&255]^l>>16)&255,o[4*e+2]=(f[n[(e+2)%4]>>8&255]^l>>8)&255,o[4*e+3]=(f[255&n[(e+1)%4]]^l)&255;return o}}n=new WeakMap,s=new WeakMap,o=new WeakMap}),ef("9F3VN",function(e,r){t(e.exports,"ModeOfOperation",function(){return s});var n=ed("jCAgV");class s{constructor(e,t,r){if(r&&!(this instanceof r))throw Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new(0,n.AES)(t)},name:{enumerable:!0,value:e}})}}}),ef("4YnQP",function(e,r){t(e.exports,"CBC",function(){return u});var n,s,o=ed("9F3VN"),a=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},l=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class u extends o.ModeOfOperation{constructor(e,t){if(super("ECC",e,u),n.set(this,void 0),s.set(this,void 0),t){if(t.length%16)throw TypeError("invalid iv size (must be 16 bytes)");a(this,n,new Uint8Array(t),"f")}else a(this,n,new Uint8Array(16),"f");a(this,s,this.iv,"f")}get iv(){return new Uint8Array(l(this,n,"f"))}encrypt(e){if(e.length%16)throw TypeError("invalid plaintext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let t=0;t<16;t++)l(this,s,"f")[t]^=e[r+t];a(this,s,this.aes.encrypt(l(this,s,"f")),"f"),t.set(l(this,s,"f"),r)}return t}decrypt(e){if(e.length%16)throw TypeError("invalid ciphertext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){let n=this.aes.decrypt(e.subarray(r,r+16));for(let o=0;o<16;o++)t[r+o]=n[o]^l(this,s,"f")[o],l(this,s,"f")[o]=e[r+o]}return t}}n=new WeakMap,s=new WeakMap}),ef("5zk4Q",function(e,t){var r,n,s,o,a=ed("9F3VN"),l=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},u=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class c extends a.ModeOfOperation{constructor(e,t,o=8){if(super("CFB",e,c),r.add(this),n.set(this,void 0),s.set(this,void 0),!Number.isInteger(o)||o%8)throw TypeError("invalid segmentSize");if(Object.defineProperties(this,{segmentSize:{enumerable:!0,value:o}}),t){if(t.length%16)throw TypeError("invalid iv size (must be 16 bytes)");l(this,n,new Uint8Array(t),"f")}else l(this,n,new Uint8Array(16),"f");l(this,s,this.iv,"f")}get iv(){return new Uint8Array(u(this,n,"f"))}encrypt(e){if(8*e.length%this.segmentSize)throw TypeError("invalid plaintext size (must be multiple of segmentSize bytes)");let t=this.segmentSize/8,n=new Uint8Array(e);for(let e=0;e<n.length;e+=t){let a=this.aes.encrypt(u(this,s,"f"));for(let r=0;r<t;r++)n[e+r]^=a[r];u(this,r,"m",o).call(this,n.subarray(e))}return n}decrypt(e){if(8*e.length%this.segmentSize)throw TypeError("invalid ciphertext size (must be multiple of segmentSize bytes)");let t=this.segmentSize/8,n=new Uint8Array(e);for(let a=0;a<n.length;a+=t){let l=this.aes.encrypt(u(this,s,"f"));for(let e=0;e<t;e++)n[a+e]^=l[e];u(this,r,"m",o).call(this,e.subarray(a))}return n}}n=new WeakMap,s=new WeakMap,r=new WeakSet,o=function(e){let t=this.segmentSize/8;u(this,s,"f").set(u(this,s,"f").subarray(t)),u(this,s,"f").set(e.subarray(0,t),16-t)}}),ef("iyqRZ",function(e,r){t(e.exports,"CTR",function(){return c});var n,s,o,a=ed("9F3VN"),l=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},u=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class c extends a.ModeOfOperation{constructor(e,t){super("CTR",e,c),n.set(this,void 0),s.set(this,void 0),o.set(this,void 0),l(this,o,new Uint8Array(16),"f"),u(this,o,"f").fill(0),l(this,n,u(this,o,"f"),"f"),l(this,s,16,"f"),null==t&&(t=1),"number"==typeof t?this.setCounterValue(t):this.setCounterBytes(t)}get counter(){return new Uint8Array(u(this,o,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw TypeError("invalid counter initial integer value");for(let t=15;t>=0;--t)u(this,o,"f")[t]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(16!==e.length)throw TypeError("invalid counter initial Uint8Array value length");u(this,o,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(255===u(this,o,"f")[e])u(this,o,"f")[e]=0;else{u(this,o,"f")[e]++;break}}encrypt(e){var t,r;let a=new Uint8Array(e);for(let e=0;e<a.length;e++)16===u(this,s,"f")&&(l(this,n,this.aes.encrypt(u(this,o,"f")),"f"),l(this,s,0,"f"),this.increment()),a[e]^=u(this,n,"f")[l(this,s,(r=u(this,s,"f"),t=r++,r),"f"),t];return a}decrypt(e){return this.encrypt(e)}}n=new WeakMap,s=new WeakMap,o=new WeakMap}),ef("6ln50",function(e,t){var r=ed("9F3VN");class n extends r.ModeOfOperation{constructor(e){super("ECB",e,n)}encrypt(e){if(e.length%16)throw TypeError("invalid plaintext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16)t.set(this.aes.encrypt(e.subarray(r,r+16)),r);return t}decrypt(e){if(e.length%16)throw TypeError("invalid ciphertext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16)t.set(this.aes.decrypt(e.subarray(r,r+16)),r);return t}}}),ef("2KiSV",function(e,t){var r,n,s,o=ed("9F3VN"),a=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},l=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class u extends o.ModeOfOperation{constructor(e,t){if(super("OFB",e,u),r.set(this,void 0),n.set(this,void 0),s.set(this,void 0),t){if(t.length%16)throw TypeError("invalid iv size (must be 16 bytes)");a(this,r,new Uint8Array(t),"f")}else a(this,r,new Uint8Array(16),"f");a(this,n,this.iv,"f"),a(this,s,16,"f")}get iv(){return new Uint8Array(l(this,r,"f"))}encrypt(e){var t,r;if(e.length%16)throw TypeError("invalid plaintext size (must be multiple of 16 bytes)");let o=new Uint8Array(e);for(let e=0;e<o.length;e++)16===l(this,s,"f")&&(a(this,n,this.aes.encrypt(l(this,n,"f")),"f"),a(this,s,0,"f")),o[e]^=l(this,n,"f")[a(this,s,(r=l(this,s,"f"),t=r++,r),"f"),t];return o}decrypt(e){if(e.length%16)throw TypeError("invalid ciphertext size (must be multiple of 16 bytes)");return this.encrypt(e)}}r=new WeakMap,n=new WeakMap,s=new WeakMap}),ef("evYsa",function(e,r){t(e.exports,"pkcs7Strip",function(){return n});function n(e){if(e.length<16)throw TypeError("PKCS#7 invalid length");let t=e[e.length-1];if(t>16)throw TypeError("PKCS#7 padding byte out of range");let r=e.length-t;for(let n=0;n<t;n++)if(e[r+n]!==t)throw TypeError("PKCS#7 invalid padding byte");return new Uint8Array(e.subarray(0,r))}}),ef("6XF0D",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.spelunk=e.exports.getPassword=e.exports.zpad=e.exports.looseArrayify=void 0;var r=ed("49y6x");function n(e){return"string"!=typeof e||e.startsWith("0x")||(e="0x"+e),(0,r.getBytesCopy)(e)}e.exports.looseArrayify=n,e.exports.zpad=function(e,t){for(e=String(e);e.length<t;)e="0"+e;return e},e.exports.getPassword=function(e){return"string"==typeof e?(0,r.toUtf8Bytes)(e,"NFKC"):(0,r.getBytesCopy)(e)},e.exports.spelunk=function(e,t){let s=t.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);(0,r.assertArgument)(null!=s,"invalid path","path",t);let o=s[1],a=s[3],l="!"===s[4],u=e;for(let e of o.toLowerCase().split(".")){if(Array.isArray(u)){if(!e.match(/^[0-9]+$/))break;u=u[parseInt(e)]}else if("object"==typeof u){let t=null;for(let r in u)if(r.toLowerCase()===e){t=u[r];break}u=t}else u=null;if(null==u)break}if((0,r.assertArgument)(!l||null!=u,"missing required value","path",o),a&&null!=u){if("int"===a){if("string"==typeof u&&u.match(/^-?[0-9]+$/))return parseInt(u);else if(Number.isSafeInteger(u))return u}if("number"===a&&"string"==typeof u&&u.match(/^-?[0-9.]*$/))return parseFloat(u);if("data"===a&&"string"==typeof u)return n(u);if("array"===a&&Array.isArray(u)||a===typeof u)return u;(0,r.assertArgument)(!1,`wrong type found for ${a} `,"path",o)}return u}}),ef("hZzAM",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decryptCrowdsaleJson=e.exports.isCrowdsaleJson=void 0,ed("jJNkF");var r=ed("4YnQP"),n=ed("evYsa"),s=ed("emjD2"),o=ed("eap8h"),a=ed("3A2Kh"),l=ed("49y6x"),u=ed("6XF0D");e.exports.isCrowdsaleJson=function(e){try{if(JSON.parse(e).encseed)return!0}catch(e){}return!1},e.exports.decryptCrowdsaleJson=function(e,t){let c=JSON.parse(e),d=(0,u.getPassword)(t),f=(0,s.getAddress)((0,u.spelunk)(c,"ethaddr:string!")),h=(0,u.looseArrayify)((0,u.spelunk)(c,"encseed:string!"));(0,l.assertArgument)(h&&h.length%16==0,"invalid encseed","json",e);let p=(0,l.getBytes)((0,o.pbkdf2)(d,d,2e3,32,"sha256")).slice(0,16),g=h.slice(0,16),m=h.slice(16),y=new r.CBC(p,g),b=(0,n.pkcs7Strip)((0,l.getBytes)(y.decrypt(m))),v="";for(let e=0;e<b.length;e++)v+=String.fromCharCode(b[e]);return{address:f,privateKey:(0,a.id)(v)}}}),ef("9Tqfz",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Wallet=void 0;var r=ed("eap8h"),n=ed("49y6x"),s=ed("cNALk"),o=ed("2WRKv"),a=ed("hZzAM"),l=ed("cIMq3"),u=ed("ezv9m");function c(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}class d extends s.BaseWallet{constructor(e,t){"string"!=typeof e||e.startsWith("0x")||(e="0x"+e),super("string"==typeof e?new r.SigningKey(e):e,t)}connect(e){return new d(this.signingKey,e)}async encrypt(e,t){let r={address:this.address,privateKey:this.privateKey};return await (0,l.encryptKeystoreJson)(r,e,{progressCallback:t})}encryptSync(e){let t={address:this.address,privateKey:this.privateKey};return(0,l.encryptKeystoreJsonSync)(t,e)}static #tF(e){if((0,n.assertArgument)(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&"en"===e.mnemonic.locale){let t=u.Mnemonic.fromEntropy(e.mnemonic.entropy),r=o.HDNodeWallet.fromMnemonic(t,e.mnemonic.path);if(r.address===e.address&&r.privateKey===e.privateKey)return r;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}let t=new d(e.privateKey);return(0,n.assertArgument)(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),t}static async fromEncryptedJson(e,t,r){let n=null;return(0,l.isKeystoreJson)(e)?n=await (0,l.decryptKeystoreJson)(e,t,r):(0,a.isCrowdsaleJson)(e)&&(r&&(r(0),await c(0)),n=(0,a.decryptCrowdsaleJson)(e,t),r&&(r(1),await c(0))),d.#tF(n)}static fromEncryptedJsonSync(e,t){let r=null;return(0,l.isKeystoreJson)(e)?r=(0,l.decryptKeystoreJsonSync)(e,t):(0,a.isCrowdsaleJson)(e)?r=(0,a.decryptCrowdsaleJson)(e,t):(0,n.assertArgument)(!1,"invalid JSON wallet","json","[ REDACTED ]"),d.#tF(r)}static createRandom(e){let t=o.HDNodeWallet.createRandom();return e?t.connect(e):t}static fromPhrase(e,t){let r=o.HDNodeWallet.fromPhrase(e);return t?r.connect(t):r}}e.exports.Wallet=d}),ef("jKfOW",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.wordlists=e.exports.WordlistOwlA=e.exports.WordlistOwl=e.exports.LangEn=e.exports.Wordlist=void 0;var r=ed("gU8yF");Object.defineProperty(e.exports,"Wordlist",{enumerable:!0,get:function(){return r.Wordlist}});var n=ed("loF6I");Object.defineProperty(e.exports,"LangEn",{enumerable:!0,get:function(){return n.LangEn}});var s=ed("hsNgL");Object.defineProperty(e.exports,"WordlistOwl",{enumerable:!0,get:function(){return s.WordlistOwl}});var o=ed("knnXt");Object.defineProperty(e.exports,"WordlistOwlA",{enumerable:!0,get:function(){return o.WordlistOwlA}});var a=ed("7L3N6");Object.defineProperty(e.exports,"wordlists",{enumerable:!0,get:function(){return a.wordlists}})}),ef("knnXt",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.WordlistOwlA=void 0;var r=ed("hsNgL"),n=ed("7DQGR");class s extends r.WordlistOwl{#tj;constructor(e,t,r,n){super(e,t,n),this.#tj=r}get _accent(){return this.#tj}_decodeWords(){return(0,n.decodeOwlA)(this._data,this._accent)}}e.exports.WordlistOwlA=s}),ef("7DQGR",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decodeOwlA=void 0;var r=ed("49y6x"),n=ed("hieDW"),s=ed("7V25m");e.exports.decodeOwlA=function(e,t){let o=(0,s.decodeOwl)(e).join(",");return t.split(/,/g).forEach(e=>{let s=e.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);(0,r.assertArgument)(null!==s,"internal error parsing accents","accents",t);let a=0,l=(0,n.decodeBits)(parseInt(s[3]),s[4]),u=parseInt(s[2]),c=RegExp(`([${s[1]}])`,"g");o=o.replace(c,(e,t)=>(0==--l[a]&&(t=String.fromCharCode(t.charCodeAt(0),u),a++),t))}),o.split(",")}}),ef("hieDW",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decodeBits=void 0,e.exports.decodeBits=function(e,t){let r=(1<<e)-1,n=[],s=0,o=0,a=0;for(let l=0;l<t.length;l++)for(s=s<<6|")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".indexOf(t[l]),o+=6;o>=e;){let t=s>>o-e;s&=(1<<o-e)-1,o-=e,0===t?a+=r:(n.push(t+a),a=0)}return n}}),ef("7L3N6",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.wordlists=void 0;var r=ed("loF6I");e.exports.wordlists={en:r.LangEn.wordlist()}});var eh={};eh=ed("9ZsTY");var ep=(ed("d1AnZ"),ed("d1AnZ"));function eg(){return(eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}(s=b||(b={})).Pop="POP",s.Push="PUSH",s.Replace="REPLACE";let em="popstate";function ey(e,t){if(!1===e||null==e)throw Error(t)}function eb(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw Error(t)}catch(e){}}}function ev(e,t){return{usr:e.state,key:e.key,idx:t}}function ex(e,t,r,n){return void 0===r&&(r=null),eg({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?eE(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function ew(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function eE(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}(o=v||(v={})).data="data",o.deferred="deferred",o.redirect="redirect",o.error="error";let eA=/^:\w+$/,eS=e=>"*"===e;function ek(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function eI(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field [")+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function e_(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function eP(e,t,r,n){let s,o;void 0===n&&(n=!1),"string"==typeof e?s=eE(e):(ey(!(s=eg({},e)).pathname||!s.pathname.includes("?"),eI("?","pathname","search",s)),ey(!s.pathname||!s.pathname.includes("#"),eI("#","pathname","hash",s)),ey(!s.search||!s.search.includes("#"),eI("#","search","hash",s)));let a=""===e||""===s.pathname,l=a?"/":s.pathname;if(n||null==l)o=r;else{let e=t.length-1;if(l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){var r;let n;void 0===t&&(t="/");let{pathname:s,search:o="",hash:a=""}="string"==typeof e?eE(e):e;return{pathname:s?s.startsWith("/")?s:(r=s,n=t.replace(/\/+$/,"").split("/"),r.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"):t,search:eT(o),hash:eR(a)}}(s,o),c=l&&"/"!==l&&l.endsWith("/"),d=(a||"."===l)&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}let eC=e=>e.join("/").replace(/\/\/+/g,"/"),eO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eT=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",eR=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Symbol("deferred");var ep=ed("d1AnZ");function eB(){return(eB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let eN=ep.createContext(null),eD=ep.createContext(null),eL=ep.createContext(null),eM=ep.createContext(null),eU=ep.createContext({outlet:null,matches:[],isDataRoute:!1}),eF=ep.createContext(null);function ej(){return null!=ep.useContext(eM)}function ez(){return ej()||ey(!1),ep.useContext(eM).location}function e$(e){ep.useContext(eL).static||ep.useLayoutEffect(e)}function eH(){let{isDataRoute:e}=ep.useContext(eU);return e?function(){var e;let t,{router:r}=(eK.UseNavigateStable,(t=ep.useContext(eN))||ey(!1),t),n=eZ(eJ.UseNavigateStable),s=ep.useRef(!1);return e$(()=>{s.current=!0}),ep.useCallback(function(e,t){void 0===t&&(t={}),s.current&&("number"==typeof e?r.navigate(e):r.navigate(e,eB({fromRouteId:n},t)))},[r,n])}():function(){ej()||ey(!1);let e=ep.useContext(eN),{basename:t,navigator:r}=ep.useContext(eL),{matches:n}=ep.useContext(eU),{pathname:s}=ez(),o=JSON.stringify(e_(n).map(e=>e.pathnameBase)),a=ep.useRef(!1);return e$(()=>{a.current=!0}),ep.useCallback(function(n,l){if(void 0===l&&(l={}),!a.current)return;if("number"==typeof n)return void r.go(n);let u=eP(n,JSON.parse(o),s,"path"===l.relative);null==e&&"/"!==t&&(u.pathname="/"===u.pathname?t:eC([t,u.pathname])),(l.replace?r.replace:r.push)(u,l.state,l)},[t,r,o,s,e])}()}function eV(e,t){let{relative:r}=void 0===t?{}:t,{matches:n}=ep.useContext(eU),{pathname:s}=ez(),o=JSON.stringify(e_(n).map(e=>e.pathnameBase));return ep.useMemo(()=>eP(e,JSON.parse(o),s,"path"===r),[e,o,s,r])}let eq=ep.createElement(function(){var e,t;let r,n,s,o,a=(n=ep.useContext(eF),s=(eJ.UseRouteError,(r=ep.useContext(eD))||ey(!1),r),o=eZ(eJ.UseRouteError),n||(null==(e=s.errors)?void 0:e[o])),l=null!=a&&"number"==typeof a.status&&"string"==typeof a.statusText&&"boolean"==typeof a.internal&&"data"in a?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),u=a instanceof Error?a.stack:null;return ep.createElement(ep.Fragment,null,ep.createElement("h2",null,"Unexpected Application Error!"),ep.createElement("h3",{style:{fontStyle:"italic"}},l),u?ep.createElement("pre",{style:{padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"}},u):null,null)},null);class eG extends ep.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?ep.createElement(eU.Provider,{value:this.props.routeContext},ep.createElement(eF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eW(e){let{routeContext:t,match:r,children:n}=e,s=ep.useContext(eN);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),ep.createElement(eU.Provider,{value:t},n)}var eK=((a=eK||{}).UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a),eJ=((l=eJ||{}).UseBlocker="useBlocker",l.UseLoaderData="useLoaderData",l.UseActionData="useActionData",l.UseRouteError="useRouteError",l.UseNavigation="useNavigation",l.UseRouteLoaderData="useRouteLoaderData",l.UseMatches="useMatches",l.UseRevalidator="useRevalidator",l.UseNavigateStable="useNavigate",l.UseRouteId="useRouteId",l);function eZ(e){let t,r=((t=ep.useContext(eU))||ey(!1),t),n=r.matches[r.matches.length-1];return n.route.id||ey(!1),n.route.id}function eQ(e){ey(!1)}function eX(e){let{basename:t="/",children:r=null,location:n,navigationType:s=b.Pop,navigator:o,static:a=!1}=e;ej()&&ey(!1);let l=t.replace(/^\/*/,"/"),u=ep.useMemo(()=>({basename:l,navigator:o,static:a}),[l,o,a]);"string"==typeof n&&(n=eE(n));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=n,g=ep.useMemo(()=>{let e=ek(c,l);return null==e?null:{location:{pathname:e,search:d,hash:f,state:h,key:p},navigationType:s}},[l,c,d,f,h,p,s]);return null==g?null:ep.createElement(eL.Provider,{value:u},ep.createElement(eM.Provider,{children:r,value:g}))}function eY(e){let{children:t,location:r}=e;return function(e,t,r){let n;ej()||ey(!1);let{navigator:s}=ep.useContext(eL),{matches:o}=ep.useContext(eU),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=ez();if(t){var d;let e="string"==typeof t?eE(t):t;"/"===u||(null==(d=e.pathname)?void 0:d.startsWith(u))||ey(!1),n=e}else n=c;let f=n.pathname||"/",h=function(e,t,r){void 0===r&&(r="/");let n=ek(("string"==typeof t?eE(t):t).pathname||"/",r);if(null==n)return null;let s=function e(t,r,n,s){void 0===r&&(r=[]),void 0===n&&(n=[]),void 0===s&&(s="");let o=(t,o,a)=>{var l,u;let c,d,f={relativePath:void 0===a?t.path||"":a,caseSensitive:!0===t.caseSensitive,childrenIndex:o,route:t};f.relativePath.startsWith("/")&&(ey(f.relativePath.startsWith(s),'Absolute route path "'+f.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),f.relativePath=f.relativePath.slice(s.length));let h=eC([s,f.relativePath]),p=n.concat(f);t.children&&t.children.length>0&&(ey(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+h+'".'),e(t.children,r,p,h)),(null!=t.path||t.index)&&r.push({path:h,score:(l=h,u=t.index,d=(c=l.split("/")).length,c.some(eS)&&(d+=-2),u&&(d+=2),c.filter(e=>!eS(e)).reduce((e,t)=>e+(eA.test(t)?3:""===t?1:10),d)),routesMeta:p})};return t.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let r of function e(t){let r=t.split("/");if(0===r.length)return[];let[n,...s]=r,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===s.length)return o?[a,""]:[a];let l=e(s.join("/")),u=[];return u.push(...l.map(e=>""===e?a:[a,e].join("/"))),o&&u.push(...l),u.map(e=>t.startsWith("/")&&""===e?"/":e)}(e.path))o(e,t,r);else o(e,t)}),r}(e);s.sort((e,t)=>{var r,n;return e.score!==t.score?t.score-e.score:(r=e.routesMeta.map(e=>e.childrenIndex),n=t.routesMeta.map(e=>e.childrenIndex),r.length===n.length&&r.slice(0,-1).every((e,t)=>e===n[t])?r[r.length-1]-n[n.length-1]:0)});let o=null;for(let e=0;null==o&&e<s.length;++e)o=function(e,t){let{routesMeta:r}=e,n={},s="/",o=[];for(let e=0;e<r.length;++e){let a=r[e],l=e===r.length-1,u="/"===s?t:t.slice(s.length)||"/",c=function(e,t){var r,n,s;let o,a;"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[l,u]=(r=e.path,n=e.caseSensitive,s=e.end,void 0===n&&(n=!1),void 0===s&&(s=!0),eb("*"===r||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were "'+r.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+r.replace(/\*$/,"/*")+'".'),o=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(e,t,r)=>(o.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")),r.endsWith("*")?(o.push({paramName:"*"}),a+="*"===r||"/*"===r?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":""!==r&&"/"!==r&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),o]),c=t.match(l);if(!c)return null;let d=c[0],f=d.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:u.reduce((e,t,r)=>{let{paramName:n,isOptional:s}=t;if("*"===n){let e=h[r]||"";f=d.slice(0,d.length-e.length).replace(/(.)\/+$/,"$1")}let o=h[r];return s&&!o?e[n]=void 0:e[n]=function(e,t){try{return decodeURIComponent(e)}catch(r){return eb(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+r+")."),e}}(o||"",n),e},{}),pathname:d,pathnameBase:f,pattern:e}}({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(n,c.params);let d=a.route;o.push({params:n,pathname:eC([s,c.pathname]),pathnameBase:eO(eC([s,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(s=eC([s,c.pathnameBase]))}return o}(s[e],function(e){try{return decodeURI(e)}catch(t){return eb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}(n));return o}(e,{pathname:"/"===u?f:f.slice(u.length)||"/"}),p=function(e,t,r){var n,s;if(void 0===t&&(t=[]),void 0===r&&(r=null),null==e){if(null==(s=r)||!s.errors)return null;e=r.matches}let o=e,a=null==(n=r)?void 0:n.errors;if(null!=a){let e=o.findIndex(e=>e.route.id&&(null==a?void 0:a[e.route.id]));e>=0||ey(!1),o=o.slice(0,Math.min(o.length,e+1))}return o.reduceRight((e,n,s)=>{let l=n.route.id?null==a?void 0:a[n.route.id]:null,u=null;r&&(u=n.route.errorElement||eq);let c=t.concat(o.slice(0,s+1)),d=()=>{let t;return t=l?u:n.route.Component?ep.createElement(n.route.Component,null):n.route.element?n.route.element:e,ep.createElement(eW,{match:n,routeContext:{outlet:e,matches:c,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===s)?ep.createElement(eG,{location:r.location,revalidation:r.revalidation,component:u,error:l,children:d(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):d()},null)}(h&&h.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:eC([u,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:eC([u,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,void 0);return t&&p?ep.createElement(eM.Provider,{value:{location:eB({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:b.Pop}},p):p}(function e(t,r){void 0===r&&(r=[]);let n=[];return ep.Children.forEach(t,(t,s)=>{if(!ep.isValidElement(t))return;let o=[...r,s];if(t.type===ep.Fragment)return void n.push.apply(n,e(t.props.children,o));t.type!==eQ&&ey(!1),t.props.index&&t.props.children&&ey(!1);let a={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=e(t.props.children,o)),n.push(a)}),n}(t),r)}ep.startTransition;var e0=((u=e0||{})[u.pending=0]="pending",u[u.success=1]="success",u[u.error=2]="error",u);function e1(){return(e1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}new Promise(()=>{}),ep.Component;function e2(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}let e3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]),e8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],e6=ep.startTransition,e4="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,e5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e9=ep.forwardRef(function(e,t){let r,{onClick:n,relative:s,reloadDocument:o,replace:a,state:l,target:u,to:c,preventScrollReset:d,unstable_viewTransition:f}=e,h=function(e,t){if(null==e)return{};var r,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,e8),{basename:p}=ep.useContext(eL),g=!1;if("string"==typeof c&&e5.test(c)&&(r=c,e4))try{let e=new URL(window.location.href),t=new URL(c.startsWith("//")?e.protocol+c:c),r=ek(t.pathname,p);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:g=!0}catch(e){}let m=function(e,t){let{relative:r}=void 0===t?{}:t;ej()||ey(!1);let{basename:n,navigator:s}=ep.useContext(eL),{hash:o,pathname:a,search:l}=eV(e,{relative:r}),u=a;return"/"!==n&&(u="/"===a?n:eC([n,a])),s.createHref({pathname:u,search:l,hash:o})}(c,{relative:s}),y=function(e,t){let{target:r,replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,u=eH(),c=ez(),d=eV(e,{relative:a});return ep.useCallback(t=>{0!==t.button||r&&"_self"!==r||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||(t.preventDefault(),u(e,{replace:void 0!==n?n:ew(c)===ew(d),state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}))},[c,u,d,n,s,r,e,o,a,l])}(c,{replace:a,state:l,target:u,preventScrollReset:d,relative:s,unstable_viewTransition:f});return ep.createElement("a",e1({},h,{href:r||m,onClick:g||o?n:function(e){n&&n(e),e.defaultPrevented||y(e)},ref:t,target:u}))});function e7(e){let t=ep.useRef(e2(e)),r=ep.useRef(!1),n=ez(),s=ep.useMemo(()=>{var e,s;let o;return e=n.search,s=r.current?null:t.current,o=e2(e),s&&s.forEach((e,t)=>{o.has(t)||s.getAll(t).forEach(e=>{o.append(t,e)})}),o},[n.search]),o=eH(),a=ep.useCallback((e,t)=>{let n=e2("function"==typeof e?e(s):e);r.current=!0,o("?"+n,t)},[o,s]);return[s,a]}"use strict";(c=x||(x={})).UseScrollRestoration="useScrollRestoration",c.UseSubmit="useSubmit",c.UseSubmitFetcher="useSubmitFetcher",c.UseFetcher="useFetcher",c.useViewTransitionState="useViewTransitionState",(d=w||(w={})).UseFetcher="useFetcher",d.UseFetchers="useFetchers",d.UseScrollRestoration="useScrollRestoration";"use strict";let te=0;var tt={};!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),E=(tt=ed("5ddGA")).createRoot,tt.hydrateRoot;let tr="undefined"==typeof window||"Deno"in window;function tn(){}function ti(e){return"number"==typeof e&&e>=0&&e!==1/0}function ts(e,t){return Math.max(e+(t||0)-Date.now(),0)}function to(e,t,r){return ty(e)?"function"==typeof t?{...r,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function ta(e,t,r){return ty(e)?[{...t,queryKey:e},r]:[e||{},t]}function tl(e,t){let{type:r="all",exact:n,fetchStatus:s,predicate:o,queryKey:a,stale:l}=e;if(ty(a))if(n){if(t.queryHash!==tc(a,t.options))return!1}else{var u;if(u=t.queryKey,!tf(u,a))return!1}if("all"!==r){let e=t.isActive();if("active"===r&&!e||"inactive"===r&&e)return!1}return("boolean"!=typeof l||t.isStale()===l)&&(void 0===s||s===t.state.fetchStatus)&&(!o||!!o(t))}function tu(e,t){let{exact:r,fetching:n,predicate:s,mutationKey:o}=e;if(ty(o)){if(!t.options.mutationKey)return!1;if(r){if(td(t.options.mutationKey)!==td(o))return!1}else{var a;if(a=t.options.mutationKey,!tf(a,o))return!1}}return("boolean"!=typeof n||"loading"===t.state.status===n)&&(!s||!!s(t))}function tc(e,t){return((null==t?void 0:t.queryKeyHashFn)||td)(e)}function td(e){return JSON.stringify(e,(e,t)=>tg(t)?Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}):t)}function tf(e,t){return e===t||typeof e==typeof t&&!!e&&!!t&&"object"==typeof e&&"object"==typeof t&&!Object.keys(t).some(r=>!tf(e[r],t[r]))}function th(e,t){if(e&&!t||t&&!e)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}function tp(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function tg(e){if(!tm(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!!tm(r)&&!!r.hasOwnProperty("isPrototypeOf")}function tm(e){return"[object Object]"===Object.prototype.toString.call(e)}function ty(e){return Array.isArray(e)}function tb(e){return new Promise(t=>{setTimeout(t,e)})}function tv(e){tb(0).then(e)}function tx(e,t,r){return null!=r.isDataEqual&&r.isDataEqual(e,t)?e:"function"==typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?function e(t,r){if(t===r)return t;let n=tp(t)&&tp(r);if(n||tg(t)&&tg(r)){let s=n?t.length:Object.keys(t).length,o=n?r:Object.keys(r),a=o.length,l=n?[]:{},u=0;for(let s=0;s<a;s++){let a=n?s:o[s];l[a]=e(t[a],r[a]),l[a]===t[a]&&u++}return s===a&&u===s?t:l}return r}(e,t):t}let tw=console,tE=function(){let e=[],t=0,r=e=>{e()},n=e=>{e()},s=n=>{t?e.push(n):tv(()=>{r(n)})},o=()=>{let t=e;e=[],t.length&&tv(()=>{n(()=>{t.forEach(e=>{r(e)})})})};return{batch:e=>{let r;t++;try{r=e()}finally{--t||o()}return r},batchCalls:e=>(...t)=>{s(()=>{e(...t)})},schedule:s,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{n=e}}}();class tA{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){let t={listener:e};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}let tS=new class extends tA{constructor(){super(),this.setup=e=>{if(!tr&&window.addEventListener){let t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=this.cleanup)||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}},tk=["online","offline"],tI=new class extends tA{constructor(){super(),this.setup=e=>{if(!tr&&window.addEventListener){let t=()=>e();return tk.forEach(e=>{window.addEventListener(e,t,!1)}),()=>{tk.forEach(e=>{window.removeEventListener(e,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=this.cleanup)||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(e=>{"boolean"==typeof e?this.setOnline(e):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine}};function t_(e){return Math.min(1e3*2**e,3e4)}function tP(e){return(null!=e?e:"online")!=="online"||tI.isOnline()}class tC{constructor(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}}function tO(e){return e instanceof tC}function tT(e){let t,r,n,s=!1,o=0,a=!1,l=new Promise((e,t)=>{r=e,n=t}),u=()=>!tS.isFocused()||"always"!==e.networkMode&&!tI.isOnline(),c=n=>{a||(a=!0,null==e.onSuccess||e.onSuccess(n),null==t||t(),r(n))},d=r=>{a||(a=!0,null==e.onError||e.onError(r),null==t||t(),n(r))},f=()=>new Promise(r=>{t=e=>{let t=a||!u();return t&&r(e),t},null==e.onPause||e.onPause()}).then(()=>{t=void 0,a||null==e.onContinue||e.onContinue()}),h=()=>{let t;if(!a){try{t=e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(c).catch(t=>{var r,n;if(a)return;let l=null!=(r=e.retry)?r:3,c=null!=(n=e.retryDelay)?n:t_,p="function"==typeof c?c(o,t):c,g=!0===l||"number"==typeof l&&o<l||"function"==typeof l&&l(o,t);if(s||!g)return void d(t);o++,null==e.onFail||e.onFail(o,t),tb(p).then(()=>{if(u())return f()}).then(()=>{s?d(t):h()})})}};return tP(e.networkMode)?h():f().then(h),{promise:l,cancel:t=>{a||(d(new tC(t)),null==e.abort||e.abort())},continue:()=>(null==t?void 0:t())?l:Promise.resolve(),cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1}}}class tR{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ti(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,null!=e?e:tr?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class tB extends tR{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||tw,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||function(e){let t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.cache.remove(this)}setData(e,t){let r=tx(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),r}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;let r=this.promise;return null==(t=this.retryer)||t.cancel(e),r?r.then(tn).catch(tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>!1!==e.options.enabled)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!ts(this.state.dataUpdatedAt,e)}onFocus(){var e;let t=this.observers.find(e=>e.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}onOnline(){var e;let t=this.observers.find(e=>e.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var r,n,s,o;if("idle"!==this.state.fetchStatus){if(this.state.dataUpdatedAt&&null!=t&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise)return null==(s=this.retryer)||s.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){let e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}let a=function(){if("function"==typeof AbortController)return new AbortController}(),l={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},u=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})};u(l);let c={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(l)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'")};u(c),null==(r=this.options.behavior)||r.onFetch(c),this.revertState=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==(null==(n=c.fetchOptions)?void 0:n.meta))&&this.dispatch({type:"fetch",meta:null==(o=c.fetchOptions)?void 0:o.meta});let d=e=>{if(tO(e)&&e.silent||this.dispatch({type:"error",error:e}),!tO(e)){var t,r,n,s;null==(t=(r=this.cache.config).onError)||t.call(r,e,this),null==(n=(s=this.cache.config).onSettled)||n.call(s,this.state.data,e,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=tT({fn:c.fetchFn,abort:null==a?void 0:a.abort.bind(a),onSuccess:e=>{var t,r,n,s;if(void 0===e)return void d(Error(this.queryHash+" data is undefined"));this.setData(e),null==(t=(r=this.cache.config).onSuccess)||t.call(r,e,this),null==(n=(s=this.cache.config).onSettled)||n.call(s,e,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){this.state=(t=>{var r,n;switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null!=(r=e.meta)?r:null,fetchStatus:tP(this.options.networkMode)?"fetching":"paused",...!t.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(n=e.dataUpdatedAt)?n:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let s=e.error;if(tO(s)&&s.revert&&this.revertState)return{...this.revertState,fetchStatus:"idle"};return{...t,error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),tE.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}class tN extends tA{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,r){var n;let s=t.queryKey,o=null!=(n=t.queryHash)?n:tc(s,t),a=this.get(o);return a||(a=new tB({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){let t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(t=>t!==e),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){tE.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){let[r]=ta(e,t);return void 0===r.exact&&(r.exact=!0),this.queries.find(e=>tl(r,e))}findAll(e,t){let[r]=ta(e,t);return Object.keys(r).length>0?this.queries.filter(e=>tl(r,e)):this.queries}notify(e){tE.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}onFocus(){tE.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){tE.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class tD extends tR{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||tw,this.observers=[],this.state=e.state||tL(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return null!=(e=null==(t=this.retryer)?void 0:t.continue())?e:this.execute()}async execute(){var e,t,r,n,s,o,a,l,u,c,d,f,h,p,g,m,y,b,v,x,w;let E="loading"===this.state.status;try{if(!E){this.dispatch({type:"loading",variables:this.options.variables}),await (null==(u=(c=this.mutationCache.config).onMutate)?void 0:u.call(c,this.state.variables,this));let e=await (null==(d=(f=this.options).onMutate)?void 0:d.call(f,this.state.variables));e!==this.state.context&&this.dispatch({type:"loading",context:e,variables:this.state.variables})}let h=await (this.retryer=tT({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(w=this.options.retry)?w:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise);return await (null==(e=(t=this.mutationCache.config).onSuccess)?void 0:e.call(t,h,this.state.variables,this.state.context,this)),await (null==(r=(n=this.options).onSuccess)?void 0:r.call(n,h,this.state.variables,this.state.context)),await (null==(s=(o=this.mutationCache.config).onSettled)?void 0:s.call(o,h,null,this.state.variables,this.state.context,this)),await (null==(a=(l=this.options).onSettled)?void 0:a.call(l,h,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:h}),h}catch(e){try{throw await (null==(h=(p=this.mutationCache.config).onError)?void 0:h.call(p,e,this.state.variables,this.state.context,this)),await (null==(g=(m=this.options).onError)?void 0:g.call(m,e,this.state.variables,this.state.context)),await (null==(y=(b=this.mutationCache.config).onSettled)?void 0:y.call(b,void 0,e,this.state.variables,this.state.context,this)),await (null==(v=(x=this.options).onSettled)?void 0:v.call(x,void 0,e,this.state.variables,this.state.context)),e}finally{this.dispatch({type:"error",error:e})}}}dispatch(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"loading":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!tP(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...t,...e.state}}})(this.state),tE.batch(()=>{this.observers.forEach(t=>{t.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function tL(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class tM extends tA{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,r){let n=new tD({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:r,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(n),n}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){tE.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return void 0===e.exact&&(e.exact=!0),this.mutations.find(t=>tu(e,t))}findAll(e){return this.mutations.filter(t=>tu(e,t))}notify(e){tE.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}resumePausedMutations(){var e;return this.resuming=(null!=(e=this.resuming)?e:Promise.resolve()).then(()=>{let e=this.mutations.filter(e=>e.state.isPaused);return tE.batch(()=>e.reduce((e,t)=>e.then(()=>t.continue().catch(tn)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function tU(){return{onFetch:e=>{e.fetchFn=()=>{var t,r,n,s,o,a;let l,u=null==(t=e.fetchOptions)||null==(r=t.meta)?void 0:r.refetchPage,c=null==(n=e.fetchOptions)||null==(s=n.meta)?void 0:s.fetchMore,d=null==c?void 0:c.pageParam,f=(null==c?void 0:c.direction)==="forward",h=(null==c?void 0:c.direction)==="backward",p=(null==(o=e.state.data)?void 0:o.pages)||[],g=(null==(a=e.state.data)?void 0:a.pageParams)||[],m=g,y=!1,b=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>{var t,r;return null!=(t=e.signal)&&t.aborted?y=!0:null==(r=e.signal)||r.addEventListener("abort",()=>{y=!0}),e.signal}})},v=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),x=(e,t,r,n)=>(m=n?[t,...m]:[...m,t],n?[r,...e]:[...e,r]),w=(t,r,n,s)=>{if(y)return Promise.reject("Cancelled");if(void 0===n&&!r&&t.length)return Promise.resolve(t);let o={queryKey:e.queryKey,pageParam:n,meta:e.options.meta};return b(o),Promise.resolve(v(o)).then(e=>x(t,n,e,s))};if(p.length)if(f){let t=void 0!==d,r=t?d:tF(e.options,p);l=w(p,t,r)}else if(h){let t=void 0!==d,r=t?d:tj(e.options,p);l=w(p,t,r,!0)}else{m=[];let t=void 0===e.options.getNextPageParam;l=!u||!p[0]||u(p[0],0,p)?w([],t,g[0]):Promise.resolve(x([],g[0],p[0]));for(let r=1;r<p.length;r++)l=l.then(n=>{if(!u||!p[r]||u(p[r],r,p)){let s=t?g[r]:tF(e.options,n);return w(n,t,s)}return Promise.resolve(x(n,g[r],p[r]))})}else l=w([]);return l.then(e=>({pages:e,pageParams:m}))}}}}function tF(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function tj(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}class tz{constructor(e={}){this.queryCache=e.queryCache||new tN,this.mutationCache=e.mutationCache||new tM,this.logger=e.logger||tw,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,1===this.mountCount&&(this.unsubscribeFocus=tS.subscribe(()=>{tS.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=tI.subscribe(()=>{tI.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;this.mountCount--,0===this.mountCount&&(null==(e=this.unsubscribeFocus)||e.call(this),this.unsubscribeFocus=void 0,null==(t=this.unsubscribeOnline)||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){let[r]=ta(e,t);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var r;return null==(r=this.queryCache.find(e,t))?void 0:r.state.data}ensureQueryData(e,t,r){let n=to(e,t,r),s=this.getQueryData(n.queryKey);return s?Promise.resolve(s):this.fetchQuery(n)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,r){let n=this.queryCache.find(e),s=null==n?void 0:n.state.data,o="function"==typeof t?t(s):t;if(void 0===o)return;let a=to(e),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return tE.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,r)]))}getQueryState(e,t){var r;return null==(r=this.queryCache.find(e,t))?void 0:r.state}removeQueries(e,t){let[r]=ta(e,t),n=this.queryCache;tE.batch(()=>{n.findAll(r).forEach(e=>{n.remove(e)})})}resetQueries(e,t,r){let[n,s]=ta(e,t,r),o=this.queryCache,a={type:"active",...n};return tE.batch(()=>(o.findAll(n).forEach(e=>{e.reset()}),this.refetchQueries(a,s)))}cancelQueries(e,t,r){let[n,s={}]=ta(e,t,r);return void 0===s.revert&&(s.revert=!0),Promise.all(tE.batch(()=>this.queryCache.findAll(n).map(e=>e.cancel(s)))).then(tn).catch(tn)}invalidateQueries(e,t,r){let[n,s]=ta(e,t,r);return tE.batch(()=>{var e,t;if(this.queryCache.findAll(n).forEach(e=>{e.invalidate()}),"none"===n.refetchType)return Promise.resolve();let r={...n,type:null!=(e=null!=(t=n.refetchType)?t:n.type)?e:"active"};return this.refetchQueries(r,s)})}refetchQueries(e,t,r){let[n,s]=ta(e,t,r),o=Promise.all(tE.batch(()=>this.queryCache.findAll(n).filter(e=>!e.isDisabled()).map(e=>{var t;return e.fetch(void 0,{...s,cancelRefetch:null==(t=null==s?void 0:s.cancelRefetch)||t,meta:{refetchPage:n.refetchPage}})}))).then(tn);return null!=s&&s.throwOnError||(o=o.catch(tn)),o}fetchQuery(e,t,r){let n=to(e,t,r),s=this.defaultQueryOptions(n);void 0===s.retry&&(s.retry=!1);let o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,t,r){return this.fetchQuery(e,t,r).then(tn).catch(tn)}fetchInfiniteQuery(e,t,r){let n=to(e,t,r);return n.behavior=tU(),this.fetchQuery(n)}prefetchInfiniteQuery(e,t,r){return this.fetchInfiniteQuery(e,t,r).then(tn).catch(tn)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){let r=this.queryDefaults.find(t=>td(e)===td(t.queryKey));r?r.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;let t=this.queryDefaults.find(t=>tf(e,t.queryKey));return null==t?void 0:t.defaultOptions}setMutationDefaults(e,t){let r=this.mutationDefaults.find(t=>td(e)===td(t.mutationKey));r?r.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;let t=this.mutationDefaults.find(t=>tf(e,t.mutationKey));return null==t?void 0:t.defaultOptions}defaultQueryOptions(e){if(null!=e&&e._defaulted)return e;let t={...this.defaultOptions.queries,...this.getQueryDefaults(null==e?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=tc(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.useErrorBoundary&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return null!=e&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(null==e?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}var ep=ed("d1AnZ");let t$=ep.createContext(void 0),tH=ep.createContext(!1);function tV(e,t){return e||(t&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=t$),window.ReactQueryClientContext):t$)}let tq=({context:e}={})=>{let t=ep.useContext(tV(e,ep.useContext(tH)));if(!t)throw Error("No QueryClient set, use QueryClientProvider to set one");return t};var ep=ed("d1AnZ");class tG extends tA{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;let r=this.options;this.options=this.client.defaultMutationOptions(e),th(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=this.currentMutation)||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();let t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let e=this.currentMutation?this.currentMutation.state:tL(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){tE.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var t,r,n,s,o,a,l,u;e.onSuccess?(null==(t=(r=this.mutateOptions).onSuccess)||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(n=(s=this.mutateOptions).onSettled)||n.call(s,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):e.onError&&(null==(o=(a=this.mutateOptions).onError)||o.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(l=(u=this.mutateOptions).onSettled)||l.call(u,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)})})}}"use strict";var tW={};let tK=ed("aAnIu").useSyncExternalStore;function tJ(e,t){return"function"==typeof e?e(...t):!!e}function tZ(e,t,r){var n,s,o;let a=(n=e,s=t,o=r,ty(n)?"function"==typeof s?{...o,mutationKey:n,mutationFn:s}:{...s,mutationKey:n}:"function"==typeof n?{...s,mutationFn:n}:{...n}),l=tq({context:a.context}),[u]=ep.useState(()=>new tG(l,a));ep.useEffect(()=>{u.setOptions(a)},[u,a]);let c=tK(ep.useCallback(e=>u.subscribe(tE.batchCalls(e)),[u]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),d=ep.useCallback((e,t)=>{u.mutate(e,t).catch(tQ)},[u]);if(c.error&&tJ(u.options.useErrorBoundary,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}function tQ(){}function tX(e,t="Assertion failed"){if(!1===e||null==e)if("function"==typeof t)throw t();else throw Error(t)}var ep=ed("d1AnZ");function tY(e){return e&&"message"in e?Object.assign(Error(e.message),e):null}function t0(e,t){return null==e?t:"string"==typeof e?Error(e):Array.isArray(e)||"object"!=typeof e?t:null}function t1(e){var t=function(e,t=Error("Unknown Error")){return t0(e,t)||(e instanceof Error?e:null)||(e instanceof Response?Error(`${e.status} ${e.statusText}`):null)||tY(e)||(null!==e&&"object"==typeof e&&"error"in e?t0(e.error,t)||tY(e.error):null)||t}(e);if(t.message)return t;{let e=structuredClone(t);return Object.defineProperty(e,"message",{value:t.message||t.name}),e}}class t2 extends el(ep).Component{static getDerivedStateFromError(e){return{hasError:!0,error:t1(e)}}render(){return this.state.hasError||this.props.forceIsErrorForTesting?this.props.renderError(this.state.error):this.props.children}constructor(...e){super(...e),this.state={hasError:!1,error:null}}}var ep=(ed("d1AnZ"),ed("d1AnZ"));let t3={"headline/hero":[40,48,500,"-0.5px"],"headline/h1":[32,36,500,"-0.25px"],"headline/h2":[24,28,500,"normal"],"headline/h3":[20,24,500,"normal"],"body/accent":[16,24,500,"0.25px"],"body/regular":[16,24,400,"0.1px"],"small/accent":[14,20,500,"0.3px"],"small/regular":[14,20,400,"0.2px"],"caption/accent":[12,16,500,"0.38px"],"caption/regular":[12,16,400,"0.38px"]},t8=e=>{let t=t3[e];if(!t)throw Error(`Unsupported text kind: ${e}`);return t},t6=el(ep).forwardRef(({as:e,inline:t=!1,kind:r,color:n="currentColor",className:s,style:o,...a},l)=>{let[u,c,d,f]=t8(r);return el(ep).createElement(e||"div",{ref:l,className:function(...e){let t="";for(let e=0;e<arguments.length;e++){let r=arguments[e];r&&(t+=0===t.length?r:` ${r}`)}return t}(s,"_uitext_tij8c_1"),style:{display:t?"inline-block":void 0,fontSize:u,lineHeight:`${c}px`,fontWeight:d,letterSpacing:f,color:n,...o},...a})});ed("d1AnZ");let t4=({gap:e,style:t,...r})=>(0,eh.jsx)("div",{style:{display:"grid",gridGap:e,gridTemplateColumns:"minmax(0, auto)",alignItems:"start",...t},...r});ed("d1AnZ");var t5=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e,children:[(0,eh.jsx)("path",{fill:"currentColor",d:"M13.754 4.595c.114.057.19.095.291.095.405 0-1.079-2.607-4.045-2.607S5.55 4.69 5.955 4.69c.1 0 .177-.038.29-.095.342-.17 1.024-.512 3.755-.512s3.413.342 3.754.512"}),(0,eh.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M17.686 12.32h-1.442c-.082.784-.246 1.513-.505 2.169l1.514 1.068a.635.635 0 0 1 .15.892.65.65 0 0 1-.902.15l-1.368-.966q-.134.195-.287.375c-1.067 1.27-2.691 1.909-4.846 1.909s-3.78-.64-4.847-1.908a5 5 0 0 1-.286-.376l-1.368.965a.65.65 0 0 1-.903-.149.635.635 0 0 1 .15-.892l1.515-1.068c-.26-.656-.423-1.385-.506-2.17H2.314a.644.644 0 0 1-.647-.64c0-.353.29-.64.647-.64h1.375v-.045q.001-1.38.356-2.392l-1.264-.777a.635.635 0 0 1-.208-.882.65.65 0 0 1 .892-.205l1.165.717q.394-.551.945-.945C6.759 5.662 8.35 5.442 10 5.442c1.661 0 3.25.254 4.43 1.118q.525.382.907.904l1.202-.728a.65.65 0 0 1 .89.211.636.636 0 0 1-.214.88l-1.278.774c.246.678.374 1.474.374 2.393v.046h1.375c.357 0 .647.286.647.64 0 .353-.29.64-.647.64M4.984 10.993c0-1.88.559-2.88 1.35-3.448.722-.517 1.74-.755 3.022-.811l-.003.066v9.813c-1.525-.113-2.54-.634-3.204-1.423q-1.022-1.212-1.148-3.539L5 11.64a12 12 0 0 1-.016-.645m5.663-4.192-.003-.065c1.272.062 2.292.322 3.016.851.8.586 1.356 1.593 1.356 3.406q0 .333-.016.645l-.001.014c-.083 1.552-.469 2.73-1.148 3.538-.664.79-1.68 1.31-3.204 1.423z",clipRule:"evenodd"})]});ed("d1AnZ");var t9=e=>(0,eh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:(0,eh.jsx)("path",{fill:"currentColor",d:"M15.429 3.429a.857.857 0 0 0-.858-.858H5.143a1.72 1.72 0 0 0-1.714 1.715v11.143a.857.857 0 0 0 1.714 0V4.286h9.428a.857.857 0 0 0 .858-.857M18 6H8.571a1.72 1.72 0 0 0-1.714 1.714v12a1.72 1.72 0 0 0 1.714 1.715H18a1.72 1.72 0 0 0 1.714-1.715v-12A1.72 1.72 0 0 0 18 6m0 13.714H8.571v-12H18z"})});ed("d1AnZ");var t7=e=>(0,eh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e,children:(0,eh.jsx)("path",{fill:"currentColor",d:"M14.417 5.25a.83.83 0 0 0-1.175 0l-4.7 4.7 1.175 1.175 4.7-4.708a.835.835 0 0 0 0-1.167m3.533-.008-8.233 8.233-2.9-2.892a.83.83 0 1 0-1.175 1.175l3.483 3.484a.83.83 0 0 0 1.175 0l8.825-8.817a.83.83 0 0 0 0-1.175h-.009a.813.813 0 0 0-1.166-.008M.933 11.767l3.484 3.483a.83.83 0 0 0 1.175 0l.583-.583-4.067-4.084a.83.83 0 0 0-1.175 0 .84.84 0 0 0 0 1.184"})});ed("d1AnZ");let re=({gap:e,alignItems:t="initial",justifyContent:r="initial",style:n,...s})=>(0,eh.jsx)("div",{style:{display:"grid",gridAutoFlow:"column",gridAutoColumns:"minmax(min-content, max-content)",gridGap:e,alignItems:t||"initial",justifyContent:r||"initial",...n},...s});var ep=ed("d1AnZ"),rt={};!function(){"use strict";var e={}.hasOwnProperty;function t(){for(var r=[],n=0;n<arguments.length;n++){var s=arguments[n];if(s){var o=typeof s;if("string"===o||"number"===o)r.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&r.push(a)}}else if("object"===o){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}rt?(t.default=t,rt=t):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return t}):window.classNames=t}();var rr={};t(rr,"asButton",function(){return A},function(e){return A=e}),t(rr,"button",function(){return S},function(e){return S=e}),t(rr,"danger",function(){return k},function(e){return k=e}),t(rr,"ghost",function(){return I},function(e){return I=e}),t(rr,"loading-border",function(){return _},function(e){return _=e}),t(rr,"neutral",function(){return P},function(e){return P=e}),t(rr,"primary",function(){return C},function(e){return C=e}),t(rr,"regular",function(){return O},function(e){return O=e}),t(rr,"rotate-gradient",function(){return T},function(e){return T=e}),t(rr,"text-primary",function(){return R},function(e){return R=e}),t(rr,"warning",function(){return B},function(e){return B=e}),A="EyUuEa_asButton",S="EyUuEa_button",k="EyUuEa_danger",I="EyUuEa_ghost",_="EyUuEa_loading-border",P="EyUuEa_neutral",C="EyUuEa_primary",O="EyUuEa_regular",T="EyUuEa_rotate-gradient",R="EyUuEa_text-primary",B="EyUuEa_warning";let rn={28:8,32:8,36:12,40:12,44:16,48:16,56:20,60:20},ri={primary:()=>({paddingInline:48}),danger:()=>({}),warning:()=>({}),regular:()=>({}),neutral:()=>({}),ghost:e=>{let t=e<=44?4:8;return{paddingLeft:t,paddingRight:t}},"text-primary":()=>({height:"auto",borderRadius:0}),"loading-border":()=>({border:"2px solid transparent"})},rs=el(ep).forwardRef(({style:e,as:t,kind:r="primary",size:n=44,children:s,className:o,...a},l)=>{let u=null==t||"button"===t;return(0,eh.jsx)(t6,{as:t||"button",ref:l,kind:"small/accent",className:el(rt)(o,rr[r],rr.button,{[rr.asButton]:!u}),style:Object.assign({border:"none",textDecoration:"none",borderRadius:rn[n],height:n,color:void 0},ri[r](n),e),...a,children:s})});var ep=ed("d1AnZ");N="Lci9EG_background",D="Lci9EG_content";let ro={primary:"var(--neutral-800)",danger:"var(--negative-300)",warning:"var(--notice-300)",ghost:"var(--neutral-200)",neutral:"var(--neutral-200)",regular:"var(--neutral-200)","loading-border":"var(--neutral-200)","text-primary":"var(--neutral-200)"};el(ep).forwardRef(({style:e,as:t,kind:r="primary",size:n=44,children:s,className:o,onClick:a,holdColor:l,successColor:u,errorColor:c,text:d,submittingText:f="Submitting...",successText:h="Success",errorText:p="Something was wrong",holdDuration:g=1e3,submitting:m,success:y,error:b,holdHint:v="Please press and hold the button",...x},w)=>{let E=(0,ep.useRef)(null),[A,S]=(0,ep.useState)("idle"),[k,I]=(0,ep.useState)(!1),_=m?"submitting":y?"success":b?"error":A,P=(0,ep.useRef)(0),C=(0,ep.useRef)(0),O=(0,ep.useRef)(0),T=(0,ep.useRef)(0),R=(0,ep.useCallback)(()=>{O.current=Date.now(),T.current=0,I(!0),setTimeout(()=>I(!1),1500)},[]),B=(0,ep.useCallback)(()=>{S("hold"),C.current=Date.now(),clearTimeout(P.current),P.current=setTimeout(()=>{E.current?.click()},g+100)},[g]),L=(0,ep.useCallback)(()=>{Date.now()-C.current<200&&(T.current+=1),T.current>2&&Date.now()-O.current>2e3&&R(),clearTimeout(P.current),S("idle")},[R]),M=null==t||"button"===t;return(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsxs)(t6,{as:t||"button",type:"button",ref:w,kind:"small/accent",className:el(rt)(o,rr[r],rr.button,"Lci9EG_button",{[rr.asButton]:!M,Lci9EG_hold:"hold"===_,Lci9EG_submitting:"submitting"===_,Lci9EG_success:"success"===_,Lci9EG_error:"error"===_}),onMouseDown:e=>{0===e.button&&(e.preventDefault(),B())},onMouseUp:L,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),"idle"===A&&B())},onKeyUp:L,onClick:e=>{e.preventDefault()},style:Object.assign({border:"none",textDecoration:"none",borderRadius:rn[n],height:n,color:void 0,"--button-background-hover":"primary"===r?"var(--black)":void 0},ri[r](n),e),children:[(0,eh.jsx)("div",{className:el(rt)(N,"Lci9EG_holdBackground"),style:{"--hold-duration":`${g}ms`,backgroundColor:l||ro[r]}}),(0,eh.jsx)("div",{className:el(rt)(N,"Lci9EG_successBackground"),style:{backgroundColor:u||ro[r]}}),(0,eh.jsx)("div",{className:el(rt)(N,"Lci9EG_errorBackground"),style:{backgroundColor:c||ro[r]}}),(0,eh.jsx)("div",{className:el(rt)(D,"Lci9EG_text"),children:d}),(0,eh.jsx)("div",{className:el(rt)(D,"Lci9EG_submittingText"),children:f}),(0,eh.jsx)("div",{className:el(rt)(D,"Lci9EG_successText"),children:h}),(0,eh.jsx)("div",{className:el(rt)(D,"Lci9EG_errorText"),children:p})]}),(0,eh.jsx)("button",{ref:E,onClick:a,className:"Lci9EG_hiddenButton",tabIndex:-1,...x}),k&&v?(0,eh.jsx)("div",{className:"Lci9EG_holdHintContainer",children:(0,eh.jsx)(t6,{kind:"caption/accent",color:"var(--always-white)",className:"Lci9EG_holdHint",children:v})}):null]})});var ep=ed("d1AnZ");let ra=el(ep).forwardRef(({className:e,...t},r)=>(0,eh.jsx)("a",{className:el(rt)(e,"G7wiZq_anchor"),ref:r,...t}));var rl=ed("a1T6e");function ru(e){e.preventDefault(),el(rl).windows.create({url:e.currentTarget.getAttribute("href"),width:600,height:800})}var ep=ed("d1AnZ");let rc=el(ep).forwardRef(({className:e,...t},r)=>(0,eh.jsx)("button",{className:el(rt)("kgAHAa_button",e),...t,ref:r}));var ep=ed("d1AnZ"),rd={},rf={};rf=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var rh={},rp={},rg={};rg="object"==typeof ea&&ea&&ea.Object===Object&&ea;var rm="object"==typeof self&&self&&self.Object===Object&&self;rp=rg||rm||Function("return this")(),rh=function(){return rp.Date.now()};var ry={},rb={},rv={},rx=/\s/;rv=function(e){for(var t=e.length;t--&&rx.test(e.charAt(t)););return t};var rw=/^\s+/;rb=function(e){return e?e.slice(0,rv(e)+1).replace(rw,""):e};var rE={},rA={},rS={};rS=rp.Symbol;var rk={},rI=Object.prototype,r_=rI.hasOwnProperty,rP=rI.toString,rC=rS?rS.toStringTag:void 0;rk=function(e){var t=r_.call(e,rC),r=e[rC];try{e[rC]=void 0;var n=!0}catch(e){}var s=rP.call(e);return n&&(t?e[rC]=r:delete e[rC]),s};var rO={},rT=Object.prototype.toString;rO=function(e){return rT.call(e)};var rR=rS?rS.toStringTag:void 0;rA=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":rR&&rR in Object(e)?rk(e):rO(e)};var rB={};rB=function(e){return null!=e&&"object"==typeof e},rE=function(e){return"symbol"==typeof e||rB(e)&&"[object Symbol]"==rA(e)};var rN=0/0,rD=/^[-+]0x[0-9a-f]+$/i,rL=/^0b[01]+$/i,rM=/^0o[0-7]+$/i,rU=parseInt;ry=function(e){if("number"==typeof e)return e;if(rE(e))return rN;if(rf(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=rf(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=rb(e);var r=rL.test(e);return r||rM.test(e)?rU(e.slice(2),r?2:8):rD.test(e)?rN:+e};var rF=Math.max,rj=Math.min;rd=function(e,t,r){var n,s,o,a,l,u,c=0,d=!1,f=!1,h=!0;if("function"!=typeof e)throw TypeError("Expected a function");function p(t){var r=n,o=s;return n=s=void 0,c=t,a=e.apply(o,r)}function g(e){var r=e-u,n=e-c;return void 0===u||r>=t||r<0||f&&n>=o}function m(){var e,r,n,s=rh();if(g(s))return y(s);l=setTimeout(m,(e=s-u,r=s-c,n=t-e,f?rj(n,o-r):n))}function y(e){return(l=void 0,h&&n)?p(e):(n=s=void 0,a)}function b(){var e,r=rh(),o=g(r);if(n=arguments,s=this,u=r,o){if(void 0===l)return c=e=u,l=setTimeout(m,t),d?p(e):a;if(f)return clearTimeout(l),l=setTimeout(m,t),p(u)}return void 0===l&&(l=setTimeout(m,t)),a}return t=ry(t)||0,rf(r)&&(d=!!r.leading,o=(f="maxWait"in r)?rF(ry(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h),b.cancel=function(){void 0!==l&&clearTimeout(l),c=0,n=u=s=l=void 0},b.flush=function(){return void 0===l?a:y(rh())},b};var ep=ed("d1AnZ");function rz(e){let t=(0,ep.useRef)(e);return(0,ep.useLayoutEffect)(()=>{t.current=e}),(0,ep.useCallback)((...e)=>t.current(...e),[])}let r$=({text:e,onSuccess:t=()=>null})=>{let r=(0,ep.useRef)(e),n=rz(t);(0,ep.useEffect)(()=>{r.current=e},[e]);let[s,o]=(0,ep.useState)(!1),a=(0,ep.useMemo)(()=>el(rd)(()=>{o(!1)},1e3),[]);return{handleCopy:(0,ep.useCallback)(()=>{r.current&&(!function(e){try{navigator.clipboard.writeText(e)}catch{let t=document.createRange(),r=document.getSelection(),n=document.createElement("span");n.ariaHidden="true",n.style.all="unset",n.style.position="fixed",n.style.top="0",n.style.clip="rect(0, 0, 0, 0)",n.style.whiteSpace="pre",n.style.userSelect="text";let s=null;try{if(n.textContent=e,(s=function(){let e=document.activeElement;for(;e;){if("DIALOG"===e.tagName&&e.open&&!e.getAttribute("open"))return e;e=e.parentElement}return null}()||document.body).appendChild(n),t.selectNodeContents(n),r?.removeAllRanges(),r?.addRange(t),!document.execCommand("copy"))throw Error("Unable to copy to clipboard.")}finally{r&&("function"==typeof r.removeRange?r.removeRange(t):r.removeAllRanges()),s&&s.removeChild(n)}}}(r.current),o(!0),n(),a())},[a,n]),isSuccess:s}};function rH({height:e,...t}){return(0,eh.jsx)("div",{style:{height:e},...t})}ed("d1AnZ");let rV=()=>({emit(e,...t){let r=this.events[e]||[];for(let e=0,n=r.length;e<n;e++)r[e](...t)},events:{},on(e,t){return this.events[e]?.push(t)||(this.events[e]=[t]),()=>{this.events[e]=this.events[e]?.filter(e=>t!==e)}}}),rq=rV();rq.on("mutationError",(e,t,r)=>{("sendTransaction"===r||"_signTypedData"===r||"signMessage"===r)&&rq.emit("signingError",r,t1(e).message)});var ep=ed("d1AnZ"),rl=ed("a1T6e");class rG{static async get(e){let t=await el(rl).storage.session.get(e);return t?.[e]}static async set(e,t){await el(rl).storage.session.set({[e]:t})}static async remove(e){await el(rl).storage.session.remove(e)}static async clear(){await el(rl).storage.session.clear()}}async function rW(){return rG.remove("routeRestoration")}var rK=((f={}).windowType="windowType",f.windowLayout="windowLayout",f.appMode="appMode",f);let rJ=function(){let e=new URL(window.location.href).searchParams;return{appMode:e.get(rK.appMode)||"wallet",windowType:window.location.pathname.startsWith("/sidepanel")&&"tab"!==e.get(rK.windowType)?"sidepanel":e.get(rK.windowType)||"popup",windowLayout:e.get(rK.windowLayout)||"column"}}();ed("d1AnZ"),ed("d1AnZ");var rZ=e=>(0,eh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...e,children:(0,eh.jsx)("path",{fill:"currentColor",d:"M7.996 16C12.381 16 16 12.38 16 8s-3.627-8-8.012-8C3.611 0 0 3.62 0 8s3.62 8 7.996 8m0-1.594A6.375 6.375 0 0 1 1.61 8a6.366 6.366 0 0 1 6.38-6.398A6.393 6.393 0 0 1 14.398 8a6.383 6.383 0 0 1-6.403 6.406m-.008-5.122c.426 0 .673-.24.68-.688l.117-3.722c.015-.456-.325-.789-.804-.789s-.812.325-.797.782l.108 3.729c.016.44.263.688.696.688m0 2.569c.503 0 .913-.364.913-.859 0-.487-.402-.85-.913-.85-.502 0-.912.363-.912.85 0 .488.417.859.912.859"})});let rQ={notice:{color:"var(--notice-500)",glowColor:"var(--notice-300)",innerGlowColor:"var(--notice-200)"},negative:{color:"var(--negative-500)",glowColor:"var(--negative-300)",innerGlowColor:"var(--negative-200)"},neutral:{color:"var(--black)",glowColor:"var(--neutral-300)",innerGlowColor:"var(--neutral-300)"}};function rX({glow:e=!1,kind:t="notice",outlineStrokeWidth:r=3,size:n=22,style:s}){let{color:o,glowColor:a,innerGlowColor:l}=rQ[t],u=n-2*r;return(0,eh.jsx)("div",{style:{userSelect:"none",width:u,height:u,borderRadius:"50%",color:o,display:"flex",alignItems:"center",justifyContent:"center",margin:e?r:void 0,backgroundColor:e?l:void 0,boxShadow:e?`0 0 0px ${r}px ${a}`:void 0,...s},children:(0,eh.jsx)(rZ,{style:{width:u,height:u}})})}var rY={};let r0=(rY=JSON.parse('{"name":"zerion-wallet","version":"1.33.0","description":"A web3 wallet extension","scripts":{"prestart":"node scripts/verifyDotEnv.cjs","start":"npm-run-all --parallel start:chrome type-check:watch","start:chrome":"rm -rf .parcel-cache && cp ./src/manifest-chrome.json ./src/manifest.json && PLATFORM=chrome parcel watch src/manifest.json src/ui/hardware-wallet/ledger.html --no-hmr --no-content-hash --no-autoinstall","start:firefox":"rm -rf .parcel-cache && cp ./src/manifest-firefox.json ./src/manifest.json && PLATFORM=firefox parcel watch src/manifest.json src/ui/hardware-wallet/ledger.html --no-hmr --no-content-hash --no-autoinstall --dist-dir dist-firefox","build":"echo \\"Please run \'npm run build:production\' instead\\" && exit 1","build:chrome":"node scripts/build.js","build:firefox":"node scripts/build-firefox.js","build:production":"npm-run-all --sequential build:chrome build:firefox","type-check":"tsc --noEmit","type-check:watch":"tsc --noEmit --pretty --watch","test:unit":"node --experimental-vm-modules node_modules/jest/bin/jest.js","test:e2e":"playwright test","test:e2e:update":"playwright test --update-snapshots","test:e2e:ui":"playwright test --ui","ui-lab":"parcel serve src/ui-lab/index.html --config ./src/ui-lab/parcel.lab.config","lint":"eslint . --cache --fix","format":"prettier --loglevel warn --write \\"**/*.{ts,tsx,css,md}\\"","prepare":"husky install","postversion":"node ./scripts/manifest-version.js"},"alias":{"src":"./src","zksync-ethers":"zksync-ethers/build","ethers":"ethers/lib.commonjs","ui-lab:src/ui/shared/channels":"./src/ui/shared/channels.mock.ts","ui-lab:src/modules/networks/networks-store.client":"./src/modules/networks/networks-store.client.mock.ts","ui-lab:src/background/constants":"./src/background/constants.mock.ts","buffer-todo-set-to-false":false,"ui-lab:webextension-polyfill":"/src/ui-lab/webextension-polyfill.mock.ts"},"@parcel/bundler-default":{"minBundles":10000000,"minBundleSize":3000,"maxParallelRequests":20},"repository":{"type":"git","url":"git+ssh://git@github.com/zeriontech/zerion-wallet-extension.git"},"keywords":["Wallet","Web3","Browser","Wallet"],"author":"everdimension <everdimension@gmail.com>","license":"GPL-3.0-only","bugs":{"url":"https://github.com/zeriontech/zerion-wallet-extension/issues"},"homepage":"https://github.com/zeriontech/zerion-wallet-extension#readme","browserslist":"> 0.5%, last 2 versions, not dead","engines":{"node":">=20.10.0"},"devDependencies":{"@eslint/js":"^9.29.0","@parcel/config-webextension":"^2.14.4","@parcel/optimizer-data-url":"^2.14.4","@parcel/optimizer-esbuild":"^2.14.4","@parcel/transformer-inline-string":"^2.14.4","@parcel/transformer-svg-react":"^2.14.4","@playwright/test":"^1.50.0","@tanstack/eslint-plugin-query":"^4.39.1","@types/canvas-confetti":"^1.6.4","@types/chrome":"^0.0.270","@types/dom-navigation":"^1.0.5","@types/jest":"^29.5.12","@types/lodash":"^4.17.7","@types/node":"^22.4.0","@types/react":"^18.2.25","@types/react-dom":"^18.2.11","@types/socket.io-client":"^1.4.36","@types/uuid":"^9.0.2","@types/w3c-web-usb":"^1.0.10","@types/webextension-polyfill":"^0.10.1","@typescript-eslint/parser":"^8.35.0","confusing-browser-globals":"^1.0.11","dotenv":"^16.4.5","eslint":"^8.57.1","eslint-plugin-import":"^2.32.0","eslint-plugin-react-hooks":"^5.2.0","eslint-plugin-security":"^3.0.1","husky":"^8.0.3","jest":"^29.7.0","lint-staged":"^13.2.3","npm-run-all":"^4.1.5","parcel":"^2.14.4","prettier":"^2.8.8","process":"^0.11.10","svgo":"^3.3.2","ts-jest":"^29.1.2","typescript":"^5.8.2","typescript-eslint":"^8.35.0"},"lint-staged":{"*.{ts,tsx}":"eslint --cache --fix","*.{ts,tsx,css,md}":"prettier --write"},"dependencies":{"@dnd-kit/core":"^6.3.1","@dnd-kit/sortable":"^10.0.0","@dnd-kit/utilities":"^3.2.2","@download/blockies":"^1.0.3","@ethersproject/abstract-provider":"^5.7.0","@ethersproject/bignumber":"^5.7.0","@ethersproject/hdnode":"^5.7.0","@ethersproject/wallet":"^5.7.0","@noble/ed25519":"^2.2.3","@react-spring/web":"^9.7.3","@solana/spl-token":"^0.4.13","@solana/wallet-standard-features":"^1.3.0","@solana/web3.js":"^1.98.0","@store-unit/react":"^1.0.4","@tanstack/react-query":"^4.35.3","@tanstack/react-virtual":"^3.2.0","@walletconnect/jsonrpc-provider":"^1.0.13","@walletconnect/jsonrpc-utils":"^1.0.8","@zeriontech/components":"^1.1.0","@zeriontech/hardware-wallet-connection":"^2.0.0","@zeriontech/solana-wallet-standard":"^1.0.0-alpha.2","@zeriontech/transactions":"^0.4.2","bignumber.js":"^9.1.1","bip32":"^5.0.0-rc.0","bip39":"^3.1.0","bs58":"^6.0.0","buffer":"^6.0.3","canvas-confetti":"^1.6.0","capitalize-ts":"^1.0.0","chart.js":"^4.4.8","classnames":"^2.3.2","dayjs":"^1.11.9","defi-sdk":"^0.1.9","downshift":"^7.6.0","ed25519-hd-key":"^1.3.0","ethers":"^6.14.0","events":"^3.3.0","eventsource":"^4.0.0","get-error":"^1.0.1","immer":"^10.0.2","is-truthy-ts":"^1.0.1","ky":"^0.33.3","lodash":"^4.17.21","lottie-web":"^5.12.2","memoize-one":"^6.0.0","nanoevents":"^8.0.0","nanoid":"^4.0.2","normalize.css":"^8.0.1","normalized-contains":"^1.0.0","react":"^18.2.0","react-area":"^0.1.1-alpha.6","react-dom":"^18.2.0","react-qrcode-logo":"^2.9.0","react-router-dom":"^6.18.0","rlp":"^3.0.0","store-unit":"^1.0.3","stream-browserify":"^3.0.0","tweetnacl":"^1.0.3","uuid":"^9.0.0","webextension-polyfill":"^0.10.0","zksync-ethers":"^6.17.0"}}')).version;rY.version;let{browser:r1,version:r2}=function(e){let t={firefox:/(Firefox)\/((?:\w|\.)+)/,chrome:/(Chrome)\/((?:\w|\.)+)/,safari:/(Safari)\/((?:\w|\.)+)/},r=e.match(t.firefox)||e.match(t.chrome)||e.match(t.safari);return r?{browser:r[1],version:r[2]}:{browser:"unknown",version:"unknown"}}(navigator.userAgent);var ep=(ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ"));let r3=el(ep).forwardRef(({className:e,...t},r)=>(0,eh.jsx)(e9,{ref:r,className:el(rt)(e,"bz_EOa_anchor"),...t}));function r8({style:e,className:t,paddingInline:r=16,...n}){return(0,eh.jsx)("div",{className:el(rt)(t,"evbVHW_column"),style:{"--column-padding-inline":`${r}px`,paddingInline:"var(--column-padding-inline)",flexGrow:1,display:"flex",flexDirection:"column",...e},...n})}function r6({lineColor:e="var(--neutral-200)",style:t,...r}){return(0,eh.jsx)("div",{style:{height:1,backgroundColor:e,marginInline:-16,...t},...r})}L="_567ZoW_item",el(ep).forwardRef(({className:e,style:t,...r},n)=>(0,eh.jsx)("div",{ref:n,style:{color:"inherit",...t},className:el(rt)(L,e),...r})),el(ep).forwardRef(({className:e,style:t,...r},n)=>(0,eh.jsx)(r3,{ref:n,style:{color:"inherit",...t},className:el(rt)(L,e),...r})),el(ep).forwardRef(({className:e,style:t,...r},n)=>(0,eh.jsx)(ra,{ref:n,style:{color:"inherit",...t},className:el(rt)(L,e),...r})),el(ep).forwardRef(({className:e,style:t,...r},n)=>(0,eh.jsx)(rc,{ref:n,style:{color:"inherit",...t},className:el(rt)(L,e),...r})),ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ");var ep=ed("d1AnZ");let r4={uiScrollRootElement:document.body},r5=el(ep).createContext(r4);function r9(e){return e.scrollHeight>e.clientHeight||e.parentElement===document.documentElement&&e.clientHeight>window.innerHeight}function r7({children:e,style:t,lineColor:r}){let{uiScrollRootElement:n}=(0,ep.useContext)(r5),[s,o]=(0,ep.useState)(r9(n));return(0,ep.useEffect)(()=>{o(r9(n));let e=new MutationObserver(function(){o(r9(n))});return e.observe(n,{childList:!0,subtree:!0,attributes:!0}),()=>{e.disconnect()}},[n]),(0,eh.jsxs)(r8,{style:{flexGrow:0,position:"sticky",bottom:0,backgroundColor:"var(--background)",...t},children:[(0,eh.jsx)(r6,{lineColor:s?r:"transparent"}),e]})}function ne(){return(0,eh.jsx)(rH,{height:16})}function nt({style:e,...t}){return(0,eh.jsx)("div",{...t,style:{minHeight:"100%",display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:"auto",...e}})}function nr(){return(0,eh.jsx)(rH,{height:24})}function nn({title:e="Unable to perform this action right now",subtitle:t="Please try again and report the issue if it persists.",error:r}){let n=eH(),{pathname:s,search:o}=ez(),a="dialog"===rJ.windowType,l=(0,ep.useMemo)(()=>`https://zerion-io.typeform.com/bug-report#${new URLSearchParams({version:r0,pathname:s,browser:`${r1}/${r2}`,platform:navigator.platform,search:o})}`,[s,o]),{handleCopy:u,isSuccess:c}=r$({text:r?.message});return(0,ep.useEffect)(()=>{rq.emit("errorScreenView",{message:r?.message||"Unknown error",location:s})},[r,s]),(0,eh.jsxs)(nt,{style:{maxWidth:425},children:[(0,eh.jsxs)(r8,{children:[(0,eh.jsx)(ne,{}),(0,eh.jsxs)(t4,{gap:24,style:{alignContent:"start"},children:[(0,eh.jsx)(rX,{kind:"notice",size:48,glow:!0,outlineStrokeWidth:8}),(0,eh.jsxs)(t4,{gap:8,children:[(0,eh.jsx)(t6,{kind:"headline/h1",children:e}),t?(0,eh.jsx)(t6,{kind:"body/regular",style:{whiteSpace:"pre-line"},children:t}):null]}),(0,eh.jsxs)(t4,{gap:8,style:{padding:16,border:"1px solid var(--notice-500)",borderRadius:8},children:[(0,eh.jsxs)(re,{gap:24,justifyContent:"space-between",style:{gridTemplateColumns:"1fr auto"},children:[(0,eh.jsx)(t6,{kind:"body/accent",color:"var(--notice-600)",children:"Error Details"}),r?.message?(0,eh.jsx)(rc,{onClick:u,style:{color:"var(--primary)"},className:"_55OMAG_hoverUnderline",children:(0,eh.jsxs)(re,{gap:4,alignItems:"center",children:[(0,eh.jsx)(t6,{kind:"small/accent",children:c?"Copied to Clipboard":"Copy to Clipboard"}),c?(0,eh.jsx)(t7,{style:{width:20,height:20}}):(0,eh.jsx)(t9,{style:{width:20,height:20}})]})}):null]}),(0,eh.jsx)(t6,{kind:"small/regular",color:"var(--notice-500)",children:r?.message||"We crashed. And don't know why"})]})]})]}),(0,eh.jsxs)(r7,{children:[(0,eh.jsx)(rH,{height:16}),(0,eh.jsxs)(re,{gap:8,style:{gridTemplateColumns:"1fr 1fr"},children:[(0,eh.jsx)(rs,{kind:"regular",onClick:async()=>{await rW(),a||n("/"),window.location.reload()},style:{paddingInline:8},children:a?"Try Again":"Back to Home"}),(0,eh.jsx)(rs,{as:ra,onClick:ru,href:l,target:"_blank",rel:"noopener noreferrer",style:{paddingInline:8},children:(0,eh.jsxs)(re,{gap:8,alignItems:"center",children:["Bug Report",(0,eh.jsx)(t5,{})]})})]}),(0,eh.jsx)(nr,{})]})]})}ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ");var ni={};function ns({bodyClassList:e=[]}){return(0,ep.useLayoutEffect)(()=>{if(e?.length)return document.body.classList.add(...e),()=>{document.body.classList.remove(...e)}},[e]),null}t(ni,"theme-dark",function(){return M},function(e){return M=e}),M="_41rCVG_theme-dark";var ep=(ed("d1AnZ"),ed("d1AnZ"));function no({size:e="1em",color:t="currentColor",trackWidth:r="10%",trackColor:n,className:s,style:o,...a}){return(0,eh.jsxs)("svg",{className:el(rt)("CVpv0W_spinnerStyle",s),style:{...o,color:t,"--track-color":n},width:e,height:e,viewBox:"0 0 100 100",...a,children:[(0,eh.jsx)("circle",{className:"CVpv0W_trackStyle",fill:"none",strokeWidth:r,strokeLinecap:"butt",cx:"50%",cy:"50%",r:"45%"}),(0,eh.jsx)("circle",{className:"CVpv0W_fillStyle",fill:"none",strokeWidth:r,strokeLinecap:"butt",cx:"50%",cy:"50%",r:"45%"})]})}function na(e){let[t,r]=(0,ep.useState)(!1);return(0,ep.useEffect)(()=>{let t=setTimeout(()=>r(!0),e);return()=>{clearTimeout(t)}},[e]),t}function nl({children:e,delay:t=500}){return na(t)?e:null}ed("d1AnZ");var ep=(ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ"));el(ep).createContext({addComponent:function(e,t){},removeComponent:function(e,t){},updateComponent:function(e,t){},getComponents:function(e){return null},orderNumberRef:{current:0}}),el(ep).useContext;let nu=()=>({events:{},emit(e,...t){(this.events[e]||[]).forEach(e=>e(...t))},on(e,t){return(this.events[e]=this.events[e]||[]).push(t),()=>this.events[e]=(this.events[e]||[]).filter(e=>e!==t)}});var nc=function(){function e(e){this.state=void 0,this.emitter=void 0,this.state=e,this.emitter=nu()}var t=e.prototype;return t.on=function(e,t){return this.emitter.on(e,t)},t.getState=function(){return this.state},t.setState=function(e){var t;if((t="function"==typeof e?e(this.state):e)!==this.state){var r=this.state;this.state=t,this.emitter.emit("change",this.state,r)}},t.setStateSilent=function(e){this.state=e},e}(),ep=(ed("d1AnZ"),ed("d1AnZ"));"undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform);let nd={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let e=1;e<20;e++)nd["f"+e]=111+e;ed("d1AnZ"),ed("d1AnZ"),new nc(!0);let nf=el(ep).forwardRef(({className:e,style:t,adjustForNavigationBar:r=!1,...n},s)=>(0,eh.jsx)("div",{ref:s,className:el(rt)(e,r?"dza3ZW_adjustForNavigationBar":null),style:{"--navigation-bar-height":"46px",height:"100%",flexGrow:1,display:"grid",alignContent:"center",justifyItems:"center",...t},...n}));function nh({size:e="24px",kind:t="default"}){let r=na(6e3);return(0,eh.jsx)(nf,{children:navigator.onLine||"network"!==t?(0,eh.jsxs)(t4,{gap:8,style:{placeItems:"center"},children:[(0,eh.jsx)(no,{color:"var(--primary)",size:e}),"network"===t?(0,eh.jsx)(t6,{kind:"small/regular",color:"var(--neutral-600)",children:r?`Request is taking longer than usual\u2026`:""}):null]}):(0,eh.jsx)(t6,{kind:"body/regular",color:"var(--neutral-600)",children:"You are offline"})})}var np=((h={})[h.light=0]="light",h[h.dark=1]="dark",h);let ng=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var ep=ed("d1AnZ");function nm(e,t,r){t.startsWith("--")?e.style.setProperty(t,r):e.style[t]=r}function ny(e){let t=(0,ep.useRef)({});(0,ep.useLayoutEffect)(()=>{for(let n in e){var r;n in t.current==!1&&(t.current[n]=(r=document.body,n.startsWith("--")?r.style.getPropertyValue(n):r.style[n])),nm(document.body,n,e[n])}},[e]),(0,ep.useLayoutEffect)(()=>{let e=t.current;return()=>{for(let t in e)nm(document.body,t,e[t])}},[])}let nb={neutral:"neutral-bg",white:"white-bg",transparent:"transparent-bg"};var nv=ed("fdr9l"),ep=ed("d1AnZ");function nx({style:e,paddingInline:t,...r}){return(0,eh.jsx)("div",{...r,style:{marginInline:"calc(-1 * var(--column-padding-inline))",paddingInline:t?"var(--column-padding-inline)":void 0,...e}})}ed("d1AnZ"),ed("d1AnZ");var nw=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:25,height:24,fill:"none",viewBox:"0 0 25 24",...e,children:[(0,eh.jsx)("rect",{width:24,height:24,x:.5,y:-.001,fill:"transparent",rx:6}),(0,eh.jsx)("g",{clipPath:"url(#clip0_9396_135)",children:(0,eh.jsx)("path",{fill:"currentColor",d:"M1.834 16.012v5.275h8.024v-1.17H3.003v-4.105zm20.164 0v4.105h-6.855v1.17h8.024v-5.275zM9.87 7.986v8.026h5.273v-1.055h-4.104V7.986zM1.834 2.71v5.275h1.17V3.88h6.854V2.71zm13.309 0v1.17h6.855v4.105h1.17V2.71z"})}),(0,eh.jsx)("defs",{children:(0,eh.jsx)("clipPath",{id:"clip0_9396_135",children:(0,eh.jsx)("path",{fill:"transparent",d:"M1.834 2.71h21.333v18.577H1.834z"})})})]}),ep=(ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ")),nE=Object.defineProperty,nA={},nS={assign:()=>n3,colors:()=>n0,createStringInterpolator:()=>U,skipAnimation:()=>n1,to:()=>F,willAdvance:()=>n2};for(var nk in nS)nE(nA,nk,{get:nS[nk],enumerable:!0});var nI=n$(),n_=e=>nU(e,nI),nP=n$();n_.write=e=>nU(e,nP);var nC=n$();n_.onStart=e=>nU(e,nC);var nO=n$();n_.onFrame=e=>nU(e,nO);var nT=n$();n_.onFinish=e=>nU(e,nT);var nR=[];n_.setTimeout=(e,t)=>{let r=n_.now()+t,n=()=>{let e=nR.findIndex(e=>e.cancel==n);~e&&nR.splice(e,1),nL-=!!~e},s={time:r,handler:e,cancel:n};return nR.splice(nB(r),0,s),nL+=1,nF(),s};var nB=e=>~(~nR.findIndex(t=>t.time>e)||~nR.length);n_.cancel=e=>{nC.delete(e),nO.delete(e),nT.delete(e),nI.delete(e),nP.delete(e)},n_.sync=e=>{nM=!0,n_.batchedUpdates(e),nM=!1},n_.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function n(...e){t=e,n_.onStart(r)}return n.handler=e,n.cancel=()=>{nC.delete(r),t=null},n};var nN="undefined"!=typeof window?window.requestAnimationFrame:()=>{};n_.use=e=>nN=e,n_.now="undefined"!=typeof performance?()=>performance.now():Date.now,n_.batchedUpdates=e=>e(),n_.catch=console.error,n_.frameLoop="always",n_.advance=()=>{"demand"!==n_.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):nz()};var nD=-1,nL=0,nM=!1;function nU(e,t){nM?(t.delete(e),e(0)):(t.add(e),nF())}function nF(){nD<0&&(nD=0,"demand"!==n_.frameLoop&&nN(nj))}function nj(){~nD&&(nN(nj),n_.batchedUpdates(nz))}function nz(){let e=nD,t=nB(nD=n_.now());if(t&&(nH(nR.splice(0,t),e=>e.handler()),nL-=t),!nL)return void(nD=-1);nC.flush(),nI.flush(e?Math.min(64,nD-e):16.667),nO.flush(),nP.flush(),nT.flush()}function n$(){let e=new Set,t=e;return{add(r){nL+=+!(t!=e||e.has(r)),e.add(r)},delete:r=>(nL-=t==e&&e.has(r)?1:0,e.delete(r)),flush(r){t.size&&(e=new Set,nL-=t.size,nH(t,t=>t(r)&&e.add(t)),nL+=e.size,t=e)}}}function nH(e,t){e.forEach(e=>{try{t(e)}catch(e){n_.catch(e)}})}function nV(){}var nq=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),nG={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function nW(e,t){if(nG.arr(e)){if(!nG.arr(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var nK=(e,t)=>e.forEach(t);function nJ(e,t,r){if(nG.arr(e)){for(let n=0;n<e.length;n++)t.call(r,e[n],`${n}`);return}for(let n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n)}var nZ=e=>nG.und(e)?[]:nG.arr(e)?e:[e];function nQ(e,t){if(e.size){let r=Array.from(e);e.clear(),nK(r,t)}}var nX=(e,...t)=>nQ(e,e=>e(...t)),nY=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),n0=null,n1=!1,n2=nV,n3=e=>{e.to&&(F=e.to),e.now&&(n_.now=e.now),void 0!==e.colors&&(n0=e.colors),null!=e.skipAnimation&&(n1=e.skipAnimation),e.createStringInterpolator&&(U=e.createStringInterpolator),e.requestAnimationFrame&&n_.use(e.requestAnimationFrame),e.batchedUpdates&&(n_.batchedUpdates=e.batchedUpdates),e.willAdvance&&(n2=e.willAdvance),e.frameLoop&&(n_.frameLoop=e.frameLoop)},n8=new Set,n6=[],n4=[],n5=0,n9={get idle(){return!n8.size&&!n6.length},start(e){n5>e.priority?(n8.add(e),n_.onStart(n7)):(ie(e),n_(ir))},advance:ir,sort(e){if(n5)n_.onFrame(()=>n9.sort(e));else{let t=n6.indexOf(e);~t&&(n6.splice(t,1),it(e))}},clear(){n6=[],n8.clear()}};function n7(){n8.forEach(ie),n8.clear(),n_(ir)}function ie(e){n6.includes(e)||it(e)}function it(e){n6.splice(function(e,t){let r=e.findIndex(t);return r<0?e.length:r}(n6,t=>t.priority>e.priority),0,e)}function ir(e){let t=n4;for(let r=0;r<n6.length;r++){let n=n6[r];n5=n.priority,!n.idle&&(n2(n),n.advance(e),n.idle||t.push(n))}return n5=0,(n4=n6).length=0,(n6=t).length>0}var ii="[-+]?\\d*\\.?\\d+",is=ii+"%";function io(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var ia=RegExp("rgb"+io(ii,ii,ii)),il=RegExp("rgba"+io(ii,ii,ii,ii)),iu=RegExp("hsl"+io(ii,is,is)),ic=RegExp("hsla"+io(ii,is,is,ii)),id=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ih=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ip=/^#([0-9a-fA-F]{6})$/,ig=/^#([0-9a-fA-F]{8})$/;function im(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function iy(e,t,r){let n=r<.5?r*(1+t):r+t-r*t,s=2*r-n,o=im(s,n,e+1/3);return Math.round(255*o)<<24|Math.round(255*im(s,n,e))<<16|Math.round(255*im(s,n,e-1/3))<<8}function ib(e){let t=parseInt(e,10);return t<0?0:t>255?255:t}function iv(e){return(parseFloat(e)%360+360)%360/360}function ix(e){let t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function iw(e){let t=parseFloat(e);return t<0?0:t>100?1:t/100}function iE(e){let t,r="number"==typeof e?e>>>0===e&&e>=0&&e<=0xffffffff?e:null:(t=ip.exec(e))?parseInt(t[1]+"ff",16)>>>0:n0&&void 0!==n0[e]?n0[e]:(t=ia.exec(e))?(ib(t[1])<<24|ib(t[2])<<16|ib(t[3])<<8|255)>>>0:(t=il.exec(e))?(ib(t[1])<<24|ib(t[2])<<16|ib(t[3])<<8|ix(t[4]))>>>0:(t=id.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=ig.exec(e))?parseInt(t[1],16)>>>0:(t=ih.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=iu.exec(e))?(255|iy(iv(t[1]),iw(t[2]),iw(t[3])))>>>0:(t=ic.exec(e))?(iy(iv(t[1]),iw(t[2]),iw(t[3]))|ix(t[4]))>>>0:null;if(null===r)return e;let n=(0xff000000&(r=r||0))>>>24,s=(0xff0000&r)>>>16,o=(65280&r)>>>8,a=(255&r)/255;return`rgba(${n}, ${s}, ${o}, ${a})`}var iA=(e,t,r)=>{if(nG.fun(e))return e;if(nG.arr(e))return iA({range:e,output:t,extrapolate:r});if(nG.str(e.output[0]))return U(e);let n=e.output,s=e.range||[0,1],o=e.extrapolateLeft||e.extrapolate||"extend",a=e.extrapolateRight||e.extrapolate||"extend",l=e.easing||(e=>e);return t=>{let r=function(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}(t,s);return function(e,t,r,n,s,o,a,l,u){let c=u?u(e):e;if(c<t)if("identity"===a)return c;else"clamp"===a&&(c=t);if(c>r)if("identity"===l)return c;else"clamp"===l&&(c=r);return n===s?n:t===r?e<=t?n:s:(t===-1/0?c=-c:r===1/0?c-=t:c=(c-t)/(r-t),c=o(c),n===-1/0?c=-c:s===1/0?c+=n:c=c*(s-n)+n,c)}(t,s[r],s[r+1],n[r],n[r+1],l,o,a,e.map)}},iS=Symbol.for("FluidValue.get"),ik=Symbol.for("FluidValue.observers"),iI=e=>!!(e&&e[iS]),i_=e=>e&&e[iS]?e[iS]():e,iP=e=>e[ik]||null;function iC(e,t){let r=e[ik];r&&r.forEach(e=>{e.eventObserved?e.eventObserved(t):e(t)})}var iO=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");iT(this,e)}},iT=(e,t)=>iN(e,iS,t);function iR(e,t){if(e[iS]){let r=e[ik];r||iN(e,ik,r=new Set),!r.has(t)&&(r.add(t),e.observerAdded&&e.observerAdded(r.size,t))}return t}function iB(e,t){let r=e[ik];if(r&&r.has(t)){let n=r.size-1;n?r.delete(t):e[ik]=null,e.observerRemoved&&e.observerRemoved(n,t)}}var iN=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),iD=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,iL=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,iM=RegExp(`(${iD.source})(%|[a-z]+)`,"i"),iU=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,iF=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,ij=e=>{let[t,r]=iz(e);if(!t||nY())return e;let n=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(n)return n.trim();if(r&&r.startsWith("--")){let e=window.getComputedStyle(document.documentElement).getPropertyValue(r);if(e)return e}else if(r&&iF.test(r))return ij(r);else if(r)return r;return e},iz=e=>{let t=iF.exec(e);if(!t)return[,];let[,r,n]=t;return[r,n]},i$=(e,t,r,n,s)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(n)}, ${s})`,iH=e=>{j||(j=n0?RegExp(`(${Object.keys(n0).join("|")})(?!\\w)`,"g"):/^\b$/);let t=e.output.map(e=>i_(e).replace(iF,ij).replace(iL,iE).replace(j,iE)),r=t.map(e=>e.match(iD).map(Number)),n=r[0].map((e,t)=>r.map(e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})).map(t=>iA({...e,output:t}));return e=>{let r=!iM.test(t[0])&&t.find(e=>iM.test(e))?.replace(iD,""),s=0;return t[0].replace(iD,()=>`${n[s++](e)}${r||""}`).replace(iU,i$)}},iV="react-spring: ",iq=e=>{let t=!1;if("function"!=typeof e)throw TypeError(`${iV}once requires a function parameter`);return(...r)=>{t||(e(...r),t=!0)}},iG=iq(console.warn),iW=iq(console.warn);function iK(e){return nG.str(e)&&("#"==e[0]||/\d/.test(e)||!nY()&&iF.test(e)||e in(n0||{}))}var iJ=nY()?ep.useEffect:ep.useLayoutEffect,iZ=()=>{let e=(0,ep.useRef)(!1);return iJ(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function iQ(){let e=(0,ep.useState)()[1],t=iZ();return()=>{t.current&&e(Math.random())}}var iX=e=>(0,ep.useEffect)(e,iY),iY=[];function i0(e){let t=(0,ep.useRef)();return(0,ep.useEffect)(()=>{t.current=e}),t.current}var ep=(ed("d1AnZ"),ed("d1AnZ")),i1=Symbol.for("Animated:node"),i2=e=>!!e&&e[i1]===e,i3=e=>e&&e[i1],i8=(e,t)=>nq(e,i1,t),i6=e=>e&&e[i1]&&e[i1].getPayload(),i4=class{constructor(){i8(this,this)}getPayload(){return this.payload||[]}},i5=class extends i4{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,nG.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new i5(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return nG.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){let{done:e}=this;this.done=!1,nG.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},i9=class extends i5{constructor(e){super(0),this._string=null,this._toString=iA({output:[e,e]})}static create(e){return new i9(e)}getValue(){let e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(nG.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=iA({output:[this.getValue(),e]})),this._value=0,super.reset()}},i7={dependencies:null},se=class extends i4{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){let t={};return nJ(this.source,(r,n)=>{i2(r)?t[n]=r.getValue(e):iI(r)?t[n]=i_(r):e||(t[n]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&nK(this.payload,e=>e.reset())}_makePayload(e){if(e){let t=new Set;return nJ(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){i7.dependencies&&iI(e)&&i7.dependencies.add(e);let t=i6(e);t&&nK(t,e=>this.add(e))}},st=class extends se{constructor(e){super(e)}static create(e){return new st(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){let t=this.getPayload();return e.length==t.length?t.map((t,r)=>t.setValue(e[r])).some(Boolean):(super.setValue(e.map(sr)),!0)}};function sr(e){return(iK(e)?i9:i5).create(e)}function sn(e){let t=i3(e);return t?t.constructor:nG.arr(e)?st:iK(e)?i9:i5}var si=(e,t)=>{let r=!nG.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,ep.forwardRef)((n,s)=>{let o=(0,ep.useRef)(null),a=r&&(0,ep.useCallback)(e=>{var t,r;t=s,r=e,t&&(nG.fun(t)?t(r):t.current=r),o.current=r},[s]),[l,u]=function(e,t){let r=new Set;return i7.dependencies=r,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new se(e),i7.dependencies=null,[e,r]}(n,t),c=iQ(),d=()=>{let e=o.current;(!r||e)&&!1===(!!e&&t.applyAnimatedValues(e,l.getValue(!0)))&&c()},f=new ss(d,u),h=(0,ep.useRef)();iJ(()=>(h.current=f,nK(u,e=>iR(e,f)),()=>{h.current&&(nK(h.current.deps,e=>iB(e,h.current)),n_.cancel(h.current.update))})),(0,ep.useEffect)(d,[]),iX(()=>()=>{let e=h.current;nK(e.deps,t=>iB(t,e))});let p=t.getComponentProps(l.getValue());return ep.createElement(e,{...p,ref:a})})},ss=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&n_.write(this.update)}},so=Symbol.for("AnimatedComponent"),sa=e=>nG.str(e)?e:e&&nG.str(e.displayName)?e.displayName:nG.fun(e)&&e.name||null;function sl(e,...t){return nG.fun(e)?e(...t):e}var su=(e,t)=>!0===e||!!(t&&e&&(nG.fun(e)?e(t):nZ(e).includes(t))),sc=(e,t)=>nG.obj(e)?t&&e[t]:e,sd=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,sf=e=>e,sh=(e,t=sf)=>{let r=sp;e.default&&!0!==e.default&&(r=Object.keys(e=e.default));let n={};for(let s of r){let r=t(e[s],s);nG.und(r)||(n[s]=r)}return n},sp=["config","onProps","onStart","onChange","onPause","onResume","onRest"],sg={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function sm(e){let t=function(e){let t={},r=0;if(nJ(e,(e,n)=>{!sg[n]&&(t[n]=e,r++)}),r)return t}(e);if(t){let r={to:t};return nJ(e,(e,n)=>n in t||(r[n]=e)),r}return{...e}}function sy(e){return e=i_(e),nG.arr(e)?e.map(sy):iK(e)?nA.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function sb(e){return nG.fun(e)||nG.arr(e)&&nG.obj(e[0])}var sv={tension:170,friction:26,mass:1,damping:1,easing:e=>e,clamp:!1},sx=class{constructor(){this.velocity=0,Object.assign(this,sv)}};function sw(e,t){if(nG.und(t.decay)){let r=!nG.und(t.tension)||!nG.und(t.friction);!r&&nG.und(t.frequency)&&nG.und(t.damping)&&nG.und(t.mass)||(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}else e.duration=void 0}var sE=[],sA=class{constructor(){this.changed=!1,this.values=sE,this.toValues=null,this.fromValues=sE,this.config=new sx,this.immediate=!1}};function sS(e,{key:t,props:r,defaultProps:n,state:s,actions:o}){return new Promise((a,l)=>{let u,c,d=su(r.cancel??n?.cancel,t);if(d)p();else{nG.und(r.pause)||(s.paused=su(r.pause,t));let e=n?.pause;!0!==e&&(e=s.paused||su(e,t)),u=sl(r.delay||0,t),e?(s.resumeQueue.add(h),o.pause()):(o.resume(),h())}function f(){s.resumeQueue.add(h),s.timeouts.delete(c),c.cancel(),u=c.time-n_.now()}function h(){u>0&&!nA.skipAnimation?(s.delayed=!0,c=n_.setTimeout(p,u),s.pauseQueue.add(f),s.timeouts.add(c)):p()}function p(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(f),s.timeouts.delete(c),e<=(s.cancelId||0)&&(d=!0);try{o.start({...r,callId:e,cancel:d},a)}catch(e){l(e)}}})}var sk=(e,t)=>1==t.length?t[0]:t.some(e=>e.cancelled)?sP(e.get()):t.every(e=>e.noop)?sI(e.get()):s_(e.get(),t.every(e=>e.finished)),sI=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),s_=(e,t,r=!1)=>({value:e,finished:t,cancelled:r}),sP=e=>({value:e,cancelled:!0,finished:!1});function sC(e,t,r,n){let{callId:s,parentId:o,onRest:a}=t,{asyncTo:l,promise:u}=r;return o||e!==l||t.reset?r.promise=(async()=>{let c,d,f;r.asyncId=s,r.asyncTo=e;let h=sh(t,(e,t)=>"onRest"===t?void 0:e),p=new Promise((e,t)=>(c=e,d=t)),g=e=>{let t=s<=(r.cancelId||0)&&sP(n)||s!==r.asyncId&&s_(n,!1);if(t)throw e.result=t,d(e),e},m=(e,t)=>{let o=new sT,a=new sR;return(async()=>{if(nA.skipAnimation)throw sO(r),a.result=s_(n,!1),d(a),a;g(o);let l=nG.obj(e)?{...e}:{...t,to:e};l.parentId=s,nJ(h,(e,t)=>{nG.und(l[t])&&(l[t]=e)});let u=await n.start(l);return g(o),r.paused&&await new Promise(e=>{r.resumeQueue.add(e)}),u})()};if(nA.skipAnimation)return sO(r),s_(n,!1);try{let t;t=nG.arr(e)?(async e=>{for(let t of e)await m(t)})(e):Promise.resolve(e(m,n.stop.bind(n))),await Promise.all([t.then(c),p]),f=s_(n.get(),!0,!1)}catch(e){if(e instanceof sT)f=e.result;else if(e instanceof sR)f=e.result;else throw e}finally{s==r.asyncId&&(r.asyncId=o,r.asyncTo=o?l:void 0,r.promise=o?u:void 0)}return nG.fun(a)&&n_.batchedUpdates(()=>{a(f,n,n.item)}),f})():u}function sO(e,t){nQ(e.timeouts,e=>e.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var sT=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},sR=class extends Error{constructor(){super("SkipAnimationSignal")}},sB=e=>e instanceof sD,sN=1,sD=class extends iO{constructor(){super(...arguments),this.id=sN++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){let e=i3(this);return e&&e.getValue()}to(...e){return nA.to(this,e)}interpolate(...e){return iG(`${iV}The "interpolate" function is deprecated in v9 (use "to" instead)`),nA.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){iC(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||n9.sort(this),iC(this,{type:"priority",parent:this,priority:e})}},sL=Symbol.for("SpringPhase"),sM=e=>(1&e[sL])>0,sU=e=>(2&e[sL])>0,sF=e=>(4&e[sL])>0,sj=(e,t)=>t?e[sL]|=3:e[sL]&=-3,sz=(e,t)=>t?e[sL]|=4:e[sL]&=-5,s$=class extends sD{constructor(e,t){if(super(),this.animation=new sA,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!nG.und(e)||!nG.und(t)){let r=nG.obj(e)?{...e}:{...t,from:e};nG.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(sU(this)||this._state.asyncTo)||sF(this)}get goal(){return i_(this.animation.to)}get velocity(){let e=i3(this);return e instanceof i5?e.lastVelocity||0:e.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return sM(this)}get isAnimating(){return sU(this)}get isPaused(){return sF(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1,n=this.animation,{toValues:s}=n,{config:o}=n,a=i6(n.to);!a&&iI(n.to)&&(s=nZ(i_(n.to))),n.values.forEach((l,u)=>{if(l.done)return;let c=l.constructor==i9?1:a?a[u].lastPosition:s[u],d=n.immediate,f=c;if(!d){let t;if(f=l.lastPosition,o.tension<=0){l.done=!0;return}let r=l.elapsedTime+=e,s=n.fromValues[u],a=null!=l.v0?l.v0:l.v0=nG.arr(o.velocity)?o.velocity[u]:o.velocity,h=o.precision||(s==c?.005:Math.min(1,.001*Math.abs(c-s)));if(nG.und(o.duration))if(o.decay){let e=!0===o.decay?.998:o.decay,n=Math.exp(-(1-e)*r);f=s+a/(1-e)*(1-n),d=Math.abs(l.lastPosition-f)<=h,t=a*n}else{t=null==l.lastVelocity?a:l.lastVelocity;let r=o.restVelocity||h/10,n=o.clamp?0:o.bounce,u=!nG.und(n),p=s==c?l.v0>0:s<c,g=!1,m=Math.ceil(e/1);for(let e=0;e<m&&!(!(Math.abs(t)>r)&&(d=Math.abs(c-f)<=h));++e){u&&(f==c||f>c==p)&&(t=-t*n,f=c);let e=(-(1e-6*o.tension)*(f-c)+-(.001*o.friction)*t)/o.mass;t+=+e,f+=+t}}else{let n=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,l.durationProgress>0&&(l.elapsedTime=o.duration*l.durationProgress,r=l.elapsedTime+=e)),l.durationProgress=n=(n=(o.progress||0)+r/this._memoizedDuration)>1?1:n<0?0:n),t=((f=s+o.easing(n)*(c-s))-l.lastPosition)/e,d=1==n}l.lastVelocity=t,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),d=!0)}a&&!a[u].done&&(d=!1),d?l.done=!0:t=!1,l.setValue(f,o.round)&&(r=!0)});let l=i3(this),u=l.getValue();if(t){let e=i_(n.to);(u!==e||r)&&!o.decay?(l.setValue(e),this._onChange(e)):r&&o.decay&&this._onChange(u),this._stop()}else r&&this._onChange(u)}set(e){return n_.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(sU(this)){let{to:e,config:t}=this.animation;n_.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return nG.und(e)?(r=this.queue||[],this.queue=[]):r=[nG.obj(e)?e:{...t,to:e}],Promise.all(r.map(e=>this._update(e))).then(e=>sk(this,e))}stop(e){let{to:t}=this.animation;return this._focus(this.get()),sO(this._state,e&&this._lastCallId),n_.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){let t=this.key||"",{to:r,from:n}=e;(null==(r=nG.obj(r)?r[t]:r)||sb(r))&&(r=void 0),null==(n=nG.obj(n)?n[t]:n)&&(n=void 0);let s={to:r,from:n};return!sM(this)&&(e.reverse&&([r,n]=[n,r]),n=i_(n),nG.und(n)?i3(this)||this._set(r):this._set(n)),s}_update({...e},t){let{key:r,defaultProps:n}=this;e.default&&Object.assign(n,sh(e,(e,t)=>/^on/.test(t)?sc(e,r):e)),sK(this,e,"onProps"),sJ(this,"onProps",e,this);let s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let o=this._state;return sS(++this._lastCallId,{key:r,props:e,defaultProps:n,state:o,actions:{pause:()=>{sF(this)||(sz(this,!0),nX(o.pauseQueue),sJ(this,"onPause",s_(this,sH(this,this.animation.to)),this))},resume:()=>{sF(this)&&(sz(this,!1),sU(this)&&this._resume(),nX(o.resumeQueue),sJ(this,"onResume",s_(this,sH(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(r=>{if(e.loop&&r.finished&&!(t&&r.noop)){let t=sV(e);if(t)return this._update(t,!0)}return r})}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(sP(this));let n=!nG.und(e.to),s=!nG.und(e.from);if(n||s)if(!(t.callId>this._lastToId))return r(sP(this));else this._lastToId=t.callId;let{key:o,defaultProps:a,animation:l}=this,{to:u,from:c}=l,{to:d=u,from:f=c}=e;s&&!n&&(!t.default||nG.und(d))&&(d=f),t.reverse&&([d,f]=[f,d]);let h=!nW(f,c);h&&(l.from=f),f=i_(f);let p=!nW(d,u);p&&this._focus(d);let g=sb(t.to),{config:m}=l,{decay:y,velocity:b}=m;(n||s)&&(m.velocity=0),t.config&&!g&&function(e,t,r){for(let n in r&&(sw(r={...r},t),t={...r,...t}),sw(e,t),Object.assign(e,t),sv)null==e[n]&&(e[n]=sv[n]);let{frequency:n,damping:s}=e,{mass:o}=e;nG.und(n)||(n<.01&&(n=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/n,2)*o,e.friction=4*Math.PI*s*o/n)}(m,sl(t.config,o),t.config!==a.config?sl(a.config,o):void 0);let v=i3(this);if(!v||nG.und(d))return r(s_(this,!0));let x=nG.und(t.reset)?s&&!t.default:!nG.und(f)&&su(t.reset,o),w=x?f:this.get(),E=sy(d),A=nG.num(E)||nG.arr(E)||iK(E),S=!g&&(!A||su(a.immediate||t.immediate,o));if(p){let e=sn(d);if(e!==v.constructor)if(S)v=this._set(E);else throw Error(`Cannot animate between ${v.constructor.name} and ${e.name}, as the "to" prop suggests`)}let k=v.constructor,I=iI(d),_=!1;if(!I){let e=x||!sM(this)&&h;(p||e)&&(I=!(_=nW(sy(w),E))),(nW(l.immediate,S)||S)&&nW(m.decay,y)&&nW(m.velocity,b)||(I=!0)}if(_&&sU(this)&&(l.changed&&!x?I=!0:I||this._stop(u)),!g&&((I||iI(u))&&(l.values=v.getPayload(),l.toValues=iI(d)?null:k==i9?[1]:nZ(E)),l.immediate!=S&&(l.immediate=S,S||x||this._set(u)),I)){let{onRest:e}=l;nK(sW,e=>sK(this,t,e));let n=s_(this,sH(this,u));nX(this._pendingCalls,n),this._pendingCalls.add(r),l.changed&&n_.batchedUpdates(()=>{l.changed=!x,e?.(n,this),x?sl(a.onRest,n):l.onStart?.(n,this)})}x&&this._set(w),g?r(sC(t.to,t,this._state,this)):I?this._start():sU(this)&&!p?this._pendingCalls.add(r):r(sI(w))}_focus(e){let t=this.animation;e!==t.to&&(iP(this)&&this._detach(),t.to=e,iP(this)&&this._attach())}_attach(){let e=0,{to:t}=this.animation;iI(t)&&(iR(t,this),sB(t)&&(e=t.priority+1)),this.priority=e}_detach(){let{to:e}=this.animation;iI(e)&&iB(e,this)}_set(e,t=!0){let r=i_(e);if(!nG.und(r)){let e=i3(this);if(!e||!nW(r,e.getValue())){let n=sn(r);e&&e.constructor==n?e.setValue(r):i8(this,n.create(r)),e&&n_.batchedUpdates(()=>{this._onChange(r,t)})}}return i3(this)}_onStart(){let e=this.animation;e.changed||(e.changed=!0,sJ(this,"onStart",s_(this,sH(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),sl(this.animation.onChange,e,this)),sl(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){let e=this.animation;i3(this).reset(i_(e.to)),e.immediate||(e.fromValues=e.values.map(e=>e.lastPosition)),!sU(this)&&(sj(this,!0),sF(this)||this._resume())}_resume(){nA.skipAnimation?this.finish():n9.start(this)}_stop(e,t){if(sU(this)){sj(this,!1);let r=this.animation;nK(r.values,e=>{e.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),iC(this,{type:"idle",parent:this});let n=t?sP(this.get()):s_(this.get(),sH(this,e??r.to));nX(this._pendingCalls,n),r.changed&&(r.changed=!1,sJ(this,"onRest",n,this))}}};function sH(e,t){let r=sy(t);return nW(sy(e.get()),r)}function sV(e,t=e.loop,r=e.to){let n=sl(t);if(n){let s=!0!==n&&sm(n),o=(s||e).reverse,a=!s||s.reset;return sq({...e,loop:t,default:!1,pause:void 0,to:!o||sb(r)?r:void 0,from:a?e.from:void 0,reset:a,...s})}}function sq(e){let{to:t,from:r}=e=sm(e),n=new Set;return nG.obj(t)&&sG(t,n),nG.obj(r)&&sG(r,n),e.keys=n.size?Array.from(n):null,e}function sG(e,t){nJ(e,(e,r)=>null!=e&&t.add(r))}var sW=["onStart","onRest","onChange","onPause","onResume"];function sK(e,t,r){e.animation[r]=t[r]!==sd(t,r)?sc(t[r],e.key):void 0}function sJ(e,t,...r){e.animation[t]?.(...r),e.defaultProps[t]?.(...r)}var sZ=["onStart","onChange","onRest"],sQ=1,sX=class{constructor(e,t){this.id=sQ++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){let e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(let t in e){let r=e[t];nG.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(sq(e)),this}start(e){let{queue:t}=this;return(e?t=nZ(e).map(sq):this.queue=[],this._flush)?this._flush(this,t):(s6(this,t),sY(this,t))}stop(e,t){if(!!e!==e&&(t=e),t){let r=this.springs;nK(nZ(t),t=>r[t].stop(!!e))}else sO(this._state,this._lastAsyncId),this.each(t=>t.stop(!!e));return this}pause(e){if(nG.und(e))this.start({pause:!0});else{let t=this.springs;nK(nZ(e),e=>t[e].pause())}return this}resume(e){if(nG.und(e))this.start({pause:!1});else{let t=this.springs;nK(nZ(e),e=>t[e].resume())}return this}each(e){nJ(this.springs,e)}_onFrame(){let{onStart:e,onChange:t,onRest:r}=this._events,n=this._active.size>0,s=this._changed.size>0;(n&&!this._started||s&&!this._started)&&(this._started=!0,nQ(e,([e,t])=>{t.value=this.get(),e(t,this,this._item)}));let o=!n&&this._started,a=s||o&&r.size?this.get():null;s&&t.size&&nQ(t,([e,t])=>{t.value=a,e(t,this,this._item)}),o&&(this._started=!1,nQ(r,([e,t])=>{t.value=a,e(t,this,this._item)}))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}n_.onFrame(this._onFrame)}};function sY(e,t){return Promise.all(t.map(t=>s0(e,t))).then(t=>sk(e,t))}async function s0(e,t,r){let{keys:n,to:s,from:o,loop:a,onRest:l,onResolve:u}=t,c=nG.obj(t.default)&&t.default;a&&(t.loop=!1),!1===s&&(t.to=null),!1===o&&(t.from=null);let d=nG.arr(s)||nG.fun(s)?s:void 0;d?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):nK(sZ,r=>{let n=t[r];if(nG.fun(n)){let s=e._events[r];t[r]=({finished:e,cancelled:t})=>{let r=s.get(n);r?(e||(r.finished=!1),t&&(r.cancelled=!0)):s.set(n,{value:null,finished:e||!1,cancelled:t||!1})},c&&(c[r]=t[r])}});let f=e._state;!f.paused===t.pause?(f.paused=t.pause,nX(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);let h=(n||Object.keys(e.springs)).map(r=>e.springs[r].start(t)),p=!0===t.cancel||!0===sd(t,"cancel");(d||p&&f.asyncId)&&h.push(sS(++e._lastAsyncId,{props:t,state:f,actions:{pause:nV,resume:nV,start(t,r){p?(sO(f,e._lastAsyncId),r(sP(e))):(t.onRest=l,r(sC(d,t,f,e)))}}})),f.paused&&await new Promise(e=>{f.resumeQueue.add(e)});let g=sk(e,await Promise.all(h));if(a&&g.finished&&!(r&&g.noop)){let r=sV(t,a,s);if(r)return s6(e,[r]),s0(e,r,!0)}return u&&n_.batchedUpdates(()=>u(g,e,e.item)),g}function s1(e,t){let r={...e.springs};return t&&nK(nZ(t),e=>{nG.und(e.keys)&&(e=sq(e)),nG.obj(e.to)||(e={...e,to:void 0}),s8(r,e,e=>s3(e))}),s2(e,r),r}function s2(e,t){nJ(t,(t,r)=>{e.springs[r]||(e.springs[r]=t,iR(t,e))})}function s3(e,t){let r=new s$;return r.key=e,t&&iR(r,t),r}function s8(e,t,r){t.keys&&nK(t.keys,n=>{(e[n]||(e[n]=r(n)))._prepareNode(t)})}function s6(e,t){nK(t,t=>{s8(e.springs,t,t=>s3(t,e))})}var s4=({children:e,...t})=>{let r=(0,ep.useContext)(s5),n=t.pause||!!r.pause,s=t.immediate||!!r.immediate;t=function(e,t){let[r]=(0,ep.useState)(()=>({inputs:t,result:e()})),n=(0,ep.useRef)(),s=n.current,o=s;return o?t&&o.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,o.inputs)||(o={inputs:t,result:e()}):o=r,(0,ep.useEffect)(()=>{n.current=o,s==r&&(r.inputs=r.result=void 0)},[o]),o.result}(()=>({pause:n,immediate:s}),[n,s]);let{Provider:o}=s5;return ep.createElement(o,{value:t},e)},s5=(n={},Object.assign(r=s4,ep.createContext(n)),r.Provider._context=r,r.Consumer._context=r,r);s4.Provider=s5.Provider,s4.Consumer=s5.Consumer;var s9=()=>{let e=[],t=function(t){iW(`${iV}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);let n=[];return nK(e,(e,s)=>{if(nG.und(t))n.push(e.start());else{let o=r(t,e,s);o&&n.push(e.start(o))}}),n};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){let r=e.indexOf(t);~r&&e.splice(r,1)},t.pause=function(){return nK(e,e=>e.pause(...arguments)),this},t.resume=function(){return nK(e,e=>e.resume(...arguments)),this},t.set=function(t){nK(e,(e,r)=>{let n=nG.fun(t)?t(r,e):t;n&&e.set(n)})},t.start=function(t){let r=[];return nK(e,(e,n)=>{if(nG.und(t))r.push(e.start());else{let s=this._getProps(t,e,n);s&&r.push(e.start(s))}}),r},t.stop=function(){return nK(e,e=>e.stop(...arguments)),this},t.update=function(t){return nK(e,(e,r)=>e.update(this._getProps(t,e,r))),this};let r=function(e,t,r){return nG.fun(e)?e(r,t):e};return t._getProps=r,t},s7=class extends sD{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=iA(...t);let r=this._get();i8(this,sn(r).create(r))}advance(e){let t=this._get();nW(t,this.get())||(i3(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&ot(this._active)&&or(this)}_get(){let e=nG.arr(this.source)?this.source.map(i_):nZ(i_(this.source));return this.calc(...e)}_start(){this.idle&&!ot(this._active)&&(this.idle=!1,nK(i6(this),e=>{e.done=!1}),nA.skipAnimation?(n_.batchedUpdates(()=>this.advance()),or(this)):n9.start(this))}_attach(){let e=1;nK(nZ(this.source),t=>{iI(t)&&iR(t,this),sB(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){nK(nZ(this.source),e=>{iI(e)&&iB(e,this)}),this._active.clear(),or(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=nZ(this.source).reduce((e,t)=>Math.max(e,(sB(t)?t.priority:0)+1),0))}};function oe(e){return!1!==e.idle}function ot(e){return!e.size||Array.from(e).every(oe)}function or(e){e.idle||(e.idle=!0,nK(i6(e),e=>{e.done=!0}),iC(e,{type:"idle",parent:e}))}nA.assign({createStringInterpolator:iH,to:(e,t)=>new s7(e,t)}),n9.advance;var on=/^--/,oi={},os={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oo=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),oa=["Webkit","Ms","Moz","O"];os=Object.keys(os).reduce((e,t)=>(oa.forEach(r=>e[oo(r,t)]=e[t]),e),os);var ol=/^(matrix|translate|scale|rotate|skew)/,ou=/^(translate)/,oc=/^(rotate|skew)/,od=(e,t)=>nG.num(e)&&0!==e?e+t:e,of=(e,t)=>nG.arr(e)?e.every(e=>of(e,t)):nG.num(e)?e===t:parseFloat(e)===t,oh=class extends se{constructor({x:e,y:t,z:r,...n}){let s=[],o=[];(e||t||r)&&(s.push([e||0,t||0,r||0]),o.push(e=>[`translate3d(${e.map(e=>od(e,"px")).join(",")})`,of(e,0)])),nJ(n,(e,t)=>{if("transform"===t)s.push([e||""]),o.push(e=>[e,""===e]);else if(ol.test(t)){if(delete n[t],nG.und(e))return;let r=ou.test(t)?"px":oc.test(t)?"deg":"";s.push(nZ(e)),o.push("rotate3d"===t?([e,t,n,s])=>[`rotate3d(${e},${t},${n},${od(s,r)})`,of(s,0)]:e=>[`${t}(${e.map(e=>od(e,r)).join(",")})`,of(e,+!!t.startsWith("scale"))])}}),s.length&&(n.transform=new op(s,o)),super(n)}},op=class extends iO{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return nK(this.inputs,(r,n)=>{let s=i_(r[0]),[o,a]=this.transforms[n](nG.arr(s)?s:r.map(i_));e+=" "+o,t=t&&a}),t?"none":e}observerAdded(e){1==e&&nK(this.inputs,e=>nK(e,e=>iI(e)&&iR(e,this)))}observerRemoved(e){0==e&&nK(this.inputs,e=>nK(e,e=>iI(e)&&iB(e,this)))}eventObserved(e){"change"==e.type&&(this._value=null),iC(this,e)}};nA.assign({batchedUpdates:tt.unstable_batchedUpdates,createStringInterpolator:iH,colors:{transparent:0,aliceblue:0xf0f8ffff,antiquewhite:0xfaebd7ff,aqua:0xffffff,aquamarine:0x7fffd4ff,azure:0xf0ffffff,beige:0xf5f5dcff,bisque:0xffe4c4ff,black:255,blanchedalmond:0xffebcdff,blue:65535,blueviolet:0x8a2be2ff,brown:0xa52a2aff,burlywood:0xdeb887ff,burntsienna:0xea7e5dff,cadetblue:0x5f9ea0ff,chartreuse:0x7fff00ff,chocolate:0xd2691eff,coral:0xff7f50ff,cornflowerblue:0x6495edff,cornsilk:0xfff8dcff,crimson:0xdc143cff,cyan:0xffffff,darkblue:35839,darkcyan:9145343,darkgoldenrod:0xb8860bff,darkgray:0xa9a9a9ff,darkgreen:6553855,darkgrey:0xa9a9a9ff,darkkhaki:0xbdb76bff,darkmagenta:0x8b008bff,darkolivegreen:0x556b2fff,darkorange:0xff8c00ff,darkorchid:0x9932ccff,darkred:0x8b0000ff,darksalmon:0xe9967aff,darkseagreen:0x8fbc8fff,darkslateblue:0x483d8bff,darkslategray:0x2f4f4fff,darkslategrey:0x2f4f4fff,darkturquoise:0xced1ff,darkviolet:0x9400d3ff,deeppink:0xff1493ff,deepskyblue:0xbfffff,dimgray:0x696969ff,dimgrey:0x696969ff,dodgerblue:0x1e90ffff,firebrick:0xb22222ff,floralwhite:0xfffaf0ff,forestgreen:0x228b22ff,fuchsia:0xff00ffff,gainsboro:0xdcdcdcff,ghostwhite:0xf8f8ffff,gold:0xffd700ff,goldenrod:0xdaa520ff,gray:0x808080ff,green:8388863,greenyellow:0xadff2fff,grey:0x808080ff,honeydew:0xf0fff0ff,hotpink:0xff69b4ff,indianred:0xcd5c5cff,indigo:0x4b0082ff,ivory:0xfffff0ff,khaki:0xf0e68cff,lavender:0xe6e6faff,lavenderblush:0xfff0f5ff,lawngreen:0x7cfc00ff,lemonchiffon:0xfffacdff,lightblue:0xadd8e6ff,lightcoral:0xf08080ff,lightcyan:0xe0ffffff,lightgoldenrodyellow:0xfafad2ff,lightgray:0xd3d3d3ff,lightgreen:0x90ee90ff,lightgrey:0xd3d3d3ff,lightpink:0xffb6c1ff,lightsalmon:0xffa07aff,lightseagreen:0x20b2aaff,lightskyblue:0x87cefaff,lightslategray:0x778899ff,lightslategrey:0x778899ff,lightsteelblue:0xb0c4deff,lightyellow:0xffffe0ff,lime:0xff00ff,limegreen:0x32cd32ff,linen:0xfaf0e6ff,magenta:0xff00ffff,maroon:0x800000ff,mediumaquamarine:0x66cdaaff,mediumblue:52735,mediumorchid:0xba55d3ff,mediumpurple:0x9370dbff,mediumseagreen:0x3cb371ff,mediumslateblue:0x7b68eeff,mediumspringgreen:0xfa9aff,mediumturquoise:0x48d1ccff,mediumvioletred:0xc71585ff,midnightblue:0x191970ff,mintcream:0xf5fffaff,mistyrose:0xffe4e1ff,moccasin:0xffe4b5ff,navajowhite:0xffdeadff,navy:33023,oldlace:0xfdf5e6ff,olive:0x808000ff,olivedrab:0x6b8e23ff,orange:0xffa500ff,orangered:0xff4500ff,orchid:0xda70d6ff,palegoldenrod:0xeee8aaff,palegreen:0x98fb98ff,paleturquoise:0xafeeeeff,palevioletred:0xdb7093ff,papayawhip:0xffefd5ff,peachpuff:0xffdab9ff,peru:0xcd853fff,pink:0xffc0cbff,plum:0xdda0ddff,powderblue:0xb0e0e6ff,purple:0x800080ff,rebeccapurple:0x663399ff,red:0xff0000ff,rosybrown:0xbc8f8fff,royalblue:0x4169e1ff,saddlebrown:0x8b4513ff,salmon:0xfa8072ff,sandybrown:0xf4a460ff,seagreen:0x2e8b57ff,seashell:0xfff5eeff,sienna:0xa0522dff,silver:0xc0c0c0ff,skyblue:0x87ceebff,slateblue:0x6a5acdff,slategray:0x708090ff,slategrey:0x708090ff,snow:0xfffafaff,springgreen:0xff7fff,steelblue:0x4682b4ff,tan:0xd2b48cff,teal:8421631,thistle:0xd8bfd8ff,tomato:0xff6347ff,turquoise:0x40e0d0ff,violet:0xee82eeff,wheat:0xf5deb3ff,white:0xffffffff,whitesmoke:0xf5f5f5ff,yellow:0xffff00ff,yellowgreen:0x9acd32ff}});var og=((e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=e=>new se(e),getComponentProps:n=e=>e}={})=>{let s={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:n},o=e=>{let t=sa(e)||"Anonymous";return(e=nG.str(e)?o[e]||(o[e]=si(e,s)):e[so]||(e[so]=si(e,s))).displayName=`Animated(${t})`,e};return nJ(e,(t,r)=>{nG.arr(e)&&(r=sa(t)),o[r]=o(t)}),{animated:o}})(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;let r="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{style:n,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...u}=t,c=Object.values(u),d=Object.keys(u).map(t=>r||e.hasAttribute(t)?t:oi[t]||(oi[t]=t.replace(/([A-Z])/g,e=>"-"+e.toLowerCase())));for(let t in void 0!==s&&(e.textContent=s),n)if(n.hasOwnProperty(t)){var f;let r=null==(f=n[t])||"boolean"==typeof f||""===f?"":"number"!=typeof f||0===f||on.test(t)||os.hasOwnProperty(t)&&os[t]?(""+f).trim():f+"px";on.test(t)?e.style.setProperty(t,r):e.style[t]=r}d.forEach((t,r)=>{e.setAttribute(t,c[r])}),void 0!==o&&(e.scrollTop=o),void 0!==a&&(e.scrollLeft=a),void 0!==l&&e.setAttribute("viewBox",l)},createAnimatedStyle:e=>new oh(e),getComponentProps:({scrollTop:e,scrollLeft:t,...r})=>r}).animated;ed("d1AnZ");var om=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:[(0,eh.jsx)("circle",{cx:12,cy:12,r:12,fill:"currentColor"}),(0,eh.jsx)("path",{fill:"var(--checkmark-tick-color, white)",d:"M16.912 7.661c.38-.365.999-.362 1.38.004l.016.016a.915.915 0 0 1 0 1.33l-7.617 7.324a1.01 1.01 0 0 1-1.386-.004l-3.61-3.47a.92.92 0 0 1-.003-1.334l.016-.016c.382-.367 1-.37 1.386.003L10 14.308z"})]});ed("d1AnZ");var oy=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:[(0,eh.jsx)("path",{fill:"currentColor",d:"M18.292 7.665c-.381-.366-1-.369-1.38-.004L10 14.308l-2.906-2.794a1.004 1.004 0 0 0-1.386-.003l-.016.016a.92.92 0 0 0 .003 1.334l3.61 3.47a1.01 1.01 0 0 0 1.386.004l7.618-7.324a.915.915 0 0 0 0-1.33z"}),(0,eh.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12m-2 0c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10",clipRule:"evenodd"})]});function ob({animate:e=!0,checked:t,checkedColor:r,uncheckedColor:n="var(--neutral-400)",tickColor:s}){let{style:o,trigger:a}=function({x:e=0,y:t=0,rotation:r=0,scale:n=1,scaleX:s=1,timing:o=150,springConfig:a={tension:300,friction:10},delay:l=0}){let[u,c]=(0,ep.useState)(!1),d=function(e,t){let r=nG.fun(e),[[n],s]=function(e,t,r){let n=nG.fun(t)&&t;n&&!r&&(r=[]);let s=(0,ep.useMemo)(()=>n||3==arguments.length?s9():void 0,[]),o=(0,ep.useRef)(0),a=iQ(),l=(0,ep.useMemo)(()=>({ctrls:[],queue:[],flush(e,t){let r=s1(e,t);return!(o.current>0)||l.queue.length||Object.keys(r).some(t=>!e.springs[t])?new Promise(n=>{s2(e,r),l.queue.push(()=>{n(sY(e,t))}),a()}):sY(e,t)}}),[]),u=(0,ep.useRef)([...l.ctrls]),c=[],d=i0(e)||0;function f(e,r){for(let s=e;s<r;s++){let e=u.current[s]||(u.current[s]=new sX(null,l.flush)),r=n?n(s,e):t[s];r&&(c[s]=function(e){let t=sq(e);return nG.und(t.default)&&(t.default=sh(t)),t}(r))}}(0,ep.useMemo)(()=>{nK(u.current.slice(e,d),e=>{e.ref?.delete(e),s?.delete(e),e.stop(!0)}),u.current.length=e,f(d,e)},[e]),(0,ep.useMemo)(()=>{f(0,Math.min(d,e))},r);let h=u.current.map((e,t)=>s1(e,c[t])),p=(0,ep.useContext)(s4),g=i0(p),m=p!==g&&function(e){for(let t in e)return!0;return!1}(p);iJ(()=>{o.current++,l.ctrls=u.current;let{queue:e}=l;e.length&&(l.queue=[],nK(e,e=>e())),nK(u.current,(e,t)=>{s?.add(e),m&&e.start({default:p});let r=c[t];if(r){var n;(n=r.ref)&&e.ref!==n&&(e.ref?.delete(e),n.add(e),e.ref=n),e.ref?e.queue.push(r):e.start(r)}})}),iX(()=>()=>{nK(l.ctrls,e=>e.stop(!0))});let y=h.map(e=>({...e}));return s?[y,s]:y}(1,r?e:[e],r?t||[]:t);return r||2==arguments.length?[n,s]:n}({backfaceVisibility:"hidden",transform:u?`translate(${e}px, ${t}px)
         rotate(${r}deg)
         scale(${n})
         scaleX(${s})`:`translate(0px, 0px)
         rotate(0deg)
         scale(1)
         scaleX(1)`,config:a,delay:l});return(0,ep.useEffect)(()=>{if(!u)return;let e=setTimeout(()=>c(!1),o);return()=>{clearTimeout(e)}},[u,o]),{style:d,trigger:(0,ep.useCallback)(()=>c(!0),[])}}({scale:1.15,timing:100});return((0,ep.useLayoutEffect)(()=>{e&&t&&a()},[e,t,a]),t)?(0,eh.jsx)(og.div,{style:o,children:(0,eh.jsx)(om,{style:Object.assign({display:"block",color:r},s?{"--checkmark-tick-color":s}:null)})}):(0,eh.jsx)("div",{children:(0,eh.jsx)(oy,{style:{display:"block",color:n}})})}var ep=(ed("d1AnZ"),ed("d1AnZ"));function ov(e,t){e&&"current"in e?e.current=t:"function"==typeof e&&e(t)}let ox=el(ep).forwardRef(({style:e,children:t,containerStyle:r,closeOnClickOutside:n=!0,render:s,renderWhenOpen:o,onClosed:a,...l},u)=>{let[c,d]=(0,ep.useState)(l.open??!1),f=(0,ep.useRef)(null),h=(0,ep.useRef)(a);h.current!==a&&(h.current=a);let[p,g]=(0,ep.useState)(r4);return(0,ep.useEffect)(()=>{tX(f.current,"Dialog not mounted");let e=()=>d(!0),t=()=>d(!1),r=f.current,n=new MutationObserver(t=>{for(let r of t)"attributes"===r.type&&r.target.open&&e()});return n.observe(r,{attributes:!0,attributeFilter:["open"]}),r.addEventListener("close",t),()=>{r.removeEventListener("close",t),n.disconnect()}},[]),(0,ep.useEffect)(()=>{let e=f.current;if(e){let t=()=>h.current?.();return e.addEventListener("close",t),()=>e.removeEventListener("close",t)}},[]),(0,ep.useEffect)(()=>{if(!n)return;let e=e=>{e.target===f.current&&f.current&&(f.current.returnValue="",f.current.close())};return document.body.addEventListener("click",e),()=>{document.body.removeEventListener("click",e)}},[n,u]),(0,ep.useEffect)(()=>{let e=e=>{if("Escape"===e.key){let t=e.target?.closest("dialog");t?.open&&(e.preventDefault(),t.close())}};return document.body.addEventListener("keydown",e),()=>{document.body.removeEventListener("keydown",e)}}),(0,eh.jsx)("dialog",{ref:(0,ep.useCallback)(e=>{ov(u,e),ov(f,e)},[u]),style:{overflow:"visible",backgroundColor:"transparent",...e},...l,children:(0,eh.jsx)("div",{ref:(0,ep.useCallback)(e=>{g(e?{uiScrollRootElement:e}:r4)},[]),className:"HjgJza_hiddenScrollbar",style:{height:"100%",overflow:"auto",overscrollBehaviorY:"contain",WebkitOverflowScrolling:"touch",...r},children:(0,eh.jsx)(r5.Provider,{value:p,children:o?c?o():null:s?s(c):t})})})}),ow=window.innerWidth,oE=el(ep).forwardRef(({style:e,className:t,containerStyle:r,...n},s)=>{let o=ow>600;return(0,eh.jsx)(ox,{ref:s,className:el(rt)("nsGwZa_appear","nsGwZa_dialog",t),style:{border:"none",height:"100vh",padding:0,top:o?void 0:0,zIndex:"var(--over-layout-index)",maxHeight:o?"70vh":"initial",width:"100vw",maxWidth:o?"var(--sheet-dialog-max-width)":"initial",...e},containerStyle:{backgroundColor:"var(--z-index-0)",borderRadius:12*!!o,paddingBlock:16,"--column-padding-inline":"16px",paddingInline:"var(--column-padding-inline)",...r},...n})});ed("d1AnZ"),ed("d1AnZ");var oA=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:270,height:60,fill:"none",viewBox:"0 0 270 60",...e,children:[(0,eh.jsx)("rect",{width:216,height:60,fill:"#404042",rx:8}),(0,eh.jsx)("path",{fill:"#ECECEC",d:"M170 30c0-16.568 13.431-30 30-30h70v60h-70c-16.569 0-30-13.431-30-30"}),(0,eh.jsx)("circle",{cx:31,cy:30,r:14.5,fill:"#404042",stroke:"#2C2C2E"}),(0,eh.jsx)("circle",{cx:200,cy:30,r:14.5,stroke:"#ABABAB"}),(0,eh.jsx)("rect",{width:100,height:48,x:58,y:6,fill:"#2C2C2E",rx:2}),(0,eh.jsxs)("g",{opacity:.3,children:[(0,eh.jsx)("path",{fill:"#959596",fillRule:"evenodd",d:"M108.405 14 104 21.179l4.405 2.557v-4.524l-3.944 1.761 3.944-1.762zm0 0v5.211l3.942 1.761-3.942-1.76v4.524l4.405-2.557zm0 14.096v-3.541L104 21.999zm0-3.54v3.54l4.408-6.097z",clipRule:"evenodd"}),(0,eh.jsx)("path",{fill:"#fff",d:"M80.768 34.6h5.484v1.224h-4.104v2.328h3.384v1.188h-3.384v2.436h4.248V43h-5.628zm7.29 6.732v-3.336H86.99v-1.14h1.068V35.14h1.308v1.716h1.5v1.14h-1.5V41.2c0 .48.168.66.66.66h.912V43h-1.2c-1.176 0-1.68-.552-1.68-1.668m4.084-6.732h1.296v3.144c.384-.528.972-.96 1.932-.96 1.368 0 2.484.744 2.484 2.796V43h-1.296v-3.312c0-1.164-.516-1.788-1.476-1.788-1.02 0-1.644.756-1.644 1.992V43h-1.296zm10.14 8.472c-1.932 0-3.144-1.248-3.144-3.132 0-1.896 1.212-3.156 3.024-3.156 1.776 0 2.964 1.128 3 2.928 0 .156-.012.324-.036.492h-4.632v.084c.036 1.044.696 1.728 1.716 1.728.792 0 1.368-.396 1.548-1.08h1.296c-.216 1.212-1.248 2.136-2.772 2.136m-1.74-3.816h3.276c-.108-.912-.744-1.428-1.644-1.428-.828 0-1.536.552-1.632 1.428m6.048-2.4h1.152l.144.924c.312-.516.804-.924 1.812-.924h.288v1.212h-.576c-1.152 0-1.524.9-1.524 1.848V43h-1.296zm7.198 6.216c-1.932 0-3.144-1.248-3.144-3.132 0-1.896 1.212-3.156 3.024-3.156 1.776 0 2.964 1.128 3 2.928 0 .156-.012.324-.036.492H112v.084c.036 1.044.696 1.728 1.716 1.728.792 0 1.368-.396 1.548-1.08h1.296c-.216 1.212-1.248 2.136-2.772 2.136m-1.74-3.816h3.276c-.108-.912-.744-1.428-1.644-1.428-.828 0-1.536.552-1.632 1.428m5.952 1.02v-3.42h1.296v3.276c0 1.2.48 1.812 1.428 1.812.984 0 1.584-.744 1.584-2.016v-3.072h1.296V43h-1.14l-.144-.78c-.384.468-.948.852-1.896.852-1.308 0-2.424-.696-2.424-2.796M125.261 43v-6.144h1.128l.144.804c.348-.456.876-.864 1.8-.876.804 0 1.524.324 1.896 1.116.396-.672 1.092-1.116 2.1-1.116 1.272 0 2.304.732 2.304 2.676V43h-1.296v-3.456c0-1.08-.444-1.644-1.284-1.644-.888 0-1.452.672-1.452 1.776V43h-1.308v-3.456c0-1.08-.444-1.644-1.296-1.644-.888 0-1.44.72-1.44 1.812V43z",opacity:.5})]})]});ed("d1AnZ");var oS=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:184,height:12,fill:"none",viewBox:"0 0 184 12",...e,children:[(0,eh.jsx)("path",{fill:"var(--black)",d:"M0 4h164v4H0zM164 2a2 2 0 0 1 2-2h14v12h-14a2 2 0 0 1-2-2z"}),(0,eh.jsx)("path",{fill:"#B5B5B5",d:"M180 2h4v8h-4z"})]});ed("d1AnZ");var ok=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:56,height:32,fill:"none",viewBox:"0 0 56 32",...e,children:[(0,eh.jsx)("path",{fill:"#959596",fillRule:"evenodd",d:"M28.405 0 24 7.179l4.405 2.557V5.212l-3.944 1.761 3.944-1.762zm0 0v5.211l3.942 1.761-3.942-1.76v4.524L32.81 7.18zm0 14.096v-3.541L24 7.998zm0-3.54v3.54l4.408-6.098z",clipRule:"evenodd"}),(0,eh.jsx)("path",{fill:"#fff",d:"M.768 20.6h5.484v1.224H2.148v2.328h3.384v1.188H2.148v2.436h4.248V29H.768zm7.29 6.732v-3.336H6.99v-1.14h1.068V21.14h1.308v1.716h1.5v1.14h-1.5V27.2c0 .48.168.66.66.66h.912V29h-1.2c-1.176 0-1.68-.552-1.68-1.668m4.084-6.732h1.296v3.144c.384-.528.972-.96 1.932-.96 1.368 0 2.484.744 2.484 2.796V29h-1.296v-3.312c0-1.164-.516-1.788-1.476-1.788-1.02 0-1.644.756-1.644 1.992V29h-1.296zm10.14 8.472c-1.932 0-3.144-1.248-3.144-3.132 0-1.896 1.212-3.156 3.024-3.156 1.776 0 2.964 1.128 3 2.928 0 .156-.012.324-.036.492h-4.632v.084c.036 1.044.696 1.728 1.716 1.728.792 0 1.368-.396 1.548-1.08h1.296c-.216 1.212-1.248 2.136-2.772 2.136m-1.74-3.816h3.276c-.108-.912-.744-1.428-1.644-1.428-.828 0-1.536.552-1.632 1.428m6.048-2.4h1.152l.144.924c.312-.516.804-.924 1.812-.924h.288v1.212h-.576c-1.152 0-1.524.9-1.524 1.848V29H26.59zm7.198 6.216c-1.932 0-3.144-1.248-3.144-3.132 0-1.896 1.212-3.156 3.024-3.156 1.776 0 2.964 1.128 3 2.928 0 .156-.012.324-.036.492H32v.084c.036 1.044.696 1.728 1.716 1.728.792 0 1.368-.396 1.548-1.08h1.296c-.216 1.212-1.248 2.136-2.772 2.136m-1.74-3.816h3.276c-.108-.912-.744-1.428-1.644-1.428-.828 0-1.536.552-1.632 1.428M38 26.276v-3.42h1.296v3.276c0 1.2.48 1.812 1.428 1.812.984 0 1.584-.744 1.584-2.016v-3.072h1.296V29h-1.14l-.144-.78c-.384.468-.948.852-1.896.852-1.308 0-2.424-.696-2.424-2.796M45.26 29v-6.144h1.129l.144.804c.348-.456.876-.864 1.8-.876.804 0 1.524.324 1.896 1.116.396-.672 1.092-1.116 2.1-1.116 1.272 0 2.304.732 2.304 2.676V29h-1.296v-3.456c0-1.08-.444-1.644-1.284-1.644-.888 0-1.452.672-1.452 1.776V29h-1.308v-3.456c0-1.08-.444-1.644-1.296-1.644-.888 0-1.44.72-1.44 1.812V29z",opacity:.5})]});function oI(){return(0,eh.jsxs)(re,{gap:0,justifyContent:"space-between",alignItems:"center",children:[(0,eh.jsx)(oS,{style:{animation:"fK5AQW_connectWire 2s",animationDelay:"1s",animationFillMode:"backwards",animationTimingFunction:"ease-in-out",zIndex:1}}),(0,eh.jsxs)("div",{style:{position:"relative",left:-4,zIndex:1},children:[(0,eh.jsx)("svg",{style:{position:"absolute",zIndex:-1,left:-50,top:-20,width:100,height:100,animation:"fK5AQW_pulse 2s",animationIterationCount:3,animationDelay:"3.5s",animationFillMode:"both"},viewBox:"0 0 100 100",children:(0,eh.jsx)("circle",{r:"50",cx:"50",cy:"50",fill:"var(--neutral-700)"})}),(0,eh.jsx)(oA,{style:{zIndex:1}}),(0,eh.jsx)("div",{style:{position:"absolute",left:80,top:14,width:56,height:32,backgroundColor:"#2c2c2e"}}),(0,eh.jsx)("div",{style:{position:"absolute",left:80,top:14,width:56,height:32,animationName:"fK5AQW_flash",animationDelay:"3.5s",animationDuration:"2.5s",animationTimingFunction:"steps(2, jump-none)",animationFillMode:"backwards"},children:(0,eh.jsx)(ok,{})})]})]})}function o_({checked:e,text:t}){return(0,eh.jsx)("li",{style:{color:e?"var(--black)":"var(--neutral-700)"},children:(0,eh.jsxs)(re,{gap:8,children:[(0,eh.jsx)(ob,{checked:e,uncheckedColor:"var(--neutral-400)",checkedColor:"var(--black)",tickColor:"var(--white)"}),t]})})}function oP({onSubmit:e}){return(0,eh.jsx)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:(0,eh.jsxs)(t4,{gap:16,children:[(0,eh.jsx)(t6,{kind:"headline/h3",children:"Enable Bluetooth Support"}),(0,eh.jsx)("div",{style:{backgroundColor:"var(--neutral-100)",borderRadius:8,padding:12},children:(0,eh.jsx)(t6,{kind:"small/regular",color:"var(--neutral-700)",children:"Due to browser limitations, signing flows for your hardware wallets will open in a tab view instead of popup or sidepanel."})}),(0,eh.jsxs)(t6,{kind:"caption/accent",color:"var(--neutral-500)",children:["You can turn this on or off anytime in"," ",(0,eh.jsx)("span",{style:{textDecoration:"underline"},children:"Settings  Experiments."})]}),(0,eh.jsx)(rs,{kind:"primary",style:{width:"100%"},onClick:e,children:"Enable Bluetooth Connection"})]})})}function oC({bluetoothSupportEnabled:e,onConnect:t,onBluetoothEnabled:r}){let n=(0,ep.useRef)(null),{mutate:s,isLoading:o,isSuccess:a,isError:l,error:u}=tZ({mutationFn:async e=>await (0,nv.connectDevice)({transportIdentifier:e}),onSuccess:e=>{t(e)}}),c=l?(0,nv.parseLedgerError)(u):null,d=c&&"TransportOpenUserCancelled"!==c.name&&"Error"!==c.name,f=c?._tag==="NoAccessibleDeviceError"||c?.message==="User cancelled the requestDevice() chooser.",h=rz(r);return(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(oE,{ref:n,containerStyle:{padding:24,borderRadius:16},style:{width:380,height:"max-content"},children:(0,eh.jsx)(oP,{onSubmit:()=>{h(),s(nv.transports.bluetooth),n.current?.close()}})}),(0,eh.jsxs)(r8,{style:{height:"100%"},paddingInline:24,children:[(0,eh.jsxs)(t4,{gap:24,children:[(0,eh.jsx)("div",{children:(0,eh.jsx)("div",{style:{backgroundColor:"var(--black)",borderRadius:"50%",padding:10,height:52,width:52},children:(0,eh.jsx)(nw,{style:{color:"var(--white)",width:32,height:32}})})}),(0,eh.jsx)(t6,{kind:"headline/hero",children:"Connect Ledger"}),(0,eh.jsx)(t6,{kind:"headline/h3",children:"Ensure your device:"}),(0,eh.jsx)(t6,{kind:"body/regular",children:(0,eh.jsxs)("ol",{style:{display:"grid",gap:16,margin:0,padding:0,listStyle:"none"},children:[(0,eh.jsx)(o_,{checked:a||!!d,text:"Connected to the computer."}),(0,eh.jsx)(o_,{checked:a,text:"Has Ethereum App or Solana App installed."})]})})]}),(0,eh.jsx)(nx,{paddingInline:!1,children:(0,eh.jsxs)("div",{style:{overflow:"hidden"},children:[(0,eh.jsx)(rH,{height:68}),(0,eh.jsx)(oI,{}),(0,eh.jsx)(rH,{height:28})]})}),(0,eh.jsxs)("div",{style:{marginTop:"auto"},children:[c&&!f?(0,eh.jsx)(t6,{kind:"small/regular",color:"var(--negative-500)",children:c.message}):null,(0,eh.jsx)(rH,{height:24}),o||a?(0,eh.jsxs)(re,{alignItems:"center",gap:24,children:[(0,eh.jsx)(no,{color:"var(--primary)",size:"24px"}),(0,eh.jsx)(t6,{kind:"headline/h3",children:"Connecting..."})]}):(0,eh.jsxs)(re,{gap:8,style:{gridTemplateColumns:!1!==e?"1fr 1fr":"1fr"},children:[(0,eh.jsx)(rs,{kind:"primary",onClick:()=>s(nv.transports.hid),style:{paddingInline:16},children:"Connect via USB"}),e?(0,eh.jsx)(rs,{kind:"primary",onClick:()=>s(nv.transports.bluetooth),style:{paddingInline:16},children:"Connect via Bluetooth"}):function(){if("undefined"==typeof window)return!1;let e=window.navigator.userAgent;return/Mac|iPhone|iPad|iPod/.test(e)}()&&null==e?(0,eh.jsxs)("div",{style:{position:"relative",width:"100%"},children:[(0,eh.jsx)(rs,{kind:"primary",onClick:()=>{n.current&&n.current.showModal()},style:{paddingInline:16,width:"100%"},children:"Connect via Bluetooth"}),(0,eh.jsx)("div",{style:{position:"absolute",top:-8,right:-8,borderRadius:8,backgroundColor:"var(--primary)",padding:"2px 8px"},children:(0,eh.jsx)(t6,{kind:"caption/accent",color:"var(--always-white)",children:"Beta"})})]}):null]}),(0,eh.jsx)(rH,{height:24})]})]})]})}var rl=(ed("a1T6e"),ed("a1T6e")),oO={};t(oO,"STANDARD_ERROR_MAP",function(){return oT}),t(oO,"formatJsonRpcRequest",function(){return oR.formatJsonRpcRequest}),t(oO,"isJsonRpcError",function(){return oR.isJsonRpcError}),t(oO,"isJsonRpcPayload",function(){return oR.isJsonRpcPayload}),t(oO,"isJsonRpcRequest",function(){return oR.isJsonRpcRequest}),t(oO,"isJsonRpcResponse",function(){return oR.isJsonRpcResponse}),t(oO,"isJsonRpcResult",function(){return oR.isJsonRpcResult}),t(oO,"STANDARD_ERROR_MAP",function(){return oR.STANDARD_ERROR_MAP}),t(oO,"formatJsonRpcRequest",function(){return oN}),t(oO,"isJsonRpcError",function(){return oF}),t(oO,"isJsonRpcPayload",function(){return oD}),t(oO,"isJsonRpcRequest",function(){return oL}),t(oO,"isJsonRpcResponse",function(){return oM}),t(oO,"isJsonRpcResult",function(){return oU});"use strict";let oT={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},INTERNAL_ERROR:{code:-32603,message:"Internal error"},SERVER_ERROR:{code:-32e3,message:"Server error"}};var oR={};function oB(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function oN(e,t,r){return{id:r||function(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}(),jsonrpc:"2.0",method:e,params:t}}function oD(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function oL(e){return oD(e)&&"method"in e}function oM(e){return oD(e)&&(oU(e)||oF(e))}function oU(e){return"result"in e}function oF(e){return"error"in e}Object.defineProperty(oR,"__esModule",{value:!0}),oB(ed("h3f2T"),oR),oB(ed("dCyCI"),oR),oR.isNode;let oj=1,oz=crypto.getRandomValues(new Uint32Array(1))[0];class o${constructor({name:e}){this.pendingRequests=new Map,this.emitter=rV(),this.name=e,this.trackPendingRequests()}initialize(){this.port=el(rl).runtime.connect({name:this.name}),this.port.onMessage.addListener(e=>{this.emitter.emit("message",e)}),this.emitter.emit("connect")}trackPendingRequests(){this.emitter.on("postMessage",e=>{this.pendingRequests.set(e.id,e)}),this.emitter.on("message",e=>{oD(e)&&(oF(e)&&(console.group("Port method error"),console.table(this.pendingRequests.get(e.id)),console.table(e),console.groupEnd()),this.pendingRequests.delete(e.id))}),this.emitter.on("connect",()=>{for(let e of(tX(this.port,"Port must exist immediately after connect event"),this.pendingRequests.values()))this.port.postMessage(e)})}async request(e,t,r){tX(this.port,`Port not initialized: (${this.name})`);let n=oN(e,t,r??oz+oj++);return this.emitter.emit("postMessage",n),this.port.postMessage(n),this.getPromise(n.id)}getPromise(e){return new Promise((t,r)=>{let n=this.emitter.on("message",s=>{oD(s)&&oM(s)&&s.id===e&&(oU(s)?t(s.result):r(s.error),n())})})}}let oH=new o$({name:`${el(rl).runtime.id}/wallet`});async function oV(){return oH.request("uiGetCurrentWallet").then(()=>{throw Error("Ledger code is not sandboxed!")},()=>null)}var ep=ed("d1AnZ"),nv=ed("fdr9l");ed("d1AnZ");var oq=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:[(0,eh.jsx)("path",{fill:"currentColor",d:"M20.333 12.958c0 1.992-.704 3.82-1.88 5.25-.291.357-.295.883.031 1.208.325.323.852.325 1.15-.024A9.9 9.9 0 0 0 22 12.958C22 7.458 17.523 3 12 3S2 7.459 2 12.958c0 2.453.89 4.699 2.367 6.434.297.349.824.347 1.149.024.326-.325.322-.851.03-1.207a8.24 8.24 0 0 1-1.88-5.25c0-4.584 3.732-8.3 8.334-8.3s8.333 3.716 8.333 8.3"}),(0,eh.jsx)("path",{fill:"currentColor",d:"M18.667 12.958c0 1.537-.524 2.95-1.404 4.076-.282.36-.811.358-1.136.034-.326-.325-.32-.85-.051-1.225.582-.813.924-1.81.924-2.885 0-2.75-2.239-4.979-5-4.979s-5 2.23-5 4.98c0 1.075.342 2.07.924 2.885.268.374.275.9-.051 1.225-.325.323-.854.325-1.136-.035a6.6 6.6 0 0 1-1.404-4.076C5.333 9.292 8.318 6.32 12 6.32s6.667 2.973 6.667 6.64"}),(0,eh.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.818 16.177a3.32 3.32 0 0 0 2.515-3.219A3.326 3.326 0 0 0 12 9.638a3.326 3.326 0 0 0-3.333 3.32 3.32 3.32 0 0 0 2.551 3.228l-.015 4.011a.8.8 0 1 0 1.6.006zM12 14.618c.92 0 1.667-.743 1.667-1.66s-.746-1.66-1.667-1.66c-.92 0-1.667.744-1.667 1.66 0 .917.746 1.66 1.667 1.66",clipRule:"evenodd"})]});ed("d1AnZ");var oG=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:[(0,eh.jsx)("path",{fill:"currentColor",d:"M19.773 17.337c.39.388 1.04.311 1.277-.185.61-1.283.95-2.716.95-4.228C22 7.444 17.523 3 12 3a10 10 0 0 0-5.177 1.432L8.04 5.645A8.35 8.35 0 0 1 12 4.654c4.602 0 8.333 3.703 8.333 8.27 0 1.206-.26 2.352-.728 3.386a.915.915 0 0 0 .168 1.027"}),(0,eh.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 12.924a9.84 9.84 0 0 1 2.379-6.426L3.002 5.126a.799.799 0 1 1 1.127-1.131L20.5 20.307a.799.799 0 0 1-1.128 1.131l-5.682-5.662a3.3 3.3 0 0 1-.87.356l-.016 4.01a.8.8 0 0 1-1.6-.007l.015-3.994a3.315 3.315 0 0 1-2.551-3.217c0-.617.17-1.194.466-1.688l-1.201-1.197A4.9 4.9 0 0 0 7 12.924c0 1.07.342 2.062.923 2.873.268.374.275.9-.052 1.225-.324.321-.85.324-1.133-.035a6.56 6.56 0 0 1-1.405-4.063c0-1.535.527-2.947 1.41-4.07L5.56 7.675a8.2 8.2 0 0 0-1.893 5.25c0 1.983.704 3.804 1.877 5.229.293.356.297.882-.03 1.207-.324.321-.85.323-1.145-.023A9.84 9.84 0 0 1 2 12.924m8.391-.434 2.04 2.032a1.7 1.7 0 0 1-.431.056 1.66 1.66 0 0 1-1.609-2.088",clipRule:"evenodd"}),(0,eh.jsx)("path",{fill:"currentColor",d:"m10.571 8.168-1.29-1.286A6.7 6.7 0 0 1 12 6.308c3.682 0 6.667 2.962 6.667 6.616 0 .717-.115 1.407-.328 2.054-.109.331-.524.408-.771.162l-.355-.354c-.262-.261-.35-.644-.287-1.009q.074-.416.074-.853c0-2.74-2.239-4.962-5-4.962-.496 0-.976.072-1.429.206"}),(0,eh.jsx)("path",{fill:"currentColor",d:"m12.025 9.616 3.308 3.297c-.006-1.814-1.482-3.284-3.308-3.297"})]});ed("d1AnZ");var oW=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e,children:[(0,eh.jsx)("path",{fill:"currentColor",d:"M3.539 3.539a.703.703 0 0 1 .994 0L16.46 15.467a.703.703 0 1 1-.994.993L3.54 4.534a.703.703 0 0 1 0-.994M9.505 4.562a4.195 4.195 0 0 1 5.933 5.932l-.989.989a.7.7 0 0 1-.989-.989l.989-.989a2.797 2.797 0 0 0-3.955-3.955l-.989.99a.7.7 0 0 1-.988-.99zM11.483 13.46a.7.7 0 0 1 0 .989l-.989.989a4.195 4.195 0 1 1-5.932-5.933l.988-.988a.7.7 0 1 1 .99.988l-.99.989a2.797 2.797 0 0 0 3.955 3.955l.989-.989a.7.7 0 0 1 .989 0"}),(0,eh.jsx)("path",{fill:"currentColor",d:"M11.977 7.033a.7.7 0 0 1 .989.99l-.989.988a.7.7 0 1 1-.989-.989zM8.022 10.988a.7.7 0 0 1 .989.99l-.989.988a.7.7 0 0 1-.989-.989z"})]});function oK(e){return"object"==typeof e&&null!=e}function oJ(e){return oK(e)&&"id"in e&&"result"in e}"use strict";"use strict";var oZ=ed("bIMcy"),oQ={};Object.defineProperty(oQ,"__esModule",{value:!0}),oQ.hash_to_ristretto255=oQ.hashToRistretto255=oQ.RistrettoPoint=oQ.encodeToCurve=oQ.hashToCurve=oQ.edwardsToMontgomery=oQ.x25519=oQ.ed25519ph=oQ.ed25519ctx=oQ.ed25519=oQ.ED25519_TORSION_SUBGROUP=void 0,oQ.edwardsToMontgomeryPub=la,oQ.edwardsToMontgomeryPriv=function(e){let t=ls.hash(e.subarray(0,32));return ls.adjustScalarBytes(t).subarray(0,32)};"use strict";var oX={};Object.defineProperty(oX,"__esModule",{value:!0}),oX.sha384=oX.sha512_256=oX.sha512_224=oX.sha512=oX.SHA384=oX.SHA512_256=oX.SHA512_224=oX.SHA512=void 0;"use strict";var oY={};Object.defineProperty(oY,"__esModule",{value:!0}),oY.HashMD=void 0,oY.setBigUint64=an,oY.Chi=function(e,t,r){return e&t^~e&r},oY.Maj=function(e,t,r){return e&t^e&r^t&r};var o0={};function o1(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function o2(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}"use strict";Object.defineProperty(o0,"__esModule",{value:!0}),o0.anumber=o1,o0.abytes=o2,o0.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");o1(e.outputLen),o1(e.blockLen)},o0.aexists=function(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")},o0.aoutput=function(e,t){o2(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)};"use strict";var o3={};Object.defineProperty(o3,"__esModule",{value:!0}),o3.Hash=o3.nextTick=o3.byteSwapIfBE=o3.isLE=void 0,o3.isBytes=function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name},o3.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},o3.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},o3.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},o3.rotr=function(e,t){return e<<32-t|e>>>t},o3.rotl=function(e,t){return e<<t|e>>>32-t>>>0},o3.byteSwap=o6,o3.byteSwap32=function(e){for(let t=0;t<e.length;t++)e[t]=o6(e[t])},o3.bytesToHex=function(e){(0,o0.abytes)(e);let t="";for(let r=0;r<e.length;r++)t+=o4[e[r]];return t},o3.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,s=0;t<r;t++,s+=2){let r=o9(e.charCodeAt(s)),o=o9(e.charCodeAt(s+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[s]+e[s+1])+'" at index '+s);n[t]=16*r+o}return n},o3.asyncLoop=ae,o3.utf8ToBytes=at,o3.toBytes=ar,o3.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];(0,o0.abytes)(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let s=e[t];r.set(s,n),n+=s.length}return r},o3.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},o3.wrapConstructor=function(e){let t=t=>e().update(ar(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},o3.wrapConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(ar(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},o3.wrapXOFConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(ar(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},o3.randomBytes=function(e=32){if(o8.crypto&&"function"==typeof o8.crypto.getRandomValues)return o8.crypto.getRandomValues(new Uint8Array(e));if(o8.crypto&&"function"==typeof o8.crypto.randomBytes)return o8.crypto.randomBytes(e);throw Error("crypto.getRandomValues must be defined")};var o8={};function o6(e){return e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255}Object.defineProperty(o8,"__esModule",{value:!0}),o8.crypto=void 0,o8.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,o3.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],o3.byteSwapIfBE=o3.isLE?e=>e:e=>o6(e);let o4=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),o5={_0:48,_9:57,A:65,F:70,a:97,f:102};function o9(e){return e>=o5._0&&e<=o5._9?e-o5._0:e>=o5.A&&e<=o5.F?e-(o5.A-10):e>=o5.a&&e<=o5.f?e-(o5.a-10):void 0}let o7=async()=>{};async function ae(e,t,r){let n=Date.now();for(let s=0;s<e;s++){r(s);let e=Date.now()-n;e>=0&&e<t||(await (0,o3.nextTick)(),n+=e)}}function at(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function ar(e){return"string"==typeof e&&(e=at(e)),(0,o0.abytes)(e),e}function an(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let s=BigInt(32),o=BigInt(0xffffffff),a=Number(r>>s&o),l=Number(r&o),u=4*!!n,c=4*!n;e.setUint32(t+u,a,n),e.setUint32(t+c,l,n)}o3.nextTick=o7,o3.Hash=class{clone(){return this._cloneInto()}};class ai extends o3.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,o3.createView)(this.buffer)}update(e){(0,o0.aexists)(this);let{view:t,buffer:r,blockLen:n}=this,s=(e=(0,o3.toBytes)(e)).length;for(let o=0;o<s;){let a=Math.min(n-this.pos,s-o);if(a===n){let t=(0,o3.createView)(e);for(;n<=s-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,o0.aexists)(this),(0,o0.aoutput)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:s}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;an(r,n-8,BigInt(8*this.length),s),this.process(r,0);let a=(0,o3.createView)(e),l=this.outputLen;if(l%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=l/4,c=this.get();if(u>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)a.setUint32(4*e,c[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%t&&e.buffer.set(r),e}}"use strict";oY.HashMD=ai;var as={};Object.defineProperty(as,"__esModule",{value:!0}),as.add5L=as.add5H=as.add4H=as.add4L=as.add3H=as.add3L=as.rotlBL=as.rotlBH=as.rotlSL=as.rotlSH=as.rotr32L=as.rotr32H=as.rotrBL=as.rotrBH=as.rotrSL=as.rotrSH=as.shrSL=as.shrSH=as.toBig=void 0,as.fromBig=al,as.split=au,as.add=aA;let ao=BigInt(0x100000000-1),aa=BigInt(32);function al(e,t=!1){return t?{h:Number(e&ao),l:Number(e>>aa&ao)}:{h:0|Number(e>>aa&ao),l:0|Number(e&ao)}}function au(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){let{h:o,l:a}=al(e[s],t);[r[s],n[s]]=[o,a]}return[r,n]}let ac=(e,t)=>BigInt(e>>>0)<<aa|BigInt(t>>>0);as.toBig=ac;let ad=(e,t,r)=>e>>>r;as.shrSH=ad;let af=(e,t,r)=>e<<32-r|t>>>r;as.shrSL=af;let ah=(e,t,r)=>e>>>r|t<<32-r;as.rotrSH=ah;let ap=(e,t,r)=>e<<32-r|t>>>r;as.rotrSL=ap;let ag=(e,t,r)=>e<<64-r|t>>>r-32;as.rotrBH=ag;let am=(e,t,r)=>e>>>r-32|t<<64-r;as.rotrBL=am;let ay=(e,t)=>t;as.rotr32H=ay;let ab=(e,t)=>e;as.rotr32L=ab;let av=(e,t,r)=>e<<r|t>>>32-r;as.rotlSH=av;let ax=(e,t,r)=>t<<r|e>>>32-r;as.rotlSL=ax;let aw=(e,t,r)=>t<<r-32|e>>>64-r;as.rotlBH=aw;let aE=(e,t,r)=>e<<r-32|t>>>64-r;function aA(e,t,r,n){let s=(t>>>0)+(n>>>0);return{h:e+r+(s/0x100000000|0)|0,l:0|s}}as.rotlBL=aE;let aS=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);as.add3L=aS;let ak=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0;as.add3H=ak;let aI=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);as.add4L=aI;let a_=(e,t,r,n,s)=>t+r+n+s+(e/0x100000000|0)|0;as.add4H=a_;let aP=(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0);as.add5L=aP;let aC=(e,t,r,n,s,o)=>t+r+n+s+o+(e/0x100000000|0)|0;as.add5H=aC,as.default={fromBig:al,split:au,toBig:ac,shrSH:ad,shrSL:af,rotrSH:ah,rotrSL:ap,rotrBH:ag,rotrBL:am,rotr32H:ay,rotr32L:ab,rotlSH:av,rotlSL:ax,rotlBH:aw,rotlBL:aE,add:aA,add3L:aS,add3H:ak,add4L:aI,add4H:a_,add5H:aC,add5L:aP};let[aO,aT]=as.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),aR=new Uint32Array(80),aB=new Uint32Array(80);class aN extends oY.HashMD{constructor(){super(128,64,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:c,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:m}=this;return[e,t,r,n,s,o,a,l,u,c,d,f,h,p,g,m]}set(e,t,r,n,s,o,a,l,u,c,d,f,h,p,g,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|s,this.Cl=0|o,this.Dh=0|a,this.Dl=0|l,this.Eh=0|u,this.El=0|c,this.Fh=0|d,this.Fl=0|f,this.Gh=0|h,this.Gl=0|p,this.Hh=0|g,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)aR[r]=e.getUint32(t),aB[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|aR[e-15],r=0|aB[e-15],n=as.default.rotrSH(t,r,1)^as.default.rotrSH(t,r,8)^as.default.shrSH(t,r,7),s=as.default.rotrSL(t,r,1)^as.default.rotrSL(t,r,8)^as.default.shrSL(t,r,7),o=0|aR[e-2],a=0|aB[e-2],l=as.default.rotrSH(o,a,19)^as.default.rotrBH(o,a,61)^as.default.shrSH(o,a,6),u=as.default.rotrSL(o,a,19)^as.default.rotrBL(o,a,61)^as.default.shrSL(o,a,6),c=as.default.add4L(s,u,aB[e-7],aB[e-16]),d=as.default.add4H(c,n,l,aR[e-7],aR[e-16]);aR[e]=0|d,aB[e]=0|c}let{Ah:r,Al:n,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:c,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:m,Hh:y,Hl:b}=this;for(let e=0;e<80;e++){let t=as.default.rotrSH(d,f,14)^as.default.rotrSH(d,f,18)^as.default.rotrBH(d,f,41),v=as.default.rotrSL(d,f,14)^as.default.rotrSL(d,f,18)^as.default.rotrBL(d,f,41),x=d&h^~d&g,w=f&p^~f&m,E=as.default.add5L(b,v,w,aT[e],aB[e]),A=as.default.add5H(E,y,t,x,aO[e],aR[e]),S=0|E,k=as.default.rotrSH(r,n,28)^as.default.rotrBH(r,n,34)^as.default.rotrBH(r,n,39),I=as.default.rotrSL(r,n,28)^as.default.rotrBL(r,n,34)^as.default.rotrBL(r,n,39),_=r&s^r&a^s&a,P=n&o^n&l^o&l;y=0|g,b=0|m,g=0|h,m=0|p,h=0|d,p=0|f,({h:d,l:f}=as.default.add(0|u,0|c,0|A,0|S)),u=0|a,c=0|l,a=0|s,l=0|o,s=0|r,o=0|n;let C=as.default.add3L(S,I,P);r=as.default.add3H(C,A,k,_),n=0|C}({h:r,l:n}=as.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:o}=as.default.add(0|this.Bh,0|this.Bl,0|s,0|o)),({h:a,l:l}=as.default.add(0|this.Ch,0|this.Cl,0|a,0|l)),({h:u,l:c}=as.default.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h:d,l:f}=as.default.add(0|this.Eh,0|this.El,0|d,0|f)),({h:h,l:p}=as.default.add(0|this.Fh,0|this.Fl,0|h,0|p)),({h:g,l:m}=as.default.add(0|this.Gh,0|this.Gl,0|g,0|m)),({h:y,l:b}=as.default.add(0|this.Hh,0|this.Hl,0|y,0|b)),this.set(r,n,s,o,a,l,u,c,d,f,h,p,g,m,y,b)}roundClean(){aR.fill(0),aB.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}oX.SHA512=aN;class aD extends aN{constructor(){super(),this.Ah=-0x73c2c838,this.Al=0x19544da2,this.Bh=0x73e19966,this.Bl=-0x76232b2a,this.Ch=0x1dfab7ae,this.Cl=0x32ff9c82,this.Dh=0x679dd514,this.Dl=0x582f9fcf,this.Eh=0xf6d2b69,this.El=0x7bd44da8,this.Fh=0x77e36f73,this.Fl=0x4c48942,this.Gh=0x3f9d85a8,this.Gl=0x6a1d36c8,this.Hh=0x1112e6ad,this.Hl=-0x6e296d5f,this.outputLen=28}}oX.SHA512_224=aD;class aL extends aN{constructor(){super(),this.Ah=0x22312194,this.Al=-0x3d408d4,this.Bh=-0x60aaa05d,this.Bl=-0x37b39b3e,this.Ch=0x2393b86b,this.Cl=0x6f53b151,this.Dh=-0x69c788e7,this.Dl=0x5940eabd,this.Eh=-0x69d7c11e,this.El=-0x5771001d,this.Fh=-0x41a1e1db,this.Fl=0x53863992,this.Gh=0x2b0199fc,this.Gl=0x2c85b8aa,this.Hh=0xeb72ddc,this.Hl=-0x7e3ad35e,this.outputLen=32}}oX.SHA512_256=aL;class aM extends aN{constructor(){super(),this.Ah=-0x344462a3,this.Al=-0x3efa6128,this.Bh=0x629a292a,this.Bl=0x367cd507,this.Ch=-0x6ea6fea6,this.Cl=0x3070dd17,this.Dh=0x152fecd8,this.Dl=-0x8f1a6c7,this.Eh=0x67332667,this.El=-4191439,this.Fh=-0x714bb579,this.Fl=0x68581511,this.Gh=-0x24f3d1f3,this.Gl=0x64f98fa7,this.Hh=0x47b5481d,this.Hl=-0x4105b05c,this.outputLen=48}}"use strict";oX.SHA384=aM,oX.sha512=(0,o3.wrapConstructor)(()=>new aN),oX.sha512_224=(0,o3.wrapConstructor)(()=>new aD),oX.sha512_256=(0,o3.wrapConstructor)(()=>new aL),oX.sha384=(0,o3.wrapConstructor)(()=>new aM);var aU=ed("8XKzF"),aF={};Object.defineProperty(aF,"__esModule",{value:!0}),aF.twistedEdwards=function(e){let t=function(e){let t=(0,aU.validateBasic)(e);return az.validateObject(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n:n,prehash:s,hash:o,randomBytes:a,nByteLength:l,h:u}=t,c=aV<<BigInt(8*l)-aH,d=r.create,f=(0,aj.Field)(t.n,t.nBitLength),h=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(e){return{isValid:!1,value:a$}}}),p=t.adjustScalarBytes||(e=>e),g=t.domain||((e,t,r)=>{if((0,az.abool)("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function m(e,t){az.aInRange("coordinate "+e,t,a$,c)}function y(e){if(!(e instanceof x))throw Error("ExtendedPoint expected")}let b=(0,az.memoized)((e,t)=>{let{ex:n,ey:s,ez:o}=e,a=e.is0();null==t&&(t=a?aq:r.inv(o));let l=d(n*t),u=d(s*t),c=d(o*t);if(a)return{x:a$,y:aH};if(c!==aH)throw Error("invZ was invalid");return{x:l,y:u}}),v=(0,az.memoized)(e=>{let{a:r,d:n}=t;if(e.is0())throw Error("bad point: ZERO");let{ex:s,ey:o,ez:a,et:l}=e,u=d(s*s),c=d(o*o),f=d(a*a),h=d(f*f),p=d(u*r);if(d(f*d(p+c))!==d(h+d(n*d(u*c))))throw Error("bad point: equation left != right (1)");if(d(s*o)!==d(a*l))throw Error("bad point: equation left != right (2)");return!0});class x{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,m("x",e),m("y",t),m("z",r),m("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof x)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return m("x",t),m("y",r),new x(t,r,aH,d(t*r))}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.ez));return e.map((e,r)=>e.toAffine(t[r])).map(x.fromAffine)}static msm(e,t){return(0,aU.pippenger)(x,f,e,t)}_setWindowSize(e){A.setWindowSize(this,e)}assertValidity(){v(this)}equals(e){y(e);let{ex:t,ey:r,ez:n}=this,{ex:s,ey:o,ez:a}=e,l=d(t*a),u=d(s*n),c=d(r*a),f=d(o*n);return l===u&&c===f}is0(){return this.equals(x.ZERO)}negate(){return new x(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){let{a:e}=t,{ex:r,ey:n,ez:s}=this,o=d(r*r),a=d(n*n),l=d(aV*d(s*s)),u=d(e*o),c=r+n,f=d(d(c*c)-o-a),h=u+a,p=h-l,g=u-a,m=d(f*p),y=d(h*g),b=d(f*g);return new x(m,y,d(p*h),b)}add(e){y(e);let{a:r,d:n}=t,{ex:s,ey:o,ez:a,et:l}=this,{ex:u,ey:c,ez:f,et:h}=e;if(r===BigInt(-1)){let e=d((o-s)*(c+u)),t=d((o+s)*(c-u)),r=d(t-e);if(r===a$)return this.double();let n=d(a*aV*h),p=d(l*aV*f),g=p+n,m=t+e,y=p-n,b=d(g*r),v=d(m*y),w=d(g*y);return new x(b,v,d(r*m),w)}let p=d(s*u),g=d(o*c),m=d(l*n*h),b=d(a*f),v=d((s+o)*(u+c)-p-g),w=b-m,E=b+m,A=d(g-r*p),S=d(v*w),k=d(E*A),I=d(v*A);return new x(S,k,d(w*E),I)}subtract(e){return this.add(e.negate())}wNAF(e){return A.wNAFCached(this,e,x.normalizeZ)}multiply(e){az.aInRange("scalar",e,aH,n);let{p:t,f:r}=this.wNAF(e);return x.normalizeZ([t,r])[0]}multiplyUnsafe(e,t=x.ZERO){return(az.aInRange("scalar",e,a$,n),e===a$)?E:this.is0()||e===aH?this:A.wNAFCachedUnsafe(this,e,x.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return A.unsafeLadder(this,n).is0()}toAffine(e){return b(this,e)}clearCofactor(){let{h:e}=t;return e===aH?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){let{d:s,a:o}=t,a=r.BYTES;e=(0,az.ensureBytes)("pointHex",e,a),(0,az.abool)("zip215",n);let l=e.slice(),u=e[a-1];l[a-1]=-129&u;let f=az.bytesToNumberLE(l),p=n?c:r.ORDER;az.aInRange("pointHex.y",f,a$,p);let g=d(f*f),{isValid:m,value:y}=h(d(g-aH),d(s*g-o));if(!m)throw Error("Point.fromHex: invalid y coordinate");let b=(y&aH)===aH,v=(128&u)!=0;if(!n&&y===a$&&v)throw Error("Point.fromHex: x=0 and x_0=1");return v!==b&&(y=d(-y)),x.fromAffine({x:y,y:f})}static fromPrivateKey(e){return I(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),n=az.numberToBytesLE(t,r.BYTES);return n[n.length-1]|=e&aH?128:0,n}toHex(){return az.bytesToHex(this.toRawBytes())}}x.BASE=new x(t.Gx,t.Gy,aH,d(t.Gx*t.Gy)),x.ZERO=new x(a$,aH,aH,a$);let{BASE:w,ZERO:E}=x,A=(0,aU.wNAF)(x,8*l);function S(e){return(0,aj.mod)(e,n)}function k(e){return S(az.bytesToNumberLE(e))}function I(e){let t=r.BYTES;e=(0,az.ensureBytes)("private key",e,t);let n=(0,az.ensureBytes)("hashed private key",o(e),2*t),s=p(n.slice(0,t)),a=n.slice(t,2*t),l=k(s),u=w.multiply(l),c=u.toRawBytes();return{head:s,prefix:a,scalar:l,point:u,pointBytes:c}}function _(e=new Uint8Array,...t){return k(o(g(az.concatBytes(...t),(0,az.ensureBytes)("context",e),!!s)))}return w._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return I(e).pointBytes},sign:function(e,t,o={}){e=(0,az.ensureBytes)("message",e),s&&(e=s(e));let{prefix:a,scalar:l,pointBytes:u}=I(t),c=_(o.context,a,e),d=w.multiply(c).toRawBytes(),f=S(c+_(o.context,d,u,e)*l);az.aInRange("signature.s",f,a$,n);let h=az.concatBytes(d,az.numberToBytesLE(f,r.BYTES));return(0,az.ensureBytes)("result",h,2*r.BYTES)},verify:function(e,t,n,o=aG){let a,l,u,{context:c,zip215:d}=o,f=r.BYTES;e=(0,az.ensureBytes)("signature",e,2*f),t=(0,az.ensureBytes)("message",t),n=(0,az.ensureBytes)("publicKey",n,f),void 0!==d&&(0,az.abool)("zip215",d),s&&(t=s(t));let h=az.bytesToNumberLE(e.slice(f,2*f));try{a=x.fromHex(n,d),l=x.fromHex(e.slice(0,f),d),u=w.multiplyUnsafe(h)}catch(e){return!1}if(!d&&a.isSmallOrder())return!1;let p=_(c,l.toRawBytes(),a.toRawBytes(),t);return l.add(a.multiplyUnsafe(p)).subtract(u).clearCofactor().equals(x.ZERO)},ExtendedPoint:x,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>a(r.BYTES),precompute:(e=8,t=x.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}};var aU=ed("8XKzF"),aj=ed("5a9aS"),az=(ed("19JXl"),ed("19JXl"));"use strict";let a$=BigInt(0),aH=BigInt(1),aV=BigInt(2),aq=BigInt(8),aG={zip215:!0};var aW={};Object.defineProperty(aW,"__esModule",{value:!0}),aW.expand_message_xmd=aQ,aW.expand_message_xof=aX,aW.hash_to_field=aY,aW.isogenyMap=function(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,n)=>{let[s,o,a,l]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n)));return t=e.div(s,o),n=e.mul(n,e.div(a,l)),{x:t,y:n}}},aW.createHasher=function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");return{hashToCurve(n,s){let o=aY(n,2,{...r,DST:r.DST,...s}),a=e.fromAffine(t(o[0])),l=e.fromAffine(t(o[1])),u=a.add(l).clearCofactor();return u.assertValidity(),u},encodeToCurve(n,s){let o=aY(n,1,{...r,DST:r.encodeDST,...s}),a=e.fromAffine(t(o[0])).clearCofactor();return a.assertValidity(),a},mapToCurve(r){if(!Array.isArray(r))throw Error("mapToCurve: expected array of bigints");for(let e of r)if("bigint"!=typeof e)throw Error("mapToCurve: expected array of bigints");let n=e.fromAffine(t(r)).clearCofactor();return n.assertValidity(),n}}};var aj=ed("5a9aS"),az=ed("19JXl");let aK=az.bytesToNumberBE;function aJ(e,t){if(aZ(e),aZ(t),e<0||e>=1<<8*t)throw Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function aZ(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function aQ(e,t,r,n){(0,az.abytes)(e),(0,az.abytes)(t),aZ(r),t.length>255&&(t=n((0,az.concatBytes)((0,az.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:s,blockLen:o}=n,a=Math.ceil(r/s);if(r>65535||a>255)throw Error("expand_message_xmd: invalid lenInBytes");let l=(0,az.concatBytes)(t,aJ(t.length,1)),u=aJ(0,o),c=aJ(r,2),d=Array(a),f=n((0,az.concatBytes)(u,e,c,aJ(0,1),l));d[0]=n((0,az.concatBytes)(f,aJ(1,1),l));for(let e=1;e<=a;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}(f,d[e-1]),aJ(e+1,1),l];d[e]=n((0,az.concatBytes)(...t))}return(0,az.concatBytes)(...d).slice(0,r)}function aX(e,t,r,n,s){if((0,az.abytes)(e),(0,az.abytes)(t),aZ(r),t.length>255){let e=Math.ceil(2*n/8);t=s.create({dkLen:e}).update((0,az.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:r}).update(e).update(aJ(r,2)).update(t).update(aJ(t.length,1)).digest()}function aY(e,t,r){let n;(0,az.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:s,k:o,m:a,hash:l,expand:u,DST:c}=r;(0,az.abytes)(e),aZ(t);let d="string"==typeof c?(0,az.utf8ToBytes)(c):c,f=Math.ceil((s.toString(2).length+o)/8),h=t*a*f;if("xmd"===u)n=aQ(e,d,h,l);else if("xof"===u)n=aX(e,d,h,o,l);else if("_internal_pass"===u)n=e;else throw Error('expand must be "xmd" or "xof"');let p=Array(t);for(let e=0;e<t;e++){let t=Array(a);for(let r=0;r<a;r++){let o=f*(r+e*a),l=n.subarray(o,o+f);t[r]=(0,aj.mod)(aK(l),s)}p[e]=t}return p}"use strict";var aj=ed("5a9aS"),a0={};Object.defineProperty(a0,"__esModule",{value:!0}),a0.montgomery=function(e){let t=((0,az.validateObject)(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})),{P:r}=t,n=e=>(0,aj.mod)(e,r),s=t.montgomeryBits,o=Math.ceil(s/8),a=t.nByteLength,l=t.adjustScalarBytes||(e=>e),u=t.powPminus2||(e=>(0,aj.pow)(e,r-BigInt(2),r));function c(e,t,r){let s=n(e*(t-r));return[t=n(t-s),r=n(r+s)]}let d=(t.a-BigInt(2))/BigInt(4);function f(e){return(0,az.numberToBytesLE)(n(e),o)}function h(e,t){let h=function(e,t){let o;(0,az.aInRange)("u",e,a1,r),(0,az.aInRange)("scalar",t,a1,r);let a=a2,l=a1,f=e,h=a2,p=a1;for(let r=BigInt(s-1);r>=a1;r--){let s=t>>r&a2;p^=s,a=(o=c(p,a,f))[0],f=o[1],l=(o=c(p,l,h))[0],h=o[1],p=s;let u=a+l,g=n(u*u),m=a-l,y=n(m*m),b=g-y,v=f+h,x=n((f-h)*u),w=n(v*m),E=x+w,A=x-w;f=n(E*E),h=n(e*n(A*A)),a=n(g*y),l=n(b*(g+n(d*b)))}return a=(o=c(p,a,f))[0],f=o[1],l=(o=c(p,l,h))[0],h=o[1],n(a*u(l))}(function(e){let t=(0,az.ensureBytes)("u coordinate",e,o);return 32===a&&(t[31]&=127),(0,az.bytesToNumberLE)(t)}(t),function(e){let t=(0,az.ensureBytes)("scalar",e),r=t.length;if(r!==o&&r!==a)throw Error("invalid scalar, expected "+(""+o+" or ")+a+" bytes, got "+r);return(0,az.bytesToNumberLE)(l(t))}(e));if(h===a1)throw Error("invalid private or public key received");return f(h)}let p=f(t.Gu);function g(e){return h(e,p)}return{scalarMult:h,scalarMultBase:g,getSharedSecret:(e,t)=>h(e,t),getPublicKey:e=>g(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:p}};var aj=ed("5a9aS"),az=ed("19JXl");let a1=BigInt(0),a2=BigInt(1);var az=ed("19JXl");let a3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),a8=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),a6=BigInt(0),a4=BigInt(1),a5=BigInt(2),a9=BigInt(3),a7=BigInt(5),le=BigInt(8);function lt(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),o=e*e%a3*e%a3,a=(0,aj.pow2)(o,a5,a3)*o%a3,l=(0,aj.pow2)(a,a4,a3)*e%a3,u=(0,aj.pow2)(l,a7,a3)*l%a3,c=(0,aj.pow2)(u,t,a3)*u%a3,d=(0,aj.pow2)(c,r,a3)*c%a3,f=(0,aj.pow2)(d,n,a3)*d%a3,h=(0,aj.pow2)(f,s,a3)*f%a3,p=(0,aj.pow2)(h,s,a3)*f%a3,g=(0,aj.pow2)(p,t,a3)*u%a3;return{pow_p_5_8:(0,aj.pow2)(g,a5,a3)*e%a3,b2:o}}function lr(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function ln(e,t){let r=(0,aj.mod)(t*t*t,a3),n=lt(e*(0,aj.mod)(r*r*t,a3)).pow_p_5_8,s=(0,aj.mod)(e*r*n,a3),o=(0,aj.mod)(t*s*s,a3),a=s,l=(0,aj.mod)(s*a8,a3),u=o===e,c=o===(0,aj.mod)(-e,a3),d=o===(0,aj.mod)(-e*a8,a3);return u&&(s=a),(c||d)&&(s=l),(0,aj.isNegativeLE)(s,a3)&&(s=(0,aj.mod)(-s,a3)),{isValid:u||c,value:s}}oQ.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];let li=(0,aj.Field)(a3,void 0,!0),ls={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:li,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:le,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:oX.sha512,randomBytes:o3.randomBytes,adjustScalarBytes:lr,uvRatio:ln};function lo(e,t,r){if(t.length>255)throw Error("Context is too big");return(0,o3.concatBytes)((0,o3.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([+!!r,t.length]),t,e)}function la(e){let{y:t}=oQ.ed25519.ExtendedPoint.fromHex(e),r=BigInt(1);return li.toBytes(li.create((r+t)*li.inv(r-t)))}oQ.ed25519=(0,aF.twistedEdwards)(ls),oQ.ed25519ctx=(0,aF.twistedEdwards)({...ls,domain:lo}),oQ.ed25519ph=(0,aF.twistedEdwards)(Object.assign({},ls,{domain:lo,prehash:oX.sha512})),oQ.x25519=(0,a0.montgomery)({P:a3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{let{pow_p_5_8:t,b2:r}=lt(e);return(0,aj.mod)((0,aj.pow2)(t,a9,a3)*r,a3)},adjustScalarBytes:lr,randomBytes:o3.randomBytes}),oQ.edwardsToMontgomery=la;let ll=(li.ORDER+a9)/le,lu=li.pow(a5,ll),lc=li.sqrt(li.neg(li.ONE)),ld=(0,aj.FpSqrtEven)(li,li.neg(BigInt(486664))),lf=(0,aW.createHasher)(oQ.ed25519.ExtendedPoint,e=>(function(e){let{xMn:t,xMd:r,yMn:n,yMd:s}=function(e){let t=(li.ORDER-a7)/le,r=BigInt(486662),n=li.sqr(e);n=li.mul(n,a5);let s=li.add(n,li.ONE),o=li.neg(r),a=li.sqr(s),l=li.mul(a,s),u=li.mul(n,r);u=li.mul(u,o),u=li.add(u,a),u=li.mul(u,o);let c=li.sqr(l);a=li.sqr(c),c=li.mul(c,l),c=li.mul(c,u),a=li.mul(a,c);let d=li.pow(a,t);d=li.mul(d,c);let f=li.mul(d,lc);a=li.sqr(d),a=li.mul(a,l);let h=li.eql(a,u),p=li.cmov(f,d,h),g=li.mul(o,n),m=li.mul(d,e);m=li.mul(m,lu);let y=li.mul(m,lc),b=li.mul(u,n);a=li.sqr(m),a=li.mul(a,l);let v=li.eql(a,b),x=li.cmov(y,m,v);a=li.sqr(p),a=li.mul(a,l);let w=li.eql(a,u),E=li.cmov(g,o,w),A=li.cmov(x,p,w),S=li.isOdd(A);return{xMn:E,xMd:s,yMn:A=li.cmov(A,li.neg(A),w!==S),yMd:a4}}(e),o=li.mul(t,s);o=li.mul(o,ld);let a=li.mul(r,n),l=li.sub(t,r),u=li.add(t,r),c=li.mul(a,u),d=li.eql(c,li.ZERO);o=li.cmov(o,li.ZERO,d),a=li.cmov(a,li.ONE,d),l=li.cmov(l,li.ONE,d),u=li.cmov(u,li.ONE,d);let f=li.invertBatch([a,u]);return{x:li.mul(o,f[0]),y:li.mul(l,f[1])}})(e[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:li.ORDER,m:1,k:128,expand:"xmd",hash:oX.sha512});function lh(e){if(!(e instanceof lE))throw Error("RistrettoPoint expected")}oQ.hashToCurve=lf.hashToCurve,oQ.encodeToCurve=lf.encodeToCurve;let lp=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),lg=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),lm=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),ly=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),lb=e=>ln(a4,e),lv=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),lx=e=>oQ.ed25519.CURVE.Fp.create((0,az.bytesToNumberLE)(e)&lv);function lw(e){let{d:t}=oQ.ed25519.CURVE,r=oQ.ed25519.CURVE.Fp.ORDER,n=oQ.ed25519.CURVE.Fp.create,s=n(a8*e*e),o=n((s+a4)*lm),a=BigInt(-1),l=n((a-t*s)*n(s+t)),{isValid:u,value:c}=ln(o,l),d=n(c*e);(0,aj.isNegativeLE)(d,r)||(d=n(-d)),u||(c=d),u||(a=s);let f=n(a*(s-a4)*ly-l),h=c*c,p=n((c+c)*l),g=n(f*lp),m=n(a4-h),y=n(a4+h);return new oQ.ed25519.ExtendedPoint(n(p*y),n(m*g),n(g*y),n(p*m))}class lE{constructor(e){this.ep=e}static fromAffine(e){return new lE(oQ.ed25519.ExtendedPoint.fromAffine(e))}static hashToCurve(e){let t=lw(lx((e=(0,az.ensureBytes)("ristrettoHash",e,64)).slice(0,32))),r=lw(lx(e.slice(32,64)));return new lE(t.add(r))}static fromHex(e){e=(0,az.ensureBytes)("ristrettoHex",e,32);let{a:t,d:r}=oQ.ed25519.CURVE,n=oQ.ed25519.CURVE.Fp.ORDER,s=oQ.ed25519.CURVE.Fp.create,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",a=lx(e);if(!(0,az.equalBytes)((0,az.numberToBytesLE)(a,32),e)||(0,aj.isNegativeLE)(a,n))throw Error(o);let l=s(a*a),u=s(a4+t*l),c=s(a4-t*l),d=s(u*u),f=s(c*c),h=s(t*r*d-f),{isValid:p,value:g}=lb(s(h*f)),m=s(g*c),y=s(g*m*h),b=s((a+a)*m);(0,aj.isNegativeLE)(b,n)&&(b=s(-b));let v=s(u*y),x=s(b*v);if(!p||(0,aj.isNegativeLE)(x,n)||v===a6)throw Error(o);return new lE(new oQ.ed25519.ExtendedPoint(b,v,a4,x))}static msm(e,t){let r=(0,aj.Field)(oQ.ed25519.CURVE.n,oQ.ed25519.CURVE.nBitLength);return(0,aU.pippenger)(lE,r,e,t)}toRawBytes(){let e,{ex:t,ey:r,ez:n,et:s}=this.ep,o=oQ.ed25519.CURVE.Fp.ORDER,a=oQ.ed25519.CURVE.Fp.create,l=a(a(n+r)*a(n-r)),u=a(t*r),c=a(u*u),{value:d}=lb(a(l*c)),f=a(d*l),h=a(d*u),p=a(f*h*s);if((0,aj.isNegativeLE)(s*p,o)){let n=a(r*a8),s=a(t*a8);t=n,r=s,e=a(f*lg)}else e=h;(0,aj.isNegativeLE)(t*p,o)&&(r=a(-r));let g=a((n-r)*e);return(0,aj.isNegativeLE)(g,o)&&(g=a(-g)),(0,az.numberToBytesLE)(g,32)}toHex(){return(0,az.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(e){lh(e);let{ex:t,ey:r}=this.ep,{ex:n,ey:s}=e.ep,o=oQ.ed25519.CURVE.Fp.create,a=o(t*s)===o(r*n),l=o(r*s)===o(t*n);return a||l}add(e){return lh(e),new lE(this.ep.add(e.ep))}subtract(e){return lh(e),new lE(this.ep.subtract(e.ep))}multiply(e){return new lE(this.ep.multiply(e))}multiplyUnsafe(e){return new lE(this.ep.multiplyUnsafe(e))}double(){return new lE(this.ep.double())}negate(){return new lE(this.ep.negate())}}lE.BASE||(lE.BASE=new lE(oQ.ed25519.ExtendedPoint.BASE)),lE.ZERO||(lE.ZERO=new lE(oQ.ed25519.ExtendedPoint.ZERO)),oQ.RistrettoPoint=lE,oQ.hashToRistretto255=(e,t)=>{let r=t.DST,n="string"==typeof r?(0,o3.utf8ToBytes)(r):r,s=(0,aW.expand_message_xmd)(e,n,64,oX.sha512);return lE.hashToCurve(s)},oQ.hash_to_ristretto255=oQ.hashToRistretto255;"use strict";var lA=ed("ct8eT"),lS={};lS=ed("a0BaM")("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var lk={};Object.defineProperty(lk,"__esModule",{value:!0}),lk.sha224=lk.sha256=lk.SHA256=void 0;let lI=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),l_=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),lP=new Uint32Array(64);class lC extends oY.HashMD{constructor(){super(64,32,8,!1),this.A=0|l_[0],this.B=0|l_[1],this.C=0|l_[2],this.D=0|l_[3],this.E=0|l_[4],this.F=0|l_[5],this.G=0|l_[6],this.H=0|l_[7]}get(){let{A:e,B:t,C:r,D:n,E:s,F:o,G:a,H:l}=this;return[e,t,r,n,s,o,a,l]}set(e,t,r,n,s,o,a,l){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|s,this.F=0|o,this.G=0|a,this.H=0|l}process(e,t){for(let r=0;r<16;r++,t+=4)lP[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=lP[e-15],r=lP[e-2],n=(0,o3.rotr)(t,7)^(0,o3.rotr)(t,18)^t>>>3,s=(0,o3.rotr)(r,17)^(0,o3.rotr)(r,19)^r>>>10;lP[e]=s+lP[e-7]+n+lP[e-16]|0}let{A:r,B:n,C:s,D:o,E:a,F:l,G:u,H:c}=this;for(let e=0;e<64;e++){let t=c+((0,o3.rotr)(a,6)^(0,o3.rotr)(a,11)^(0,o3.rotr)(a,25))+(0,oY.Chi)(a,l,u)+lI[e]+lP[e]|0,d=((0,o3.rotr)(r,2)^(0,o3.rotr)(r,13)^(0,o3.rotr)(r,22))+(0,oY.Maj)(r,n,s)|0;c=u,u=l,l=a,a=o+t|0,o=s,s=n,n=r,r=t+d|0}r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,s,o,a,l,u,c)}roundClean(){lP.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}lk.SHA256=lC;class lO extends lC{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}"use strict";lk.sha256=(0,o3.wrapConstructor)(()=>new lC),lk.sha224=(0,o3.wrapConstructor)(()=>new lO);var lT={},oZ=ed("bIMcy"),lR=oZ.Buffer,lB=lT&&lT.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),lN=lT&&lT.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lD=lT&&lT.__decorate||function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},lL=lT&&lT.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&lB(t,e,r);return lN(t,e),t},lM=lT&&lT.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lT,"__esModule",{value:!0}),lT.deserializeUnchecked=lT.deserialize=lT.serialize=lT.BinaryReader=lT.BinaryWriter=lT.BorshError=lT.baseDecode=lT.baseEncode=void 0;let lU=lM(ed("ct8eT")),lF=lM(ed("gcuaM")),lj=lL(ed("8rtVA")),lz=new("function"!=typeof TextDecoder?lj.TextDecoder:TextDecoder)("utf-8",{fatal:!0});lT.baseEncode=function(e){return"string"==typeof e&&(e=lR.from(e,"utf8")),lF.default.encode(lR.from(e))},lT.baseDecode=function(e){return lR.from(lF.default.decode(e))};class l$ extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}lT.BorshError=l$;class lH{constructor(){this.buf=lR.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=lR.concat([this.buf,lR.alloc(1024)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(lR.from(new lU.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(lR.from(new lU.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(lR.from(new lU.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(lR.from(new lU.default(e).toArray("le",64)))}writeBuffer(e){this.buf=lR.concat([lR.from(this.buf.subarray(0,this.length)),e,lR.alloc(1024)]),this.length+=e.length}writeString(e){this.maybeResize();let t=lR.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(lR.from(e))}writeArray(e,t){for(let r of(this.maybeResize(),this.writeU32(e.length),e))this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function lV(e,t,r){let n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(e){if(e instanceof RangeError&&["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e.code)>=0)throw new l$("Reached the end of buffer when deserializing");throw e}}}lT.BinaryWriter=lH;class lq{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new lU.default(e,"le")}readU128(){let e=this.readBuffer(16);return new lU.default(e,"le")}readU256(){let e=this.readBuffer(32);return new lU.default(e,"le")}readU512(){let e=this.readBuffer(64);return new lU.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new l$(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return lz.decode(t)}catch(e){throw new l$(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),r=[];for(let n=0;n<t;++n)r.push(e());return r}}function lG(e){return e.charAt(0).toUpperCase()+e.slice(1)}function lW(e,t,r,n,s){try{if("string"==typeof n)s[`write${lG(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new l$(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);s.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new l$(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)lW(e,null,r[t],n[0],s)}else s.writeArray(r,r=>{lW(e,t,r,n[0],s)});else if(void 0!==n.kind)switch(n.kind){case"option":null==r?s.writeU8(0):(s.writeU8(1),lW(e,t,r,n.type,s));break;case"map":s.writeU32(r.size),r.forEach((r,o)=>{lW(e,t,o,n.key,s),lW(e,t,r,n.value,s)});break;default:throw new l$(`FieldType ${n} unrecognized`)}else lK(e,r,s)}catch(e){throw e instanceof l$&&e.addToFieldPath(t),e}}function lK(e,t,r){if("function"==typeof t.borshSerialize)return void t.borshSerialize(r);let n=e.get(t.constructor);if(!n)throw new l$(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map(([n,s])=>{lW(e,n,t[n],s,r)});else if("enum"===n.kind){let s=t[n.field];for(let o=0;o<n.values.length;++o){let[a,l]=n.values[o];if(a===s){r.writeU8(o),lW(e,a,t[a],l,r);break}}}else throw new l$(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function lJ(e,t,r,n){try{if("string"==typeof r)return n[`read${lG(r)}`]();if(r instanceof Array)if("number"==typeof r[0])return n.readFixedArray(r[0]);else{if("number"!=typeof r[1])return n.readArray(()=>lJ(e,t,r[0],n));let s=[];for(let t=0;t<r[1];t++)s.push(lJ(e,null,r[0],n));return s}if("option"===r.kind){if(n.readU8())return lJ(e,t,r.type,n);return}if("map"===r.kind){let s=new Map,o=n.readU32();for(let a=0;a<o;a++){let o=lJ(e,t,r.key,n),a=lJ(e,t,r.value,n);s.set(o,a)}return s}return lZ(e,r,n)}catch(e){throw e instanceof l$&&e.addToFieldPath(t),e}}function lZ(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);let n=e.get(t);if(!n)throw new l$(`Class ${t.name} is missing in schema`);if("struct"===n.kind){let n={};for(let[s,o]of e.get(t).fields)n[s]=lJ(e,s,o,r);return new t(n)}if("enum"===n.kind){let s=r.readU8();if(s>=n.values.length)throw new l$(`Enum index: ${s} is out of range`);let[o,a]=n.values[s],l=lJ(e,o,a,r);return new t({[o]:l})}throw new l$(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}"use strict";lD([lV],lq.prototype,"readU8",null),lD([lV],lq.prototype,"readU16",null),lD([lV],lq.prototype,"readU32",null),lD([lV],lq.prototype,"readU64",null),lD([lV],lq.prototype,"readU128",null),lD([lV],lq.prototype,"readU256",null),lD([lV],lq.prototype,"readU512",null),lD([lV],lq.prototype,"readString",null),lD([lV],lq.prototype,"readFixedArray",null),lD([lV],lq.prototype,"readArray",null),lT.BinaryReader=lq,lT.serialize=function(e,t,r=lH){let n=new r;return lK(e,t,n),n.toArray()},lT.deserialize=function(e,t,r,n=lq){let s=new n(r),o=lZ(e,t,s);if(s.offset<r.length)throw new l$(`Unexpected ${r.length-s.offset} bytes after deserialized data`);return o},lT.deserializeUnchecked=function(e,t,r,n=lq){return lZ(e,t,new n(r))};var lQ={};Object.defineProperty(lQ,"__esModule",{value:!0}),lQ.s16=lQ.s8=lQ.nu64be=lQ.u48be=lQ.u40be=lQ.u32be=lQ.u24be=lQ.u16be=lQ.nu64=lQ.u48=lQ.u40=lQ.u32=lQ.u24=lQ.u16=lQ.u8=lQ.offset=lQ.greedy=lQ.Constant=lQ.UTF8=lQ.CString=lQ.Blob=lQ.Boolean=lQ.BitField=lQ.BitStructure=lQ.VariantLayout=lQ.Union=lQ.UnionLayoutDiscriminator=lQ.UnionDiscriminator=lQ.Structure=lQ.Sequence=lQ.DoubleBE=lQ.Double=lQ.FloatBE=lQ.Float=lQ.NearInt64BE=lQ.NearInt64=lQ.NearUInt64BE=lQ.NearUInt64=lQ.IntBE=lQ.Int=lQ.UIntBE=lQ.UInt=lQ.OffsetLayout=lQ.GreedyCount=lQ.ExternalLayout=lQ.bindConstructorLayout=lQ.nameWithProperty=lQ.Layout=lQ.uint8ArrayToBuffer=lQ.checkUint8Array=void 0,lQ.constant=lQ.utf8=lQ.cstr=lQ.blob=lQ.unionLayoutDiscriminator=lQ.union=lQ.seq=lQ.bits=lQ.struct=lQ.f64be=lQ.f64=lQ.f32be=lQ.f32=lQ.ns64be=lQ.s48be=lQ.s40be=lQ.s32be=lQ.s24be=lQ.s16be=lQ.ns64=lQ.s48=lQ.s40=lQ.s32=lQ.s24=void 0;var oZ=ed("bIMcy");function lX(e){if(!(e instanceof Uint8Array))throw TypeError("b must be a Uint8Array")}function lY(e){return lX(e),oZ.Buffer.from(e.buffer,e.byteOffset,e.length)}lQ.checkUint8Array=lX,lQ.uint8ArrayToBuffer=lY;class l0{constructor(e,t){if(!Number.isInteger(e))throw TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function l1(e,t){return t.property?e+"["+t.property+"]":e}lQ.Layout=l0,lQ.nameWithProperty=l1,lQ.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw Error("Class is already bound to a layout");if(!(t&&t instanceof l0))throw TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,r)=>t.decode(e,r),writable:!0})};class l2 extends l0{isCount(){throw Error("ExternalLayout is abstract")}}lQ.ExternalLayout=l2;class l3 extends l2{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){return lX(e),Math.floor((e.length-t)/this.elementSpan)}encode(e,t,r){return 0}}lQ.GreedyCount=l3;class l8 extends l2{constructor(e,t=0,r){if(!(e instanceof l0))throw TypeError("layout must be a Layout");if(!Number.isInteger(t))throw TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof l6||this.layout instanceof l4}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}lQ.OffsetLayout=l8;class l6 extends l0{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return lY(e).readUIntLE(t,this.span)}encode(e,t,r=0){return lY(t).writeUIntLE(e,r,this.span),this.span}}lQ.UInt=l6;class l4 extends l0{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return lY(e).readUIntBE(t,this.span)}encode(e,t,r=0){return lY(t).writeUIntBE(e,r,this.span),this.span}}lQ.UIntBE=l4;class l5 extends l0{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return lY(e).readIntLE(t,this.span)}encode(e,t,r=0){return lY(t).writeIntLE(e,r,this.span),this.span}}lQ.Int=l5;class l9 extends l0{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return lY(e).readIntBE(t,this.span)}encode(e,t,r=0){return lY(t).writeIntBE(e,r,this.span),this.span}}function l7(e){let t=Math.floor(e/0x100000000);return{hi32:t,lo32:e-0x100000000*t}}function ue(e,t){return 0x100000000*e+t}lQ.IntBE=l9;class ut extends l0{constructor(e){super(8,e)}decode(e,t=0){let r=lY(e),n=r.readUInt32LE(t);return ue(r.readUInt32LE(t+4),n)}encode(e,t,r=0){let n=l7(e),s=lY(t);return s.writeUInt32LE(n.lo32,r),s.writeUInt32LE(n.hi32,r+4),8}}lQ.NearUInt64=ut;class ur extends l0{constructor(e){super(8,e)}decode(e,t=0){let r=lY(e);return ue(r.readUInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){let n=l7(e),s=lY(t);return s.writeUInt32BE(n.hi32,r),s.writeUInt32BE(n.lo32,r+4),8}}lQ.NearUInt64BE=ur;class un extends l0{constructor(e){super(8,e)}decode(e,t=0){let r=lY(e),n=r.readUInt32LE(t);return ue(r.readInt32LE(t+4),n)}encode(e,t,r=0){let n=l7(e),s=lY(t);return s.writeUInt32LE(n.lo32,r),s.writeInt32LE(n.hi32,r+4),8}}lQ.NearInt64=un;class ui extends l0{constructor(e){super(8,e)}decode(e,t=0){let r=lY(e);return ue(r.readInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){let n=l7(e),s=lY(t);return s.writeInt32BE(n.hi32,r),s.writeUInt32BE(n.lo32,r+4),8}}lQ.NearInt64BE=ui;class us extends l0{constructor(e){super(4,e)}decode(e,t=0){return lY(e).readFloatLE(t)}encode(e,t,r=0){return lY(t).writeFloatLE(e,r),4}}lQ.Float=us;class uo extends l0{constructor(e){super(4,e)}decode(e,t=0){return lY(e).readFloatBE(t)}encode(e,t,r=0){return lY(t).writeFloatBE(e,r),4}}lQ.FloatBE=uo;class ua extends l0{constructor(e){super(8,e)}decode(e,t=0){return lY(e).readDoubleLE(t)}encode(e,t,r=0){return lY(t).writeDoubleLE(e,r),8}}lQ.Double=ua;class ul extends l0{constructor(e){super(8,e)}decode(e,t=0){return lY(e).readDoubleBE(t)}encode(e,t,r=0){return lY(t).writeDoubleBE(e,r),8}}lQ.DoubleBE=ul;class uu extends l0{constructor(e,t,r){if(!(e instanceof l0))throw TypeError("elementLayout must be a Layout");if(!(t instanceof l2&&t.isCount()||Number.isInteger(t)&&0<=t))throw TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;t instanceof l2||!(0<e.span)||(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof l2&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let s=0;for(;s<n;)r+=this.elementLayout.getSpan(e,t+r),++s}return r}decode(e,t=0){let r=[],n=0,s=this.count;for(s instanceof l2&&(s=s.decode(e,t));n<s;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){let n=this.elementLayout,s=e.reduce((e,s)=>e+n.encode(s,t,r+e),0);return this.count instanceof l2&&this.count.encode(e.length,t,r),s}}lQ.Sequence=uu;class uc extends l0{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((e,t)=>e&&t instanceof l0,!0)))throw TypeError("fields must be array of Layout instances");for(let n of("boolean"==typeof t&&void 0===r&&(r=t,t=void 0),e))if(0>n.span&&void 0===n.property)throw Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce((e,t)=>e+t.getSpan(),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,n)=>{let s=n.getSpan(e,t);return t+=s,r+s},0)}catch(e){throw RangeError("indeterminate span")}return r}decode(e,t=0){lX(e);let r=this.makeDestinationObject();for(let n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){let n=r,s=0,o=0;for(let n of this.fields){let a=n.span;if(o=0<a?a:0,void 0!==n.property){let s=e[n.property];void 0!==s&&(o=n.encode(s,t,r),0>a&&(a=n.getSpan(t,r)))}s=r,r+=a}return s+o-n}fromArray(e){let t=this.makeDestinationObject();for(let r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw TypeError("property must be string");let t=0;for(let r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}lQ.Structure=uc;class ud{constructor(e){this.property=e}decode(e,t){throw Error("UnionDiscriminator is abstract")}encode(e,t,r){throw Error("UnionDiscriminator is abstract")}}lQ.UnionDiscriminator=ud;class uf extends ud{constructor(e,t){if(!(e instanceof l2&&e.isCount()))throw TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}lQ.UnionLayoutDiscriminator=uf;class uh extends l0{constructor(e,t,r){let n;if(e instanceof l6||e instanceof l4)n=new uf(new l8(e));else if(e instanceof l2&&e.isCount())n=new uf(e);else if(e instanceof ud)n=e;else throw TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof l0))throw TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let s=-1;t&&0<=(s=t.span)&&(e instanceof l6||e instanceof l4)&&(s+=n.layout.span),super(s,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof l6||e instanceof l4,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return o(e)},this.configGetSourceVariant=function(e){o=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let r=this.getVariant(e,t);if(!r)throw Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw Error("unable to infer src variant")}decode(e,t=0){let r,n=this.discriminator,s=n.decode(e,t),o=this.registry[s];if(void 0===o){let o=this.defaultLayout,a=0;this.usesPrefixDiscriminator&&(a=n.layout.span),(r=this.makeDestinationObject())[n.property]=s,r[o.property]=o.decode(e,t+a)}else r=o.decode(e,t);return r}encode(e,t,r=0){let n=this.getSourceVariant(e);if(void 0===n){let n=this.discriminator,s=this.defaultLayout,o=0;return this.usesPrefixDiscriminator&&(o=n.layout.span),n.encode(e[n.property],t,r),o+s.encode(e[s.property],t,r+o)}return n.encode(e,t,r)}addVariant(e,t,r){let n=new up(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t=0){let r;return r=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[r]}}lQ.Union=uh;class up extends l0{constructor(e,t,r,n){if(!(e instanceof uh))throw TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof l0))throw TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw Error("variant span exceeds span of containing union");if("string"!=typeof n)throw TypeError("variant must have a String property")}let s=e.span;0>e.span&&0<=(s=r?r.span:0)&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span),super(s,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e,t=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let s=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),s+=this.layout.getSpan(t,r+n),0<=this.union.span&&s>this.union.span))throw Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function ug(e){return 0>e&&(e+=0x100000000),e}lQ.VariantLayout=up;class um extends l0{constructor(e,t,r){if(!(e instanceof l6||e instanceof l4))throw TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=ug(e),this},this._packedGetValue=function(){return n}}decode(e,t=0){let r=this.makeDestinationObject(),n=this.word.decode(e,t);for(let t of(this._packedSetValue(n),this.fields))void 0!==t.property&&(r[t.property]=t.decode(e));return r}encode(e,t,r=0){let n=this.word.decode(t,r);for(let t of(this._packedSetValue(n),this.fields))if(void 0!==t.property){let r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){let r=new uy(this,e,t);return this.fields.push(r),r}addBoolean(e){let t=new ub(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}}lQ.BitStructure=um;class uy{constructor(e,t,r){if(!(e instanceof um))throw TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw TypeError("bits must be positive integer");let n=8*e.span,s=e.fields.reduce((e,t)=>e+t.bits,0);if(t+s>n)throw Error("bits too long for span remainder ("+(n-s)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=0xffffffff),this.start=s,this.container.msb&&(this.start=n-s-t),this.wordMask=ug(this.valueMask<<this.start),this.property=r}decode(e,t){return ug(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==ug(e&this.valueMask))throw TypeError(l1("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),r=ug(e<<this.start);this.container._packedSetValue(ug(t&~this.wordMask)|r)}}lQ.BitField=uy;class ub extends uy{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e*=1),super.encode(e)}}lQ.Boolean=ub;class uv extends l0{constructor(e,t){if(!(e instanceof l2&&e.isCount()||Number.isInteger(e)&&0<=e))throw TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof l2||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),lY(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof l2&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw TypeError(l1("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw RangeError("encoding overruns Uint8Array");let s=lY(e);return lY(t).write(s.toString("hex"),r,n,"hex"),this.length instanceof l2&&this.length.encode(n,t,r),n}}lQ.Blob=uv;class ux extends l0{constructor(e){super(-1,e)}getSpan(e,t=0){lX(e);let r=t;for(;r<e.length&&0!==e[r];)r+=1;return 1+r-t}decode(e,t=0){let r=this.getSpan(e,t);return lY(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));let n=oZ.Buffer.from(e,"utf8"),s=n.length;if(r+s>t.length)throw RangeError("encoding overruns Buffer");let o=lY(t);return n.copy(o,r),o[r+s]=0,s+1}}lQ.CString=ux;class uw extends l0{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return lX(e),e.length-t}decode(e,t=0){let r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw RangeError("text length exceeds maxSpan");return lY(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));let n=oZ.Buffer.from(e,"utf8"),s=n.length;if(0<=this.maxSpan&&this.maxSpan<s)throw RangeError("text length exceeds maxSpan");if(r+s>t.length)throw RangeError("encoding overruns Buffer");return n.copy(lY(t),r),s}}lQ.UTF8=uw;class uE extends l0{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}"use strict";lQ.Constant=uE,lQ.greedy=(e,t)=>new l3(e,t),lQ.offset=(e,t,r)=>new l8(e,t,r),lQ.u8=e=>new l6(1,e),lQ.u16=e=>new l6(2,e),lQ.u24=e=>new l6(3,e),lQ.u32=e=>new l6(4,e),lQ.u40=e=>new l6(5,e),lQ.u48=e=>new l6(6,e),lQ.nu64=e=>new ut(e),lQ.u16be=e=>new l4(2,e),lQ.u24be=e=>new l4(3,e),lQ.u32be=e=>new l4(4,e),lQ.u40be=e=>new l4(5,e),lQ.u48be=e=>new l4(6,e),lQ.nu64be=e=>new ur(e),lQ.s8=e=>new l5(1,e),lQ.s16=e=>new l5(2,e),lQ.s24=e=>new l5(3,e),lQ.s32=e=>new l5(4,e),lQ.s40=e=>new l5(5,e),lQ.s48=e=>new l5(6,e),lQ.ns64=e=>new un(e),lQ.s16be=e=>new l9(2,e),lQ.s24be=e=>new l9(3,e),lQ.s32be=e=>new l9(4,e),lQ.s40be=e=>new l9(5,e),lQ.s48be=e=>new l9(6,e),lQ.ns64be=e=>new ui(e),lQ.f32=e=>new us(e),lQ.f32be=e=>new uo(e),lQ.f64=e=>new ua(e),lQ.f64be=e=>new ul(e),lQ.struct=(e,t,r)=>new uc(e,t,r),lQ.bits=(e,t,r)=>new um(e,t,r),lQ.seq=(e,t,r)=>new uu(e,t,r),lQ.union=(e,t,r)=>new uh(e,t,r),lQ.unionLayoutDiscriminator=(e,t)=>new uf(e,t),lQ.blob=(e,t)=>new uv(e,t),lQ.cstr=e=>new ux(e),lQ.utf8=(e,t)=>new uw(e,t),lQ.constant=(e,t)=>new uE(e,t);var uA={},oZ=ed("bIMcy"),uS=oZ.Buffer;Object.defineProperty(uA,"__esModule",{value:!0}),uA.toBigIntLE=function(e){{let t=uS.from(e);t.reverse();let r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}},uA.toBigIntBE=function(e){{let t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}},uA.toBufferLE=function(e,t){{let r=e.toString(16),n=uS.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return n.reverse(),n}},uA.toBufferBE=function(e,t){{let r=e.toString(16);return uS.from(r.padStart(2*t,"0").slice(0,2*t),"hex")}};class uk extends TypeError{constructor(e,t){let r,{message:n,explanation:s,...o}=e,{path:a}=e,l=0===a.length?n:`At path: ${a.join(".")} -- ${n}`;super(s??l),null!=s&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function uI(e){return"object"==typeof e&&null!=e}function u_(e){return uI(e)&&!Array.isArray(e)}function uP(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function*uC(e,t,r,n){var s;for(let o of(uI(s=e)&&"function"==typeof s[Symbol.iterator]||(e=[e]),e)){let e=function(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:s,branch:o}=t,{type:a}=r,{refinement:l,message:u=`Expected a value of type \`${a}\`${l?` with refinement \`${l}\``:""}, but received: \`${uP(n)}\``}=e;return{value:n,type:a,refinement:l,key:s[s.length-1],path:s,branch:o,...e,message:u}}(o,t,r,n);e&&(yield e)}}function*uO(e,t,r={}){let{path:n=[],branch:s=[e],coerce:o=!1,mask:a=!1}=r,l={path:n,branch:s,mask:a};o&&(e=t.coercer(e,l));let u="valid";for(let n of t.validator(e,l))n.explanation=r.message,u="not_valid",yield[n,void 0];for(let[c,d,f]of t.entries(e,l))for(let t of uO(d,f,{path:void 0===c?n:[...n,c],branch:void 0===c?s:[...s,d],coerce:o,mask:a,message:r.message}))t[0]?(u=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):o&&(d=t[1],void 0===c?e=d:e instanceof Map?e.set(c,d):e instanceof Set?e.add(d):uI(e)&&(void 0!==d||c in e)&&(e[c]=d));if("not_valid"!==u)for(let n of t.refiner(e,l))n.explanation=r.message,u="not_refined",yield[n,void 0];"valid"===u&&(yield[void 0,e])}class uT{constructor(e){let{type:t,schema:r,validator:n,refiner:s,coercer:o=e=>e,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,n?this.validator=(e,t)=>uC(n(e,t),t,this,e):this.validator=()=>[],s?this.refiner=(e,t)=>uC(s(e,t),t,this,e):this.refiner=()=>[]}assert(e,t){var r=e,n=this,s=t;let o=uB(r,n,{message:s});if(o[0])throw o[0]}create(e,t){return uR(e,this,t)}is(e){var t,r;return t=e,r=this,!uB(t,r)[0]}mask(e,t){var r=e,n=this,s=t;let o=uB(r,n,{coerce:!0,mask:!0,message:s});if(!o[0])return o[1];throw o[0]}validate(e,t={}){return uB(e,this,t)}}function uR(e,t,r){let n=uB(e,t,{coerce:!0,message:r});if(!n[0])return n[1];throw n[0]}function uB(e,t,r={}){let n=uO(e,t,r),s=function(e){let{done:t,value:r}=e.next();return t?void 0:r}(n);return s[0]?[new uk(s[0],function*(){for(let e of n)e[0]&&(yield e[0])}),void 0]:[void 0,s[1]]}function uN(e,t){return new uT({type:e,schema:null,validator:t})}function uD(e){return new uT({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${uP(e)}`})}function uL(){return uN("boolean",e=>"boolean"==typeof e)}function uM(e){return uN("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${uP(t)}`)}function uU(e){let t=uP(e),r=typeof e;return new uT({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${uP(r)}`})}function uF(e){return new uT({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function uj(){return uN("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${uP(e)}`)}function uz(e){return new uT({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function u$(e,t){return new uT({type:"record",schema:null,*entries(r){if(uI(r))for(let n in r){let s=r[n];yield[n,n,e],yield[n,s,t]}},validator:e=>u_(e)||`Expected an object, but received: ${uP(e)}`,coercer:e=>u_(e)?{...e}:e})}function uH(){return uN("string",e=>"string"==typeof e||`Expected a string, but received: ${uP(e)}`)}function uV(e){let t=uN("never",()=>!1);return new uT({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let n=Math.max(e.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],e[s]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${uP(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function uq(e){let t=Object.keys(e);return new uT({type:"type",schema:e,*entries(r){if(uI(r))for(let n of t)yield[n,r[n],e[n]]},validator:e=>u_(e)||`Expected an object, but received: ${uP(e)}`,coercer:e=>u_(e)?{...e}:e})}function uG(e){let t=e.map(e=>e.type).join(" | ");return new uT({type:"union",schema:null,coercer(t,r){for(let n of e){let[e,s]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return s}return t},validator(r,n){let s=[];for(let t of e){let[...e]=uO(r,t,n),[o]=e;if(!o[0])return[];for(let[t]of e)t&&s.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${uP(r)}`,...s]}})}function uW(){return uN("unknown",()=>!0)}function uK(e,t,r){return new uT({...e,coercer:(n,s)=>uB(n,t)[0]?e.coercer(n,s):e.coercer(r(n,s),s)})}"use strict";for(var uJ=new Uint8Array(16),uZ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,uQ=[],uX=0;uX<256;++uX)uQ.push((uX+256).toString(16).substr(1));"use strict";var uY=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(uQ[e[t+0]]+uQ[e[t+1]]+uQ[e[t+2]]+uQ[e[t+3]]+"-"+uQ[e[t+4]]+uQ[e[t+5]]+"-"+uQ[e[t+6]]+uQ[e[t+7]]+"-"+uQ[e[t+8]]+uQ[e[t+9]]+"-"+uQ[e[t+10]]+uQ[e[t+11]]+uQ[e[t+12]]+uQ[e[t+13]]+uQ[e[t+14]]+uQ[e[t+15]]).toLowerCase();if(!("string"==typeof r&&uZ.test(r)))throw TypeError("Stringified UUID is invalid");return r},u0=function(e,t,r){var n=(e=e||{}).random||(e.rng||function(){if(!z&&!(z="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return z(uJ)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=n[s];return t}return uY(n)},u1={};u1=function(e,t,r,n){if("string"!=typeof e)throw TypeError(e+" must be a string");let s="number"==typeof(n=n||{}).version?n.version:2;if(1!==s&&2!==s)throw TypeError(s+" must be 1 or 2");let o={method:e};if(2===s&&(o.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw TypeError(t+" must be an object, array or omitted");o.params=t}return void 0===r?o.id=("function"==typeof n.generator?n.generator:function(){return u0()})(o,n):2===s&&null===r?n.notificationIdNull&&(o.id=null):o.id=r,o};"use strict";let u2=function(e,t){if(!(this instanceof u2))return new u2(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return u0()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};u2.prototype.request=function(e,t,r,n){let s,o=this,a=null,l=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&l)throw TypeError("JSON-RPC 1.0 does not support batching");let u=!l&&e&&"object"==typeof e&&"function"==typeof t;if(l||u)n=t,a=e;else{"function"==typeof r&&(n=r,r=void 0);let s="function"==typeof n;try{a=u1(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(s)return n(e);throw e}if(!s)return a}try{s=JSON.stringify(a,this.options.replacer)}catch(e){return n(e)}return this.callServer(s,function(e,t){o._parseResponse(e,t,n)}),a},u2.prototype._parseResponse=function(e,t,r){let n;if(e)return void r(e);if(!t)return r();try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length)if(!Array.isArray(n))return r(null,n.error,n.result);else{let e=function(e){return void 0!==e.error};return r(null,n.filter(e),n.filter(function(t){return!e(t)}))}r(null,n)};var oZ=ed("bIMcy"),u3={},u8=Object.prototype.hasOwnProperty,u6="~";function u4(){}function u5(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function u9(e,t,r,n,s){if("function"!=typeof r)throw TypeError("The listener must be a function");var o=new u5(r,n||e,s),a=u6?u6+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function u7(e,t){0==--e._eventsCount?e._events=new u4:delete e._events[t]}function ce(){this._events=new u4,this._eventsCount=0}Object.create&&(u4.prototype=Object.create(null),new u4().__proto__||(u6=!1)),ce.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)u8.call(e,t)&&r.push(u6?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},ce.prototype.listeners=function(e){var t=u6?u6+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=Array(s);n<s;n++)o[n]=r[n].fn;return o},ce.prototype.listenerCount=function(e){var t=u6?u6+e:e,r=this._events[t];return r?r.fn?1:r.length:0},ce.prototype.emit=function(e,t,r,n,s,o){var a=u6?u6+e:e;if(!this._events[a])return!1;var l,u,c=this._events[a],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,s),!0;case 6:return c.fn.call(c.context,t,r,n,s,o),!0}for(u=1,l=Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!l)for(f=1,l=Array(d-1);f<d;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},ce.prototype.on=function(e,t,r){return u9(this,e,t,r,!1)},ce.prototype.once=function(e,t,r){return u9(this,e,t,r,!0)},ce.prototype.removeListener=function(e,t,r,n){var s=u6?u6+e:e;if(!this._events[s])return this;if(!t)return u7(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||u7(this,s);else{for(var a=0,l=[],u=o.length;a<u;a++)(o[a].fn!==t||n&&!o[a].once||r&&o[a].context!==r)&&l.push(o[a]);l.length?this._events[s]=1===l.length?l[0]:l:u7(this,s)}return this},ce.prototype.removeAllListeners=function(e){var t;return e?(t=u6?u6+e:e,this._events[t]&&u7(this,t)):(this._events=new u4,this._eventsCount=0),this},ce.prototype.off=ce.prototype.removeListener,ce.prototype.addListener=ce.prototype.on,ce.prefixed=u6,ce.EventEmitter=ce,(u3=ce).EventEmitter;"use strict";u3.EventEmitter;var ct={};Object.defineProperty(ct,"__esModule",{value:!0}),ct.shake256=ct.shake128=ct.keccak_512=ct.keccak_384=ct.keccak_256=ct.keccak_224=ct.sha3_512=ct.sha3_384=ct.sha3_256=ct.sha3_224=ct.Keccak=void 0,ct.keccakP=cg;let cr=[],cn=[],ci=[],cs=BigInt(0),co=BigInt(1),ca=BigInt(2),cl=BigInt(7),cu=BigInt(256),cc=BigInt(113);for(let e=0,t=co,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],cr.push(2*(5*n+r)),cn.push((e+1)*(e+2)/2%64);let s=cs;for(let e=0;e<7;e++)(t=(t<<co^(t>>cl)*cc)%cu)&ca&&(s^=co<<(co<<BigInt(e))-co);ci.push(s)}let[cd,cf]=(0,as.split)(ci,!0),ch=(e,t,r)=>r>32?(0,as.rotlBH)(e,t,r):(0,as.rotlSH)(e,t,r),cp=(e,t,r)=>r>32?(0,as.rotlBL)(e,t,r):(0,as.rotlSL)(e,t,r);function cg(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,s=(t+2)%10,o=r[s],a=r[s+1],l=ch(o,a,1)^r[n],u=cp(o,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=l,e[t+r+1]^=u}let t=e[2],s=e[3];for(let r=0;r<24;r++){let n=cn[r],o=ch(t,s,n),a=cp(t,s,n),l=cr[r];t=e[l],s=e[l+1],e[l]=o,e[l+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=cd[n],e[1]^=cf[n]}r.fill(0)}class cm extends o3.Hash{constructor(e,t,r,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,o0.anumber)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,o3.u32)(this.state)}keccak(){o3.isLE||(0,o3.byteSwap32)(this.state32),cg(this.state32,this.rounds),o3.isLE||(0,o3.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,o0.aexists)(this);let{blockLen:t,state:r}=this,n=(e=(0,o3.toBytes)(e)).length;for(let s=0;s<n;){let o=Math.min(t-this.pos,n-s);for(let t=0;t<o;t++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,o0.aexists)(this,!1),(0,o0.abytes)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,s=e.length;n<s;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,s-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,o0.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,o0.aoutput)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:s,enableXOF:o}=this;return e||(e=new cm(t,r,n,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}ct.Keccak=cm;let cy=(e,t,r)=>(0,o3.wrapConstructor)(()=>new cm(t,e,r));ct.sha3_224=cy(6,144,28),ct.sha3_256=cy(6,136,32),ct.sha3_384=cy(6,104,48),ct.sha3_512=cy(6,72,64),ct.keccak_224=cy(1,144,28),ct.keccak_256=cy(1,136,32),ct.keccak_384=cy(1,104,48),ct.keccak_512=cy(1,72,64);"use strict";let cb=(e,t,r)=>(0,o3.wrapXOFConstructorWithOpts)((n={})=>new cm(t,e,void 0===n.dkLen?r:n.dkLen,!0));ct.shake128=cb(31,168,16),ct.shake256=cb(31,136,32);"use strict";var cv={};Object.defineProperty(cv,"__esModule",{value:!0}),cv.encodeToCurve=cv.hashToCurve=cv.schnorr=cv.secp256k1=void 0;"use strict";var cx={};Object.defineProperty(cx,"__esModule",{value:!0}),cx.getHash=cD,cx.createCurve=function(e,t){let r=t=>(0,cA.weierstrass)({...e,...cD(t)});return{...r(t),create:r}};var cw={};Object.defineProperty(cw,"__esModule",{value:!0}),cw.hmac=cw.HMAC=void 0;class cE extends o3.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,o0.ahash)(e);let r=(0,o3.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,s=new Uint8Array(n);s.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,o0.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,o0.aexists)(this),(0,o0.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:s,blockLen:o,outputLen:a}=this;return e.finished=n,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}"use strict";cw.HMAC=cE,cw.hmac=(e,t,r)=>new cE(e,t).update(r).digest(),cw.hmac.create=(e,t)=>new cE(e,t);var cA={};Object.defineProperty(cA,"__esModule",{value:!0}),cA.DER=cA.DERErr=void 0,cA.weierstrassPoints=cB,cA.weierstrass=function(e){let t=function(e){let t=(0,aU.validateBasic)(e);return az.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n}=t,s=r.BYTES+1,o=2*r.BYTES+1;function a(e){return(0,aj.mod)(e,n)}function l(e){return(0,aj.invert)(e,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:f}=cB({...t,toBytes(e,t,n){let s=t.toAffine(),o=r.toBytes(s.x),a=az.concatBytes;return((0,az.abool)("isCompressed",n),n)?a(Uint8Array.from([t.hasEvenY()?2:3]),o):a(Uint8Array.from([4]),o,r.toBytes(s.y))},fromBytes(e){let t=e.length,n=e[0],a=e.subarray(1);if(t===s&&(2===n||3===n)){let e,t=az.bytesToNumberBE(a);if(!az.inRange(t,cC,r.ORDER))throw Error("Point is not on curve");let s=d(t);try{e=r.sqrt(s)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&n)==1!=((e&cC)===cC)&&(e=r.neg(e)),{x:t,y:e}}if(t===o&&4===n)return{x:r.fromBytes(a.subarray(0,r.BYTES)),y:r.fromBytes(a.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+s+", or uncompressed "+o+", got "+t)}}),h=e=>az.bytesToHex(az.numberToBytesBE(e,t.nByteLength)),p=(e,t,r)=>az.bytesToNumberBE(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new g(p(e=(0,az.ensureBytes)("compactSignature",e,2*r),0,r),p(e,r,2*r))}static fromDER(e){let{r:t,s:r}=cA.DER.toSig((0,az.ensureBytes)("DER",e));return new g(t,r)}assertValidity(){az.aInRange("r",this.r,cC,n),az.aInRange("s",this.s,cC,n)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s:s,recovery:o}=this,c=b((0,az.ensureBytes)("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");let d=2===o||3===o?n+t.n:n;if(d>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let f=(1&o)==0?"02":"03",p=u.fromHex(f+h(d)),g=l(d),m=a(-c*g),y=a(s*g),v=u.BASE.multiplyAndAddUnsafe(p,m,y);if(!v)throw Error("point at infinify");return v.assertValidity(),v}hasHighS(){return this.s>n>>cC}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return az.hexToBytes(this.toDERHex())}toDERHex(){return cA.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return az.hexToBytes(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}function m(e){let t=az.isBytes(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===s||n===o:r?n===2*s||n===2*o:e instanceof u}let y=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=az.bytesToNumberBE(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},b=t.bits2int_modN||function(e){return a(y(e))},v=az.bitMask(t.nBitLength);function x(e){return az.aInRange("num < 2^"+t.nBitLength,e,cP,v),az.numberToBytesBE(e,t.nByteLength)}let w={lowS:t.lowS,prehash:!1},E={lowS:t.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return u.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(m(e))throw Error("first arg must be private key");if(!m(t))throw Error("second arg must be public key");return u.fromHex(t).multiply(c(e)).toRawBytes(r)},sign:function(e,s,o=w){let{seed:d,k2sig:h}=function(e,s,o=w){if(["recovered","canonical"].some(e=>e in o))throw Error("sign() legacy options not supported");let{hash:d,randomBytes:h}=t,{lowS:p,prehash:m,extraEntropy:v}=o;null==p&&(p=!0),e=(0,az.ensureBytes)("msgHash",e),cS(o),m&&(e=(0,az.ensureBytes)("prehashed msgHash",d(e)));let E=b(e),A=c(s),S=[x(A),x(E)];if(null!=v&&!1!==v){let e=!0===v?h(r.BYTES):v;S.push((0,az.ensureBytes)("extraEntropy",e))}return{seed:az.concatBytes(...S),k2sig:function(e){var t;let r=y(e);if(!f(r))return;let s=l(r),o=u.BASE.multiply(r).toAffine(),c=a(o.x);if(c===cP)return;let d=a(s*a(E+c*A));if(d===cP)return;let h=2*(o.x!==c)|Number(o.y&cC),m=d;return p&&d>n>>cC&&(m=(t=d)>n>>cC?a(-t):t,h^=1),new g(c,m,h)}}}(e,s,o);return az.createHmacDrbg(t.hash.outputLen,t.nByteLength,t.hmac)(d,h)},verify:function(e,r,n,s=E){let o,c;r=(0,az.ensureBytes)("msgHash",r),n=(0,az.ensureBytes)("publicKey",n);let{lowS:d,prehash:f,format:h}=s;if(cS(s),"strict"in s)throw Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw Error("format must be compact or der");let p="string"==typeof e||az.isBytes(e),m=!p&&!h&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!p&&!m)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(m&&(c=new g(e.r,e.s)),p){try{"compact"!==h&&(c=g.fromDER(e))}catch(e){if(!(e instanceof cA.DER.Err))throw e}c||"der"===h||(c=g.fromCompact(e))}o=u.fromHex(n)}catch(e){return!1}if(!c||d&&c.hasHighS())return!1;f&&(r=t.hash(r));let{r:y,s:v}=c,x=b(r),w=l(v),A=a(x*w),S=a(y*w),k=u.BASE.multiplyAndAddUnsafe(o,A,S)?.toAffine();return!!k&&a(k.x)===y},ProjectivePoint:u,Signature:g,utils:{isValidPrivateKey(e){try{return c(e),!0}catch(e){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{let e=(0,aj.getMinHashLength)(t.n);return(0,aj.mapHashToField)(t.randomBytes(e),t.n)},precompute:(e=8,t=u.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}},cA.SWUFpSqrtRatio=cN,cA.mapToCurveSimpleSWU=function(e,t){if((0,aj.validateField)(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=cN(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let s,o,a,l,u,c,d,f;s=e.sqr(n),s=e.mul(s,t.Z),o=e.sqr(s),o=e.add(o,s),a=e.add(o,e.ONE),a=e.mul(a,t.B),l=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),l=e.mul(l,t.A),o=e.sqr(a),c=e.sqr(l),u=e.mul(c,t.A),o=e.add(o,u),o=e.mul(o,a),c=e.mul(c,l),u=e.mul(c,t.B),o=e.add(o,u),d=e.mul(s,a);let{isValid:h,value:p}=r(o,c);f=e.mul(s,n),f=e.mul(f,p),d=e.cmov(d,a,h),f=e.cmov(f,p,h);let g=e.isOdd(n)===e.isOdd(f);return f=e.cmov(e.neg(f),f,g),{x:d=e.div(d,l),y:f}}};var aU=ed("8XKzF"),aj=ed("5a9aS"),az=(ed("19JXl"),ed("19JXl"));function cS(e){void 0!==e.lowS&&(0,az.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,az.abool)("prehash",e.prehash)}let{bytesToNumberBE:ck,hexToBytes:cI}=az;class c_ extends Error{constructor(e=""){super(e)}}cA.DERErr=c_,cA.DER={Err:c_,_tlv:{encode:(e,t)=>{let{Err:r}=cA.DER;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,s=az.numberToHexUnpadded(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");let o=n>127?az.numberToHexUnpadded(s.length/2|128):"";return az.numberToHexUnpadded(e)+o+s+t},decode(e,t){let{Err:r}=cA.DER,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let s=t[n++],o=0;if(128&s){let e=127&s;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let a=t.subarray(n,n+e);if(a.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===a[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of a)o=o<<8|e;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=s;let a=t.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(e){let{Err:t}=cA.DER;if(e<cP)throw new t("integer: negative integers are not allowed");let r=az.numberToHexUnpadded(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=cA.DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return ck(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=cA.DER,s="string"==typeof e?cI(e):e;az.abytes(s);let{v:o,l:a}=n.decode(48,s);if(a.length)throw new t("invalid signature: left bytes after parsing");let{v:l,l:u}=n.decode(2,o),{v:c,l:d}=n.decode(2,u);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(l),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=cA.DER,n=t.encode(2,r.encode(e.r)),s=t.encode(2,r.encode(e.s));return t.encode(48,n+s)}};let cP=BigInt(0),cC=BigInt(1),cO=BigInt(2),cT=BigInt(3),cR=BigInt(4);function cB(e){let t=function(e){let t=(0,aU.validateBasic)(e);az.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=t;if(r){if(!n.eql(s,n.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=(0,aj.Field)(t.n,t.nBitLength),s=t.toBytes||((e,t,n)=>{let s=t.toAffine();return az.concatBytes(Uint8Array.from([4]),r.toBytes(s.x),r.toBytes(s.y))}),o=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function a(e){let{a:n,b:s}=t,o=r.sqr(e),a=r.mul(o,e);return r.add(r.add(a,r.mul(e,n)),s)}if(!r.eql(r.sqr(t.Gy),a(t.Gx)))throw Error("bad generator point: equation left != right");function l(e){let r,{allowedPrivateKeyLengths:n,nByteLength:s,wrapPrivateKey:o,n:a}=t;if(n&&"bigint"!=typeof e){if(az.isBytes(e)&&(e=az.bytesToHex(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*s,"0")}try{r="bigint"==typeof e?e:az.bytesToNumberBE((0,az.ensureBytes)("private key",e,s))}catch(t){throw Error("invalid private key, expected hex or "+s+" bytes, got "+typeof e)}return o&&(r=(0,aj.mod)(r,a)),az.aInRange("private key",r,cC,a),r}function u(e){if(!(e instanceof f))throw Error("ProjectivePoint expected")}let c=(0,az.memoized)((e,t)=>{let{px:n,py:s,pz:o}=e;if(r.eql(o,r.ONE))return{x:n,y:s};let a=e.is0();null==t&&(t=a?r.ONE:r.inv(o));let l=r.mul(n,t),u=r.mul(s,t),c=r.mul(o,t);if(a)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw Error("invZ was invalid");return{x:l,y:u}}),d=(0,az.memoized)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:n,y:s}=e.toAffine();if(!r.isValid(n)||!r.isValid(s))throw Error("bad point: x or y not FE");let o=r.sqr(s),l=a(n);if(!r.eql(o,l))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class f{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof f)throw Error("projective point not allowed");let s=e=>r.eql(e,r.ZERO);return s(t)&&s(n)?f.ZERO:new f(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(f.fromAffine)}static fromHex(e){let t=f.fromAffine(o((0,az.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return f.BASE.multiply(l(e))}static msm(e,t){return(0,aU.pippenger)(f,n,e,t)}_setWindowSize(e){p.setWindowSize(this,e)}assertValidity(){d(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){u(e);let{px:t,py:n,pz:s}=this,{px:o,py:a,pz:l}=e,c=r.eql(r.mul(t,l),r.mul(o,s)),d=r.eql(r.mul(n,l),r.mul(a,s));return c&&d}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,s=r.mul(n,cT),{px:o,py:a,pz:l}=this,u=r.ZERO,c=r.ZERO,d=r.ZERO,h=r.mul(o,o),p=r.mul(a,a),g=r.mul(l,l),m=r.mul(o,a);return m=r.add(m,m),d=r.mul(o,l),d=r.add(d,d),u=r.mul(e,d),c=r.mul(s,g),c=r.add(u,c),u=r.sub(p,c),c=r.add(p,c),c=r.mul(u,c),u=r.mul(m,u),d=r.mul(s,d),g=r.mul(e,g),m=r.sub(h,g),m=r.mul(e,m),m=r.add(m,d),d=r.add(h,h),h=r.add(d,h),h=r.add(h,g),h=r.mul(h,m),c=r.add(c,h),g=r.mul(a,l),g=r.add(g,g),h=r.mul(g,m),u=r.sub(u,h),d=r.mul(g,p),d=r.add(d,d),new f(u,c,d=r.add(d,d))}add(e){u(e);let{px:n,py:s,pz:o}=this,{px:a,py:l,pz:c}=e,d=r.ZERO,h=r.ZERO,p=r.ZERO,g=t.a,m=r.mul(t.b,cT),y=r.mul(n,a),b=r.mul(s,l),v=r.mul(o,c),x=r.add(n,s),w=r.add(a,l);x=r.mul(x,w),w=r.add(y,b),x=r.sub(x,w),w=r.add(n,o);let E=r.add(a,c);return w=r.mul(w,E),E=r.add(y,v),w=r.sub(w,E),E=r.add(s,o),d=r.add(l,c),E=r.mul(E,d),d=r.add(b,v),E=r.sub(E,d),p=r.mul(g,w),d=r.mul(m,v),p=r.add(d,p),d=r.sub(b,p),p=r.add(b,p),h=r.mul(d,p),b=r.add(y,y),b=r.add(b,y),v=r.mul(g,v),w=r.mul(m,w),b=r.add(b,v),v=r.sub(y,v),v=r.mul(g,v),w=r.add(w,v),y=r.mul(b,w),h=r.add(h,y),y=r.mul(E,w),d=r.mul(x,d),d=r.sub(d,y),y=r.mul(x,b),p=r.mul(E,p),new f(d,h,p=r.add(p,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(f.ZERO)}wNAF(e){return p.wNAFCached(this,e,f.normalizeZ)}multiplyUnsafe(e){let{endo:n,n:s}=t;az.aInRange("scalar",e,cP,s);let o=f.ZERO;if(e===cP)return o;if(this.is0()||e===cC)return this;if(!n||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,e,f.normalizeZ);let{k1neg:a,k1:l,k2neg:u,k2:c}=n.splitScalar(e),d=o,h=o,g=this;for(;l>cP||c>cP;)l&cC&&(d=d.add(g)),c&cC&&(h=h.add(g)),g=g.double(),l>>=cC,c>>=cC;return a&&(d=d.negate()),u&&(h=h.negate()),h=new f(r.mul(h.px,n.beta),h.py,h.pz),d.add(h)}multiply(e){let n,s,{endo:o,n:a}=t;if(az.aInRange("scalar",e,cC,a),o){let{k1neg:t,k1:a,k2neg:l,k2:u}=o.splitScalar(e),{p:c,f:d}=this.wNAF(a),{p:h,f:g}=this.wNAF(u);c=p.constTimeNegate(t,c),h=p.constTimeNegate(l,h),h=new f(r.mul(h.px,o.beta),h.py,h.pz),n=c.add(h),s=d.add(g)}else{let{p:t,f:r}=this.wNAF(e);n=t,s=r}return f.normalizeZ([n,s])[0]}multiplyAndAddUnsafe(e,t,r){let n=f.BASE,s=(e,t)=>t!==cP&&t!==cC&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=s(this,t).add(s(e,r));return o.is0()?void 0:o}toAffine(e){return c(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===cC)return!0;if(r)return r(f,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===cC?this:r?r(f,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,az.abool)("isCompressed",e),this.assertValidity(),s(f,this,e)}toHex(e=!0){return(0,az.abool)("isCompressed",e),az.bytesToHex(this.toRawBytes(e))}}f.BASE=new f(t.Gx,t.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);let h=t.nBitLength,p=(0,aU.wNAF)(f,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:a,isWithinCurveOrder:function(e){return az.inRange(e,cC,t.n)}}}function cN(e,t){let r=e.ORDER,n=cP;for(let e=r-cC;e%cO===cP;e/=cO)n+=cC;let s=n,o=cO<<s-cC-cC,a=o*cO,l=(r-cC)/a,u=(l-cC)/cO,c=a-cC,d=e.pow(t,l),f=e.pow(t,(l+cC)/cO),h=(t,r)=>{let n=d,a=e.pow(r,c),l=e.sqr(a);l=e.mul(l,r);let h=e.mul(t,l);h=e.pow(h,u),h=e.mul(h,a),a=e.mul(h,r),l=e.mul(h,t);let p=e.mul(l,a);h=e.pow(p,o);let g=e.eql(h,e.ONE);a=e.mul(l,f),h=e.mul(p,n),l=e.cmov(a,l,g),p=e.cmov(h,p,g);for(let t=s;t>cC;t--){let r=t-cO;r=cO<<r-cC;let s=e.pow(p,r),o=e.eql(s,e.ONE);a=e.mul(l,n),n=e.mul(n,n),s=e.mul(p,n),l=e.cmov(a,l,o),p=e.cmov(s,p,o)}return{isValid:g,value:l}};if(e.ORDER%cR===cT){let r=(e.ORDER-cT)/cR,n=e.sqrt(e.neg(t));h=(t,s)=>{let o=e.sqr(s),a=e.mul(t,s);o=e.mul(o,a);let l=e.pow(o,r);l=e.mul(l,a);let u=e.mul(l,n),c=e.mul(e.sqr(l),s),d=e.eql(c,t),f=e.cmov(u,l,d);return{isValid:d,value:f}}}return h}function cD(e){return{hash:e,hmac:(t,...r)=>(0,cw.hmac)(e,t,(0,o3.concatBytes)(...r)),randomBytes:o3.randomBytes}}var aj=ed("5a9aS"),az=ed("19JXl");let cL=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),cM=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),cU=BigInt(1),cF=BigInt(2),cj=(e,t)=>(e+t/cF)/t;function cz(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%cL,c=u*u*e%cL,d=(0,aj.pow2)(c,t,cL)*c%cL,f=(0,aj.pow2)(d,t,cL)*c%cL,h=(0,aj.pow2)(f,cF,cL)*u%cL,p=(0,aj.pow2)(h,n,cL)*h%cL,g=(0,aj.pow2)(p,s,cL)*p%cL,m=(0,aj.pow2)(g,a,cL)*g%cL,y=(0,aj.pow2)(m,l,cL)*m%cL,b=(0,aj.pow2)(y,a,cL)*g%cL,v=(0,aj.pow2)(b,t,cL)*c%cL,x=(0,aj.pow2)(v,o,cL)*p%cL,w=(0,aj.pow2)(x,r,cL)*u%cL,E=(0,aj.pow2)(w,cF,cL);if(!c$.eql(c$.sqr(E),e))throw Error("Cannot find square root");return E}let c$=(0,aj.Field)(cL,void 0,void 0,{sqrt:cz});cv.secp256k1=(0,cx.createCurve)({a:BigInt(0),b:BigInt(7),Fp:c$,n:cM,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-cU*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=BigInt("0x100000000000000000000000000000000"),o=cj(t*e,cM),a=cj(-r*e,cM),l=(0,aj.mod)(e-o*t-a*n,cM),u=(0,aj.mod)(-o*r-a*t,cM),c=l>s,d=u>s;if(c&&(l=cM-l),d&&(u=cM-u),l>s||u>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:l,k2neg:d,k2:u}}}},lk.sha256);let cH=BigInt(0),cV={};function cq(e,...t){let r=cV[e];if(void 0===r){let t=(0,lk.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));r=(0,az.concatBytes)(t,t),cV[e]=r}return(0,lk.sha256)((0,az.concatBytes)(r,...t))}let cG=e=>e.toRawBytes(!0).slice(1),cW=e=>(0,az.numberToBytesBE)(e,32),cK=e=>(0,aj.mod)(e,cL),cJ=e=>(0,aj.mod)(e,cM),cZ=cv.secp256k1.ProjectivePoint,cQ=(e,t,r)=>cZ.BASE.multiplyAndAddUnsafe(e,t,r);function cX(e){let t=cv.secp256k1.utils.normPrivateKeyToScalar(e),r=cZ.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:cJ(-t),bytes:cG(r)}}function cY(e){(0,az.aInRange)("x",e,cU,cL);let t=cK(e*e),r=cz(cK(t*e+BigInt(7)));r%cF!==cH&&(r=cK(-r));let n=new cZ(e,r,cU);return n.assertValidity(),n}let c0=az.bytesToNumberBE;function c1(...e){return cJ(c0(cq("BIP0340/challenge",...e)))}function c2(e,t,r){let n=(0,az.ensureBytes)("signature",e,64),s=(0,az.ensureBytes)("message",t),o=(0,az.ensureBytes)("publicKey",r,32);try{let e=cY(c0(o)),t=c0(n.subarray(0,32));if(!(0,az.inRange)(t,cU,cL))return!1;let r=c0(n.subarray(32,64));if(!(0,az.inRange)(r,cU,cM))return!1;let a=c1(cW(t),cG(e),s),l=cQ(e,r,cJ(-a));if(!l||!l.hasEvenY()||l.toAffine().x!==t)return!1;return!0}catch(e){return!1}}cv.schnorr={getPublicKey:function(e){return cX(e).bytes},sign:function(e,t,r=(0,o3.randomBytes)(32)){let n=(0,az.ensureBytes)("message",e),{bytes:s,scalar:o}=cX(t),a=cW(o^c0(cq("BIP0340/aux",(0,az.ensureBytes)("auxRand",r,32)))),l=cJ(c0(cq("BIP0340/nonce",a,s,n)));if(l===cH)throw Error("sign failed: k is zero");let{bytes:u,scalar:c}=cX(l),d=c1(u,s,n),f=new Uint8Array(64);if(f.set(u,0),f.set(cW(cJ(c+d*o)),32),!c2(f,n,s))throw Error("sign: Invalid signature produced");return f},verify:c2,utils:{randomPrivateKey:cv.secp256k1.utils.randomPrivateKey,lift_x:cY,pointToBytes:cG,numberToBytesBE:az.numberToBytesBE,bytesToNumberBE:az.bytesToNumberBE,taggedHash:cq,mod:aj.mod}};let c3=(0,aW.isogenyMap)(c$,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),c8=(0,cA.mapToCurveSimpleSWU)(c$,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:c$.create(BigInt("-11"))}),c6=(0,aW.createHasher)(cv.secp256k1.ProjectivePoint,e=>{let{x:t,y:r}=c8(c$.create(e[0]));return c3(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:c$.ORDER,m:1,k:128,expand:"xmd",hash:lk.sha256});cv.hashToCurve=c6.hashToCurve,cv.encodeToCurve=c6.encodeToCurve,oQ.ed25519.utils.randomPrivateKey;let c4=()=>{let e=oQ.ed25519.utils.randomPrivateKey(),t=c5(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},c5=oQ.ed25519.getPublicKey;function c9(e){try{return oQ.ed25519.ExtendedPoint.fromHex(e),!0}catch{return!1}}let c7=(e,t)=>oQ.ed25519.sign(e,t.slice(0,32)),de=oQ.ed25519.verify,dt=e=>oZ.Buffer.isBuffer(e)?e:e instanceof Uint8Array?oZ.Buffer.from(e.buffer,e.byteOffset,e.byteLength):oZ.Buffer.from(e);class dr{constructor(e){Object.assign(this,e)}encode(){return oZ.Buffer.from((0,lT.serialize)(dn,this))}static decode(e){return(0,lT.deserialize)(dn,this,e)}static decodeUnchecked(e){return(0,lT.deserializeUnchecked)(dn,this,e)}}let dn=new Map,di=1;class ds extends dr{constructor(e){if(super({}),this._bn=void 0,void 0!==e._bn)this._bn=e._bn;else{if("string"==typeof e){let t=el(lS).decode(e);if(32!=t.length)throw Error("Invalid public key input");this._bn=new(el(lA))(t)}else this._bn=new(el(lA))(e);if(this._bn.byteLength()>32)throw Error("Invalid public key input")}}static unique(){let e=new ds(di);return di+=1,new ds(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return el(lS).encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(oZ.Buffer);if(32===e.length)return e;let t=oZ.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){let n=oZ.Buffer.concat([e.toBuffer(),oZ.Buffer.from(t),r.toBuffer()]);return new ds((0,lk.sha256)(n))}static createProgramAddressSync(e,t){let r=oZ.Buffer.alloc(0);e.forEach(function(e){if(e.length>32)throw TypeError("Max seed length exceeded");r=oZ.Buffer.concat([r,dt(e)])}),r=oZ.Buffer.concat([r,t.toBuffer(),oZ.Buffer.from("ProgramDerivedAddress")]);let n=(0,lk.sha256)(r);if(c9(n))throw Error("Invalid seeds, address must fall off the curve");return new ds(n)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,n=255;for(;0!=n;){try{let s=e.concat(oZ.Buffer.from([n]));r=this.createProgramAddressSync(s,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return c9(new ds(e).toBytes())}}ds.default=new ds("11111111111111111111111111111111"),dn.set(ds,{kind:"struct",fields:[["_bn","u256"]]}),new ds("BPFLoader1111111111111111111111111111111111"),Object.defineProperty((class extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}).prototype,"name",{value:"TransactionExpiredBlockheightExceededError"}),Object.defineProperty((class extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}).prototype,"name",{value:"TransactionExpiredTimeoutError"}),Object.defineProperty((class extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}).prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class da{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments())if(e<t.length)return t[e];else e-=t.length}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw Error("Account index overflow encountered during compilation");let t=new Map;this.keySegments().flat().forEach((e,r)=>{t.set(e.toBase58(),r)});let r=e=>{let r=t.get(e.toBase58());if(void 0===r)throw Error("Encountered an unknown instruction account key during compilation");return r};return e.map(e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map(e=>r(e.pubkey)),data:e.data}))}}let dl=(e="publicKey")=>lQ.blob(32,e),du=(e="signature")=>lQ.blob(64,e),dc=(e="string")=>{let t=lQ.struct([lQ.u32("length"),lQ.u32("lengthPadding"),lQ.blob(lQ.offset(lQ.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t);return t.decode=(e,t)=>r(e,t).chars.toString(),t.encode=(e,t,r)=>n({chars:oZ.Buffer.from(e,"utf8")},t,r),t.alloc=e=>lQ.u32().span+lQ.u32().span+oZ.Buffer.from(e,"utf8").length,t};function dd(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,(128&n)==0)break}return t}function df(e,t){let r=t;for(;;){let t=127&r;if(0==(r>>=7)){e.push(t);break}t|=128,e.push(t)}}function dh(e,t){if(!e)throw Error(t||"Assertion failed")}class dp{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){let r=new Map,n=e=>{let t=e.toBase58(),n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},s=n(t);for(let t of(s.isSigner=!0,s.isWritable=!0,e))for(let e of(n(t.programId).isInvoked=!0,t.keys)){let t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}return new dp(t,r)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];dh(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,e])=>e.isSigner&&e.isWritable),r=e.filter(([,e])=>e.isSigner&&!e.isWritable),n=e.filter(([,e])=>!e.isSigner&&e.isWritable),s=e.filter(([,e])=>!e.isSigner&&!e.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{dh(t.length>0,"Expected at least one writable signer key");let[e]=t[0];dh(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...t.map(([e])=>new ds(e)),...r.map(([e])=>new ds(e)),...n.map(([e])=>new ds(e)),...s.map(([e])=>new ds(e))]]}extractTableLookup(e){let[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&e.isWritable),[n,s]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&!e.isWritable);if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,t){let r=[],n=[];for(let[s,o]of this.keyMetaMap.entries())if(t(o)){let t=new ds(s),o=e.findIndex(e=>e.equals(t));o>=0&&(dh(o<256,"Max lookup table index exceeded"),r.push(o),n.push(t),this.keyMetaMap.delete(s))}return[r,n]}}let dg="Reached end of buffer unexpectedly";function dm(e){if(0===e.length)throw Error(dg);return e.shift()}function dy(e,...t){let[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw Error(dg);return e.splice(...t)}class db{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(e=>new ds(e)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:el(lS).decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new da(this.staticAccountKeys)}static compile(e){let[t,r]=dp.compile(e.instructions,e.payerKey).getMessageComponents(),n=new da(r).compileInstructions(e.instructions).map(e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:el(lS).encode(e.data)}));return new db({header:t,accountKeys:r,recentBlockhash:e.recentBlockhash,instructions:n})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;{let r=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return e-t<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];df(t,e);let r=this.instructions.map(e=>{let{accounts:t,programIdIndex:r}=e,n=Array.from(el(lS).decode(e.data)),s=[];df(s,t.length);let o=[];return df(o,n.length),{programIdIndex:r,keyIndicesCount:oZ.Buffer.from(s),keyIndices:t,dataLength:oZ.Buffer.from(o),data:n}}),n=[];df(n,r.length);let s=oZ.Buffer.alloc(1232);oZ.Buffer.from(n).copy(s);let o=n.length;r.forEach(e=>{let t=lQ.struct([lQ.u8("programIdIndex"),lQ.blob(e.keyIndicesCount.length,"keyIndicesCount"),lQ.seq(lQ.u8("keyIndex"),e.keyIndices.length,"keyIndices"),lQ.blob(e.dataLength.length,"dataLength"),lQ.seq(lQ.u8("userdatum"),e.data.length,"data")]).encode(e,s,o);o+=t}),s=s.slice(0,o);let a=lQ.struct([lQ.blob(1,"numRequiredSignatures"),lQ.blob(1,"numReadonlySignedAccounts"),lQ.blob(1,"numReadonlyUnsignedAccounts"),lQ.blob(t.length,"keyCount"),lQ.seq(dl("key"),e,"keys"),dl("recentBlockhash")]),l={numRequiredSignatures:oZ.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:oZ.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:oZ.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:oZ.Buffer.from(t),keys:this.accountKeys.map(e=>dt(e.toBytes())),recentBlockhash:el(lS).decode(this.recentBlockhash)},u=oZ.Buffer.alloc(2048),c=a.encode(l,u);return s.copy(u,c),u.slice(0,c+s.length)}static from(e){let t=[...e],r=dm(t);if(r!==(127&r))throw Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let n=dm(t),s=dm(t),o=dd(t),a=[];for(let e=0;e<o;e++){let e=dy(t,0,32);a.push(new ds(oZ.Buffer.from(e)))}let l=dy(t,0,32),u=dd(t),c=[];for(let e=0;e<u;e++){let e=dm(t),r=dd(t),n=dy(t,0,r),s=dd(t),o=dy(t,0,s),a=el(lS).encode(oZ.Buffer.from(o));c.push({programIdIndex:e,accounts:n,data:a})}return new db({header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:s},recentBlockhash:el(lS).encode(oZ.Buffer.from(l)),accountKeys:a,instructions:c})}}class dv{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw Error("Failed to get account keys because address table lookups were not resolved");return new da(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r)return e-r<this.addressTableLookups.reduce((e,t)=>e+t.writableIndexes.length,0);if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;{let n=r-t-this.header.numReadonlyUnsignedAccounts;return e-t<n}}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let r of this.addressTableLookups){let n=e.find(e=>e.key.equals(r.accountKey));if(!n)throw Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let e of r.writableIndexes)if(e<n.state.addresses.length)t.writable.push(n.state.addresses[e]);else throw Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);for(let e of r.readonlyIndexes)if(e<n.state.addresses.length)t.readonly.push(n.state.addresses[e]);else throw Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){let t=dp.compile(e.instructions,e.payerKey),r=[],n={writable:[],readonly:[]};for(let s of e.addressLookupTableAccounts||[]){let e=t.extractTableLookup(s);if(void 0!==e){let[t,{writable:s,readonly:o}]=e;r.push(t),n.writable.push(...s),n.readonly.push(...o)}}let[s,o]=t.getMessageComponents(),a=new da(o,n).compileInstructions(e.instructions);return new dv({header:s,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){let e=[];df(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),r=[];df(r,this.compiledInstructions.length);let n=this.serializeAddressTableLookups(),s=[];df(s,this.addressTableLookups.length);let o=lQ.struct([lQ.u8("prefix"),lQ.struct([lQ.u8("numRequiredSignatures"),lQ.u8("numReadonlySignedAccounts"),lQ.u8("numReadonlyUnsignedAccounts")],"header"),lQ.blob(e.length,"staticAccountKeysLength"),lQ.seq(dl(),this.staticAccountKeys.length,"staticAccountKeys"),dl("recentBlockhash"),lQ.blob(r.length,"instructionsLength"),lQ.blob(t.length,"serializedInstructions"),lQ.blob(s.length,"addressTableLookupsLength"),lQ.blob(n.length,"serializedAddressTableLookups")]),a=new Uint8Array(1232),l=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(e=>e.toBytes()),recentBlockhash:el(lS).decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:n},a);return a.slice(0,l)}serializeInstructions(){let e=0,t=new Uint8Array(1232);for(let r of this.compiledInstructions){let n=[];df(n,r.accountKeyIndexes.length);let s=[];df(s,r.data.length);let o=lQ.struct([lQ.u8("programIdIndex"),lQ.blob(n.length,"encodedAccountKeyIndexesLength"),lQ.seq(lQ.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),lQ.blob(s.length,"encodedDataLength"),lQ.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(1232);for(let r of this.addressTableLookups){let n=[];df(n,r.writableIndexes.length);let s=[];df(s,r.readonlyIndexes.length);let o=lQ.struct([dl("accountKey"),lQ.blob(n.length,"encodedWritableIndexesLength"),lQ.seq(lQ.u8(),r.writableIndexes.length,"writableIndexes"),lQ.blob(s.length,"encodedReadonlyIndexesLength"),lQ.seq(lQ.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e],r=dm(t),n=127&r;dh(r!==n,"Expected versioned message but received legacy message"),dh(0===n,`Expected versioned message with version 0 but found version ${n}`);let s={numRequiredSignatures:dm(t),numReadonlySignedAccounts:dm(t),numReadonlyUnsignedAccounts:dm(t)},o=[],a=dd(t);for(let e=0;e<a;e++)o.push(new ds(dy(t,0,32)));let l=el(lS).encode(dy(t,0,32)),u=dd(t),c=[];for(let e=0;e<u;e++){let e=dm(t),r=dd(t),n=dy(t,0,r),s=dd(t),o=new Uint8Array(dy(t,0,s));c.push({programIdIndex:e,accountKeyIndexes:n,data:o})}let d=dd(t),f=[];for(let e=0;e<d;e++){let e=new ds(dy(t,0,32)),r=dd(t),n=dy(t,0,r),s=dd(t),o=dy(t,0,s);f.push({accountKey:e,writableIndexes:n,readonlyIndexes:o})}return new dv({header:s,staticAccountKeys:o,recentBlockhash:l,compiledInstructions:c,addressTableLookups:f})}}let dx={deserializeMessageVersion(e){let t=e[0],r=127&t;return r===t?"legacy":r},deserialize:e=>{let t=dx.deserializeMessageVersion(e);if("legacy"===t)return db.from(e);if(0===t)return dv.deserialize(e);throw Error(`Transaction message version ${t} deserialization is not supported`)}},dw=oZ.Buffer.alloc(64).fill(0);class dE{constructor(e){this.keys=void 0,this.programId=void 0,this.data=oZ.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class dA{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!e)return;if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{let{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(0===e.length)throw Error("No instructions");return e.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new dE(e))}),this}compileMessage(){let e,t,r;if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw Error("Transaction fee payer required");for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw Error(`Transaction instruction index ${e} has undefined program id`);let n=[],s=[];t.forEach(e=>{e.keys.forEach(e=>{s.push({...e})});let t=e.programId.toString();n.includes(t)||n.push(t)}),n.forEach(e=>{s.push({pubkey:new ds(e),isSigner:!1,isWritable:!1})});let o=[];s.forEach(e=>{let t=e.pubkey.toString(),r=o.findIndex(e=>e.pubkey.toString()===t);r>-1?(o[r].isWritable=o[r].isWritable||e.isWritable,o[r].isSigner=o[r].isSigner||e.isSigner):o.push(e)}),o.sort(function(e,t){return e.isSigner!==t.isSigner?e.isSigner?-1:1:e.isWritable!==t.isWritable?e.isWritable?-1:1:e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});let a=o.findIndex(e=>e.pubkey.equals(r));if(a>-1){let[e]=o.splice(a,1);e.isSigner=!0,e.isWritable=!0,o.unshift(e)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let e of this.signatures){let t=o.findIndex(t=>t.pubkey.equals(e.publicKey));if(t>-1)o[t].isSigner||(o[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw Error(`unknown signer: ${e.publicKey.toString()}`)}let l=0,u=0,c=0,d=[],f=[];o.forEach(({pubkey:e,isSigner:t,isWritable:r})=>{t?(d.push(e.toString()),l+=1,r||(u+=1)):(f.push(e.toString()),r||(c+=1))});let h=d.concat(f),p=t.map(e=>{let{data:t,programId:r}=e;return{programIdIndex:h.indexOf(r.toString()),accounts:e.keys.map(e=>h.indexOf(e.pubkey.toString())),data:el(lS).encode(t)}});return p.forEach(e=>{dh(e.programIdIndex>=0),e.accounts.forEach(e=>dh(e>=0))}),new db({header:{numRequiredSignatures:l,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:c},accountKeys:h,recentBlockhash:e,instructions:p})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((e,r)=>t[r].equals(e.publicKey))?e:(this.signatures=t.map(e=>({signature:null,publicKey:e})),e)}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw Error("No signers");let t=new Set;this.signatures=e.filter(e=>{let r=e.toString();return!t.has(r)&&(t.add(r),!0)}).map(e=>({signature:null,publicKey:e}))}sign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let n of e){let e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map(e=>({signature:null,publicKey:e.publicKey}));let n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let n of e){let e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}let n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){let r=e.serialize();t.forEach(e=>{let t=c7(r,e.secretKey);this._addSignature(e.publicKey,dt(t))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){dh(64===t.length);let r=this.signatures.findIndex(t=>e.equals(t.publicKey));if(r<0)throw Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=oZ.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let r={};for(let{signature:n,publicKey:s}of this.signatures)null===n?t&&(r.missing||=[]).push(s):de(n,e,s.toBytes())||(r.invalid||=[]).push(s);return r.invalid||r.missing?r:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){let e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`
Invalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map(e=>e.toBase58()).join("`, `")}\`].`),e.missing&&(t+=`
Missing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map(e=>e.toBase58()).join("`, `")}\`].`),Error(t)}}return this._serialize(n)}_serialize(e){let{signatures:t}=this,r=[];df(r,t.length);let n=r.length+64*t.length+e.length,s=oZ.Buffer.alloc(n);return dh(t.length<256),oZ.Buffer.from(r).copy(s,0),t.forEach(({signature:e},t)=>{null!==e&&(dh(64===e.length,"signature has invalid length"),oZ.Buffer.from(e).copy(s,r.length+64*t))}),e.copy(s,r.length+64*t.length),dh(s.length<=1232,`Transaction too large: ${s.length} > 1232`),s}get keys(){return dh(1===this.instructions.length),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return dh(1===this.instructions.length),this.instructions[0].programId}get data(){return dh(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e],r=dd(t),n=[];for(let e=0;e<r;e++){let e=dy(t,0,64);n.push(el(lS).encode(oZ.Buffer.from(e)))}return dA.populate(db.from(t),n)}static populate(e,t=[]){let r=new dA;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((t,n)=>{let s={signature:t==el(lS).encode(dw)?null:el(lS).decode(t),publicKey:e.accountKeys[n]};r.signatures.push(s)}),e.instructions.forEach(t=>{let n=t.accounts.map(t=>{let n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some(e=>e.publicKey.toString()===n.toString())||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}});r.instructions.push(new dE({keys:n,programId:e.accountKeys[t.programIdIndex],data:el(lS).decode(t.data)}))}),r._message=e,r._json=r.toJSON(),r}}class dS{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)dh(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{let t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(64));this.signatures=t}this.message=e}serialize(){let e=this.message.serialize(),t=[];df(t,this.signatures.length);let r=lQ.struct([lQ.blob(t.length,"encodedSignaturesLength"),lQ.seq(du(),this.signatures.length,"signatures"),lQ.blob(e.length,"serializedMessage")]),n=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,s)}static deserialize(e){let t=[...e],r=[],n=dd(t);for(let e=0;e<n;e++)r.push(new Uint8Array(dy(t,0,64)));return new dS(dx.deserialize(new Uint8Array(t)),r)}sign(e){let t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let n of e){let e=r.findIndex(e=>e.equals(n.publicKey));dh(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=c7(t,n.secretKey)}}addSignature(e,t){dh(64===t.byteLength,"Signature must be 64 bytes long");let r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(t=>t.equals(e));dh(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}let dk=new ds("SysvarC1ock11111111111111111111111111111111");new ds("SysvarEpochSchedu1e111111111111111111111111"),new ds("Sysvar1nstructions1111111111111111111111111");let dI=new ds("SysvarRecentB1ockHashes11111111111111111111"),d_=new ds("SysvarRent111111111111111111111111111111111");new ds("SysvarRewards111111111111111111111111111111"),new ds("SysvarS1otHashes111111111111111111111111111"),new ds("SysvarS1otHistory11111111111111111111111111");let dP=new ds("SysvarStakeHistory1111111111111111111111111");class dC extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){let s,o=n?`Logs: 
${JSON.stringify(n.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";switch(e){case"send":s=`Transaction ${t} resulted in an error. 
${r}. `+o+a;break;case"simulate":s=`Simulation failed. 
Message: ${r}. 
`+o+a;break;default:s=`Unknown action '${e}'`}super(s),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(e=>{if(e&&e.meta&&e.meta.logMessages){let r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}async function dO(e,t,r,n){let s,o=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},a=await e.sendTransaction(t,r,o);if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)s=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:a,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){let{nonceInstruction:r}=t.nonceInfo,o=r.keys[0].pubkey;s=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:o,nonceValue:t.nonceInfo.nonce,signature:a},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await e.confirmTransaction(a,n&&n.commitment)).value;if(s.err){if(null!=a)throw new dC({action:"send",signature:a,transactionMessage:`Status: (${JSON.stringify(s)})`});throw Error(`Transaction ${a} failed (${JSON.stringify(s)})`)}return a}function dT(e,t){let r=e.layout.span>=0?e.layout.span:function e(t,r){let n=t=>{if(t.span>=0)return t.span;if("function"==typeof t.alloc)return t.alloc(r[t.property]);if("count"in t&&"elementLayout"in t){let e=r[t.property];if(Array.isArray(e))return e.length*n(t.elementLayout)}else if("fields"in t)return e({layout:t},r[t.property]);return 0},s=0;return t.layout.fields.forEach(e=>{s+=n(e)}),s}(e,t),n=oZ.Buffer.alloc(r),s=Object.assign({instruction:e.index},t);return e.layout.encode(s,n),n}let dR=lQ.nu64("lamportsPerSignature"),dB=lQ.struct([lQ.u32("version"),lQ.u32("state"),dl("authorizedPubkey"),dl("nonce"),lQ.struct([dR],"feeCalculator")]).span,dN=e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}),dD=e=>{let t=(0,lQ.blob)(8,e),{encode:r,decode:n}=dN(t);return t.decode=(e,t)=>{let r=n(e,t);return(0,uA.toBigIntLE)(oZ.Buffer.from(r))},t.encode=(e,t,n)=>r((0,uA.toBufferLE)(e,8),t,n),t},dL=Object.freeze({Create:{index:0,layout:lQ.struct([lQ.u32("instruction"),lQ.ns64("lamports"),lQ.ns64("space"),dl("programId")])},Assign:{index:1,layout:lQ.struct([lQ.u32("instruction"),dl("programId")])},Transfer:{index:2,layout:lQ.struct([lQ.u32("instruction"),dD("lamports")])},CreateWithSeed:{index:3,layout:lQ.struct([lQ.u32("instruction"),dl("base"),dc("seed"),lQ.ns64("lamports"),lQ.ns64("space"),dl("programId")])},AdvanceNonceAccount:{index:4,layout:lQ.struct([lQ.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:lQ.struct([lQ.u32("instruction"),lQ.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:lQ.struct([lQ.u32("instruction"),dl("authorized")])},AuthorizeNonceAccount:{index:7,layout:lQ.struct([lQ.u32("instruction"),dl("authorized")])},Allocate:{index:8,layout:lQ.struct([lQ.u32("instruction"),lQ.ns64("space")])},AllocateWithSeed:{index:9,layout:lQ.struct([lQ.u32("instruction"),dl("base"),dc("seed"),lQ.ns64("space"),dl("programId")])},AssignWithSeed:{index:10,layout:lQ.struct([lQ.u32("instruction"),dl("base"),dc("seed"),dl("programId")])},TransferWithSeed:{index:11,layout:lQ.struct([lQ.u32("instruction"),dD("lamports"),dc("seed"),dl("programId")])},UpgradeNonceAccount:{index:12,layout:lQ.struct([lQ.u32("instruction")])}});class dM{constructor(){}static createAccount(e){let t=dT(dL.Create,{lamports:e.lamports,space:e.space,programId:dt(e.programId.toBuffer())});return new dE({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;return"basePubkey"in e?(t=dT(dL.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:dt(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=dT(dL.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]),new dE({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;return"basePubkey"in e?(t=dT(dL.AssignWithSeed,{base:dt(e.basePubkey.toBuffer()),seed:e.seed,programId:dt(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=dT(dL.Assign,{programId:dt(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new dE({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=dT(dL.CreateWithSeed,{base:dt(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:dt(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new dE({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){let t=new dA;"basePubkey"in e&&"seed"in e?t.add(dM.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:dB,programId:this.programId})):t.add(dM.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:dB,programId:this.programId}));let r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){let t=dT(dL.InitializeNonceAccount,{authorized:dt(e.authorizedPubkey.toBuffer())});return new dE({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dI,isSigner:!1,isWritable:!1},{pubkey:d_,isSigner:!1,isWritable:!1}],programId:this.programId,data:t})}static nonceAdvance(e){let t=dT(dL.AdvanceNonceAccount);return new dE({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dI,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceWithdraw(e){let t=dT(dL.WithdrawNonceAccount,{lamports:e.lamports});return new dE({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:dI,isSigner:!1,isWritable:!1},{pubkey:d_,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){let t=dT(dL.AuthorizeNonceAccount,{authorized:dt(e.newAuthorizedPubkey.toBuffer())});return new dE({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;return"basePubkey"in e?(t=dT(dL.AllocateWithSeed,{base:dt(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:dt(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=dT(dL.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new dE({keys:r,programId:this.programId,data:t})}}dM.programId=new ds("11111111111111111111111111111111");class dU{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/dU.chunkSize)+1+1)}static async load(e,t,r,n,s){{let o=await e.getMinimumBalanceForRentExemption(s.length),a=await e.getAccountInfo(r.publicKey,"confirmed"),l=null;if(null!==a){if(a.executable)return console.error("Program load failed, account is already executable"),!1;a.data.length!==s.length&&(l=l||new dA).add(dM.allocate({accountPubkey:r.publicKey,space:s.length})),a.owner.equals(n)||(l=l||new dA).add(dM.assign({accountPubkey:r.publicKey,programId:n})),a.lamports<o&&(l=l||new dA).add(dM.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:o-a.lamports}))}else l=new dA().add(dM.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:o>0?o:1,space:s.length,programId:n}));null!==l&&await dO(e,l,[t,r],{commitment:"confirmed"})}let o=lQ.struct([lQ.u32("instruction"),lQ.u32("offset"),lQ.u32("bytesLength"),lQ.u32("bytesLengthPadding"),lQ.seq(lQ.u8("byte"),lQ.offset(lQ.u32(),-8),"bytes")]),a=dU.chunkSize,l=0,u=s,c=[];for(;u.length>0;){let s=u.slice(0,a),d=oZ.Buffer.alloc(a+16);o.encode({instruction:0,offset:l,bytes:s,bytesLength:0,bytesLengthPadding:0},d);let f=new dA().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:d});c.push(dO(e,f,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await new Promise(e=>setTimeout(e,250)),l+=a,u=u.slice(a)}await Promise.all(c);{let s=lQ.struct([lQ.u32("instruction")]),o=oZ.Buffer.alloc(s.span);s.encode({instruction:1},o);let a=new dA().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:d_,isSigner:!1,isWritable:!1}],programId:n,data:o}),l="processed",u=await e.sendTransaction(a,[t,r],{preflightCommitment:l}),{context:c,value:d}=await e.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},l);if(d.err)throw Error(`Transaction ${u} failed (${JSON.stringify(d)})`);for(;;){try{if(await e.getSlot({commitment:l})>c.slot)break}catch{}await new Promise(e=>setTimeout(e,Math.round(200)))}}return!0}}dU.chunkSize=932,new ds("BPFLoader2111111111111111111111111111111111"),lQ.struct([lQ.u32("typeIndex"),dD("deactivationSlot"),lQ.nu64("lastExtendedSlot"),lQ.u8("lastExtendedStartIndex"),lQ.u8(),lQ.seq(dl(),lQ.offset(lQ.u8(),-1),"authority")]);let dF=uK(uM(ds),uH(),e=>new ds(e)),dj=uV([uH(),uU("base64")]),dz=uK(uM(oZ.Buffer),dj,e=>oZ.Buffer.from(e[0],"base64"));function d$(e){return uG([uq({jsonrpc:uU("2.0"),id:uH(),result:e}),uq({jsonrpc:uU("2.0"),id:uH(),error:uq({code:uW(),message:uH(),data:uz(uN("any",()=>!0))})})])}let dH=d$(uW());function dV(e){return uK(d$(e),dH,t=>"error"in t?t:{...t,result:uR(t.result,e)})}function dq(e){return dV(uq({context:uq({slot:uj()}),value:e}))}function dG(e){return uq({context:uq({slot:uj()}),value:e})}let dW=uq({foundation:uj(),foundationTerm:uj(),initial:uj(),taper:uj(),terminal:uj()});dV(uD(uF(uq({epoch:uj(),effectiveSlot:uj(),amount:uj(),postBalance:uj(),commission:uz(uF(uj()))}))));let dK=uD(uq({slot:uj(),prioritizationFee:uj()})),dJ=uq({total:uj(),validator:uj(),foundation:uj(),epoch:uj()}),dZ=uq({epoch:uj(),slotIndex:uj(),slotsInEpoch:uj(),absoluteSlot:uj(),blockHeight:uz(uj()),transactionCount:uz(uj())}),dQ=uq({slotsPerEpoch:uj(),leaderScheduleSlotOffset:uj(),warmup:uL(),firstNormalEpoch:uj(),firstNormalSlot:uj()}),dX=u$(uH(),uD(uj())),dY=uF(uG([uq({}),uH()])),d0=uq({err:dY}),d1=uU("receivedSignature");uq({"solana-core":uH(),"feature-set":uz(uj())});let d2=uq({program:uH(),programId:dF,parsed:uW()}),d3=uq({programId:dF,accounts:uD(dF),data:uH()});dq(uq({err:uF(uG([uq({}),uH()])),logs:uF(uD(uH())),accounts:uz(uF(uD(uF(uq({executable:uL(),owner:uH(),lamports:uj(),data:uD(uH()),rentEpoch:uz(uj())}))))),unitsConsumed:uz(uj()),returnData:uz(uF(uq({programId:uH(),data:uV([uH(),uU("base64")])}))),innerInstructions:uz(uF(uD(uq({index:uj(),instructions:uD(uG([d2,d3]))}))))})),dq(uq({byIdentity:u$(uH(),uD(uj())),range:uq({firstSlot:uj(),lastSlot:uj()})})),dV(dW),dV(dJ),dV(dK),dV(dZ),dV(dQ),dV(dX),dV(uj()),dq(uq({total:uj(),circulating:uj(),nonCirculating:uj(),nonCirculatingAccounts:uD(dF)}));let d8=uq({amount:uH(),uiAmount:uF(uj()),decimals:uj(),uiAmountString:uz(uH())});dq(uD(uq({address:dF,amount:uH(),uiAmount:uF(uj()),decimals:uj(),uiAmountString:uz(uH())}))),dq(uD(uq({pubkey:dF,account:uq({executable:uL(),owner:dF,lamports:uj(),data:dz,rentEpoch:uj()})})));let d6=uq({program:uH(),parsed:uW(),space:uj()});dq(uD(uq({pubkey:dF,account:uq({executable:uL(),owner:dF,lamports:uj(),data:d6,rentEpoch:uj()})}))),dq(uD(uq({lamports:uj(),address:dF})));let d4=uq({executable:uL(),owner:dF,lamports:uj(),data:dz,rentEpoch:uj()});uq({pubkey:dF,account:d4});let d5=uK(uG([uM(oZ.Buffer),d6]),uG([dj,d6]),e=>Array.isArray(e)?uR(e,dz):e),d9=uq({executable:uL(),owner:dF,lamports:uj(),data:d5,rentEpoch:uj()});uq({pubkey:dF,account:d9}),uq({state:uG([uU("active"),uU("inactive"),uU("activating"),uU("deactivating")]),active:uj(),inactive:uj()}),dV(uD(uq({signature:uH(),slot:uj(),err:dY,memo:uF(uH()),blockTime:uz(uF(uj()))}))),dV(uD(uq({signature:uH(),slot:uj(),err:dY,memo:uF(uH()),blockTime:uz(uF(uj()))}))),uq({subscription:uj(),result:dG(d4)});let d7=uq({pubkey:dF,account:d4});uq({subscription:uj(),result:dG(d7)});let fe=uq({parent:uj(),slot:uj(),root:uj()});uq({subscription:uj(),result:fe});let ft=uG([uq({type:uG([uU("firstShredReceived"),uU("completed"),uU("optimisticConfirmation"),uU("root")]),slot:uj(),timestamp:uj()}),uq({type:uU("createdBank"),parent:uj(),slot:uj(),timestamp:uj()}),uq({type:uU("frozen"),slot:uj(),timestamp:uj(),stats:uq({numTransactionEntries:uj(),numSuccessfulTransactions:uj(),numFailedTransactions:uj(),maxTransactionsPerEntry:uj()})}),uq({type:uU("dead"),slot:uj(),timestamp:uj(),err:uH()})]);uq({subscription:uj(),result:ft}),uq({subscription:uj(),result:dG(uG([d0,d1]))}),uq({subscription:uj(),result:uj()}),uq({pubkey:uH(),gossip:uF(uH()),tpu:uF(uH()),rpc:uF(uH()),version:uF(uH())});let fr=uq({votePubkey:uH(),nodePubkey:uH(),activatedStake:uj(),epochVoteAccount:uL(),epochCredits:uD(uV([uj(),uj(),uj()])),commission:uj(),lastVote:uj(),rootSlot:uF(uj())});dV(uq({current:uD(fr),delinquent:uD(fr)}));let fn=uG([uU("processed"),uU("confirmed"),uU("finalized")]),fi=uq({slot:uj(),confirmations:uF(uj()),err:dY,confirmationStatus:uz(fn)});dq(uD(uF(fi))),dV(uj());let fs=uq({accountKey:dF,writableIndexes:uD(uj()),readonlyIndexes:uD(uj())}),fo=uq({signatures:uD(uH()),message:uq({accountKeys:uD(uH()),header:uq({numRequiredSignatures:uj(),numReadonlySignedAccounts:uj(),numReadonlyUnsignedAccounts:uj()}),instructions:uD(uq({accounts:uD(uj()),data:uH(),programIdIndex:uj()})),recentBlockhash:uH(),addressTableLookups:uz(uD(fs))})}),fa=uq({pubkey:dF,signer:uL(),writable:uL(),source:uz(uG([uU("transaction"),uU("lookupTable")]))}),fl=uq({accountKeys:uD(fa),signatures:uD(uH())}),fu=uq({parsed:uW(),program:uH(),programId:dF}),fc=uq({accounts:uD(dF),data:uH(),programId:dF}),fd=uK(uG([fc,fu]),uG([uq({parsed:uW(),program:uH(),programId:uH()}),uq({accounts:uD(uH()),data:uH(),programId:uH()})]),e=>"accounts"in e?uR(e,fc):uR(e,fu)),ff=uq({signatures:uD(uH()),message:uq({accountKeys:uD(fa),instructions:uD(fd),recentBlockhash:uH(),addressTableLookups:uz(uF(uD(fs)))})}),fh=uq({accountIndex:uj(),mint:uH(),owner:uz(uH()),programId:uz(uH()),uiTokenAmount:d8}),fp=uq({writable:uD(dF),readonly:uD(dF)}),fg=uq({err:dY,fee:uj(),innerInstructions:uz(uF(uD(uq({index:uj(),instructions:uD(uq({accounts:uD(uj()),data:uH(),programIdIndex:uj()}))})))),preBalances:uD(uj()),postBalances:uD(uj()),logMessages:uz(uF(uD(uH()))),preTokenBalances:uz(uF(uD(fh))),postTokenBalances:uz(uF(uD(fh))),loadedAddresses:uz(fp),computeUnitsConsumed:uz(uj())}),fm=uq({err:dY,fee:uj(),innerInstructions:uz(uF(uD(uq({index:uj(),instructions:uD(fd)})))),preBalances:uD(uj()),postBalances:uD(uj()),logMessages:uz(uF(uD(uH()))),preTokenBalances:uz(uF(uD(fh))),postTokenBalances:uz(uF(uD(fh))),loadedAddresses:uz(fp),computeUnitsConsumed:uz(uj())}),fy=uG([uU(0),uU("legacy")]),fb=uq({pubkey:uH(),lamports:uj(),postBalance:uF(uj()),rewardType:uF(uH()),commission:uz(uF(uj()))});dV(uF(uq({blockhash:uH(),previousBlockhash:uH(),parentSlot:uj(),transactions:uD(uq({transaction:fo,meta:uF(fg),version:uz(fy)})),rewards:uz(uD(fb)),blockTime:uF(uj()),blockHeight:uF(uj())}))),dV(uF(uq({blockhash:uH(),previousBlockhash:uH(),parentSlot:uj(),rewards:uz(uD(fb)),blockTime:uF(uj()),blockHeight:uF(uj())}))),dV(uF(uq({blockhash:uH(),previousBlockhash:uH(),parentSlot:uj(),transactions:uD(uq({transaction:fl,meta:uF(fg),version:uz(fy)})),rewards:uz(uD(fb)),blockTime:uF(uj()),blockHeight:uF(uj())}))),dV(uF(uq({blockhash:uH(),previousBlockhash:uH(),parentSlot:uj(),transactions:uD(uq({transaction:ff,meta:uF(fm),version:uz(fy)})),rewards:uz(uD(fb)),blockTime:uF(uj()),blockHeight:uF(uj())}))),dV(uF(uq({blockhash:uH(),previousBlockhash:uH(),parentSlot:uj(),transactions:uD(uq({transaction:fl,meta:uF(fm),version:uz(fy)})),rewards:uz(uD(fb)),blockTime:uF(uj()),blockHeight:uF(uj())}))),dV(uF(uq({blockhash:uH(),previousBlockhash:uH(),parentSlot:uj(),rewards:uz(uD(fb)),blockTime:uF(uj()),blockHeight:uF(uj())}))),dV(uF(uq({blockhash:uH(),previousBlockhash:uH(),parentSlot:uj(),transactions:uD(uq({transaction:fo,meta:uF(fg)})),rewards:uz(uD(fb)),blockTime:uF(uj())}))),dV(uF(uq({blockhash:uH(),previousBlockhash:uH(),parentSlot:uj(),signatures:uD(uH()),blockTime:uF(uj())}))),dV(uF(uq({slot:uj(),meta:uF(fg),blockTime:uz(uF(uj())),transaction:fo,version:uz(fy)}))),dV(uF(uq({slot:uj(),transaction:ff,meta:uF(fm),blockTime:uz(uF(uj())),version:uz(fy)}))),dq(uq({blockhash:uH(),lastValidBlockHeight:uj()})),dq(uL()),dV(uD(uq({slot:uj(),numTransactions:uj(),numSlots:uj(),samplePeriodSecs:uj()}))),dq(uF(uq({feeCalculator:uq({lamportsPerSignature:uj()})}))),dV(uH()),dV(uH());let fv=uq({err:dY,logs:uD(uH()),signature:uH()});uq({result:dG(fv),subscription:uj()});class fx{constructor(e){this._keypair=void 0,this._keypair=e??c4()}static generate(){return new fx(c4())}static fromSecretKey(e,t){if(64!==e.byteLength)throw Error("bad secret key size");let r=e.slice(32,64);if(!t||!t.skipValidation){let t=c5(e.slice(0,32));for(let e=0;e<32;e++)if(r[e]!==t[e])throw Error("provided secretKey is invalid")}return new fx({publicKey:r,secretKey:e})}static fromSeed(e){let t=c5(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new fx({publicKey:t,secretKey:r})}get publicKey(){return new ds(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:lQ.struct([lQ.u32("instruction"),dD("recentSlot"),lQ.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:lQ.struct([lQ.u32("instruction")])},ExtendLookupTable:{index:2,layout:lQ.struct([lQ.u32("instruction"),dD(),lQ.seq(dl(),lQ.offset(lQ.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:lQ.struct([lQ.u32("instruction")])},CloseLookupTable:{index:4,layout:lQ.struct([lQ.u32("instruction")])}}),new ds("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:lQ.struct([lQ.u8("instruction"),lQ.u32("units"),lQ.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:lQ.struct([lQ.u8("instruction"),lQ.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:lQ.struct([lQ.u8("instruction"),lQ.u32("units")])},SetComputeUnitPrice:{index:3,layout:lQ.struct([lQ.u8("instruction"),dD("microLamports")])}}),new ds("ComputeBudget111111111111111111111111111111");let fw=lQ.struct([lQ.u8("numSignatures"),lQ.u8("padding"),lQ.u16("signatureOffset"),lQ.u16("signatureInstructionIndex"),lQ.u16("publicKeyOffset"),lQ.u16("publicKeyInstructionIndex"),lQ.u16("messageDataOffset"),lQ.u16("messageDataSize"),lQ.u16("messageInstructionIndex")]);class fE{constructor(){}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:n,instructionIndex:s}=e;dh(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),dh(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);let o=fw.span,a=o+t.length,l=a+n.length,u=oZ.Buffer.alloc(l+r.length),c=null==s?65535:s;return fw.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:c,publicKeyOffset:o,publicKeyInstructionIndex:c,messageDataOffset:l,messageDataSize:r.length,messageInstructionIndex:c},u),u.fill(t,o),u.fill(n,a),u.fill(r,l),new dE({keys:[],programId:fE.programId,data:u})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:n}=e;dh(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{let e=fx.fromSecretKey(t),s=e.publicKey.toBytes(),o=c7(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:o,instructionIndex:n})}catch(e){throw Error(`Error creating instruction; ${e}`)}}}fE.programId=new ds("Ed25519SigVerify111111111111111111111111111");let fA=(e,t)=>{let r=cv.secp256k1.sign(e,t);return[r.toCompactRawBytes(),r.recovery]};cv.secp256k1.utils.isValidPrivateKey;let fS=cv.secp256k1.getPublicKey,fk=lQ.struct([lQ.u8("numSignatures"),lQ.u16("signatureOffset"),lQ.u8("signatureInstructionIndex"),lQ.u16("ethAddressOffset"),lQ.u8("ethAddressInstructionIndex"),lQ.u16("messageDataOffset"),lQ.u16("messageDataSize"),lQ.u8("messageInstructionIndex"),lQ.blob(20,"ethAddress"),lQ.blob(64,"signature"),lQ.u8("recoveryId")]);class fI{constructor(){}static publicKeyToEthAddress(e){dh(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return oZ.Buffer.from((0,ct.keccak_256)(dt(e))).slice(-20)}catch(e){throw Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:n,recoveryId:s,instructionIndex:o}=e;return fI.createInstructionWithEthAddress({ethAddress:fI.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:s,instructionIndex:o})}static createInstructionWithEthAddress(e){let t,{ethAddress:r,message:n,signature:s,recoveryId:o,instructionIndex:a=0}=e;dh(20===(t="string"==typeof r?r.startsWith("0x")?oZ.Buffer.from(r.substr(2),"hex"):oZ.Buffer.from(r,"hex"):r).length,`Address must be 20 bytes but received ${t.length} bytes`);let l=12+t.length,u=l+s.length+1,c=oZ.Buffer.alloc(fk.span+n.length);return fk.encode({numSignatures:1,signatureOffset:l,signatureInstructionIndex:a,ethAddressOffset:12,ethAddressInstructionIndex:a,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:a,signature:dt(s),ethAddress:dt(t),recoveryId:o},c),c.fill(dt(n),fk.span),new dE({keys:[],programId:fI.programId,data:c})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:n}=e;dh(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{let e=dt(t),s=fS(e,!1).slice(1),o=oZ.Buffer.from((0,ct.keccak_256)(dt(r))),[a,l]=fA(o,e);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:l,instructionIndex:n})}catch(e){throw Error(`Error creating instruction; ${e}`)}}}fI.programId=new ds("KeccakSecp256k11111111111111111111111111111");let f_=new ds("StakeConfig11111111111111111111111111111111");class fP{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}fP.default=new fP(0,0,ds.default);let fC=Object.freeze({Initialize:{index:0,layout:lQ.struct([lQ.u32("instruction"),((e="authorized")=>lQ.struct([dl("staker"),dl("withdrawer")],e))(),((e="lockup")=>lQ.struct([lQ.ns64("unixTimestamp"),lQ.ns64("epoch"),dl("custodian")],e))()])},Authorize:{index:1,layout:lQ.struct([lQ.u32("instruction"),dl("newAuthorized"),lQ.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:lQ.struct([lQ.u32("instruction")])},Split:{index:3,layout:lQ.struct([lQ.u32("instruction"),lQ.ns64("lamports")])},Withdraw:{index:4,layout:lQ.struct([lQ.u32("instruction"),lQ.ns64("lamports")])},Deactivate:{index:5,layout:lQ.struct([lQ.u32("instruction")])},Merge:{index:7,layout:lQ.struct([lQ.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:lQ.struct([lQ.u32("instruction"),dl("newAuthorized"),lQ.u32("stakeAuthorizationType"),dc("authoritySeed"),dl("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class fO{constructor(){}static initialize(e){let{stakePubkey:t,authorized:r,lockup:n}=e,s=n||fP.default,o=dT(fC.Initialize,{authorized:{staker:dt(r.staker.toBuffer()),withdrawer:dt(r.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:dt(s.custodian.toBuffer())}});return new dE({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:d_,isSigner:!1,isWritable:!1}],programId:this.programId,data:o})}static createAccountWithSeed(e){let t=new dA;t.add(dM.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:s}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:s}))}static createAccount(e){let t=new dA;t.add(dM.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:s}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:s}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,s=dT(fC.Delegate);return new dA().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:dk,isSigner:!1,isWritable:!1},{pubkey:dP,isSigner:!1,isWritable:!1},{pubkey:f_,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(e){let{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:s,custodianPubkey:o}=e,a=dT(fC.Authorize,{newAuthorized:dt(n.toBuffer()),stakeAuthorizationType:s.index}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:dk,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&l.push({pubkey:o,isSigner:!0,isWritable:!1}),new dA().add({keys:l,programId:this.programId,data:a})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:s,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:l}=e,u=dT(fC.AuthorizeWithSeed,{newAuthorized:dt(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:n,authorityOwner:dt(s.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:dk,isSigner:!1,isWritable:!1}];return l&&c.push({pubkey:l,isSigner:!0,isWritable:!1}),new dA().add({keys:c,programId:this.programId,data:u})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:s}=e,o=dT(fC.Split,{lamports:s});return new dE({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(e,t){let r=new dA;return r.add(dM.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:s,basePubkey:o,seed:a,lamports:l}=e,u=new dA;return u.add(dM.allocate({accountPubkey:s,basePubkey:o,seed:a,space:this.space,programId:this.programId})),t&&t>0&&u.add(dM.transfer({fromPubkey:e.authorizedPubkey,toPubkey:s,lamports:t})),u.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:s,lamports:l}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,s=dT(fC.Merge);return new dA().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:dk,isSigner:!1,isWritable:!1},{pubkey:dP,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:s,custodianPubkey:o}=e,a=dT(fC.Withdraw,{lamports:s}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:dk,isSigner:!1,isWritable:!1},{pubkey:dP,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&l.push({pubkey:o,isSigner:!0,isWritable:!1}),new dA().add({keys:l,programId:this.programId,data:a})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:r}=e,n=dT(fC.Deactivate);return new dA().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:dk,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}fO.programId=new ds("Stake11111111111111111111111111111111111111"),fO.space=200;let fT=Object.freeze({InitializeAccount:{index:0,layout:lQ.struct([lQ.u32("instruction"),((e="voteInit")=>lQ.struct([dl("nodePubkey"),dl("authorizedVoter"),dl("authorizedWithdrawer"),lQ.u8("commission")],e))()])},Authorize:{index:1,layout:lQ.struct([lQ.u32("instruction"),dl("newAuthorized"),lQ.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:lQ.struct([lQ.u32("instruction"),lQ.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:lQ.struct([lQ.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:lQ.struct([lQ.u32("instruction"),((e="voteAuthorizeWithSeedArgs")=>lQ.struct([lQ.u32("voteAuthorizationType"),dl("currentAuthorityDerivedKeyOwnerPubkey"),dc("currentAuthorityDerivedKeySeed"),dl("newAuthorized")],e))()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class fR{constructor(){}static initializeAccount(e){let{votePubkey:t,nodePubkey:r,voteInit:n}=e,s=dT(fT.InitializeAccount,{voteInit:{nodePubkey:dt(n.nodePubkey.toBuffer()),authorizedVoter:dt(n.authorizedVoter.toBuffer()),authorizedWithdrawer:dt(n.authorizedWithdrawer.toBuffer()),commission:n.commission}});return new dE({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:d_,isSigner:!1,isWritable:!1},{pubkey:dk,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static createAccount(e){let t=new dA;return t.add(dM.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:s}=e,o=dT(fT.Authorize,{newAuthorized:dt(n.toBuffer()),voteAuthorizationType:s.index});return new dA().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:dk,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:s,voteAuthorizationType:o,votePubkey:a}=e,l=dT(fT.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:dt(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:dt(s.toBuffer()),voteAuthorizationType:o.index}});return new dA().add({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:dk,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}],programId:this.programId,data:l})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:s}=e,o=dT(fT.Withdraw,{lamports:n});return new dA().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw Error("Withdraw will leave vote account with insufficient funds.");return fR.withdraw(e)}static updateValidatorIdentity(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,s=dT(fT.UpdateValidatorIdentity);return new dA().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}function fB(e){let t="",r=e.byteLength;for(let n=0;n<r;n++)t+=String.fromCharCode(e[n]);return globalThis.btoa(t)}"use strict";fR.programId=new ds("Vote111111111111111111111111111111111111111"),fR.space=3762,new ds("Va1idator1nfo111111111111111111111111111111"),uq({name:uH(),website:uz(uH()),details:uz(uH()),iconUrl:uz(uH()),keybaseUsername:uz(uH())}),new ds("Vote111111111111111111111111111111111111111"),lQ.struct([dl("nodePubkey"),dl("authorizedWithdrawer"),lQ.u8("commission"),lQ.nu64(),lQ.seq(lQ.struct([lQ.nu64("slot"),lQ.u32("confirmationCount")]),lQ.offset(lQ.u32(),-8),"votes"),lQ.u8("rootSlotValid"),lQ.nu64("rootSlot"),lQ.nu64(),lQ.seq(lQ.struct([lQ.nu64("epoch"),dl("authorizedVoter")]),lQ.offset(lQ.u32(),-8),"authorizedVoters"),lQ.struct([lQ.seq(lQ.struct([dl("authorizedPubkey"),lQ.nu64("epochOfLastAuthorizedSwitch"),lQ.nu64("targetEpoch")]),32,"buf"),lQ.nu64("idx"),lQ.u8("isEmpty")],"priorVoters"),lQ.nu64(),lQ.seq(lQ.struct([lQ.nu64("epoch"),lQ.nu64("credits"),lQ.nu64("prevCredits")]),lQ.offset(lQ.u32(),-8),"epochCredits"),lQ.struct([lQ.nu64("slot"),lQ.nu64("timestamp")],"lastTimestamp")]);var fN={};Object.defineProperty(fN,"__esModule",{value:!0}),fN.ethers=void 0;var fD=Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},fL=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};"function"==typeof SuppressedError&&SuppressedError,fN.ethers=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&fD(t,e,r);return fL(t,e),t}(ed("kbbGT"));var fM=ed("kbbGT");for(var fU in fM)"default"===fU||Object.prototype.hasOwnProperty.call(fN,fU)||fD(fN,fM,fU);function fF(e){try{return fN.ethers.toUtf8String(e)}catch(t){if("string"==typeof e)return e;throw t}}let fj=(e,t)=>new Promise((r,n)=>setTimeout(()=>n(Error(`Request timed out: ${t}`)),e));ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ");var fz=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...e,children:[(0,eh.jsxs)("g",{clipPath:"url(#clip0_16_22648)",children:[(0,eh.jsx)("rect",{width:16,height:16,fill:"#fff",rx:4}),(0,eh.jsx)("path",{fill:"url(#paint0_linear_16_22648)",d:"M0 0h16v16H0z"})]}),(0,eh.jsx)("path",{fill:"#fff",d:"M8.01 10.544v2.848l3.487-4.924zM8.013 2 11.5 7.802 8.013 9.878 4.5 7.802"}),(0,eh.jsx)("path",{fill:"#fff",d:"M8.013 2v4.205L4.5 7.802m0 .666 3.513 2.076v2.848"}),(0,eh.jsx)("path",{fill:"#fff",d:"M8.01 6.205v3.673l3.487-2.076"}),(0,eh.jsx)("path",{fill:"#fff",d:"m4.5 7.802 3.513-1.597v3.673"}),(0,eh.jsxs)("defs",{children:[(0,eh.jsxs)("linearGradient",{id:"paint0_linear_16_22648",x1:8,x2:8,y1:0,y2:16,gradientUnits:"userSpaceOnUse",children:[(0,eh.jsx)("stop",{stopColor:"#88FBFF"}),(0,eh.jsx)("stop",{offset:1,stopColor:"#224CE4"})]}),(0,eh.jsx)("clipPath",{id:"clip0_16_22648",children:(0,eh.jsx)("rect",{width:16,height:16,fill:"#fff",rx:4})})]})]});ed("d1AnZ");var f$=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...e,children:[(0,eh.jsxs)("g",{clipPath:"url(#clip0_810_14831)",children:[(0,eh.jsx)("rect",{width:16,height:16,fill:"#fff",rx:4}),(0,eh.jsx)("path",{fill:"url(#paint0_linear_810_14831)",d:"M0 0h16v16H0z"}),(0,eh.jsx)("path",{fill:"#fff",d:"M4.403 10.014a.35.35 0 0 1 .247-.103h8.5c.156 0 .233.189.124.299l-1.68 1.687a.35.35 0 0 1-.246.102h-8.5a.175.175 0 0 1-.124-.298zM4.403 3.715a.36.36 0 0 1 .247-.103h8.5c.156 0 .233.189.124.299l-1.68 1.687a.35.35 0 0 1-.246.102h-8.5a.175.175 0 0 1-.124-.298zM11.594 6.844a.35.35 0 0 0-.246-.102h-8.5a.175.175 0 0 0-.124.298l1.68 1.688a.35.35 0 0 0 .246.102h8.5a.175.175 0 0 0 .124-.299z"})]}),(0,eh.jsxs)("defs",{children:[(0,eh.jsxs)("linearGradient",{id:"paint0_linear_810_14831",x1:8,x2:8,y1:0,y2:16,gradientUnits:"userSpaceOnUse",children:[(0,eh.jsx)("stop",{stopColor:"#04EF9E"}),(0,eh.jsx)("stop",{offset:1,stopColor:"#D42BF7"})]}),(0,eh.jsx)("clipPath",{id:"clip0_810_14831",children:(0,eh.jsx)("rect",{width:16,height:16,fill:"#fff",rx:4})})]})]});ed("d1AnZ");var fH=e=>(0,eh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:(0,eh.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.822 4.538a1.836 1.836 0 0 1 2.597 0l2.043 2.043c.717.717.717 1.88 0 2.597l-9.997 9.997A2.82 2.82 0 0 1 7.474 20H5.102A1.1 1.1 0 0 1 4 18.898v-2.372c0-.746.297-1.463.825-1.99zm1.385 1.212a.12.12 0 0 0-.173 0l-1.397 1.397 2.216 2.216 1.397-1.397a.12.12 0 0 0 0-.173zm-.566 4.825-2.216-2.216-7.388 7.388a1.1 1.1 0 0 0-.323.78v1.759h1.76c.292 0 .572-.116.779-.323z",clipRule:"evenodd"})});ed("d1AnZ"),ed("d1AnZ");var fV=e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:[(0,eh.jsx)("path",{fill:"currentColor",d:"M16.068 15.05a1.017 1.017 0 1 0 0-2.033 1.017 1.017 0 0 0 0 2.034"}),(0,eh.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.898 3A2.9 2.9 0 0 0 3 5.898v12.204C3 19.702 4.298 21 5.898 21h12.204c1.6 0 2.898-1.298 2.898-2.898V9.966c0-1.6-1.298-2.898-2.898-2.898H4.729v-1.17c0-.646.523-1.17 1.17-1.17h12.203a.864.864 0 1 0 0-1.728zm-1.17 15.102V8.797h13.374c.646 0 1.17.523 1.17 1.17v.152h-5.238a2.9 2.9 0 0 0-2.898 2.898v2.034c0 1.6 1.297 2.898 2.898 2.898h5.237v.153a1.17 1.17 0 0 1-1.17 1.17H5.899a1.17 1.17 0 0 1-1.17-1.17m9.306-6.254h5.237v4.372h-5.237a1.17 1.17 0 0 1-1.17-1.17v-2.033c0-.646.524-1.17 1.17-1.17",clipRule:"evenodd"})]});ed("d1AnZ");var fq=e=>(0,eh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e,children:(0,eh.jsx)("path",{fill:"currentColor",d:"M10 13.332q1.563 0 2.656-1.094 1.095-1.093 1.094-2.656t-1.094-2.656Q11.563 5.832 10 5.832T7.344 6.926 6.25 9.582t1.094 2.656Q8.437 13.332 10 13.332m0-1.5a2.17 2.17 0 0 1-1.594-.656 2.17 2.17 0 0 1-.656-1.594q0-.937.656-1.594A2.17 2.17 0 0 1 10 7.332a2.17 2.17 0 0 1 1.594.656q.656.657.656 1.594a2.17 2.17 0 0 1-.656 1.594 2.17 2.17 0 0 1-1.594.656m0 4q-2.791 0-5.094-1.5-2.301-1.5-3.635-3.958a1.59 1.59 0 0 1-.156-1.198q.051-.197.156-.386a10.8 10.8 0 0 1 3.635-3.958q2.303-1.5 5.094-1.5t5.094 1.5q2.301 1.5 3.635 3.958.105.188.156.386a1.6 1.6 0 0 1 0 .812q-.051.197-.156.386a10.8 10.8 0 0 1-3.635 3.958q-2.302 1.5-5.094 1.5"})});ed("d1AnZ");let fG={none:{title:"",icon:fV},"unlock-device":{title:"Unlock Device",icon:e=>(0,eh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:(0,eh.jsx)("path",{fill:"currentColor",d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm8 14H7c-.55 0-1-.45-1-1v-8c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v8c0 .55-.45 1-1 1m-5-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"})}),shake:!0},"allow-secure-connection":{title:"Allow Secure Connection",icon:e=>(0,eh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:(0,eh.jsx)("path",{fill:"currentColor",d:"m11.568 15.92 1.422-1.438c-1.097-.093-1.887-.455-2.453-1.021-1.57-1.568-1.57-3.786-.01-5.336l3.085-3.09c1.57-1.558 3.782-1.568 5.352 0 1.58 1.578 1.561 3.786.01 5.345l-1.58 1.568c.297.687.4 1.522.232 2.246l2.657-2.645c2.286-2.273 2.295-5.52-.009-7.822-2.314-2.31-5.547-2.292-7.833-.01l-3.233 3.23c-2.286 2.283-2.295 5.521.01 7.822.538.548 1.281.956 2.35 1.15m.864-7.841-1.421 1.438c1.096.102 1.886.455 2.452 1.021 1.58 1.568 1.57 3.786.01 5.345l-3.085 3.08c-1.57 1.569-3.782 1.569-5.343 0-1.58-1.577-1.57-3.776-.009-5.335l1.57-1.578a3.8 3.8 0 0 1-.232-2.245l-2.657 2.654c-2.286 2.273-2.295 5.512.009 7.813 2.313 2.31 5.547 2.292 7.833.018l3.233-3.238c2.286-2.283 2.295-5.521-.01-7.822-.538-.539-1.272-.947-2.35-1.151"})}),shake:!0},"confirm-open-app":{title:"Confirm Open App",icon:fz,shake:!0},"sign-transaction":{title:"Sign Transaction",icon:fH},"sign-typed-data":{title:"Sign Typed Data",icon:fH},"allow-list-apps":{title:"Allow List Apps",icon:fV},"verify-address":{title:"Verify Address",icon:fq},"sign-personal-message":{title:"Sign Personal Message",icon:fH},"sign-delegation-authorization":{title:"Sign Delegation Authorization",icon:e=>(0,eh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...e,children:(0,eh.jsx)("path",{fill:"currentColor",d:"m9 16.2-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.19 4.19c.39.39 1.02.39 1.41 0L20.3 7.7a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0z"})})},"web3-checks-opt-in":{title:"Web3 Checks Opt-in",icon:e=>(0,eh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e,children:[(0,eh.jsx)("path",{fill:"currentColor",d:"M13.908 7.912a.796.796 0 0 0 0-1.12.784.784 0 0 0-1.114 0l-3.808 3.832-1.592-1.522a.784.784 0 0 0-1.113.03.796.796 0 0 0 .029 1.12l2.148 2.053c.31.296.797.29 1.099-.014z"}),(0,eh.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.875 5.231v6.203c0 2.983-1.636 4.154-6.301 6.727a1.3 1.3 0 0 1-.578.172c-.138 0-.358-.057-.57-.172-4.681-2.565-6.301-3.745-6.301-6.727V5.23c0-.967.374-1.311 1.18-1.655.904-.385 3.957-1.467 4.844-1.762.269-.09.578-.147.847-.147.277 0 .586.073.847.147.887.246 3.948 1.385 4.852 1.762.805.336 1.18.688 1.18 1.655M9.858 16.588a1.2 1.2 0 0 1-.326-.164l-.32-.193c-3.43-2.076-4.565-2.763-4.565-5.109V5.494c0-.287.065-.41.285-.491l.5-.18c1.283-.461 3.184-1.144 4.14-1.525.147-.054.523-.13.855 0 .957.381 2.858 1.064 4.14 1.525l.5.18c.22.082.286.204.286.491v5.63c0 2.345-1.135 3.032-4.565 5.108l-.32.193c-.138.09-.236.14-.325.164a.45.45 0 0 1-.285 0",clipRule:"evenodd"})]})},"verify-safe-address":{title:"Verify Safe Address",icon:fq}};function fW({kind:e,ecosystem:t}){let r=e&&"none"!==e?fG[e]:null,n=r?.icon;return("confirm-open-app"===e&&(n="solana"===t?f$:fz),r&&n)?(0,eh.jsxs)(t4,{gap:16,style:{justifyItems:"center"},children:[(0,eh.jsx)("div",{className:r.shake?"mmJwrW_iconShake":void 0,style:{display:"flex"},children:(0,eh.jsx)(n,{style:{width:60,height:60,color:"var(--black)"}})}),(0,eh.jsxs)(t4,{gap:0,style:{justifyItems:"center"},children:[(0,eh.jsx)(t6,{kind:"caption/regular",color:"var(--neutral-500)",children:"Action on your device:"}),(0,eh.jsx)(t6,{kind:"body/accent",children:r.title})]})]}):null}function fK(e){tX(oK(e)&&"string"==typeof e.derivationPath&&"string"==typeof e.message,"Invalid Payload")}var oZ=ed("bIMcy"),fJ=oZ.Buffer;async function fZ({transport:e=nv.transports.hid}){return Promise.race([fj(500,"Device not connected").catch(()=>((0,nv.unsubscribeCheckDeviceListeners)(),null)),(0,nv.checkDevice)({transportIdentifier:e}).then(({sessionId:e})=>e).catch(()=>((0,nv.unsubscribeCheckDeviceListeners)(),null))])}class fQ{static{this.signTransaction=e=>(t,r)=>(tX(oK(e)&&"string"==typeof e.derivationPath&&oK(e.transaction),"Invalid Payload"),(0,nv.signTransaction)({derivationPath:e.derivationPath,rawTransaction:e.transaction},{sessionId:t,onInteractionRequested:r}))}static{this.solana_signTransaction=e=>(t,r)=>{tX(oK(e)&&"string"==typeof e.derivationPath&&"string"==typeof e.transaction,"Invalid Payload");let n=function(e){let t=function(e){let t=globalThis.atob(e),r=new Uint8Array(t.length);for(let e=0;e<r.length;e++)r[e]=t.charCodeAt(e);return r}(e);try{return dA.from(t)}catch{return dS.deserialize(t)}}(e.transaction),s=n instanceof dA?fB(n.serializeMessage()):fB(n.message.serialize()),{promise:o,cancel:a}=(0,nv.signSolanaTransaction)({derivationPath:e.derivationPath,transaction:s},{sessionId:t,onInteractionRequested:r});return{promise:o.then(({signature:e})=>(n instanceof dA?n.signatures=[{publicKey:n.feePayer,signature:fJ.from(e)}]:n.signatures[0]=e,function(e,{requireAllSignatures:t}={requireAllSignatures:!1}){return fB(e.serialize({requireAllSignatures:t}))}(n))),cancel:a}}}static{this.personalSign=e=>(t,r)=>{fK(e);let n=fF(e.message);return(0,nv.personalSign)({derivationPath:e.derivationPath,message:n},{sessionId:t,onInteractionRequested:r})}}static{this.signTypedData_v4=e=>(t,r)=>(tX(oK(e)&&"string"==typeof e.derivationPath&&("string"==typeof e.typedData||oK(e.typedData)),"Invalid Payload"),(0,nv.signTypedData_v4)({derivationPath:e.derivationPath,rawTypedData:e.typedData},{sessionId:t,onInteractionRequested:r}))}static{this.solana_signMessage=e=>(t,r)=>{fK(e);let n=fF(e.message);return(0,nv.solanaSignMessage)({derivationPath:e.derivationPath,message:n},{sessionId:t,onInteractionRequested:r})}}request({method:e,params:t,id:r}){let n=r??ng();return window.parent.postMessage({id:n,method:e,params:t},window.location.origin),new Promise((e,t)=>{let r=this.emitter.on("message",s=>{(oJ(s)||oK(s)&&"id"in s&&"error"in s)&&s.id===n&&(oJ(s)?e(s.result):t(s.error),r())})})}listen({onNotConnected:e,onInteractionRequested:t,onError:r}={}){return this.onNotConnected=e,this.onInteractionRequested=t,this.onError=r,window.addEventListener("message",this.listener),()=>{window.removeEventListener("message",this.listener)}}cancel(){this.cancelLedgerRequest?.(),this.request({method:"ledger/sign/cancel"}),this.cancelLedgerRequest=void 0;let e=this.lastRequestId;return this.lastRequestId=null,e}constructor(){this.emitter=rV(),this.lastRequestId=null,this.listener=async e=>{var t;if(oK(t=e.data)&&"id"in t&&"method"in t){let{id:t,method:r,params:n,transport:s=nv.transports.hid}=e.data;if(this.lastRequestId=t||null,function(e,t){let r=Object.getPrototypeOf(e);return Object.prototype.hasOwnProperty.call(e,t)||Object.prototype.hasOwnProperty.call(r,t)}(fQ,r)&&"function"==typeof fQ[r])try{let o=e.data.sessionId||null;if(o||(o=await fZ({transport:s})),!o)return void this.onNotConnected?.(e.data);let{promise:a,cancel:l}=fQ[r](n)(o,this.onInteractionRequested);this.cancelLedgerRequest=l;let u=await a;window.parent.postMessage({id:t,result:u},window.location.origin)}catch(e){this.onError?.(e),window.parent.postMessage({id:t,error:(0,nv.parseLedgerError)(e).toString()},window.location.origin)}finally{this.lastRequestId=null}}this.emitter.emit("message",e.data)}}}function fX(){let[e,t]=(0,ep.useState)(null),[r,n]=(0,ep.useState)(null),[s]=(0,ep.useState)(()=>new fQ);(0,ep.useEffect)(()=>s.listen({onNotConnected:e=>{t(e),s.request({method:"ledger/sign/notConnected",params:{}})},onInteractionRequested:e=>{"none"!==e&&(n(e),s.request({method:"ledger/sign/interactionRequested",params:{type:e}}))},onError:()=>{s.cancel(),s.request({method:"ledger/sign/error"}),t(null),n(null)}}),[s]);let o=(0,ep.useCallback)(()=>{let r=s.cancel()||e?.id;r&&window.parent.postMessage({id:r,error:(0,nv.getDeniedByUserError)().toString()},window.location.origin),t(null),n(null)},[s,e]),[a]=e7(),l=a.get("ecosystem")||"evm",u=a.get("windowType")||"popup",c="true"===a.get("supportBluetooth"),{mutate:d,isLoading:f}=tZ({mutationFn:async e=>{let{sessionId:t}=await (0,nv.connectDevice)({transportIdentifier:e});return{sessionId:t,transport:e}},onSettled:()=>{t(null),n(null)},onError:t=>{window.parent.postMessage({id:e?.id,error:(0,nv.parseLedgerError)(t).toString()},window.location.origin),s.request({method:"ledger/sign/error"})},onSuccess:({sessionId:t,transport:r})=>{s.request({method:"ledger/sign/success",params:{}}),window.postMessage({...e,transport:r,sessionId:t})}});return e?f?(0,eh.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",height:300},children:(0,eh.jsxs)(re,{gap:8,style:{padding:24,width:"100%"},justifyContent:"center",children:[(0,eh.jsx)(no,{color:"var(--primary)",size:"24px"}),(0,eh.jsx)(t6,{kind:"body/accent",children:"Connecting..."})]})}):"tab"===u?(0,eh.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,eh.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:300,width:"100%",maxWidth:400},children:[(0,eh.jsx)(t6,{kind:"body/accent",style:{textAlign:"center"},children:"Select how your device is connected"}),(0,eh.jsx)(oq,{style:{height:60,width:60,display:"block",alignSelf:"center"}}),(0,eh.jsxs)(t4,{gap:8,children:[(0,eh.jsx)(rs,{onClick:()=>d(nv.transports.hid),children:"Sign via USB"}),c?(0,eh.jsx)(rs,{onClick:()=>d(nv.transports.bluetooth),children:"Sign via Bluetooth"}):null,(0,eh.jsx)(rs,{onClick:o,kind:"danger",children:"Cancel"})]})]})}):(0,eh.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:300},children:[(0,eh.jsx)(t6,{kind:"body/accent",style:{textAlign:"center"},children:"No connected device found."}),c?(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(oG,{style:{height:80,width:80,display:"block",alignSelf:"center",color:"var(--notice-500)"}}),(0,eh.jsxs)(t4,{gap:8,children:[(0,eh.jsx)(rs,{onClick:()=>{o(),s.request({method:"ledger/sign/openInTab",params:{}})},children:"Open in new tab to connect via Bluetooth"}),(0,eh.jsx)(rs,{onClick:()=>{window.postMessage(e),t(null),s.request({method:"ledger/sign/resume",params:{}})},children:"Try Again"}),(0,eh.jsx)(rs,{onClick:o,kind:"danger",children:"Cancel"})]})]}):(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(oW,{style:{height:80,width:80,display:"block",alignSelf:"center",color:"var(--negative-500)"}}),(0,eh.jsxs)(t4,{gap:8,children:[(0,eh.jsx)(rs,{onClick:()=>{window.postMessage(e),t(null),s.request({method:"ledger/sign/resume",params:{}})},children:"Try Again"}),(0,eh.jsx)(rs,{onClick:o,kind:"danger",children:"Cancel"})]})]})]}):r&&"none"!==r?(0,eh.jsxs)(t4,{style:{justifyContent:"space-between",height:300,width:"100%",gridTemplateRows:"1fr auto",gridTemplateColumns:"1fr",placeItems:"center"},gap:4,children:[(0,eh.jsx)(fW,{kind:r,ecosystem:l}),(0,eh.jsx)(rs,{onClick:o,kind:"regular",style:{width:"100%"},children:"Cancel"})]}):null}var ep=ed("d1AnZ");class fY extends tA{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.currentQuery.addObserver(this),f0(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return f1(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return f1(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){let r=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),th(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();let s=this.hasListeners();s&&f2(this.currentQuery,n,this.options,r)&&this.executeFetch(),this.updateResult(t),s&&(this.currentQuery!==n||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();let o=this.computeRefetchInterval();s&&(this.currentQuery!==n||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){var t,r,n;let s=this.client.getQueryCache().build(this.client,e),o=this.createResult(s,e);return t=this,r=o,(n=e).keepPreviousData||(void 0!==n.placeholderData?!r.isPlaceholderData:th(t.getCurrentResult(),r))||(this.currentResult=o,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),o}getCurrentResult(){return this.currentResult}trackResult(e){let t={};return Object.keys(e).forEach(r=>{Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){let t=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,t);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return null!=e&&e.throwOnError||(t=t.catch(tn)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),tr||this.currentResult.isStale||!ti(this.options.staleTime))return;let e=ts(this.currentResult.dataUpdatedAt,this.options.staleTime);this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},e+1)}computeRefetchInterval(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!tr&&!1!==this.options.enabled&&ti(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||tS.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){let r,n=this.currentQuery,s=this.options,o=this.currentResult,a=this.currentResultState,l=this.currentResultOptions,u=e!==n,c=u?e.state:this.currentQueryInitialState,d=u?this.currentResult:this.previousQueryResult,{state:f}=e,{dataUpdatedAt:h,error:p,errorUpdatedAt:g,fetchStatus:m,status:y}=f,b=!1,v=!1;if(t._optimisticResults){let r=this.hasListeners(),o=!r&&f0(e,t),a=r&&f2(e,n,t,s);(o||a)&&(m=tP(e.options.networkMode)?"fetching":"paused",h||(y="loading")),"isRestoring"===t._optimisticResults&&(m="idle")}if(t.keepPreviousData&&!f.dataUpdatedAt&&null!=d&&d.isSuccess&&"error"!==y)r=d.data,h=d.dataUpdatedAt,y=d.status,b=!0;else if(t.select&&void 0!==f.data)if(o&&f.data===(null==a?void 0:a.data)&&t.select===this.selectFn)r=this.selectResult;else try{this.selectFn=t.select,r=t.select(f.data),r=tx(null==o?void 0:o.data,r,t),this.selectResult=r,this.selectError=null}catch(e){this.selectError=e}else r=f.data;if(void 0!==t.placeholderData&&void 0===r&&"loading"===y){let e;if(null!=o&&o.isPlaceholderData&&t.placeholderData===(null==l?void 0:l.placeholderData))e=o.data;else if(e="function"==typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&void 0!==e)try{e=t.select(e),this.selectError=null}catch(e){this.selectError=e}void 0!==e&&(y="success",r=tx(null==o?void 0:o.data,e,t),v=!0)}this.selectError&&(p=this.selectError,r=this.selectResult,g=Date.now(),y="error");let x="fetching"===m,w="loading"===y,E="error"===y;return{status:y,fetchStatus:m,isLoading:w,isSuccess:"success"===y,isError:E,isInitialLoading:w&&x,data:r,dataUpdatedAt:h,error:p,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:x,isRefetching:x&&!w,isLoadingError:E&&0===f.dataUpdatedAt,isPaused:"paused"===m,isPlaceholderData:v,isPreviousData:b,isRefetchError:E&&0!==f.dataUpdatedAt,isStale:f3(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){let t=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,th(r,t))return;this.currentResult=r;let n={cache:!0};(null==e?void 0:e.listeners)!==!1&&(()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options,r="function"==typeof e?e():e;if("all"===r||!r&&!this.trackedProps.size)return!0;let n=new Set(null!=r?r:this.trackedProps);return this.options.useErrorBoundary&&n.add("error"),Object.keys(this.currentResult).some(e=>this.currentResult[e]!==t[e]&&n.has(e))})()&&(n.listeners=!0),this.notify({...n,...e})}updateQuery(){let e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;let t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){let t={};"success"===e.type?t.onSuccess=!e.manual:"error"!==e.type||tO(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){tE.batch(()=>{var t,r,n,s,o,a,l,u;e.onSuccess?(null==(t=(r=this.options).onSuccess)||t.call(r,this.currentResult.data),null==(n=(s=this.options).onSettled)||n.call(s,this.currentResult.data,null)):e.onError&&(null==(o=(a=this.options).onError)||o.call(a,this.currentResult.error),null==(l=(u=this.options).onSettled)||l.call(u,void 0,this.currentResult.error)),e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function f0(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&("error"!==e.state.status||!1!==t.retryOnMount)||e.state.dataUpdatedAt>0&&f1(e,t,t.refetchOnMount)}function f1(e,t,r){if(!1!==t.enabled){let n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&f3(e,t)}return!1}function f2(e,t,r,n){return!1!==r.enabled&&(e!==t||!1===n.enabled)&&(!r.suspense||"error"!==e.state.status)&&f3(e,r)}function f3(e,t){return e.isStaleByTime(t.staleTime)}class f8 extends fY{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:tU()},t)}getOptimisticResult(e){return e.behavior=tU(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var r,n,s,o,a,l;let{state:u}=e,c=super.createResult(e,t),{isFetching:d,isRefetching:f}=c,h=d&&(null==(r=u.fetchMeta)||null==(n=r.fetchMore)?void 0:n.direction)==="forward",p=d&&(null==(s=u.fetchMeta)||null==(o=s.fetchMore)?void 0:o.direction)==="backward";return{...c,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:function(e,t){if(e.getNextPageParam&&Array.isArray(t)){let r=tF(e,t);return null!=r&&!1!==r}}(t,null==(a=u.data)?void 0:a.pages),hasPreviousPage:function(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){let r=tj(e,t);return null!=r&&!1!==r}}(t,null==(l=u.data)?void 0:l.pages),isFetchingNextPage:h,isFetchingPreviousPage:p,isRefetching:f&&!h&&!p}}}var ep=(ed("d1AnZ"),ed("d1AnZ"));let f6=ep.createContext((e=!1,{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e})),f4=()=>ep.useContext(f6);var ep=ed("d1AnZ");let f5=ep.createContext(!1),f9=()=>ep.useContext(f5);f5.Provider;var ep=ed("d1AnZ");let f7=(e,t)=>{(e.suspense||e.useErrorBoundary)&&!t.isReset()&&(e.retryOnMount=!1)},he=e=>{ep.useEffect(()=>{e.clearReset()},[e])},ht=({result:e,errorResetBoundary:t,useErrorBoundary:r,query:n})=>e.isError&&!t.isReset()&&!e.isFetching&&tJ(r,[e.error,n]),hr=e=>{e.suspense&&"number"!=typeof e.staleTime&&(e.staleTime=1e3)},hn=(e,t)=>e.isLoading&&e.isFetching&&!t,hi=(e,t,r)=>(null==e?void 0:e.suspense)&&hn(t,r),hs=(e,t,r)=>t.fetchOptimistic(e).then(({data:t})=>{null==e.onSuccess||e.onSuccess(t),null==e.onSettled||e.onSettled(t,null)}).catch(t=>{r.clearReset(),null==e.onError||e.onError(t),null==e.onSettled||e.onSettled(void 0,t)});function ho(e,t){let r=tq({context:e.context}),n=f9(),s=f4(),o=r.defaultQueryOptions(e);o._optimisticResults=n?"isRestoring":"optimistic",o.onError&&(o.onError=tE.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=tE.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=tE.batchCalls(o.onSettled)),hr(o),f7(o,s),he(s);let[a]=ep.useState(()=>new t(r,o)),l=a.getOptimisticResult(o);if(tK(ep.useCallback(e=>{let t=n?()=>void 0:a.subscribe(tE.batchCalls(e));return a.updateResult(),t},[a,n]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),ep.useEffect(()=>{a.setOptions(o,{listeners:!1})},[o,a]),hi(o,l,n))throw hs(o,a,s);if(ht({result:l,errorResetBoundary:s,useErrorBoundary:o.useErrorBoundary,query:a.getCurrentQuery()}))throw l.error;return o.notifyOnChangeProps?l:a.trackResult(l)}function ha(e,t,r){return ho(to(e,t,r),fY)}var nv=ed("fdr9l"),ep=ed("d1AnZ"),hl={};t(hl,"activeDecorator",function(){return $},function(e){return $=e}),t(hl,"activeLink",function(){return H},function(e){return H=e}),t(hl,"hidden",function(){return V},function(e){return V=e}),t(hl,"input",function(){return q},function(e){return q=e}),t(hl,"link",function(){return G},function(e){return G=e}),t(hl,"primary",function(){return W},function(e){return W=e}),t(hl,"radio",function(){return K},function(e){return K=e}),t(hl,"radioChecked",function(){return J},function(e){return J=e}),t(hl,"radioDisabled",function(){return Z},function(e){return Z=e}),t(hl,"secondary",function(){return Q},function(e){return Q=e}),t(hl,"spreadChildrenEvenly",function(){return X},function(e){return X=e}),t(hl,"wrap",function(){return Y},function(e){return Y=e}),$="aZtxgG_activeDecorator",H="aZtxgG_activeLink",V="aZtxgG_hidden",q="aZtxgG_input",G="aZtxgG_link",W="aZtxgG_primary",K="aZtxgG_radio",J="aZtxgG_radioChecked",Z="aZtxgG_radioDisabled",Q="aZtxgG_secondary",X="aZtxgG_spreadChildrenEvenly",Y="aZtxgG_wrap";let hu={primary:{kind:"body/accent"},secondary:{kind:"caption/accent"}},hc=(0,ep.createContext)({kind:"primary"});function hd({name:e,value:t,checked:r,onChange:n,style:s,children:o,disabled:a}){let{kind:l}=(0,ep.useContext)(hc);return(0,eh.jsxs)("label",{className:el(rt)(hl.radio,{[hl.radioChecked]:r,[hl.radioDisabled]:a}),style:s,children:[(0,eh.jsx)(t6,{kind:hu[l].kind,children:o}),(0,eh.jsx)("input",{type:"radio",className:hl.input,name:e,value:t,checked:r,onChange:n,disabled:a}),(0,eh.jsx)("div",{className:hl.activeDecorator})]})}function hf({kind:e="primary",childrenLayout:t="spread-children-evenly",children:r,...n}){return(0,eh.jsx)("div",{className:el(rt)(hl.wrap,hl[e],{[hl.spreadChildrenEvenly]:"spread-children-evenly"===t}),...n,children:(0,eh.jsx)(hc.Provider,{value:{kind:e},children:r})})}function hh(e){return e.startsWith("0x")?e.toLowerCase():e}var ep=(ed("d1AnZ"),ed("d1AnZ"),ed("d1AnZ"));let hp=el(ep).forwardRef(({style:e,padding:t,as:r,...n},s)=>el(ep).createElement(r||"div",{ref:s,style:{"--surface-border-radius":"12px","--local-surface-background-color":"var(--surface-background-color, var(--z-index-1))",borderRadius:"var(--surface-border-radius)",backgroundColor:"var(--local-surface-background-color)",padding:t,...e},...n}));ee="CJjftq_decoration",et="CJjftq_highlighted",er="CJjftq_option";let hg=el(ep).forwardRef(({to:e,onClick:t,children:r,style:n,className:s,decorationStyle:o,highlighted:a,...l},u)=>(0,eh.jsx)(r3,{...l,ref:u,style:{color:"inherit",...n},to:e,onClick:t,className:el(rt)(er,a?et:void 0,s),children:(0,eh.jsx)("div",{className:ee,style:o,children:r})}));function hm({href:e,target:t,onClick:r,children:n,style:s,decorationStyle:o,rel:a}){return(0,eh.jsx)(ra,{style:{color:"inherit",...s},href:e,target:t,onClick:r,className:er,rel:a,children:(0,eh.jsx)("div",{className:ee,style:o,children:n})})}let hy=el(ep).forwardRef(({children:e,style:t,highlighted:r,outlined:n=!1,decorationStyle:s,className:o,...a},l)=>(0,eh.jsx)(rc,{style:{color:"inherit",...t},className:el(rt)(o,er,r?et:void 0),ref:l,...a,children:(0,eh.jsx)("div",{className:ee,style:{border:n?"1px solid var(--primary)":void 0,paddingBlock:7,...s},children:e})}));function hb(e){return e.isInteractive??!!(e.to||e.href||e.onClick)}el(ep).forwardRef(({children:e,style:t,highlighted:r,...n},s)=>(0,eh.jsx)("label",{style:{color:"inherit",...t},className:el(rt)(er,r?et:void 0),ref:s,...n,children:(0,eh.jsx)("div",{className:ee,children:e})}));let hv=el(ep).forwardRef(({items:e,gap:t=0,style:r,...n},s)=>{let o=e.length&&hb(e[0]),a=e.length&&hb(e[e.length-1]);return(0,eh.jsx)(hp,{ref:s,className:"CJjftq_root",style:{paddingBlockStart:6*!!o,paddingBlockEnd:6*!!a,...r},...n,children:(0,eh.jsx)(t4,{gap:t,style:{height:r?.height},children:e.map((e,t)=>{let{style:r,separatorTop:n=!1,separatorLeadingInset:s=0,pad:o=!0}=e,a=hb(e),l=e.to?(0,eh.jsx)(hg,{to:e.to,onClick:e.onClick,children:e.component}):e.href?(0,eh.jsx)(hm,{href:e.href,target:e.target,onClick:e.onClick,children:e.component}):e.onClick?(0,eh.jsx)(hy,{disabled:e.disabled,onClick:e.onClick,type:e.buttonType,children:e.component}):!1===o?e.component:(0,eh.jsx)("div",{style:{paddingBlock:8},children:e.component});if(null==e.key)throw Error("No key");return(0,eh.jsxs)("div",{style:{padding:a?void 0:"0 16px",...r},children:[t>0&&n?(0,eh.jsx)("div",{style:{height:1,marginLeft:16*!!a+s,marginRight:16*!!a,marginBottom:4,marginTop:4,backgroundColor:"var(--neutral-300)"}}):null,l]},e.key)})})})});function hx({image:e,text:t,detailText:r,gap:n=8,vGap:s=4,alignItems:o="center",style:a}){return(0,eh.jsxs)(re,{gap:n,alignItems:o,style:a,children:[e,(0,eh.jsxs)(t4,{gap:s,style:{textAlign:"start"},children:[t,r]})]})}ed("d1AnZ"),ed("d1AnZ");let hw=rV();var hE=((p=hE||{}).zerionExtension="zerionExtension",p.viewerNotAdded="viewerNotAdded",p.readOnly="readOnly",p),rl=ed("a1T6e");class hA extends Error{constructor(e="Rejected by User"){super(e),this.code=4001}}let hS=new o$({name:`${el(rl).runtime.id}/wallet`});new o$({name:`${el(rl).runtime.id}/http-connection-ui`}),new o$({name:"accountPublicRPC"}),new o$({name:"memoryCacheRPC"}),new o$({name:"dnaService"}),new o$({name:"sessionCacheService"});class hk extends o${static maybeRestoreRouteForSidepanel(){"sidepanel"===rJ.windowType&&rq.emit("navigationRequest",{pathname:"/"})}confirm(e,t){try{return this.request("resolve",[{windowId:e,result:t}])}finally{hk.maybeRestoreRouteForSidepanel()}}reject(e){try{return this.request("reject",[{windowId:e,error:new hA}])}finally{hk.maybeRestoreRouteForSidepanel()}}}async function hI(e){let t=await hS.request("getWalletGroupByAddress",{address:e});var r,n=t?"provider"in(r=t.walletContainer)&&!("seedType"in r)?t.walletContainer.provider??"readOnly":"zerionExtension":"viewerNotAdded";switch(n){case"viewerNotAdded":return"viewer_not_added";case"zerionExtension":return"zerion-extension";case"readOnly":return"Read Only";default:return n}}new hk({name:"window"});class h_ extends Error{constructor(e,t,r){let n=e.status||0===e.status?e.status:"",s=e.statusText||"",o=`${n} ${s}`.trim();super(`Request failed with ${o?`status code ${o}`:"an unknown error"}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=e,this.request=t,this.options=r}}class hP extends Error{constructor(e){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=e}}let hC=e=>null!==e&&"object"==typeof e,hO=(...e)=>{for(let t of e)if((!hC(t)||Array.isArray(t))&&void 0!==t)throw TypeError("The `options` argument must be an object");return hR({},...e)},hT=(e={},t={})=>{let r=new globalThis.Headers(e),n=t instanceof globalThis.Headers;for(let[e,s]of new globalThis.Headers(t).entries())n&&"undefined"===s||void 0===s?r.delete(e):r.set(e,s);return r},hR=(...e)=>{let t={},r={};for(let n of e)if(Array.isArray(n))Array.isArray(t)||(t=[]),t=[...t,...n];else if(hC(n)){for(let[e,r]of Object.entries(n))hC(r)&&e in t&&(r=hR(t[e],r)),t={...t,[e]:r};hC(n.headers)&&(r=hT(r,n.headers),t.headers=r)}return t},hB=(()=>{let e=!1,t=!1,r="function"==typeof globalThis.Request;return"function"==typeof globalThis.ReadableStream&&r&&(t=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")),e&&!t})(),hN="function"==typeof globalThis.AbortController,hD="function"==typeof globalThis.ReadableStream,hL="function"==typeof globalThis.FormData,hM=["get","post","put","patch","head","delete"],hU={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},hF=Symbol("stop"),hj=e=>hM.includes(e)?e.toUpperCase():e,hz=[413,429,503],h$={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:hz,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY},hH=(e={})=>{if("number"==typeof e)return{...h$,limit:e};if(e.methods&&!Array.isArray(e.methods))throw Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw Error("retry.statusCodes must be an array");return{...h$,...e,afterStatusCodes:hz}};async function hV(e,t,r){return new Promise((n,s)=>{let o=setTimeout(()=>{t&&t.abort(),s(new hP(e))},r.timeout);r.fetch(e).then(n).catch(s).then(()=>{clearTimeout(o)})})}let hq=!!globalThis.DOMException;function hG(e){if(hq)return new DOMException(e?.reason??"The operation was aborted.","AbortError");let t=Error(e?.reason??"The operation was aborted.");return t.name="AbortError",t}async function hW(e,{signal:t}){return new Promise((r,n)=>{if(t){if(t.aborted)return void n(hG(t));t.addEventListener("abort",s,{once:!0})}function s(){n(hG(t)),clearTimeout(o)}let o=setTimeout(()=>{t?.removeEventListener("abort",s),r()},e)})}class hK{static create(e,t){let r=new hK(e,t),n=async()=>{if(r._options.timeout>0x7fffffff)throw RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let e=await r._fetch();for(let t of r._options.hooks.afterResponse){let n=await t(r.request,r._options,r._decorateResponse(e.clone()));n instanceof globalThis.Response&&(e=n)}if(r._decorateResponse(e),!e.ok&&r._options.throwHttpErrors){let t=new h_(e,r.request,r._options);for(let e of r._options.hooks.beforeError)t=await e(t);throw t}if(r._options.onDownloadProgress){if("function"!=typeof r._options.onDownloadProgress)throw TypeError("The `onDownloadProgress` option must be a function");if(!hD)throw Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(e.clone(),r._options.onDownloadProgress)}return e},s=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(n):n();for(let[e,n]of Object.entries(hU))s[e]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||n);let o=(await s).clone();if("json"===e){if(204===o.status||0===(await o.clone().arrayBuffer()).byteLength)return"";if(t.parseJson)return t.parseJson(await o.text())}return o[e]()};return s}constructor(e,t={}){if(Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=e,this._options={credentials:this._input.credentials||"same-origin",...t,headers:hT(this._input.headers,t.headers),hooks:hR({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:hj(t.method??this._input.method),prefixUrl:String(t.prefixUrl||""),retry:hH(t.retry),throwHttpErrors:!1!==t.throwHttpErrors,timeout:void 0===t.timeout?1e4:t.timeout,fetch:t.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(hN){if(this.abortController=new globalThis.AbortController,this._options.signal){let e=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(e.reason)})}this._options.signal=this.abortController.signal}if(hB&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){let e="string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString(),t=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,"?"+e);(hL&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(t,{...this.request}),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(e instanceof hP)){if(e instanceof h_){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;let t=e.response.headers.get("Retry-After");if(t&&this._options.retry.afterStatusCodes.includes(e.response.status)){let e=Number(t);return(Number.isNaN(e)?e=Date.parse(t)-Date.now():e*=1e3,void 0!==this._options.retry.maxRetryAfter&&e>this._options.retry.maxRetryAfter)?0:e}if(413===e.response.status)return 0}return Math.min(this._options.retry.backoffLimit,.3*2**(this._retryCount-1)*1e3)}return 0}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(r){let t=Math.min(this._calculateRetryDelay(r),0x7fffffff);if(0!==t&&this._retryCount>0){for(let e of(await hW(t,{signal:this._options.signal}),this._options.hooks.beforeRetry))if(await e({request:this.request,options:this._options,error:r,retryCount:this._retryCount})===hF)return;return this._retry(e)}throw r}}async _fetch(){for(let e of this._options.hooks.beforeRequest){let t=await e(this.request,this._options);if(t instanceof Request){this.request=t;break}if(t instanceof Response)return t}return!1===this._options.timeout?this._options.fetch(this.request.clone()):hV(this.request.clone(),this.abortController,this._options)}_stream(e,t){let r=Number(e.headers.get("content-length"))||0,n=0;return 204===e.status?(t&&t({percent:1,totalBytes:r,transferredBytes:n},new Uint8Array),new globalThis.Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(s){let o=e.body.getReader();async function a(){let{done:e,value:l}=await o.read();if(e)return void s.close();t&&(n+=l.byteLength,t({percent:0===r?0:n/r,transferredBytes:n,totalBytes:r},l)),s.enqueue(l),await a()}t&&t({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),await a()}}),{status:e.status,statusText:e.statusText,headers:e.headers})}}let hJ=e=>{let t=(t,r)=>hK.create(t,hO(e,r));for(let r of hM)t[r]=(t,n)=>hK.create(t,hO(e,n,{method:r}));return t.create=e=>hJ(hO(e)),t.extend=t=>hJ(hO(e,t)),t.stop=hF,t},hZ=hJ();function hQ(e,t){for(let[r,n]of t.entries())e.append(r,n);return e}function hX({base:e,pathname:t,searchParams:r}){let n=new URL(e),s=t?new URL(t,e):null;return s&&(n.pathname=s.pathname),s?.searchParams.size&&hQ(n.searchParams,s.searchParams),r&&hQ(n.searchParams,new URLSearchParams(r)),n}function hY(e,t){if(e)return hX({base:e,pathname:"",searchParams:t?{backend_env:t}:void 0}).toString()}let h0=void 0;tX("Zerion.0JOY6zZTTw6yl5Cvz9sdmXc7d5AhzVMG","DEFI_SDK_API_TOKEN is required in env"),tX("wss://api-v4.zerion.io/","DEFI_SDK_API_URL is required in env"),hY("wss://api-v4.zerion.io/",h0),tX("wss://api-testnet.zerion.io/","DEFI_SDK_TESTNET_API_URL is required in env"),hY("wss://api-testnet.zerion.io/",h0),tX("https://zpi.zerion.io/","ZERION_API_URL is required in env");let h1=hY("https://zpi.zerion.io/",h0);tX("https://zpi-testnet.zerion.io/","ZERION_TESTNET_API_URL is required in env");let h2=hY("https://zpi-testnet.zerion.io/",h0);tX("https://transactions.zerion.io","DEFI_SDK_TRANSACTIONS_API_URL is required in env"),hY("https://transactions.zerion.io",h0),tX("https://proxy.zerion.io/","PROXY_URL is required in env");var h3="chrome";if(!["chrome","firefox"].includes(h3))throw Error(`Unsupported PLATFORM: ${h3}`);let h8={source:"mainnet"};function h6(e){return{"X-Request-Id":crypto.randomUUID(),"Zerion-Client-Type":"web-extension","Zerion-Client-Version":r0,"Content-Type":"application/json",...e.headers}}let h4=e=>{if("url"in e)return tX(e.url,"url param must be a string"),e.url;{let{endpoint:t,source:r="mainnet"}=e;tX(t,"endpoint param must be a string");let n="testnet"===r?h2:h1;return tX(n,`One of API URLs not found in env: ${h2}, ${h1}`),hX({base:n,pathname:t})}};class h5{static get(e,t){let r=h4(e);return hZ.get(r,{headers:h6(e),credentials:"include",...t}).json()}static post(e,t){let r=h4(e),{body:n}=e;return hZ.post(r,{body:n,headers:h6(e),credentials:"include",...t}).json()}}function h9(e){return null!=e}function h7({identifiers:e},t,r=h8){let n=new URLSearchParams({identifiers:e.join(",")}),s=`wallet/get-meta/v1?${n}`;return h5.get({endpoint:s,...r},t)}async function pe(e){let t=function(e,t){let r=[];for(let t=0;t<e.length;t+=10)r.push(e.slice(t,t+10));return r}(e,10),r=this.getKyOptions();return(await Promise.all(t.map(e=>h7({identifiers:e},r)))).map(e=>e.data).filter(h9).flat()}"use strict";var lA=ed("ct8eT");let pt=!1,pr=!1,pn={debug:1,default:2,info:2,warning:3,error:4,off:5},pi=pn.default,ps=null,po=function(){try{let e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw Error("broken implementation")}catch(e){return e.message}return null}();(g=en||(en={})).DEBUG="DEBUG",g.INFO="INFO",g.WARNING="WARNING",g.ERROR="ERROR",g.OFF="OFF",(m=ei||(ei={})).UNKNOWN_ERROR="UNKNOWN_ERROR",m.NOT_IMPLEMENTED="NOT_IMPLEMENTED",m.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",m.NETWORK_ERROR="NETWORK_ERROR",m.SERVER_ERROR="SERVER_ERROR",m.TIMEOUT="TIMEOUT",m.BUFFER_OVERRUN="BUFFER_OVERRUN",m.NUMERIC_FAULT="NUMERIC_FAULT",m.MISSING_NEW="MISSING_NEW",m.INVALID_ARGUMENT="INVALID_ARGUMENT",m.MISSING_ARGUMENT="MISSING_ARGUMENT",m.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",m.CALL_EXCEPTION="CALL_EXCEPTION",m.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",m.NONCE_EXPIRED="NONCE_EXPIRED",m.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",m.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",m.TRANSACTION_REPLACED="TRANSACTION_REPLACED",m.ACTION_REJECTED="ACTION_REJECTED";let pa="0123456789abcdef";class pl{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){let r=e.toLowerCase();null==pn[r]&&this.throwArgumentError("invalid log level name","logLevel",e),pi>pn[r]||console.log.apply(console,t)}debug(...e){this._log(pl.levels.DEBUG,e)}info(...e){this._log(pl.levels.INFO,e)}warn(...e){this._log(pl.levels.WARNING,e)}makeError(e,t,r){if(pr)return this.makeError("censored error",t,{});t||(t=pl.errors.UNKNOWN_ERROR),r||(r={});let n=[];Object.keys(r).forEach(e=>{let t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=pa[t[e]>>4],r+=pa[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);let s=e,o="";switch(t){case ei.NUMERIC_FAULT:{o="NUMERIC_FAULT";let t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case ei.CALL_EXCEPTION:case ei.INSUFFICIENT_FUNDS:case ei.MISSING_NEW:case ei.NONCE_EXPIRED:case ei.REPLACEMENT_UNDERPRICED:case ei.TRANSACTION_REPLACED:case ei.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");let a=Error(e);return a.reason=s,a.code=t,Object.keys(r).forEach(function(e){a[e]=r[e]}),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,pl.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),po&&this.throwError("platform missing String.prototype.normalize",pl.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:po})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=0x1fffffffffffff)&&this.throwError(t,pl.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,pl.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,pl.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,pl.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||null==e)&&this.throwError("missing new",pl.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",pl.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||null==e)&&this.throwError("missing new",pl.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return ps||(ps=new pl("logger/5.8.0")),ps}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",pl.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),pt){if(!e)return;this.globalLogger().throwError("error censorship permanent",pl.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}pr=!!e,pt=!!t}static setLogLevel(e){let t=pn[e.toLowerCase()];if(null==t)return void pl.globalLogger().warn("invalid log level - "+e);pi=t}static from(e){return new pl(e)}}"use strict";pl.errors=ei,pl.levels=en;let pu=new pl("bytes/5.8.0");function pc(e){return"number"==typeof e&&e==e&&e%1==0}function pd(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e||!pc(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){let r=e[t];if(!pc(r)||r<0||r>=256)return!1}return!0}function pf(e,t){return"string"==typeof e&&!!e.match(/^0x[0-9A-Fa-f]*$/)&&(!t||e.length===2+2*t)}let ph="0123456789abcdef";function pp(e,t){if(t||(t={}),"number"==typeof e){pu.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=ph[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),e.toHexString)return e.toHexString();if(pf(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":pu.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(pd(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=ph[(240&n)>>4]+ph[15&n]}return t}return pu.throwArgumentError("invalid hexlify value","value",e)}function pg(e){let t=function(e){"string"!=typeof e&&(e=pp(e)),pf(e)||pu.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}(pp(e,{hexPad:"left"}));return"0x"===t?"0x0":t}"use strict";var pm=el(lA).BN;let py=new pl("bignumber/5.7.0"),pb={},pv=!1;class px{constructor(e,t){e!==pb&&py.throwError("cannot call constructor directly; use BigNumber.from",pl.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return pE(pA(this).fromTwos(e))}toTwos(e){return pE(pA(this).toTwos(e))}abs(){return"-"===this._hex[0]?px.from(this._hex.substring(1)):this}add(e){return pE(pA(this).add(pA(e)))}sub(e){return pE(pA(this).sub(pA(e)))}div(e){return px.from(e).isZero()&&pS("division-by-zero","div"),pE(pA(this).div(pA(e)))}mul(e){return pE(pA(this).mul(pA(e)))}mod(e){let t=pA(e);return t.isNeg()&&pS("division-by-zero","mod"),pE(pA(this).umod(t))}pow(e){let t=pA(e);return t.isNeg()&&pS("negative-power","pow"),pE(pA(this).pow(t))}and(e){let t=pA(e);return(this.isNegative()||t.isNeg())&&pS("unbound-bitwise-result","and"),pE(pA(this).and(t))}or(e){let t=pA(e);return(this.isNegative()||t.isNeg())&&pS("unbound-bitwise-result","or"),pE(pA(this).or(t))}xor(e){let t=pA(e);return(this.isNegative()||t.isNeg())&&pS("unbound-bitwise-result","xor"),pE(pA(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&pS("negative-width","mask"),pE(pA(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&pS("negative-width","shl"),pE(pA(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&pS("negative-width","shr"),pE(pA(this).shrn(e))}eq(e){return pA(this).eq(pA(e))}lt(e){return pA(this).lt(pA(e))}lte(e){return pA(this).lte(pA(e))}gt(e){return pA(this).gt(pA(e))}gte(e){return pA(this).gte(pA(e))}isNegative(){return"-"===this._hex[0]}isZero(){return pA(this).isZero()}toNumber(){try{return pA(this).toNumber()}catch(e){pS("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return py.throwError("this platform does not support BigInt",pl.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?pv||(pv=!0,py.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?py.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",pl.errors.UNEXPECTED_ARGUMENT,{}):py.throwError("BigNumber.toString does not accept parameters",pl.errors.UNEXPECTED_ARGUMENT,{})),pA(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof px)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new px(pb,pw(e)):e.match(/^-?[0-9]+$/)?new px(pb,pw(new pm(e))):py.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&pS("underflow","BigNumber.from",e),(e>=0x1fffffffffffff||e<=-0x1fffffffffffff)&&pS("overflow","BigNumber.from",e),px.from(String(e));if("bigint"==typeof e)return px.from(e.toString());if(pd(e))return px.from(pp(e));if(e)if(e.toHexString){let t=e.toHexString();if("string"==typeof t)return px.from(t)}else{let t=e._hex;if(null==t&&"BigNumber"===e.type&&(t=e.hex),"string"==typeof t&&(pf(t)||"-"===t[0]&&pf(t.substring(1))))return px.from(t)}return py.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function pw(e){if("string"!=typeof e)return pw(e.toString(16));if("-"===e[0])return("-"===(e=e.substring(1))[0]&&py.throwArgumentError("invalid hex","value",e),"0x00"===(e=pw(e)))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function pE(e){return px.from(pw(e))}function pA(e){let t=px.from(e).toHexString();return"-"===t[0]?new pm("-"+t.substring(3),16):new pm(t.substring(2),16)}function pS(e,t,r){let n={fault:e,operation:t};return null!=r&&(n.value=r),py.throwError(e,pl.errors.NUMERIC_FAULT,n)}function pk(e){return pf(e)||""===e?e:"string"==typeof e||px.isBigNumber(e)?pg(px.from(e)):pg(e)}let pI=pk(5e4);async function p_(e,t){let r=e.addresses[0],n=await this.getAddressProviderHeader(r),s=this.getKyOptions();return h5.post({endpoint:"wallet/get-positions/v1",body:JSON.stringify(e),headers:{"Zerion-Wallet-Provider":n},...t},s)}async function pP(e,t=h8){tX(e.addresses.length>0,"Addresses param is empty");let r=e.addresses[0],n=await this.getAddressProviderHeader(r),s=this.getKyOptions();return h5.post({endpoint:"wallet/get-portfolio/v1",body:JSON.stringify(e),headers:{"Zerion-Wallet-Provider":n},...t},s)}async function pC(e,t=h8){let r=this.getKyOptions(),n=new URLSearchParams({fungibleId:e.fungibleId,currency:e.currency});return h5.get({endpoint:`asset/get-fungible-full-info/v1?${n}`,...t},r)}async function pO(e,t=h8){let r=e.addresses[0],n=await this.getAddressProviderHeader(r),s=this.getKyOptions();return h5.post({endpoint:"wallet/get-asset-details/v1",body:JSON.stringify(e),headers:{"Zerion-Wallet-Provider":n},...t},s)}async function pT(e,t=h8){let r=e.addresses[0],n=await this.getAddressProviderHeader(r),s=this.getKyOptions();return h5.post({endpoint:"asset/get-fungible-pnl/v1",body:JSON.stringify(e),headers:{"Zerion-Wallet-Provider":n},...t},s)}async function pR(e,t=h8){let r=this.getKyOptions();return h5.post({endpoint:"asset/get-fungible-chart/v1",body:JSON.stringify(e),...t},r)}var pB=Object.defineProperty,pN=Object.getOwnPropertySymbols,pD=Object.prototype.hasOwnProperty,pL=Object.prototype.propertyIsEnumerable,pM=(e,t,r)=>t in e?pB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pU=(e,t)=>{for(var r in t||(t={}))pD.call(t,r)&&pM(e,r,t[r]);if(pN)for(var r of pN(t))pL.call(t,r)&&pM(e,r,t[r]);return e},pF=Symbol.for("immer-nothing"),pj=Symbol.for("immer-draftable"),pz=Symbol.for("immer-state");function p$(e,...t){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var pH=Object.getPrototypeOf;function pV(e){return!!e&&!!e[pz]}function pq(e){var t;return!!e&&(pW(e)||Array.isArray(e)||!!e[pj]||!!(null==(t=e.constructor)?void 0:t[pj])||pX(e)||pY(e))}var pG=Object.prototype.constructor.toString();function pW(e){if(!e||"object"!=typeof e)return!1;let t=pH(e);if(null===t)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===pG}function pK(e,t){0===pJ(e)?Object.entries(e).forEach(([r,n])=>{t(r,n,e)}):e.forEach((r,n)=>t(n,r,e))}function pJ(e){let t=e[pz];return t?t.type_:Array.isArray(e)?1:pX(e)?2:3*!!pY(e)}function pZ(e,t){return 2===pJ(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pQ(e,t,r){let n=pJ(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function pX(e){return e instanceof Map}function pY(e){return e instanceof Set}function p0(e){return e.copy_||e.base_}function p1(e,t){if(pX(e))return new Map(e);if(pY(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&pW(e))return pH(e)?pU({},e):Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[pz];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){let s=n[t],o=r[s];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(pH(e),r)}function p2(e,t=!1){return p8(e)||pV(e)||!pq(e)||(pJ(e)>1&&(e.set=e.add=e.clear=e.delete=p3),Object.freeze(e),t&&pK(e,(e,t)=>p2(t,!0),!0)),e}function p3(){p$(2)}function p8(e){return Object.isFrozen(e)}var p6={};function p4(e){let t=p6[e];return t||p$(0,e),t}function p5(e,t){t&&(p4("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function p9(e){p7(e),e.drafts_.forEach(gt),e.drafts_=null}function p7(e){e===es&&(es=e.parent_)}function ge(e){return es={drafts_:[],parent_:es,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function gt(e){let t=e[pz];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function gr(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return void 0!==e&&e!==r?(r[pz].modified_&&(p9(t),p$(4)),pq(e)&&(e=gn(t,e),t.parent_||gs(t,e)),t.patches_&&p4("Patches").generateReplacementPatches_(r[pz].base_,e,t.patches_,t.inversePatches_)):e=gn(t,r,[]),p9(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==pF?e:void 0}function gn(e,t,r){if(p8(t))return t;let n=t[pz];if(!n)return pK(t,(s,o)=>gi(e,n,t,s,o,r),!0),t;if(n.scope_!==e)return t;if(!n.modified_)return gs(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let t=n.copy_,s=t,o=!1;3===n.type_&&(s=new Set(t),t.clear(),o=!0),pK(s,(s,a)=>gi(e,n,t,s,a,r,o)),gs(e,t,!1),r&&e.patches_&&p4("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function gi(e,t,r,n,s,o,a){if(pV(s)){let a=gn(e,s,o&&t&&3!==t.type_&&!pZ(t.assigned_,n)?o.concat(n):void 0);if(pQ(r,n,a),!pV(a))return;e.canAutoFreeze_=!1}else a&&r.add(s);if(pq(s)&&!p8(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;gn(e,s),t&&t.scope_.parent_||gs(e,s)}}function gs(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&p2(t,r)}var go={get(e,t){if(t===pz)return e;let r=p0(e);if(!pZ(r,t)){var n,s=e,o=r,a=t;let l=gu(o,a);return l?"value"in l?l.value:null==(n=l.get)?void 0:n.call(s.draft_):void 0}let l=r[t];return e.finalized_||!pq(l)?l:l===gl(e.base_,t)?(gd(e),e.copy_[t]=gf(l,e)):l},has:(e,t)=>t in p0(e),ownKeys:e=>Reflect.ownKeys(p0(e)),set(e,t,r){let n=gu(p0(e),t);if(null==n?void 0:n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=gl(p0(e),t),s=null==n?void 0:n[pz];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if((r===n?0!==r||1/r==1/n:r!=r&&n!=n)&&(void 0!==r||pZ(e.base_,t)))return!0;gd(e),gc(e)}return!!(e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=r,e.assigned_[t]=!0,!0)},deleteProperty:(e,t)=>(void 0!==gl(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,gd(e),gc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let r=p0(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){p$(11)},getPrototypeOf:e=>pH(e.base_),setPrototypeOf(){p$(12)}},ga={};function gl(e,t){let r=e[pz];return(r?p0(r):e)[t]}function gu(e,t){if(!(t in e))return;let r=pH(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=pH(r)}}function gc(e){!e.modified_&&(e.modified_=!0,e.parent_&&gc(e.parent_))}function gd(e){e.copy_||(e.copy_=p1(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function gf(e,t){let r=pX(e)?p4("MapSet").proxyMap_(e,t):pY(e)?p4("MapSet").proxySet_(e,t):function(e,t){let r=Array.isArray(e),n={type_:+!!r,scope_:t?t.scope_:es,modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},s=n,o=go;r&&(s=[n],o=ga);let{revoke:a,proxy:l}=Proxy.revocable(s,o);return n.draft_=l,n.revoke_=a,l}(e,t);return(t?t.scope_:es).drafts_.push(r),r}pK(go,(e,t)=>{ga[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ga.deleteProperty=function(e,t){return ga.set.call(this,e,t,void 0)},ga.set=function(e,t,r){return go.set.call(this,e[0],t,r,e[0])};var gh=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{let n;if("function"==typeof e&&"function"!=typeof t){let r=t;t=e;let n=this;return function(e=r,...s){return n.produce(e,e=>t.call(this,e,...s))}}if("function"!=typeof t&&p$(6),void 0!==r&&"function"!=typeof r&&p$(7),pq(e)){let s=ge(this),o=gf(e,void 0),a=!0;try{n=t(o),a=!1}finally{a?p9(s):p7(s)}return p5(s,r),gr(n,s)}if(e&&"object"==typeof e)p$(1,e);else{if(void 0===(n=t(e))&&(n=e),n===pF&&(n=void 0),this.autoFreeze_&&p2(n,!0),r){let t=[],s=[];p4("Patches").generateReplacementPatches_(e,n,t,s),r(t,s)}return n}},this.produceWithPatches=(e,t)=>{let r,n;return"function"==typeof e?(t,...r)=>this.produceWithPatches(t,t=>e(t,...r)):[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;pq(e)||p$(8),pV(e)&&(pV(t=e)||p$(10,t),e=function e(t){let r;if(!pq(t)||p8(t))return t;let n=t[pz];if(n){if(!n.modified_)return n.base_;n.finalized_=!0,r=p1(t,n.scope_.immer_.useStrictShallowCopy_)}else r=p1(t,!0);return pK(r,(t,n)=>{pQ(r,t,e(n))}),n&&(n.finalized_=!1),r}(t));let r=ge(this),n=gf(e,void 0);return n[pz].isManual_=!0,p7(r),n}finishDraft(e,t){let r=e&&e[pz];r&&r.isManual_||p$(9);let{scope_:n}=r;return p5(n,t),gr(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=p4("Patches").applyPatches_;return pV(e)?n(e,t):this.produce(e,e=>n(e,t))}},gp=gh.produce;async function gg(e,t=h8){tX(e.addresses.length>0,"Addresses param is empty");let r=e.addresses[0],n=await this.getAddressProviderHeader(r),s=this.getKyOptions();return gp(await h5.post({endpoint:"wallet/get-actions/v1",body:JSON.stringify(e),headers:{"Zerion-Wallet-Provider":n},...t},s),e=>{e.data.forEach(e=>{e.timestamp=1e3*e.timestamp})})}async function gm(e,t=h8){let r=await this.getAddressProviderHeader(e.address),n=this.getKyOptions();return h5.post({endpoint:"wallet/simulate-signature/v1",body:JSON.stringify(e),headers:{"Zerion-Wallet-Provider":r},...t},n)}async function gy(e,t=h8){let r=await this.getAddressProviderHeader(e.address),n=this.getKyOptions();return h5.post({endpoint:"wallet/simulate-transaction/v1",body:JSON.stringify(e),headers:{"Zerion-Wallet-Provider":r},...t},n)}gh.produceWithPatches.bind(gh),gh.setAutoFreeze.bind(gh),gh.setUseStrictShallowCopy.bind(gh),gh.applyPatches.bind(gh),gh.createDraft.bind(gh),gh.finishDraft.bind(gh);let gb=Object.assign({getAddressProviderHeader:hI,getKyOptions:()=>({hooks:{afterResponse:[(e,t,r)=>{"challenge"===r.headers.get("cf-mitigated")&&hw.emit("openTurnstile")}]}})},{getGasPrices:function({chain:e},t){let r=new URLSearchParams({chain:e.toString()}),n=this.getKyOptions(),s=`chain/get-gas-prices/v1?${r}`;return h5.get({endpoint:s,...t},n)},securityCheckUrl:function(e,t){let r=new URLSearchParams({url:e.url}),n=this.getKyOptions(),s=`security/check-url/v1?${r}`;return h5.get({endpoint:s,...t},n)},registerChain:function(e,t){let{chain:r,addresses:n}=e,s=this.getKyOptions();return h5.post({endpoint:"wallet/connect-chain/v1",body:JSON.stringify({chain:r,addresses:n}),...t},s)},registerAddresses:function(e,t){let r=this.getKyOptions();return h5.post({endpoint:"wallet/import/v1",body:JSON.stringify({addresses:e.addresses}),...t},r)},getWalletsMeta:function(e,t=h8){return h7(e,this.getKyOptions(),t)},getWalletsMetaByChunks:pe,paymasterCheckEligibility:function(e,t){let{from:r,to:n,nonce:s,value:o="0x0",chainId:a,data:l="0x0",gas:u,gasPerPubdataByte:c=pI}=e,d={transaction:{from:r,to:n,chainId:pk(a).toLowerCase(),nonce:pk(s),value:pk(o??"0x0"),data:pk(l??"0x0"),gas:pk(u),gasPerPubdataByte:c}},f=this.getKyOptions();return h5.post({endpoint:"/paymaster/check-eligibility/v2",body:JSON.stringify(d),...t},f)},getPaymasterParams:function(e,t){let{transaction:r}=e,n={transaction:{value:r.value??"0x0",data:r.data??"0x0",from:r.from,to:r.to,nonce:r.nonce,chainId:r.chainId,gas:r.gas,gasPerPubdataByte:r.gasPerPubdataByte,maxFee:r.maxFee,maxPriorityFee:r.maxPriorityFee}},s=this.getKyOptions();return h5.post({endpoint:"/paymaster/get-params/v3",body:JSON.stringify(n),...t},s)},walletGetPositions:p_,walletGetPortfolio:pP,walletGetActions:gg,walletSimulateSignature:gm,walletSimulateTransaction:gy,checkReferral:function(e){let t=new URLSearchParams({referralCode:e.referralCode}),r=this.getKyOptions(),n=`wallet/check-referral/v1?${t}`;return h5.get({endpoint:n},r)},referWallet:function(e){let t=this.getKyOptions();return h5.post({endpoint:"wallet/refer/v1",body:JSON.stringify({address:e.address.toLowerCase(),referralCode:e.referralCode,signature:e.signature})},t)},claimRetro:function(e){let t=this.getKyOptions();return h5.post({endpoint:"wallet/claim-retro/v1",body:JSON.stringify({address:hh(e.address),signature:e.signature})},t)},assetGetFungibleFullInfo:pC,assetGetFungiblePnl:pT,assetListFungibles:function(e,t){let r=this.getKyOptions();return h5.post({endpoint:"asset/list-fungibles/v1",body:JSON.stringify(e),...t},r)},walletGetAssetDetails:pO,assetGetChart:pR,searchQuery:function({query:e,currency:t,limit:r=5},n){let s=new URLSearchParams({query:e,currency:t,limit:String(r)}),o=`search/query/v1?${s}`,a=this.getKyOptions();return h5.get({endpoint:o,...n},a)},searchQueryFungibles:function({query:e,currency:t,chain:r,sort:n,cursor:s,limit:o=5},a){let l=new URLSearchParams({currency:t,limit:String(o)});e&&l.append("query",e),null!=r&&l.append("chain",r),null!=n&&l.append("sort",n),s&&l.append("cursor",s);let u=`search/query-fungibles/v1?${l}`,c=this.getKyOptions();return h5.get({endpoint:u,...a},c)}}),gv={ens:0,lens:1,ud:2,unspecified:3};function gx(e,t){return gv[e.provider]-gv[t.provider]}async function gw(e){try{let t=await gb.getWalletsMeta({identifiers:[e]});return t.data?.[0]?.identities.sort(gx).map(({handle:e})=>e)||[]}catch{return[]}}async function gE(e){let t=await gw(e);return t&&t.length>0?t[0]:null}function gA(e,t=6){let r=e.startsWith("0x")?2+t:t;return`${e.slice(0,r)}\u2026${e.slice(0-t)}`}function gS(e,{padding:t=4,maxCharacters:r}={}){var n;if("string"!=typeof e.address)throw Error(`Address is missing from Wallet object: ${JSON.stringify(e)}`);let s=(n=e.name??gA(e.address,t),/\bhacked\b/i.test(n)||/\bleaked\b/i.test(n)||/\blost\b/i.test(n)?`${n} \u{1F631}`:n);return r&&s.length>r?gA(s,Math.floor((r-1)/2)):s}let gk=new Set,gI=(y=["","\uD83E\uDD18",""])[Math.floor(Math.random()*y.length)];function g_({wallet:e,padding:t,maxCharacters:r,render:n}){let s=function(e,{padding:t=5,maxCharacters:r}={}){var n;let{isLoading:s,data:o}=ha({queryKey:(n=["name-service/lookupAddressName",e.address],gk.add(td(n)),n),queryFn:async()=>gE(e.address),enabled:!e.name,suspense:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,retryOnMount:!1,retry:0,staleTime:4e4,useErrorBoundary:!1}),a=s?null:o;if(e.name)return{type:2,value:gS(e,{padding:t,maxCharacters:r})};let l=a??gS(e,{padding:t,maxCharacters:r}),u=+!!a;return"0x42b9df65b219b3dd36ff330a4dd8f327a6ada990"===hh(e.address)?{type:u,value:`${l} ${gI}`}:{type:u,value:l}}(e,{padding:t,maxCharacters:r});return n?n(s):(0,eh.jsx)("span",{style:{wordBreak:"break-all"},children:s.value})}let gP={bip44:{regex:/(?:m\/)?44'\/60'\/0'\/0\/(\d+)/,fromIndex:e=>`m/44'/60'/0'/0/${e}`},ledgerLive:{regex:/(?:m\/)?44'\/60'\/(\d+)'\/0\/0/,fromIndex:e=>`m/44'/60'/${e}'/0/0`},ledger:{regex:/(?:m\/)?44'\/60'\/0'\/(\d+)/,fromIndex:e=>`m/44'/60'/0'/${e}`},solanaBip44Change:{regex:/(?:m\/)?44'\/501'\/(\d+)'\/0'/,fromIndex:e=>`m/44'/501'/${e}'/0'`},solanaBip44:{regex:/(?:m\/)?44'\/501'\/(\d+)'/,fromIndex:e=>`m/44'/501'/${e}'`},solanaDeprecated:{regex:/(?:m\/)?501'\/(\d+)'\/0'\/0'/,fromIndex:e=>`m/501'/${e}'/0'/0'`}};ed("d1AnZ");let gC=new tz({defaultOptions:{queries:{networkMode:"offlineFirst",suspense:!0},mutations:{networkMode:"always",onError(e,t,r){rq.emit("mutationError",e,t,r)}}}});rq.on("uiAccountsChanged",()=>{gC.removeQueries({queryKey:["wallet/getCurrentAddress"]}),gC.removeQueries({queryKey:["wallet/uiGetCurrentWallet"]})}),rq.on("sidepanel/activeTabUpdated",()=>{gC.refetchQueries(["activeTab/origin"])}),rq.on("ethereumEvent",()=>{gC.refetchQueries(["requestChainForOrigin"])}),rq.on("sessionLogout",()=>{gC.getMutationCache().clear(),gC.removeQueries()});var ep=(ed("d1AnZ"),ed("d1AnZ"));let gO=[,,,,];function gT(){let e=gO[0]^gO[0]<<11;return gO[0]=gO[1],gO[1]=gO[2],gO[2]=gO[3],gO[3]=gO[3]^gO[3]>>19^e^e>>8,(gO[3]>>>0)/0x80000000}function gR(){let e=Math.floor(360*gT());return"hsl("+e+","+(60*gT()+40+"%")+","+(gT()+gT()+gT()+gT())*25+"%)"}var gB=function(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){let n=e.charAt(r),s=n.charCodeAt(0);if(255!==t[s])throw TypeError(n+" is ambiguous");t[s]=r}let r=e.length,n=e.charAt(0),s=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function a(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let o=0,a=0,l=0;for(;e[o]===n;)a++,o++;let u=(e.length-o)*s+1>>>0,c=new Uint8Array(u);for(;e[o];){let n=t[e.charCodeAt(o)];if(255===n)return;let s=0;for(let e=u-1;(0!==n||s<l)&&-1!==e;e--,s++)n+=r*c[e]>>>0,c[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw Error("Non-zero carry");l=s,o++}let d=u-l;for(;d!==u&&0===c[d];)d++;let f=new Uint8Array(a+(u-d)),h=a;for(;d!==u;)f[h++]=c[d++];return f}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let s=0,a=0,l=0,u=t.length;for(;l!==u&&0===t[l];)l++,s++;let c=(u-l)*o+1>>>0,d=new Uint8Array(c);for(;l!==u;){let e=t[l],n=0;for(let t=c-1;(0!==e||n<a)&&-1!==t;t--,n++)e+=256*d[t]>>>0,d[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw Error("Non-zero carry");a=n,l++}let f=c-a;for(;f!==c&&0===d[f];)f++;let h=n.repeat(s);for(;f<c;++f)h+=e.charAt(d[f]);return h},decodeUnsafe:a,decode:function(e){let t=a(e);if(t)return t;throw Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function gN({address:e,size:t,borderRadius:r}){let n=(0,ep.useMemo)(()=>{var r;return!function(e){try{return 32===gB.decode(e).length}catch{return!1}}(e)?(!function(e,t){let r=function(e){let t=Math.ceil(e/2),r=e-t,n=[];for(let s=0;s<e;s++){let e=[];for(let r=0;r<t;r++)e[r]=Math.floor(2.3*gT());let s=e.slice(0,r);s.reverse(),e=e.concat(s);for(let t=0;t<e.length;t++)n.push(e[t])}return n}((e=function(e){let t={};t.seed=e.seed||Math.floor(1e16*Math.random()).toString(16);var r=t.seed;gO.fill(0);for(let e=0;e<r.length;e++)gO[e%4]=(gO[e%4]<<5)-gO[e%4]+r.charCodeAt(e);return t.size=e.size||8,t.scale=e.scale||4,t.color=e.color||gR(),t.bgcolor=e.bgcolor||gR(),t.spotcolor=e.spotcolor||gR(),t}(e||{})).size),n=Math.sqrt(r.length);t.width=t.height=e.size*e.scale;let s=t.getContext("2d");s.fillStyle=e.bgcolor,s.fillRect(0,0,t.width,t.height),s.fillStyle=e.color;for(let t=0;t<r.length;t++)if(r[t]){let o=Math.floor(t/n),a=t%n;s.fillStyle=1==r[t]?e.color:e.spotcolor,s.fillRect(a*e.scale,o*e.scale,e.scale,e.scale)}}({seed:hh(e),size:8,scale:t/8*window.devicePixelRatio},r=document.createElement("canvas")),r):function(e,t){let r,n=t/8*window.devicePixelRatio,s=document.createElement("canvas");s.width=s.height=t*window.devicePixelRatio;let o=s.getContext("2d");o.scale(n,n);let a=(r=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}(e),function(){return(0xffffff&(r=16807*r%0x7fffffff))/0x1000000}),l=[`hsl(${Math.floor(360*a())}, 80%, 60%)`,`hsl(${Math.floor(360*a())}, 70%, 50%)`,`hsl(${Math.floor(360*a())}, 60%, 40%)`,`hsl(${Math.floor(360*a())}, 90%, 70%)`],u=l[Math.floor(a()*l.length)],c=l[Math.floor(a()*l.length)];o.fillStyle=u,o.fillRect(0,0,8,8);for(let e=0;e<8;e++)for(let t=0;t<8;t++)a()>.5?(o.fillStyle=c,o.beginPath(),o.arc(e+.5,t+.5,.4,0,2*Math.PI),o.fill()):(o.fillStyle=`rgba(255, 255, 255, ${.3*a()+.2})`,o.fillRect(e,t,1,1));return s}(hh(e),t)},[e,t]),s=(0,ep.useRef)(null);return(0,ep.useLayoutEffect)(()=>(s.current&&n&&(n.style.borderRadius=`${r}px`,n.style.width=`${t}px`,n.style.height=`${t}px`,n.style.display="block",s.current.appendChild(n)),()=>{n.parentElement?.removeChild(n)}),[n,t,r]),(0,eh.jsx)("span",{ref:s})}ed("d1AnZ");var ep=ed("d1AnZ");function gD({type:e,renderError:t,renderLoading:r,onReady:n,...s}){let[o,a]=(0,ep.useState)(!0),[l,u]=(0,ep.useState)(!1),{src:c}=s;return((0,ep.useLayoutEffect)(()=>{u(!1),a(!0)},[c]),l)?t():(0,eh.jsxs)(eh.Fragment,{children:[el(ep).createElement(e,{...s,onError:()=>{u(!0),a(!1),n?.()},onLoad:()=>{a(!1),n?.()},onLoadedData:()=>{a(!1),n?.()}}),o&&r?r():null]})}let gL=e=>(0,eh.jsx)(gD,{type:"img",...e}),gM=e=>(0,eh.jsx)(gD,{type:"video",...e}),gU=e=>(0,eh.jsx)(gD,{type:"audio",...e}),gF=({image:e="\uD83D\uDDBC",src:t,style:r})=>(0,eh.jsx)("div",{title:"Content failed to load","data-src":t,style:{width:"100%",aspectRatio:"1",borderRadius:8,backgroundImage:"linear-gradient(180deg, #faecff 0%, #cbdaff 100%)",display:"grid",placeContent:"center",marginLeft:"auto",marginRight:"auto",fontSize:32,...r},children:(0,eh.jsx)("span",{style:{userSelect:"none",lineHeight:1},children:e})});function gj({content:e,alt:t,style:r,errorStyle:n,renderLoading:s,className:o,forcePreview:a,onReady:l}){return a&&e?.image_preview_url?(0,eh.jsx)(gL,{src:e.image_preview_url||"no-image",alt:t,style:r,className:o,renderError:()=>(0,eh.jsx)(gF,{style:n,src:e.image_preview_url}),renderLoading:s,onReady:l}):e?.type==="video"&&e?.video_url?(0,eh.jsxs)(gM,{controls:!1,muted:!0,autoPlay:!0,width:"100%",loop:!0,playsInline:!0,style:r,className:o,renderError:()=>(0,eh.jsx)(gF,{image:"\uD83D\uDCF9",style:n,src:e.video_url}),renderLoading:s,onReady:l,children:[(0,eh.jsx)("source",{src:e.video_url}),"Sorry, your browser doesn't support embedded videos."]}):e?.type==="audio"&&e?.audio_url?(0,eh.jsx)(gU,{src:e.audio_url||"",controls:!0,autoPlay:!1,style:r,className:o,renderError:()=>(0,eh.jsx)(gF,{image:"\uD83C\uDFB5",style:n,src:e.audio_url}),renderLoading:s,onReady:l}):e?.image_url?(0,eh.jsx)(gL,{src:e.image_url||"no-image",alt:t,style:r,className:o,renderError:()=>(0,eh.jsx)(gF,{style:n,src:e.image_url}),renderLoading:s,onReady:l}):(0,eh.jsx)(t6,{kind:"body/regular",className:o,children:"Unsupported content"})}var ep=ed("d1AnZ");function gz({width:e,height:t,borderRadius:r,strokeWidth:n=2}){let s=(0,ep.useId)();return(0,eh.jsx)("div",{style:{position:"absolute",top:0,left:0,pointerEvents:"none",display:"flex"},children:(0,eh.jsxs)("svg",{width:e,height:t,viewBox:`0 0 ${e} ${t}`,children:[(0,eh.jsx)("defs",{children:(0,eh.jsxs)("linearGradient",{id:s,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,eh.jsx)("stop",{offset:"0%",stopColor:"#3232DC"}),(0,eh.jsx)("stop",{offset:"50%",stopColor:"#804CBA"}),(0,eh.jsx)("stop",{offset:"100%",stopColor:"#FF7583"})]})}),(0,eh.jsx)("g",{children:(0,eh.jsx)("rect",{x:n/2,y:n/2,rx:r-n/2,width:e-n,height:t-n,strokeWidth:n,fill:"transparent",stroke:`url(#${s})`})})]})})}function g$({active:e,address:t,size:r,nft:n,borderRadius:s,borderWidth:o,onReady:a,highlight:l}){let u=n?.metadata?.content,c=!!u;(0,ep.useEffect)(()=>{c||a?.()},[c,a]);let d=o??(r>24?2:1),f=l?r-4*d:r,h=l?s-2*d:s;return(0,eh.jsxs)("div",{className:"f8WfWa_root",children:[(0,eh.jsxs)("div",{className:e?"f8WfWa_activeIndicatorClip":void 0,style:{width:r,height:r,padding:l?2*d:0},children:[l?(0,eh.jsx)(gz,{width:r,height:r,borderRadius:Number(s),strokeWidth:d}):null,n?.metadata&&u?(0,eh.jsx)(gj,{className:"f8WfWa_media",style:{width:f,height:f,borderRadius:h,objectFit:"cover"},errorStyle:{width:f,height:f},content:{image_preview_url:u.imagePreviewUrl,image_url:u.imageUrl,audio_url:u.audioUrl,video_url:u.videoUrl,type:u.type},alt:`${n.metadata.name} image`,forcePreview:r<=40||"audio"===u.type,onReady:a}):(0,eh.jsx)(gN,{address:t,size:f,borderRadius:h})]}),e?(0,eh.jsx)("div",{className:"f8WfWa_activeIndicator"}):null]})}function gH({active:e=!1,address:t,size:r,borderRadius:n=6,borderWidth:s,icon:o,onReady:a}){let{data:l,isLoading:u}=function({addresses:e,enabled:t=!0,suspense:r=!0,useErrorBoundary:n=!0,staleTime:s}){return ha({enabled:t&&e.length>0,queryKey:["ZerionAPI.getWalletsMetaByChunks",e],queryFn:async()=>{let t=await gb.getWalletsMetaByChunks(e);return t.length>1&&t.forEach(e=>{let t=hh(e.address);gC.setQueryData(["ZerionAPI.getWalletsMetaByChunks",[t]],[e])}),t},suspense:r,useErrorBoundary:n,staleTime:s})}({addresses:[hh(t)],suspense:!1,useErrorBoundary:!1,staleTime:6e5}),c=!!l?.at(0)?.membership.premium;return u?(0,eh.jsx)("div",{style:{width:r,height:r,position:"relative"},children:o}):(0,eh.jsxs)("div",{style:{position:"relative"},children:[(0,eh.jsx)(g$,{active:e,address:t,size:r,nft:l?.at(0)?.nft,borderRadius:n,borderWidth:s,onReady:a,highlight:c}),o]})}function gV({wallets:e,existingAddressesSet:t,listTitle:r,renderDetail:n,renderMedia:s,values:o,onSelect:a,hasMore:l=!1,isLoadingMore:u=!1,displayPathIndex:c=!0,onLoadMore:d,showMoreText:f="Show More",paddingInline:h=8}){return(0,eh.jsxs)(t4,{gap:2,children:[r?(0,eh.jsx)(t6,{kind:"small/accent",children:r}):null,(0,eh.jsx)(hv,{items:e.map((e,r)=>({key:e.address,pad:!1,isInteractive:!0,component:(0,eh.jsx)(hy,{style:{paddingInline:h},onClick:t?.has(hh(e.address))?void 0:()=>a(e.address),children:(0,eh.jsxs)(re,{gap:8,alignItems:"center",justifyContent:"space-between",style:{gridTemplateColumns:c?"minmax(min-content, 18px) 1fr auto":void 0},children:[c?(0,eh.jsx)(t6,{kind:"body/regular",color:"var(--neutral-500)",title:`Derivation path: ${e.mnemonic?.path}`,style:{cursor:"help"},children:e.mnemonic?function(e){for(let t of Object.values(gP)){let r=e.match(t.regex);if(r)return Number(r[1])}return 0}(e.mnemonic.path):null}):null,s?s(r):(0,eh.jsx)(hx,{image:(0,eh.jsx)(gH,{address:e.address,active:!1,size:44,borderRadius:12}),text:(0,eh.jsx)(t6,{kind:"small/regular",children:(0,eh.jsx)(g_,{wallet:e})}),vGap:0,detailText:n?.(r)}),t?.has(hh(e.address))?(0,eh.jsx)(t6,{kind:"caption/regular",color:"var(--neutral-500)",children:"Already added"}):(0,eh.jsx)("span",{children:(0,eh.jsx)(ob,{checked:o.has(e.address),checkedColor:"var(--primary)"})})]})})})).concat(l?[{key:-1,isInteractive:!0,pad:!1,component:(0,eh.jsx)(hy,{onClick:()=>d?.(),disabled:u,children:(0,eh.jsx)(t6,{kind:"body/regular",color:"var(--primary)",children:(0,eh.jsxs)(re,{alignItems:"center",gap:8,children:[u?(0,eh.jsx)(no,{}):null,f]})})})}]:[])})]})}function gq({parts:e,neutralColor:t="var(--neutral-500)"}){return(0,eh.jsx)(eh.Fragment,{children:e.map((e,r)=>(0,eh.jsx)("span",{style:"decimal"===e.type||"fraction"===e.type?{color:t}:void 0,children:e.value},r))})}ed("d1AnZ");var gG={};!function(e){"use strict";var t,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,s=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function u(e){var t=0|e;return e>0||e===t?t:t-1}function c(e){for(var t,r,n=1,s=e.length,o=e[0]+"";n<s;){for(r=14-(t=e[n++]+"").length;r--;t="0"+t);o+=t}for(s=o.length;48===o.charCodeAt(--s););return o.slice(0,s+1||1)}function d(e,t){var r,n,s=e.c,o=t.c,a=e.s,l=t.s,u=e.e,c=t.e;if(!a||!l)return null;if(r=s&&!s[0],n=o&&!o[0],r||n)return r?n?0:-l:a;if(a!=l)return a;if(r=a<0,n=u==c,!s||!o)return n?0:!s^r?1:-1;if(!n)return u>c^r?1:-1;for(a=0,l=(u=s.length)<(c=o.length)?u:c;a<l;a++)if(s[a]!=o[a])return s[a]>o[a]^r?1:-1;return u==c?0:u>c^r?1:-1}function f(e,t,r,n){if(e<t||e>r||e!==s(e))throw Error(o+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function h(e){var t=e.c.length-1;return u(e.e/14)==t&&e.c[t]%2!=0}function p(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function g(e,t,r){var n,s;if(t<0){for(s=r+".";++t;s+=r);e=s+e}else if(n=e.length,++t>n){for(s=r,t-=n;--t;s+=r);e+=s}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(t=function e(t){var m,y,b,v,x,w,E,A,S,k=F.prototype={constructor:F,toString:null,valueOf:null},I=new F(1),_=20,P=4,C=-7,O=21,T=-1e7,R=1e7,B=!1,N=1,D=0,L={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},M="0123456789abcdefghijklmnopqrstuvwxyz",U=!0;function F(e,t){var n,o,l,u,c,d,h,p,g=this;if(!(g instanceof F))return new F(e,t);if(null==t){if(e&&!0===e._isBigNumber){g.s=e.s,!e.c||e.e>R?g.c=g.e=null:e.e<T?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice());return}if((d="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,c=e;c>=10;c/=10,u++);u>R?g.c=g.e=null:(g.e=u,g.c=[e]);return}p=String(e)}else{if(!r.test(p=String(e)))return S(g,p,d);g.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(u=p.indexOf("."))>-1&&(p=p.replace(".","")),(c=p.search(/e/i))>0?(u<0&&(u=c),u+=+p.slice(c+1),p=p.substring(0,c)):u<0&&(u=p.length)}else{if(f(t,2,M.length,"Base"),10==t&&U)return H(g=new F(e),_+g.e+1,P);if(p=String(e),d="number"==typeof e){if(0*e!=0)return S(g,p,d,t);if(g.s=1/e<0?(p=p.slice(1),-1):1,F.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else g.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(n=M.slice(0,t),u=c=0,h=p.length;c<h;c++)if(0>n.indexOf(o=p.charAt(c))){if("."==o){if(c>u){u=h;continue}}else if(!l&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){l=!0,c=-1,u=0;continue}return S(g,String(e),d,t)}d=!1,(u=(p=A(p,t,10,g.s)).indexOf("."))>-1?p=p.replace(".",""):u=p.length}for(c=0;48===p.charCodeAt(c);c++);for(h=p.length;48===p.charCodeAt(--h););if(p=p.slice(c,++h)){if(h-=c,d&&F.DEBUG&&h>15&&(e>0x1fffffffffffff||e!==s(e)))throw Error(a+g.s*e);if((u=u-c-1)>R)g.c=g.e=null;else if(u<T)g.c=[g.e=0];else{if(g.e=u,g.c=[],c=(u+1)%14,u<0&&(c+=14),c<h){for(c&&g.c.push(+p.slice(0,c)),h-=14;c<h;)g.c.push(+p.slice(c,c+=14));c=14-(p=p.slice(c)).length}else c-=h;for(;c--;p+="0");g.c.push(+p)}}else g.c=[g.e=0]}function j(e,t,r,n){var s,o,a,l,u;if(null==r?r=P:f(r,0,8),!e.c)return e.toString();if(s=e.c[0],a=e.e,null==t)u=c(e.c),u=1==n||2==n&&(a<=C||a>=O)?p(u,a):g(u,a,"0");else if(o=(e=H(new F(e),t,r)).e,l=(u=c(e.c)).length,1==n||2==n&&(t<=o||o<=C)){for(;l<t;u+="0",l++);u=p(u,o)}else if(t-=a,u=g(u,o,"0"),o+1>l){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=o-l)>0)for(o+1==l&&(u+=".");t--;u+="0");return e.s<0&&s?"-"+u:u}function z(e,t){for(var r,n,s=1,o=new F(e[0]);s<e.length;s++)(n=new F(e[s])).s&&(r=d(o,n))!==t&&(0!==r||o.s!==t)||(o=n);return o}function $(e,t,r){for(var n=1,s=t.length;!t[--s];t.pop());for(s=t[0];s>=10;s/=10,n++);return(r=n+14*r-1)>R?e.c=e.e=null:r<T?e.c=[e.e=0]:(e.e=r,e.c=t),e}function H(e,t,r,o){var a,u,c,d,f,h,p,g=e.c;if(g){n:{for(a=1,d=g[0];d>=10;d/=10,a++);if((u=t-a)<0)u+=14,c=t,p=s((f=g[h=0])/l[a-c-1]%10);else if((h=n((u+1)/14))>=g.length)if(o){for(;g.length<=h;g.push(0));f=p=0,a=1,u%=14,c=u-14+1}else break n;else{for(a=1,f=d=g[h];d>=10;d/=10,a++);u%=14,p=(c=u-14+a)<0?0:s(f/l[a-c-1]%10)}if(o=o||t<0||null!=g[h+1]||(c<0?f:f%l[a-c-1]),o=r<4?(p||o)&&(0==r||r==(e.s<0?3:2)):p>5||5==p&&(4==r||o||6==r&&(u>0?c>0?f/l[a-c]:0:g[h-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,o?(t-=e.e+1,g[0]=l[(14-t%14)%14],e.e=-t||0):g[0]=e.e=0,e;if(0==u?(g.length=h,d=1,h--):(g.length=h+1,d=l[14-u],g[h]=c>0?s(f/l[a-c]%l[c])*d:0),o)for(;;)if(0==h){for(u=1,c=g[0];c>=10;c/=10,u++);for(c=g[0]+=d,d=1;c>=10;c/=10,d++);u!=d&&(e.e++,1e14==g[0]&&(g[0]=1));break}else{if(g[h]+=d,1e14!=g[h])break;g[h--]=0,d=1}for(u=g.length;0===g[--u];g.pop());}e.e>R?e.c=e.e=null:e.e<T&&(e.c=[e.e=0])}return e}function V(e){var t,r=e.e;return null===r?e.toString():(t=c(e.c),t=r<=C||r>=O?p(t,r):g(t,r,"0"),e.s<0?"-"+t:t)}return F.clone=e,F.ROUND_UP=0,F.ROUND_DOWN=1,F.ROUND_CEIL=2,F.ROUND_FLOOR=3,F.ROUND_HALF_UP=4,F.ROUND_HALF_DOWN=5,F.ROUND_HALF_EVEN=6,F.ROUND_HALF_CEIL=7,F.ROUND_HALF_FLOOR=8,F.EUCLID=9,F.config=F.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(f(r=e[t],0,1e9,t),_=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(f(r=e[t],0,8,t),P=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(f(r[0],-1e9,0,t),f(r[1],0,1e9,t),C=r[0],O=r[1]):(f(r,-1e9,1e9,t),C=-(O=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)f(r[0],-1e9,-1,t),f(r[1],1,1e9,t),T=r[0],R=r[1];else if(f(r,-1e9,1e9,t),r)T=-(R=r<0?-r:r);else throw Error(o+t+" cannot be zero: "+r);if(e.hasOwnProperty(t="CRYPTO"))if(!!(r=e[t])===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))B=r;else throw B=!r,Error(o+"crypto unavailable");else B=r;else throw Error(o+t+" not true or false: "+r);if(e.hasOwnProperty(t="MODULO_MODE")&&(f(r=e[t],0,9,t),N=r),e.hasOwnProperty(t="POW_PRECISION")&&(f(r=e[t],0,1e9,t),D=r),e.hasOwnProperty(t="FORMAT"))if("object"==typeof(r=e[t]))L=r;else throw Error(o+t+" not an object: "+r);if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(o+t+" invalid: "+r);U="0123456789"==r.slice(0,10),M=r}}else throw Error(o+"Object expected: "+e);return{DECIMAL_PLACES:_,ROUNDING_MODE:P,EXPONENTIAL_AT:[C,O],RANGE:[T,R],CRYPTO:B,MODULO_MODE:N,POW_PRECISION:D,FORMAT:L,ALPHABET:M}},F.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!F.DEBUG)return!0;var t,r,n=e.c,a=e.e,l=e.s;n:if("[object Array]"==({}).toString.call(n)){if((1===l||-1===l)&&a>=-1e9&&a<=1e9&&a===s(a)){if(0===n[0]){if(0===a&&1===n.length)return!0;break n}if((t=(a+1)%14)<1&&(t+=14),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=1e14||r!==s(r))break n;if(0!==r)return!0}}}else if(null===n&&null===a&&(null===l||1===l||-1===l))return!0;throw Error(o+"Invalid BigNumber: "+e)},F.maximum=F.max=function(){return z(arguments,-1)},F.minimum=F.min=function(){return z(arguments,1)},m=0x20000000000000*Math.random()&2097151?function(){return s(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},F.random=function(e){var t,r,a,u,c,d=0,h=[],p=new F(I);if(null==e?e=_:f(e,0,1e9),u=n(e/14),B)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(u*=2));d<u;)(c=131072*t[d]+(t[d+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[d]=r[0],t[d+1]=r[1]):(h.push(c%1e14),d+=2);d=u/2}else if(crypto.randomBytes){for(t=crypto.randomBytes(u*=7);d<u;)(c=(31&t[d])*0x1000000000000+0x10000000000*t[d+1]+0x100000000*t[d+2]+0x1000000*t[d+3]+(t[d+4]<<16)+(t[d+5]<<8)+t[d+6])>=9e15?crypto.randomBytes(7).copy(t,d):(h.push(c%1e14),d+=7);d=u/7}else throw B=!1,Error(o+"crypto unavailable");if(!B)for(;d<u;)(c=m())<9e15&&(h[d++]=c%1e14);for(u=h[--d],e%=14,u&&e&&(c=l[14-e],h[d]=s(u/c)*c);0===h[d];h.pop(),d--);if(d<0)h=[a=0];else{for(a=-1;0===h[0];h.splice(0,1),a-=14);for(d=1,c=h[0];c>=10;c/=10,d++);d<14&&(a-=14-d)}return p.e=a,p.c=h,p},F.sum=function(){for(var e=1,t=arguments,r=new F(t[0]);e<t.length;)r=r.plus(t[e++]);return r},A=function(){var e="0123456789";function t(e,t,r,n){for(var s,o,a=[0],l=0,u=e.length;l<u;){for(o=a.length;o--;a[o]*=t);for(a[0]+=n.indexOf(e.charAt(l++)),s=0;s<a.length;s++)a[s]>r-1&&(null==a[s+1]&&(a[s+1]=0),a[s+1]+=a[s]/r|0,a[s]%=r)}return a.reverse()}return function(r,n,s,o,a){var l,u,d,f,h,p,m,y,b=r.indexOf("."),v=_,x=P;for(b>=0&&(f=D,D=0,r=r.replace(".",""),p=(y=new F(n)).pow(r.length-b),D=f,y.c=t(g(c(p.c),p.e,"0"),10,s,e),y.e=y.c.length),d=f=(m=t(r,n,s,a?(l=M,e):(l=e,M))).length;0==m[--f];m.pop());if(!m[0])return l.charAt(0);if(b<0?--d:(p.c=m,p.e=d,p.s=o,m=(p=E(p,y,v,x,s)).c,h=p.r,d=p.e),b=m[u=d+v+1],f=s/2,h=h||u<0||null!=m[u+1],h=x<4?(null!=b||h)&&(0==x||x==(p.s<0?3:2)):b>f||b==f&&(4==x||h||6==x&&1&m[u-1]||x==(p.s<0?8:7)),u<1||!m[0])r=h?g(l.charAt(1),-v,l.charAt(0)):l.charAt(0);else{if(m.length=u,h)for(--s;++m[--u]>s;)m[u]=0,u||(++d,m=[1].concat(m));for(f=m.length;!m[--f];);for(b=0,r="";b<=f;r+=l.charAt(m[b++]));r=g(r,d,l.charAt(0))}return r}}(),E=function(){function e(e,t,r){var n,s,o,a,l=0,u=e.length,c=t%1e7,d=t/1e7|0;for(e=e.slice();u--;)n=d*(o=e[u]%1e7)+(a=e[u]/1e7|0)*c,l=((s=c*o+n%1e7*1e7+l)/r|0)+(n/1e7|0)+d*a,e[u]=s%r;return l&&(e=[l].concat(e)),e}function t(e,t,r,n){var s,o;if(r!=n)o=r>n?1:-1;else for(s=o=0;s<r;s++)if(e[s]!=t[s]){o=e[s]>t[s]?1:-1;break}return o}function r(e,t,r,n){for(var s=0;r--;)e[r]-=s,s=+(e[r]<t[r]),e[r]=s*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,o,a,l,c){var d,f,h,p,g,m,y,b,v,x,w,E,A,S,k,I,_,P=n.s==o.s?1:-1,C=n.c,O=o.c;if(!C||!C[0]||!O||!O[0])return new F(!n.s||!o.s||(C?O&&C[0]==O[0]:!O)?NaN:C&&0==C[0]||!O?0*P:P/0);for(v=(b=new F(P)).c=[],P=a+(f=n.e-o.e)+1,c||(c=1e14,f=u(n.e/14)-u(o.e/14),P=P/14|0),h=0;O[h]==(C[h]||0);h++);if(O[h]>(C[h]||0)&&f--,P<0)v.push(1),p=!0;else{for(S=C.length,I=O.length,h=0,P+=2,(g=s(c/(O[0]+1)))>1&&(O=e(O,g,c),C=e(C,g,c),I=O.length,S=C.length),A=I,w=(x=C.slice(0,I)).length;w<I;x[w++]=0);_=[0].concat(_=O.slice()),k=O[0],O[1]>=c/2&&k++;do{if(g=0,(d=t(O,x,I,w))<0){if(E=x[0],I!=w&&(E=E*c+(x[1]||0)),(g=s(E/k))>1)for(g>=c&&(g=c-1),y=(m=e(O,g,c)).length,w=x.length;1==t(m,x,y,w);)g--,r(m,I<y?_:O,y,c),y=m.length,d=1;else 0==g&&(d=g=1),y=(m=O.slice()).length;if(y<w&&(m=[0].concat(m)),r(x,m,w,c),w=x.length,-1==d)for(;1>t(O,x,I,w);)g++,r(x,I<w?_:O,w,c),w=x.length}else 0===d&&(g++,x=[0]);v[h++]=g,x[0]?x[w++]=C[A]||0:(x=[C[A]],w=1)}while((A++<S||null!=x[0])&&P--)p=null!=x[0],v[0]||v.splice(0,1)}if(1e14==c){for(h=1,P=v[0];P>=10;P/=10,h++);H(b,a+(b.e=h+14*f-1)+1,l,p)}else b.e=f,b.r=+p;return b}}(),y=/^(-?)0([xbo])(?=\w[\w.]*$)/i,b=/^([^.]+)\.$/,v=/^\.([^.]+)$/,x=/^-?(Infinity|NaN)$/,w=/^\s*\+(?=[\w.])|^\s+|\s+$/g,S=function(e,t,r,n){var s,a=r?t:t.replace(w,"");if(x.test(a))e.s=isNaN(a)?null:a<0?-1:1;else{if(!r&&(a=a.replace(y,function(e,t,r){return s="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=s?e:t}),n&&(s=n,a=a.replace(b,"$1").replace(v,"0.$1")),t!=a))return new F(a,s);if(F.DEBUG)throw Error(o+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},k.absoluteValue=k.abs=function(){var e=new F(this);return e.s<0&&(e.s=1),e},k.comparedTo=function(e,t){return d(this,new F(e,t))},k.decimalPlaces=k.dp=function(e,t){var r,n,s;if(null!=e)return f(e,0,1e9),null==t?t=P:f(t,0,8),H(new F(this),e+this.e+1,t);if(!(r=this.c))return null;if(n=((s=r.length-1)-u(this.e/14))*14,s=r[s])for(;s%10==0;s/=10,n--);return n<0&&(n=0),n},k.dividedBy=k.div=function(e,t){return E(this,new F(e,t),_,P)},k.dividedToIntegerBy=k.idiv=function(e,t){return E(this,new F(e,t),0,1)},k.exponentiatedBy=k.pow=function(e,t){var r,a,l,u,c,d,f,p,g,m=this;if((e=new F(e)).c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+V(e));if(null!=t&&(t=new F(t)),d=e.e>14,!m.c||!m.c[0]||1==m.c[0]&&!m.e&&1==m.c.length||!e.c||!e.c[0])return g=new F(Math.pow(+V(m),d?e.s*(2-h(e)):+V(e))),t?g.mod(t):g;if(f=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new F(NaN);(a=!f&&m.isInteger()&&t.isInteger())&&(m=m.mod(t))}else{if(e.e>9&&(m.e>0||m.e<-1||(0==m.e?m.c[0]>1||d&&m.c[1]>=24e7:m.c[0]<8e13||d&&m.c[0]<=9999975e7)))return u=m.s<0&&h(e)?-0:0,m.e>-1&&(u=1/u),new F(f?1/u:u);D&&(u=n(D/14+2))}for(d?(r=new F(.5),f&&(e.s=1),p=h(e)):p=(l=Math.abs(+V(e)))%2,g=new F(I);;){if(p){if(!(g=g.times(m)).c)break;u?g.c.length>u&&(g.c.length=u):a&&(g=g.mod(t))}if(l){if(0===(l=s(l/2)))break;p=l%2}else if(H(e=e.times(r),e.e+1,1),e.e>14)p=h(e);else{if(0==(l=+V(e)))break;p=l%2}m=m.times(m),u?m.c&&m.c.length>u&&(m.c.length=u):a&&(m=m.mod(t))}return a?g:(f&&(g=I.div(g)),t?g.mod(t):u?H(g,D,P,c):g)},k.integerValue=function(e){var t=new F(this);return null==e?e=P:f(e,0,8),H(t,t.e+1,e)},k.isEqualTo=k.eq=function(e,t){return 0===d(this,new F(e,t))},k.isFinite=function(){return!!this.c},k.isGreaterThan=k.gt=function(e,t){return d(this,new F(e,t))>0},k.isGreaterThanOrEqualTo=k.gte=function(e,t){return 1===(t=d(this,new F(e,t)))||0===t},k.isInteger=function(){return!!this.c&&u(this.e/14)>this.c.length-2},k.isLessThan=k.lt=function(e,t){return 0>d(this,new F(e,t))},k.isLessThanOrEqualTo=k.lte=function(e,t){return -1===(t=d(this,new F(e,t)))||0===t},k.isNaN=function(){return!this.s},k.isNegative=function(){return this.s<0},k.isPositive=function(){return this.s>0},k.isZero=function(){return!!this.c&&0==this.c[0]},k.minus=function(e,t){var r,n,s,o,a=this.s;if(t=(e=new F(e,t)).s,!a||!t)return new F(NaN);if(a!=t)return e.s=-t,this.plus(e);var l=this.e/14,c=e.e/14,d=this.c,f=e.c;if(!l||!c){if(!d||!f)return d?(e.s=-t,e):new F(f?this:NaN);if(!d[0]||!f[0])return f[0]?(e.s=-t,e):new F(d[0]?this:3==P?-0:0)}if(l=u(l),c=u(c),d=d.slice(),a=l-c){for((o=a<0)?(a=-a,s=d):(c=l,s=f),s.reverse(),t=a;t--;s.push(0));s.reverse()}else for(n=(o=(a=d.length)<(t=f.length))?a:t,a=t=0;t<n;t++)if(d[t]!=f[t]){o=d[t]<f[t];break}if(o&&(s=d,d=f,f=s,e.s=-e.s),(t=(n=f.length)-(r=d.length))>0)for(;t--;d[r++]=0);for(t=1e14-1;n>a;){if(d[--n]<f[n]){for(r=n;r&&!d[--r];d[r]=t);--d[r],d[n]+=1e14}d[n]-=f[n]}for(;0==d[0];d.splice(0,1),--c);return d[0]?$(e,d,c):(e.s=3==P?-1:1,e.c=[e.e=0],e)},k.modulo=k.mod=function(e,t){var r,n;return(e=new F(e,t),this.c&&e.s&&(!e.c||e.c[0]))?e.c&&(!this.c||this.c[0])?(9==N?(n=e.s,e.s=1,r=E(this,e,0,3),e.s=n,r.s*=n):r=E(this,e,0,N),(e=this.minus(r.times(e))).c[0]||1!=N||(e.s=this.s),e):new F(this):new F(NaN)},k.multipliedBy=k.times=function(e,t){var r,n,s,o,a,l,c,d,f,h,p,g,m,y=this.c,b=(e=new F(e,t)).c;if(!y||!b||!y[0]||!b[0])return this.s&&e.s&&(!y||y[0]||b)&&(!b||b[0]||y)?(e.s*=this.s,y&&b?(e.c=[0],e.e=0):e.c=e.e=null):e.c=e.e=e.s=null,e;for(n=u(this.e/14)+u(e.e/14),e.s*=this.s,(c=y.length)<(h=b.length)&&(m=y,y=b,b=m,s=c,c=h,h=s),s=c+h,m=[];s--;m.push(0));for(s=h;--s>=0;){for(r=0,p=b[s]%1e7,g=b[s]/1e7|0,o=s+(a=c);o>s;)l=g*(d=y[--a]%1e7)+(f=y[a]/1e7|0)*p,r=((d=p*d+l%1e7*1e7+m[o]+r)/1e14|0)+(l/1e7|0)+g*f,m[o--]=d%1e14;m[o]=r}return r?++n:m.splice(0,1),$(e,m,n)},k.negated=function(){var e=new F(this);return e.s=-e.s||null,e},k.plus=function(e,t){var r,n=this.s;if(t=(e=new F(e,t)).s,!n||!t)return new F(NaN);if(n!=t)return e.s=-t,this.minus(e);var s=this.e/14,o=e.e/14,a=this.c,l=e.c;if(!s||!o){if(!a||!l)return new F(n/0);if(!a[0]||!l[0])return l[0]?e:new F(a[0]?this:0*n)}if(s=u(s),o=u(o),a=a.slice(),n=s-o){for(n>0?(o=s,r=l):(n=-n,r=a),r.reverse();n--;r.push(0));r.reverse()}for((n=a.length)-(t=l.length)<0&&(r=l,l=a,a=r,t=n),n=0;t;)n=(a[--t]=a[t]+l[t]+n)/1e14|0,a[t]=1e14===a[t]?0:a[t]%1e14;return n&&(a=[n].concat(a),++o),$(e,a,o)},k.precision=k.sd=function(e,t){var r,n,s;if(null!=e&&!!e!==e)return f(e,1,1e9),null==t?t=P:f(t,0,8),H(new F(this),e,t);if(!(r=this.c))return null;if(n=14*(s=r.length-1)+1,s=r[s]){for(;s%10==0;s/=10,n--);for(s=r[0];s>=10;s/=10,n++);}return e&&this.e+1>n&&(n=this.e+1),n},k.shiftedBy=function(e){return f(e,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+e)},k.squareRoot=k.sqrt=function(){var e,t,r,n,s,o=this.c,a=this.s,l=this.e,d=_+4,f=new F("0.5");if(1!==a||!o||!o[0])return new F(!a||a<0&&(!o||o[0])?NaN:o?this:1/0);if(0==(a=Math.sqrt(+V(this)))||a==1/0?(((t=c(o)).length+l)%2==0&&(t+="0"),a=Math.sqrt(+t),l=u((l+1)/2)-(l<0||l%2),r=new F(t=a==1/0?"5e"+l:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new F(a+""),r.c[0]){for((a=(l=r.e)+d)<3&&(a=0);;)if(s=r,r=f.times(s.plus(E(this,s,d,1))),c(s.c).slice(0,a)===(t=c(r.c)).slice(0,a)){if(r.e<l&&--a,"9999"!=(t=t.slice(a-3,a+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(H(r,r.e+_+2,1),e=!r.times(r).eq(this));break}if(!n&&(H(s,s.e+_+2,0),s.times(s).eq(this))){r=s;break}d+=4,a+=4,n=1}}return H(r,r.e+_+1,P,e)},k.toExponential=function(e,t){return null!=e&&(f(e,0,1e9),e++),j(this,e,t,1)},k.toFixed=function(e,t){return null!=e&&(f(e,0,1e9),e=e+this.e+1),j(this,e,t)},k.toFormat=function(e,t,r){var n;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=L;else if("object"!=typeof r)throw Error(o+"Argument not an object: "+r);if(n=this.toFixed(e,t),this.c){var s,a=n.split("."),l=+r.groupSize,u=+r.secondaryGroupSize,c=r.groupSeparator||"",d=a[0],f=a[1],h=this.s<0,p=h?d.slice(1):d,g=p.length;if(u&&(s=l,l=u,u=s,g-=s),l>0&&g>0){for(s=g%l||l,d=p.substr(0,s);s<g;s+=l)d+=c+p.substr(s,l);u>0&&(d+=c+p.slice(s)),h&&(d="-"+d)}n=f?d+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?f.replace(RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):d}return(r.prefix||"")+n+(r.suffix||"")},k.toFraction=function(e){var t,r,n,s,a,u,d,f,h,p,g,m,y=this.c;if(null!=e&&(!(d=new F(e)).isInteger()&&(d.c||1!==d.s)||d.lt(I)))throw Error(o+"Argument "+(d.isInteger()?"out of range: ":"not an integer: ")+V(d));if(!y)return new F(this);for(t=new F(I),h=r=new F(I),n=f=new F(I),m=c(y),a=t.e=m.length-this.e-1,t.c[0]=l[(u=a%14)<0?14+u:u],e=!e||d.comparedTo(t)>0?a>0?t:h:d,u=R,R=1/0,d=new F(m),f.c[0]=0;p=E(d,t,0,1),1!=(s=r.plus(p.times(n))).comparedTo(e);)r=n,n=s,h=f.plus(p.times(s=h)),f=s,t=d.minus(p.times(s=t)),d=s;return s=E(e.minus(r),n,0,1),f=f.plus(s.times(h)),r=r.plus(s.times(n)),f.s=h.s=this.s,a*=2,g=1>E(h,n,a,P).minus(this).abs().comparedTo(E(f,r,a,P).minus(this).abs())?[h,n]:[f,r],R=u,g},k.toNumber=function(){return+V(this)},k.toPrecision=function(e,t){return null!=e&&f(e,1,1e9),j(this,e,t,2)},k.toString=function(e){var t,r=this,n=r.s,s=r.e;return null===s?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=s<=C||s>=O?p(c(r.c),s):g(c(r.c),s,"0"):10===e&&U?t=g(c((r=H(new F(r),_+s+1,P)).c),r.e,"0"):(f(e,2,M.length,"Base"),t=A(g(c(r.c),s,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},k.valueOf=k.toJSON=function(){return V(this)},k._isBigNumber=!0,null!=t&&F.set(t),F}()).default=t.BigNumber=t,"function"==typeof define&&define.amd?define(function(){return t}):gG?gG=t:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=t)}(gG);var gW=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function gK(e,t){if(e.length!==t.length)return!1;for(var r,n,s=0;s<e.length;s++)if(!((r=e[s])===(n=t[s])||gW(r)&&gW(n))&&1)return!1;return!0}let gJ=e=>t=>t.filter(e=>"literal"!==e.type).map(t=>"currency"===t.type?{...t,value:e}:t),gZ={usd:{name:"US Dollar",code:"usd",symbol:"$",options:null},eth:{name:"Ether",code:"eth",symbol:"",modifyParts:gJ(""),options:{default:{maximumFractionDigits:4},lessThanOne:{maximumFractionDigits:6}}},btc:{name:"Bitcoin",code:"btc",symbol:"",modifyParts:gJ(""),options:{default:{maximumFractionDigits:4},lessThanOne:{maximumFractionDigits:6}}},eur:{name:"Euro",code:"eur",symbol:"",options:null},gbp:{name:"British Pound",code:"gbp",symbol:"",options:null},cny:{name:"Chinese Yuan",code:"cny",symbol:"",options:null},rub:{name:"Russian Ruble",code:"rub",symbol:"",options:{currencyDisplay:"narrowSymbol"}},krw:{name:"South Korean Won",code:"krw",symbol:"",options:{minimumFractionDigits:0,maximumFractionDigits:0}},aud:{name:"Australian Dollar",code:"aud",symbol:"$",options:null},inr:{name:"Indian Rupee",code:"inr",symbol:"",options:null},jpy:{name:"Japanese Yen",code:"jpy",symbol:"",options:null},try:{name:"Turkish Lira",code:"try",symbol:"",options:{currencyDisplay:"narrowSymbol"}},cad:{name:"Canadian Dollar",code:"cad",symbol:"$",options:null},nzd:{name:"New Zealand Dollar",code:"nzd",symbol:"$",options:null},zar:{name:"South African Rand",code:"zar",symbol:"R",options:{currencyDisplay:"narrowSymbol"}}},gQ=function(e,t){void 0===t&&(t=gK);var r=null;function n(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var o=e.apply(this,n);return r={lastResult:o,lastArgs:n,lastThis:this},o}return n.clear=function(){r=null},n}((e,t,r={})=>new Intl.NumberFormat(e,{style:"currency",currency:t,...r}));eo||(eo={});var ep=ed("d1AnZ");ed("d1AnZ"),ed("d1AnZ");var gX=e=>(0,eh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:(0,eh.jsx)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59 7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12 5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4"})});function gY({title:e,alignTitle:t="center",closeKind:r="icon"}){return(0,eh.jsxs)("div",{style:{position:"relative",display:"grid",gridTemplateColumns:"center"===t?"1fr 4fr 1fr":"max-content 1fr"},children:[(0,eh.jsx)("div",{style:{gridColumnStart:"center"===t?2:1,placeSelf:"center"},children:e}),(0,eh.jsx)("form",{method:"dialog",style:{placeSelf:"end"},onSubmit:e=>{e.stopPropagation()},children:(0,eh.jsx)(rs,{kind:"ghost",value:"cancel","aria-label":"Close",style:"text"===r?{color:"var(--primary)",fontWeight:400}:{padding:4,position:"absolute",top:-8,right:-8},size:32,children:"text"===r?"Close":(0,eh.jsx)(gX,{role:"presentation",style:{display:"block",marginInline:"auto"}})})})]})}var ep=ed("d1AnZ");let g0={0:"_3ANLXG_slideUp",1:"_3ANLXG_slideUpNoFadeIn"},g1=el(ep).forwardRef(({height:e="70vh",style:t,className:r,containerStyle:n,animationPreset:s=0,displayGrid:o=!1,...a},l)=>(0,eh.jsx)(ox,{ref:l,className:el(rt)(g0[s],"_3ANLXG_dialog",r,o?"_3ANLXG_displayGrid":null),style:{border:"none",bottom:0,marginBottom:0,padding:0,height:e,maxHeight:"initial",width:"100%",maxWidth:"var(--sheet-dialog-max-width)",...t},containerStyle:{backgroundColor:"var(--z-index-0)",borderTopLeftRadius:12,borderTopRightRadius:12,paddingInline:16,paddingBlock:24,boxShadow:"0 0 500px 50px #00000024",...n},...a}));function g2({error:e}){let t=(0,ep.useRef)(null),r=tZ({mutationFn:async()=>hS.request("reportLedgerError",{errorMessage:e?.toString()||"Unknown Ledger error"})});return(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(rs,{kind:"text-primary",onClick:()=>{t.current?.showModal()},children:"Troubleshooting"}),(0,eh.jsxs)(g1,{ref:t,height:"fit-content",children:[(0,eh.jsx)(gY,{alignTitle:"start",title:"Troubleshooting"}),(0,eh.jsx)(rH,{height:24}),(0,eh.jsxs)(t4,{gap:16,style:{textAlign:"left"},children:[(0,eh.jsx)(t6,{kind:"body/regular",children:"If you're experiencing issues with your Ledger device, try the following steps:"}),(0,eh.jsx)(t6,{kind:"small/regular",style:{padding:"12px 16px",borderRadius:8,backgroundColor:"var(--neutral-100)"},children:"There is most likely another unfinished operation in progress. Or device is already connected via usb to another app or window of this extension"}),(0,eh.jsxs)("ul",{style:{listStyle:"disc",paddingLeft:20,margin:0,display:"flex",flexDirection:"column",gap:12},children:[(0,eh.jsx)("li",{children:(0,eh.jsx)(t6,{kind:"small/regular",children:"Unlock the device and close all apps"})}),(0,eh.jsx)("li",{children:(0,eh.jsx)(t6,{kind:"small/regular",children:"Check if other apps on your computer are using the device"})}),(0,eh.jsx)("li",{children:(0,eh.jsx)(t6,{kind:"small/regular",children:"Reconnect the device"})}),(0,eh.jsx)("li",{children:(0,eh.jsx)(t6,{kind:"small/regular",children:"Restart the device"})}),(0,eh.jsx)("li",{children:(0,eh.jsx)(t6,{kind:"small/regular",children:"Update the firmware to the latest version"})})]}),(0,eh.jsx)(rH,{height:8}),(0,eh.jsx)(t6,{kind:"body/regular",children:"If the problem persists, you can submit a report to help us improve."}),e?r.isIdle||r.isLoading?(0,eh.jsx)(rs,{kind:"primary",onClick:()=>r.mutate(),disabled:r.isLoading,children:"Submit Report"}):(0,eh.jsx)(t6,{kind:"body/regular",children:"Report submitted. Thank you!"}):null]})]})]})}function g3(){let e=new URL(window.location.href).searchParams.get("currency");return tX(e,"currency param is required"),e}function g8({wallet:e,walletInfo:t}){let r=(0,ep.useMemo)(g3,[]);return(0,eh.jsx)(hx,{image:(0,eh.jsx)(g$,{address:e.address,active:!1,size:40,borderRadius:12}),text:t?.name??gS(e),vGap:0,detailText:(0,eh.jsxs)(t6,{kind:"headline/h3",children:[" ",t?.portfolio!=null?(0,eh.jsx)(gq,{parts:function(e,t,r,n=null){let s=e instanceof el(gG)?e.toNumber():Number(e),o=function(e,t,r){let n=function(e,t){if(t){if(t.options&&"lessThanOne"in t.options){let r=Math.abs(e);return t.options.lessThanOne&&r<1?t.options.lessThanOne:t.options.default}return t.options}return null}(e,t);return r?{...n,...r}:n}(s,gZ[r]||null,n),a=gQ("en",r,o).formatToParts(s),l=gZ[r]?.modifyParts;return l?l(a):a}(t?.portfolio??0,0,r)}):""]})})}function g6({wallet:e,handleRequest:t}){let{data:r}=ha({suspense:!1,queryKey:["iframe/wallet-info",e.address],queryFn:()=>t({method:"wallet-info",params:{address:e.address}}),staleTime:1/0});return(0,eh.jsx)(g8,{wallet:e,walletInfo:r})}function g4({existingAddressesSet:e,onImport:t,handleRequest:r,isFetchingNextPage:n,onFetchNextPage:s,wallets:o,itemsByAddress:a}){let[l,u]=(0,ep.useState)(()=>new Set),c=(0,ep.useCallback)(e=>{u(t=>{let r=new Set(t);return r.has(e)?(r.delete(e),r):r.add(e)})},[]);return(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsxs)(nx,{paddingInline:!1,style:{flexGrow:1,overflow:"auto",height:0,"--surface-background-color":"var(--background)"},children:[(0,eh.jsx)(gV,{values:l,wallets:o,renderMedia:e=>(0,eh.jsx)(g6,{wallet:o[e],handleRequest:r}),renderDetail:null,listTitle:null,onSelect:c,existingAddressesSet:e,hasMore:!0,isLoadingMore:n,onLoadMore:()=>{s()}}),(0,eh.jsx)(rH,{height:12})]}),(0,eh.jsxs)(nx,{paddingInline:!0,style:{position:"sticky",bottom:0,borderTop:"1px solid var(--neutral-300)",backgroundColor:"var(--background)"},children:[(0,eh.jsx)(rH,{height:24}),(0,eh.jsx)(rs,{style:{width:"100%"},kind:"primary",disabled:0===l.size,onClick:()=>{t(Array.from(l).map(e=>{let t=a.get(e);return tX(t,`Record for ${e} not found`),{address:e,name:null,derivationPath:t.derivationPath}}))},children:"Continue"+(l.size?` (${l.size})`:"")}),(0,eh.jsx)(rH,{height:24})]})]})}function g5({ledger:e,existingAddressesSet:t,onImport:r,handleRequest:n}){let[s,o]=(0,ep.useState)(null),[a,l]=(0,ep.useState)(null),[u,c]=(0,ep.useState)(null),[d,f]=(0,ep.useState)(0),{sessionId:h}=e,{data:p,fetchNextPage:g,isFetchingNextPage:m,isFetching:y,isLoading:b,error:v,refetch:x}=ho(to({queryKey:["ledger/addresses",5,a,h,s,c,f],queryFn:async({pageParam:e=0})=>null===s||null===a?[]:"ecdsa"===s?(0,nv.getAddressesEth)({type:a,from:e,count:5},{sessionId:h,onInteractionRequested:c,onProgress:t=>0===e?f(t):void 0}):(0,nv.getAddressesSolana)({type:a,from:e,count:5},{sessionId:h,onInteractionRequested:c,onProgress:t=>0===e?f(t):void 0}),getNextPageParam:(e,t)=>t.reduce((e,t)=>e+t.length,0),retry:0,refetchOnWindowFocus:!1,suspense:!1,staleTime:1/0,useErrorBoundary:!1,enabled:null!==s&&null!==a},void 0,void 0),f8),w=v?(0,nv.parseLedgerError)(v):null,E=!!w&&(0,nv.deniedByUser)(w),A=!!w&&!E;(0,ep.useEffect)(()=>{y||c(null)},[y]);let S=(0,ep.useMemo)(()=>new Map(p?.pages.flatMap(e=>e.map(e=>[e.account.address,e]))),[p]),k=(0,ep.useMemo)(()=>p?.pages.flatMap(e=>e.map(e=>({address:e.account.address,name:null,privateKey:"<ledger-private-key>",mnemonic:{path:e.derivationPath,phrase:"<ledger-mnemonic>"}}))),[p]);return null===s||null===a?(0,eh.jsxs)(r8,{style:{height:"100%",position:"relative"},paddingInline:24,children:[(0,eh.jsxs)(nx,{paddingInline:!0,style:{position:"sticky",top:0,backgroundColor:"var(--background)",zIndex:1,textAlign:"center"},children:[(0,eh.jsx)(t6,{kind:"headline/hero",children:"Select Ecosystem"}),(0,eh.jsx)(rH,{height:24})]}),(0,eh.jsxs)(t4,{gap:12,style:{justifyItems:"center",width:"100%",flexGrow:1,paddingBottom:80},children:[(0,eh.jsx)(rs,{style:{width:320,alignSelf:"end"},onClick:()=>{o("ecdsa"),l("ledgerLive")},children:(0,eh.jsxs)(re,{gap:8,alignItems:"center",children:[(0,eh.jsx)(fz,{style:{width:24,height:24}}),(0,eh.jsx)("span",{children:"Connect Ethereum Address"})]})}),(0,eh.jsx)(rs,{style:{width:320},onClick:()=>{o("ed25519"),l("solanaBip44Change")},children:(0,eh.jsxs)(re,{gap:8,alignItems:"center",children:[(0,eh.jsx)(f$,{style:{width:24,height:24}}),(0,eh.jsx)("span",{children:"Connect Solana Address"})]})})]})]}):(0,eh.jsxs)(r8,{style:{height:"100%",position:"relative"},paddingInline:24,children:[(0,eh.jsxs)(nx,{paddingInline:!0,style:{position:"sticky",top:0,backgroundColor:"var(--background)",zIndex:1},children:[(0,eh.jsx)(t6,{kind:"headline/hero",children:"Select Wallets"}),(0,eh.jsx)(rH,{height:24})]}),(0,eh.jsxs)(t4,{gap:12,style:{justifyItems:"center",width:"100%"},children:[(0,eh.jsx)("div",{style:{placeSelf:"center",display:"flex",gap:12},children:(0,eh.jsxs)(hf,{kind:"secondary",children:[(0,eh.jsx)(hd,{name:"curve",value:"ecdsa",checked:"ecdsa"===s,onChange:e=>{o(e.currentTarget.value),l("ledgerLive"),f(0)},style:{width:120},disabled:y,children:(0,eh.jsxs)(re,{gap:8,alignItems:"center",children:[(0,eh.jsx)(fz,{}),(0,eh.jsx)("span",{children:"EVM"})]})}),(0,eh.jsx)(hd,{name:"curve",value:"ed25519",checked:"ed25519"===s,onChange:e=>{o(e.currentTarget.value),l("solanaBip44Change"),f(0)},style:{width:120},disabled:y,children:(0,eh.jsxs)(re,{gap:8,alignItems:"center",children:[(0,eh.jsx)(f$,{}),(0,eh.jsx)("span",{children:"Solana"})]})})]})}),(0,eh.jsx)("div",{style:{width:"100%"},children:"ecdsa"===s?(0,eh.jsxs)(hf,{style:{paddingTop:4},children:[(0,eh.jsx)(hd,{name:"pathType",value:"ledgerLive",checked:"ledgerLive"===a,onChange:e=>{l(e.currentTarget.value),f(0)},disabled:y,children:"Ledger Live"}),(0,eh.jsx)(hd,{name:"pathType",value:"bip44",checked:"bip44"===a,onChange:e=>{l(e.currentTarget.value),f(0)},disabled:y,children:"BIP44"}),(0,eh.jsx)(hd,{name:"pathType",value:"ledger",checked:"ledger"===a,onChange:e=>{l(e.currentTarget.value),f(0)},disabled:y,children:"Legacy"})]}):(0,eh.jsxs)(hf,{style:{paddingTop:4},children:[(0,eh.jsx)(hd,{name:"pathType",value:"solanaBip44Change",checked:"solanaBip44Change"===a,onChange:e=>{l(e.currentTarget.value),f(0)},children:"Bip44 Change"}),(0,eh.jsx)(hd,{name:"pathType",value:"solanaBip44",checked:"solanaBip44"===a,onChange:e=>{l(e.currentTarget.value),f(0)},disabled:y,children:"BIP44"}),(0,eh.jsx)(hd,{name:"pathType",value:"solanaDeprecated",checked:"solanaDeprecated"===a,onChange:e=>{l(e.currentTarget.value),f(0)},disabled:y,children:"Legacy"})]})})]}),(0,eh.jsx)(rH,{height:24}),b?(0,eh.jsx)("div",{style:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:40},children:u&&"none"!==u?(0,eh.jsx)(fW,{kind:u,ecosystem:"ecdsa"===s?"evm":"solana"}):(0,eh.jsx)(nl,{delay:1e3,children:(0,eh.jsxs)(re,{alignItems:"center",gap:24,children:[(0,eh.jsx)(no,{color:"var(--primary)",size:"24px"}),(0,eh.jsxs)(t6,{kind:"headline/h3",children:["Fetching addresses (",d," / ",5,")"]})]})})}):A?(0,eh.jsxs)("div",{style:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:40,flexDirection:"column",gap:16},children:[(0,eh.jsx)(t6,{kind:"small/regular",color:"var(--negative-500)",children:w?w.message:"An unknown error occurred"}),(0,eh.jsx)(g2,{error:w}),(0,eh.jsx)(rs,{onClick:()=>x(),kind:"primary",children:"Try Again"})]}):(0,eh.jsx)(g4,{isFetchingNextPage:m,onFetchNextPage:()=>{g()},wallets:k??[],itemsByAddress:S,onImport:r,handleRequest:n,existingAddressesSet:t},a)]})}function g9({onPostMessage:e,strategy:t}){ny((0,ep.useMemo)(()=>({"--body-height":"100vh"}),[]));let[r]=e7(),n=(0,ep.useMemo)(()=>{let e=r.get("existingAddresses[]");return new Set(e?.split(","))},[r]),s=(0,ep.useMemo)(()=>{let e=r.get("supportBluetooth");return"true"===e||"false"!==e&&null},[r]),[o,a]=(0,ep.useState)(null),[l]=(0,ep.useState)(()=>new fQ);return((0,ep.useEffect)(()=>l.listen(),[l]),o)?(0,eh.jsx)(g5,{ledger:o,existingAddressesSet:n,handleRequest:e=>l.request(e),onImport:t=>{let r=o.device,n={accounts:t,device:{productId:r.id,vendorId:r.vendorId,productName:r.name},provider:"ledger"};e({id:ng(),method:"ledger/import",params:n})}}):(0,eh.jsx)(oC,{onConnect:r=>{"connect"===t?e({id:ng(),method:"ledger/connect"}):a(r)},bluetoothSupportEnabled:s,onBluetoothEnabled:()=>{e({id:ng(),method:"ledger/enable-bluetooth"})}})}let g7=new tz({defaultOptions:{queries:{useErrorBoundary:!0,suspense:!0}}}),me=document.getElementById("root");if(!me)throw Error("#root element not found");E(me).render((0,eh.jsx)(el(ep).StrictMode,{children:(0,eh.jsx)(({client:e,children:t,context:r,contextSharing:n=!1})=>{ep.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);let s=tV(r,n);return ep.createElement(tH.Provider,{value:!r&&n},ep.createElement(s.Provider,{value:e},t))},{client:g7,children:(0,eh.jsx)(function(e){let{basename:t,children:r,future:n,window:s}=e,o=ep.useRef();null==o.current&&(o.current=function(e,t,r,n){void 0===n&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,a=s.history,l=b.Pop,u=null,c=d();function d(){return(a.state||{idx:null}).idx}function f(){l=b.Pop;let e=d(),t=null==e?null:e-c;c=e,u&&u({action:l,location:p.location,delta:t})}function h(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"==typeof e?e:ew(e);return ey(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==c&&(c=0,a.replaceState(eg({},a.state,{idx:c}),""));let p={get action(){return l},get location(){return e(s,a)},listen(e){if(u)throw Error("A history only accepts one active listener");return s.addEventListener(em,f),u=e,()=>{s.removeEventListener(em,f),u=null}},createHref:e=>t(s,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=b.Push;let n=ex(p.location,e,t);r&&r(n,e);let f=ev(n,c=d()+1),h=p.createHref(n);try{a.pushState(f,"",h)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;s.location.assign(h)}o&&u&&u({action:l,location:p.location,delta:1})},replace:function(e,t){l=b.Replace;let n=ex(p.location,e,t);r&&r(n,e);let s=ev(n,c=d()),f=p.createHref(n);a.replaceState(s,"",f),o&&u&&u({action:l,location:p.location,delta:0})},go:e=>a.go(e)};return p}(function(e,t){let{pathname:r="/",search:n="",hash:s=""}=eE(e.location.hash.substr(1));return r.startsWith("/")||r.startsWith(".")||(r="/"+r),ex("",{pathname:r,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let r=e.document.querySelector("base"),n="";if(r&&r.getAttribute("href")){let t=e.location.href,r=t.indexOf("#");n=-1===r?t:t.slice(0,r)}return n+"#"+("string"==typeof t?t:ew(t))},function(e,t){eb("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},{window:s,v5Compat:!0}));let a=o.current,[l,u]=ep.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},d=ep.useCallback(e=>{c&&e6?e6(()=>u(e)):u(e)},[u,c]);return ep.useLayoutEffect(()=>a.listen(d),[a,d]),ep.createElement(eX,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a})},{children:(0,eh.jsxs)(t2,{renderError:e=>(0,eh.jsx)(nn,{error:e}),children:[(0,eh.jsx)(function(){let e=new URL(window.location.href).searchParams.get("theme-state");tX(e,"theme-state param is requred");let t=JSON.parse(e);return(0,ep.useLayoutEffect)(()=>{t.theme===np.dark?document.documentElement.classList.add(el(ni)["theme-dark"]):document.documentElement.classList.remove(el(ni)["theme-dark"]),document.body.style.setProperty("--default-background","var(--background)")},[t.theme]),(0,eh.jsx)(ns,{})},{}),(0,eh.jsx)(el(ep).Suspense,{fallback:(0,eh.jsx)(function(){return ny((0,ep.useMemo)(()=>({height:"100vh"}),[])),(0,eh.jsx)(nh,{})},{}),children:(0,eh.jsx)(function(){!function({kind:e}){let{uiScrollRootElement:t}=(0,ep.useContext)(r5);(0,ep.useEffect)(()=>{let r=nb[e];return t.classList.add(r),()=>{t.classList.remove(r)}},[e,t.classList])}({kind:"white"});let{mutate:e}=tZ({mutationFn:oV,useErrorBoundary:!0}),[t]=e7();return(0,ep.useEffect)(()=>{e()},[e]),(0,eh.jsxs)(eY,{children:[(0,eh.jsx)(eQ,{path:"/",element:(0,eh.jsx)(g9,{strategy:t.get("strategy")||"import",onPostMessage:e=>{window.parent.postMessage(e,window.location.origin)}})}),(0,eh.jsx)(eQ,{path:"/signConnector",element:(0,eh.jsx)(fX,{})})]})},{})})]})})})}))}();