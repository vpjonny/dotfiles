!function(){function e(e){return e&&e.__esModule?e.default:e}function r(e,r,t,n){Object.defineProperty(e,r,{get:t,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},o=t.parcelRequire7f4b;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in s){var r=s[e];delete s[e];var t={id:e,exports:{}};return n[e]=t,r.call(t.exports,t,t.exports),t.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,r){s[e]=r},t.parcelRequire7f4b=o);var i=o.register;i("1awVU",function(r,t){var n=o("kTh4x");o("cETi8");var s=o("ixNqz"),i=o("ikH7M"),a=o("2D2Ch"),c=o("2YGRG");let g=new BroadcastChannel((0,o("7kDo8").setChannelIdInDom)()),l=new(0,a.PortMessageChannel)({name:`${e(n).runtime.id}/ethereum`});l.initialize(),l.emitter.on("message",function(e){(0,s.isJsonRpcPayload)(e)&&(0,s.isJsonRpcResponse)(e)||null!=e&&"object"==typeof e&&("ethereumEvent"===e.type||"walletEvent"===e.type)?g.postMessage(e):console.log("ignored message")}),new(0,i.BackgroundScriptUpdateHandler)({portName:"content-script/keepAlive",performHandshake:!1,onActivate:()=>{l.initialize()}}).keepAlive(),g.addEventListener("message",async e=>{let{data:r}=e;if((0,s.isJsonRpcRequest)(r))try{await l.request(r.method,r.params,r.id)}catch(e){if(e instanceof Error&&"Extension context invalidated."===e.message)window.location.reload();else throw e}else console.log("not a JsonRpcRequest")}),(0,c.initializeInDappNotifications)()}),i("kTh4x",function(e,r){var t,n;"undefined"!=typeof globalThis||"undefined"!=typeof self&&self,n=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw Error("This script should only be loaded in a browser extension.");void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype?e.exports=(e=>{let r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw Error("api-metadata.json has not been included in browser-polyfill");class t extends WeakMap{constructor(e,r){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}let n=e=>e&&"object"==typeof e&&"function"==typeof e.then,s=(r,t)=>(...n)=>{e.runtime.lastError?r.reject(Error(e.runtime.lastError.message)):t.singleCallbackArg||n.length<=1&&!1!==t.singleCallbackArg?r.resolve(n[0]):r.resolve(n)},o=e=>1==e?"argument":"arguments",i=(e,r)=>function(t,...n){if(n.length<r.minArgs)throw Error(`Expected at least ${r.minArgs} ${o(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw Error(`Expected at most ${r.maxArgs} ${o(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((o,i)=>{if(r.fallbackToNoCallback)try{t[e](...n,s({resolve:o,reject:i},r))}catch(s){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,s),t[e](...n),r.fallbackToNoCallback=!1,r.noCallback=!0,o()}else r.noCallback?(t[e](...n),o()):t[e](...n,s({resolve:o,reject:i},r))})},a=(e,r,t)=>new Proxy(r,{apply:(r,n,s)=>t.call(n,e,...s)}),c=Function.call.bind(Object.prototype.hasOwnProperty),g=(e,r={},t={})=>{let n=Object.create(null);return new Proxy(Object.create(e),{has:(r,t)=>t in e||t in n,get(s,o,l){if(o in n)return n[o];if(!(o in e))return;let m=e[o];if("function"==typeof m)if("function"==typeof r[o])m=a(e,e[o],r[o]);else if(c(t,o)){let r=i(o,t[o]);m=a(e,e[o],r)}else m=m.bind(e);else if("object"==typeof m&&null!==m&&(c(r,o)||c(t,o)))m=g(m,r[o],t[o]);else{if(!c(t,"*"))return Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(r){e[o]=r}}),m;m=g(m,r[o],t["*"])}return n[o]=m,m},set:(r,t,s,o)=>(t in n?n[t]=s:e[t]=s,!0),defineProperty:(e,r,t)=>Reflect.defineProperty(n,r,t),deleteProperty:(e,r)=>Reflect.deleteProperty(n,r)})},l=e=>({addListener(r,t,...n){r.addListener(e.get(t),...n)},hasListener:(r,t)=>r.hasListener(e.get(t)),removeListener(r,t){r.removeListener(e.get(t))}}),m=new t(e=>"function"!=typeof e?e:function(r){e(g(r,{},{getContent:{minArgs:0,maxArgs:0}}))}),u=new t(e=>"function"!=typeof e?e:function(r,t,s){let o,i,a=!1,c=new Promise(e=>{o=function(r){a=!0,e(r)}});try{i=e(r,t,o)}catch(e){i=Promise.reject(e)}let g=!0!==i&&n(i);if(!0!==i&&!g&&!a)return!1;return(g?i:c).then(e=>{s(e)},e=>{let r;s({__mozWebExtensionPolyfillReject__:!0,message:e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred"})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)}),!0}),A=({reject:r,resolve:t},n)=>{e.runtime.lastError?"The message port closed before a response was received."===e.runtime.lastError.message?t():r(Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?r(Error(n.message)):t(n)},d=(e,r,t,...n)=>{if(n.length<r.minArgs)throw Error(`Expected at least ${r.minArgs} ${o(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw Error(`Expected at most ${r.maxArgs} ${o(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((e,r)=>{let s=A.bind(null,{resolve:e,reject:r});n.push(s),t.sendMessage(...n)})},p={devtools:{network:{onRequestFinished:l(m)}},runtime:{onMessage:l(u),onMessageExternal:l(u),sendMessage:d.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:d.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},f={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":f},services:{"*":f},websites:{"*":f}},g(e,p,r)})(chrome):e.exports=globalThis.browser},"function"==typeof define&&define.amd?define("webextension-polyfill",["module"],n):n(e)}),i("cETi8",function(e,t){r(e.exports,"STANDARD_ERROR_MAP",function(){return o("jqfWA").STANDARD_ERROR_MAP}),r(e.exports,"formatJsonRpcError",function(){return o("hMMjU").formatJsonRpcError}),r(e.exports,"formatJsonRpcRequest",function(){return o("hMMjU").formatJsonRpcRequest}),r(e.exports,"getBigIntRpcId",function(){return o("hMMjU").getBigIntRpcId}),r(e.exports,"IJsonRpcProvider",function(){return o("hMMjU").IJsonRpcProvider}),r(e.exports,"isJsonRpcError",function(){return o("hMMjU").isJsonRpcError}),r(e.exports,"isJsonRpcPayload",function(){return o("hMMjU").isJsonRpcPayload}),r(e.exports,"isJsonRpcRequest",function(){return o("hMMjU").isJsonRpcRequest}),r(e.exports,"isJsonRpcResponse",function(){return o("hMMjU").isJsonRpcResponse}),r(e.exports,"isJsonRpcResult",function(){return o("hMMjU").isJsonRpcResult}),r(e.exports,"payloadId",function(){return o("hMMjU").payloadId}),r(e.exports,"STANDARD_ERROR_MAP",function(){return o("hMMjU").STANDARD_ERROR_MAP}),r(e.exports,"formatJsonRpcError",function(){return o("cazzP").formatJsonRpcError}),r(e.exports,"formatJsonRpcRequest",function(){return o("cazzP").formatJsonRpcRequest}),r(e.exports,"getBigIntRpcId",function(){return o("cazzP").getBigIntRpcId}),r(e.exports,"payloadId",function(){return o("cazzP").payloadId}),r(e.exports,"IJsonRpcProvider",function(){return o("jG4aq").IJsonRpcProvider}),r(e.exports,"isJsonRpcError",function(){return o("ixNqz").isJsonRpcError}),r(e.exports,"isJsonRpcPayload",function(){return o("ixNqz").isJsonRpcPayload}),r(e.exports,"isJsonRpcRequest",function(){return o("ixNqz").isJsonRpcRequest}),r(e.exports,"isJsonRpcResponse",function(){return o("ixNqz").isJsonRpcResponse}),r(e.exports,"isJsonRpcResult",function(){return o("ixNqz").isJsonRpcResult}),o("jqfWA"),o("02iYr"),o("hn1x6"),o("cazzP"),o("hIfl6"),o("8Opd9"),o("jAVEj"),o("ixNqz")}),i("jqfWA",function(e,t){r(e.exports,"INTERNAL_ERROR",function(){return n}),r(e.exports,"SERVER_ERROR",function(){return s}),r(e.exports,"RESERVED_ERROR_CODES",function(){return o}),r(e.exports,"SERVER_ERROR_CODE_RANGE",function(){return i}),r(e.exports,"STANDARD_ERROR_MAP",function(){return a}),r(e.exports,"DEFAULT_ERROR",function(){return c});let n="INTERNAL_ERROR",s="SERVER_ERROR",o=[-32700,-32600,-32601,-32602,-32603],i=[-32e3,-32099],a={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[n]:{code:-32603,message:"Internal error"},[s]:{code:-32e3,message:"Server error"}},c=s}),i("02iYr",function(e,t){r(e.exports,"isReservedErrorCode",function(){return s}),r(e.exports,"getError",function(){return i}),r(e.exports,"getErrorByCode",function(){return a});var n=o("jqfWA");function s(e){return n.RESERVED_ERROR_CODES.includes(e)}function i(e){return Object.keys(n.STANDARD_ERROR_MAP).includes(e)?n.STANDARD_ERROR_MAP[e]:n.STANDARD_ERROR_MAP[n.DEFAULT_ERROR]}function a(e){let r=Object.values(n.STANDARD_ERROR_MAP).find(r=>r.code===e);return r||n.STANDARD_ERROR_MAP[n.DEFAULT_ERROR]}}),i("hn1x6",function(e,r){var t,n=o("hMMjU");n.isNode,t=e.exports,Object.keys(n).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})}),i("hMMjU",function(e,r){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0});var t=o("eNcrM");t.__exportStar(o("392XA"),e.exports),t.__exportStar(o("hTwT2"),e.exports)}),i("eNcrM",function(e,t){r(e.exports,"__exportStar",function(){return n});function n(e,r){for(var t in e)"default"===t||r.hasOwnProperty(t)||(r[t]=e[t])}}),i("392XA",function(e,r){"use strict";function n(){return(null==t?void 0:t.crypto)||(null==t?void 0:t.msCrypto)||{}}function s(){let e=n();return e.subtle||e.webkitSubtle}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isBrowserCryptoAvailable=e.exports.getSubtleCrypto=e.exports.getBrowerCrypto=void 0,e.exports.getBrowerCrypto=n,e.exports.getSubtleCrypto=s,e.exports.isBrowserCryptoAvailable=function(){return!!n()&&!!s()}}),i("hTwT2",function(e,r){"use strict";function t(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isBrowser=e.exports.isNode=e.exports.isReactNative=void 0,e.exports.isReactNative=t,e.exports.isNode=function(){return!1},e.exports.isBrowser=function(){return!t()}}),i("cazzP",function(e,t){r(e.exports,"payloadId",function(){return i}),r(e.exports,"getBigIntRpcId",function(){return a}),r(e.exports,"formatJsonRpcRequest",function(){return c}),r(e.exports,"formatJsonRpcError",function(){return g});var n=o("02iYr"),s=o("jqfWA");function i(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function a(e=6){return BigInt(i(e))}function c(e,r,t){return{id:t||i(),jsonrpc:"2.0",method:e,params:r}}function g(e,r,t){var o,i;return{id:e,jsonrpc:"2.0",error:(o=r,i=t,void 0===o?(0,n.getError)(s.INTERNAL_ERROR):("string"==typeof o&&(o=Object.assign(Object.assign({},(0,n.getError)(s.SERVER_ERROR)),{message:o})),void 0!==i&&(o.data=i),(0,n.isReservedErrorCode)(o.code)&&(o=(0,n.getErrorByCode)(o.code)),o))}}}),i("hIfl6",function(e,r){}),i("8Opd9",function(e,t){r(e.exports,"IJsonRpcProvider",function(){return o("jG4aq").IJsonRpcProvider}),o("4oddy")}),i("4oddy",function(e,t){r(e.exports,"IJsonRpcProvider",function(){return o("jG4aq").IJsonRpcProvider}),o("1Ssf3"),o("e8Pfi"),o("jG4aq"),o("4Bt8v")}),i("1Ssf3",function(e,r){}),i("e8Pfi",function(e,t){r(e.exports,"IEvents",function(){return n});class n{}}),i("jG4aq",function(e,t){r(e.exports,"IJsonRpcProvider",function(){return i});var n=o("e8Pfi");n.IEvents;class s extends n.IEvents{constructor(){super()}}class i extends s{constructor(e){super()}}}),i("4Bt8v",function(e,r){}),i("jAVEj",function(e,r){}),i("ixNqz",function(e,t){function n(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function s(e){return n(e)&&"method"in e}function o(e){return n(e)&&(i(e)||a(e))}function i(e){return"result"in e}function a(e){return"error"in e}r(e.exports,"isJsonRpcPayload",function(){return n}),r(e.exports,"isJsonRpcRequest",function(){return s}),r(e.exports,"isJsonRpcResponse",function(){return o}),r(e.exports,"isJsonRpcResult",function(){return i}),r(e.exports,"isJsonRpcError",function(){return a})}),i("ikH7M",function(t,n){r(t.exports,"BackgroundScriptUpdateHandler",function(){return c});var s=o("kTh4x"),i=o("fRY2e");async function a(e,r){return new Promise((t,n)=>{let s=r=>{e.onMessage.removeListener(s),e.onDisconnect.removeListener(n),t(r)};e.onMessage.addListener(s),e.onDisconnect.addListener(n),e.postMessage(r)})}class c{constructor({onActivate:r,onDisconnect:t,onFailedHandshake:n,portName:o="handshake",performHandshake:i=!0}){this.handshakeRetries=2,this.onActivate=r,this.onFailedHandshake=n,this.onDisconnect=t,this.portName=o,this.performHandshake=i,e(s).runtime.onMessage.addListener(e=>{"background-initialized"===e.event&&this.onActivate()})}async handleHandshakeFail(){console.warn("Failed handshake!"),this.onFailedHandshake?.()}async handshake(e){let r=window.crypto.getRandomValues(new Uint32Array(1))[0];return Promise.race([a(e,{syn:r}),(0,i.rejectAfterDelay)(1e3,"sendPortMessage")]).then(e=>{if(!e||e.ack!==r+1)throw Error("Unexpected response")}).catch(e=>{if(this.handshakeRetries-=1,this.handshakeRetries)throw e;this.handleHandshakeFail()})}keepAlive(){let r=e(s).runtime.connect({name:this.portName});r.error||(this.performHandshake&&this.handshake(r).catch(()=>{r.disconnect()}),r.onDisconnect.addListener(()=>{this.onDisconnect?.(),this.keepAlive()}))}}}),i("fRY2e",function(e,t){r(e.exports,"rejectAfterDelay",function(){return n});let n=(e,r)=>new Promise((t,n)=>setTimeout(()=>n(Error(`Request timed out: ${r}`)),e))}),i("2D2Ch",function(t,n){r(t.exports,"PortMessageChannel",function(){return l});var s=o("kTh4x");o("cETi8");var i=o("ixNqz"),a=o("f96Vz"),c=o("bmiZs"),g=o("bflL4");class l{constructor({name:e}){this.pendingRequests=new Map,this.emitter=(0,a.createNanoEvents)(),this.name=e,this.trackPendingRequests()}initialize(){this.port=e(s).runtime.connect({name:this.name}),this.port.onMessage.addListener(e=>{this.emitter.emit("message",e)}),this.emitter.emit("connect")}trackPendingRequests(){this.emitter.on("postMessage",e=>{this.pendingRequests.set(e.id,e)}),this.emitter.on("message",e=>{(0,i.isJsonRpcPayload)(e)&&((0,i.isJsonRpcError)(e)&&(console.group("Port method error"),console.table(this.pendingRequests.get(e.id)),console.table(e),console.groupEnd()),this.pendingRequests.delete(e.id))}),this.emitter.on("connect",()=>{for(let e of((0,c.invariant)(this.port,"Port must exist immediately after connect event"),this.pendingRequests.values()))this.port.postMessage(e)})}async request(e,r,t){(0,c.invariant)(this.port,`Port not initialized: (${this.name})`);let n=(0,g.formatJsonRpcRequestPatched)(e,r,t);return this.emitter.emit("postMessage",n),this.port.postMessage(n),this.getPromise(n.id)}getPromise(e){return new Promise((r,t)=>{let n=this.emitter.on("message",s=>{(0,i.isJsonRpcPayload)(s)&&(0,i.isJsonRpcResponse)(s)&&s.id===e&&((0,i.isJsonRpcResult)(s)?r(s.result):t(s.error),n())})})}}}),i("f96Vz",function(e,t){r(e.exports,"createNanoEvents",function(){return n});let n=()=>({emit(e,...r){let t=this.events[e]||[];for(let e=0,n=t.length;e<n;e++)t[e](...r)},events:{},on(e,r){return this.events[e]?.push(r)||(this.events[e]=[r]),()=>{this.events[e]=this.events[e]?.filter(e=>r!==e)}}})}),i("bmiZs",function(e,t){r(e.exports,"invariant",function(){return n});function n(e,r="Assertion failed"){if(!1===e||null==e)if("function"==typeof r)throw r();else throw Error(r)}}),i("bflL4",function(e,t){r(e.exports,"formatJsonRpcRequestPatched",function(){return i}),o("cETi8");var n=o("cazzP"),s=o("lhFOa");function i(e,r,t){let o=t??(0,s.getPayloadId)();return(0,n.formatJsonRpcRequest)(e,r,o)}}),i("lhFOa",function(e,t){r(e.exports,"getPayloadId",function(){return o});let n=1,s=crypto.getRandomValues(new Uint32Array(1))[0];function o(){return s+n++}}),i("2YGRG",function(t,n){r(t.exports,"initializeInDappNotifications",function(){return d});var s=o("kTh4x"),i=o("cZjNc"),a=o("fRY2e"),c=o("a5VTL"),g=o("jZDgX");let l={async chainChanged(e,r){let t=!1;try{await Promise.race([new Promise((e,t)=>{let n=new Image;n.src=r,n.onload=()=>e(),n.onerror=t}),(0,a.rejectAfterDelay)(2e3,`Failed to preload network icon: ${r}`)]),t=!0}catch(e){console.warn(`Failed to load network icon ${r}`,e)}let n=t?(0,g.createNode)("img",{src:r,class:c.networkIcon,alt:""}):null;return(0,g.createNode)("div",{class:`${c.notification} ${c.chainChanged}`},(0,g.createNode)("div",null,(0,g.createNode)("div",{class:c.hstack,style:"grid-gap: 12px;"},(0,g.createNode)("div",{class:c.zerionLogo},n),(0,g.createNode)("div",{class:c.vstack,style:"grid-gap: 0px;"},(0,g.createNode)("div",{class:c.title},"Network Switched"),(0,g.createNode)("div",{class:c.message},e))),(0,g.createNode)("button",{"aria-label":"Close",class:c.closeButton})))},switchChainError:e=>(0,g.createNode)("div",{class:`${c.notification} ${c.switchChainError}`},(0,g.createNode)("div",{class:c.vstack,style:"grid-gap: 8px;"},(0,g.createNode)("div",{class:c.hstack,style:"grid-gap: 12px"},(0,g.createNode)("div",{class:c.zerionLogo}),(0,g.createNode)("div",{class:c.title},"Unrecognized Network")),(0,g.createNode)("div",{class:c.message},"Unable to switch network to the ",(0,g.createNode)("span",{class:c.chainId},`Chain Id: ${e.toString()}`),".\nPlease check your network settings and try again.")),(0,g.createNode)("button",{"aria-label":"Close",class:c.closeButton}))};async function m(e){return"chainChanged"===e.notificationEvent?await l.chainChanged(e.networkName,e.networkIcon):l.switchChainError(e.chainId)}function u(e){e.classList.add(c.fadeOut),setTimeout(()=>{e.remove()},300)}async function A(e){document.querySelectorAll(`.${c.notification}`).forEach(e=>e.remove());let r=await m(e);document.body.appendChild(r);let t="switchChainError"===e.notificationEvent?3500:2400;setTimeout(()=>{r.classList.add(c.show)},100),setTimeout(()=>{u(r)},t),r.querySelector(`.${c.closeButton}`)?.addEventListener("click",()=>{u(r)})}function d(){e(s).runtime.onMessage.addListener((e,r,t)=>{!r.tab&&(0,i.isObj)(e)&&"notificationEvent"in e&&A(e)})}}),i("cZjNc",function(e,t){r(e.exports,"isObj",function(){return n});function n(e){return"object"==typeof e&&null!=e}}),i("a5VTL",function(e,t){var n,s,o,i,a,c,g,l,m,u,A,d,p,f;r(e.exports,"chainChanged",function(){return n},function(e){return n=e}),r(e.exports,"chainId",function(){return s},function(e){return s=e}),r(e.exports,"closeButton",function(){return o},function(e){return o=e}),r(e.exports,"fadeOut",function(){return i},function(e){return i=e}),r(e.exports,"hstack",function(){return a},function(e){return a=e}),r(e.exports,"message",function(){return c},function(e){return c=e}),r(e.exports,"networkIcon",function(){return g},function(e){return g=e}),r(e.exports,"notification",function(){return l},function(e){return l=e}),r(e.exports,"show",function(){return m},function(e){return m=e}),r(e.exports,"slideUp",function(){return u},function(e){return u=e}),r(e.exports,"switchChainError",function(){return A},function(e){return A=e}),r(e.exports,"title",function(){return d},function(e){return d=e}),r(e.exports,"vstack",function(){return p},function(e){return p=e}),r(e.exports,"zerionLogo",function(){return f},function(e){return f=e}),n="ylQr1W_chainChanged",s="ylQr1W_chainId",o="ylQr1W_closeButton",i="ylQr1W_fadeOut",a="ylQr1W_hstack",c="ylQr1W_message",g="ylQr1W_networkIcon",l="ylQr1W_notification",m="ylQr1W_show",u="ylQr1W_slideUp",A="ylQr1W_switchChainError",d="ylQr1W_title",p="ylQr1W_vstack",f="ylQr1W_zerionLogo"}),i("jZDgX",function(e,t){r(e.exports,"createNode",function(){return n});function n(e,r,...t){if("svg"===e)throw Error("Not implemented: svg");let s=document.createElement(e);for(let e in r){let t=r[e];if("style"===e&&"string"!=typeof t)throw Error("style must be a string");e in s?s[e]=null==t?"":t:null==t||!1===t?s.removeAttribute(e):s.setAttribute(e,t)}for(let e of t)null!==e&&s.appendChild("string"==typeof e?document.createTextNode(e):e);return s}}),i("7kDo8",function(e,t){r(e.exports,"setChannelIdInDom",function(){return i});var n=o("h3xyl"),s=o("bmiZs");function i(){let e=document.getElementById("zerion-extension-channel");if(e){let r=e.dataset.walletChannelId;return(0,s.invariant)(r,"set: walletChannelId missing from script tag"),r}{let e=(0,n.nanoid)(),r=document.createElement("script");return r.setAttribute("id","zerion-extension-channel"),r.dataset.walletChannelId=e,r.dataset.walletExtension="true",(document.head||document.documentElement).appendChild(r),e}}}),i("h3xyl",function(e,t){r(e.exports,"nanoid",function(){return n});let n=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,r)=>((r&=63)<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"")}),o("1awVU")}();